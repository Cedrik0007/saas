function cg(i,a){for(var r=0;r<a.length;r++){const o=a[r];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in i)){const l=Object.getOwnPropertyDescriptor(o,c);l&&Object.defineProperty(i,c,l.get?l:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const g of l.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function r(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerPolicy&&(l.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?l.credentials="include":c.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(c){if(c.ep)return;c.ep=!0;const l=r(c);fetch(c.href,l)}})();var My=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function km(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ru={exports:{}},Bc={},Fu={exports:{}},Pn={};var Bh;function dg(){if(Bh)return Pn;Bh=1;var i=Symbol.for("react.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),g=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),A=Symbol.iterator;function R(Q){return Q===null||typeof Q!="object"?null:(Q=A&&Q[A]||Q["@@iterator"],typeof Q=="function"?Q:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,M={};function E(Q,C,G){this.props=Q,this.context=C,this.refs=M,this.updater=G||b}E.prototype.isReactComponent={},E.prototype.setState=function(Q,C){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,C,"setState")},E.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function P(){}P.prototype=E.prototype;function q(Q,C,G){this.props=Q,this.context=C,this.refs=M,this.updater=G||b}var K=q.prototype=new P;K.constructor=q,z(K,E.prototype),K.isPureReactComponent=!0;var H=Array.isArray,fe=Object.prototype.hasOwnProperty,de={current:null},Pe={key:!0,ref:!0,__self:!0,__source:!0};function xe(Q,C,G){var J,oe={},pe=null,be=null;if(C!=null)for(J in C.ref!==void 0&&(be=C.ref),C.key!==void 0&&(pe=""+C.key),C)fe.call(C,J)&&!Pe.hasOwnProperty(J)&&(oe[J]=C[J]);var Fe=arguments.length-2;if(Fe===1)oe.children=G;else if(1<Fe){for(var De=Array(Fe),Ue=0;Ue<Fe;Ue++)De[Ue]=arguments[Ue+2];oe.children=De}if(Q&&Q.defaultProps)for(J in Fe=Q.defaultProps,Fe)oe[J]===void 0&&(oe[J]=Fe[J]);return{$$typeof:i,type:Q,key:pe,ref:be,props:oe,_owner:de.current}}function Z(Q,C){return{$$typeof:i,type:Q.type,key:C,ref:Q.ref,props:Q.props,_owner:Q._owner}}function ge(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===i}function B(Q){var C={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(G){return C[G]})}var $=/\/+/g;function ee(Q,C){return typeof Q=="object"&&Q!==null&&Q.key!=null?B(""+Q.key):C.toString(36)}function ie(Q,C,G,J,oe){var pe=typeof Q;(pe==="undefined"||pe==="boolean")&&(Q=null);var be=!1;if(Q===null)be=!0;else switch(pe){case"string":case"number":be=!0;break;case"object":switch(Q.$$typeof){case i:case a:be=!0}}if(be)return be=Q,oe=oe(be),Q=J===""?"."+ee(be,0):J,H(oe)?(G="",Q!=null&&(G=Q.replace($,"$&/")+"/"),ie(oe,C,G,"",function(Ue){return Ue})):oe!=null&&(ge(oe)&&(oe=Z(oe,G+(!oe.key||be&&be.key===oe.key?"":(""+oe.key).replace($,"$&/")+"/")+Q)),C.push(oe)),1;if(be=0,J=J===""?".":J+":",H(Q))for(var Fe=0;Fe<Q.length;Fe++){pe=Q[Fe];var De=J+ee(pe,Fe);be+=ie(pe,C,G,De,oe)}else if(De=R(Q),typeof De=="function")for(Q=De.call(Q),Fe=0;!(pe=Q.next()).done;)pe=pe.value,De=J+ee(pe,Fe++),be+=ie(pe,C,G,De,oe);else if(pe==="object")throw C=String(Q),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.");return be}function Ne(Q,C,G){if(Q==null)return Q;var J=[],oe=0;return ie(Q,J,"","",function(pe){return C.call(G,pe,oe++)}),J}function Re(Q){if(Q._status===-1){var C=Q._result;C=C(),C.then(function(G){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=G)},function(G){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=G)}),Q._status===-1&&(Q._status=0,Q._result=C)}if(Q._status===1)return Q._result.default;throw Q._result}var Me={current:null},ue={transition:null},Ce={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:ue,ReactCurrentOwner:de};function Le(){throw Error("act(...) is not supported in production builds of React.")}return Pn.Children={map:Ne,forEach:function(Q,C,G){Ne(Q,function(){C.apply(this,arguments)},G)},count:function(Q){var C=0;return Ne(Q,function(){C++}),C},toArray:function(Q){return Ne(Q,function(C){return C})||[]},only:function(Q){if(!ge(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},Pn.Component=E,Pn.Fragment=r,Pn.Profiler=c,Pn.PureComponent=q,Pn.StrictMode=o,Pn.Suspense=m,Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ce,Pn.act=Le,Pn.cloneElement=function(Q,C,G){if(Q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Q+".");var J=z({},Q.props),oe=Q.key,pe=Q.ref,be=Q._owner;if(C!=null){if(C.ref!==void 0&&(pe=C.ref,be=de.current),C.key!==void 0&&(oe=""+C.key),Q.type&&Q.type.defaultProps)var Fe=Q.type.defaultProps;for(De in C)fe.call(C,De)&&!Pe.hasOwnProperty(De)&&(J[De]=C[De]===void 0&&Fe!==void 0?Fe[De]:C[De])}var De=arguments.length-2;if(De===1)J.children=G;else if(1<De){Fe=Array(De);for(var Ue=0;Ue<De;Ue++)Fe[Ue]=arguments[Ue+2];J.children=Fe}return{$$typeof:i,type:Q.type,key:oe,ref:pe,props:J,_owner:be}},Pn.createContext=function(Q){return Q={$$typeof:g,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Q.Provider={$$typeof:l,_context:Q},Q.Consumer=Q},Pn.createElement=xe,Pn.createFactory=function(Q){var C=xe.bind(null,Q);return C.type=Q,C},Pn.createRef=function(){return{current:null}},Pn.forwardRef=function(Q){return{$$typeof:p,render:Q}},Pn.isValidElement=ge,Pn.lazy=function(Q){return{$$typeof:j,_payload:{_status:-1,_result:Q},_init:Re}},Pn.memo=function(Q,C){return{$$typeof:v,type:Q,compare:C===void 0?null:C}},Pn.startTransition=function(Q){var C=ue.transition;ue.transition={};try{Q()}finally{ue.transition=C}},Pn.unstable_act=Le,Pn.useCallback=function(Q,C){return Me.current.useCallback(Q,C)},Pn.useContext=function(Q){return Me.current.useContext(Q)},Pn.useDebugValue=function(){},Pn.useDeferredValue=function(Q){return Me.current.useDeferredValue(Q)},Pn.useEffect=function(Q,C){return Me.current.useEffect(Q,C)},Pn.useId=function(){return Me.current.useId()},Pn.useImperativeHandle=function(Q,C,G){return Me.current.useImperativeHandle(Q,C,G)},Pn.useInsertionEffect=function(Q,C){return Me.current.useInsertionEffect(Q,C)},Pn.useLayoutEffect=function(Q,C){return Me.current.useLayoutEffect(Q,C)},Pn.useMemo=function(Q,C){return Me.current.useMemo(Q,C)},Pn.useReducer=function(Q,C,G){return Me.current.useReducer(Q,C,G)},Pn.useRef=function(Q){return Me.current.useRef(Q)},Pn.useState=function(Q){return Me.current.useState(Q)},Pn.useSyncExternalStore=function(Q,C,G){return Me.current.useSyncExternalStore(Q,C,G)},Pn.useTransition=function(){return Me.current.useTransition()},Pn.version="18.3.1",Pn}var zh;function kf(){return zh||(zh=1,Fu.exports=dg()),Fu.exports}var Uh;function ug(){if(Uh)return Bc;Uh=1;var i=kf(),a=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function g(p,m,v){var j,A={},R=null,b=null;v!==void 0&&(R=""+v),m.key!==void 0&&(R=""+m.key),m.ref!==void 0&&(b=m.ref);for(j in m)o.call(m,j)&&!l.hasOwnProperty(j)&&(A[j]=m[j]);if(p&&p.defaultProps)for(j in m=p.defaultProps,m)A[j]===void 0&&(A[j]=m[j]);return{$$typeof:a,type:p,key:R,ref:b,props:A,_owner:c.current}}return Bc.Fragment=r,Bc.jsx=g,Bc.jsxs=g,Bc}var Wh;function fg(){return Wh||(Wh=1,Ru.exports=ug()),Ru.exports}var t=fg(),X=kf();const Af=km(X),hg=cg({__proto__:null,default:Af},[X]);var Cd={},Du={exports:{}},ts={},Tu={exports:{}},Ou={};var qh;function pg(){return qh||(qh=1,(function(i){function a(ue,Ce){var Le=ue.length;ue.push(Ce);e:for(;0<Le;){var Q=Le-1>>>1,C=ue[Q];if(0<c(C,Ce))ue[Q]=Ce,ue[Le]=C,Le=Q;else break e}}function r(ue){return ue.length===0?null:ue[0]}function o(ue){if(ue.length===0)return null;var Ce=ue[0],Le=ue.pop();if(Le!==Ce){ue[0]=Le;e:for(var Q=0,C=ue.length,G=C>>>1;Q<G;){var J=2*(Q+1)-1,oe=ue[J],pe=J+1,be=ue[pe];if(0>c(oe,Le))pe<C&&0>c(be,oe)?(ue[Q]=be,ue[pe]=Le,Q=pe):(ue[Q]=oe,ue[J]=Le,Q=J);else if(pe<C&&0>c(be,Le))ue[Q]=be,ue[pe]=Le,Q=pe;else break e}}return Ce}function c(ue,Ce){var Le=ue.sortIndex-Ce.sortIndex;return Le!==0?Le:ue.id-Ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var g=Date,p=g.now();i.unstable_now=function(){return g.now()-p}}var m=[],v=[],j=1,A=null,R=3,b=!1,z=!1,M=!1,E=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(ue){for(var Ce=r(v);Ce!==null;){if(Ce.callback===null)o(v);else if(Ce.startTime<=ue)o(v),Ce.sortIndex=Ce.expirationTime,a(m,Ce);else break;Ce=r(v)}}function H(ue){if(M=!1,K(ue),!z)if(r(m)!==null)z=!0,Re(fe);else{var Ce=r(v);Ce!==null&&Me(H,Ce.startTime-ue)}}function fe(ue,Ce){z=!1,M&&(M=!1,P(xe),xe=-1),b=!0;var Le=R;try{for(K(Ce),A=r(m);A!==null&&(!(A.expirationTime>Ce)||ue&&!B());){var Q=A.callback;if(typeof Q=="function"){A.callback=null,R=A.priorityLevel;var C=Q(A.expirationTime<=Ce);Ce=i.unstable_now(),typeof C=="function"?A.callback=C:A===r(m)&&o(m),K(Ce)}else o(m);A=r(m)}if(A!==null)var G=!0;else{var J=r(v);J!==null&&Me(H,J.startTime-Ce),G=!1}return G}finally{A=null,R=Le,b=!1}}var de=!1,Pe=null,xe=-1,Z=5,ge=-1;function B(){return!(i.unstable_now()-ge<Z)}function $(){if(Pe!==null){var ue=i.unstable_now();ge=ue;var Ce=!0;try{Ce=Pe(!0,ue)}finally{Ce?ee():(de=!1,Pe=null)}}else de=!1}var ee;if(typeof q=="function")ee=function(){q($)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Ne=ie.port2;ie.port1.onmessage=$,ee=function(){Ne.postMessage(null)}}else ee=function(){E($,0)};function Re(ue){Pe=ue,de||(de=!0,ee())}function Me(ue,Ce){xe=E(function(){ue(i.unstable_now())},Ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ue){ue.callback=null},i.unstable_continueExecution=function(){z||b||(z=!0,Re(fe))},i.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<ue?Math.floor(1e3/ue):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_getFirstCallbackNode=function(){return r(m)},i.unstable_next=function(ue){switch(R){case 1:case 2:case 3:var Ce=3;break;default:Ce=R}var Le=R;R=Ce;try{return ue()}finally{R=Le}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ue,Ce){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var Le=R;R=ue;try{return Ce()}finally{R=Le}},i.unstable_scheduleCallback=function(ue,Ce,Le){var Q=i.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?Q+Le:Q):Le=Q,ue){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=Le+C,ue={id:j++,callback:Ce,priorityLevel:ue,startTime:Le,expirationTime:C,sortIndex:-1},Le>Q?(ue.sortIndex=Le,a(v,ue),r(m)===null&&ue===r(v)&&(M?(P(xe),xe=-1):M=!0,Me(H,Le-Q))):(ue.sortIndex=C,a(m,ue),z||b||(z=!0,Re(fe))),ue},i.unstable_shouldYield=B,i.unstable_wrapCallback=function(ue){var Ce=R;return function(){var Le=R;R=Ce;try{return ue.apply(this,arguments)}finally{R=Le}}}})(Ou)),Ou}var $h;function mg(){return $h||($h=1,Tu.exports=pg()),Tu.exports}var Hh;function gg(){if(Hh)return ts;Hh=1;var i=kf(),a=mg();function r(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function l(e,n){g(e,n),g(e+"Capture",n)}function g(e,n){for(c[e]=n,e=0;e<n.length;e++)o.add(n[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j={},A={};function R(e){return m.call(A,e)?!0:m.call(j,e)?!1:v.test(e)?A[e]=!0:(j[e]=!0,!1)}function b(e,n,s,f){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return f?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function z(e,n,s,f){if(n===null||typeof n>"u"||b(e,n,s,f))return!0;if(f)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function M(e,n,s,f,y,S,F){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=S,this.removeEmptyString=F}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){E[e]=new M(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];E[n]=new M(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){E[e]=new M(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){E[e]=new M(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){E[e]=new M(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){E[e]=new M(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){E[e]=new M(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){E[e]=new M(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){E[e]=new M(e,5,!1,e.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function q(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(P,q);E[n]=new M(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(P,q);E[n]=new M(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(P,q);E[n]=new M(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){E[e]=new M(e,1,!1,e.toLowerCase(),null,!1,!1)}),E.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){E[e]=new M(e,1,!1,e.toLowerCase(),null,!0,!0)});function K(e,n,s,f){var y=E.hasOwnProperty(n)?E[n]:null;(y!==null?y.type!==0:f||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(z(n,s,y,f)&&(s=null),f||y===null?R(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):y.mustUseProperty?e[y.propertyName]=s===null?y.type===3?!1:"":s:(n=y.attributeName,f=y.attributeNamespace,s===null?e.removeAttribute(n):(y=y.type,s=y===3||y===4&&s===!0?"":""+s,f?e.setAttributeNS(f,n,s):e.setAttribute(n,s))))}var H=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),de=Symbol.for("react.portal"),Pe=Symbol.for("react.fragment"),xe=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),ge=Symbol.for("react.provider"),B=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Me=Symbol.for("react.offscreen"),ue=Symbol.iterator;function Ce(e){return e===null||typeof e!="object"?null:(e=ue&&e[ue]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,Q;function C(e){if(Q===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Q=n&&n[1]||""}return`
`+Q+e}var G=!1;function J(e,n){if(!e||G)return"";G=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(Ve){var f=Ve}Reflect.construct(e,[],n)}else{try{n.call()}catch(Ve){f=Ve}e.call(n.prototype)}else{try{throw Error()}catch(Ve){f=Ve}e()}}catch(Ve){if(Ve&&f&&typeof Ve.stack=="string"){for(var y=Ve.stack.split(`
`),S=f.stack.split(`
`),F=y.length-1,ce=S.length-1;1<=F&&0<=ce&&y[F]!==S[ce];)ce--;for(;1<=F&&0<=ce;F--,ce--)if(y[F]!==S[ce]){if(F!==1||ce!==1)do if(F--,ce--,0>ce||y[F]!==S[ce]){var ve=`
`+y[F].replace(" at new "," at ");return e.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",e.displayName)),ve}while(1<=F&&0<=ce);break}}}finally{G=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?C(e):""}function oe(e){switch(e.tag){case 5:return C(e.type);case 16:return C("Lazy");case 13:return C("Suspense");case 19:return C("SuspenseList");case 0:case 2:case 15:return e=J(e.type,!1),e;case 11:return e=J(e.type.render,!1),e;case 1:return e=J(e.type,!0),e;default:return""}}function pe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pe:return"Fragment";case de:return"Portal";case Z:return"Profiler";case xe:return"StrictMode";case ee:return"Suspense";case ie:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case B:return(e.displayName||"Context")+".Consumer";case ge:return(e._context.displayName||"Context")+".Provider";case $:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ne:return n=e.displayName||null,n!==null?n:pe(e.type)||"Memo";case Re:n=e._payload,e=e._init;try{return pe(e(n))}catch{}}return null}function be(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(n);case 8:return n===xe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Fe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function De(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ue(e){var n=De(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),f=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var y=s.get,S=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return y.call(this)},set:function(F){f=""+F,S.call(this,F)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return f},setValue:function(F){f=""+F},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function _e(e){e._valueTracker||(e._valueTracker=Ue(e))}function at(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),f="";return e&&(f=De(e)?e.checked?"true":"false":e.value),e=f,e!==s?(n.setValue(e),!0):!1}function ot(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function it(e,n){var s=n.checked;return Le({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Y(e,n){var s=n.defaultValue==null?"":n.defaultValue,f=n.checked!=null?n.checked:n.defaultChecked;s=Fe(n.value!=null?n.value:s),e._wrapperState={initialChecked:f,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function mt(e,n){n=n.checked,n!=null&&K(e,"checked",n,!1)}function Mt(e,n){mt(e,n);var s=Fe(n.value),f=n.type;if(s!=null)f==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(f==="submit"||f==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Qe(e,n.type,s):n.hasOwnProperty("defaultValue")&&Qe(e,n.type,Fe(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Ct(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var f=n.type;if(!(f!=="submit"&&f!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Qe(e,n,s){(n!=="number"||ot(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var bt=Array.isArray;function gt(e,n,s,f){if(e=e.options,n){n={};for(var y=0;y<s.length;y++)n["$"+s[y]]=!0;for(s=0;s<e.length;s++)y=n.hasOwnProperty("$"+e[s].value),e[s].selected!==y&&(e[s].selected=y),y&&f&&(e[s].defaultSelected=!0)}else{for(s=""+Fe(s),n=null,y=0;y<e.length;y++){if(e[y].value===s){e[y].selected=!0,f&&(e[y].defaultSelected=!0);return}n!==null||e[y].disabled||(n=e[y])}n!==null&&(n.selected=!0)}}function Rt(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return Le({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ft(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(r(92));if(bt(s)){if(1<s.length)throw Error(r(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:Fe(s)}}function jt(e,n){var s=Fe(n.value),f=Fe(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),f!=null&&(e.defaultValue=""+f)}function Gt(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function qt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jt(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?qt(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ke,qe=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,f,y){MSApp.execUnsafeLocalFunction(function(){return e(n,s,f,y)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(ke=ke||document.createElement("div"),ke.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ke.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function se(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var je={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nt=["Webkit","ms","Moz","O"];Object.keys(je).forEach(function(e){nt.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),je[n]=je[e]})});function pt(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||je.hasOwnProperty(e)&&je[e]?(""+n).trim():n+"px"}function He(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var f=s.indexOf("--")===0,y=pt(s,n[s],f);s==="float"&&(s="cssFloat"),f?e.setProperty(s,y):e[s]=y}}var ct=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qt(e,n){if(n){if(ct[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function yt(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vn=null;function $t(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ut=null,he=null,ft=null;function Dt(e){if(e=gr(e)){if(typeof Ut!="function")throw Error(r(280));var n=e.stateNode;n&&(n=ai(n),Ut(e.stateNode,e.type,n))}}function hn(e){he?ft?ft.push(e):ft=[e]:he=e}function ta(){if(he){var e=he,n=ft;if(ft=he=null,Dt(e),n)for(e=0;e<n.length;e++)Dt(n[e])}}function Sn(e,n){return e(n)}function Ar(){}var pn=!1;function St(e,n,s){if(pn)return e(n,s);pn=!0;try{return Sn(e,n,s)}finally{pn=!1,(he!==null||ft!==null)&&(Ar(),ta())}}function Xt(e,n){var s=e.stateNode;if(s===null)return null;var f=ai(s);if(f===null)return null;s=f[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(e=e.type,f=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!f;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(r(231,n,typeof s));return s}var Jn=!1;if(p)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){Jn=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{Jn=!1}function Ua(e,n,s,f,y,S,F,ce,ve){var Ve=Array.prototype.slice.call(arguments,3);try{n.apply(s,Ve)}catch(lt){this.onError(lt)}}var zn=!1,cr=null,Vn=!1,ws=null,zs={onError:function(e){zn=!0,cr=e}};function Wa(e,n,s,f,y,S,F,ce,ve){zn=!1,cr=null,Ua.apply(zs,arguments)}function Pt(e,n,s,f,y,S,F,ce,ve){if(Wa.apply(this,arguments),zn){if(zn){var Ve=cr;zn=!1,cr=null}else throw Error(r(198));Vn||(Vn=!0,ws=Ve)}}function Rn(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function Ca(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Pa(e){if(Rn(e)!==e)throw Error(r(188))}function xo(e){var n=e.alternate;if(!n){if(n=Rn(e),n===null)throw Error(r(188));return n!==e?null:e}for(var s=e,f=n;;){var y=s.return;if(y===null)break;var S=y.alternate;if(S===null){if(f=y.return,f!==null){s=f;continue}break}if(y.child===S.child){for(S=y.child;S;){if(S===s)return Pa(y),e;if(S===f)return Pa(y),n;S=S.sibling}throw Error(r(188))}if(s.return!==f.return)s=y,f=S;else{for(var F=!1,ce=y.child;ce;){if(ce===s){F=!0,s=y,f=S;break}if(ce===f){F=!0,f=y,s=S;break}ce=ce.sibling}if(!F){for(ce=S.child;ce;){if(ce===s){F=!0,s=S,f=y;break}if(ce===f){F=!0,f=S,s=y;break}ce=ce.sibling}if(!F)throw Error(r(189))}}if(s.alternate!==f)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?e:n}function na(e){return e=xo(e),e!==null?ra(e):null}function ra(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=ra(e);if(n!==null)return n;e=e.sibling}return null}var Ui=a.unstable_scheduleCallback,Us=a.unstable_cancelCallback,Ii=a.unstable_shouldYield,ut=a.unstable_requestPaint,xn=a.unstable_now,rs=a.unstable_getCurrentPriorityLevel,qa=a.unstable_ImmediatePriority,dr=a.unstable_UserBlockingPriority,ga=a.unstable_NormalPriority,$a=a.unstable_LowPriority,as=a.unstable_IdlePriority,Ws=null,Wr=null;function xa(e){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(Ws,e,void 0,(e.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:Kt,oi=Math.log,_o=Math.LN2;function Kt(e){return e>>>=0,e===0?32:31-(oi(e)/_o|0)|0}var Ha=64,Va=4194304;function li(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wi(e,n){var s=e.pendingLanes;if(s===0)return 0;var f=0,y=e.suspendedLanes,S=e.pingedLanes,F=s&268435455;if(F!==0){var ce=F&~y;ce!==0?f=li(ce):(S&=F,S!==0&&(f=li(S)))}else F=s&~y,F!==0?f=li(F):S!==0&&(f=li(S));if(f===0)return 0;if(n!==0&&n!==f&&(n&y)===0&&(y=f&-f,S=n&-n,y>=S||y===16&&(S&4194240)!==0))return n;if((f&4)!==0&&(f|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=f;0<n;)s=31-Kn(n),y=1<<s,f|=e[s],n&=~y;return f}function Ya(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mr(e,n){for(var s=e.suspendedLanes,f=e.pingedLanes,y=e.expirationTimes,S=e.pendingLanes;0<S;){var F=31-Kn(S),ce=1<<F,ve=y[F];ve===-1?((ce&s)===0||(ce&f)!==0)&&(y[F]=Ya(ce,n)):ve<=n&&(e.expiredLanes|=ce),S&=~ce}}function Ga(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function js(){var e=Ha;return Ha<<=1,(Ha&4194240)===0&&(Ha=64),e}function Io(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Un(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Kn(n),e[n]=s}function La(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var f=e.eventTimes;for(e=e.expirationTimes;0<s;){var y=31-Kn(s),S=1<<y;n[y]=0,f[y]=-1,e[y]=-1,s&=~S}}function qr(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var f=31-Kn(s),y=1<<f;y&n|e[f]&n&&(e[f]|=n),s&=~y}}var Ln=0;function ci(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ss,Eo,Ns,$r,qi,bn=!1,ir=[],_a=null,ya=null,Yn=null,aa=new Map,en=new Map,Ja=[],Nn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qs(e,n){switch(e){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":ya=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":aa.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":en.delete(n.pointerId)}}function br(e,n,s,f,y,S){return e===null||e.nativeEvent!==S?(e={blockedOn:n,domEventName:s,eventSystemFlags:f,nativeEvent:S,targetContainers:[y]},n!==null&&(n=gr(n),n!==null&&Eo(n)),e):(e.eventSystemFlags|=f,n=e.targetContainers,y!==null&&n.indexOf(y)===-1&&n.push(y),e)}function $i(e,n,s,f,y){switch(n){case"focusin":return _a=br(_a,e,n,s,f,y),!0;case"dragenter":return ya=br(ya,e,n,s,f,y),!0;case"mouseover":return Yn=br(Yn,e,n,s,f,y),!0;case"pointerover":var S=y.pointerId;return aa.set(S,br(aa.get(S)||null,e,n,s,f,y)),!0;case"gotpointercapture":return S=y.pointerId,en.set(S,br(en.get(S)||null,e,n,s,f,y)),!0}return!1}function $s(e){var n=un(e.target);if(n!==null){var s=Rn(n);if(s!==null){if(n=s.tag,n===13){if(n=Ca(s),n!==null){e.blockedOn=n,qi(e.priority,function(){Ns(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ks(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Hi(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var f=new s.constructor(s.type,s);vn=f,s.target.dispatchEvent(f),vn=null}else return n=gr(s),n!==null&&Eo(n),e.blockedOn=s,!1;n.shift()}return!0}function va(e,n,s){ks(e)&&s.delete(n)}function Mo(){bn=!1,_a!==null&&ks(_a)&&(_a=null),ya!==null&&ks(ya)&&(ya=null),Yn!==null&&ks(Yn)&&(Yn=null),aa.forEach(va),en.forEach(va)}function di(e,n){e.blockedOn===n&&(e.blockedOn=null,bn||(bn=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Mo)))}function tr(e){function n(y){return di(y,e)}if(0<ir.length){di(ir[0],e);for(var s=1;s<ir.length;s++){var f=ir[s];f.blockedOn===e&&(f.blockedOn=null)}}for(_a!==null&&di(_a,e),ya!==null&&di(ya,e),Yn!==null&&di(Yn,e),aa.forEach(n),en.forEach(n),s=0;s<Ja.length;s++)f=Ja[s],f.blockedOn===e&&(f.blockedOn=null);for(;0<Ja.length&&(s=Ja[0],s.blockedOn===null);)$s(s),s.blockedOn===null&&Ja.shift()}var ba=H.ReactCurrentBatchConfig,is=!0;function Hs(e,n,s,f){var y=Ln,S=ba.transition;ba.transition=null;try{Ln=1,Vs(e,n,s,f)}finally{Ln=y,ba.transition=S}}function ur(e,n,s,f){var y=Ln,S=ba.transition;ba.transition=null;try{Ln=4,Vs(e,n,s,f)}finally{Ln=y,ba.transition=S}}function Vs(e,n,s,f){if(is){var y=Hi(e,n,s,f);if(y===null)Bo(e,n,f,ui,s),qs(e,f);else if($i(y,e,n,s,f))f.stopPropagation();else if(qs(e,f),n&4&&-1<Nn.indexOf(e)){for(;y!==null;){var S=gr(y);if(S!==null&&Ss(S),S=Hi(e,n,s,f),S===null&&Bo(e,n,f,ui,s),S===y)break;y=S}y!==null&&f.stopPropagation()}else Bo(e,n,f,null,s)}}var ui=null;function Hi(e,n,s,f){if(ui=null,e=$t(f),e=un(e),e!==null)if(n=Rn(e),n===null)e=null;else if(s=n.tag,s===13){if(e=Ca(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return ui=e,null}function Ys(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rs()){case qa:return 1;case dr:return 4;case ga:case $a:return 16;case as:return 536870912;default:return 16}default:return 16}}var ia=null,Rr=null,fi=null;function wn(){if(fi)return fi;var e,n=Rr,s=n.length,f,y="value"in ia?ia.value:ia.textContent,S=y.length;for(e=0;e<s&&n[e]===y[e];e++);var F=s-e;for(f=1;f<=F&&n[s-f]===y[S-f];f++);return fi=y.slice(e,1<f?1-f:void 0)}function wa(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Fn(){return!0}function Ei(){return!1}function nr(e){function n(s,f,y,S,F){this._reactName=s,this._targetInst=y,this.type=f,this.nativeEvent=S,this.target=F,this.currentTarget=null;for(var ce in e)e.hasOwnProperty(ce)&&(s=e[ce],this[ce]=s?s(S):S[ce]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Fn:Ei,this.isPropagationStopped=Ei,this}return Le(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Fn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Fn)},persist:function(){},isPersistent:Fn}),n}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ka=nr(hi),x=Le({},hi,{view:0,detail:0}),L=nr(x),re,me,Ae,Ge=Le({},x,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ae&&(Ae&&e.type==="mousemove"?(re=e.screenX-Ae.screenX,me=e.screenY-Ae.screenY):me=re=0,Ae=e),re)},movementY:function(e){return"movementY"in e?e.movementY:me}}),rt=nr(Ge),Nt=Le({},Ge,{dataTransfer:0}),zt=nr(Nt),tn=Le({},x,{relatedTarget:0}),on=nr(tn),kn=Le({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),rr=nr(kn),An=Le({},hi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Wn=nr(An),_n=Le({},hi,{data:0}),$n=nr(_n),Cr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ia(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Qa[e])?!!n[e]:!1}function pi(){return Ia}var Yi=Le({},x,{key:function(e){if(e.key){var n=Cr[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=wa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(e){return e.type==="keypress"?wa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ss=nr(Yi),sa=Le({},Ge,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oa=nr(sa),la=Le({},x,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi}),ca=nr(la),mi=Le({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xa=nr(mi),As=Le({},Ge,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kt=nr(As),dn=[9,13,27,32],Za=p&&"CompositionEvent"in window,ei=null;p&&"documentMode"in document&&(ei=document.documentMode);var os=p&&"TextEvent"in window&&!ei,ti=p&&(!Za||ei&&8<ei&&11>=ei),Mi=" ",Gi=!1;function ja(e,n){switch(e){case"keyup":return dn.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ji(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ea=!1;function Sa(e,n){switch(e){case"compositionend":return Ji(n);case"keypress":return n.which!==32?null:(Gi=!0,Mi);case"textInput":return e=n.data,e===Mi&&Gi?null:e;default:return null}}function Fr(e,n){if(Ea)return e==="compositionend"||!Za&&ja(e,n)?(e=wn(),fi=Rr=ia=null,Ea=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ti&&n.locale!=="ko"?null:n.data;default:return null}}var Cs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ki(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Cs[e.type]:n==="textarea"}function gi(e,n,s,f){hn(f),n=Xo(n,"onChange"),0<n.length&&(s=new Ka("onChange","change",null,s,f),e.push({event:s,listeners:n}))}var ls=null,cs=null;function fr(e){To(e,0)}function Gs(e){var n=Vr(e);if(at(n))return e}function ni(e,n){if(e==="change")return n}var Ri=!1;if(p){var Hr;if(p){var Js="oninput"in document;if(!Js){var da=document.createElement("div");da.setAttribute("oninput","return;"),Js=typeof da.oninput=="function"}Hr=Js}else Hr=!1;Ri=Hr&&(!document.documentMode||9<document.documentMode)}function yo(){ls&&(ls.detachEvent("onpropertychange",ds),cs=ls=null)}function ds(e){if(e.propertyName==="value"&&Gs(cs)){var n=[];gi(n,cs,e,$t(e)),St(fr,n)}}function Ps(e,n,s){e==="focusin"?(yo(),ls=n,cs=s,ls.attachEvent("onpropertychange",ds)):e==="focusout"&&yo()}function Ls(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gs(cs)}function Na(e,n){if(e==="click")return Gs(n)}function _s(e,n){if(e==="input"||e==="change")return Gs(n)}function Ks(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var sr=typeof Object.is=="function"?Object.is:Ks;function En(e,n){if(sr(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),f=Object.keys(n);if(s.length!==f.length)return!1;for(f=0;f<s.length;f++){var y=s[f];if(!m.call(n,y)||!sr(e[y],n[y]))return!1}return!0}function Mn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hn(e,n){var s=Mn(e);e=0;for(var f;s;){if(s.nodeType===3){if(f=e+s.textContent.length,e<=n&&f>=n)return{node:s,offset:n-e};e=f}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Mn(s)}}function nn(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?nn(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function wr(){for(var e=window,n=ot();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=ot(e.document)}return n}function xi(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function vo(e){var n=wr(),s=e.focusedElem,f=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&nn(s.ownerDocument.documentElement,s)){if(f!==null&&xi(s)){if(n=f.start,e=f.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var y=s.textContent.length,S=Math.min(f.start,y);f=f.end===void 0?S:Math.min(f.end,y),!e.extend&&S>f&&(y=f,f=S,S=y),y=Hn(s,S);var F=Hn(s,f);y&&F&&(e.rangeCount!==1||e.anchorNode!==y.node||e.anchorOffset!==y.offset||e.focusNode!==F.node||e.focusOffset!==F.offset)&&(n=n.createRange(),n.setStart(y.node,y.offset),e.removeAllRanges(),S>f?(e.addRange(n),e.extend(F.node,F.offset)):(n.setEnd(F.node,F.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var bo=p&&"documentMode"in document&&11>=document.documentMode,us=null,Jo=null,fs=null,Ro=!1;function wl(e,n,s){var f=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ro||us==null||us!==ot(f)||(f=us,"selectionStart"in f&&xi(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),fs&&En(fs,f)||(fs=f,f=Xo(Jo,"onSelect"),0<f.length&&(n=new Ka("onSelect","select",null,n,s),e.push({event:n,listeners:f}),n.target=us)))}function Fo(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Qs={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionend:Fo("Transition","TransitionEnd")},Xs={},jl={};p&&(jl=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function Do(e){if(Xs[e])return Xs[e];if(!Qs[e])return e;var n=Qs[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in jl)return Xs[e]=n[s];return e}var Sl=Do("animationend"),Nl=Do("animationiteration"),kl=Do("animationstart"),Al=Do("transitionend"),Cl=new Map,Ko="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fi(e,n){Cl.set(e,n),l(n,[e])}for(var Zs=0;Zs<Ko.length;Zs++){var ua=Ko[Zs],yi=ua.toLowerCase(),Qo=ua[0].toUpperCase()+ua.slice(1);Fi(yi,"on"+Qo)}Fi(Sl,"onAnimationEnd"),Fi(Nl,"onAnimationIteration"),Fi(kl,"onAnimationStart"),Fi("dblclick","onDoubleClick"),Fi("focusin","onFocus"),Fi("focusout","onBlur"),Fi(Al,"onTransitionEnd"),g("onMouseEnter",["mouseout","mouseover"]),g("onMouseLeave",["mouseout","mouseover"]),g("onPointerEnter",["pointerout","pointerover"]),g("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ma=new Set("cancel close invalid load scroll toggle".split(" ").concat(Is));function Ra(e,n,s){var f=e.type||"unknown-event";e.currentTarget=s,Pt(f,n,void 0,e),e.currentTarget=null}function To(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var f=e[s],y=f.event;f=f.listeners;e:{var S=void 0;if(n)for(var F=f.length-1;0<=F;F--){var ce=f[F],ve=ce.instance,Ve=ce.currentTarget;if(ce=ce.listener,ve!==S&&y.isPropagationStopped())break e;Ra(y,ce,Ve),S=ve}else for(F=0;F<f.length;F++){if(ce=f[F],ve=ce.instance,Ve=ce.currentTarget,ce=ce.listener,ve!==S&&y.isPropagationStopped())break e;Ra(y,ce,Ve),S=ve}}}if(Vn)throw e=ws,Vn=!1,ws=null,e}function Ee(e,n){var s=n[It];s===void 0&&(s=n[It]=new Set);var f=e+"__bubble";s.has(f)||(Oo(n,e,2,!1),s.add(f))}function ri(e,n,s){var f=0;n&&(f|=4),Oo(s,e,f,n)}var wo="_reactListening"+Math.random().toString(36).slice(2);function eo(e){if(!e[wo]){e[wo]=!0,o.forEach(function(s){s!=="selectionchange"&&(Ma.has(s)||ri(s,!1,e),ri(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[wo]||(n[wo]=!0,ri("selectionchange",!1,n))}}function Oo(e,n,s,f){switch(Ys(n)){case 1:var y=Hs;break;case 4:y=ur;break;default:y=Vs}s=y.bind(null,n,s,e),y=void 0,!Jn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(y=!0),f?y!==void 0?e.addEventListener(n,s,{capture:!0,passive:y}):e.addEventListener(n,s,!0):y!==void 0?e.addEventListener(n,s,{passive:y}):e.addEventListener(n,s,!1)}function Bo(e,n,s,f,y){var S=f;if((n&1)===0&&(n&2)===0&&f!==null)e:for(;;){if(f===null)return;var F=f.tag;if(F===3||F===4){var ce=f.stateNode.containerInfo;if(ce===y||ce.nodeType===8&&ce.parentNode===y)break;if(F===4)for(F=f.return;F!==null;){var ve=F.tag;if((ve===3||ve===4)&&(ve=F.stateNode.containerInfo,ve===y||ve.nodeType===8&&ve.parentNode===y))return;F=F.return}for(;ce!==null;){if(F=un(ce),F===null)return;if(ve=F.tag,ve===5||ve===6){f=S=F;continue e}ce=ce.parentNode}}f=f.return}St(function(){var Ve=S,lt=$t(s),dt=[];e:{var st=Cl.get(e);if(st!==void 0){var At=Ka,Ot=e;switch(e){case"keypress":if(wa(s)===0)break e;case"keydown":case"keyup":At=ss;break;case"focusin":Ot="focus",At=on;break;case"focusout":Ot="blur",At=on;break;case"beforeblur":case"afterblur":At=on;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":At=rt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":At=zt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":At=ca;break;case Sl:case Nl:case kl:At=rr;break;case Al:At=Xa;break;case"scroll":At=L;break;case"wheel":At=kt;break;case"copy":case"cut":case"paste":At=Wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":At=oa}var Wt=(n&4)!==0,Kr=!Wt&&e==="scroll",ze=Wt?st!==null?st+"Capture":null:st;Wt=[];for(var Se=Ve,$e;Se!==null;){$e=Se;var ht=$e.stateNode;if($e.tag===5&&ht!==null&&($e=ht,ze!==null&&(ht=Xt(Se,ze),ht!=null&&Wt.push(zo(Se,ht,$e)))),Kr)break;Se=Se.return}0<Wt.length&&(st=new At(st,Ot,null,s,lt),dt.push({event:st,listeners:Wt}))}}if((n&7)===0){e:{if(st=e==="mouseover"||e==="pointerover",At=e==="mouseout"||e==="pointerout",st&&s!==vn&&(Ot=s.relatedTarget||s.fromElement)&&(un(Ot)||Ot[Xe]))break e;if((At||st)&&(st=lt.window===lt?lt:(st=lt.ownerDocument)?st.defaultView||st.parentWindow:window,At?(Ot=s.relatedTarget||s.toElement,At=Ve,Ot=Ot?un(Ot):null,Ot!==null&&(Kr=Rn(Ot),Ot!==Kr||Ot.tag!==5&&Ot.tag!==6)&&(Ot=null)):(At=null,Ot=Ve),At!==Ot)){if(Wt=rt,ht="onMouseLeave",ze="onMouseEnter",Se="mouse",(e==="pointerout"||e==="pointerover")&&(Wt=oa,ht="onPointerLeave",ze="onPointerEnter",Se="pointer"),Kr=At==null?st:Vr(At),$e=Ot==null?st:Vr(Ot),st=new Wt(ht,Se+"leave",At,s,lt),st.target=Kr,st.relatedTarget=$e,ht=null,un(lt)===Ve&&(Wt=new Wt(ze,Se+"enter",Ot,s,lt),Wt.target=$e,Wt.relatedTarget=Kr,ht=Wt),Kr=ht,At&&Ot)t:{for(Wt=At,ze=Ot,Se=0,$e=Wt;$e;$e=Es($e))Se++;for($e=0,ht=ze;ht;ht=Es(ht))$e++;for(;0<Se-$e;)Wt=Es(Wt),Se--;for(;0<$e-Se;)ze=Es(ze),$e--;for(;Se--;){if(Wt===ze||ze!==null&&Wt===ze.alternate)break t;Wt=Es(Wt),ze=Es(ze)}Wt=null}else Wt=null;At!==null&&Pl(dt,st,At,Wt,!1),Ot!==null&&Kr!==null&&Pl(dt,Kr,Ot,Wt,!0)}}e:{if(st=Ve?Vr(Ve):window,At=st.nodeName&&st.nodeName.toLowerCase(),At==="select"||At==="input"&&st.type==="file")var Vt=ni;else if(Ki(st))if(Ri)Vt=_s;else{Vt=Ls;var rn=Ps}else(At=st.nodeName)&&At.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(Vt=Na);if(Vt&&(Vt=Vt(e,Ve))){gi(dt,Vt,s,lt);break e}rn&&rn(e,st,Ve),e==="focusout"&&(rn=st._wrapperState)&&rn.controlled&&st.type==="number"&&Qe(st,"number",st.value)}switch(rn=Ve?Vr(Ve):window,e){case"focusin":(Ki(rn)||rn.contentEditable==="true")&&(us=rn,Jo=Ve,fs=null);break;case"focusout":fs=Jo=us=null;break;case"mousedown":Ro=!0;break;case"contextmenu":case"mouseup":case"dragend":Ro=!1,wl(dt,s,lt);break;case"selectionchange":if(bo)break;case"keydown":case"keyup":wl(dt,s,lt)}var an;if(Za)e:{switch(e){case"compositionstart":var ln="onCompositionStart";break e;case"compositionend":ln="onCompositionEnd";break e;case"compositionupdate":ln="onCompositionUpdate";break e}ln=void 0}else Ea?ja(e,s)&&(ln="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(ln="onCompositionStart");ln&&(ti&&s.locale!=="ko"&&(Ea||ln!=="onCompositionStart"?ln==="onCompositionEnd"&&Ea&&(an=wn()):(ia=lt,Rr="value"in ia?ia.value:ia.textContent,Ea=!0)),rn=Xo(Ve,ln),0<rn.length&&(ln=new $n(ln,e,null,s,lt),dt.push({event:ln,listeners:rn}),an?ln.data=an:(an=Ji(s),an!==null&&(ln.data=an)))),(an=os?Sa(e,s):Fr(e,s))&&(Ve=Xo(Ve,"onBeforeInput"),0<Ve.length&&(lt=new $n("onBeforeInput","beforeinput",null,s,lt),dt.push({event:lt,listeners:Ve}),lt.data=an))}To(dt,n)})}function zo(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Xo(e,n){for(var s=n+"Capture",f=[];e!==null;){var y=e,S=y.stateNode;y.tag===5&&S!==null&&(y=S,S=Xt(e,s),S!=null&&f.unshift(zo(e,S,y)),S=Xt(e,n),S!=null&&f.push(zo(e,S,y))),e=e.return}return f}function Es(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pl(e,n,s,f,y){for(var S=n._reactName,F=[];s!==null&&s!==f;){var ce=s,ve=ce.alternate,Ve=ce.stateNode;if(ve!==null&&ve===f)break;ce.tag===5&&Ve!==null&&(ce=Ve,y?(ve=Xt(s,S),ve!=null&&F.unshift(zo(s,ve,ce))):y||(ve=Xt(s,S),ve!=null&&F.push(zo(s,ve,ce)))),s=s.return}F.length!==0&&e.push({event:n,listeners:F})}var Ql=/\r\n?/g,Zo=/\u0000|\uFFFD/g;function Ll(e){return(typeof e=="string"?e:""+e).replace(Ql,`
`).replace(Zo,"")}function el(e,n,s){if(n=Ll(n),Ll(e)!==n&&s)throw Error(r(425))}function to(){}var Ms=null,vi=null;function no(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var _l=typeof setTimeout=="function"?setTimeout:void 0,u=typeof clearTimeout=="function"?clearTimeout:void 0,k=typeof Promise=="function"?Promise:void 0,U=typeof queueMicrotask=="function"?queueMicrotask:typeof k<"u"?function(e){return k.resolve(null).then(e).catch(_)}:_l;function _(e){setTimeout(function(){throw e})}function D(e,n){var s=n,f=0;do{var y=s.nextSibling;if(e.removeChild(s),y&&y.nodeType===8)if(s=y.data,s==="/$"){if(f===0){e.removeChild(y),tr(n);return}f--}else s!=="$"&&s!=="$?"&&s!=="$!"||f++;s=y}while(s);tr(n)}function ae(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function le(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var Oe=Math.random().toString(36).slice(2),Ie="__reactFiber$"+Oe,Ze="__reactProps$"+Oe,Xe="__reactContainer$"+Oe,It="__reactEvents$"+Oe,vt="__reactListeners$"+Oe,Dn="__reactHandles$"+Oe;function un(e){var n=e[Ie];if(n)return n;for(var s=e.parentNode;s;){if(n=s[Xe]||s[Ie]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=le(e);e!==null;){if(s=e[Ie])return s;e=le(e)}return n}e=s,s=e.parentNode}return null}function gr(e){return e=e[Ie]||e[Xe],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function ai(e){return e[Ze]||null}var Il=[],hs=-1;function wt(e){return{current:e}}function Zt(e){0>hs||(e.current=Il[hs],Il[hs]=null,hs--)}function yn(e,n){hs++,Il[hs]=e.current,e.current=n}var bi={},Yr=wt(bi),wi=wt(!1),Uo=bi;function tl(e,n){var s=e.type.contextTypes;if(!s)return bi;var f=e.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===n)return f.__reactInternalMemoizedMaskedChildContext;var y={},S;for(S in s)y[S]=n[S];return f&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=y),y}function ji(e){return e=e.childContextTypes,e!=null}function Xl(){Zt(wi),Zt(Yr)}function Xc(e,n,s){if(Yr.current!==bi)throw Error(r(168));yn(Yr,n),yn(wi,s)}function Cc(e,n,s){var f=e.stateNode;if(n=n.childContextTypes,typeof f.getChildContext!="function")return s;f=f.getChildContext();for(var y in f)if(!(y in n))throw Error(r(108,be(e)||"Unknown",y));return Le({},s,f)}function Wo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bi,Uo=Yr.current,yn(Yr,e),yn(wi,wi.current),!0}function Zc(e,n,s){var f=e.stateNode;if(!f)throw Error(r(169));s?(e=Cc(e,n,Uo),f.__reactInternalMemoizedMergedChildContext=e,Zt(wi),Zt(Yr),yn(Yr,e)):Zt(wi),yn(wi,s)}var ro=null,El=!1,d=!1;function h(e){ro===null?ro=[e]:ro.push(e)}function w(e){El=!0,h(e)}function N(){if(!d&&ro!==null){d=!0;var e=0,n=Ln;try{var s=ro;for(Ln=1;e<s.length;e++){var f=s[e];do f=f(!0);while(f!==null)}ro=null,El=!1}catch(y){throw ro!==null&&(ro=ro.slice(e+1)),Ui(qa,N),y}finally{Ln=n,d=!1}}return null}var I=[],T=0,O=null,W=0,V=[],te=0,ye=null,Be=1,ne="";function we(e,n){I[T++]=W,I[T++]=O,O=e,W=n}function Te(e,n,s){V[te++]=Be,V[te++]=ne,V[te++]=ye,ye=e;var f=Be;e=ne;var y=32-Kn(f)-1;f&=~(1<<y),s+=1;var S=32-Kn(n)+y;if(30<S){var F=y-y%5;S=(f&(1<<F)-1).toString(32),f>>=F,y-=F,Be=1<<32-Kn(n)+y|s<<y|f,ne=S+e}else Be=1<<S|s<<y|f,ne=e}function Ke(e){e.return!==null&&(we(e,1),Te(e,1,0))}function We(e){for(;e===O;)O=I[--T],I[T]=null,W=I[--T],I[T]=null;for(;e===ye;)ye=V[--te],V[te]=null,ne=V[--te],V[te]=null,Be=V[--te],V[te]=null}var Ye=null,Je=null,et=!1,tt=null;function Ht(e,n){var s=Os(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Lt(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Ye=e,Je=ae(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Ye=e,Je=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=ye!==null?{id:Be,overflow:ne}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Os(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,Ye=e,Je=null,!0):!1;default:return!1}}function fn(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Tt(e){if(et){var n=Je;if(n){var s=n;if(!Lt(e,n)){if(fn(e))throw Error(r(418));n=ae(s.nextSibling);var f=Ye;n&&Lt(e,n)?Ht(f,s):(e.flags=e.flags&-4097|2,et=!1,Ye=e)}}else{if(fn(e))throw Error(r(418));e.flags=e.flags&-4097|2,et=!1,Ye=e}}}function Cn(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ye=e}function jr(e){if(e!==Ye)return!1;if(!et)return Cn(e),et=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!no(e.type,e.memoizedProps)),n&&(n=Je)){if(fn(e))throw mn(),Error(r(418));for(;n;)Ht(e,n),n=ae(n.nextSibling)}if(Cn(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){Je=ae(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}Je=null}}else Je=Ye?ae(e.stateNode.nextSibling):null;return!0}function mn(){for(var e=Je;e;)e=ae(e.nextSibling)}function _t(){Je=Ye=null,et=!1}function xt(e){tt===null?tt=[e]:tt.push(e)}var Pr=H.ReactCurrentBatchConfig;function sn(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var f=s.stateNode}if(!f)throw Error(r(147,e));var y=f,S=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===S?n.ref:(n=function(F){var ce=y.refs;F===null?delete ce[S]:ce[S]=F},n._stringRef=S,n)}if(typeof e!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,e))}return e}function jn(e,n){throw e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function ar(e){var n=e._init;return n(e._payload)}function fa(e){function n(ze,Se){if(e){var $e=ze.deletions;$e===null?(ze.deletions=[Se],ze.flags|=16):$e.push(Se)}}function s(ze,Se){if(!e)return null;for(;Se!==null;)n(ze,Se),Se=Se.sibling;return null}function f(ze,Se){for(ze=new Map;Se!==null;)Se.key!==null?ze.set(Se.key,Se):ze.set(Se.index,Se),Se=Se.sibling;return ze}function y(ze,Se){return ze=ul(ze,Se),ze.index=0,ze.sibling=null,ze}function S(ze,Se,$e){return ze.index=$e,e?($e=ze.alternate,$e!==null?($e=$e.index,$e<Se?(ze.flags|=2,Se):$e):(ze.flags|=2,Se)):(ze.flags|=1048576,Se)}function F(ze){return e&&ze.alternate===null&&(ze.flags|=2),ze}function ce(ze,Se,$e,ht){return Se===null||Se.tag!==6?(Se=Pu($e,ze.mode,ht),Se.return=ze,Se):(Se=y(Se,$e),Se.return=ze,Se)}function ve(ze,Se,$e,ht){var Vt=$e.type;return Vt===Pe?lt(ze,Se,$e.props.children,ht,$e.key):Se!==null&&(Se.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===Re&&ar(Vt)===Se.type)?(ht=y(Se,$e.props),ht.ref=sn(ze,Se,$e),ht.return=ze,ht):(ht=vd($e.type,$e.key,$e.props,null,ze.mode,ht),ht.ref=sn(ze,Se,$e),ht.return=ze,ht)}function Ve(ze,Se,$e,ht){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==$e.containerInfo||Se.stateNode.implementation!==$e.implementation?(Se=Lu($e,ze.mode,ht),Se.return=ze,Se):(Se=y(Se,$e.children||[]),Se.return=ze,Se)}function lt(ze,Se,$e,ht,Vt){return Se===null||Se.tag!==7?(Se=zl($e,ze.mode,ht,Vt),Se.return=ze,Se):(Se=y(Se,$e),Se.return=ze,Se)}function dt(ze,Se,$e){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return Se=Pu(""+Se,ze.mode,$e),Se.return=ze,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case fe:return $e=vd(Se.type,Se.key,Se.props,null,ze.mode,$e),$e.ref=sn(ze,null,Se),$e.return=ze,$e;case de:return Se=Lu(Se,ze.mode,$e),Se.return=ze,Se;case Re:var ht=Se._init;return dt(ze,ht(Se._payload),$e)}if(bt(Se)||Ce(Se))return Se=zl(Se,ze.mode,$e,null),Se.return=ze,Se;jn(ze,Se)}return null}function st(ze,Se,$e,ht){var Vt=Se!==null?Se.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Vt!==null?null:ce(ze,Se,""+$e,ht);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case fe:return $e.key===Vt?ve(ze,Se,$e,ht):null;case de:return $e.key===Vt?Ve(ze,Se,$e,ht):null;case Re:return Vt=$e._init,st(ze,Se,Vt($e._payload),ht)}if(bt($e)||Ce($e))return Vt!==null?null:lt(ze,Se,$e,ht,null);jn(ze,$e)}return null}function At(ze,Se,$e,ht,Vt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return ze=ze.get($e)||null,ce(Se,ze,""+ht,Vt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case fe:return ze=ze.get(ht.key===null?$e:ht.key)||null,ve(Se,ze,ht,Vt);case de:return ze=ze.get(ht.key===null?$e:ht.key)||null,Ve(Se,ze,ht,Vt);case Re:var rn=ht._init;return At(ze,Se,$e,rn(ht._payload),Vt)}if(bt(ht)||Ce(ht))return ze=ze.get($e)||null,lt(Se,ze,ht,Vt,null);jn(Se,ht)}return null}function Ot(ze,Se,$e,ht){for(var Vt=null,rn=null,an=Se,ln=Se=0,Ba=null;an!==null&&ln<$e.length;ln++){an.index>ln?(Ba=an,an=null):Ba=an.sibling;var qn=st(ze,an,$e[ln],ht);if(qn===null){an===null&&(an=Ba);break}e&&an&&qn.alternate===null&&n(ze,an),Se=S(qn,Se,ln),rn===null?Vt=qn:rn.sibling=qn,rn=qn,an=Ba}if(ln===$e.length)return s(ze,an),et&&we(ze,ln),Vt;if(an===null){for(;ln<$e.length;ln++)an=dt(ze,$e[ln],ht),an!==null&&(Se=S(an,Se,ln),rn===null?Vt=an:rn.sibling=an,rn=an);return et&&we(ze,ln),Vt}for(an=f(ze,an);ln<$e.length;ln++)Ba=At(an,ze,ln,$e[ln],ht),Ba!==null&&(e&&Ba.alternate!==null&&an.delete(Ba.key===null?ln:Ba.key),Se=S(Ba,Se,ln),rn===null?Vt=Ba:rn.sibling=Ba,rn=Ba);return e&&an.forEach(function(fl){return n(ze,fl)}),et&&we(ze,ln),Vt}function Wt(ze,Se,$e,ht){var Vt=Ce($e);if(typeof Vt!="function")throw Error(r(150));if($e=Vt.call($e),$e==null)throw Error(r(151));for(var rn=Vt=null,an=Se,ln=Se=0,Ba=null,qn=$e.next();an!==null&&!qn.done;ln++,qn=$e.next()){an.index>ln?(Ba=an,an=null):Ba=an.sibling;var fl=st(ze,an,qn.value,ht);if(fl===null){an===null&&(an=Ba);break}e&&an&&fl.alternate===null&&n(ze,an),Se=S(fl,Se,ln),rn===null?Vt=fl:rn.sibling=fl,rn=fl,an=Ba}if(qn.done)return s(ze,an),et&&we(ze,ln),Vt;if(an===null){for(;!qn.done;ln++,qn=$e.next())qn=dt(ze,qn.value,ht),qn!==null&&(Se=S(qn,Se,ln),rn===null?Vt=qn:rn.sibling=qn,rn=qn);return et&&we(ze,ln),Vt}for(an=f(ze,an);!qn.done;ln++,qn=$e.next())qn=At(an,ze,ln,qn.value,ht),qn!==null&&(e&&qn.alternate!==null&&an.delete(qn.key===null?ln:qn.key),Se=S(qn,Se,ln),rn===null?Vt=qn:rn.sibling=qn,rn=qn);return e&&an.forEach(function(lg){return n(ze,lg)}),et&&we(ze,ln),Vt}function Kr(ze,Se,$e,ht){if(typeof $e=="object"&&$e!==null&&$e.type===Pe&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case fe:e:{for(var Vt=$e.key,rn=Se;rn!==null;){if(rn.key===Vt){if(Vt=$e.type,Vt===Pe){if(rn.tag===7){s(ze,rn.sibling),Se=y(rn,$e.props.children),Se.return=ze,ze=Se;break e}}else if(rn.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===Re&&ar(Vt)===rn.type){s(ze,rn.sibling),Se=y(rn,$e.props),Se.ref=sn(ze,rn,$e),Se.return=ze,ze=Se;break e}s(ze,rn);break}else n(ze,rn);rn=rn.sibling}$e.type===Pe?(Se=zl($e.props.children,ze.mode,ht,$e.key),Se.return=ze,ze=Se):(ht=vd($e.type,$e.key,$e.props,null,ze.mode,ht),ht.ref=sn(ze,Se,$e),ht.return=ze,ze=ht)}return F(ze);case de:e:{for(rn=$e.key;Se!==null;){if(Se.key===rn)if(Se.tag===4&&Se.stateNode.containerInfo===$e.containerInfo&&Se.stateNode.implementation===$e.implementation){s(ze,Se.sibling),Se=y(Se,$e.children||[]),Se.return=ze,ze=Se;break e}else{s(ze,Se);break}else n(ze,Se);Se=Se.sibling}Se=Lu($e,ze.mode,ht),Se.return=ze,ze=Se}return F(ze);case Re:return rn=$e._init,Kr(ze,Se,rn($e._payload),ht)}if(bt($e))return Ot(ze,Se,$e,ht);if(Ce($e))return Wt(ze,Se,$e,ht);jn(ze,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,Se!==null&&Se.tag===6?(s(ze,Se.sibling),Se=y(Se,$e),Se.return=ze,ze=Se):(s(ze,Se),Se=Pu($e,ze.mode,ht),Se.return=ze,ze=Se),F(ze)):s(ze,Se)}return Kr}var Dr=fa(!0),xr=fa(!1),Gr=wt(null),ha=null,hr=null,In=null;function Tn(){In=hr=ha=null}function pr(e){var n=Gr.current;Zt(Gr),e._currentValue=n}function On(e,n,s){for(;e!==null;){var f=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,f!==null&&(f.childLanes|=n)):f!==null&&(f.childLanes&n)!==n&&(f.childLanes|=n),e===s)break;e=e.return}}function Sr(e,n){ha=e,In=hr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Xi=!0),e.firstContext=null)}function Nr(e){var n=e._currentValue;if(In!==e)if(e={context:e,memoizedValue:n,next:null},hr===null){if(ha===null)throw Error(r(308));hr=e,ha.dependencies={lanes:0,firstContext:e}}else hr=hr.next=e;return n}var Qn=null;function Fa(e){Qn===null?Qn=[e]:Qn.push(e)}function Gn(e,n,s,f){var y=n.interleaved;return y===null?(s.next=s,Fa(n)):(s.next=y.next,y.next=s),n.interleaved=s,Xn(e,f)}function Xn(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Tr=!1;function ka(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Si(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lr(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function _r(e,n,s){var f=e.updateQueue;if(f===null)return null;if(f=f.shared,(Bn&2)!==0){var y=f.pending;return y===null?n.next=n:(n.next=y.next,y.next=n),f.pending=n,Xn(e,s)}return y=f.interleaved,y===null?(n.next=n,Fa(f)):(n.next=y.next,y.next=n),f.interleaved=n,Xn(e,s)}function Da(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var f=n.lanes;f&=e.pendingLanes,s|=f,n.lanes=s,qr(e,s)}}function Zn(e,n){var s=e.updateQueue,f=e.alternate;if(f!==null&&(f=f.updateQueue,s===f)){var y=null,S=null;if(s=s.firstBaseUpdate,s!==null){do{var F={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};S===null?y=S=F:S=S.next=F,s=s.next}while(s!==null);S===null?y=S=n:S=S.next=n}else y=S=n;s={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:S,shared:f.shared,effects:f.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Ta(e,n,s,f){var y=e.updateQueue;Tr=!1;var S=y.firstBaseUpdate,F=y.lastBaseUpdate,ce=y.shared.pending;if(ce!==null){y.shared.pending=null;var ve=ce,Ve=ve.next;ve.next=null,F===null?S=Ve:F.next=Ve,F=ve;var lt=e.alternate;lt!==null&&(lt=lt.updateQueue,ce=lt.lastBaseUpdate,ce!==F&&(ce===null?lt.firstBaseUpdate=Ve:ce.next=Ve,lt.lastBaseUpdate=ve))}if(S!==null){var dt=y.baseState;F=0,lt=Ve=ve=null,ce=S;do{var st=ce.lane,At=ce.eventTime;if((f&st)===st){lt!==null&&(lt=lt.next={eventTime:At,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var Ot=e,Wt=ce;switch(st=n,At=s,Wt.tag){case 1:if(Ot=Wt.payload,typeof Ot=="function"){dt=Ot.call(At,dt,st);break e}dt=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Wt.payload,st=typeof Ot=="function"?Ot.call(At,dt,st):Ot,st==null)break e;dt=Le({},dt,st);break e;case 2:Tr=!0}}ce.callback!==null&&ce.lane!==0&&(e.flags|=64,st=y.effects,st===null?y.effects=[ce]:st.push(ce))}else At={eventTime:At,lane:st,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},lt===null?(Ve=lt=At,ve=dt):lt=lt.next=At,F|=st;if(ce=ce.next,ce===null){if(ce=y.shared.pending,ce===null)break;st=ce,ce=st.next,st.next=null,y.lastBaseUpdate=st,y.shared.pending=null}}while(!0);if(lt===null&&(ve=dt),y.baseState=ve,y.firstBaseUpdate=Ve,y.lastBaseUpdate=lt,n=y.shared.interleaved,n!==null){y=n;do F|=y.lane,y=y.next;while(y!==n)}else S===null&&(y.shared.lanes=0);Dl|=F,e.lanes=F,e.memoizedState=dt}}function Qi(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var f=e[n],y=f.callback;if(y!==null){if(f.callback=null,f=s,typeof y!="function")throw Error(r(191,y));y.call(f)}}}var ps={},pa=wt(ps),Ir=wt(ps),jo=wt(ps);function ao(e){if(e===ps)throw Error(r(174));return e}function nl(e,n){switch(yn(jo,n),yn(Ir,e),yn(pa,ps),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Jt(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Jt(n,e)}Zt(pa),yn(pa,n)}function Rs(){Zt(pa),Zt(Ir),Zt(jo)}function ed(e){ao(jo.current);var n=ao(pa.current),s=Jt(n,e.type);n!==s&&(yn(Ir,e),yn(pa,s))}function Pc(e){Ir.current===e&&(Zt(pa),Zt(Ir))}var or=wt(0);function ms(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Lc=[];function _c(){for(var e=0;e<Lc.length;e++)Lc[e]._workInProgressVersionPrimary=null;Lc.length=0}var Zl=H.ReactCurrentDispatcher,ec=H.ReactCurrentBatchConfig,Fs=0,mr=null,Or=null,Er=null,rl=!1,io=!1,al=0,eu=0;function Jr(){throw Error(r(321))}function tc(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!sr(e[s],n[s]))return!1;return!0}function Ml(e,n,s,f,y,S){if(Fs=S,mr=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Zl.current=e===null||e.memoizedState===null?R0:F0,e=s(f,y),io){S=0;do{if(io=!1,al=0,25<=S)throw Error(r(301));S+=1,Er=Or=null,n.updateQueue=null,Zl.current=D0,e=s(f,y)}while(io)}if(Zl.current=id,n=Or!==null&&Or.next!==null,Fs=0,Er=Or=mr=null,rl=!1,n)throw Error(r(300));return e}function Ds(){var e=al!==0;return al=0,e}function gs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?mr.memoizedState=Er=e:Er=Er.next=e,Er}function Di(){if(Or===null){var e=mr.alternate;e=e!==null?e.memoizedState:null}else e=Or.next;var n=Er===null?mr.memoizedState:Er.next;if(n!==null)Er=n,Or=e;else{if(e===null)throw Error(r(310));Or=e,e={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},Er===null?mr.memoizedState=Er=e:Er=Er.next=e}return Er}function Rl(e,n){return typeof n=="function"?n(e):n}function nc(e){var n=Di(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var f=Or,y=f.baseQueue,S=s.pending;if(S!==null){if(y!==null){var F=y.next;y.next=S.next,S.next=F}f.baseQueue=y=S,s.pending=null}if(y!==null){S=y.next,f=f.baseState;var ce=F=null,ve=null,Ve=S;do{var lt=Ve.lane;if((Fs&lt)===lt)ve!==null&&(ve=ve.next={lane:0,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),f=Ve.hasEagerState?Ve.eagerState:e(f,Ve.action);else{var dt={lane:lt,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null};ve===null?(ce=ve=dt,F=f):ve=ve.next=dt,mr.lanes|=lt,Dl|=lt}Ve=Ve.next}while(Ve!==null&&Ve!==S);ve===null?F=f:ve.next=ce,sr(f,n.memoizedState)||(Xi=!0),n.memoizedState=f,n.baseState=F,n.baseQueue=ve,s.lastRenderedState=f}if(e=s.interleaved,e!==null){y=e;do S=y.lane,mr.lanes|=S,Dl|=S,y=y.next;while(y!==e)}else y===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function So(e){var n=Di(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var f=s.dispatch,y=s.pending,S=n.memoizedState;if(y!==null){s.pending=null;var F=y=y.next;do S=e(S,F.action),F=F.next;while(F!==y);sr(S,n.memoizedState)||(Xi=!0),n.memoizedState=S,n.baseQueue===null&&(n.baseState=S),s.lastRenderedState=S}return[S,f]}function td(){}function Ic(e,n){var s=mr,f=Di(),y=n(),S=!sr(f.memoizedState,y);if(S&&(f.memoizedState=y,Xi=!0),f=f.queue,ic(rd.bind(null,s,f,e),[e]),f.getSnapshot!==n||S||Er!==null&&Er.memoizedState.tag&1){if(s.flags|=2048,Ti(9,Ec.bind(null,s,f,y,n),void 0,null),Oa===null)throw Error(r(349));(Fs&30)!==0||nd(s,n,y)}return y}function nd(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=mr.updateQueue,n===null?(n={lastEffect:null,stores:null},mr.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Ec(e,n,s,f){n.value=s,n.getSnapshot=f,il(n)&&rc(e)}function rd(e,n,s){return s(function(){il(n)&&rc(e)})}function il(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!sr(e,s)}catch{return!0}}function rc(e){var n=Xn(e,1);n!==null&&uo(n,e,1,-1)}function Fl(e){var n=gs();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:e},n.queue=e,e=e.dispatch=M0.bind(null,mr,e),[n.memoizedState,e]}function Ti(e,n,s,f){return e={tag:e,create:n,destroy:s,deps:f,next:null},n=mr.updateQueue,n===null?(n={lastEffect:null,stores:null},mr.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(f=s.next,s.next=e,e.next=f,n.lastEffect=e)),e}function so(){return Di().memoizedState}function xs(e,n,s,f){var y=gs();mr.flags|=e,y.memoizedState=Ti(1|n,s,void 0,f===void 0?null:f)}function qo(e,n,s,f){var y=Di();f=f===void 0?null:f;var S=void 0;if(Or!==null){var F=Or.memoizedState;if(S=F.destroy,f!==null&&tc(f,F.deps)){y.memoizedState=Ti(n,s,S,f);return}}mr.flags|=e,y.memoizedState=Ti(1|n,s,S,f)}function ac(e,n){return xs(8390656,8,e,n)}function ic(e,n){return qo(2048,8,e,n)}function ad(e,n){return qo(4,2,e,n)}function sc(e,n){return qo(4,4,e,n)}function oc(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Tf(e,n,s){return s=s!=null?s.concat([e]):null,qo(4,4,oc.bind(null,n,e),s)}function tu(){}function Of(e,n){var s=Di();n=n===void 0?null:n;var f=s.memoizedState;return f!==null&&n!==null&&tc(n,f[1])?f[0]:(s.memoizedState=[e,n],e)}function Bf(e,n){var s=Di();n=n===void 0?null:n;var f=s.memoizedState;return f!==null&&n!==null&&tc(n,f[1])?f[0]:(e=e(),s.memoizedState=[e,n],e)}function zf(e,n,s){return(Fs&21)===0?(e.baseState&&(e.baseState=!1,Xi=!0),e.memoizedState=s):(sr(s,n)||(s=js(),mr.lanes|=s,Dl|=s,e.baseState=!0),n)}function I0(e,n){var s=Ln;Ln=s!==0&&4>s?s:4,e(!0);var f=ec.transition;ec.transition={};try{e(!1),n()}finally{Ln=s,ec.transition=f}}function Uf(){return Di().memoizedState}function E0(e,n,s){var f=cl(e);if(s={lane:f,action:s,hasEagerState:!1,eagerState:null,next:null},Wf(e))qf(n,s);else if(s=Gn(e,n,s,f),s!==null){var y=Bi();uo(s,e,f,y),$f(s,n,f)}}function M0(e,n,s){var f=cl(e),y={lane:f,action:s,hasEagerState:!1,eagerState:null,next:null};if(Wf(e))qf(n,y);else{var S=e.alternate;if(e.lanes===0&&(S===null||S.lanes===0)&&(S=n.lastRenderedReducer,S!==null))try{var F=n.lastRenderedState,ce=S(F,s);if(y.hasEagerState=!0,y.eagerState=ce,sr(ce,F)){var ve=n.interleaved;ve===null?(y.next=y,Fa(n)):(y.next=ve.next,ve.next=y),n.interleaved=y;return}}catch{}finally{}s=Gn(e,n,y,f),s!==null&&(y=Bi(),uo(s,e,f,y),$f(s,n,f))}}function Wf(e){var n=e.alternate;return e===mr||n!==null&&n===mr}function qf(e,n){io=rl=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function $f(e,n,s){if((s&4194240)!==0){var f=n.lanes;f&=e.pendingLanes,s|=f,n.lanes=s,qr(e,s)}}var id={readContext:Nr,useCallback:Jr,useContext:Jr,useEffect:Jr,useImperativeHandle:Jr,useInsertionEffect:Jr,useLayoutEffect:Jr,useMemo:Jr,useReducer:Jr,useRef:Jr,useState:Jr,useDebugValue:Jr,useDeferredValue:Jr,useTransition:Jr,useMutableSource:Jr,useSyncExternalStore:Jr,useId:Jr,unstable_isNewReconciler:!1},R0={readContext:Nr,useCallback:function(e,n){return gs().memoizedState=[e,n===void 0?null:n],e},useContext:Nr,useEffect:ac,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,xs(4194308,4,oc.bind(null,n,e),s)},useLayoutEffect:function(e,n){return xs(4194308,4,e,n)},useInsertionEffect:function(e,n){return xs(4,2,e,n)},useMemo:function(e,n){var s=gs();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var f=gs();return n=s!==void 0?s(n):n,f.memoizedState=f.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},f.queue=e,e=e.dispatch=E0.bind(null,mr,e),[f.memoizedState,e]},useRef:function(e){var n=gs();return e={current:e},n.memoizedState=e},useState:Fl,useDebugValue:tu,useDeferredValue:function(e){return gs().memoizedState=e},useTransition:function(){var e=Fl(!1),n=e[0];return e=I0.bind(null,e[1]),gs().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var f=mr,y=gs();if(et){if(s===void 0)throw Error(r(407));s=s()}else{if(s=n(),Oa===null)throw Error(r(349));(Fs&30)!==0||nd(f,n,s)}y.memoizedState=s;var S={value:s,getSnapshot:n};return y.queue=S,ac(rd.bind(null,f,S,e),[e]),f.flags|=2048,Ti(9,Ec.bind(null,f,S,s,n),void 0,null),s},useId:function(){var e=gs(),n=Oa.identifierPrefix;if(et){var s=ne,f=Be;s=(f&~(1<<32-Kn(f)-1)).toString(32)+s,n=":"+n+"R"+s,s=al++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=eu++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},F0={readContext:Nr,useCallback:Of,useContext:Nr,useEffect:ic,useImperativeHandle:Tf,useInsertionEffect:ad,useLayoutEffect:sc,useMemo:Bf,useReducer:nc,useRef:so,useState:function(){return nc(Rl)},useDebugValue:tu,useDeferredValue:function(e){var n=Di();return zf(n,Or.memoizedState,e)},useTransition:function(){var e=nc(Rl)[0],n=Di().memoizedState;return[e,n]},useMutableSource:td,useSyncExternalStore:Ic,useId:Uf,unstable_isNewReconciler:!1},D0={readContext:Nr,useCallback:Of,useContext:Nr,useEffect:ic,useImperativeHandle:Tf,useInsertionEffect:ad,useLayoutEffect:sc,useMemo:Bf,useReducer:So,useRef:so,useState:function(){return So(Rl)},useDebugValue:tu,useDeferredValue:function(e){var n=Di();return Or===null?n.memoizedState=e:zf(n,Or.memoizedState,e)},useTransition:function(){var e=So(Rl)[0],n=Di().memoizedState;return[e,n]},useMutableSource:td,useSyncExternalStore:Ic,useId:Uf,unstable_isNewReconciler:!1};function oo(e,n){if(e&&e.defaultProps){n=Le({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function nu(e,n,s,f){n=e.memoizedState,s=s(f,n),s=s==null?n:Le({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var sd={isMounted:function(e){return(e=e._reactInternals)?Rn(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var f=Bi(),y=cl(e),S=Lr(f,y);S.payload=n,s!=null&&(S.callback=s),n=_r(e,S,y),n!==null&&(uo(n,e,y,f),Da(n,e,y))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var f=Bi(),y=cl(e),S=Lr(f,y);S.tag=1,S.payload=n,s!=null&&(S.callback=s),n=_r(e,S,y),n!==null&&(uo(n,e,y,f),Da(n,e,y))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=Bi(),f=cl(e),y=Lr(s,f);y.tag=2,n!=null&&(y.callback=n),n=_r(e,y,f),n!==null&&(uo(n,e,f,s),Da(n,e,f))}};function Hf(e,n,s,f,y,S,F){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(f,S,F):n.prototype&&n.prototype.isPureReactComponent?!En(s,f)||!En(y,S):!0}function Vf(e,n,s){var f=!1,y=bi,S=n.contextType;return typeof S=="object"&&S!==null?S=Nr(S):(y=ji(n)?Uo:Yr.current,f=n.contextTypes,S=(f=f!=null)?tl(e,y):bi),n=new n(s,S),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=sd,e.stateNode=n,n._reactInternals=e,f&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=y,e.__reactInternalMemoizedMaskedChildContext=S),n}function Yf(e,n,s,f){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,f),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,f),n.state!==e&&sd.enqueueReplaceState(n,n.state,null)}function ru(e,n,s,f){var y=e.stateNode;y.props=s,y.state=e.memoizedState,y.refs={},ka(e);var S=n.contextType;typeof S=="object"&&S!==null?y.context=Nr(S):(S=ji(n)?Uo:Yr.current,y.context=tl(e,S)),y.state=e.memoizedState,S=n.getDerivedStateFromProps,typeof S=="function"&&(nu(e,n,S,s),y.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(n=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),n!==y.state&&sd.enqueueReplaceState(y,y.state,null),Ta(e,s,y,f),y.state=e.memoizedState),typeof y.componentDidMount=="function"&&(e.flags|=4194308)}function lc(e,n){try{var s="",f=n;do s+=oe(f),f=f.return;while(f);var y=s}catch(S){y=`
Error generating stack: `+S.message+`
`+S.stack}return{value:e,source:n,stack:y,digest:null}}function au(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function iu(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var T0=typeof WeakMap=="function"?WeakMap:Map;function Gf(e,n,s){s=Lr(-1,s),s.tag=3,s.payload={element:null};var f=n.value;return s.callback=function(){hd||(hd=!0,bu=f),iu(e,n)},s}function Jf(e,n,s){s=Lr(-1,s),s.tag=3;var f=e.type.getDerivedStateFromError;if(typeof f=="function"){var y=n.value;s.payload=function(){return f(y)},s.callback=function(){iu(e,n)}}var S=e.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){iu(e,n),typeof f!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var F=n.stack;this.componentDidCatch(n.value,{componentStack:F!==null?F:""})}),s}function Kf(e,n,s){var f=e.pingCache;if(f===null){f=e.pingCache=new T0;var y=new Set;f.set(n,y)}else y=f.get(n),y===void 0&&(y=new Set,f.set(n,y));y.has(s)||(y.add(s),e=Q0.bind(null,e,n,s),n.then(e,e))}function Qf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Xf(e,n,s,f,y){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=Lr(-1,1),n.tag=2,_r(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=y,e)}var O0=H.ReactCurrentOwner,Xi=!1;function Oi(e,n,s,f){n.child=e===null?xr(n,null,s,f):Dr(n,e.child,s,f)}function Zf(e,n,s,f,y){s=s.render;var S=n.ref;return Sr(n,y),f=Ml(e,n,s,f,S,y),s=Ds(),e!==null&&!Xi?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~y,$o(e,n,y)):(et&&s&&Ke(n),n.flags|=1,Oi(e,n,f,y),n.child)}function eh(e,n,s,f,y){if(e===null){var S=s.type;return typeof S=="function"&&!Cu(S)&&S.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=S,th(e,n,S,f,y)):(e=vd(s.type,null,f,n,n.mode,y),e.ref=n.ref,e.return=n,n.child=e)}if(S=e.child,(e.lanes&y)===0){var F=S.memoizedProps;if(s=s.compare,s=s!==null?s:En,s(F,f)&&e.ref===n.ref)return $o(e,n,y)}return n.flags|=1,e=ul(S,f),e.ref=n.ref,e.return=n,n.child=e}function th(e,n,s,f,y){if(e!==null){var S=e.memoizedProps;if(En(S,f)&&e.ref===n.ref)if(Xi=!1,n.pendingProps=f=S,(e.lanes&y)!==0)(e.flags&131072)!==0&&(Xi=!0);else return n.lanes=e.lanes,$o(e,n,y)}return su(e,n,s,f,y)}function nh(e,n,s){var f=n.pendingProps,y=f.children,S=e!==null?e.memoizedState:null;if(f.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn(dc,ys),ys|=s;else{if((s&1073741824)===0)return e=S!==null?S.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,yn(dc,ys),ys|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=S!==null?S.baseLanes:s,yn(dc,ys),ys|=f}else S!==null?(f=S.baseLanes|s,n.memoizedState=null):f=s,yn(dc,ys),ys|=f;return Oi(e,n,y,s),n.child}function rh(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function su(e,n,s,f,y){var S=ji(s)?Uo:Yr.current;return S=tl(n,S),Sr(n,y),s=Ml(e,n,s,f,S,y),f=Ds(),e!==null&&!Xi?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~y,$o(e,n,y)):(et&&f&&Ke(n),n.flags|=1,Oi(e,n,s,y),n.child)}function ah(e,n,s,f,y){if(ji(s)){var S=!0;Wo(n)}else S=!1;if(Sr(n,y),n.stateNode===null)ld(e,n),Vf(n,s,f),ru(n,s,f,y),f=!0;else if(e===null){var F=n.stateNode,ce=n.memoizedProps;F.props=ce;var ve=F.context,Ve=s.contextType;typeof Ve=="object"&&Ve!==null?Ve=Nr(Ve):(Ve=ji(s)?Uo:Yr.current,Ve=tl(n,Ve));var lt=s.getDerivedStateFromProps,dt=typeof lt=="function"||typeof F.getSnapshotBeforeUpdate=="function";dt||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ce!==f||ve!==Ve)&&Yf(n,F,f,Ve),Tr=!1;var st=n.memoizedState;F.state=st,Ta(n,f,F,y),ve=n.memoizedState,ce!==f||st!==ve||wi.current||Tr?(typeof lt=="function"&&(nu(n,s,lt,f),ve=n.memoizedState),(ce=Tr||Hf(n,s,ce,f,st,ve,Ve))?(dt||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(n.flags|=4194308)):(typeof F.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=f,n.memoizedState=ve),F.props=f,F.state=ve,F.context=Ve,f=ce):(typeof F.componentDidMount=="function"&&(n.flags|=4194308),f=!1)}else{F=n.stateNode,Si(e,n),ce=n.memoizedProps,Ve=n.type===n.elementType?ce:oo(n.type,ce),F.props=Ve,dt=n.pendingProps,st=F.context,ve=s.contextType,typeof ve=="object"&&ve!==null?ve=Nr(ve):(ve=ji(s)?Uo:Yr.current,ve=tl(n,ve));var At=s.getDerivedStateFromProps;(lt=typeof At=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ce!==dt||st!==ve)&&Yf(n,F,f,ve),Tr=!1,st=n.memoizedState,F.state=st,Ta(n,f,F,y);var Ot=n.memoizedState;ce!==dt||st!==Ot||wi.current||Tr?(typeof At=="function"&&(nu(n,s,At,f),Ot=n.memoizedState),(Ve=Tr||Hf(n,s,Ve,f,st,Ot,ve)||!1)?(lt||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(f,Ot,ve),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(f,Ot,ve)),typeof F.componentDidUpdate=="function"&&(n.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof F.componentDidUpdate!="function"||ce===e.memoizedProps&&st===e.memoizedState||(n.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ce===e.memoizedProps&&st===e.memoizedState||(n.flags|=1024),n.memoizedProps=f,n.memoizedState=Ot),F.props=f,F.state=Ot,F.context=ve,f=Ve):(typeof F.componentDidUpdate!="function"||ce===e.memoizedProps&&st===e.memoizedState||(n.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ce===e.memoizedProps&&st===e.memoizedState||(n.flags|=1024),f=!1)}return ou(e,n,s,f,S,y)}function ou(e,n,s,f,y,S){rh(e,n);var F=(n.flags&128)!==0;if(!f&&!F)return y&&Zc(n,s,!1),$o(e,n,S);f=n.stateNode,O0.current=n;var ce=F&&typeof s.getDerivedStateFromError!="function"?null:f.render();return n.flags|=1,e!==null&&F?(n.child=Dr(n,e.child,null,S),n.child=Dr(n,null,ce,S)):Oi(e,n,ce,S),n.memoizedState=f.state,y&&Zc(n,s,!0),n.child}function ih(e){var n=e.stateNode;n.pendingContext?Xc(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Xc(e,n.context,!1),nl(e,n.containerInfo)}function sh(e,n,s,f,y){return _t(),xt(y),n.flags|=256,Oi(e,n,s,f),n.child}var lu={dehydrated:null,treeContext:null,retryLane:0};function cu(e){return{baseLanes:e,cachePool:null,transitions:null}}function oh(e,n,s){var f=n.pendingProps,y=or.current,S=!1,F=(n.flags&128)!==0,ce;if((ce=F)||(ce=e!==null&&e.memoizedState===null?!1:(y&2)!==0),ce?(S=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(y|=1),yn(or,y&1),e===null)return Tt(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(F=f.children,e=f.fallback,S?(f=n.mode,S=n.child,F={mode:"hidden",children:F},(f&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=F):S=bd(F,f,0,null),e=zl(e,f,s,null),S.return=n,e.return=n,S.sibling=e,n.child=S,n.child.memoizedState=cu(s),n.memoizedState=lu,e):du(n,F));if(y=e.memoizedState,y!==null&&(ce=y.dehydrated,ce!==null))return B0(e,n,F,f,ce,y,s);if(S){S=f.fallback,F=n.mode,y=e.child,ce=y.sibling;var ve={mode:"hidden",children:f.children};return(F&1)===0&&n.child!==y?(f=n.child,f.childLanes=0,f.pendingProps=ve,n.deletions=null):(f=ul(y,ve),f.subtreeFlags=y.subtreeFlags&14680064),ce!==null?S=ul(ce,S):(S=zl(S,F,s,null),S.flags|=2),S.return=n,f.return=n,f.sibling=S,n.child=f,f=S,S=n.child,F=e.child.memoizedState,F=F===null?cu(s):{baseLanes:F.baseLanes|s,cachePool:null,transitions:F.transitions},S.memoizedState=F,S.childLanes=e.childLanes&~s,n.memoizedState=lu,f}return S=e.child,e=S.sibling,f=ul(S,{mode:"visible",children:f.children}),(n.mode&1)===0&&(f.lanes=s),f.return=n,f.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=f,n.memoizedState=null,f}function du(e,n){return n=bd({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function od(e,n,s,f){return f!==null&&xt(f),Dr(n,e.child,null,s),e=du(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function B0(e,n,s,f,y,S,F){if(s)return n.flags&256?(n.flags&=-257,f=au(Error(r(422))),od(e,n,F,f)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(S=f.fallback,y=n.mode,f=bd({mode:"visible",children:f.children},y,0,null),S=zl(S,y,F,null),S.flags|=2,f.return=n,S.return=n,f.sibling=S,n.child=f,(n.mode&1)!==0&&Dr(n,e.child,null,F),n.child.memoizedState=cu(F),n.memoizedState=lu,S);if((n.mode&1)===0)return od(e,n,F,null);if(y.data==="$!"){if(f=y.nextSibling&&y.nextSibling.dataset,f)var ce=f.dgst;return f=ce,S=Error(r(419)),f=au(S,f,void 0),od(e,n,F,f)}if(ce=(F&e.childLanes)!==0,Xi||ce){if(f=Oa,f!==null){switch(F&-F){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(f.suspendedLanes|F))!==0?0:y,y!==0&&y!==S.retryLane&&(S.retryLane=y,Xn(e,y),uo(f,e,y,-1))}return Au(),f=au(Error(r(421))),od(e,n,F,f)}return y.data==="$?"?(n.flags|=128,n.child=e.child,n=X0.bind(null,e),y._reactRetry=n,null):(e=S.treeContext,Je=ae(y.nextSibling),Ye=n,et=!0,tt=null,e!==null&&(V[te++]=Be,V[te++]=ne,V[te++]=ye,Be=e.id,ne=e.overflow,ye=n),n=du(n,f.children),n.flags|=4096,n)}function lh(e,n,s){e.lanes|=n;var f=e.alternate;f!==null&&(f.lanes|=n),On(e.return,n,s)}function uu(e,n,s,f,y){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:f,tail:s,tailMode:y}:(S.isBackwards=n,S.rendering=null,S.renderingStartTime=0,S.last=f,S.tail=s,S.tailMode=y)}function ch(e,n,s){var f=n.pendingProps,y=f.revealOrder,S=f.tail;if(Oi(e,n,f.children,s),f=or.current,(f&2)!==0)f=f&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lh(e,s,n);else if(e.tag===19)lh(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}f&=1}if(yn(or,f),(n.mode&1)===0)n.memoizedState=null;else switch(y){case"forwards":for(s=n.child,y=null;s!==null;)e=s.alternate,e!==null&&ms(e)===null&&(y=s),s=s.sibling;s=y,s===null?(y=n.child,n.child=null):(y=s.sibling,s.sibling=null),uu(n,!1,y,s,S);break;case"backwards":for(s=null,y=n.child,n.child=null;y!==null;){if(e=y.alternate,e!==null&&ms(e)===null){n.child=y;break}e=y.sibling,y.sibling=s,s=y,y=e}uu(n,!0,s,null,S);break;case"together":uu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ld(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function $o(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Dl|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,s=ul(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=ul(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function z0(e,n,s){switch(n.tag){case 3:ih(n),_t();break;case 5:ed(n);break;case 1:ji(n.type)&&Wo(n);break;case 4:nl(n,n.stateNode.containerInfo);break;case 10:var f=n.type._context,y=n.memoizedProps.value;yn(Gr,f._currentValue),f._currentValue=y;break;case 13:if(f=n.memoizedState,f!==null)return f.dehydrated!==null?(yn(or,or.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?oh(e,n,s):(yn(or,or.current&1),e=$o(e,n,s),e!==null?e.sibling:null);yn(or,or.current&1);break;case 19:if(f=(s&n.childLanes)!==0,(e.flags&128)!==0){if(f)return ch(e,n,s);n.flags|=128}if(y=n.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),yn(or,or.current),f)break;return null;case 22:case 23:return n.lanes=0,nh(e,n,s)}return $o(e,n,s)}var dh,fu,uh,fh;dh=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},fu=function(){},uh=function(e,n,s,f){var y=e.memoizedProps;if(y!==f){e=n.stateNode,ao(pa.current);var S=null;switch(s){case"input":y=it(e,y),f=it(e,f),S=[];break;case"select":y=Le({},y,{value:void 0}),f=Le({},f,{value:void 0}),S=[];break;case"textarea":y=Rt(e,y),f=Rt(e,f),S=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(e.onclick=to)}Qt(s,f);var F;s=null;for(Ve in y)if(!f.hasOwnProperty(Ve)&&y.hasOwnProperty(Ve)&&y[Ve]!=null)if(Ve==="style"){var ce=y[Ve];for(F in ce)ce.hasOwnProperty(F)&&(s||(s={}),s[F]="")}else Ve!=="dangerouslySetInnerHTML"&&Ve!=="children"&&Ve!=="suppressContentEditableWarning"&&Ve!=="suppressHydrationWarning"&&Ve!=="autoFocus"&&(c.hasOwnProperty(Ve)?S||(S=[]):(S=S||[]).push(Ve,null));for(Ve in f){var ve=f[Ve];if(ce=y?.[Ve],f.hasOwnProperty(Ve)&&ve!==ce&&(ve!=null||ce!=null))if(Ve==="style")if(ce){for(F in ce)!ce.hasOwnProperty(F)||ve&&ve.hasOwnProperty(F)||(s||(s={}),s[F]="");for(F in ve)ve.hasOwnProperty(F)&&ce[F]!==ve[F]&&(s||(s={}),s[F]=ve[F])}else s||(S||(S=[]),S.push(Ve,s)),s=ve;else Ve==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,ce=ce?ce.__html:void 0,ve!=null&&ce!==ve&&(S=S||[]).push(Ve,ve)):Ve==="children"?typeof ve!="string"&&typeof ve!="number"||(S=S||[]).push(Ve,""+ve):Ve!=="suppressContentEditableWarning"&&Ve!=="suppressHydrationWarning"&&(c.hasOwnProperty(Ve)?(ve!=null&&Ve==="onScroll"&&Ee("scroll",e),S||ce===ve||(S=[])):(S=S||[]).push(Ve,ve))}s&&(S=S||[]).push("style",s);var Ve=S;(n.updateQueue=Ve)&&(n.flags|=4)}},fh=function(e,n,s,f){s!==f&&(n.flags|=4)};function Mc(e,n){if(!et)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:f.sibling=null}}function Ni(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,f=0;if(n)for(var y=e.child;y!==null;)s|=y.lanes|y.childLanes,f|=y.subtreeFlags&14680064,f|=y.flags&14680064,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)s|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=f,e.childLanes=s,n}function U0(e,n,s){var f=n.pendingProps;switch(We(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(n),null;case 1:return ji(n.type)&&Xl(),Ni(n),null;case 3:return f=n.stateNode,Rs(),Zt(wi),Zt(Yr),_c(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(e===null||e.child===null)&&(jr(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,tt!==null&&(Su(tt),tt=null))),fu(e,n),Ni(n),null;case 5:Pc(n);var y=ao(jo.current);if(s=n.type,e!==null&&n.stateNode!=null)uh(e,n,s,f,y),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!f){if(n.stateNode===null)throw Error(r(166));return Ni(n),null}if(e=ao(pa.current),jr(n)){f=n.stateNode,s=n.type;var S=n.memoizedProps;switch(f[Ie]=n,f[Ze]=S,e=(n.mode&1)!==0,s){case"dialog":Ee("cancel",f),Ee("close",f);break;case"iframe":case"object":case"embed":Ee("load",f);break;case"video":case"audio":for(y=0;y<Is.length;y++)Ee(Is[y],f);break;case"source":Ee("error",f);break;case"img":case"image":case"link":Ee("error",f),Ee("load",f);break;case"details":Ee("toggle",f);break;case"input":Y(f,S),Ee("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!S.multiple},Ee("invalid",f);break;case"textarea":Ft(f,S),Ee("invalid",f)}Qt(s,S),y=null;for(var F in S)if(S.hasOwnProperty(F)){var ce=S[F];F==="children"?typeof ce=="string"?f.textContent!==ce&&(S.suppressHydrationWarning!==!0&&el(f.textContent,ce,e),y=["children",ce]):typeof ce=="number"&&f.textContent!==""+ce&&(S.suppressHydrationWarning!==!0&&el(f.textContent,ce,e),y=["children",""+ce]):c.hasOwnProperty(F)&&ce!=null&&F==="onScroll"&&Ee("scroll",f)}switch(s){case"input":_e(f),Ct(f,S,!0);break;case"textarea":_e(f),Gt(f);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(f.onclick=to)}f=y,n.updateQueue=f,f!==null&&(n.flags|=4)}else{F=y.nodeType===9?y:y.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qt(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=F.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof f.is=="string"?e=F.createElement(s,{is:f.is}):(e=F.createElement(s),s==="select"&&(F=e,f.multiple?F.multiple=!0:f.size&&(F.size=f.size))):e=F.createElementNS(e,s),e[Ie]=n,e[Ze]=f,dh(e,n,!1,!1),n.stateNode=e;e:{switch(F=yt(s,f),s){case"dialog":Ee("cancel",e),Ee("close",e),y=f;break;case"iframe":case"object":case"embed":Ee("load",e),y=f;break;case"video":case"audio":for(y=0;y<Is.length;y++)Ee(Is[y],e);y=f;break;case"source":Ee("error",e),y=f;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),y=f;break;case"details":Ee("toggle",e),y=f;break;case"input":Y(e,f),y=it(e,f),Ee("invalid",e);break;case"option":y=f;break;case"select":e._wrapperState={wasMultiple:!!f.multiple},y=Le({},f,{value:void 0}),Ee("invalid",e);break;case"textarea":Ft(e,f),y=Rt(e,f),Ee("invalid",e);break;default:y=f}Qt(s,y),ce=y;for(S in ce)if(ce.hasOwnProperty(S)){var ve=ce[S];S==="style"?He(e,ve):S==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,ve!=null&&qe(e,ve)):S==="children"?typeof ve=="string"?(s!=="textarea"||ve!=="")&&se(e,ve):typeof ve=="number"&&se(e,""+ve):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(c.hasOwnProperty(S)?ve!=null&&S==="onScroll"&&Ee("scroll",e):ve!=null&&K(e,S,ve,F))}switch(s){case"input":_e(e),Ct(e,f,!1);break;case"textarea":_e(e),Gt(e);break;case"option":f.value!=null&&e.setAttribute("value",""+Fe(f.value));break;case"select":e.multiple=!!f.multiple,S=f.value,S!=null?gt(e,!!f.multiple,S,!1):f.defaultValue!=null&&gt(e,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(e.onclick=to)}switch(s){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Ni(n),null;case 6:if(e&&n.stateNode!=null)fh(e,n,e.memoizedProps,f);else{if(typeof f!="string"&&n.stateNode===null)throw Error(r(166));if(s=ao(jo.current),ao(pa.current),jr(n)){if(f=n.stateNode,s=n.memoizedProps,f[Ie]=n,(S=f.nodeValue!==s)&&(e=Ye,e!==null))switch(e.tag){case 3:el(f.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&el(f.nodeValue,s,(e.mode&1)!==0)}S&&(n.flags|=4)}else f=(s.nodeType===9?s:s.ownerDocument).createTextNode(f),f[Ie]=n,n.stateNode=f}return Ni(n),null;case 13:if(Zt(or),f=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(et&&Je!==null&&(n.mode&1)!==0&&(n.flags&128)===0)mn(),_t(),n.flags|=98560,S=!1;else if(S=jr(n),f!==null&&f.dehydrated!==null){if(e===null){if(!S)throw Error(r(318));if(S=n.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(r(317));S[Ie]=n}else _t(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ni(n),S=!1}else tt!==null&&(Su(tt),tt=null),S=!0;if(!S)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(f=f!==null,f!==(e!==null&&e.memoizedState!==null)&&f&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(or.current&1)!==0?Aa===0&&(Aa=3):Au())),n.updateQueue!==null&&(n.flags|=4),Ni(n),null);case 4:return Rs(),fu(e,n),e===null&&eo(n.stateNode.containerInfo),Ni(n),null;case 10:return pr(n.type._context),Ni(n),null;case 17:return ji(n.type)&&Xl(),Ni(n),null;case 19:if(Zt(or),S=n.memoizedState,S===null)return Ni(n),null;if(f=(n.flags&128)!==0,F=S.rendering,F===null)if(f)Mc(S,!1);else{if(Aa!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(F=ms(e),F!==null){for(n.flags|=128,Mc(S,!1),f=F.updateQueue,f!==null&&(n.updateQueue=f,n.flags|=4),n.subtreeFlags=0,f=s,s=n.child;s!==null;)S=s,e=f,S.flags&=14680066,F=S.alternate,F===null?(S.childLanes=0,S.lanes=e,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=F.childLanes,S.lanes=F.lanes,S.child=F.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=F.memoizedProps,S.memoizedState=F.memoizedState,S.updateQueue=F.updateQueue,S.type=F.type,e=F.dependencies,S.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return yn(or,or.current&1|2),n.child}e=e.sibling}S.tail!==null&&xn()>uc&&(n.flags|=128,f=!0,Mc(S,!1),n.lanes=4194304)}else{if(!f)if(e=ms(F),e!==null){if(n.flags|=128,f=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),Mc(S,!0),S.tail===null&&S.tailMode==="hidden"&&!F.alternate&&!et)return Ni(n),null}else 2*xn()-S.renderingStartTime>uc&&s!==1073741824&&(n.flags|=128,f=!0,Mc(S,!1),n.lanes=4194304);S.isBackwards?(F.sibling=n.child,n.child=F):(s=S.last,s!==null?s.sibling=F:n.child=F,S.last=F)}return S.tail!==null?(n=S.tail,S.rendering=n,S.tail=n.sibling,S.renderingStartTime=xn(),n.sibling=null,s=or.current,yn(or,f?s&1|2:s&1),n):(Ni(n),null);case 22:case 23:return ku(),f=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==f&&(n.flags|=8192),f&&(n.mode&1)!==0?(ys&1073741824)!==0&&(Ni(n),n.subtreeFlags&6&&(n.flags|=8192)):Ni(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function W0(e,n){switch(We(n),n.tag){case 1:return ji(n.type)&&Xl(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Rs(),Zt(wi),Zt(Yr),_c(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Pc(n),null;case 13:if(Zt(or),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));_t()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Zt(or),null;case 4:return Rs(),null;case 10:return pr(n.type._context),null;case 22:case 23:return ku(),null;case 24:return null;default:return null}}var cd=!1,ki=!1,q0=typeof WeakSet=="function"?WeakSet:Set,Et=null;function cc(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(f){Br(e,n,f)}else s.current=null}function hu(e,n,s){try{s()}catch(f){Br(e,n,f)}}var hh=!1;function $0(e,n){if(Ms=is,e=wr(),xi(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var f=s.getSelection&&s.getSelection();if(f&&f.rangeCount!==0){s=f.anchorNode;var y=f.anchorOffset,S=f.focusNode;f=f.focusOffset;try{s.nodeType,S.nodeType}catch{s=null;break e}var F=0,ce=-1,ve=-1,Ve=0,lt=0,dt=e,st=null;t:for(;;){for(var At;dt!==s||y!==0&&dt.nodeType!==3||(ce=F+y),dt!==S||f!==0&&dt.nodeType!==3||(ve=F+f),dt.nodeType===3&&(F+=dt.nodeValue.length),(At=dt.firstChild)!==null;)st=dt,dt=At;for(;;){if(dt===e)break t;if(st===s&&++Ve===y&&(ce=F),st===S&&++lt===f&&(ve=F),(At=dt.nextSibling)!==null)break;dt=st,st=dt.parentNode}dt=At}s=ce===-1||ve===-1?null:{start:ce,end:ve}}else s=null}s=s||{start:0,end:0}}else s=null;for(vi={focusedElem:e,selectionRange:s},is=!1,Et=n;Et!==null;)if(n=Et,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Et=e;else for(;Et!==null;){n=Et;try{var Ot=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Ot!==null){var Wt=Ot.memoizedProps,Kr=Ot.memoizedState,ze=n.stateNode,Se=ze.getSnapshotBeforeUpdate(n.elementType===n.type?Wt:oo(n.type,Wt),Kr);ze.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:var $e=n.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ht){Br(n,n.return,ht)}if(e=n.sibling,e!==null){e.return=n.return,Et=e;break}Et=n.return}return Ot=hh,hh=!1,Ot}function Rc(e,n,s){var f=n.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&e)===e){var S=y.destroy;y.destroy=void 0,S!==void 0&&hu(n,s,S)}y=y.next}while(y!==f)}}function dd(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var f=s.create;s.destroy=f()}s=s.next}while(s!==n)}}function pu(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function ph(e){var n=e.alternate;n!==null&&(e.alternate=null,ph(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Ie],delete n[Ze],delete n[It],delete n[vt],delete n[Dn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mh(e){return e.tag===5||e.tag===3||e.tag===4}function gh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mu(e,n,s){var f=e.tag;if(f===5||f===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=to));else if(f!==4&&(e=e.child,e!==null))for(mu(e,n,s),e=e.sibling;e!==null;)mu(e,n,s),e=e.sibling}function gu(e,n,s){var f=e.tag;if(f===5||f===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(f!==4&&(e=e.child,e!==null))for(gu(e,n,s),e=e.sibling;e!==null;)gu(e,n,s),e=e.sibling}var ii=null,lo=!1;function sl(e,n,s){for(s=s.child;s!==null;)xh(e,n,s),s=s.sibling}function xh(e,n,s){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(Ws,s)}catch{}switch(s.tag){case 5:ki||cc(s,n);case 6:var f=ii,y=lo;ii=null,sl(e,n,s),ii=f,lo=y,ii!==null&&(lo?(e=ii,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):ii.removeChild(s.stateNode));break;case 18:ii!==null&&(lo?(e=ii,s=s.stateNode,e.nodeType===8?D(e.parentNode,s):e.nodeType===1&&D(e,s),tr(e)):D(ii,s.stateNode));break;case 4:f=ii,y=lo,ii=s.stateNode.containerInfo,lo=!0,sl(e,n,s),ii=f,lo=y;break;case 0:case 11:case 14:case 15:if(!ki&&(f=s.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){y=f=f.next;do{var S=y,F=S.destroy;S=S.tag,F!==void 0&&((S&2)!==0||(S&4)!==0)&&hu(s,n,F),y=y.next}while(y!==f)}sl(e,n,s);break;case 1:if(!ki&&(cc(s,n),f=s.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=s.memoizedProps,f.state=s.memoizedState,f.componentWillUnmount()}catch(ce){Br(s,n,ce)}sl(e,n,s);break;case 21:sl(e,n,s);break;case 22:s.mode&1?(ki=(f=ki)||s.memoizedState!==null,sl(e,n,s),ki=f):sl(e,n,s);break;default:sl(e,n,s)}}function yh(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new q0),n.forEach(function(f){var y=Z0.bind(null,e,f);s.has(f)||(s.add(f),f.then(y,y))})}}function co(e,n){var s=n.deletions;if(s!==null)for(var f=0;f<s.length;f++){var y=s[f];try{var S=e,F=n,ce=F;e:for(;ce!==null;){switch(ce.tag){case 5:ii=ce.stateNode,lo=!1;break e;case 3:ii=ce.stateNode.containerInfo,lo=!0;break e;case 4:ii=ce.stateNode.containerInfo,lo=!0;break e}ce=ce.return}if(ii===null)throw Error(r(160));xh(S,F,y),ii=null,lo=!1;var ve=y.alternate;ve!==null&&(ve.return=null),y.return=null}catch(Ve){Br(y,n,Ve)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)vh(n,e),n=n.sibling}function vh(e,n){var s=e.alternate,f=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(co(n,e),No(e),f&4){try{Rc(3,e,e.return),dd(3,e)}catch(Wt){Br(e,e.return,Wt)}try{Rc(5,e,e.return)}catch(Wt){Br(e,e.return,Wt)}}break;case 1:co(n,e),No(e),f&512&&s!==null&&cc(s,s.return);break;case 5:if(co(n,e),No(e),f&512&&s!==null&&cc(s,s.return),e.flags&32){var y=e.stateNode;try{se(y,"")}catch(Wt){Br(e,e.return,Wt)}}if(f&4&&(y=e.stateNode,y!=null)){var S=e.memoizedProps,F=s!==null?s.memoizedProps:S,ce=e.type,ve=e.updateQueue;if(e.updateQueue=null,ve!==null)try{ce==="input"&&S.type==="radio"&&S.name!=null&&mt(y,S),yt(ce,F);var Ve=yt(ce,S);for(F=0;F<ve.length;F+=2){var lt=ve[F],dt=ve[F+1];lt==="style"?He(y,dt):lt==="dangerouslySetInnerHTML"?qe(y,dt):lt==="children"?se(y,dt):K(y,lt,dt,Ve)}switch(ce){case"input":Mt(y,S);break;case"textarea":jt(y,S);break;case"select":var st=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!S.multiple;var At=S.value;At!=null?gt(y,!!S.multiple,At,!1):st!==!!S.multiple&&(S.defaultValue!=null?gt(y,!!S.multiple,S.defaultValue,!0):gt(y,!!S.multiple,S.multiple?[]:"",!1))}y[Ze]=S}catch(Wt){Br(e,e.return,Wt)}}break;case 6:if(co(n,e),No(e),f&4){if(e.stateNode===null)throw Error(r(162));y=e.stateNode,S=e.memoizedProps;try{y.nodeValue=S}catch(Wt){Br(e,e.return,Wt)}}break;case 3:if(co(n,e),No(e),f&4&&s!==null&&s.memoizedState.isDehydrated)try{tr(n.containerInfo)}catch(Wt){Br(e,e.return,Wt)}break;case 4:co(n,e),No(e);break;case 13:co(n,e),No(e),y=e.child,y.flags&8192&&(S=y.memoizedState!==null,y.stateNode.isHidden=S,!S||y.alternate!==null&&y.alternate.memoizedState!==null||(vu=xn())),f&4&&yh(e);break;case 22:if(lt=s!==null&&s.memoizedState!==null,e.mode&1?(ki=(Ve=ki)||lt,co(n,e),ki=Ve):co(n,e),No(e),f&8192){if(Ve=e.memoizedState!==null,(e.stateNode.isHidden=Ve)&&!lt&&(e.mode&1)!==0)for(Et=e,lt=e.child;lt!==null;){for(dt=Et=lt;Et!==null;){switch(st=Et,At=st.child,st.tag){case 0:case 11:case 14:case 15:Rc(4,st,st.return);break;case 1:cc(st,st.return);var Ot=st.stateNode;if(typeof Ot.componentWillUnmount=="function"){f=st,s=st.return;try{n=f,Ot.props=n.memoizedProps,Ot.state=n.memoizedState,Ot.componentWillUnmount()}catch(Wt){Br(f,s,Wt)}}break;case 5:cc(st,st.return);break;case 22:if(st.memoizedState!==null){jh(dt);continue}}At!==null?(At.return=st,Et=At):jh(dt)}lt=lt.sibling}e:for(lt=null,dt=e;;){if(dt.tag===5){if(lt===null){lt=dt;try{y=dt.stateNode,Ve?(S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(ce=dt.stateNode,ve=dt.memoizedProps.style,F=ve!=null&&ve.hasOwnProperty("display")?ve.display:null,ce.style.display=pt("display",F))}catch(Wt){Br(e,e.return,Wt)}}}else if(dt.tag===6){if(lt===null)try{dt.stateNode.nodeValue=Ve?"":dt.memoizedProps}catch(Wt){Br(e,e.return,Wt)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===e)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===e)break e;for(;dt.sibling===null;){if(dt.return===null||dt.return===e)break e;lt===dt&&(lt=null),dt=dt.return}lt===dt&&(lt=null),dt.sibling.return=dt.return,dt=dt.sibling}}break;case 19:co(n,e),No(e),f&4&&yh(e);break;case 21:break;default:co(n,e),No(e)}}function No(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(mh(s)){var f=s;break e}s=s.return}throw Error(r(160))}switch(f.tag){case 5:var y=f.stateNode;f.flags&32&&(se(y,""),f.flags&=-33);var S=gh(e);gu(e,S,y);break;case 3:case 4:var F=f.stateNode.containerInfo,ce=gh(e);mu(e,ce,F);break;default:throw Error(r(161))}}catch(ve){Br(e,e.return,ve)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function H0(e,n,s){Et=e,bh(e)}function bh(e,n,s){for(var f=(e.mode&1)!==0;Et!==null;){var y=Et,S=y.child;if(y.tag===22&&f){var F=y.memoizedState!==null||cd;if(!F){var ce=y.alternate,ve=ce!==null&&ce.memoizedState!==null||ki;ce=cd;var Ve=ki;if(cd=F,(ki=ve)&&!Ve)for(Et=y;Et!==null;)F=Et,ve=F.child,F.tag===22&&F.memoizedState!==null?Sh(y):ve!==null?(ve.return=F,Et=ve):Sh(y);for(;S!==null;)Et=S,bh(S),S=S.sibling;Et=y,cd=ce,ki=Ve}wh(e)}else(y.subtreeFlags&8772)!==0&&S!==null?(S.return=y,Et=S):wh(e)}}function wh(e){for(;Et!==null;){var n=Et;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:ki||dd(5,n);break;case 1:var f=n.stateNode;if(n.flags&4&&!ki)if(s===null)f.componentDidMount();else{var y=n.elementType===n.type?s.memoizedProps:oo(n.type,s.memoizedProps);f.componentDidUpdate(y,s.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var S=n.updateQueue;S!==null&&Qi(n,S,f);break;case 3:var F=n.updateQueue;if(F!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Qi(n,F,s)}break;case 5:var ce=n.stateNode;if(s===null&&n.flags&4){s=ce;var ve=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":ve.autoFocus&&s.focus();break;case"img":ve.src&&(s.src=ve.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var Ve=n.alternate;if(Ve!==null){var lt=Ve.memoizedState;if(lt!==null){var dt=lt.dehydrated;dt!==null&&tr(dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ki||n.flags&512&&pu(n)}catch(st){Br(n,n.return,st)}}if(n===e){Et=null;break}if(s=n.sibling,s!==null){s.return=n.return,Et=s;break}Et=n.return}}function jh(e){for(;Et!==null;){var n=Et;if(n===e){Et=null;break}var s=n.sibling;if(s!==null){s.return=n.return,Et=s;break}Et=n.return}}function Sh(e){for(;Et!==null;){var n=Et;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{dd(4,n)}catch(ve){Br(n,s,ve)}break;case 1:var f=n.stateNode;if(typeof f.componentDidMount=="function"){var y=n.return;try{f.componentDidMount()}catch(ve){Br(n,y,ve)}}var S=n.return;try{pu(n)}catch(ve){Br(n,S,ve)}break;case 5:var F=n.return;try{pu(n)}catch(ve){Br(n,F,ve)}}}catch(ve){Br(n,n.return,ve)}if(n===e){Et=null;break}var ce=n.sibling;if(ce!==null){ce.return=n.return,Et=ce;break}Et=n.return}}var V0=Math.ceil,ud=H.ReactCurrentDispatcher,xu=H.ReactCurrentOwner,Ts=H.ReactCurrentBatchConfig,Bn=0,Oa=null,ma=null,si=0,ys=0,dc=wt(0),Aa=0,Fc=null,Dl=0,fd=0,yu=0,Dc=null,Zi=null,vu=0,uc=1/0,Ho=null,hd=!1,bu=null,ol=null,pd=!1,ll=null,md=0,Tc=0,wu=null,gd=-1,xd=0;function Bi(){return(Bn&6)!==0?xn():gd!==-1?gd:gd=xn()}function cl(e){return(e.mode&1)===0?1:(Bn&2)!==0&&si!==0?si&-si:Pr.transition!==null?(xd===0&&(xd=js()),xd):(e=Ln,e!==0||(e=window.event,e=e===void 0?16:Ys(e.type)),e)}function uo(e,n,s,f){if(50<Tc)throw Tc=0,wu=null,Error(r(185));Un(e,s,f),((Bn&2)===0||e!==Oa)&&(e===Oa&&((Bn&2)===0&&(fd|=s),Aa===4&&dl(e,si)),es(e,f),s===1&&Bn===0&&(n.mode&1)===0&&(uc=xn()+500,El&&N()))}function es(e,n){var s=e.callbackNode;Mr(e,n);var f=Wi(e,e===Oa?si:0);if(f===0)s!==null&&Us(s),e.callbackNode=null,e.callbackPriority=0;else if(n=f&-f,e.callbackPriority!==n){if(s!=null&&Us(s),n===1)e.tag===0?w(kh.bind(null,e)):h(kh.bind(null,e)),U(function(){(Bn&6)===0&&N()}),s=null;else{switch(ci(f)){case 1:s=qa;break;case 4:s=dr;break;case 16:s=ga;break;case 536870912:s=as;break;default:s=ga}s=Mh(s,Nh.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function Nh(e,n){if(gd=-1,xd=0,(Bn&6)!==0)throw Error(r(327));var s=e.callbackNode;if(fc()&&e.callbackNode!==s)return null;var f=Wi(e,e===Oa?si:0);if(f===0)return null;if((f&30)!==0||(f&e.expiredLanes)!==0||n)n=yd(e,f);else{n=f;var y=Bn;Bn|=2;var S=Ch();(Oa!==e||si!==n)&&(Ho=null,uc=xn()+500,Ol(e,n));do try{J0();break}catch(ce){Ah(e,ce)}while(!0);Tn(),ud.current=S,Bn=y,ma!==null?n=0:(Oa=null,si=0,n=Aa)}if(n!==0){if(n===2&&(y=Ga(e),y!==0&&(f=y,n=ju(e,y))),n===1)throw s=Fc,Ol(e,0),dl(e,f),es(e,xn()),s;if(n===6)dl(e,f);else{if(y=e.current.alternate,(f&30)===0&&!Y0(y)&&(n=yd(e,f),n===2&&(S=Ga(e),S!==0&&(f=S,n=ju(e,S))),n===1))throw s=Fc,Ol(e,0),dl(e,f),es(e,xn()),s;switch(e.finishedWork=y,e.finishedLanes=f,n){case 0:case 1:throw Error(r(345));case 2:Bl(e,Zi,Ho);break;case 3:if(dl(e,f),(f&130023424)===f&&(n=vu+500-xn(),10<n)){if(Wi(e,0)!==0)break;if(y=e.suspendedLanes,(y&f)!==f){Bi(),e.pingedLanes|=e.suspendedLanes&y;break}e.timeoutHandle=_l(Bl.bind(null,e,Zi,Ho),n);break}Bl(e,Zi,Ho);break;case 4:if(dl(e,f),(f&4194240)===f)break;for(n=e.eventTimes,y=-1;0<f;){var F=31-Kn(f);S=1<<F,F=n[F],F>y&&(y=F),f&=~S}if(f=y,f=xn()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*V0(f/1960))-f,10<f){e.timeoutHandle=_l(Bl.bind(null,e,Zi,Ho),f);break}Bl(e,Zi,Ho);break;case 5:Bl(e,Zi,Ho);break;default:throw Error(r(329))}}}return es(e,xn()),e.callbackNode===s?Nh.bind(null,e):null}function ju(e,n){var s=Dc;return e.current.memoizedState.isDehydrated&&(Ol(e,n).flags|=256),e=yd(e,n),e!==2&&(n=Zi,Zi=s,n!==null&&Su(n)),e}function Su(e){Zi===null?Zi=e:Zi.push.apply(Zi,e)}function Y0(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var f=0;f<s.length;f++){var y=s[f],S=y.getSnapshot;y=y.value;try{if(!sr(S(),y))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function dl(e,n){for(n&=~yu,n&=~fd,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-Kn(n),f=1<<s;e[s]=-1,n&=~f}}function kh(e){if((Bn&6)!==0)throw Error(r(327));fc();var n=Wi(e,0);if((n&1)===0)return es(e,xn()),null;var s=yd(e,n);if(e.tag!==0&&s===2){var f=Ga(e);f!==0&&(n=f,s=ju(e,f))}if(s===1)throw s=Fc,Ol(e,0),dl(e,n),es(e,xn()),s;if(s===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Bl(e,Zi,Ho),es(e,xn()),null}function Nu(e,n){var s=Bn;Bn|=1;try{return e(n)}finally{Bn=s,Bn===0&&(uc=xn()+500,El&&N())}}function Tl(e){ll!==null&&ll.tag===0&&(Bn&6)===0&&fc();var n=Bn;Bn|=1;var s=Ts.transition,f=Ln;try{if(Ts.transition=null,Ln=1,e)return e()}finally{Ln=f,Ts.transition=s,Bn=n,(Bn&6)===0&&N()}}function ku(){ys=dc.current,Zt(dc)}function Ol(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,u(s)),ma!==null)for(s=ma.return;s!==null;){var f=s;switch(We(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Xl();break;case 3:Rs(),Zt(wi),Zt(Yr),_c();break;case 5:Pc(f);break;case 4:Rs();break;case 13:Zt(or);break;case 19:Zt(or);break;case 10:pr(f.type._context);break;case 22:case 23:ku()}s=s.return}if(Oa=e,ma=e=ul(e.current,null),si=ys=n,Aa=0,Fc=null,yu=fd=Dl=0,Zi=Dc=null,Qn!==null){for(n=0;n<Qn.length;n++)if(s=Qn[n],f=s.interleaved,f!==null){s.interleaved=null;var y=f.next,S=s.pending;if(S!==null){var F=S.next;S.next=y,f.next=F}s.pending=f}Qn=null}return e}function Ah(e,n){do{var s=ma;try{if(Tn(),Zl.current=id,rl){for(var f=mr.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}rl=!1}if(Fs=0,Er=Or=mr=null,io=!1,al=0,xu.current=null,s===null||s.return===null){Aa=1,Fc=n,ma=null;break}e:{var S=e,F=s.return,ce=s,ve=n;if(n=si,ce.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Ve=ve,lt=ce,dt=lt.tag;if((lt.mode&1)===0&&(dt===0||dt===11||dt===15)){var st=lt.alternate;st?(lt.updateQueue=st.updateQueue,lt.memoizedState=st.memoizedState,lt.lanes=st.lanes):(lt.updateQueue=null,lt.memoizedState=null)}var At=Qf(F);if(At!==null){At.flags&=-257,Xf(At,F,ce,S,n),At.mode&1&&Kf(S,Ve,n),n=At,ve=Ve;var Ot=n.updateQueue;if(Ot===null){var Wt=new Set;Wt.add(ve),n.updateQueue=Wt}else Ot.add(ve);break e}else{if((n&1)===0){Kf(S,Ve,n),Au();break e}ve=Error(r(426))}}else if(et&&ce.mode&1){var Kr=Qf(F);if(Kr!==null){(Kr.flags&65536)===0&&(Kr.flags|=256),Xf(Kr,F,ce,S,n),xt(lc(ve,ce));break e}}S=ve=lc(ve,ce),Aa!==4&&(Aa=2),Dc===null?Dc=[S]:Dc.push(S),S=F;do{switch(S.tag){case 3:S.flags|=65536,n&=-n,S.lanes|=n;var ze=Gf(S,ve,n);Zn(S,ze);break e;case 1:ce=ve;var Se=S.type,$e=S.stateNode;if((S.flags&128)===0&&(typeof Se.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(ol===null||!ol.has($e)))){S.flags|=65536,n&=-n,S.lanes|=n;var ht=Jf(S,ce,n);Zn(S,ht);break e}}S=S.return}while(S!==null)}Lh(s)}catch(Vt){n=Vt,ma===s&&s!==null&&(ma=s=s.return);continue}break}while(!0)}function Ch(){var e=ud.current;return ud.current=id,e===null?id:e}function Au(){(Aa===0||Aa===3||Aa===2)&&(Aa=4),Oa===null||(Dl&268435455)===0&&(fd&268435455)===0||dl(Oa,si)}function yd(e,n){var s=Bn;Bn|=2;var f=Ch();(Oa!==e||si!==n)&&(Ho=null,Ol(e,n));do try{G0();break}catch(y){Ah(e,y)}while(!0);if(Tn(),Bn=s,ud.current=f,ma!==null)throw Error(r(261));return Oa=null,si=0,Aa}function G0(){for(;ma!==null;)Ph(ma)}function J0(){for(;ma!==null&&!Ii();)Ph(ma)}function Ph(e){var n=Eh(e.alternate,e,ys);e.memoizedProps=e.pendingProps,n===null?Lh(e):ma=n,xu.current=null}function Lh(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=U0(s,n,ys),s!==null){ma=s;return}}else{if(s=W0(s,n),s!==null){s.flags&=32767,ma=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Aa=6,ma=null;return}}if(n=n.sibling,n!==null){ma=n;return}ma=n=e}while(n!==null);Aa===0&&(Aa=5)}function Bl(e,n,s){var f=Ln,y=Ts.transition;try{Ts.transition=null,Ln=1,K0(e,n,s,f)}finally{Ts.transition=y,Ln=f}return null}function K0(e,n,s,f){do fc();while(ll!==null);if((Bn&6)!==0)throw Error(r(327));s=e.finishedWork;var y=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var S=s.lanes|s.childLanes;if(La(e,S),e===Oa&&(ma=Oa=null,si=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||pd||(pd=!0,Mh(ga,function(){return fc(),null})),S=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||S){S=Ts.transition,Ts.transition=null;var F=Ln;Ln=1;var ce=Bn;Bn|=4,xu.current=null,$0(e,s),vh(s,e),vo(vi),is=!!Ms,vi=Ms=null,e.current=s,H0(s),ut(),Bn=ce,Ln=F,Ts.transition=S}else e.current=s;if(pd&&(pd=!1,ll=e,md=y),S=e.pendingLanes,S===0&&(ol=null),xa(s.stateNode),es(e,xn()),n!==null)for(f=e.onRecoverableError,s=0;s<n.length;s++)y=n[s],f(y.value,{componentStack:y.stack,digest:y.digest});if(hd)throw hd=!1,e=bu,bu=null,e;return(md&1)!==0&&e.tag!==0&&fc(),S=e.pendingLanes,(S&1)!==0?e===wu?Tc++:(Tc=0,wu=e):Tc=0,N(),null}function fc(){if(ll!==null){var e=ci(md),n=Ts.transition,s=Ln;try{if(Ts.transition=null,Ln=16>e?16:e,ll===null)var f=!1;else{if(e=ll,ll=null,md=0,(Bn&6)!==0)throw Error(r(331));var y=Bn;for(Bn|=4,Et=e.current;Et!==null;){var S=Et,F=S.child;if((Et.flags&16)!==0){var ce=S.deletions;if(ce!==null){for(var ve=0;ve<ce.length;ve++){var Ve=ce[ve];for(Et=Ve;Et!==null;){var lt=Et;switch(lt.tag){case 0:case 11:case 15:Rc(8,lt,S)}var dt=lt.child;if(dt!==null)dt.return=lt,Et=dt;else for(;Et!==null;){lt=Et;var st=lt.sibling,At=lt.return;if(ph(lt),lt===Ve){Et=null;break}if(st!==null){st.return=At,Et=st;break}Et=At}}}var Ot=S.alternate;if(Ot!==null){var Wt=Ot.child;if(Wt!==null){Ot.child=null;do{var Kr=Wt.sibling;Wt.sibling=null,Wt=Kr}while(Wt!==null)}}Et=S}}if((S.subtreeFlags&2064)!==0&&F!==null)F.return=S,Et=F;else e:for(;Et!==null;){if(S=Et,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Rc(9,S,S.return)}var ze=S.sibling;if(ze!==null){ze.return=S.return,Et=ze;break e}Et=S.return}}var Se=e.current;for(Et=Se;Et!==null;){F=Et;var $e=F.child;if((F.subtreeFlags&2064)!==0&&$e!==null)$e.return=F,Et=$e;else e:for(F=Se;Et!==null;){if(ce=Et,(ce.flags&2048)!==0)try{switch(ce.tag){case 0:case 11:case 15:dd(9,ce)}}catch(Vt){Br(ce,ce.return,Vt)}if(ce===F){Et=null;break e}var ht=ce.sibling;if(ht!==null){ht.return=ce.return,Et=ht;break e}Et=ce.return}}if(Bn=y,N(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(Ws,e)}catch{}f=!0}return f}finally{Ln=s,Ts.transition=n}}return!1}function _h(e,n,s){n=lc(s,n),n=Gf(e,n,1),e=_r(e,n,1),n=Bi(),e!==null&&(Un(e,1,n),es(e,n))}function Br(e,n,s){if(e.tag===3)_h(e,e,s);else for(;n!==null;){if(n.tag===3){_h(n,e,s);break}else if(n.tag===1){var f=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ol===null||!ol.has(f))){e=lc(s,e),e=Jf(n,e,1),n=_r(n,e,1),e=Bi(),n!==null&&(Un(n,1,e),es(n,e));break}}n=n.return}}function Q0(e,n,s){var f=e.pingCache;f!==null&&f.delete(n),n=Bi(),e.pingedLanes|=e.suspendedLanes&s,Oa===e&&(si&s)===s&&(Aa===4||Aa===3&&(si&130023424)===si&&500>xn()-vu?Ol(e,0):yu|=s),es(e,n)}function Ih(e,n){n===0&&((e.mode&1)===0?n=1:(n=Va,Va<<=1,(Va&130023424)===0&&(Va=4194304)));var s=Bi();e=Xn(e,n),e!==null&&(Un(e,n,s),es(e,s))}function X0(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Ih(e,s)}function Z0(e,n){var s=0;switch(e.tag){case 13:var f=e.stateNode,y=e.memoizedState;y!==null&&(s=y.retryLane);break;case 19:f=e.stateNode;break;default:throw Error(r(314))}f!==null&&f.delete(n),Ih(e,s)}var Eh;Eh=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||wi.current)Xi=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return Xi=!1,z0(e,n,s);Xi=(e.flags&131072)!==0}else Xi=!1,et&&(n.flags&1048576)!==0&&Te(n,W,n.index);switch(n.lanes=0,n.tag){case 2:var f=n.type;ld(e,n),e=n.pendingProps;var y=tl(n,Yr.current);Sr(n,s),y=Ml(null,n,f,e,y,s);var S=Ds();return n.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ji(f)?(S=!0,Wo(n)):S=!1,n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,ka(n),y.updater=sd,n.stateNode=y,y._reactInternals=n,ru(n,f,e,s),n=ou(null,n,f,!0,S,s)):(n.tag=0,et&&S&&Ke(n),Oi(null,n,y,s),n=n.child),n;case 16:f=n.elementType;e:{switch(ld(e,n),e=n.pendingProps,y=f._init,f=y(f._payload),n.type=f,y=n.tag=tg(f),e=oo(f,e),y){case 0:n=su(null,n,f,e,s);break e;case 1:n=ah(null,n,f,e,s);break e;case 11:n=Zf(null,n,f,e,s);break e;case 14:n=eh(null,n,f,oo(f.type,e),s);break e}throw Error(r(306,f,""))}return n;case 0:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:oo(f,y),su(e,n,f,y,s);case 1:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:oo(f,y),ah(e,n,f,y,s);case 3:e:{if(ih(n),e===null)throw Error(r(387));f=n.pendingProps,S=n.memoizedState,y=S.element,Si(e,n),Ta(n,f,null,s);var F=n.memoizedState;if(f=F.element,S.isDehydrated)if(S={element:f,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},n.updateQueue.baseState=S,n.memoizedState=S,n.flags&256){y=lc(Error(r(423)),n),n=sh(e,n,f,s,y);break e}else if(f!==y){y=lc(Error(r(424)),n),n=sh(e,n,f,s,y);break e}else for(Je=ae(n.stateNode.containerInfo.firstChild),Ye=n,et=!0,tt=null,s=xr(n,null,f,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(_t(),f===y){n=$o(e,n,s);break e}Oi(e,n,f,s)}n=n.child}return n;case 5:return ed(n),e===null&&Tt(n),f=n.type,y=n.pendingProps,S=e!==null?e.memoizedProps:null,F=y.children,no(f,y)?F=null:S!==null&&no(f,S)&&(n.flags|=32),rh(e,n),Oi(e,n,F,s),n.child;case 6:return e===null&&Tt(n),null;case 13:return oh(e,n,s);case 4:return nl(n,n.stateNode.containerInfo),f=n.pendingProps,e===null?n.child=Dr(n,null,f,s):Oi(e,n,f,s),n.child;case 11:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:oo(f,y),Zf(e,n,f,y,s);case 7:return Oi(e,n,n.pendingProps,s),n.child;case 8:return Oi(e,n,n.pendingProps.children,s),n.child;case 12:return Oi(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(f=n.type._context,y=n.pendingProps,S=n.memoizedProps,F=y.value,yn(Gr,f._currentValue),f._currentValue=F,S!==null)if(sr(S.value,F)){if(S.children===y.children&&!wi.current){n=$o(e,n,s);break e}}else for(S=n.child,S!==null&&(S.return=n);S!==null;){var ce=S.dependencies;if(ce!==null){F=S.child;for(var ve=ce.firstContext;ve!==null;){if(ve.context===f){if(S.tag===1){ve=Lr(-1,s&-s),ve.tag=2;var Ve=S.updateQueue;if(Ve!==null){Ve=Ve.shared;var lt=Ve.pending;lt===null?ve.next=ve:(ve.next=lt.next,lt.next=ve),Ve.pending=ve}}S.lanes|=s,ve=S.alternate,ve!==null&&(ve.lanes|=s),On(S.return,s,n),ce.lanes|=s;break}ve=ve.next}}else if(S.tag===10)F=S.type===n.type?null:S.child;else if(S.tag===18){if(F=S.return,F===null)throw Error(r(341));F.lanes|=s,ce=F.alternate,ce!==null&&(ce.lanes|=s),On(F,s,n),F=S.sibling}else F=S.child;if(F!==null)F.return=S;else for(F=S;F!==null;){if(F===n){F=null;break}if(S=F.sibling,S!==null){S.return=F.return,F=S;break}F=F.return}S=F}Oi(e,n,y.children,s),n=n.child}return n;case 9:return y=n.type,f=n.pendingProps.children,Sr(n,s),y=Nr(y),f=f(y),n.flags|=1,Oi(e,n,f,s),n.child;case 14:return f=n.type,y=oo(f,n.pendingProps),y=oo(f.type,y),eh(e,n,f,y,s);case 15:return th(e,n,n.type,n.pendingProps,s);case 17:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:oo(f,y),ld(e,n),n.tag=1,ji(f)?(e=!0,Wo(n)):e=!1,Sr(n,s),Vf(n,f,y),ru(n,f,y,s),ou(null,n,f,!0,e,s);case 19:return ch(e,n,s);case 22:return nh(e,n,s)}throw Error(r(156,n.tag))};function Mh(e,n){return Ui(e,n)}function eg(e,n,s,f){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(e,n,s,f){return new eg(e,n,s,f)}function Cu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tg(e){if(typeof e=="function")return Cu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$)return 11;if(e===Ne)return 14}return 2}function ul(e,n){var s=e.alternate;return s===null?(s=Os(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function vd(e,n,s,f,y,S){var F=2;if(f=e,typeof e=="function")Cu(e)&&(F=1);else if(typeof e=="string")F=5;else e:switch(e){case Pe:return zl(s.children,y,S,n);case xe:F=8,y|=8;break;case Z:return e=Os(12,s,n,y|2),e.elementType=Z,e.lanes=S,e;case ee:return e=Os(13,s,n,y),e.elementType=ee,e.lanes=S,e;case ie:return e=Os(19,s,n,y),e.elementType=ie,e.lanes=S,e;case Me:return bd(s,y,S,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ge:F=10;break e;case B:F=9;break e;case $:F=11;break e;case Ne:F=14;break e;case Re:F=16,f=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return n=Os(F,s,n,y),n.elementType=e,n.type=f,n.lanes=S,n}function zl(e,n,s,f){return e=Os(7,e,f,n),e.lanes=s,e}function bd(e,n,s,f){return e=Os(22,e,f,n),e.elementType=Me,e.lanes=s,e.stateNode={isHidden:!1},e}function Pu(e,n,s){return e=Os(6,e,null,n),e.lanes=s,e}function Lu(e,n,s){return n=Os(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function ng(e,n,s,f,y){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Io(0),this.expirationTimes=Io(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Io(0),this.identifierPrefix=f,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function _u(e,n,s,f,y,S,F,ce,ve){return e=new ng(e,n,s,ce,ve),n===1?(n=1,S===!0&&(n|=8)):n=0,S=Os(3,null,null,n),e.current=S,S.stateNode=e,S.memoizedState={element:f,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ka(S),e}function rg(e,n,s){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:f==null?null:""+f,children:e,containerInfo:n,implementation:s}}function Rh(e){if(!e)return bi;e=e._reactInternals;e:{if(Rn(e)!==e||e.tag!==1)throw Error(r(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ji(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(e.tag===1){var s=e.type;if(ji(s))return Cc(e,s,n)}return n}function Fh(e,n,s,f,y,S,F,ce,ve){return e=_u(s,f,!0,e,y,S,F,ce,ve),e.context=Rh(null),s=e.current,f=Bi(),y=cl(s),S=Lr(f,y),S.callback=n??null,_r(s,S,y),e.current.lanes=y,Un(e,y,f),es(e,f),e}function wd(e,n,s,f){var y=n.current,S=Bi(),F=cl(y);return s=Rh(s),n.context===null?n.context=s:n.pendingContext=s,n=Lr(S,F),n.payload={element:e},f=f===void 0?null:f,f!==null&&(n.callback=f),e=_r(y,n,F),e!==null&&(uo(e,y,F,S),Da(e,y,F)),F}function jd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Dh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Iu(e,n){Dh(e,n),(e=e.alternate)&&Dh(e,n)}function ag(){return null}var Th=typeof reportError=="function"?reportError:function(e){console.error(e)};function Eu(e){this._internalRoot=e}Sd.prototype.render=Eu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));wd(e,n,null,null)},Sd.prototype.unmount=Eu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Tl(function(){wd(null,e,null,null)}),n[Xe]=null}};function Sd(e){this._internalRoot=e}Sd.prototype.unstable_scheduleHydration=function(e){if(e){var n=$r();e={blockedOn:null,target:e,priority:n};for(var s=0;s<Ja.length&&n!==0&&n<Ja[s].priority;s++);Ja.splice(s,0,e),s===0&&$s(e)}};function Mu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Nd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Oh(){}function ig(e,n,s,f,y){if(y){if(typeof f=="function"){var S=f;f=function(){var Ve=jd(F);S.call(Ve)}}var F=Fh(n,f,e,0,null,!1,!1,"",Oh);return e._reactRootContainer=F,e[Xe]=F.current,eo(e.nodeType===8?e.parentNode:e),Tl(),F}for(;y=e.lastChild;)e.removeChild(y);if(typeof f=="function"){var ce=f;f=function(){var Ve=jd(ve);ce.call(Ve)}}var ve=_u(e,0,!1,null,null,!1,!1,"",Oh);return e._reactRootContainer=ve,e[Xe]=ve.current,eo(e.nodeType===8?e.parentNode:e),Tl(function(){wd(n,ve,s,f)}),ve}function kd(e,n,s,f,y){var S=s._reactRootContainer;if(S){var F=S;if(typeof y=="function"){var ce=y;y=function(){var ve=jd(F);ce.call(ve)}}wd(n,F,e,y)}else F=ig(s,n,e,y,f);return jd(F)}Ss=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=li(n.pendingLanes);s!==0&&(qr(n,s|1),es(n,xn()),(Bn&6)===0&&(uc=xn()+500,N()))}break;case 13:Tl(function(){var f=Xn(e,1);if(f!==null){var y=Bi();uo(f,e,1,y)}}),Iu(e,1)}},Eo=function(e){if(e.tag===13){var n=Xn(e,134217728);if(n!==null){var s=Bi();uo(n,e,134217728,s)}Iu(e,134217728)}},Ns=function(e){if(e.tag===13){var n=cl(e),s=Xn(e,n);if(s!==null){var f=Bi();uo(s,e,n,f)}Iu(e,n)}},$r=function(){return Ln},qi=function(e,n){var s=Ln;try{return Ln=e,n()}finally{Ln=s}},Ut=function(e,n,s){switch(n){case"input":if(Mt(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var f=s[n];if(f!==e&&f.form===e.form){var y=ai(f);if(!y)throw Error(r(90));at(f),Mt(f,y)}}}break;case"textarea":jt(e,s);break;case"select":n=s.value,n!=null&&gt(e,!!s.multiple,n,!1)}},Sn=Nu,Ar=Tl;var sg={usingClientEntryPoint:!1,Events:[gr,Vr,ai,hn,ta,Nu]},Oc={findFiberByHostInstance:un,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},og={bundleType:Oc.bundleType,version:Oc.version,rendererPackageName:Oc.rendererPackageName,rendererConfig:Oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=na(e),e===null?null:e.stateNode},findFiberByHostInstance:Oc.findFiberByHostInstance||ag,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ad.isDisabled&&Ad.supportsFiber)try{Ws=Ad.inject(og),Wr=Ad}catch{}}return ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sg,ts.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mu(n))throw Error(r(200));return rg(e,n,null,s)},ts.createRoot=function(e,n){if(!Mu(e))throw Error(r(299));var s=!1,f="",y=Th;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(f=n.identifierPrefix),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=_u(e,1,!1,null,null,s,!1,f,y),e[Xe]=n.current,eo(e.nodeType===8?e.parentNode:e),new Eu(n)},ts.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=na(n),e=e===null?null:e.stateNode,e},ts.flushSync=function(e){return Tl(e)},ts.hydrate=function(e,n,s){if(!Nd(n))throw Error(r(200));return kd(null,e,n,!0,s)},ts.hydrateRoot=function(e,n,s){if(!Mu(e))throw Error(r(405));var f=s!=null&&s.hydratedSources||null,y=!1,S="",F=Th;if(s!=null&&(s.unstable_strictMode===!0&&(y=!0),s.identifierPrefix!==void 0&&(S=s.identifierPrefix),s.onRecoverableError!==void 0&&(F=s.onRecoverableError)),n=Fh(n,null,e,1,s??null,y,!1,S,F),e[Xe]=n.current,eo(e),f)for(e=0;e<f.length;e++)s=f[e],y=s._getVersion,y=y(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,y]:n.mutableSourceEagerHydrationData.push(s,y);return new Sd(n)},ts.render=function(e,n,s){if(!Nd(n))throw Error(r(200));return kd(null,e,n,!1,s)},ts.unmountComponentAtNode=function(e){if(!Nd(e))throw Error(r(40));return e._reactRootContainer?(Tl(function(){kd(null,null,e,!1,function(){e._reactRootContainer=null,e[Xe]=null})}),!0):!1},ts.unstable_batchedUpdates=Nu,ts.unstable_renderSubtreeIntoContainer=function(e,n,s,f){if(!Nd(s))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return kd(e,n,s,!1,f)},ts.version="18.3.1-next-f1338f8080-20240426",ts}var Vh;function Am(){if(Vh)return Du.exports;Vh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(a){console.error(a)}}return i(),Du.exports=gg(),Du.exports}var Yh;function xg(){if(Yh)return Cd;Yh=1;var i=Am();return Cd.createRoot=i.createRoot,Cd.hydrateRoot=i.hydrateRoot,Cd}var yg=xg();const vg=km(yg);Am();function Hc(){return Hc=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},Hc.apply(this,arguments)}var ml;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(ml||(ml={}));const Gh="popstate";function bg(i){i===void 0&&(i={});function a(o,c){let{pathname:l,search:g,hash:p}=o.location;return df("",{pathname:l,search:g,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(o,c){return typeof c=="string"?c:$d(c)}return jg(a,r,null,i)}function ea(i,a){if(i===!1||i===null||typeof i>"u")throw new Error(a)}function Cf(i,a){if(!i){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function wg(){return Math.random().toString(36).substr(2,8)}function Jh(i,a){return{usr:i.state,key:i.key,idx:a}}function df(i,a,r,o){return r===void 0&&(r=null),Hc({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof a=="string"?Sc(a):a,{state:r,key:a&&a.key||o||wg()})}function $d(i){let{pathname:a="/",search:r="",hash:o=""}=i;return r&&r!=="?"&&(a+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(a+=o.charAt(0)==="#"?o:"#"+o),a}function Sc(i){let a={};if(i){let r=i.indexOf("#");r>=0&&(a.hash=i.substr(r),i=i.substr(0,r));let o=i.indexOf("?");o>=0&&(a.search=i.substr(o),i=i.substr(0,o)),i&&(a.pathname=i)}return a}function jg(i,a,r,o){o===void 0&&(o={});let{window:c=document.defaultView,v5Compat:l=!1}=o,g=c.history,p=ml.Pop,m=null,v=j();v==null&&(v=0,g.replaceState(Hc({},g.state,{idx:v}),""));function j(){return(g.state||{idx:null}).idx}function A(){p=ml.Pop;let E=j(),P=E==null?null:E-v;v=E,m&&m({action:p,location:M.location,delta:P})}function R(E,P){p=ml.Push;let q=df(M.location,E,P);v=j()+1;let K=Jh(q,v),H=M.createHref(q);try{g.pushState(K,"",H)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;c.location.assign(H)}l&&m&&m({action:p,location:M.location,delta:1})}function b(E,P){p=ml.Replace;let q=df(M.location,E,P);v=j();let K=Jh(q,v),H=M.createHref(q);g.replaceState(K,"",H),l&&m&&m({action:p,location:M.location,delta:0})}function z(E){let P=c.location.origin!=="null"?c.location.origin:c.location.href,q=typeof E=="string"?E:$d(E);return q=q.replace(/ $/,"%20"),ea(P,"No window.location.(origin|href) available to create URL for href: "+q),new URL(q,P)}let M={get action(){return p},get location(){return i(c,g)},listen(E){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(Gh,A),m=E,()=>{c.removeEventListener(Gh,A),m=null}},createHref(E){return a(c,E)},createURL:z,encodeLocation(E){let P=z(E);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:R,replace:b,go(E){return g.go(E)}};return M}var Kh;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Kh||(Kh={}));function Sg(i,a,r){return r===void 0&&(r="/"),Ng(i,a,r)}function Ng(i,a,r,o){let c=typeof a=="string"?Sc(a):a,l=Pf(c.pathname||"/",r);if(l==null)return null;let g=Cm(i);kg(g);let p=null;for(let m=0;p==null&&m<g.length;++m){let v=Tg(l);p=Rg(g[m],v)}return p}function Cm(i,a,r,o){a===void 0&&(a=[]),r===void 0&&(r=[]),o===void 0&&(o="");let c=(l,g,p)=>{let m={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:g,route:l};m.relativePath.startsWith("/")&&(ea(m.relativePath.startsWith(o),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(o.length));let v=xl([o,m.relativePath]),j=r.concat(m);l.children&&l.children.length>0&&(ea(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Cm(l.children,a,j,v)),!(l.path==null&&!l.index)&&a.push({path:v,score:Eg(v,l.index),routesMeta:j})};return i.forEach((l,g)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))c(l,g);else for(let m of Pm(l.path))c(l,g,m)}),a}function Pm(i){let a=i.split("/");if(a.length===0)return[];let[r,...o]=a,c=r.endsWith("?"),l=r.replace(/\?$/,"");if(o.length===0)return c?[l,""]:[l];let g=Pm(o.join("/")),p=[];return p.push(...g.map(m=>m===""?l:[l,m].join("/"))),c&&p.push(...g),p.map(m=>i.startsWith("/")&&m===""?"/":m)}function kg(i){i.sort((a,r)=>a.score!==r.score?r.score-a.score:Mg(a.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const Ag=/^:[\w-]+$/,Cg=3,Pg=2,Lg=1,_g=10,Ig=-2,Qh=i=>i==="*";function Eg(i,a){let r=i.split("/"),o=r.length;return r.some(Qh)&&(o+=Ig),a&&(o+=Pg),r.filter(c=>!Qh(c)).reduce((c,l)=>c+(Ag.test(l)?Cg:l===""?Lg:_g),o)}function Mg(i,a){return i.length===a.length&&i.slice(0,-1).every((o,c)=>o===a[c])?i[i.length-1]-a[a.length-1]:0}function Rg(i,a,r){let{routesMeta:o}=i,c={},l="/",g=[];for(let p=0;p<o.length;++p){let m=o[p],v=p===o.length-1,j=l==="/"?a:a.slice(l.length)||"/",A=Fg({path:m.relativePath,caseSensitive:m.caseSensitive,end:v},j),R=m.route;if(!A)return null;Object.assign(c,A.params),g.push({params:c,pathname:xl([l,A.pathname]),pathnameBase:Wg(xl([l,A.pathnameBase])),route:R}),A.pathnameBase!=="/"&&(l=xl([l,A.pathnameBase]))}return g}function Fg(i,a){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[r,o]=Dg(i.path,i.caseSensitive,i.end),c=a.match(r);if(!c)return null;let l=c[0],g=l.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:o.reduce((v,j,A)=>{let{paramName:R,isOptional:b}=j;if(R==="*"){let M=p[A]||"";g=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const z=p[A];return b&&!z?v[R]=void 0:v[R]=(z||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:g,pattern:i}}function Dg(i,a,r){a===void 0&&(a=!1),r===void 0&&(r=!0),Cf(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let o=[],c="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,p,m)=>(o.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(o.push({paramName:"*"}),c+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?c+="\\/*$":i!==""&&i!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),o]}function Tg(i){try{return i.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Cf(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),i}}function Pf(i,a){if(a==="/")return i;if(!i.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,o=i.charAt(r);return o&&o!=="/"?null:i.slice(r)||"/"}const Og=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bg=i=>Og.test(i);function zg(i,a){a===void 0&&(a="/");let{pathname:r,search:o="",hash:c=""}=typeof i=="string"?Sc(i):i,l;if(r)if(Bg(r))l=r;else{if(r.includes("//")){let g=r;r=r.replace(/\/\/+/g,"/"),Cf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(g+" -> "+r))}r.startsWith("/")?l=Xh(r.substring(1),"/"):l=Xh(r,a)}else l=a;return{pathname:l,search:qg(o),hash:$g(c)}}function Xh(i,a){let r=a.replace(/\/+$/,"").split("/");return i.split("/").forEach(c=>{c===".."?r.length>1&&r.pop():c!=="."&&r.push(c)}),r.length>1?r.join("/"):"/"}function Bu(i,a,r,o){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+a+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ug(i){return i.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function Lf(i,a){let r=Ug(i);return a?r.map((o,c)=>c===r.length-1?o.pathname:o.pathnameBase):r.map(o=>o.pathnameBase)}function _f(i,a,r,o){o===void 0&&(o=!1);let c;typeof i=="string"?c=Sc(i):(c=Hc({},i),ea(!c.pathname||!c.pathname.includes("?"),Bu("?","pathname","search",c)),ea(!c.pathname||!c.pathname.includes("#"),Bu("#","pathname","hash",c)),ea(!c.search||!c.search.includes("#"),Bu("#","search","hash",c)));let l=i===""||c.pathname==="",g=l?"/":c.pathname,p;if(g==null)p=r;else{let A=a.length-1;if(!o&&g.startsWith("..")){let R=g.split("/");for(;R[0]==="..";)R.shift(),A-=1;c.pathname=R.join("/")}p=A>=0?a[A]:"/"}let m=zg(c,p),v=g&&g!=="/"&&g.endsWith("/"),j=(l||g===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(v||j)&&(m.pathname+="/"),m}const xl=i=>i.join("/").replace(/\/\/+/g,"/"),Wg=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),qg=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,$g=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Hg(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const Lm=["post","put","patch","delete"];new Set(Lm);const Vg=["get",...Lm];new Set(Vg);function Vc(){return Vc=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},Vc.apply(this,arguments)}const If=X.createContext(null),Yg=X.createContext(null),vl=X.createContext(null),Jd=X.createContext(null),bl=X.createContext({outlet:null,matches:[],isDataRoute:!1}),_m=X.createContext(null);function Gg(i,a){let{relative:r}=a===void 0?{}:a;Nc()||ea(!1);let{basename:o,navigator:c}=X.useContext(vl),{hash:l,pathname:g,search:p}=Em(i,{relative:r}),m=g;return o!=="/"&&(m=g==="/"?o:xl([o,g])),c.createHref({pathname:m,search:p,hash:l})}function Nc(){return X.useContext(Jd)!=null}function kc(){return Nc()||ea(!1),X.useContext(Jd).location}function Im(i){X.useContext(vl).static||X.useLayoutEffect(i)}function po(){let{isDataRoute:i}=X.useContext(bl);return i?o1():Jg()}function Jg(){Nc()||ea(!1);let i=X.useContext(If),{basename:a,future:r,navigator:o}=X.useContext(vl),{matches:c}=X.useContext(bl),{pathname:l}=kc(),g=JSON.stringify(Lf(c,r.v7_relativeSplatPath)),p=X.useRef(!1);return Im(()=>{p.current=!0}),X.useCallback(function(v,j){if(j===void 0&&(j={}),!p.current)return;if(typeof v=="number"){o.go(v);return}let A=_f(v,JSON.parse(g),l,j.relative==="path");i==null&&a!=="/"&&(A.pathname=A.pathname==="/"?a:xl([a,A.pathname])),(j.replace?o.replace:o.push)(A,j.state,j)},[a,o,g,l,i])}function Em(i,a){let{relative:r}=a===void 0?{}:a,{future:o}=X.useContext(vl),{matches:c}=X.useContext(bl),{pathname:l}=kc(),g=JSON.stringify(Lf(c,o.v7_relativeSplatPath));return X.useMemo(()=>_f(i,JSON.parse(g),l,r==="path"),[i,g,l,r])}function Kg(i,a){return Qg(i,a)}function Qg(i,a,r,o){Nc()||ea(!1);let{navigator:c}=X.useContext(vl),{matches:l}=X.useContext(bl),g=l[l.length-1],p=g?g.params:{};g&&g.pathname;let m=g?g.pathnameBase:"/";g&&g.route;let v=kc(),j;if(a){var A;let E=typeof a=="string"?Sc(a):a;m==="/"||(A=E.pathname)!=null&&A.startsWith(m)||ea(!1),j=E}else j=v;let R=j.pathname||"/",b=R;if(m!=="/"){let E=m.replace(/^\//,"").split("/");b="/"+R.replace(/^\//,"").split("/").slice(E.length).join("/")}let z=Sg(i,{pathname:b}),M=n1(z&&z.map(E=>Object.assign({},E,{params:Object.assign({},p,E.params),pathname:xl([m,c.encodeLocation?c.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?m:xl([m,c.encodeLocation?c.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),l,r,o);return a&&M?X.createElement(Jd.Provider,{value:{location:Vc({pathname:"/",search:"",hash:"",state:null,key:"default"},j),navigationType:ml.Pop}},M):M}function Xg(){let i=s1(),a=Hg(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),r=i instanceof Error?i.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},a),r?X.createElement("pre",{style:c},r):null,null)}const Zg=X.createElement(Xg,null);class e1 extends X.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,r){return r.location!==a.location||r.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:r.error,location:r.location,revalidation:a.revalidation||r.revalidation}}componentDidCatch(a,r){console.error("React Router caught the following error during render",a,r)}render(){return this.state.error!==void 0?X.createElement(bl.Provider,{value:this.props.routeContext},X.createElement(_m.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function t1(i){let{routeContext:a,match:r,children:o}=i,c=X.useContext(If);return c&&c.static&&c.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=r.route.id),X.createElement(bl.Provider,{value:a},o)}function n1(i,a,r,o){var c;if(a===void 0&&(a=[]),r===void 0&&(r=null),o===void 0&&(o=null),i==null){var l;if(!r)return null;if(r.errors)i=r.matches;else if((l=o)!=null&&l.v7_partialHydration&&a.length===0&&!r.initialized&&r.matches.length>0)i=r.matches;else return null}let g=i,p=(c=r)==null?void 0:c.errors;if(p!=null){let j=g.findIndex(A=>A.route.id&&p?.[A.route.id]!==void 0);j>=0||ea(!1),g=g.slice(0,Math.min(g.length,j+1))}let m=!1,v=-1;if(r&&o&&o.v7_partialHydration)for(let j=0;j<g.length;j++){let A=g[j];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(v=j),A.route.id){let{loaderData:R,errors:b}=r,z=A.route.loader&&R[A.route.id]===void 0&&(!b||b[A.route.id]===void 0);if(A.route.lazy||z){m=!0,v>=0?g=g.slice(0,v+1):g=[g[0]];break}}}return g.reduceRight((j,A,R)=>{let b,z=!1,M=null,E=null;r&&(b=p&&A.route.id?p[A.route.id]:void 0,M=A.route.errorElement||Zg,m&&(v<0&&R===0?(l1("route-fallback"),z=!0,E=null):v===R&&(z=!0,E=A.route.hydrateFallbackElement||null)));let P=a.concat(g.slice(0,R+1)),q=()=>{let K;return b?K=M:z?K=E:A.route.Component?K=X.createElement(A.route.Component,null):A.route.element?K=A.route.element:K=j,X.createElement(t1,{match:A,routeContext:{outlet:j,matches:P,isDataRoute:r!=null},children:K})};return r&&(A.route.ErrorBoundary||A.route.errorElement||R===0)?X.createElement(e1,{location:r.location,revalidation:r.revalidation,component:M,error:b,children:q(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):q()},null)}var Mm=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(Mm||{}),Rm=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(Rm||{});function r1(i){let a=X.useContext(If);return a||ea(!1),a}function a1(i){let a=X.useContext(Yg);return a||ea(!1),a}function i1(i){let a=X.useContext(bl);return a||ea(!1),a}function Fm(i){let a=i1(),r=a.matches[a.matches.length-1];return r.route.id||ea(!1),r.route.id}function s1(){var i;let a=X.useContext(_m),r=a1(),o=Fm();return a!==void 0?a:(i=r.errors)==null?void 0:i[o]}function o1(){let{router:i}=r1(Mm.UseNavigateStable),a=Fm(Rm.UseNavigateStable),r=X.useRef(!1);return Im(()=>{r.current=!0}),X.useCallback(function(c,l){l===void 0&&(l={}),r.current&&(typeof c=="number"?i.navigate(c):i.navigate(c,Vc({fromRouteId:a},l)))},[i,a])}const Zh={};function l1(i,a,r){Zh[i]||(Zh[i]=!0)}function c1(i,a){i?.v7_startTransition,i?.v7_relativeSplatPath}function ep(i){let{to:a,replace:r,state:o,relative:c}=i;Nc()||ea(!1);let{future:l,static:g}=X.useContext(vl),{matches:p}=X.useContext(bl),{pathname:m}=kc(),v=po(),j=_f(a,Lf(p,l.v7_relativeSplatPath),m,c==="path"),A=JSON.stringify(j);return X.useEffect(()=>v(JSON.parse(A),{replace:r,state:o,relative:c}),[v,A,c,r,o]),null}function Ao(i){ea(!1)}function d1(i){let{basename:a="/",children:r=null,location:o,navigationType:c=ml.Pop,navigator:l,static:g=!1,future:p}=i;Nc()&&ea(!1);let m=a.replace(/^\/*/,"/"),v=X.useMemo(()=>({basename:m,navigator:l,static:g,future:Vc({v7_relativeSplatPath:!1},p)}),[m,p,l,g]);typeof o=="string"&&(o=Sc(o));let{pathname:j="/",search:A="",hash:R="",state:b=null,key:z="default"}=o,M=X.useMemo(()=>{let E=Pf(j,m);return E==null?null:{location:{pathname:E,search:A,hash:R,state:b,key:z},navigationType:c}},[m,j,A,R,b,z,c]);return M==null?null:X.createElement(vl.Provider,{value:v},X.createElement(Jd.Provider,{children:r,value:M}))}function u1(i){let{children:a,location:r}=i;return Kg(uf(a),r)}new Promise(()=>{});function uf(i,a){a===void 0&&(a=[]);let r=[];return X.Children.forEach(i,(o,c)=>{if(!X.isValidElement(o))return;let l=[...a,c];if(o.type===X.Fragment){r.push.apply(r,uf(o.props.children,l));return}o.type!==Ao&&ea(!1),!o.props.index||!o.props.children||ea(!1);let g={id:o.props.id||l.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(g.children=uf(o.props.children,l)),r.push(g)}),r}function ff(){return ff=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},ff.apply(this,arguments)}function f1(i,a){if(i==null)return{};var r={},o=Object.keys(i),c,l;for(l=0;l<o.length;l++)c=o[l],!(a.indexOf(c)>=0)&&(r[c]=i[c]);return r}function h1(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function p1(i,a){return i.button===0&&(!a||a==="_self")&&!h1(i)}function hf(i){return i===void 0&&(i=""),new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((a,r)=>{let o=i[r];return a.concat(Array.isArray(o)?o.map(c=>[r,c]):[[r,o]])},[]))}function m1(i,a){let r=hf(i);return a&&a.forEach((o,c)=>{r.has(c)||a.getAll(c).forEach(l=>{r.append(c,l)})}),r}const g1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],x1="6";try{window.__reactRouterVersion=x1}catch{}const y1="startTransition",tp=hg[y1];function v1(i){let{basename:a,children:r,future:o,window:c}=i,l=X.useRef();l.current==null&&(l.current=bg({window:c,v5Compat:!0}));let g=l.current,[p,m]=X.useState({action:g.action,location:g.location}),{v7_startTransition:v}=o||{},j=X.useCallback(A=>{v&&tp?tp(()=>m(A)):m(A)},[m,v]);return X.useLayoutEffect(()=>g.listen(j),[g,j]),X.useEffect(()=>c1(o),[o]),X.createElement(d1,{basename:a,children:r,location:p.location,navigationType:p.action,navigator:g,future:o})}const b1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kc=X.forwardRef(function(a,r){let{onClick:o,relative:c,reloadDocument:l,replace:g,state:p,target:m,to:v,preventScrollReset:j,viewTransition:A}=a,R=f1(a,g1),{basename:b}=X.useContext(vl),z,M=!1;if(typeof v=="string"&&w1.test(v)&&(z=v,b1))try{let K=new URL(window.location.href),H=v.startsWith("//")?new URL(K.protocol+v):new URL(v),fe=Pf(H.pathname,b);H.origin===K.origin&&fe!=null?v=fe+H.search+H.hash:M=!0}catch{}let E=Gg(v,{relative:c}),P=j1(v,{replace:g,state:p,target:m,preventScrollReset:j,relative:c,viewTransition:A});function q(K){o&&o(K),K.defaultPrevented||P(K)}return X.createElement("a",ff({},R,{href:z||E,onClick:M||l?o:q,ref:r,target:m}))});var np;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(np||(np={}));var rp;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(rp||(rp={}));function j1(i,a){let{target:r,replace:o,state:c,preventScrollReset:l,relative:g,viewTransition:p}=a===void 0?{}:a,m=po(),v=kc(),j=Em(i,{relative:g});return X.useCallback(A=>{if(p1(A,r)){A.preventDefault();let R=o!==void 0?o:$d(v)===$d(j);m(i,{replace:R,state:c,preventScrollReset:l,relative:g,viewTransition:p})}},[v,m,j,o,c,r,i,l,g,p])}function Dm(i){let a=X.useRef(hf(i)),r=X.useRef(!1),o=kc(),c=X.useMemo(()=>m1(o.search,r.current?null:a.current),[o.search]),l=po(),g=X.useCallback((p,m)=>{const v=hf(typeof p=="function"?p(c):p);r.current=!0,l("?"+v,m)},[l,c]);return[c,g]}function Vl({showCTA:i=!0,showLogout:a=!1,onLogout:r,showMobileMenu:o=!1,isMobileMenuOpen:c=!1,onMobileMenuToggle:l,isSticky:g=!1}){return t.jsxs("header",{className:`site-header ${g?"site-header--sticky":""}`,children:[o&&t.jsx("button",{className:"mobile-menu-toggle",onClick:p=>{p.stopPropagation(),l&&l()},"aria-label":"Toggle menu",type:"button",children:t.jsxs("span",{className:`hamburger ${c?"active":""}`,children:[t.jsx("span",{}),t.jsx("span",{}),t.jsx("span",{})]})}),t.jsxs("div",{className:"brand",children:[t.jsx("span",{className:"logo-mark",children:"SM"}),t.jsxs("div",{children:[t.jsx("p",{className:"logo-title",children:"Subscription Manager HK"}),t.jsx("p",{className:"logo-subtitle",children:"Recurring payments for Hong Kong memberships"})]})]}),i&&t.jsx(Kc,{className:"primary-btn",to:"/login",children:"Launch Demo"}),a&&t.jsx("button",{onClick:r,className:"ghost-btn",children:"Logout"})]})}function Yl(){return t.jsxs("footer",{className:"site-footer",children:[t.jsx("p",{children:" 2025 Subscription Manager HK  Built for recurring memberships in Hong Kong."}),t.jsx("p",{})]})}function Yc({isOpen:i,message:a,type:r="success",onClose:o,title:c}){if(!i||!a)return null;const l=r==="success"?"success":"error",g=()=>{switch(l){case"success":return"fa-check-circle";case"error":return"fa-exclamation-circle";default:return"fa-exclamation-circle"}};return t.jsx("div",{className:"alert-modal-overlay",onClick:p=>{p.stopPropagation()},children:t.jsxs("div",{className:`alert-modal alert-modal--${l}`,onClick:p=>p.stopPropagation(),children:[t.jsxs("div",{className:"alert-modal-content",children:[t.jsxs("div",{className:"alert-modal-header",children:[t.jsx("div",{className:"alert-modal-icon",children:t.jsx("i",{className:`fas ${g()}`})}),c&&t.jsx("h3",{className:"alert-modal-title",children:c})]}),t.jsx("div",{className:"alert-modal-message",children:a})]}),t.jsx("div",{className:"alert-modal-divider"}),t.jsx("div",{className:"alert-modal-actions",children:t.jsx("button",{className:"primary-btn",onClick:o,children:"OK"})})]})})}function Gl({message:i,type:a="success",onClose:r,duration:o=3e3}){if(X.useEffect(()=>{if(i&&o>0){const l=setTimeout(()=>{r&&r()},o);return()=>clearTimeout(l)}},[i,o,r]),!i)return null;const c=a==="success"?"success":"error";return t.jsx("div",{className:`notie notie--${c}`,children:t.jsx("div",{className:"notie-content",children:i})})}const ap={totalMembers:312,collectedMonth:12450,collectedYear:220800,outstanding:18400,overdueMembers:27,expectedAnnual:249600},ip=[{member:"Fatima Hussain",period:"Oct 2025",amount:"$50",method:"PayMe",status:"Paid",date:"02 Oct  09:11"},{member:"Ahmed Al-Rashid",period:"Oct 2025",amount:"$50",method:"FPS",status:"Paid",date:"05 Oct  10:22"},{member:"Aisha Malik",period:"Sep 2025",amount:"$100",method:"Card",status:"Unpaid",date:"30 Sep  12:44"},{member:"Omar Rahman",period:"Sep 2025",amount:"$100",method:"PayMe",status:"Overdue",date:"20 Sep  14:10"}],S1=[{id:"HK1001",name:"Shan Yeager",email:"0741sanjai@gmail.com",phone:"+852 9000 1234",status:"Active",balance:"$250 Outstanding",nextDue:"20 Nov 2025",lastPayment:"15 Oct 2025"},{id:"HK1021",name:"Ahmed Al-Rashid",email:"ahmed.rashid@hk.org",phone:"+852 9123 4567",status:"Active",balance:"$150 Outstanding",nextDue:"05 Nov 2025",lastPayment:"05 Oct 2025"},{id:"HK1088",name:"Fatima Hussain",email:"fatima.hussain@hk.org",phone:"+852 6789 1234",status:"Active",balance:"$0",nextDue:"05 Nov 2025",lastPayment:"02 Oct 2025"},{id:"HK1104",name:"Omar Rahman",email:"omar.rahman@hk.org",phone:"+852 9555 2011",status:"Inactive",balance:"$250 Overdue",nextDue:"20 Sep 2025",lastPayment:"15 Jul 2025"},{id:"HK1112",name:"Aisha Malik",email:"aisha.malik@hk.org",phone:"+852 9988 7766",status:"Active",balance:"$100 Unpaid",nextDue:"30 Sep 2025",lastPayment:"05 Aug 2025"},{id:"HK1125",name:"Yusuf Ibrahim",email:"yusuf.ibrahim@hk.org",phone:"+852 9234 5678",status:"Active",balance:"$50 Outstanding",nextDue:"10 Nov 2025",lastPayment:"10 Oct 2025"},{id:"HK1136",name:"Mariam Abdullah",email:"mariam.abdullah@hk.org",phone:"+852 9345 6789",status:"Active",balance:"$0",nextDue:"15 Nov 2025",lastPayment:"15 Oct 2025"},{id:"HK1147",name:"Hassan Al-Farsi",email:"hassan.farsi@hk.org",phone:"+852 9456 7890",status:"Active",balance:"$0",nextDue:"20 Nov 2025",lastPayment:"20 Oct 2025"},{id:"HK1158",name:"Zainab Mustafa",email:"zainab.mustafa@hk.org",phone:"+852 9567 8901",status:"Inactive",balance:"$200 Overdue",nextDue:"01 Oct 2025",lastPayment:"01 Aug 2025"}],N1=[{id:1,name:"Ibrahim Khan",role:"Owner",status:"Active"},{id:2,name:"Yasmin Ahmed",role:"Finance Admin",status:"Active"},{id:3,name:"Khalid Hassan",role:"Viewer",status:"Pending"}],k1=[{id:"INV-2025-095",memberId:"HK1001",memberName:"Shan Yeager",period:"Nov 2025 Monthly",amount:"$50",status:"Unpaid",due:"20 Nov 2025",method:"-",reference:"-"},{id:"INV-2025-094",memberId:"HK1001",memberName:"Shan Yeager",period:"Oct 2025 Monthly",amount:"$50",status:"Overdue",due:"20 Oct 2025",method:"-",reference:"-"},{id:"INV-2025-093",memberId:"HK1001",memberName:"Shan Yeager",period:"Sep 2025 Eid 2",amount:"$100",status:"Overdue",due:"30 Sep 2025",method:"-",reference:"-"},{id:"INV-2025-092",memberId:"HK1001",memberName:"Shan Yeager",period:"Sep 2025 Monthly",amount:"$50",status:"Overdue",due:"20 Sep 2025",method:"-",reference:"-"},{id:"INV-2025-091",memberId:"HK1021",memberName:"Ahmed Al-Rashid",period:"Oct 2025",amount:"$50",status:"Paid",due:"05 Oct 2025",method:"FPS",reference:"FP89231"},{id:"INV-2025-072",memberId:"HK1112",memberName:"Aisha Malik",period:"Sep 2025 (Eid)",amount:"$100",status:"Unpaid",due:"30 Sep 2025",method:"PayMe",reference:"PM22011"},{id:"INV-2025-051",memberId:"HK1021",memberName:"Ahmed Al-Rashid",period:"Aug 2025",amount:"$50",status:"Paid",due:"05 Aug 2025",method:"Bank Transfer",reference:"BT99127"}],sp=[{date:"05 Oct 2025",amount:"$50",method:"FPS",reference:"FP89231"},{date:"05 Sep 2025",amount:"$50",method:"PayMe",reference:"PM22110"},{date:"02 Apr 2025",amount:"$100",method:"Bank Transfer",reference:"BT44881"}],op=[{channel:"Email",message:"Upcoming due reminder",status:"Delivered",date:"02 Oct 2025"},{channel:"WhatsApp",message:"Overdue alert",status:"Pending",date:"01 Oct 2025"}],zu=[{label:"3 days before due date",channels:["Email","WhatsApp"]},{label:"On due date",channels:["Email","WhatsApp"]},{label:"5 days after due date",channels:["Email"]}],lp=[{name:"Direct Bank Transfer",visible:!0,details:["HSBC Hong Kong","123-456789-001","Subscription Manager HK"]},{name:"FPS",visible:!0,details:["FPS ID 1234567"]},{name:"Alipay",visible:!0,details:["Upload QR placeholder"]},{name:"PayMe",visible:!0,details:["Upload QR placeholder"]},{name:"Credit/Debit Cards",visible:!0,details:["Gateway: Stripe"]}];function A1(i={}){const{nonce:a,onScriptLoadSuccess:r,onScriptLoadError:o}=i,[c,l]=X.useState(!1),g=X.useRef(r);g.current=r;const p=X.useRef(o);return p.current=o,X.useEffect(()=>{const m=document.createElement("script");return m.src="https://accounts.google.com/gsi/client",m.async=!0,m.defer=!0,m.nonce=a,m.onload=()=>{var v;l(!0),(v=g.current)===null||v===void 0||v.call(g)},m.onerror=()=>{var v;l(!1),(v=p.current)===null||v===void 0||v.call(p)},document.body.appendChild(m),()=>{document.body.removeChild(m)}},[a]),c}const C1=X.createContext(null);function P1({clientId:i,nonce:a,onScriptLoadSuccess:r,onScriptLoadError:o,children:c}){const l=A1({nonce:a,onScriptLoadSuccess:r,onScriptLoadError:o}),g=X.useMemo(()=>({clientId:i,scriptLoadedSuccessfully:l}),[i,l]);return Af.createElement(C1.Provider,{value:g},c)}function L1(){const[i,a]=X.useState(null),[r,o]=X.useState(null),[c,l]=X.useState({email:"",password:""}),[g,p]=X.useState(!1),[m,v]=X.useState({email:"",password:""}),[j,A]=X.useState(null),[R,b]=X.useState("error"),z=po();X.useEffect(()=>{sessionStorage.getItem("logoutReason")==="inactivity"&&(sessionStorage.removeItem("logoutReason"),a({type:"error",text:"Session expired due to inactivity. Please login again."}))},[]);const M=K=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(K),E=()=>{const K={email:"",password:""};return c.email.trim()?M(c.email.trim())?c.password?(v(K),!0):(K.password="Password is required",v(K),A("Password is required"),b("error"),setTimeout(()=>A(null),3e3),!1):(K.email="Please enter a valid email address",v(K),A("Please enter a valid email address"),b("error"),setTimeout(()=>A(null),3e3),!1):(K.email="Email is required",v(K),A("Email is required"),b("error"),setTimeout(()=>A(null),3e3),!1)},P=!1,q=async K=>{{if(!E())return;o(K),a(null),v({email:"",password:""});try{const fe=await fetch("http://localhost:4000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c.email.trim(),password:c.password,role:K})});let de;try{de=await fe.json()}catch(Pe){console.error("JSON parse error:",Pe),a({type:"error",text:"Invalid response from server. Please try again."}),o(null);return}if(!fe.ok||!de.success){de.locked?a({type:"error",text:de.message||"Account temporarily locked due to multiple failed login attempts. Please try again later."}):a({type:"error",text:de.message||"Invalid email or password. Please check your credentials and try again."}),o(null);return}sessionStorage.setItem("authToken",de.token),de.role==="Admin"?(sessionStorage.setItem("adminEmail",de.email),sessionStorage.setItem("adminName",de.name),de.adminId&&sessionStorage.setItem("adminId",de.adminId),de.adminRole&&sessionStorage.setItem("adminRole",de.adminRole),o(null),z("/admin",{replace:!0,state:{role:"Admin",token:de.token,email:de.email,name:de.name,adminId:de.adminId,adminRole:de.adminRole}})):(sessionStorage.setItem("memberEmail",de.email),sessionStorage.setItem("memberName",de.name),sessionStorage.setItem("memberId",de.memberId),o(null),z("/member",{replace:!0,state:{role:"Member",token:de.token,email:de.email,name:de.name,memberId:de.memberId,phone:de.phone}}))}catch(H){console.error("Login error:",H),a({type:"error",text:"Unable to connect. Please check your connection and try again."}),o(null)}}};return t.jsxs(t.Fragment,{children:[t.jsx(Vl,{showCTA:!1}),t.jsx("main",{className:"login-main",children:t.jsxs("div",{className:"login-shell",children:[t.jsxs("aside",{className:"login-menu",children:[t.jsx("p",{className:"eyebrow light",children:"Welcome"}),t.jsx("h2",{children:"Subscription Manager HK"}),t.jsx("p",{children:"Streamlined portal for Hong Kong membership dues. Track monthly payments and automations from one place."}),t.jsxs("ul",{children:[t.jsx("li",{children:"Supports FPS, PayMe, bank transfers, cards"}),t.jsx("li",{children:"Automated reminders via email and WhatsApp"}),t.jsx("li",{children:"Clear dashboards for admins and members"})]})]}),t.jsxs("div",{className:"login-form-card",children:[t.jsx("div",{className:"login-form-card__header",children:t.jsxs("h1",{children:[t.jsx("i",{className:"fas fa-sign-in-alt",style:{marginRight:"12px",color:"#5a31ea"}}),"Sign in"]})}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-envelope",style:{marginRight:"8px",color:"#5a31ea"}}),"Email ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",inputMode:"email",value:c.email,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true",title:"",onInvalid:K=>K.preventDefault(),onChange:K=>{l({...c,email:K.target.value}),m.email&&v({...m,email:""});const H=K.target.value.trim();(!H||!M(H))&&m.password&&v({...m,password:""})},onBlur:()=>{c.email.trim()&&!M(c.email.trim())?(v({...m,email:"Please enter a valid email address",password:""}),A("Please enter a valid email address"),b("error"),setTimeout(()=>A(null),3e3)):c.email.trim()?v({...m,email:""}):(v({...m,email:"Email is required",password:""}),A("Email is required"),b("error"),setTimeout(()=>A(null),3e3))},placeholder:"Enter your email address",className:`mono-input ${m.email?"input-error":""}`,disabled:r!==null})]}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock",style:{marginRight:"8px",color:"#5a31ea"}}),"Password ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:g?"text":"password",value:c.password,autoComplete:"new-password",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true",title:"",onInvalid:K=>K.preventDefault(),onChange:K=>{l({...c,password:K.target.value}),m.password&&v({...m,password:""})},onBlur:()=>{c.email.trim()&&M(c.email.trim())?c.password?v({...m,password:""}):(v({...m,password:"Password is required"}),A("Password is required"),b("error"),setTimeout(()=>A(null),3e3)):m.password&&v({...m,password:""})},placeholder:"Enter your password",className:`mono-input ${m.password?"input-error":""}`,style:{paddingRight:"45px"},disabled:r!==null}),t.jsx("button",{type:"button",onClick:()=>p(!g),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666"},"aria-label":g?"Hide password":"Show password",disabled:r!==null,children:g?t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),t.jsx("div",{style:{marginTop:"8px",textAlign:"right"},children:t.jsx(Kc,{to:"/forgot-password",style:{color:"#5a31ea",textDecoration:"none",fontSize:"0.875rem",fontWeight:"500"},onClick:K=>{r!==null&&K.preventDefault()},children:"Forgot Password?"})})]}),t.jsxs("div",{className:"login-hints",children:[t.jsxs("p",{style:{marginTop:0,fontWeight:"600",color:"#1a1a1a",marginBottom:"12px"},children:[t.jsx("i",{className:"fas fa-info-circle",style:{marginRight:"8px",color:"#5a31ea"}}),"Demo Credentials"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Admin:"})," admin2002@gmail.com / #Admin2204"]}),P]}),t.jsxs("div",{className:"login-buttons",children:[t.jsx("button",{type:"button",className:"btn-admin",onClick:()=>q("admin"),disabled:r!==null,style:{position:"relative",opacity:r!==null?.7:1,cursor:r!==null?"not-allowed":"pointer"},children:r==="admin"?t.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[t.jsxs("svg",{style:{animation:"spin 1s linear infinite",width:"16px",height:"16px"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),t.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Authorising"]}):"Login"}),P]}),P,t.jsx(Yc,{isOpen:!!i,message:i?.text,type:i?.type||"error",onClose:()=>a(null)}),t.jsx(Gl,{message:j,type:R,onClose:()=>A(null),duration:3e3})]})]})}),t.jsx(Yl,{})]})}const zi={Paid:"badge badge-paid",Unpaid:"badge badge-unpaid",Overdue:"badge badge-overdue","Due Soon":"badge badge-unpaid","Pending Verification":"badge badge-pending",Active:"badge badge-active",Inactive:"badge badge-inactive",Delivered:"badge badge-paid",Pending:"badge badge-pending",Completed:"badge badge-paid",Rejected:"badge badge-overdue"};function _i({columns:i,rows:a}){const[r,o]=X.useState(!1),[c,l]=X.useState(null),[g,p]=X.useState({column:null,direction:"asc"});X.useEffect(()=>{const E=()=>{o(window.innerWidth<=768)};return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),X.useEffect(()=>{const E=P=>{P.key==="Escape"&&c!==null&&l(null)};return c!==null?(document.addEventListener("keydown",E),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",E),document.body.style.overflow=""}},[c]);const m=(E,P)=>{const q=["Name","Member","User","Donor Name","Source"];for(const K of q)if(P.includes(K)){const H=E[K];if(H&&H!=="-"&&H!=="N/A"){if(typeof H=="object"&&H!==null&&H.render)continue;return H}}return null},v=(E,P)=>{if(!P.includes("Status"))return{status:null,borderClass:""};const q=E.Status;let K=null;if(typeof q=="object"&&q!==null&&q.render){const de=q.render();typeof de=="string"?K=de:de?.props?.children&&(K=de.props.children)}else q&&(K=q);if(!K||K==="-"||K==="N/A")return{status:null,borderClass:""};const H=K.toLowerCase();let fe="mobile-card-border-default";return H.includes("active")||H.includes("paid")||H.includes("completed")?fe="mobile-card-border-success":H.includes("pending")?fe="mobile-card-border-warning":(H.includes("inactive")||H.includes("overdue")||H.includes("rejected"))&&(fe="mobile-card-border-danger"),{status:K,borderClass:fe,statusValue:q}},j=(E,P)=>{const q=["Balance","Amount"];for(const K of q)if(P.includes(K)){const H=E[K];if(H&&H!=="-"&&H!=="N/A"&&H!=="$0"){if(typeof H=="object"&&H!==null&&H.render)continue;return{label:K,value:H}}}return null},A=E=>{const P=["Amount","Balance","Outstanding","Total","Collected","Expected","Avg per Member","Transactions","Donation","Donations","Invoice #"];return E==="Status"||E==="Actions"?"center":P.includes(E)?"right":"left"},R=E=>{if(E==null)return"";if(typeof E=="number")return E;if(typeof E=="string"){const P=parseFloat(E.replace(/[^0-9.-]/g,"")||"NaN");return isNaN(P)?E.toLowerCase():P}return E},b=E=>{p(P=>P.column===E?{column:E,direction:P.direction==="asc"?"desc":"asc"}:{column:E,direction:"asc"})},z=X.useMemo(()=>{if(!g.column)return a;const E=g.column,P=g.direction==="asc"?1:-1;return[...a].sort((q,K)=>{const H=q[E],fe=K[E];if(typeof H=="object"&&H!==null&&H.render||typeof fe=="object"&&fe!==null&&fe.render)return 0;const de=R(H),Pe=R(fe);return de<Pe?-1*P:de>Pe?1*P:0})},[a,g]),M=(E,P,q,K)=>{const H=m(E,q),fe=j(E,q);return q.map(de=>{if(["Name","Member","User","Donor Name","Source"].includes(de)&&H)return null;const Z=E[de];let ge;if(typeof Z=="object"&&Z!==null&&Z.render?ge=Z.render():ge=typeof Z=="string"&&zi[Z]&&de==="Status"?t.jsx("span",{className:zi[Z],children:Z}):Z,!ge&&ge!==0&&ge!=="$0"||fe&&de===fe.label)return null;if(de==="Actions"){const ee=E[de];if(typeof ee=="object"&&ee!==null&&ee.render)return t.jsxs("div",{className:"mobile-card-modal-row mobile-card-modal-row-actions",onClick:ie=>{(ie.target.tagName==="BUTTON"||ie.target.closest("button"))&&setTimeout(()=>{K()},150)},children:[t.jsx("div",{className:"mobile-card-modal-label",children:de}),t.jsx("div",{className:"mobile-card-modal-value",children:ee.render()})]},`${de}-${P}`)}const $=(ee=>({Email:"fa-envelope",WhatsApp:"fa-phone",Phone:"fa-phone",Balance:"fa-wallet",Amount:"fa-dollar-sign",Date:"fa-calendar","Due Date":"fa-calendar-alt",Period:"fa-calendar-week",Method:"fa-credit-card",Reference:"fa-hashtag",Status:"fa-info-circle",Type:"fa-tag",Details:"fa-file-alt",ID:"fa-id-card","Invoice #":"fa-file-invoice"})[ee]||null)(de);return t.jsxs("div",{className:"mobile-card-modal-row",children:[t.jsxs("div",{className:"mobile-card-modal-label",children:[$&&t.jsx("i",{className:`fas ${$}`,style:{marginRight:"6px",color:"#5a31ea",fontSize:"0.75rem"}}),de]}),t.jsx("div",{className:"mobile-card-modal-value",children:ge})]},`${de}-${P}`)})};if(r){const E=c!==null?z[c]:null;return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mobile-table-cards",children:z.map((P,q)=>{const K=m(P,i)||"View Details",H=v(P,i),fe=j(P,i);return t.jsx("div",{className:`mobile-table-card ${H.borderClass}`,style:P._rowStyle||{},onClick:()=>l(q),children:t.jsx("div",{className:"mobile-table-card-header",children:t.jsxs("div",{className:"mobile-table-card-header-content",children:[t.jsxs("div",{className:"mobile-table-card-title-section",children:[t.jsx("div",{className:"mobile-table-card-title",children:K}),fe&&t.jsxs("div",{className:"mobile-table-card-metric",children:[fe.label==="Balance"&&t.jsx("i",{className:"fas fa-wallet",style:{fontSize:"0.75rem",marginRight:"4px",color:"#666"}}),fe.label==="Amount"&&t.jsx("i",{className:"fas fa-dollar-sign",style:{fontSize:"0.75rem",marginRight:"4px",color:"#666"}}),t.jsx("span",{children:fe.value})]})]}),t.jsxs("div",{className:"mobile-table-card-header-right",children:[H.status&&t.jsx("div",{className:"mobile-table-card-status",children:typeof H.statusValue=="object"&&H.statusValue!==null&&H.statusValue.render?H.statusValue.render():t.jsx("span",{className:zi[H.status]||"badge",children:H.status})}),t.jsx("div",{className:"mobile-table-card-arrow",children:t.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]})})},`mobile-row-${q}`)})}),c!==null&&E&&t.jsx("div",{className:"mobile-card-modal-overlay",onClick:()=>l(null),children:t.jsxs("div",{className:"mobile-card-modal",onClick:P=>P.stopPropagation(),children:[t.jsxs("div",{className:"mobile-card-modal-header",children:[t.jsxs("div",{className:"mobile-card-modal-title-section",children:[t.jsx("div",{className:"mobile-card-modal-title",children:m(E,i)||"Details"}),j(E,i)&&t.jsxs("div",{className:"mobile-card-modal-metric",children:[j(E,i).label==="Balance"&&t.jsx("i",{className:"fas fa-wallet",style:{fontSize:"0.75rem",marginRight:"4px",color:"#666"}}),j(E,i).label==="Amount"&&t.jsx("i",{className:"fas fa-dollar-sign",style:{fontSize:"0.75rem",marginRight:"4px",color:"#666"}}),t.jsx("span",{children:j(E,i).value})]})]}),t.jsx("button",{className:"mobile-card-modal-close",onClick:()=>l(null),"aria-label":"Close",children:t.jsx("i",{className:"fa-solid fa-times"})})]}),t.jsx("div",{className:"mobile-card-modal-content",children:M(E,c,i,()=>l(null))})]})})]})}return t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsx("tr",{children:i.map(E=>{const P=A(E),q=g.column===E,K=q?g.direction==="asc"?"":"":"";return t.jsx("th",{style:{textAlign:P,cursor:"pointer",whiteSpace:"nowrap"},onClick:()=>b(E),"aria-sort":q?g.direction==="asc"?"ascending":"descending":"none",children:t.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[t.jsx("span",{children:E}),t.jsx("span",{style:{fontSize:"0.7rem",opacity:.7},children:K})]})},E)})})}),t.jsx("tbody",{children:z.map((E,P)=>t.jsx("tr",{style:E._rowStyle||{},children:i.map(q=>{const K=E[q],H=A(q);if(typeof K=="object"&&K!==null&&K.render)return t.jsx("td",{"data-label":q,style:{textAlign:H,verticalAlign:"middle"},children:K.render()},`${q}-render-${P}`);const fe=typeof K=="string"&&zi[K]&&q==="Status";return t.jsx("td",{"data-label":q,style:{textAlign:H,verticalAlign:"middle"},children:fe?t.jsx("span",{className:zi[K],children:K}):K},`${q}-${P}`)})},`${E.id??P}-${P}`))})]})}function zc({currentPage:i,totalPages:a,onPageChange:r,pageSize:o,onPageSizeChange:c,totalItems:l,pageSizeOptions:g=[5,10,20,50,100]}){if(a<=1&&o>=l)return null;const p=(i-1)*o+1,m=Math.min(i*o,l);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px",padding:"16px",borderTop:"1px solid #e0e0e0",background:"#f9fafb"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[t.jsxs("span",{style:{fontSize:"0.875rem",color:"#666"},children:["Showing ",p," to ",m," of ",l," items"]}),t.jsxs("label",{style:{fontSize:"0.875rem",color:"#666",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"},children:[t.jsx("span",{children:"Items per page:"}),t.jsx("select",{value:o,onChange:v=>{c(Number(v.target.value)),r(1)},style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",fontSize:"0.875rem",background:"#fff",cursor:"pointer",minWidth:"70px"},children:g.map(v=>t.jsx("option",{value:v,children:v},v))})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("button",{onClick:()=>r(1),disabled:i===1,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",background:i===1?"#f5f5f5":"#fff",cursor:i===1?"not-allowed":"pointer",fontSize:"0.875rem",color:i===1?"#999":"#333",opacity:i===1?.5:1},children:" First"}),t.jsx("button",{onClick:()=>r(i-1),disabled:i===1,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",background:i===1?"#f5f5f5":"#fff",cursor:i===1?"not-allowed":"pointer",fontSize:"0.875rem",color:i===1?"#999":"#333",opacity:i===1?.5:1},children:" Prev"}),t.jsxs("span",{style:{fontSize:"0.875rem",color:"#666",padding:"0 8px"},children:["Page ",i," of ",a]}),t.jsx("button",{onClick:()=>r(i+1),disabled:i===a,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",background:i===a?"#f5f5f5":"#fff",cursor:i===a?"not-allowed":"pointer",fontSize:"0.875rem",color:i===a?"#999":"#333",opacity:i===a?.5:1},children:"Next "}),t.jsx("button",{onClick:()=>r(a),disabled:i===a,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",background:i===a?"#f5f5f5":"#fff",cursor:i===a?"not-allowed":"pointer",fontSize:"0.875rem",color:i===a?"#999":"#333",opacity:i===a?.5:1},children:"Last "})]})]})}function _1({text:i,children:a,position:r="top",delay:o=200}){const[c,l]=X.useState(!1),[g,p]=X.useState({top:0,left:0}),m=X.useRef(null),v=X.useRef(null),j=X.useRef(null);X.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]);const A=()=>{if(!v.current||!m.current)return;const z=v.current.getBoundingClientRect(),M=m.current.getBoundingClientRect(),E=8;let P=0,q=0;switch(r){case"top":P=z.top-M.height-E,q=z.left+z.width/2-M.width/2;break;case"bottom":P=z.bottom+E,q=z.left+z.width/2-M.width/2;break;case"left":P=z.top+z.height/2-M.height/2,q=z.left-M.width-E;break;case"right":P=z.top+z.height/2-M.height/2,q=z.right+E;break;default:P=z.top-M.height-E,q=z.left+z.width/2-M.width/2}const K=window.innerWidth,H=window.innerHeight;q<8&&(q=8),q+M.width>K-8&&(q=K-M.width-8),P<8&&(P=8),P+M.height>H-8&&(P=H-M.height-8),p({top:P,left:q})},R=()=>{j.current=setTimeout(()=>{l(!0),setTimeout(()=>{A()},10)},o)},b=()=>{j.current&&clearTimeout(j.current),l(!1)};return i?t.jsxs("span",{ref:v,className:"tooltip-trigger",onMouseEnter:R,onMouseLeave:b,style:{display:"inline-block",position:"relative"},children:[a,c&&t.jsxs("div",{ref:m,className:`tooltip tooltip--${r}`,style:{top:`${g.top}px`,left:`${g.left}px`},children:[t.jsx("div",{className:"tooltip-content",children:i}),t.jsx("div",{className:`tooltip-arrow tooltip-arrow--${r}`})]})]}):a}const Td=[{code:"HK",name:"Hong Kong",dialCode:"+852",flag:"",minLength:8,maxLength:8},{code:"CN",name:"China",dialCode:"+86",flag:"",minLength:11,maxLength:11},{code:"US",name:"United States",dialCode:"+1",flag:"",minLength:10,maxLength:10},{code:"GB",name:"United Kingdom",dialCode:"+44",flag:"",minLength:10,maxLength:10},{code:"IN",name:"India",dialCode:"+91",flag:"",minLength:10,maxLength:10},{code:"SG",name:"Singapore",dialCode:"+65",flag:"",minLength:8,maxLength:8},{code:"MY",name:"Malaysia",dialCode:"+60",flag:"",minLength:9,maxLength:10},{code:"TH",name:"Thailand",dialCode:"+66",flag:"",minLength:9,maxLength:9},{code:"PH",name:"Philippines",dialCode:"+63",flag:"",minLength:10,maxLength:10},{code:"ID",name:"Indonesia",dialCode:"+62",flag:"",minLength:9,maxLength:12},{code:"AU",name:"Australia",dialCode:"+61",flag:"",minLength:9,maxLength:9},{code:"NZ",name:"New Zealand",dialCode:"+64",flag:"",minLength:8,maxLength:10},{code:"JP",name:"Japan",dialCode:"+81",flag:"",minLength:10,maxLength:11},{code:"KR",name:"South Korea",dialCode:"+82",flag:"",minLength:9,maxLength:11},{code:"TW",name:"Taiwan",dialCode:"+886",flag:"",minLength:9,maxLength:9},{code:"VN",name:"Vietnam",dialCode:"+84",flag:"",minLength:9,maxLength:10},{code:"CA",name:"Canada",dialCode:"+1",flag:"",minLength:10,maxLength:10},{code:"DE",name:"Germany",dialCode:"+49",flag:"",minLength:10,maxLength:11},{code:"FR",name:"France",dialCode:"+33",flag:"",minLength:9,maxLength:9},{code:"IT",name:"Italy",dialCode:"+39",flag:"",minLength:9,maxLength:10},{code:"ES",name:"Spain",dialCode:"+34",flag:"",minLength:9,maxLength:9},{code:"NL",name:"Netherlands",dialCode:"+31",flag:"",minLength:9,maxLength:9},{code:"BE",name:"Belgium",dialCode:"+32",flag:"",minLength:9,maxLength:9},{code:"CH",name:"Switzerland",dialCode:"+41",flag:"",minLength:9,maxLength:9},{code:"AT",name:"Austria",dialCode:"+43",flag:"",minLength:10,maxLength:13},{code:"SE",name:"Sweden",dialCode:"+46",flag:"",minLength:9,maxLength:9},{code:"NO",name:"Norway",dialCode:"+47",flag:"",minLength:8,maxLength:8},{code:"DK",name:"Denmark",dialCode:"+45",flag:"",minLength:8,maxLength:8},{code:"FI",name:"Finland",dialCode:"+358",flag:"",minLength:9,maxLength:10},{code:"PL",name:"Poland",dialCode:"+48",flag:"",minLength:9,maxLength:9},{code:"BR",name:"Brazil",dialCode:"+55",flag:"",minLength:10,maxLength:11},{code:"MX",name:"Mexico",dialCode:"+52",flag:"",minLength:10,maxLength:10},{code:"AR",name:"Argentina",dialCode:"+54",flag:"",minLength:10,maxLength:10},{code:"ZA",name:"South Africa",dialCode:"+27",flag:"",minLength:9,maxLength:9},{code:"AE",name:"UAE",dialCode:"+971",flag:"",minLength:9,maxLength:9},{code:"SA",name:"Saudi Arabia",dialCode:"+966",flag:"",minLength:9,maxLength:9},{code:"IL",name:"Israel",dialCode:"+972",flag:"",minLength:9,maxLength:9},{code:"TR",name:"Turkey",dialCode:"+90",flag:"",minLength:10,maxLength:10},{code:"RU",name:"Russia",dialCode:"+7",flag:"",minLength:10,maxLength:10},{code:"EG",name:"Egypt",dialCode:"+20",flag:"",minLength:10,maxLength:10},{code:"NG",name:"Nigeria",dialCode:"+234",flag:"",minLength:10,maxLength:10},{code:"KE",name:"Kenya",dialCode:"+254",flag:"",minLength:9,maxLength:9}],cp=i=>{if(!i)return{country:Td[0],number:""};const a=i.replace(/[^\d+]/g,"");for(const r of Td)if(a.startsWith(r.dialCode)){const o=a.substring(r.dialCode.length);return{country:r,number:o}}return{country:Td[0],number:a.replace(/[^\d]/g,"")}},Kd=({value:i="",onChange:a,onBlur:r,required:o=!1,placeholder:c="Enter phone number",className:l="",style:g={},error:p=null,label:m=null,id:v=null,"aria-invalid":j=!1,onError:A=null})=>{const R=cp(i),[b,z]=X.useState(R.country),[M,E]=X.useState(R.number),[P,q]=X.useState(!1),[K,H]=X.useState(""),fe=X.useRef(null),de=X.useRef(null);X.useEffect(()=>{const ee=cp(i);z(ee.country),E(ee.number)},[i]),X.useEffect(()=>{const ee=ie=>{fe.current&&!fe.current.contains(ie.target)&&(q(!1),H(""))};return document.addEventListener("mousedown",ee),()=>document.removeEventListener("mousedown",ee)},[]);const Pe=Td.filter(ee=>ee.name.toLowerCase().includes(K.toLowerCase())||ee.dialCode.includes(K)||ee.code.toLowerCase().includes(K.toLowerCase())),xe=ee=>{z(ee),q(!1),H("");const ie=M?`${ee.dialCode}${M}`:"";a?.({target:{value:ie}}),setTimeout(()=>de.current?.focus(),0)},Z=ee=>{const Ne=ee.target.value.replace(/\D/g,"");E(Ne);const Re=Ne?`${b.dialCode}${Ne}`:"";a?.({target:{value:Re}})},ge=()=>M?M.replace(/\D/g,"").length<b.minLength?`Phone number must be at least ${b.minLength} digits for ${b.name}`:null:o?"Phone number is required":null,B=ge(),$=ee=>{const ie=ge();ie&&A&&A(ie),ie?ee.target.style.borderColor="#ef4444":ee.target.style.borderColor="#ddd",r&&r(ee)};return t.jsxs("div",{style:{width:"100%"},children:[m&&t.jsx("div",{style:{marginBottom:"8px"},children:typeof m=="string"?t.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#333"},children:m}):m}),t.jsxs("div",{style:{display:"flex",position:"relative",width:"100%"},children:[t.jsxs("div",{style:{position:"relative"},ref:fe,children:[t.jsxs("button",{type:"button",onClick:()=>q(!P),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 12px",border:`1px solid ${B||g?.border&&g.border.includes("#ef4444")?"#ef4444":"#ddd"}`,borderRight:"none",borderTopLeftRadius:"8px",borderBottomLeftRadius:"8px",backgroundColor:"#fff",cursor:"pointer",fontSize:"1rem",transition:"border-color 0.2s",minWidth:"120px"},onFocus:ee=>{B||(ee.target.style.borderColor="#5a31ea")},onBlur:ee=>{B||(ee.target.style.borderColor="#ddd")},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:b.flag}),t.jsx("span",{style:{fontSize:"0.875rem",color:"#333"},children:b.dialCode}),t.jsx("i",{className:"fas fa-chevron-down",style:{fontSize:"0.75rem",color:"#666",marginLeft:"auto",transition:"transform 0.2s",transform:P?"rotate(180deg)":"rotate(0deg)"}})]}),P&&t.jsxs("div",{style:{position:"absolute",top:"100%",left:0,zIndex:1e3,backgroundColor:"#fff",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",marginTop:"4px",minWidth:"280px",maxHeight:"300px",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsx("div",{style:{padding:"8px",borderBottom:"1px solid #eee"},children:t.jsx("input",{type:"text",placeholder:"Search country...",value:K,onChange:ee=>H(ee.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"0.875rem"},autoFocus:!0})}),t.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:Pe.length===0?t.jsx("div",{style:{padding:"12px",textAlign:"center",color:"#666",fontSize:"0.875rem"},children:"No countries found"}):Pe.map(ee=>t.jsxs("button",{type:"button",onClick:()=>xe(ee),style:{width:"100%",display:"flex",alignItems:"center",gap:"12px",padding:"12px",border:"none",backgroundColor:b.code===ee.code?"#f3f4f6":"transparent",cursor:"pointer",fontSize:"0.875rem",textAlign:"left",transition:"background-color 0.2s"},onMouseEnter:ie=>{b.code!==ee.code&&(ie.target.style.backgroundColor="#f9fafb")},onMouseLeave:ie=>{b.code!==ee.code&&(ie.target.style.backgroundColor="transparent")},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:ee.flag}),t.jsx("span",{style:{flex:1,color:"#333"},children:ee.name}),t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:ee.dialCode})]},ee.code))})]})]}),t.jsx("input",{ref:de,id:v,type:"tel",inputMode:"numeric",required:o,value:M,onChange:Z,onBlur:$,placeholder:c,className:l,"aria-invalid":j||!!B,style:{flex:1,padding:"12px 16px",border:g?.border||`1px solid ${B?"#ef4444":"#ddd"}`,borderTopRightRadius:"8px",borderBottomRightRadius:"8px",borderLeft:"none",fontSize:"1rem",transition:"border-color 0.2s",...g?.border?{border:g.border}:{}},onFocus:ee=>{B||(ee.target.style.borderColor="#5a31ea")},onInvalid:ee=>ee.preventDefault()})]})]})},Tm=X.createContext();function I1({children:i}){const[a,r]=X.useState([]),[o,c]=X.useState([]),[l,g]=X.useState([]),[p,m]=X.useState([]),[v,j]=X.useState([]),[A,R]=X.useState(!0),[b,z]=X.useState(()=>{const se=localStorage.getItem("recentPayments");return se?JSON.parse(se):ip}),[M,E]=X.useState(()=>{const se=localStorage.getItem("paymentHistory");return se?JSON.parse(se):sp}),[P,q]=X.useState(()=>{const se=localStorage.getItem("communicationLog");return se?JSON.parse(se):op}),[K,H]=X.useState([]),[fe,de]=X.useState(lp),[Pe,xe]=X.useState(()=>{const se=localStorage.getItem("metrics");return se?JSON.parse(se):ap}),[Z,ge]=X.useState(()=>{try{const se=localStorage.getItem("reminderRules");return se?JSON.parse(se):zu}catch{return zu}}),[B,$]=X.useState(!0),[ee,ie]=X.useState(()=>{const se=localStorage.getItem("reminderTemplates");return se?JSON.parse(se):{upcomingDue:"Hi {{member_name}}, friendly reminder your {{period}} subscription of ${{amount}} is due on {{due_date}}. You can pay via FPS, PayMe, or card. Thank you!",overdue:"Hi {{member_name}}, your {{period}} contribution of ${{amount}} is now overdue. Please settle via the member portal or reply once paid."}}),[Ne,Re]=X.useState(()=>{const se=localStorage.getItem("organizationInfo");return se?JSON.parse(se):{name:"Subscription Manager HK",email:"support@subscriptionhk.org",phone:"+852 2800 1122",address:"123 Central Street, Hong Kong"}}),[Me,ue]=X.useState(()=>{try{const se=localStorage.getItem("userLocale");return se||navigator.language||navigator.userLanguage||"en-US"}catch(se){return console.error("Error getting user locale:",se),"en-US"}}),Ce=se=>{try{localStorage.setItem("userLocale",se),ue(se),window.dispatchEvent(new CustomEvent("localeChanged",{detail:{locale:se}}))}catch(je){console.error("Error setting user locale:",je)}},[Le,Q]=X.useState(null),C="http://localhost:4000",G=async()=>{try{const se=await fetch(`${C}/api/members`);if(!se.ok)throw new Error("Failed to fetch members");const je=await se.json();r(je),console.log(" Loaded",je.length,"members from server")}catch(se){throw console.error("Error fetching members:",se),r([]),se}},J=async()=>{try{const se=await fetch(`${C}/api/admins`);if(!se.ok)throw new Error("Failed to fetch admins");const je=await se.json();c(je),console.log(" Loaded",je.length,"Admins from server")}catch(se){throw console.error("Error fetching Admins:",se),c([]),se}},oe=async()=>{try{const se=await fetch(`${C}/api/invoices`);if(!se.ok)throw new Error("Failed to fetch invoices");const je=await se.json();g(je),console.log(" Loaded",je.length,"invoices from MongoDB")}catch(se){throw console.error("Error fetching invoices:",se),g([]),se}},pe=async()=>{try{const se=await fetch(`${C}/api/payments`);if(!se.ok)throw new Error("Failed to fetch payments");const je=await se.json();m(je),E(je),z(je.slice(0,10)),console.log(" Loaded",je.length,"payments from MongoDB")}catch(se){throw console.error("Error fetching payments:",se),m([]),E([]),z([]),se}},be=async()=>{try{const se=await fetch(`${C}/api/donations`);if(!se.ok)throw new Error("Failed to fetch donations");const je=await se.json();j(je),console.log(" Loaded",je.length,"donations from MongoDB")}catch(se){console.error("Error fetching donations:",se),j([])}},Fe=async()=>{try{const se=await fetch(`${C}/api/payment-methods`);if(!se.ok)throw new Error("Failed to fetch payment methods");const je=await se.json();if(je.length===0){console.log(" No payment methods in database, initializing defaults...");const nt=[{name:"Alipay",visible:!1,qrImageUrl:"",details:[]},{name:"PayMe",visible:!1,qrImageUrl:"",details:[]},{name:"FPS",visible:!0,details:["FPS ID 1234567"]},{name:"Direct Bank Transfer",visible:!0,details:["HSBC Hong Kong","123-456789-001","Subscription Manager HK"]},{name:"Credit/Debit Cards",visible:!0,details:["Gateway: Stripe"]}];for(const pt of nt)try{await fetch(`${C}/api/payment-methods`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pt)})}catch(He){console.error(`Error initializing payment method ${pt.name}:`,He)}de(nt),console.log(" Initialized default payment methods in database")}else de(je),console.log(" Loaded",je.length,"payment methods from MongoDB")}catch(se){throw console.error("Error fetching payment methods:",se),de([]),se}},De=async()=>{try{const se=await fetch(`${C}/api/reminders/logs`);if(!se.ok)throw new Error("Failed to fetch reminder logs");const je=await se.json();H(je),console.log(" Loaded",je.length,"reminder logs from MongoDB")}catch(se){console.error("Error fetching reminder logs:",se),H([])}};X.useEffect(()=>{(async()=>{try{const je=Promise.allSettled([G(),J(),oe()]),nt=Promise.allSettled([pe(),be(),Fe(),De()]);await Promise.allSettled([je,nt])}catch(je){console.error("Error fetching initial data:",je)}})()},[]),X.useEffect(()=>{localStorage.setItem("recentPayments",JSON.stringify(b))},[b]),X.useEffect(()=>{localStorage.setItem("paymentHistory",JSON.stringify(M))},[M]),X.useEffect(()=>{localStorage.setItem("communicationLog",JSON.stringify(P))},[P]),X.useEffect(()=>{localStorage.setItem("metrics",JSON.stringify(Pe))},[Pe]),X.useEffect(()=>{localStorage.setItem("reminderRules",JSON.stringify(Z))},[Z]),X.useEffect(()=>{localStorage.setItem("reminderTemplates",JSON.stringify(ee))},[ee]),X.useEffect(()=>{localStorage.setItem("organizationInfo",JSON.stringify(Ne))},[Ne]),X.useEffect(()=>{},[]);const Ue=async se=>{try{const je=await fetch(`${C}/api/members`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(!je.ok)throw new Error("Failed to add member");const nt=await je.json();return r([...a,nt]),Qe({totalMembers:Pe.totalMembers+1}),console.log(" Member added to server:",nt),nt}catch(je){throw console.error("Error adding member:",je),je}},_e=async(se,je)=>{try{const nt=await fetch(`${C}/api/members/${se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)});if(!nt.ok)throw new Error("Failed to update member");const pt=await nt.json();r(a.map(He=>He.id===se?pt:He)),console.log(" Member updated on server:",pt)}catch(nt){throw console.error("Error updating member:",nt),nt}},at=async se=>{try{if(!(await fetch(`${C}/api/members/${se}`,{method:"DELETE"})).ok)throw new Error("Failed to delete member");r(a.filter(nt=>nt.id!==se)),g(l.filter(nt=>nt.memberId!==se)),Qe({totalMembers:Pe.totalMembers-1}),console.log(" Member deleted from server:",se)}catch(je){throw console.error("Error deleting member:",je),je}},ot=async se=>{try{const je=await fetch(`${C}/api/invoices`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(!je.ok)throw new Error("Failed to add invoice");const nt=await je.json();return g([nt,...l]),console.log(" Invoice added to server:",nt),nt}catch(je){throw console.error("Error adding invoice:",je),je}},it=async(se,je)=>{try{const nt=await fetch(`${C}/api/invoices/${se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)});if(!nt.ok)throw new Error("Failed to update invoice");const pt=await nt.json();if(g(l.map(He=>He.id===se?pt:He)),je.status==="Paid"){const He=l.find(ct=>ct.id===se);if(He&&He.status!=="Paid"){const ct=parseFloat(He.amount.replace("$",""));Qe({collectedMonth:Pe.collectedMonth+ct,collectedYear:Pe.collectedYear+ct,outstanding:Pe.outstanding-ct})}}console.log(" Invoice updated on server:",pt)}catch(nt){throw console.error("Error updating invoice:",nt),nt}},Y=async se=>{try{if(!(await fetch(`${C}/api/invoices/${se}`,{method:"DELETE"})).ok)throw new Error("Failed to delete invoice");g(l.filter(nt=>nt.id!==se)),console.log(" Invoice deleted from server:",se)}catch(je){throw console.error("Error deleting invoice:",je),je}},mt=async se=>{try{const je={...se,date:se.date||new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})},nt=await fetch(`${C}/api/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)});if(!nt.ok){const ct=await nt.json().catch(()=>({}));throw new Error(ct.error||"Failed to save payment")}const pt=await nt.json();m([pt,...p]),z([pt,...b]),E([pt,...M]),se.invoiceId&&await it(se.invoiceId,{status:"Paid",method:se.method,reference:se.reference,screenshot:se.screenshot||se.screenshotUrl,paidToAdmin:se.paidToAdmin,paidToAdminName:se.paidToAdminName});const He=parseFloat(se.amount.replace("$",""));return Qe({collectedMonth:Pe.collectedMonth+He,collectedYear:Pe.collectedYear+He,outstanding:Math.max(0,Pe.outstanding-He)}),console.log(" Payment saved to MongoDB:",pt),pt}catch(je){console.error("Error adding payment:",je);const nt={...se,date:se.date||new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})};throw z([nt,...b]),E([nt,...M]),je}},Mt=se=>{const je={...se,date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Delivered"};return q([je,...P]),je},Ct=async(se,je)=>{try{const nt=await fetch(`${C}/api/payment-methods/${se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)});if(!nt.ok)throw new Error("Failed to update payment method");const pt=await nt.json();return de(fe.map(He=>He.name===se?pt:He)),console.log(" Payment method updated in database:",pt),pt}catch(nt){throw console.error("Error updating payment method:",nt),de(fe.map(pt=>pt.name===se?{...pt,...je}:pt)),nt}},Qe=se=>{xe({...Pe,...se})},qe={members:a,invoices:l,payments:p,donations:v,loading:A,fetchMembers:G,fetchAdmins:J,fetchInvoices:oe,fetchPayments:pe,fetchDonations:be,fetchPaymentMethods:Fe,fetchReminderLogs:De,recentPayments:b,paymentHistory:M,communicationLog:P,reminderLogs:K,paymentMethods:fe,metrics:Pe,reminderRules:Z,automationEnabled:B,setAutomationEnabled:$,reminderTemplates:ee,organizationInfo:Ne,admins:o,selectedMember:Le,setSelectedMember:Q,addMember:Ue,updateMember:_e,deleteMember:at,addInvoice:ot,updateInvoice:it,deleteInvoice:Y,addPayment:mt,addDonation:async se=>{try{const je=await fetch(`${C}/api/donations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(!je.ok){const pt=await je.json().catch(()=>({}));throw new Error(pt.error||"Failed to add donation")}const nt=await je.json();return j([nt,...v]),console.log(" Donation added to server:",nt),nt}catch(je){throw console.error("Error adding donation:",je),je}},deleteDonation:async se=>{try{const je=await fetch(`${C}/api/donations/${se}`,{method:"DELETE"});if(!je.ok){const nt=await je.json().catch(()=>({}));throw new Error(nt.error||"Failed to delete donation")}j(v.filter(nt=>nt._id!==se)),console.log(" Donation deleted from server:",se)}catch(je){throw console.error("Error deleting donation:",je),je}},addCommunication:Mt,updatePaymentMethod:Ct,updateMetrics:Qe,updateReminderRule:(se,je)=>{ge(Z.map(nt=>nt.label===se?{...nt,channels:je}:nt))},updateReminderTemplate:(se,je)=>{ie({...ee,[se]:je})},updateOrganizationInfo:se=>{Re({...Ne,...se})},userLocale:Me,updateUserLocale:Ce,addAdminUser:async se=>{try{const je=await fetch(`${C}/api/admins`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:se.name,email:se.email||"",role:se.role||"Viewer",status:se.status||"Active",password:se.password||""})});if(!je.ok){const pt=await je.json().catch(()=>({}));throw new Error(pt.message||"Failed to create admin")}const nt=await je.json();return c([...o,nt]),await J(),nt}catch(je){throw console.error("Error adding admin:",je),je}},updateAdminUser:async(se,je)=>{try{const nt=await fetch(`${C}/api/admins/${se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)});if(!nt.ok){const He=await nt.json().catch(()=>({}));throw new Error(He.message||"Failed to update admin")}const pt=await nt.json();return c(o.map(He=>He.id===se?pt:He)),await J(),pt}catch(nt){throw console.error("Error updating admin:",nt),nt}},deleteAdminUser:async se=>{try{const je=await fetch(`${C}/api/admins/${se}`,{method:"DELETE"});if(!je.ok){const nt=await je.json().catch(()=>({}));throw new Error(nt.message||"Failed to delete admin")}c(o.filter(nt=>nt.id!==se)),await J()}catch(je){throw console.error("Error deleting admin:",je),je}},resetAllData:()=>{localStorage.clear(),r(S1),c(N1),g(k1),z(ip),E(sp),q(op),de(lp),xe(ap),ge(zu),$(!0),localStorage.setItem("dataVersion","v2.0")}};return t.jsx(Tm.Provider,{value:qe,children:i})}function Qd(){const i=X.useContext(Tm);if(!i)throw new Error("useApp must be used within AppProvider");return i}function Om(i=15){const a=po(),r=X.useRef(null),o=X.useRef(Date.now()),c=()=>{o.current=Date.now(),r.current&&clearTimeout(r.current);const l=i*60*1e3;r.current=setTimeout(()=>{sessionStorage.clear(),sessionStorage.setItem("logoutReason","inactivity"),a("/login",{replace:!0})},l)};X.useEffect(()=>{const l=["mousedown","mousemove","keypress","scroll","touchstart","click","keydown"],g=()=>{c()};return c(),l.forEach(p=>{document.addEventListener(p,g,!0)}),()=>{l.forEach(p=>{document.removeEventListener(p,g,!0)}),r.current&&clearTimeout(r.current)}},[a,i])}const E1="modulepreload",M1=function(i){return"/"+i},dp={},Uu=function(a,r,o){let c=Promise.resolve();if(r&&r.length>0){let m=function(v){return Promise.all(v.map(j=>Promise.resolve(j).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),p=g?.nonce||g?.getAttribute("nonce");c=m(r.map(v=>{if(v=M1(v),v in dp)return;dp[v]=!0;const j=v.endsWith(".css"),A=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${A}`))return;const R=document.createElement("link");if(R.rel=j?"stylesheet":E1,j||(R.as="script"),R.crossOrigin="",R.href=v,p&&R.setAttribute("nonce",p),document.head.appendChild(R),j)return new Promise((b,z)=>{R.addEventListener("load",b),R.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(g){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=g,window.dispatchEvent(p),!p.defaultPrevented)throw g}return c.then(g=>{for(const p of g||[])p.status==="rejected"&&l(p.reason);return a().catch(l)})};function er(i){"@babel/helpers - typeof";return er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},er(i)}var ho=Uint8Array,bs=Uint16Array,Ef=Int32Array,Mf=new ho([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Rf=new ho([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),up=new ho([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bm=function(i,a){for(var r=new bs(31),o=0;o<31;++o)r[o]=a+=1<<i[o-1];for(var c=new Ef(r[30]),o=1;o<30;++o)for(var l=r[o];l<r[o+1];++l)c[l]=l-r[o]<<5|o;return{b:r,r:c}},zm=Bm(Mf,2),R1=zm.b,pf=zm.r;R1[28]=258,pf[258]=28;var F1=Bm(Rf,0),fp=F1.r,mf=new bs(32768);for(var vr=0;vr<32768;++vr){var hl=(vr&43690)>>1|(vr&21845)<<1;hl=(hl&52428)>>2|(hl&13107)<<2,hl=(hl&61680)>>4|(hl&3855)<<4,mf[vr]=((hl&65280)>>8|(hl&255)<<8)>>1}var qc=(function(i,a,r){for(var o=i.length,c=0,l=new bs(a);c<o;++c)i[c]&&++l[i[c]-1];var g=new bs(a);for(c=1;c<a;++c)g[c]=g[c-1]+l[c-1]<<1;var p;if(r){p=new bs(1<<a);var m=15-a;for(c=0;c<o;++c)if(i[c])for(var v=c<<4|i[c],j=a-i[c],A=g[i[c]-1]++<<j,R=A|(1<<j)-1;A<=R;++A)p[mf[A]>>m]=v}else for(p=new bs(o),c=0;c<o;++c)i[c]&&(p[c]=mf[g[i[c]-1]++]>>15-i[c]);return p}),$l=new ho(288);for(var vr=0;vr<144;++vr)$l[vr]=8;for(var vr=144;vr<256;++vr)$l[vr]=9;for(var vr=256;vr<280;++vr)$l[vr]=7;for(var vr=280;vr<288;++vr)$l[vr]=8;var Hd=new ho(32);for(var vr=0;vr<32;++vr)Hd[vr]=5;var D1=qc($l,9,0),T1=qc(Hd,5,0),Um=function(i){return(i+7)/8|0},O1=function(i,a,r){return(r==null||r>i.length)&&(r=i.length),new ho(i.subarray(a,r))},Vo=function(i,a,r){r<<=a&7;var o=a/8|0;i[o]|=r,i[o+1]|=r>>8},Uc=function(i,a,r){r<<=a&7;var o=a/8|0;i[o]|=r,i[o+1]|=r>>8,i[o+2]|=r>>16},Wu=function(i,a){for(var r=[],o=0;o<i.length;++o)i[o]&&r.push({s:o,f:i[o]});var c=r.length,l=r.slice();if(!c)return{t:qm,l:0};if(c==1){var g=new ho(r[0].s+1);return g[r[0].s]=1,{t:g,l:1}}r.sort(function(fe,de){return fe.f-de.f}),r.push({s:-1,f:25001});var p=r[0],m=r[1],v=0,j=1,A=2;for(r[0]={s:-1,f:p.f+m.f,l:p,r:m};j!=c-1;)p=r[r[v].f<r[A].f?v++:A++],m=r[v!=j&&r[v].f<r[A].f?v++:A++],r[j++]={s:-1,f:p.f+m.f,l:p,r:m};for(var R=l[0].s,o=1;o<c;++o)l[o].s>R&&(R=l[o].s);var b=new bs(R+1),z=gf(r[j-1],b,0);if(z>a){var o=0,M=0,E=z-a,P=1<<E;for(l.sort(function(de,Pe){return b[Pe.s]-b[de.s]||de.f-Pe.f});o<c;++o){var q=l[o].s;if(b[q]>a)M+=P-(1<<z-b[q]),b[q]=a;else break}for(M>>=E;M>0;){var K=l[o].s;b[K]<a?M-=1<<a-b[K]++-1:++o}for(;o>=0&&M;--o){var H=l[o].s;b[H]==a&&(--b[H],++M)}z=a}return{t:new ho(b),l:z}},gf=function(i,a,r){return i.s==-1?Math.max(gf(i.l,a,r+1),gf(i.r,a,r+1)):a[i.s]=r},hp=function(i){for(var a=i.length;a&&!i[--a];);for(var r=new bs(++a),o=0,c=i[0],l=1,g=function(m){r[o++]=m},p=1;p<=a;++p)if(i[p]==c&&p!=a)++l;else{if(!c&&l>2){for(;l>138;l-=138)g(32754);l>2&&(g(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(g(c),--l;l>6;l-=6)g(8304);l>2&&(g(l-3<<5|8208),l=0)}for(;l--;)g(c);l=1,c=i[p]}return{c:r.subarray(0,o),n:a}},Wc=function(i,a){for(var r=0,o=0;o<a.length;++o)r+=i[o]*a[o];return r},Wm=function(i,a,r){var o=r.length,c=Um(a+2);i[c]=o&255,i[c+1]=o>>8,i[c+2]=i[c]^255,i[c+3]=i[c+1]^255;for(var l=0;l<o;++l)i[c+l+4]=r[l];return(c+4+o)*8},pp=function(i,a,r,o,c,l,g,p,m,v,j){Vo(a,j++,r),++c[256];for(var A=Wu(c,15),R=A.t,b=A.l,z=Wu(l,15),M=z.t,E=z.l,P=hp(R),q=P.c,K=P.n,H=hp(M),fe=H.c,de=H.n,Pe=new bs(19),xe=0;xe<q.length;++xe)++Pe[q[xe]&31];for(var xe=0;xe<fe.length;++xe)++Pe[fe[xe]&31];for(var Z=Wu(Pe,7),ge=Z.t,B=Z.l,$=19;$>4&&!ge[up[$-1]];--$);var ee=v+5<<3,ie=Wc(c,$l)+Wc(l,Hd)+g,Ne=Wc(c,R)+Wc(l,M)+g+14+3*$+Wc(Pe,ge)+2*Pe[16]+3*Pe[17]+7*Pe[18];if(m>=0&&ee<=ie&&ee<=Ne)return Wm(a,j,i.subarray(m,m+v));var Re,Me,ue,Ce;if(Vo(a,j,1+(Ne<ie)),j+=2,Ne<ie){Re=qc(R,b,0),Me=R,ue=qc(M,E,0),Ce=M;var Le=qc(ge,B,0);Vo(a,j,K-257),Vo(a,j+5,de-1),Vo(a,j+10,$-4),j+=14;for(var xe=0;xe<$;++xe)Vo(a,j+3*xe,ge[up[xe]]);j+=3*$;for(var Q=[q,fe],C=0;C<2;++C)for(var G=Q[C],xe=0;xe<G.length;++xe){var J=G[xe]&31;Vo(a,j,Le[J]),j+=ge[J],J>15&&(Vo(a,j,G[xe]>>5&127),j+=G[xe]>>12)}}else Re=D1,Me=$l,ue=T1,Ce=Hd;for(var xe=0;xe<p;++xe){var oe=o[xe];if(oe>255){var J=oe>>18&31;Uc(a,j,Re[J+257]),j+=Me[J+257],J>7&&(Vo(a,j,oe>>23&31),j+=Mf[J]);var pe=oe&31;Uc(a,j,ue[pe]),j+=Ce[pe],pe>3&&(Uc(a,j,oe>>5&8191),j+=Rf[pe])}else Uc(a,j,Re[oe]),j+=Me[oe]}return Uc(a,j,Re[256]),j+Me[256]},B1=new Ef([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),qm=new ho(0),z1=function(i,a,r,o,c,l){var g=l.z||i.length,p=new ho(o+g+5*(1+Math.ceil(g/7e3))+c),m=p.subarray(o,p.length-c),v=l.l,j=(l.r||0)&7;if(a){j&&(m[0]=l.r>>3);for(var A=B1[a-1],R=A>>13,b=A&8191,z=(1<<r)-1,M=l.p||new bs(32768),E=l.h||new bs(z+1),P=Math.ceil(r/3),q=2*P,K=function(it){return(i[it]^i[it+1]<<P^i[it+2]<<q)&z},H=new Ef(25e3),fe=new bs(288),de=new bs(32),Pe=0,xe=0,Z=l.i||0,ge=0,B=l.w||0,$=0;Z+2<g;++Z){var ee=K(Z),ie=Z&32767,Ne=E[ee];if(M[ie]=Ne,E[ee]=ie,B<=Z){var Re=g-Z;if((Pe>7e3||ge>24576)&&(Re>423||!v)){j=pp(i,m,0,H,fe,de,xe,ge,$,Z-$,j),ge=Pe=xe=0,$=Z;for(var Me=0;Me<286;++Me)fe[Me]=0;for(var Me=0;Me<30;++Me)de[Me]=0}var ue=2,Ce=0,Le=b,Q=ie-Ne&32767;if(Re>2&&ee==K(Z-Q))for(var C=Math.min(R,Re)-1,G=Math.min(32767,Z),J=Math.min(258,Re);Q<=G&&--Le&&ie!=Ne;){if(i[Z+ue]==i[Z+ue-Q]){for(var oe=0;oe<J&&i[Z+oe]==i[Z+oe-Q];++oe);if(oe>ue){if(ue=oe,Ce=Q,oe>C)break;for(var pe=Math.min(Q,oe-2),be=0,Me=0;Me<pe;++Me){var Fe=Z-Q+Me&32767,De=M[Fe],Ue=Fe-De&32767;Ue>be&&(be=Ue,Ne=Fe)}}}ie=Ne,Ne=M[ie],Q+=ie-Ne&32767}if(Ce){H[ge++]=268435456|pf[ue]<<18|fp[Ce];var _e=pf[ue]&31,at=fp[Ce]&31;xe+=Mf[_e]+Rf[at],++fe[257+_e],++de[at],B=Z+ue,++Pe}else H[ge++]=i[Z],++fe[i[Z]]}}for(Z=Math.max(Z,B);Z<g;++Z)H[ge++]=i[Z],++fe[i[Z]];j=pp(i,m,v,H,fe,de,xe,ge,$,Z-$,j),v||(l.r=j&7|m[j/8|0]<<3,j-=7,l.h=E,l.p=M,l.i=Z,l.w=B)}else{for(var Z=l.w||0;Z<g+v;Z+=65535){var ot=Z+65535;ot>=g&&(m[j/8|0]=v,ot=g),j=Wm(m,j+1,i.subarray(Z,ot))}l.i=g}return O1(p,0,o+Um(j)+c)},$m=function(){var i=1,a=0;return{p:function(r){for(var o=i,c=a,l=r.length|0,g=0;g!=l;){for(var p=Math.min(g+2655,l);g<p;++g)c+=o+=r[g];o=(o&65535)+15*(o>>16),c=(c&65535)+15*(c>>16)}i=o,a=c},d:function(){return i%=65521,a%=65521,(i&255)<<24|(i&65280)<<8|(a&255)<<8|a>>8}}},U1=function(i,a,r,o,c){if(!c&&(c={l:1},a.dictionary)){var l=a.dictionary.subarray(-32768),g=new ho(l.length+i.length);g.set(l),g.set(i,l.length),i=g,c.w=l.length}return z1(i,a.level==null?6:a.level,a.mem==null?c.l?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):20:12+a.mem,r,o,c)},Hm=function(i,a,r){for(;r;++a)i[a]=r,r>>>=8},W1=function(i,a){var r=a.level,o=r==0?0:r<6?1:r==9?3:2;if(i[0]=120,i[1]=o<<6|(a.dictionary&&32),i[1]|=31-(i[0]<<8|i[1])%31,a.dictionary){var c=$m();c.p(a.dictionary),Hm(i,2,c.d())}};function xf(i,a){a||(a={});var r=$m();r.p(i);var o=U1(i,a,a.dictionary?6:2,4);return W1(o,a),Hm(o,o.length-4,r.d()),o}var q1=typeof TextDecoder<"u"&&new TextDecoder,$1=0;try{q1.decode(qm,{stream:!0}),$1=1}catch{}function H1(i){if(Array.isArray(i))return i}function V1(i,a){var r=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(r!=null){var o,c,l,g,p=[],m=!0,v=!1;try{if(l=(r=r.call(i)).next,a!==0)for(;!(m=(o=l.call(r)).done)&&(p.push(o.value),p.length!==a);m=!0);}catch(j){v=!0,c=j}finally{try{if(!m&&r.return!=null&&(g=r.return(),Object(g)!==g))return}finally{if(v)throw c}}return p}}function mp(i,a){(a==null||a>i.length)&&(a=i.length);for(var r=0,o=Array(a);r<a;r++)o[r]=i[r];return o}function Y1(i,a){if(i){if(typeof i=="string")return mp(i,a);var r={}.toString.call(i).slice(8,-1);return r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set"?Array.from(i):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mp(i,a):void 0}}function G1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gp(i,a){return H1(i)||V1(i,a)||Y1(i,a)||G1()}function xp(i,a="utf8"){return new TextDecoder(a).decode(i)}const J1=new TextEncoder;function K1(i){return J1.encode(i)}const Q1=1024*8,X1=(()=>{const i=new Uint8Array(4),a=new Uint32Array(i.buffer);return!((a[0]=1)&i[0])})(),qu={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Ff{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(a=Q1,r={}){let o=!1;typeof a=="number"?a=new ArrayBuffer(a):(o=!0,this.lastWrittenByte=a.byteLength);const c=r.offset?r.offset>>>0:0,l=a.byteLength-c;let g=c;(ArrayBuffer.isView(a)||a instanceof Ff)&&(a.byteLength!==a.buffer.byteLength&&(g=a.byteOffset+c),a=a.buffer),o?this.lastWrittenByte=l:this.lastWrittenByte=0,this.buffer=a,this.length=l,this.byteLength=l,this.byteOffset=g,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,g,l),this._mark=0,this._marks=[]}available(a=1){return this.offset+a<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(a=1){return this.offset+=a,this}back(a=1){return this.offset-=a,this}seek(a){return this.offset=a,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const a=this._marks.pop();if(a===void 0)throw new Error("Mark stack empty");return this.seek(a),this}rewind(){return this.offset=0,this}ensureAvailable(a=1){if(!this.available(a)){const o=(this.offset+a)*2,c=new Uint8Array(o);c.set(new Uint8Array(this.buffer)),this.buffer=c.buffer,this.length=o,this.byteLength=o,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(a=1){return this.readArray(a,"uint8")}readArray(a,r){const o=qu[r].BYTES_PER_ELEMENT*a,c=this.byteOffset+this.offset,l=this.buffer.slice(c,c+o);if(this.littleEndian===X1&&r!=="uint8"&&r!=="int8"){const p=new Uint8Array(this.buffer.slice(c,c+o));p.reverse();const m=new qu[r](p.buffer);return this.offset+=o,m.reverse(),m}const g=new qu[r](l);return this.offset+=o,g}readInt16(){const a=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,a}readUint16(){const a=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,a}readInt32(){const a=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,a}readUint32(){const a=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat32(){const a=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat64(){const a=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,a}readBigInt64(){const a=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,a}readBigUint64(){const a=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,a}readChar(){return String.fromCharCode(this.readInt8())}readChars(a=1){let r="";for(let o=0;o<a;o++)r+=this.readChar();return r}readUtf8(a=1){return xp(this.readBytes(a))}decodeText(a=1,r="utf8"){return xp(this.readBytes(a),r)}writeBoolean(a){return this.writeUint8(a?255:0),this}writeInt8(a){return this.ensureAvailable(1),this._data.setInt8(this.offset++,a),this._updateLastWrittenByte(),this}writeUint8(a){return this.ensureAvailable(1),this._data.setUint8(this.offset++,a),this._updateLastWrittenByte(),this}writeByte(a){return this.writeUint8(a)}writeBytes(a){this.ensureAvailable(a.length);for(let r=0;r<a.length;r++)this._data.setUint8(this.offset++,a[r]);return this._updateLastWrittenByte(),this}writeInt16(a){return this.ensureAvailable(2),this._data.setInt16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(a){return this.ensureAvailable(2),this._data.setUint16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(a){return this.ensureAvailable(4),this._data.setInt32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(a){return this.ensureAvailable(4),this._data.setUint32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(a){return this.ensureAvailable(4),this._data.setFloat32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(a){return this.ensureAvailable(8),this._data.setFloat64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(a){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(a){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(a){return this.writeUint8(a.charCodeAt(0))}writeChars(a){for(let r=0;r<a.length;r++)this.writeUint8(a.charCodeAt(r));return this}writeUtf8(a){return this.writeBytes(K1(a))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Ac(i){let a=i.length;for(;--a>=0;)i[a]=0}const Z1=3,e2=258,Vm=29,t2=256,n2=t2+1+Vm,Ym=30,r2=512,a2=new Array((n2+2)*2);Ac(a2);const i2=new Array(Ym*2);Ac(i2);const s2=new Array(r2);Ac(s2);const o2=new Array(e2-Z1+1);Ac(o2);const l2=new Array(Vm);Ac(l2);const c2=new Array(Ym);Ac(c2);const d2=(i,a,r,o)=>{let c=i&65535|0,l=i>>>16&65535|0,g=0;for(;r!==0;){g=r>2e3?2e3:r,r-=g;do c=c+a[o++]|0,l=l+c|0;while(--g);c%=65521,l%=65521}return c|l<<16|0};var yf=d2;const u2=()=>{let i,a=[];for(var r=0;r<256;r++){i=r;for(var o=0;o<8;o++)i=i&1?3988292384^i>>>1:i>>>1;a[r]=i}return a},f2=new Uint32Array(u2()),h2=(i,a,r,o)=>{const c=f2,l=o+r;i^=-1;for(let g=o;g<l;g++)i=i>>>8^c[(i^a[g])&255];return i^-1};var ko=h2,vf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Gm={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const p2=(i,a)=>Object.prototype.hasOwnProperty.call(i,a);var m2=function(i){const a=Array.prototype.slice.call(arguments,1);for(;a.length;){const r=a.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const o in r)p2(r,o)&&(i[o]=r[o])}}return i},g2=i=>{let a=0;for(let o=0,c=i.length;o<c;o++)a+=i[o].length;const r=new Uint8Array(a);for(let o=0,c=0,l=i.length;o<l;o++){let g=i[o];r.set(g,c),c+=g.length}return r},Jm={assign:m2,flattenChunks:g2};let Km=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Km=!1}const Gc=new Uint8Array(256);for(let i=0;i<256;i++)Gc[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;Gc[254]=Gc[254]=1;var x2=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let a,r,o,c,l,g=i.length,p=0;for(c=0;c<g;c++)r=i.charCodeAt(c),(r&64512)===55296&&c+1<g&&(o=i.charCodeAt(c+1),(o&64512)===56320&&(r=65536+(r-55296<<10)+(o-56320),c++)),p+=r<128?1:r<2048?2:r<65536?3:4;for(a=new Uint8Array(p),l=0,c=0;l<p;c++)r=i.charCodeAt(c),(r&64512)===55296&&c+1<g&&(o=i.charCodeAt(c+1),(o&64512)===56320&&(r=65536+(r-55296<<10)+(o-56320),c++)),r<128?a[l++]=r:r<2048?(a[l++]=192|r>>>6,a[l++]=128|r&63):r<65536?(a[l++]=224|r>>>12,a[l++]=128|r>>>6&63,a[l++]=128|r&63):(a[l++]=240|r>>>18,a[l++]=128|r>>>12&63,a[l++]=128|r>>>6&63,a[l++]=128|r&63);return a};const y2=(i,a)=>{if(a<65534&&i.subarray&&Km)return String.fromCharCode.apply(null,i.length===a?i:i.subarray(0,a));let r="";for(let o=0;o<a;o++)r+=String.fromCharCode(i[o]);return r};var v2=(i,a)=>{const r=a||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,a));let o,c;const l=new Array(r*2);for(c=0,o=0;o<r;){let g=i[o++];if(g<128){l[c++]=g;continue}let p=Gc[g];if(p>4){l[c++]=65533,o+=p-1;continue}for(g&=p===2?31:p===3?15:7;p>1&&o<r;)g=g<<6|i[o++]&63,p--;if(p>1){l[c++]=65533;continue}g<65536?l[c++]=g:(g-=65536,l[c++]=55296|g>>10&1023,l[c++]=56320|g&1023)}return y2(l,c)},b2=(i,a)=>{a=a||i.length,a>i.length&&(a=i.length);let r=a-1;for(;r>=0&&(i[r]&192)===128;)r--;return r<0||r===0?a:r+Gc[i[r]]>a?r:a},bf={string2buf:x2,buf2string:v2,utf8border:b2};function w2(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var j2=w2;const Pd=16209,S2=16191;var N2=function(a,r){let o,c,l,g,p,m,v,j,A,R,b,z,M,E,P,q,K,H,fe,de,Pe,xe,Z,ge;const B=a.state;o=a.next_in,Z=a.input,c=o+(a.avail_in-5),l=a.next_out,ge=a.output,g=l-(r-a.avail_out),p=l+(a.avail_out-257),m=B.dmax,v=B.wsize,j=B.whave,A=B.wnext,R=B.window,b=B.hold,z=B.bits,M=B.lencode,E=B.distcode,P=(1<<B.lenbits)-1,q=(1<<B.distbits)-1;e:do{z<15&&(b+=Z[o++]<<z,z+=8,b+=Z[o++]<<z,z+=8),K=M[b&P];t:for(;;){if(H=K>>>24,b>>>=H,z-=H,H=K>>>16&255,H===0)ge[l++]=K&65535;else if(H&16){fe=K&65535,H&=15,H&&(z<H&&(b+=Z[o++]<<z,z+=8),fe+=b&(1<<H)-1,b>>>=H,z-=H),z<15&&(b+=Z[o++]<<z,z+=8,b+=Z[o++]<<z,z+=8),K=E[b&q];n:for(;;){if(H=K>>>24,b>>>=H,z-=H,H=K>>>16&255,H&16){if(de=K&65535,H&=15,z<H&&(b+=Z[o++]<<z,z+=8,z<H&&(b+=Z[o++]<<z,z+=8)),de+=b&(1<<H)-1,de>m){a.msg="invalid distance too far back",B.mode=Pd;break e}if(b>>>=H,z-=H,H=l-g,de>H){if(H=de-H,H>j&&B.sane){a.msg="invalid distance too far back",B.mode=Pd;break e}if(Pe=0,xe=R,A===0){if(Pe+=v-H,H<fe){fe-=H;do ge[l++]=R[Pe++];while(--H);Pe=l-de,xe=ge}}else if(A<H){if(Pe+=v+A-H,H-=A,H<fe){fe-=H;do ge[l++]=R[Pe++];while(--H);if(Pe=0,A<fe){H=A,fe-=H;do ge[l++]=R[Pe++];while(--H);Pe=l-de,xe=ge}}}else if(Pe+=A-H,H<fe){fe-=H;do ge[l++]=R[Pe++];while(--H);Pe=l-de,xe=ge}for(;fe>2;)ge[l++]=xe[Pe++],ge[l++]=xe[Pe++],ge[l++]=xe[Pe++],fe-=3;fe&&(ge[l++]=xe[Pe++],fe>1&&(ge[l++]=xe[Pe++]))}else{Pe=l-de;do ge[l++]=ge[Pe++],ge[l++]=ge[Pe++],ge[l++]=ge[Pe++],fe-=3;while(fe>2);fe&&(ge[l++]=ge[Pe++],fe>1&&(ge[l++]=ge[Pe++]))}}else if((H&64)===0){K=E[(K&65535)+(b&(1<<H)-1)];continue n}else{a.msg="invalid distance code",B.mode=Pd;break e}break}}else if((H&64)===0){K=M[(K&65535)+(b&(1<<H)-1)];continue t}else if(H&32){B.mode=S2;break e}else{a.msg="invalid literal/length code",B.mode=Pd;break e}break}}while(o<c&&l<p);fe=z>>3,o-=fe,z-=fe<<3,b&=(1<<z)-1,a.next_in=o,a.next_out=l,a.avail_in=o<c?5+(c-o):5-(o-c),a.avail_out=l<p?257+(p-l):257-(l-p),B.hold=b,B.bits=z};const hc=15,yp=852,vp=592,bp=0,$u=1,wp=2,k2=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),A2=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),C2=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),P2=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),L2=(i,a,r,o,c,l,g,p)=>{const m=p.bits;let v=0,j=0,A=0,R=0,b=0,z=0,M=0,E=0,P=0,q=0,K,H,fe,de,Pe,xe=null,Z;const ge=new Uint16Array(hc+1),B=new Uint16Array(hc+1);let $=null,ee,ie,Ne;for(v=0;v<=hc;v++)ge[v]=0;for(j=0;j<o;j++)ge[a[r+j]]++;for(b=m,R=hc;R>=1&&ge[R]===0;R--);if(b>R&&(b=R),R===0)return c[l++]=1<<24|64<<16|0,c[l++]=1<<24|64<<16|0,p.bits=1,0;for(A=1;A<R&&ge[A]===0;A++);for(b<A&&(b=A),E=1,v=1;v<=hc;v++)if(E<<=1,E-=ge[v],E<0)return-1;if(E>0&&(i===bp||R!==1))return-1;for(B[1]=0,v=1;v<hc;v++)B[v+1]=B[v]+ge[v];for(j=0;j<o;j++)a[r+j]!==0&&(g[B[a[r+j]]++]=j);if(i===bp?(xe=$=g,Z=20):i===$u?(xe=k2,$=A2,Z=257):(xe=C2,$=P2,Z=0),q=0,j=0,v=A,Pe=l,z=b,M=0,fe=-1,P=1<<b,de=P-1,i===$u&&P>yp||i===wp&&P>vp)return 1;for(;;){ee=v-M,g[j]+1<Z?(ie=0,Ne=g[j]):g[j]>=Z?(ie=$[g[j]-Z],Ne=xe[g[j]-Z]):(ie=96,Ne=0),K=1<<v-M,H=1<<z,A=H;do H-=K,c[Pe+(q>>M)+H]=ee<<24|ie<<16|Ne|0;while(H!==0);for(K=1<<v-1;q&K;)K>>=1;if(K!==0?(q&=K-1,q+=K):q=0,j++,--ge[v]===0){if(v===R)break;v=a[r+g[j]]}if(v>b&&(q&de)!==fe){for(M===0&&(M=b),Pe+=A,z=v-M,E=1<<z;z+M<R&&(E-=ge[z+M],!(E<=0));)z++,E<<=1;if(P+=1<<z,i===$u&&P>yp||i===wp&&P>vp)return 1;fe=q&de,c[fe]=b<<24|z<<16|Pe-l|0}}return q!==0&&(c[Pe+q]=v-M<<24|64<<16|0),p.bits=b,0};var $c=L2;const _2=0,Qm=1,Xm=2,{Z_FINISH:jp,Z_BLOCK:I2,Z_TREES:Ld,Z_OK:Hl,Z_STREAM_END:E2,Z_NEED_DICT:M2,Z_STREAM_ERROR:Bs,Z_DATA_ERROR:Zm,Z_MEM_ERROR:e0,Z_BUF_ERROR:R2,Z_DEFLATED:Sp}=Gm,Xd=16180,Np=16181,kp=16182,Ap=16183,Cp=16184,Pp=16185,Lp=16186,_p=16187,Ip=16188,Ep=16189,Vd=16190,Yo=16191,Hu=16192,Mp=16193,Vu=16194,Rp=16195,Fp=16196,Dp=16197,Tp=16198,_d=16199,Id=16200,Op=16201,Bp=16202,zp=16203,Up=16204,Wp=16205,Yu=16206,qp=16207,$p=16208,kr=16209,t0=16210,n0=16211,F2=852,D2=592,T2=15,O2=T2,Hp=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function B2(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Jl=i=>{if(!i)return 1;const a=i.state;return!a||a.strm!==i||a.mode<Xd||a.mode>n0?1:0},r0=i=>{if(Jl(i))return Bs;const a=i.state;return i.total_in=i.total_out=a.total=0,i.msg="",a.wrap&&(i.adler=a.wrap&1),a.mode=Xd,a.last=0,a.havedict=0,a.flags=-1,a.dmax=32768,a.head=null,a.hold=0,a.bits=0,a.lencode=a.lendyn=new Int32Array(F2),a.distcode=a.distdyn=new Int32Array(D2),a.sane=1,a.back=-1,Hl},a0=i=>{if(Jl(i))return Bs;const a=i.state;return a.wsize=0,a.whave=0,a.wnext=0,r0(i)},i0=(i,a)=>{let r;if(Jl(i))return Bs;const o=i.state;return a<0?(r=0,a=-a):(r=(a>>4)+5,a<48&&(a&=15)),a&&(a<8||a>15)?Bs:(o.window!==null&&o.wbits!==a&&(o.window=null),o.wrap=r,o.wbits=a,a0(i))},s0=(i,a)=>{if(!i)return Bs;const r=new B2;i.state=r,r.strm=i,r.window=null,r.mode=Xd;const o=i0(i,a);return o!==Hl&&(i.state=null),o},z2=i=>s0(i,O2);let Vp=!0,Gu,Ju;const U2=i=>{if(Vp){Gu=new Int32Array(512),Ju=new Int32Array(32);let a=0;for(;a<144;)i.lens[a++]=8;for(;a<256;)i.lens[a++]=9;for(;a<280;)i.lens[a++]=7;for(;a<288;)i.lens[a++]=8;for($c(Qm,i.lens,0,288,Gu,0,i.work,{bits:9}),a=0;a<32;)i.lens[a++]=5;$c(Xm,i.lens,0,32,Ju,0,i.work,{bits:5}),Vp=!1}i.lencode=Gu,i.lenbits=9,i.distcode=Ju,i.distbits=5},o0=(i,a,r,o)=>{let c;const l=i.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Uint8Array(l.wsize)),o>=l.wsize?(l.window.set(a.subarray(r-l.wsize,r),0),l.wnext=0,l.whave=l.wsize):(c=l.wsize-l.wnext,c>o&&(c=o),l.window.set(a.subarray(r-o,r-o+c),l.wnext),o-=c,o?(l.window.set(a.subarray(r-o,r),0),l.wnext=o,l.whave=l.wsize):(l.wnext+=c,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=c))),0},W2=(i,a)=>{let r,o,c,l,g,p,m,v,j,A,R,b,z,M,E=0,P,q,K,H,fe,de,Pe,xe;const Z=new Uint8Array(4);let ge,B;const $=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Jl(i)||!i.output||!i.input&&i.avail_in!==0)return Bs;r=i.state,r.mode===Yo&&(r.mode=Hu),g=i.next_out,c=i.output,m=i.avail_out,l=i.next_in,o=i.input,p=i.avail_in,v=r.hold,j=r.bits,A=p,R=m,xe=Hl;e:for(;;)switch(r.mode){case Xd:if(r.wrap===0){r.mode=Hu;break}for(;j<16;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(r.wrap&2&&v===35615){r.wbits===0&&(r.wbits=15),r.check=0,Z[0]=v&255,Z[1]=v>>>8&255,r.check=ko(r.check,Z,2,0),v=0,j=0,r.mode=Np;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((v&255)<<8)+(v>>8))%31){i.msg="incorrect header check",r.mode=kr;break}if((v&15)!==Sp){i.msg="unknown compression method",r.mode=kr;break}if(v>>>=4,j-=4,Pe=(v&15)+8,r.wbits===0&&(r.wbits=Pe),Pe>15||Pe>r.wbits){i.msg="invalid window size",r.mode=kr;break}r.dmax=1<<r.wbits,r.flags=0,i.adler=r.check=1,r.mode=v&512?Ep:Yo,v=0,j=0;break;case Np:for(;j<16;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(r.flags=v,(r.flags&255)!==Sp){i.msg="unknown compression method",r.mode=kr;break}if(r.flags&57344){i.msg="unknown header flags set",r.mode=kr;break}r.head&&(r.head.text=v>>8&1),r.flags&512&&r.wrap&4&&(Z[0]=v&255,Z[1]=v>>>8&255,r.check=ko(r.check,Z,2,0)),v=0,j=0,r.mode=kp;case kp:for(;j<32;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}r.head&&(r.head.time=v),r.flags&512&&r.wrap&4&&(Z[0]=v&255,Z[1]=v>>>8&255,Z[2]=v>>>16&255,Z[3]=v>>>24&255,r.check=ko(r.check,Z,4,0)),v=0,j=0,r.mode=Ap;case Ap:for(;j<16;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}r.head&&(r.head.xflags=v&255,r.head.os=v>>8),r.flags&512&&r.wrap&4&&(Z[0]=v&255,Z[1]=v>>>8&255,r.check=ko(r.check,Z,2,0)),v=0,j=0,r.mode=Cp;case Cp:if(r.flags&1024){for(;j<16;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}r.length=v,r.head&&(r.head.extra_len=v),r.flags&512&&r.wrap&4&&(Z[0]=v&255,Z[1]=v>>>8&255,r.check=ko(r.check,Z,2,0)),v=0,j=0}else r.head&&(r.head.extra=null);r.mode=Pp;case Pp:if(r.flags&1024&&(b=r.length,b>p&&(b=p),b&&(r.head&&(Pe=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(o.subarray(l,l+b),Pe)),r.flags&512&&r.wrap&4&&(r.check=ko(r.check,o,b,l)),p-=b,l+=b,r.length-=b),r.length))break e;r.length=0,r.mode=Lp;case Lp:if(r.flags&2048){if(p===0)break e;b=0;do Pe=o[l+b++],r.head&&Pe&&r.length<65536&&(r.head.name+=String.fromCharCode(Pe));while(Pe&&b<p);if(r.flags&512&&r.wrap&4&&(r.check=ko(r.check,o,b,l)),p-=b,l+=b,Pe)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=_p;case _p:if(r.flags&4096){if(p===0)break e;b=0;do Pe=o[l+b++],r.head&&Pe&&r.length<65536&&(r.head.comment+=String.fromCharCode(Pe));while(Pe&&b<p);if(r.flags&512&&r.wrap&4&&(r.check=ko(r.check,o,b,l)),p-=b,l+=b,Pe)break e}else r.head&&(r.head.comment=null);r.mode=Ip;case Ip:if(r.flags&512){for(;j<16;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(r.wrap&4&&v!==(r.check&65535)){i.msg="header crc mismatch",r.mode=kr;break}v=0,j=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),i.adler=r.check=0,r.mode=Yo;break;case Ep:for(;j<32;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}i.adler=r.check=Hp(v),v=0,j=0,r.mode=Vd;case Vd:if(r.havedict===0)return i.next_out=g,i.avail_out=m,i.next_in=l,i.avail_in=p,r.hold=v,r.bits=j,M2;i.adler=r.check=1,r.mode=Yo;case Yo:if(a===I2||a===Ld)break e;case Hu:if(r.last){v>>>=j&7,j-=j&7,r.mode=Yu;break}for(;j<3;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}switch(r.last=v&1,v>>>=1,j-=1,v&3){case 0:r.mode=Mp;break;case 1:if(U2(r),r.mode=_d,a===Ld){v>>>=2,j-=2;break e}break;case 2:r.mode=Fp;break;case 3:i.msg="invalid block type",r.mode=kr}v>>>=2,j-=2;break;case Mp:for(v>>>=j&7,j-=j&7;j<32;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if((v&65535)!==(v>>>16^65535)){i.msg="invalid stored block lengths",r.mode=kr;break}if(r.length=v&65535,v=0,j=0,r.mode=Vu,a===Ld)break e;case Vu:r.mode=Rp;case Rp:if(b=r.length,b){if(b>p&&(b=p),b>m&&(b=m),b===0)break e;c.set(o.subarray(l,l+b),g),p-=b,l+=b,m-=b,g+=b,r.length-=b;break}r.mode=Yo;break;case Fp:for(;j<14;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(r.nlen=(v&31)+257,v>>>=5,j-=5,r.ndist=(v&31)+1,v>>>=5,j-=5,r.ncode=(v&15)+4,v>>>=4,j-=4,r.nlen>286||r.ndist>30){i.msg="too many length or distance symbols",r.mode=kr;break}r.have=0,r.mode=Dp;case Dp:for(;r.have<r.ncode;){for(;j<3;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}r.lens[$[r.have++]]=v&7,v>>>=3,j-=3}for(;r.have<19;)r.lens[$[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,ge={bits:r.lenbits},xe=$c(_2,r.lens,0,19,r.lencode,0,r.work,ge),r.lenbits=ge.bits,xe){i.msg="invalid code lengths set",r.mode=kr;break}r.have=0,r.mode=Tp;case Tp:for(;r.have<r.nlen+r.ndist;){for(;E=r.lencode[v&(1<<r.lenbits)-1],P=E>>>24,q=E>>>16&255,K=E&65535,!(P<=j);){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(K<16)v>>>=P,j-=P,r.lens[r.have++]=K;else{if(K===16){for(B=P+2;j<B;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(v>>>=P,j-=P,r.have===0){i.msg="invalid bit length repeat",r.mode=kr;break}Pe=r.lens[r.have-1],b=3+(v&3),v>>>=2,j-=2}else if(K===17){for(B=P+3;j<B;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}v>>>=P,j-=P,Pe=0,b=3+(v&7),v>>>=3,j-=3}else{for(B=P+7;j<B;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}v>>>=P,j-=P,Pe=0,b=11+(v&127),v>>>=7,j-=7}if(r.have+b>r.nlen+r.ndist){i.msg="invalid bit length repeat",r.mode=kr;break}for(;b--;)r.lens[r.have++]=Pe}}if(r.mode===kr)break;if(r.lens[256]===0){i.msg="invalid code -- missing end-of-block",r.mode=kr;break}if(r.lenbits=9,ge={bits:r.lenbits},xe=$c(Qm,r.lens,0,r.nlen,r.lencode,0,r.work,ge),r.lenbits=ge.bits,xe){i.msg="invalid literal/lengths set",r.mode=kr;break}if(r.distbits=6,r.distcode=r.distdyn,ge={bits:r.distbits},xe=$c(Xm,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,ge),r.distbits=ge.bits,xe){i.msg="invalid distances set",r.mode=kr;break}if(r.mode=_d,a===Ld)break e;case _d:r.mode=Id;case Id:if(p>=6&&m>=258){i.next_out=g,i.avail_out=m,i.next_in=l,i.avail_in=p,r.hold=v,r.bits=j,N2(i,R),g=i.next_out,c=i.output,m=i.avail_out,l=i.next_in,o=i.input,p=i.avail_in,v=r.hold,j=r.bits,r.mode===Yo&&(r.back=-1);break}for(r.back=0;E=r.lencode[v&(1<<r.lenbits)-1],P=E>>>24,q=E>>>16&255,K=E&65535,!(P<=j);){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(q&&(q&240)===0){for(H=P,fe=q,de=K;E=r.lencode[de+((v&(1<<H+fe)-1)>>H)],P=E>>>24,q=E>>>16&255,K=E&65535,!(H+P<=j);){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}v>>>=H,j-=H,r.back+=H}if(v>>>=P,j-=P,r.back+=P,r.length=K,q===0){r.mode=Wp;break}if(q&32){r.back=-1,r.mode=Yo;break}if(q&64){i.msg="invalid literal/length code",r.mode=kr;break}r.extra=q&15,r.mode=Op;case Op:if(r.extra){for(B=r.extra;j<B;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,j-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Bp;case Bp:for(;E=r.distcode[v&(1<<r.distbits)-1],P=E>>>24,q=E>>>16&255,K=E&65535,!(P<=j);){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if((q&240)===0){for(H=P,fe=q,de=K;E=r.distcode[de+((v&(1<<H+fe)-1)>>H)],P=E>>>24,q=E>>>16&255,K=E&65535,!(H+P<=j);){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}v>>>=H,j-=H,r.back+=H}if(v>>>=P,j-=P,r.back+=P,q&64){i.msg="invalid distance code",r.mode=kr;break}r.offset=K,r.extra=q&15,r.mode=zp;case zp:if(r.extra){for(B=r.extra;j<B;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,j-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){i.msg="invalid distance too far back",r.mode=kr;break}r.mode=Up;case Up:if(m===0)break e;if(b=R-m,r.offset>b){if(b=r.offset-b,b>r.whave&&r.sane){i.msg="invalid distance too far back",r.mode=kr;break}b>r.wnext?(b-=r.wnext,z=r.wsize-b):z=r.wnext-b,b>r.length&&(b=r.length),M=r.window}else M=c,z=g-r.offset,b=r.length;b>m&&(b=m),m-=b,r.length-=b;do c[g++]=M[z++];while(--b);r.length===0&&(r.mode=Id);break;case Wp:if(m===0)break e;c[g++]=r.length,m--,r.mode=Id;break;case Yu:if(r.wrap){for(;j<32;){if(p===0)break e;p--,v|=o[l++]<<j,j+=8}if(R-=m,i.total_out+=R,r.total+=R,r.wrap&4&&R&&(i.adler=r.check=r.flags?ko(r.check,c,R,g-R):yf(r.check,c,R,g-R)),R=m,r.wrap&4&&(r.flags?v:Hp(v))!==r.check){i.msg="incorrect data check",r.mode=kr;break}v=0,j=0}r.mode=qp;case qp:if(r.wrap&&r.flags){for(;j<32;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(r.wrap&4&&v!==(r.total&4294967295)){i.msg="incorrect length check",r.mode=kr;break}v=0,j=0}r.mode=$p;case $p:xe=E2;break e;case kr:xe=Zm;break e;case t0:return e0;case n0:default:return Bs}return i.next_out=g,i.avail_out=m,i.next_in=l,i.avail_in=p,r.hold=v,r.bits=j,(r.wsize||R!==i.avail_out&&r.mode<kr&&(r.mode<Yu||a!==jp))&&o0(i,i.output,i.next_out,R-i.avail_out),A-=i.avail_in,R-=i.avail_out,i.total_in+=A,i.total_out+=R,r.total+=R,r.wrap&4&&R&&(i.adler=r.check=r.flags?ko(r.check,c,R,i.next_out-R):yf(r.check,c,R,i.next_out-R)),i.data_type=r.bits+(r.last?64:0)+(r.mode===Yo?128:0)+(r.mode===_d||r.mode===Vu?256:0),(A===0&&R===0||a===jp)&&xe===Hl&&(xe=R2),xe},q2=i=>{if(Jl(i))return Bs;let a=i.state;return a.window&&(a.window=null),i.state=null,Hl},$2=(i,a)=>{if(Jl(i))return Bs;const r=i.state;return(r.wrap&2)===0?Bs:(r.head=a,a.done=!1,Hl)},H2=(i,a)=>{const r=a.length;let o,c,l;return Jl(i)||(o=i.state,o.wrap!==0&&o.mode!==Vd)?Bs:o.mode===Vd&&(c=1,c=yf(c,a,r,0),c!==o.check)?Zm:(l=o0(i,a,r,r),l?(o.mode=t0,e0):(o.havedict=1,Hl))};var V2=a0,Y2=i0,G2=r0,J2=z2,K2=s0,Q2=W2,X2=q2,Z2=$2,ex=H2,tx="pako inflate (from Nodeca project)",Go={inflateReset:V2,inflateReset2:Y2,inflateResetKeep:G2,inflateInit:J2,inflateInit2:K2,inflate:Q2,inflateEnd:X2,inflateGetHeader:Z2,inflateSetDictionary:ex,inflateInfo:tx};function nx(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var rx=nx;const l0=Object.prototype.toString,{Z_NO_FLUSH:ax,Z_FINISH:ix,Z_OK:Jc,Z_STREAM_END:Ku,Z_NEED_DICT:Qu,Z_STREAM_ERROR:sx,Z_DATA_ERROR:Yp,Z_MEM_ERROR:ox}=Gm;function Qc(i){this.options=Jm.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const a=this.options;a.raw&&a.windowBits>=0&&a.windowBits<16&&(a.windowBits=-a.windowBits,a.windowBits===0&&(a.windowBits=-15)),a.windowBits>=0&&a.windowBits<16&&!(i&&i.windowBits)&&(a.windowBits+=32),a.windowBits>15&&a.windowBits<48&&(a.windowBits&15)===0&&(a.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j2,this.strm.avail_out=0;let r=Go.inflateInit2(this.strm,a.windowBits);if(r!==Jc)throw new Error(vf[r]);if(this.header=new rx,Go.inflateGetHeader(this.strm,this.header),a.dictionary&&(typeof a.dictionary=="string"?a.dictionary=bf.string2buf(a.dictionary):l0.call(a.dictionary)==="[object ArrayBuffer]"&&(a.dictionary=new Uint8Array(a.dictionary)),a.raw&&(r=Go.inflateSetDictionary(this.strm,a.dictionary),r!==Jc)))throw new Error(vf[r])}Qc.prototype.push=function(i,a){const r=this.strm,o=this.options.chunkSize,c=this.options.dictionary;let l,g,p;if(this.ended)return!1;for(a===~~a?g=a:g=a===!0?ix:ax,l0.call(i)==="[object ArrayBuffer]"?r.input=new Uint8Array(i):r.input=i,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(o),r.next_out=0,r.avail_out=o),l=Go.inflate(r,g),l===Qu&&c&&(l=Go.inflateSetDictionary(r,c),l===Jc?l=Go.inflate(r,g):l===Yp&&(l=Qu));r.avail_in>0&&l===Ku&&r.state.wrap>0&&i[r.next_in]!==0;)Go.inflateReset(r),l=Go.inflate(r,g);switch(l){case sx:case Yp:case Qu:case ox:return this.onEnd(l),this.ended=!0,!1}if(p=r.avail_out,r.next_out&&(r.avail_out===0||l===Ku))if(this.options.to==="string"){let m=bf.utf8border(r.output,r.next_out),v=r.next_out-m,j=bf.buf2string(r.output,m);r.next_out=v,r.avail_out=o-v,v&&r.output.set(r.output.subarray(m,m+v),0),this.onData(j)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(l===Jc&&p===0)){if(l===Ku)return l=Go.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Qc.prototype.onData=function(i){this.chunks.push(i)};Qc.prototype.onEnd=function(i){i===Jc&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Jm.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function lx(i,a){const r=new Qc(a);if(r.push(i),r.err)throw r.msg||vf[r.err];return r.result}var cx=Qc,dx=lx,ux={Inflate:cx,inflate:dx};const{Inflate:fx,inflate:hx}=ux;var Gp=fx,px=hx;const c0=[];for(let i=0;i<256;i++){let a=i;for(let r=0;r<8;r++)a&1?a=3988292384^a>>>1:a=a>>>1;c0[i]=a}const Jp=4294967295;function mx(i,a,r){let o=i;for(let c=0;c<r;c++)o=c0[(o^a[c])&255]^o>>>8;return o}function gx(i,a){return(mx(Jp,i,a)^Jp)>>>0}function Kp(i,a,r){const o=i.readUint32(),c=gx(new Uint8Array(i.buffer,i.byteOffset+i.offset-a-4,a),a);if(c!==o)throw new Error(`CRC mismatch for chunk ${r}. Expected ${o}, found ${c}`)}function d0(i,a,r){for(let o=0;o<r;o++)a[o]=i[o]}function u0(i,a,r,o){let c=0;for(;c<o;c++)a[c]=i[c];for(;c<r;c++)a[c]=i[c]+a[c-o]&255}function f0(i,a,r,o){let c=0;if(r.length===0)for(;c<o;c++)a[c]=i[c];else for(;c<o;c++)a[c]=i[c]+r[c]&255}function h0(i,a,r,o,c){let l=0;if(r.length===0){for(;l<c;l++)a[l]=i[l];for(;l<o;l++)a[l]=i[l]+(a[l-c]>>1)&255}else{for(;l<c;l++)a[l]=i[l]+(r[l]>>1)&255;for(;l<o;l++)a[l]=i[l]+(a[l-c]+r[l]>>1)&255}}function p0(i,a,r,o,c){let l=0;if(r.length===0){for(;l<c;l++)a[l]=i[l];for(;l<o;l++)a[l]=i[l]+a[l-c]&255}else{for(;l<c;l++)a[l]=i[l]+r[l]&255;for(;l<o;l++)a[l]=i[l]+xx(a[l-c],r[l],r[l-c])&255}}function xx(i,a,r){const o=i+a-r,c=Math.abs(o-i),l=Math.abs(o-a),g=Math.abs(o-r);return c<=l&&c<=g?i:l<=g?a:r}function yx(i,a,r,o,c,l){switch(i){case 0:d0(a,r,c);break;case 1:u0(a,r,c,l);break;case 2:f0(a,r,o,c);break;case 3:h0(a,r,o,c,l);break;case 4:p0(a,r,o,c,l);break;default:throw new Error(`Unsupported filter: ${i}`)}}const vx=new Uint16Array([255]),bx=new Uint8Array(vx.buffer),wx=bx[0]===255;function jx(i){const{data:a,width:r,height:o,channels:c,depth:l}=i,g=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],p=Math.ceil(l/8)*c,m=new Uint8Array(o*r*p);let v=0;for(let j=0;j<7;j++){const A=g[j],R=Math.ceil((r-A.x)/A.xStep),b=Math.ceil((o-A.y)/A.yStep);if(R<=0||b<=0)continue;const z=R*p,M=new Uint8Array(z);for(let E=0;E<b;E++){const P=a[v++],q=a.subarray(v,v+z);v+=z;const K=new Uint8Array(z);yx(P,q,K,M,z,p),M.set(K);for(let H=0;H<R;H++){const fe=A.x+H*A.xStep,de=A.y+E*A.yStep;if(!(fe>=r||de>=o))for(let Pe=0;Pe<p;Pe++)m[(de*r+fe)*p+Pe]=K[H*p+Pe]}}}if(l===16){const j=new Uint16Array(m.buffer);if(wx)for(let A=0;A<j.length;A++)j[A]=Sx(j[A]);return j}else return m}function Sx(i){return(i&255)<<8|i>>8&255}const Nx=new Uint16Array([255]),kx=new Uint8Array(Nx.buffer),Ax=kx[0]===255,Cx=new Uint8Array(0);function Qp(i){const{data:a,width:r,height:o,channels:c,depth:l}=i,g=Math.ceil(l/8)*c,p=Math.ceil(l/8*c*r),m=new Uint8Array(o*p);let v=Cx,j=0,A,R;for(let b=0;b<o;b++){switch(A=a.subarray(j+1,j+1+p),R=m.subarray(b*p,(b+1)*p),a[j]){case 0:d0(A,R,p);break;case 1:u0(A,R,p,g);break;case 2:f0(A,R,v,p);break;case 3:h0(A,R,v,p,g);break;case 4:p0(A,R,v,p,g);break;default:throw new Error(`Unsupported filter: ${a[j]}`)}v=R,j+=p+1}if(l===16){const b=new Uint16Array(m.buffer);if(Ax)for(let z=0;z<b.length;z++)b[z]=Px(b[z]);return b}else return m}function Px(i){return(i&255)<<8|i>>8&255}const Od=Uint8Array.of(137,80,78,71,13,10,26,10);function Xp(i){if(!Lx(i.readBytes(Od.length)))throw new Error("wrong PNG signature")}function Lx(i){if(i.length<Od.length)return!1;for(let a=0;a<Od.length;a++)if(i[a]!==Od[a])return!1;return!0}const _x="tEXt",Ix=0,m0=new TextDecoder("latin1");function Ex(i){if(Rx(i),i.length===0||i.length>79)throw new Error("keyword length must be between 1 and 79")}const Mx=/^[\u0000-\u00FF]*$/;function Rx(i){if(!Mx.test(i))throw new Error("invalid latin1 text")}function Fx(i,a,r){const o=g0(a);i[o]=Dx(a,r-o.length-1)}function g0(i){for(i.mark();i.readByte()!==Ix;);const a=i.offset;i.reset();const r=m0.decode(i.readBytes(a-i.offset-1));return i.skip(1),Ex(r),r}function Dx(i,a){return m0.decode(i.readBytes(a))}const vs={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Xu={UNKNOWN:-1,DEFLATE:0},Zp={UNKNOWN:-1,ADAPTIVE:0},Zu={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Ed={NONE:0,BACKGROUND:1,PREVIOUS:2},ef={SOURCE:0,OVER:1};class Tx extends Ff{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(a,r={}){super(a);const{checkCrc:o=!1}=r;this._checkCrc=o,this._inflator=new Gp,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Xu.UNKNOWN,this._filterMethod=Zp.UNKNOWN,this._interlaceMethod=Zu.UNKNOWN,this._colorType=vs.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Xp(this);!this._end;){const a=this.readUint32(),r=this.readChars(4);this.decodeChunk(a,r)}return this.decodeImage(),this._png}decodeApng(){for(Xp(this);!this._end;){const a=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(a,r)}return this.decodeApngImage(),this._apng}decodeChunk(a,r){const o=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(a);break;case"IDAT":this.decodeIDAT(a);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(a);break;case"iCCP":this.decodeiCCP(a);break;case _x:Fx(this._png.text,this,a);break;case"pHYs":this.decodepHYs();break;default:this.skip(a);break}if(this.offset-o!==a)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Kp(this,a+4,r):this.skip(4)}decodeApngChunk(a,r){const o=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(a);break;default:this.decodeChunk(a,r),this.offset=o+a;break}if(this.offset-o!==a)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Kp(this,a+4,r):this.skip(4)}decodeIHDR(){const a=this._png;a.width=this.readUint32(),a.height=this.readUint32(),a.depth=Ox(this.readUint8());const r=this.readUint8();this._colorType=r;let o;switch(r){case vs.GREYSCALE:o=1;break;case vs.TRUECOLOUR:o=3;break;case vs.INDEXED_COLOUR:o=1;break;case vs.GREYSCALE_ALPHA:o=2;break;case vs.TRUECOLOUR_ALPHA:o=4;break;case vs.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=o,this._compressionMethod=this.readUint8(),this._compressionMethod!==Xu.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const a={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(a)}decodePLTE(a){if(a%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${a}`);const r=a/3;this._hasPalette=!0;const o=[];this._palette=o;for(let c=0;c<r;c++)o.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(a){this._writingDataChunks=!0;const r=a,o=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,o,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodeFDAT(a){this._writingDataChunks=!0;let r=a,o=this.offset+this.byteOffset;if(o+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,o,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodetRNS(a){switch(this._colorType){case vs.GREYSCALE:case vs.TRUECOLOUR:{if(a%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${a}`);if(a/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${a/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(a/2);for(let r=0;r<a/2;r++)this._transparency[r]=this.readUint16();break}case vs.INDEXED_COLOUR:{if(a>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${a} vs ${this._palette.length})`);let r=0;for(;r<a;r++){const o=this.readByte();this._palette[r].push(o)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case vs.UNKNOWN:case vs.GREYSCALE_ALPHA:case vs.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(a){const r=g0(this),o=this.readUint8();if(o!==Xu.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${o}`);const c=this.readBytes(a-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:px(c)}}decodepHYs(){const a=this.readUint32(),r=this.readUint32(),o=this.readByte();this._png.resolution={x:a,y:r,unit:o}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let a=0;a<this._numberOfFrames;a++){const r={sequenceNumber:this._frames[a].sequenceNumber,delayNumber:this._frames[a].delayNumber,delayDenominator:this._frames[a].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},o=this._frames.at(a);if(o){if(o.data=Qp({data:o.data,width:o.width,height:o.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),a===0||o.xOffset===0&&o.yOffset===0&&o.width===this._png.width&&o.height===this._png.height)r.data=o.data;else{const c=this._apng.frames.at(a-1);this.disposeFrame(o,c,r),this.addFrameDataToCanvas(r,o)}this._apng.frames.push(r)}}return this._apng}disposeFrame(a,r,o){switch(a.disposeOp){case Ed.NONE:break;case Ed.BACKGROUND:for(let c=0;c<this._png.height;c++)for(let l=0;l<this._png.width;l++){const g=(c*a.width+l)*this._png.channels;for(let p=0;p<this._png.channels;p++)o.data[g+p]=0}break;case Ed.PREVIOUS:o.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(a,r){const o=1<<this._png.depth,c=(l,g)=>{const p=((l+r.yOffset)*this._png.width+r.xOffset+g)*this._png.channels,m=(l*r.width+g)*this._png.channels;return{index:p,frameIndex:m}};switch(r.blendOp){case ef.SOURCE:for(let l=0;l<r.height;l++)for(let g=0;g<r.width;g++){const{index:p,frameIndex:m}=c(l,g);for(let v=0;v<this._png.channels;v++)a.data[p+v]=r.data[m+v]}break;case ef.OVER:for(let l=0;l<r.height;l++)for(let g=0;g<r.width;g++){const{index:p,frameIndex:m}=c(l,g);for(let v=0;v<this._png.channels;v++){const j=r.data[m+this._png.channels-1]/o,A=v%(this._png.channels-1)===0?1:r.data[m+v],R=Math.floor(j*A+(1-j)*a.data[p+v]);a.data[p+v]+=R}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const a=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Zp.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Zu.NO_INTERLACE)this._png.data=Qp({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Zu.ADAM7)this._png.data=jx({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const a=this._inflator.result,r=this._frames.at(-1);r?r.data=a:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Ed.NONE,blendOp:ef.SOURCE,data:a}),this._inflator=new Gp,this._writingDataChunks=!1}}function Ox(i){if(i!==1&&i!==2&&i!==4&&i!==8&&i!==16)throw new Error(`invalid bit depth: ${i}`);return i}var em;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.METRE=1]="METRE"})(em||(em={}));function Bx(i,a){return new Tx(i,a).decode()}var cn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function tf(){cn.console&&typeof cn.console.log=="function"&&cn.console.log.apply(cn.console,arguments)}var lr={log:tf,warn:function(i){cn.console&&(typeof cn.console.warn=="function"?cn.console.warn.apply(cn.console,arguments):tf.call(null,arguments))},error:function(i){cn.console&&(typeof cn.console.error=="function"?cn.console.error.apply(cn.console,arguments):tf(i))}};function nf(i,a,r){var o=new XMLHttpRequest;o.open("GET",i),o.responseType="blob",o.onload=function(){Ul(o.response,a,r)},o.onerror=function(){lr.error("could not download file")},o.send()}function tm(i){var a=new XMLHttpRequest;a.open("HEAD",i,!1);try{a.send()}catch{}return a.status>=200&&a.status<=299}function Md(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(a)}}var Ul=cn.saveAs||((typeof window>"u"?"undefined":er(window))!=="object"||window!==cn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,a,r){var o=cn.URL||cn.webkitURL,c=document.createElement("a");a=a||i.name||"download",c.download=a,c.rel="noopener",typeof i=="string"?(c.href=i,c.origin!==location.origin?tm(c.href)?nf(i,a,r):Md(c,c.target="_blank"):Md(c)):(c.href=o.createObjectURL(i),setTimeout(function(){o.revokeObjectURL(c.href)},4e4),setTimeout(function(){Md(c)},0))}:"msSaveOrOpenBlob"in navigator?function(i,a,r){if(a=a||i.name||"download",typeof i=="string")if(tm(i))nf(i,a,r);else{var o=document.createElement("a");o.href=i,o.target="_blank",setTimeout(function(){Md(o)})}else navigator.msSaveOrOpenBlob((function(c,l){return l===void 0?l={autoBom:!1}:er(l)!=="object"&&(lr.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c})(i,r),a)}:function(i,a,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),typeof i=="string")return nf(i,a,r);var c=i.type==="application/octet-stream",l=/constructor/i.test(cn.HTMLElement)||cn.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||c&&l)&&(typeof FileReader>"u"?"undefined":er(FileReader))==="object"){var p=new FileReader;p.onloadend=function(){var j=p.result;j=g?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=j:location=j,o=null},p.readAsDataURL(i)}else{var m=cn.URL||cn.webkitURL,v=m.createObjectURL(i);o?o.location=v:location.href=v,o=null,setTimeout(function(){m.revokeObjectURL(v)},4e4)}});function x0(i){var a;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(p){return[parseInt(p[1]),parseInt(p[2]),parseInt(p[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(p){return[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(p){return[parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16),parseInt(p[3]+p[3],16)]}}],o=0;o<r.length;o++){var c=r[o].re,l=r[o].process,g=c.exec(i);g&&(a=l(g),this.r=a[0],this.g=a[1],this.b=a[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var p=this.r.toString(16),m=this.g.toString(16),v=this.b.toString(16);return p.length==1&&(p="0"+p),m.length==1&&(m="0"+m),v.length==1&&(v="0"+v),"#"+p+m+v}}var Bd=cn.atob.bind(cn),nm=cn.btoa.bind(cn);function rf(i,a){var r=i[0],o=i[1],c=i[2],l=i[3];r=Ai(r,o,c,l,a[0],7,-680876936),l=Ai(l,r,o,c,a[1],12,-389564586),c=Ai(c,l,r,o,a[2],17,606105819),o=Ai(o,c,l,r,a[3],22,-1044525330),r=Ai(r,o,c,l,a[4],7,-176418897),l=Ai(l,r,o,c,a[5],12,1200080426),c=Ai(c,l,r,o,a[6],17,-1473231341),o=Ai(o,c,l,r,a[7],22,-45705983),r=Ai(r,o,c,l,a[8],7,1770035416),l=Ai(l,r,o,c,a[9],12,-1958414417),c=Ai(c,l,r,o,a[10],17,-42063),o=Ai(o,c,l,r,a[11],22,-1990404162),r=Ai(r,o,c,l,a[12],7,1804603682),l=Ai(l,r,o,c,a[13],12,-40341101),c=Ai(c,l,r,o,a[14],17,-1502002290),r=Ci(r,o=Ai(o,c,l,r,a[15],22,1236535329),c,l,a[1],5,-165796510),l=Ci(l,r,o,c,a[6],9,-1069501632),c=Ci(c,l,r,o,a[11],14,643717713),o=Ci(o,c,l,r,a[0],20,-373897302),r=Ci(r,o,c,l,a[5],5,-701558691),l=Ci(l,r,o,c,a[10],9,38016083),c=Ci(c,l,r,o,a[15],14,-660478335),o=Ci(o,c,l,r,a[4],20,-405537848),r=Ci(r,o,c,l,a[9],5,568446438),l=Ci(l,r,o,c,a[14],9,-1019803690),c=Ci(c,l,r,o,a[3],14,-187363961),o=Ci(o,c,l,r,a[8],20,1163531501),r=Ci(r,o,c,l,a[13],5,-1444681467),l=Ci(l,r,o,c,a[2],9,-51403784),c=Ci(c,l,r,o,a[7],14,1735328473),r=Pi(r,o=Ci(o,c,l,r,a[12],20,-1926607734),c,l,a[5],4,-378558),l=Pi(l,r,o,c,a[8],11,-2022574463),c=Pi(c,l,r,o,a[11],16,1839030562),o=Pi(o,c,l,r,a[14],23,-35309556),r=Pi(r,o,c,l,a[1],4,-1530992060),l=Pi(l,r,o,c,a[4],11,1272893353),c=Pi(c,l,r,o,a[7],16,-155497632),o=Pi(o,c,l,r,a[10],23,-1094730640),r=Pi(r,o,c,l,a[13],4,681279174),l=Pi(l,r,o,c,a[0],11,-358537222),c=Pi(c,l,r,o,a[3],16,-722521979),o=Pi(o,c,l,r,a[6],23,76029189),r=Pi(r,o,c,l,a[9],4,-640364487),l=Pi(l,r,o,c,a[12],11,-421815835),c=Pi(c,l,r,o,a[15],16,530742520),r=Li(r,o=Pi(o,c,l,r,a[2],23,-995338651),c,l,a[0],6,-198630844),l=Li(l,r,o,c,a[7],10,1126891415),c=Li(c,l,r,o,a[14],15,-1416354905),o=Li(o,c,l,r,a[5],21,-57434055),r=Li(r,o,c,l,a[12],6,1700485571),l=Li(l,r,o,c,a[3],10,-1894986606),c=Li(c,l,r,o,a[10],15,-1051523),o=Li(o,c,l,r,a[1],21,-2054922799),r=Li(r,o,c,l,a[8],6,1873313359),l=Li(l,r,o,c,a[15],10,-30611744),c=Li(c,l,r,o,a[6],15,-1560198380),o=Li(o,c,l,r,a[13],21,1309151649),r=Li(r,o,c,l,a[4],6,-145523070),l=Li(l,r,o,c,a[11],10,-1120210379),c=Li(c,l,r,o,a[2],15,718787259),o=Li(o,c,l,r,a[9],21,-343485551),i[0]=gl(r,i[0]),i[1]=gl(o,i[1]),i[2]=gl(c,i[2]),i[3]=gl(l,i[3])}function Zd(i,a,r,o,c,l){return a=gl(gl(a,i),gl(o,l)),gl(a<<c|a>>>32-c,r)}function Ai(i,a,r,o,c,l,g){return Zd(a&r|~a&o,i,a,c,l,g)}function Ci(i,a,r,o,c,l,g){return Zd(a&o|r&~o,i,a,c,l,g)}function Pi(i,a,r,o,c,l,g){return Zd(a^r^o,i,a,c,l,g)}function Li(i,a,r,o,c,l,g){return Zd(r^(a|~o),i,a,c,l,g)}function y0(i){var a,r=i.length,o=[1732584193,-271733879,-1732584194,271733878];for(a=64;a<=i.length;a+=64)rf(o,zx(i.substring(a-64,a)));i=i.substring(a-64);var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(a=0;a<i.length;a++)c[a>>2]|=i.charCodeAt(a)<<(a%4<<3);if(c[a>>2]|=128<<(a%4<<3),a>55)for(rf(o,c),a=0;a<16;a++)c[a]=0;return c[14]=8*r,rf(o,c),o}function zx(i){var a,r=[];for(a=0;a<64;a+=4)r[a>>2]=i.charCodeAt(a)+(i.charCodeAt(a+1)<<8)+(i.charCodeAt(a+2)<<16)+(i.charCodeAt(a+3)<<24);return r}var rm="0123456789abcdef".split("");function Ux(i){for(var a="",r=0;r<4;r++)a+=rm[i>>8*r+4&15]+rm[i>>8*r&15];return a}function Wx(i){return String.fromCharCode(255&i,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function wf(i){return y0(i).map(Wx).join("")}var qx=(function(i){for(var a=0;a<i.length;a++)i[a]=Ux(i[a]);return i.join("")})(y0("hello"))!="5d41402abc4b2a76b9719d911017c592";function gl(i,a){if(qx){var r=(65535&i)+(65535&a);return(i>>16)+(a>>16)+(r>>16)<<16|65535&r}return i+a&4294967295}function jf(i,a){var r,o,c,l;if(i!==r){for(var g=(c=i,l=1+(256/i.length|0),new Array(l+1).join(c)),p=[],m=0;m<256;m++)p[m]=m;var v=0;for(m=0;m<256;m++){var j=p[m];v=(v+j+g.charCodeAt(m))%256,p[m]=p[v],p[v]=j}r=i,o=p}else p=o;var A=a.length,R=0,b=0,z="";for(m=0;m<A;m++)b=(b+(j=p[R=(R+1)%256]))%256,p[R]=p[b],p[b]=j,g=p[(p[R]+p[b])%256],z+=String.fromCharCode(a.charCodeAt(m)^g);return z}var am={print:4,modify:8,copy:16,"annot-forms":32};function gc(i,a,r,o){this.v=1,this.r=2;var c=192;i.forEach(function(p){if(am.perm!==void 0)throw new Error("Invalid permission: "+p);c+=am[p]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(a+this.padding).substr(0,32),g=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,g),this.P=-(1+(255^c)),this.encryptionKey=wf(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(o)).substr(0,5),this.U=jf(this.encryptionKey,this.padding)}function xc(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var a="",r=i.length,o=0;o<r;o++){var c=i.charCodeAt(o);a+=c<33||c===35||c===37||c===40||c===41||c===47||c===60||c===62||c===91||c===93||c===123||c===125||c>126?"#"+("0"+c.toString(16)).slice(-2):i[o]}return a}function im(i){if(er(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var a={};this.subscribe=function(r,o,c){if(c=c||!1,typeof r!="string"||typeof o!="function"||typeof c!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");a.hasOwnProperty(r)||(a[r]={});var l=Math.random().toString(35);return a[r][l]=[o,!!c],l},this.unsubscribe=function(r){for(var o in a)if(a[o][r])return delete a[o][r],Object.keys(a[o]).length===0&&delete a[o],!0;return!1},this.publish=function(r){if(a.hasOwnProperty(r)){var o=Array.prototype.slice.call(arguments,1),c=[];for(var l in a[r]){var g=a[r][l];try{g[0].apply(i,o)}catch(p){cn.console&&lr.error("jsPDF PubSub Error",p.message,p)}g[1]&&c.push(l)}c.length&&c.forEach(this.unsubscribe)}},this.getTopics=function(){return a}}function Yd(i){if(!(this instanceof Yd))return new Yd(i);var a="opacity,stroke-opacity".split(",");for(var r in i)i.hasOwnProperty(r)&&a.indexOf(r)>=0&&(this[r]=i[r]);this.id="",this.objectNumber=-1}function v0(i,a){this.gState=i,this.matrix=a,this.id="",this.objectNumber=-1}function Wl(i,a,r,o,c){if(!(this instanceof Wl))return new Wl(i,a,r,o,c);this.type=i==="axial"?2:3,this.coords=a,this.colors=r,v0.call(this,o,c)}function yc(i,a,r,o,c){if(!(this instanceof yc))return new yc(i,a,r,o,c);this.boundingBox=i,this.xStep=a,this.yStep=r,this.stream="",this.cloneIndex=0,v0.call(this,o,c)}function Yt(i){var a,r=typeof arguments[0]=="string"?arguments[0]:"p",o=arguments[1],c=arguments[2],l=arguments[3],g=[],p=1,m=16,v="S",j=null;er(i=i||{})==="object"&&(r=i.orientation,o=i.unit||o,c=i.format||c,l=i.compress||i.compressPdf||l,(j=i.encryption||null)!==null&&(j.userPassword=j.userPassword||"",j.ownerPassword=j.ownerPassword||"",j.userPermissions=j.userPermissions||[]),p=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(a=i.precision),i.floatPrecision!==void 0&&(m=i.floatPrecision),v=i.defaultPathOperation||"S"),g=i.filters||(l===!0?["FlateEncode"]:g),o=o||"mm",r=(""+(r||"P")).toLowerCase();var A=i.putOnlyUsedFonts||!1,R={},b={internal:{},__private__:{}};b.__private__.PubSub=im;var z="1.3",M=b.__private__.getPdfVersion=function(){return z};b.__private__.setPdfVersion=function(x){z=x};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return E};var P=b.__private__.getPageFormat=function(x){return E[x]};c=c||"a4";var q="compat",K="advanced",H=q;function fe(){this.saveGraphicsState(),Y(new St(se,0,0,-se,0,hi()*se).toString()+" cm"),this.setFontSize(this.getFontSize()/se),v="n",H=K}function de(){this.restoreGraphicsState(),v="S",H=q}var Pe=b.__private__.combineFontStyleAndFontWeight=function(x,L){if(x=="bold"&&L=="normal"||x=="bold"&&L==400||x=="normal"&&L=="italic"||x=="bold"&&L=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return L&&(x=L==400||L==="normal"?x==="italic"?"italic":"normal":L!=700&&L!=="bold"||x!=="normal"?(L==700?"bold":L)+""+x:"bold"),x};b.advancedAPI=function(x){var L=H===q;return L&&fe.call(this),typeof x!="function"||(x(this),L&&de.call(this)),this},b.compatAPI=function(x){var L=H===K;return L&&de.call(this),typeof x!="function"||(x(this),L&&fe.call(this)),this},b.isAdvancedAPI=function(){return H===K};var xe,Z=function(x){if(H!==K)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ge=b.roundToPrecision=b.__private__.roundToPrecision=function(x,L){var re=a||L;if(isNaN(x)||isNaN(re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(re).replace(/0+$/,"")};xe=b.hpf=b.__private__.hpf=typeof m=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ge(x,m)}:m==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ge(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ge(x,16)};var B=b.f2=b.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return ge(x,2)},$=b.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return ge(x,3)},ee=b.scale=b.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return H===q?x*se:H===K?x:void 0},ie=function(x){return ee((function(L){return H===q?hi()-L:H===K?L:void 0})(x))};b.__private__.setPrecision=b.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(a=parseInt(x,10))};var Ne,Re="00000000000000000000000000000000",Me=b.__private__.getFileId=function(){return Re},ue=b.__private__.setFileId=function(x){return Re=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():Re.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),j!==null&&(Mr=new gc(j.userPermissions,j.userPassword,j.ownerPassword,Re)),Re};b.setFileId=function(x){return ue(x),this},b.getFileId=function(){return Me()};var Ce=b.__private__.convertDateToPDFDate=function(x){var L=x.getTimezoneOffset(),re=L<0?"+":"-",me=Math.floor(Math.abs(L/60)),Ae=Math.abs(L%60),Ge=[re,J(me),"'",J(Ae),"'"].join("");return["D:",x.getFullYear(),J(x.getMonth()+1),J(x.getDate()),J(x.getHours()),J(x.getMinutes()),J(x.getSeconds()),Ge].join("")},Le=b.__private__.convertPDFDateToDate=function(x){var L=parseInt(x.substr(2,4),10),re=parseInt(x.substr(6,2),10)-1,me=parseInt(x.substr(8,2),10),Ae=parseInt(x.substr(10,2),10),Ge=parseInt(x.substr(12,2),10),rt=parseInt(x.substr(14,2),10);return new Date(L,re,me,Ae,Ge,rt,0)},Q=b.__private__.setCreationDate=function(x){var L;if(x===void 0&&(x=new Date),x instanceof Date)L=Ce(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");L=x}return Ne=L},C=b.__private__.getCreationDate=function(x){var L=Ne;return x==="jsDate"&&(L=Le(Ne)),L};b.setCreationDate=function(x){return Q(x),this},b.getCreationDate=function(x){return C(x)};var G,J=b.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},oe=b.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},pe=0,be=[],Fe=[],De=0,Ue=[],_e=[],at=!1,ot=Fe;b.__private__.setCustomOutputDestination=function(x){at=!0,ot=x};var it=function(x){at||(ot=x)};b.__private__.resetCustomOutputDestination=function(){at=!1,ot=Fe};var Y=b.__private__.out=function(x){return x=x.toString(),De+=x.length+1,ot.push(x),ot},mt=b.__private__.write=function(x){return Y(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Mt=b.__private__.getArrayBuffer=function(x){for(var L=x.length,re=new ArrayBuffer(L),me=new Uint8Array(re);L--;)me[L]=x.charCodeAt(L);return re},Ct=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return Ct};var Qe=i.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(x){return Qe=H===K?x/se:x,this};var bt,gt=b.__private__.getFontSize=b.getFontSize=function(){return H===q?Qe:Qe*se},Rt=i.R2L||!1;b.__private__.setR2L=b.setR2L=function(x){return Rt=x,this},b.__private__.getR2L=b.getR2L=function(){return Rt};var Ft,jt=b.__private__.setZoomMode=function(x){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))bt=x;else if(isNaN(x)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');bt=x}else bt=parseInt(x,10)};b.__private__.getZoomMode=function(){return bt};var Gt,qt=b.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');Ft=x};b.__private__.getPageMode=function(){return Ft};var Jt=b.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');Gt=x};b.__private__.getLayoutMode=function(){return Gt},b.__private__.setDisplayMode=b.setDisplayMode=function(x,L,re){return jt(x),Jt(L),qt(re),this};var ke={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(x){if(Object.keys(ke).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ke[x]},b.__private__.getDocumentProperties=function(){return ke},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(x){for(var L in ke)ke.hasOwnProperty(L)&&x[L]&&(ke[L]=x[L]);return this},b.__private__.setDocumentProperty=function(x,L){if(Object.keys(ke).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ke[x]=L};var qe,se,je,nt,pt,He={},ct={},Qt=[],yt={},vn={},$t={},Ut={},he=null,ft=0,Dt=[],hn=new im(b),ta=i.hotfixes||[],Sn={},Ar={},pn=[],St=function x(L,re,me,Ae,Ge,rt){if(!(this instanceof x))return new x(L,re,me,Ae,Ge,rt);isNaN(L)&&(L=1),isNaN(re)&&(re=0),isNaN(me)&&(me=0),isNaN(Ae)&&(Ae=1),isNaN(Ge)&&(Ge=0),isNaN(rt)&&(rt=0),this._matrix=[L,re,me,Ae,Ge,rt]};Object.defineProperty(St.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(St.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(St.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(St.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(St.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(St.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(St.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(St.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(St.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(St.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(St.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(St.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(St.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(St.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(St.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(St.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),St.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(xe).join(x)},St.prototype.multiply=function(x){var L=x.sx*this.sx+x.shy*this.shx,re=x.sx*this.shy+x.shy*this.sy,me=x.shx*this.sx+x.sy*this.shx,Ae=x.shx*this.shy+x.sy*this.sy,Ge=x.tx*this.sx+x.ty*this.shx+this.tx,rt=x.tx*this.shy+x.ty*this.sy+this.ty;return new St(L,re,me,Ae,Ge,rt)},St.prototype.decompose=function(){var x=this.sx,L=this.shy,re=this.shx,me=this.sy,Ae=this.tx,Ge=this.ty,rt=Math.sqrt(x*x+L*L),Nt=(x/=rt)*re+(L/=rt)*me;re-=x*Nt,me-=L*Nt;var zt=Math.sqrt(re*re+me*me);return Nt/=zt,x*(me/=zt)<L*(re/=zt)&&(x=-x,L=-L,Nt=-Nt,rt=-rt),{scale:new St(rt,0,0,zt,0,0),translate:new St(1,0,0,1,Ae,Ge),rotate:new St(x,L,-L,x,0,0),skew:new St(1,0,Nt,1,0,0)}},St.prototype.toString=function(x){return this.join(" ")},St.prototype.inversed=function(){var x=this.sx,L=this.shy,re=this.shx,me=this.sy,Ae=this.tx,Ge=this.ty,rt=1/(x*me-L*re),Nt=me*rt,zt=-L*rt,tn=-re*rt,on=x*rt;return new St(Nt,zt,tn,on,-Nt*Ae-tn*Ge,-zt*Ae-on*Ge)},St.prototype.applyToPoint=function(x){var L=x.x*this.sx+x.y*this.shx+this.tx,re=x.x*this.shy+x.y*this.sy+this.ty;return new ui(L,re)},St.prototype.applyToRectangle=function(x){var L=this.applyToPoint(x),re=this.applyToPoint(new ui(x.x+x.w,x.y+x.h));return new Hi(L.x,L.y,re.x-L.x,re.y-L.y)},St.prototype.clone=function(){var x=this.sx,L=this.shy,re=this.shx,me=this.sy,Ae=this.tx,Ge=this.ty;return new St(x,L,re,me,Ae,Ge)},b.Matrix=St;var Xt=b.matrixMult=function(x,L){return L.multiply(x)},Jn=new St(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Jn;var Ur=function(x,L){if(!vn[x]){var re=(L instanceof Wl?"Sh":"P")+(Object.keys(yt).length+1).toString(10);L.id=re,vn[x]=re,yt[re]=L,hn.publish("addPattern",L)}};b.ShadingPattern=Wl,b.TilingPattern=yc,b.addShadingPattern=function(x,L){return Z("addShadingPattern()"),Ur(x,L),this},b.beginTilingPattern=function(x){Z("beginTilingPattern()"),ia(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},b.endTilingPattern=function(x,L){Z("endTilingPattern()"),L.stream=_e[G].join(`
`),Ur(x,L),hn.publish("endTilingPattern",L),pn.pop().restore()};var Ua,zn=b.__private__.newObject=function(){var x=cr();return Vn(x,!0),x},cr=b.__private__.newObjectDeferred=function(){return pe++,be[pe]=function(){return De},pe},Vn=function(x,L){return L=typeof L=="boolean"&&L,be[x]=De,L&&Y(x+" 0 obj"),x},ws=b.__private__.newAdditionalObject=function(){var x={objId:cr(),content:""};return Ue.push(x),x},zs=cr(),Wa=cr(),Pt=b.__private__.decodeColorString=function(x){var L=x.split(" ");if(L.length!==2||L[1]!=="g"&&L[1]!=="G")L.length!==5||L[4]!=="k"&&L[4]!=="K"||(L=[(1-L[0])*(1-L[3]),(1-L[1])*(1-L[3]),(1-L[2])*(1-L[3]),"r"]);else{var re=parseFloat(L[0]);L=[re,re,re,"r"]}for(var me="#",Ae=0;Ae<3;Ae++)me+=("0"+Math.floor(255*parseFloat(L[Ae])).toString(16)).slice(-2);return me},Rn=b.__private__.encodeColorString=function(x){var L;typeof x=="string"&&(x={ch1:x});var re=x.ch1,me=x.ch2,Ae=x.ch3,Ge=x.ch4,rt=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof re=="string"&&re.charAt(0)!=="#"){var Nt=new x0(re);if(Nt.ok)re=Nt.toHex();else if(!/^\d*\.?\d*$/.test(re))throw new Error('Invalid color "'+re+'" passed to jsPDF.encodeColorString.')}if(typeof re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(re)&&(re="#"+re[1]+re[1]+re[2]+re[2]+re[3]+re[3]),typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re)){var zt=parseInt(re.substr(1),16);re=zt>>16&255,me=zt>>8&255,Ae=255&zt}if(me===void 0||Ge===void 0&&re===me&&me===Ae)L=typeof re=="string"?re+" "+rt[0]:x.precision===2?B(re/255)+" "+rt[0]:$(re/255)+" "+rt[0];else if(Ge===void 0||er(Ge)==="object"){if(Ge&&!isNaN(Ge.a)&&Ge.a===0)return["1.","1.","1.",rt[1]].join(" ");L=typeof re=="string"?[re,me,Ae,rt[1]].join(" "):x.precision===2?[B(re/255),B(me/255),B(Ae/255),rt[1]].join(" "):[$(re/255),$(me/255),$(Ae/255),rt[1]].join(" ")}else L=typeof re=="string"?[re,me,Ae,Ge,rt[2]].join(" "):x.precision===2?[B(re),B(me),B(Ae),B(Ge),rt[2]].join(" "):[$(re),$(me),$(Ae),$(Ge),rt[2]].join(" ");return L},Ca=b.__private__.getFilters=function(){return g},Pa=b.__private__.putStream=function(x){var L=(x=x||{}).data||"",re=x.filters||Ca(),me=x.alreadyAppliedFilters||[],Ae=x.addLength1||!1,Ge=L.length,rt=x.objectId,Nt=function(_n){return _n};if(j!==null&&rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");j!==null&&(Nt=Mr.encryptor(rt,0));var zt={};re===!0&&(re=["FlateEncode"]);var tn=x.additionalKeyValues||[],on=(zt=Yt.API.processDataByFilters!==void 0?Yt.API.processDataByFilters(L,re):{data:L,reverseChain:[]}).reverseChain+(Array.isArray(me)?me.join(" "):me.toString());if(zt.data.length!==0&&(tn.push({key:"Length",value:zt.data.length}),Ae===!0&&tn.push({key:"Length1",value:Ge})),on.length!=0)if(on.split("/").length-1==1)tn.push({key:"Filter",value:on});else{tn.push({key:"Filter",value:"["+on+"]"});for(var kn=0;kn<tn.length;kn+=1)if(tn[kn].key==="DecodeParms"){for(var rr=[],An=0;An<zt.reverseChain.split("/").length-1;An+=1)rr.push("null");rr.push(tn[kn].value),tn[kn].value="["+rr.join(" ")+"]"}}Y("<<");for(var Wn=0;Wn<tn.length;Wn++)Y("/"+tn[Wn].key+" "+tn[Wn].value);Y(">>"),zt.data.length!==0&&(Y("stream"),Y(Nt(zt.data)),Y("endstream"))},xo=b.__private__.putPage=function(x){var L=x.number,re=x.data,me=x.objId,Ae=x.contentsObjId;Vn(me,!0),Y("<</Type /Page"),Y("/Parent "+x.rootDictionaryObjId+" 0 R"),Y("/Resources "+x.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(xe(x.mediaBox.bottomLeftX))+" "+parseFloat(xe(x.mediaBox.bottomLeftY))+" "+xe(x.mediaBox.topRightX)+" "+xe(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&Y("/CropBox ["+xe(x.cropBox.bottomLeftX)+" "+xe(x.cropBox.bottomLeftY)+" "+xe(x.cropBox.topRightX)+" "+xe(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&Y("/BleedBox ["+xe(x.bleedBox.bottomLeftX)+" "+xe(x.bleedBox.bottomLeftY)+" "+xe(x.bleedBox.topRightX)+" "+xe(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&Y("/TrimBox ["+xe(x.trimBox.bottomLeftX)+" "+xe(x.trimBox.bottomLeftY)+" "+xe(x.trimBox.topRightX)+" "+xe(x.trimBox.topRightY)+"]"),x.artBox!==null&&Y("/ArtBox ["+xe(x.artBox.bottomLeftX)+" "+xe(x.artBox.bottomLeftY)+" "+xe(x.artBox.topRightX)+" "+xe(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&Y("/UserUnit "+x.userUnit),hn.publish("putPage",{objId:me,pageContext:Dt[L],pageNumber:L,page:re}),Y("/Contents "+Ae+" 0 R"),Y(">>"),Y("endobj");var Ge=re.join(`
`);return H===K&&(Ge+=`
Q`),Vn(Ae,!0),Pa({data:Ge,filters:Ca(),objectId:Ae}),Y("endobj"),me},na=b.__private__.putPages=function(){var x,L,re=[];for(x=1;x<=ft;x++)Dt[x].objId=cr(),Dt[x].contentsObjId=cr();for(x=1;x<=ft;x++)re.push(xo({number:x,data:_e[x],objId:Dt[x].objId,contentsObjId:Dt[x].contentsObjId,mediaBox:Dt[x].mediaBox,cropBox:Dt[x].cropBox,bleedBox:Dt[x].bleedBox,trimBox:Dt[x].trimBox,artBox:Dt[x].artBox,userUnit:Dt[x].userUnit,rootDictionaryObjId:zs,resourceDictionaryObjId:Wa}));Vn(zs,!0),Y("<</Type /Pages");var me="/Kids [";for(L=0;L<ft;L++)me+=re[L]+" 0 R ";Y(me+"]"),Y("/Count "+ft),Y(">>"),Y("endobj"),hn.publish("postPutPages")},ra=function(x){hn.publish("putFont",{font:x,out:Y,newObject:zn,putStream:Pa}),x.isAlreadyPutted!==!0&&(x.objectNumber=zn(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+xc(x.postScriptName)),Y("/Subtype /Type1"),typeof x.encoding=="string"&&Y("/Encoding /"+x.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},Ui=function(x){x.objectNumber=zn();var L=[];L.push({key:"Type",value:"/XObject"}),L.push({key:"Subtype",value:"/Form"}),L.push({key:"BBox",value:"["+[xe(x.x),xe(x.y),xe(x.x+x.width),xe(x.y+x.height)].join(" ")+"]"}),L.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var re=x.pages[1].join(`
`);Pa({data:re,additionalKeyValues:L,objectId:x.objectNumber}),Y("endobj")},Us=function(x,L){L||(L=21);var re=zn(),me=(function(rt,Nt){var zt,tn=[],on=1/(Nt-1);for(zt=0;zt<1;zt+=on)tn.push(zt);if(tn.push(1),rt[0].offset!=0){var kn={offset:0,color:rt[0].color};rt.unshift(kn)}if(rt[rt.length-1].offset!=1){var rr={offset:1,color:rt[rt.length-1].color};rt.push(rr)}for(var An="",Wn=0,_n=0;_n<tn.length;_n++){for(zt=tn[_n];zt>rt[Wn+1].offset;)Wn++;var $n=rt[Wn].offset,Cr=(zt-$n)/(rt[Wn+1].offset-$n),Vi=rt[Wn].color,Qa=rt[Wn+1].color;An+=oe(Math.round((1-Cr)*Vi[0]+Cr*Qa[0]).toString(16))+oe(Math.round((1-Cr)*Vi[1]+Cr*Qa[1]).toString(16))+oe(Math.round((1-Cr)*Vi[2]+Cr*Qa[2]).toString(16))}return An.trim()})(x.colors,L),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+L+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pa({data:me,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:re}),Y("endobj"),x.objectNumber=zn(),Y("<< /ShadingType "+x.type),Y("/ColorSpace /DeviceRGB");var Ge="/Coords ["+xe(parseFloat(x.coords[0]))+" "+xe(parseFloat(x.coords[1]))+" ";x.type===2?Ge+=xe(parseFloat(x.coords[2]))+" "+xe(parseFloat(x.coords[3])):Ge+=xe(parseFloat(x.coords[2]))+" "+xe(parseFloat(x.coords[3]))+" "+xe(parseFloat(x.coords[4]))+" "+xe(parseFloat(x.coords[5])),Y(Ge+="]"),x.matrix&&Y("/Matrix ["+x.matrix.toString()+"]"),Y("/Function "+re+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},Ii=function(x,L){var re=cr(),me=zn();L.push({resourcesOid:re,objectOid:me}),x.objectNumber=me;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+x.boundingBox.map(xe).join(" ")+"]"}),Ae.push({key:"XStep",value:xe(x.xStep)}),Ae.push({key:"YStep",value:xe(x.yStep)}),Ae.push({key:"Resources",value:re+" 0 R"}),x.matrix&&Ae.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),Pa({data:x.stream,additionalKeyValues:Ae,objectId:x.objectNumber}),Y("endobj")},ut=function(x){for(var L in x.objectNumber=zn(),Y("<<"),x)switch(L){case"opacity":Y("/ca "+B(x[L]));break;case"stroke-opacity":Y("/CA "+B(x[L]))}Y(">>"),Y("endobj")},xn=function(x){Vn(x.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var L in Y("/Font <<"),He)He.hasOwnProperty(L)&&(A===!1||A===!0&&R.hasOwnProperty(L))&&Y("/"+L+" "+He[L].objectNumber+" 0 R");Y(">>")})(),(function(){if(Object.keys(yt).length>0){for(var L in Y("/Shading <<"),yt)yt.hasOwnProperty(L)&&yt[L]instanceof Wl&&yt[L].objectNumber>=0&&Y("/"+L+" "+yt[L].objectNumber+" 0 R");hn.publish("putShadingPatternDict"),Y(">>")}})(),(function(L){if(Object.keys(yt).length>0){for(var re in Y("/Pattern <<"),yt)yt.hasOwnProperty(re)&&yt[re]instanceof b.TilingPattern&&yt[re].objectNumber>=0&&yt[re].objectNumber<L&&Y("/"+re+" "+yt[re].objectNumber+" 0 R");hn.publish("putTilingPatternDict"),Y(">>")}})(x.objectOid),(function(){if(Object.keys($t).length>0){var L;for(L in Y("/ExtGState <<"),$t)$t.hasOwnProperty(L)&&$t[L].objectNumber>=0&&Y("/"+L+" "+$t[L].objectNumber+" 0 R");hn.publish("putGStateDict"),Y(">>")}})(),(function(){for(var L in Y("/XObject <<"),Sn)Sn.hasOwnProperty(L)&&Sn[L].objectNumber>=0&&Y("/"+L+" "+Sn[L].objectNumber+" 0 R");hn.publish("putXobjectDict"),Y(">>")})(),Y(">>"),Y("endobj")},rs=function(x){ct[x.fontName]=ct[x.fontName]||{},ct[x.fontName][x.fontStyle]=x.id},qa=function(x,L,re,me,Ae){var Ge={id:"F"+(Object.keys(He).length+1).toString(10),postScriptName:x,fontName:L,fontStyle:re,encoding:me,isStandardFont:Ae||!1,metadata:{}};return hn.publish("addFont",{font:Ge,instance:this}),He[Ge.id]=Ge,rs(Ge),Ge.id},dr=b.__private__.pdfEscape=b.pdfEscape=function(x,L){return(function(re,me){var Ae,Ge,rt,Nt,zt,tn,on,kn,rr;if(rt=(me=me||{}).sourceEncoding||"Unicode",zt=me.outputEncoding,(me.autoencode||zt)&&He[qe].metadata&&He[qe].metadata[rt]&&He[qe].metadata[rt].encoding&&(Nt=He[qe].metadata[rt].encoding,!zt&&He[qe].encoding&&(zt=He[qe].encoding),!zt&&Nt.codePages&&(zt=Nt.codePages[0]),typeof zt=="string"&&(zt=Nt[zt]),zt)){for(on=!1,tn=[],Ae=0,Ge=re.length;Ae<Ge;Ae++)(kn=zt[re.charCodeAt(Ae)])?tn.push(String.fromCharCode(kn)):tn.push(re[Ae]),tn[Ae].charCodeAt(0)>>8&&(on=!0);re=tn.join("")}for(Ae=re.length;on===void 0&&Ae!==0;)re.charCodeAt(Ae-1)>>8&&(on=!0),Ae--;if(!on)return re;for(tn=me.noBOM?[]:[254,255],Ae=0,Ge=re.length;Ae<Ge;Ae++){if((rr=(kn=re.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+re+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");tn.push(rr),tn.push(kn-(rr<<8))}return String.fromCharCode.apply(void 0,tn)})(x,L).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ga=b.__private__.beginPage=function(x){_e[++ft]=[],Dt[ft]={objId:0,contentsObjId:0,userUnit:Number(p),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},Ws(ft),it(_e[G])},$a=function(x,L){var re,me,Ae;switch(r=L||r,typeof x=="string"&&(re=P(x.toLowerCase()),Array.isArray(re)&&(me=re[0],Ae=re[1])),Array.isArray(x)&&(me=x[0]*se,Ae=x[1]*se),isNaN(me)&&(me=c[0],Ae=c[1]),(me>14400||Ae>14400)&&(lr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),me=Math.min(14400,me),Ae=Math.min(14400,Ae)),c=[me,Ae],r.substr(0,1)){case"l":Ae>me&&(c=[Ae,me]);break;case"p":me>Ae&&(c=[Ae,me])}ga(c),en(Yn),Y(va),Hs!==0&&Y(Hs+" J"),ur!==0&&Y(ur+" j"),hn.publish("addPage",{pageNumber:ft})},as=function(x){x>0&&x<=ft&&(_e.splice(x,1),Dt.splice(x,1),ft--,G>ft&&(G=ft),this.setPage(G))},Ws=function(x){x>0&&x<=ft&&(G=x)},Wr=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return _e.length-1},xa=function(x,L,re){var me,Ae=void 0;return re=re||{},x=x!==void 0?x:He[qe].fontName,L=L!==void 0?L:He[qe].fontStyle,me=x.toLowerCase(),ct[me]!==void 0&&ct[me][L]!==void 0?Ae=ct[me][L]:ct[x]!==void 0&&ct[x][L]!==void 0?Ae=ct[x][L]:re.disableWarning===!1&&lr.warn("Unable to look up font label for font '"+x+"', '"+L+"'. Refer to getFontList() for available fonts."),Ae||re.noFallback||(Ae=ct.times[L])==null&&(Ae=ct.times.normal),Ae},Kn=b.__private__.putInfo=function(){var x=zn(),L=function(me){return me};for(var re in j!==null&&(L=Mr.encryptor(x,0)),Y("<<"),Y("/Producer ("+dr(L("jsPDF "+Yt.version))+")"),ke)ke.hasOwnProperty(re)&&ke[re]&&Y("/"+re.substr(0,1).toUpperCase()+re.substr(1)+" ("+dr(L(ke[re]))+")");Y("/CreationDate ("+dr(L(Ne))+")"),Y(">>"),Y("endobj")},oi=b.__private__.putCatalog=function(x){var L=(x=x||{}).rootDictionaryObjId||zs;switch(zn(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+L+" 0 R"),bt||(bt="fullwidth"),bt){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var re=""+bt;re.substr(re.length-1)==="%"&&(bt=parseInt(bt)/100),typeof bt=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+B(bt)+"]")}switch(Gt||(Gt="continuous"),Gt){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}Ft&&Y("/PageMode /"+Ft),hn.publish("putCatalog"),Y(">>"),Y("endobj")},_o=b.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(pe+1)),Y("/Root "+pe+" 0 R"),Y("/Info "+(pe-1)+" 0 R"),j!==null&&Y("/Encrypt "+Mr.oid+" 0 R"),Y("/ID [ <"+Re+"> <"+Re+"> ]"),Y(">>")},Kt=b.__private__.putHeader=function(){Y("%PDF-"+z),Y("%")},Ha=b.__private__.putXRef=function(){var x="0000000000";Y("xref"),Y("0 "+(pe+1)),Y("0000000000 65535 f ");for(var L=1;L<=pe;L++)typeof be[L]=="function"?Y((x+be[L]()).slice(-10)+" 00000 n "):be[L]!==void 0?Y((x+be[L]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},Va=b.__private__.buildDocument=function(){var x;pe=0,De=0,Fe=[],be=[],Ue=[],zs=cr(),Wa=cr(),it(Fe),hn.publish("buildDocument"),Kt(),na(),(function(){hn.publish("putAdditionalObjects");for(var re=0;re<Ue.length;re++){var me=Ue[re];Vn(me.objId,!0),Y(me.content),Y("endobj")}hn.publish("postPutAdditionalObjects")})(),x=[],(function(){for(var re in He)He.hasOwnProperty(re)&&(A===!1||A===!0&&R.hasOwnProperty(re))&&ra(He[re])})(),(function(){var re;for(re in $t)$t.hasOwnProperty(re)&&ut($t[re])})(),(function(){for(var re in Sn)Sn.hasOwnProperty(re)&&Ui(Sn[re])})(),(function(re){var me;for(me in yt)yt.hasOwnProperty(me)&&(yt[me]instanceof Wl?Us(yt[me]):yt[me]instanceof yc&&Ii(yt[me],re))})(x),hn.publish("putResources"),x.forEach(xn),xn({resourcesOid:Wa,objectOid:Number.MAX_SAFE_INTEGER}),hn.publish("postPutResources"),j!==null&&(Mr.oid=zn(),Y("<<"),Y("/Filter /Standard"),Y("/V "+Mr.v),Y("/R "+Mr.r),Y("/U <"+Mr.toHexString(Mr.U)+">"),Y("/O <"+Mr.toHexString(Mr.O)+">"),Y("/P "+Mr.P),Y(">>"),Y("endobj")),Kn(),oi();var L=De;return Ha(),_o(),Y("startxref"),Y(""+L),Y("%%EOF"),it(_e[G]),Fe.join(`
`)},li=b.__private__.getBlob=function(x){return new Blob([Mt(x)],{type:"application/pdf"})},Wi=b.output=b.__private__.output=(Ua=function(x,L){switch(typeof(L=L||{})=="string"?L={filename:L}:L.filename=L.filename||"generated.pdf",x){case void 0:return Va();case"save":b.save(L.filename);break;case"arraybuffer":return Mt(Va());case"blob":return li(Va());case"bloburi":case"bloburl":if(cn.URL!==void 0&&typeof cn.URL.createObjectURL=="function")return cn.URL&&cn.URL.createObjectURL(li(Va()))||void 0;lr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var re="",me=Va();try{re=nm(me)}catch{re=nm(unescape(encodeURIComponent(me)))}return"data:application/pdf;filename="+L.filename+";base64,"+re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(cn)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ge=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';L.pdfObjectUrl&&(Ae=L.pdfObjectUrl,Ge="");var rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+Ge+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(L)+");<\/script></body></html>",Nt=cn.open();return Nt!==null&&Nt.document.write(rt),Nt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(cn)==="[object Window]"){var zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(L.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+L.filename+'" width="500px" height="400px" /></body></html>',tn=cn.open();if(tn!==null){tn.document.write(zt);var on=this;tn.document.documentElement.querySelector("#pdfViewer").onload=function(){tn.document.title=L.filename,tn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(on.output("bloburl"))}}return tn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(cn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var kn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",L)+'"></iframe></body></html>',rr=cn.open();if(rr!==null&&(rr.document.write(kn),rr.document.title=L.filename),rr||typeof safari>"u")return rr;break;case"datauri":case"dataurl":return cn.document.location.href=this.output("datauristring",L);default:return null}},Ua.foo=function(){try{return Ua.apply(this,arguments)}catch(re){var x=re.stack||"";~x.indexOf(" at ")&&(x=x.split(" at ")[1]);var L="Error in function "+x.split(`
`)[0].split("<")[0]+": "+re.message;if(!cn.console)throw new Error(L);cn.console.error(L,re),cn.alert&&alert(L)}},Ua.foo.bar=Ua,Ua.foo),Ya=function(x){return Array.isArray(ta)===!0&&ta.indexOf(x)>-1};switch(o){case"pt":se=1;break;case"mm":se=72/25.4;break;case"cm":se=72/2.54;break;case"in":se=72;break;case"px":se=Ya("px_scaling")==1?.75:96/72;break;case"pc":case"em":se=12;break;case"ex":se=6;break;default:if(typeof o!="number")throw new Error("Invalid unit: "+o);se=o}var Mr=null;Q(),ue();var Ga=b.__private__.getPageInfo=b.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dt[x].objId,pageNumber:x,pageContext:Dt[x]}},js=b.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var L in Dt)if(Dt[L].objId===x)break;return Ga(L)},Io=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:Dt[G].objId,pageNumber:G,pageContext:Dt[G]}};b.addPage=function(){return $a.apply(this,arguments),this},b.setPage=function(){return Ws.apply(this,arguments),it.call(this,_e[G]),this},b.insertPage=function(x){return this.addPage(),this.movePage(G,x),this},b.movePage=function(x,L){var re,me;if(x>L){re=_e[x],me=Dt[x];for(var Ae=x;Ae>L;Ae--)_e[Ae]=_e[Ae-1],Dt[Ae]=Dt[Ae-1];_e[L]=re,Dt[L]=me,this.setPage(L)}else if(x<L){re=_e[x],me=Dt[x];for(var Ge=x;Ge<L;Ge++)_e[Ge]=_e[Ge+1],Dt[Ge]=Dt[Ge+1];_e[L]=re,Dt[L]=me,this.setPage(L)}return this},b.deletePage=function(){return as.apply(this,arguments),this},b.__private__.text=b.text=function(x,L,re,me,Ae){var Ge,rt,Nt,zt,tn,on,kn,rr,An,Wn=(me=me||{}).scope||this;if(typeof x=="number"&&typeof L=="number"&&(typeof re=="string"||Array.isArray(re))){var _n=re;re=L,L=x,x=_n}if(arguments[3]instanceof St==0?(Nt=arguments[4],zt=arguments[5],er(kn=arguments[3])==="object"&&kn!==null||(typeof Nt=="string"&&(zt=Nt,Nt=null),typeof kn=="string"&&(zt=kn,kn=null),typeof kn=="number"&&(Nt=kn,kn=null),me={flags:kn,angle:Nt,align:zt})):(Z("The transform parameter of text() with a Matrix value"),An=Ae),isNaN(L)||isNaN(re)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return Wn;var $n,Cr="",Vi=typeof me.lineHeightFactor=="number"?me.lineHeightFactor:ya,Qa=Wn.internal.scaleFactor;function Ia(Mn){return Mn=Mn.split("	").join(Array(me.TabLen||9).join(" ")),dr(Mn,kn)}function pi(Mn){for(var Hn,nn=Mn.concat(),wr=[],xi=nn.length;xi--;)typeof(Hn=nn.shift())=="string"?wr.push(Hn):Array.isArray(Mn)&&(Hn.length===1||Hn[1]===void 0&&Hn[2]===void 0)?wr.push(Hn[0]):wr.push([Hn[0],Hn[1],Hn[2]]);return wr}function Yi(Mn,Hn){var nn;if(typeof Mn=="string")nn=Hn(Mn)[0];else if(Array.isArray(Mn)){for(var wr,xi,vo=Mn.concat(),bo=[],us=vo.length;us--;)typeof(wr=vo.shift())=="string"?bo.push(Hn(wr)[0]):Array.isArray(wr)&&typeof wr[0]=="string"&&(xi=Hn(wr[0],wr[1],wr[2]),bo.push([xi[0],xi[1],xi[2]]));nn=bo}return nn}var ss=!1,sa=!0;if(typeof x=="string")ss=!0;else if(Array.isArray(x)){var oa=x.concat();rt=[];for(var la,ca=oa.length;ca--;)(typeof(la=oa.shift())!="string"||Array.isArray(la)&&typeof la[0]!="string")&&(sa=!1);ss=sa}if(ss===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var mi=Qe/Wn.internal.scaleFactor,Xa=mi*(Vi-1);switch(me.baseline){case"bottom":re-=Xa;break;case"top":re+=mi-Xa;break;case"hanging":re+=mi-2*Xa;break;case"middle":re+=mi/2-Xa}if((on=me.maxWidth||0)>0&&(typeof x=="string"?x=Wn.splitTextToSize(x,on):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(Mn,Hn){return Mn.concat(Wn.splitTextToSize(Hn,on))},[]))),Ge={text:x,x:L,y:re,options:me,mutex:{pdfEscape:dr,activeFontKey:qe,fonts:He,activeFontSize:Qe}},hn.publish("preProcessText",Ge),x=Ge.text,Nt=(me=Ge.options).angle,An instanceof St==0&&Nt&&typeof Nt=="number"){Nt*=Math.PI/180,me.rotationDirection===0&&(Nt=-Nt),H===K&&(Nt=-Nt);var As=Math.cos(Nt),kt=Math.sin(Nt);An=new St(As,kt,-kt,As,0,0)}else Nt&&Nt instanceof St&&(An=Nt);H!==K||An||(An=Jn),(tn=me.charSpace||ba)!==void 0&&(Cr+=xe(ee(tn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(rr=me.horizontalScale)!==void 0&&(Cr+=xe(100*rr)+` Tz
`),me.lang;var dn=-1,Za=me.renderingMode!==void 0?me.renderingMode:me.stroke,ei=Wn.internal.getCurrentPageInfo().pageContext;switch(Za){case 0:case!1:case"fill":dn=0;break;case 1:case!0:case"stroke":dn=1;break;case 2:case"fillThenStroke":dn=2;break;case 3:case"invisible":dn=3;break;case 4:case"fillAndAddForClipping":dn=4;break;case 5:case"strokeAndAddPathForClipping":dn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":dn=6;break;case 7:case"addToPathForClipping":dn=7}var os=ei.usedRenderingMode!==void 0?ei.usedRenderingMode:-1;dn!==-1?Cr+=dn+` Tr
`:os!==-1&&(Cr+=`0 Tr
`),dn!==-1&&(ei.usedRenderingMode=dn),zt=me.align||"left";var ti,Mi=Qe*Vi,Gi=Wn.internal.pageSize.getWidth(),ja=He[qe];tn=me.charSpace||ba,on=me.maxWidth||0,kn=Object.assign({autoencode:!0,noBOM:!0},me.flags);var Ji=[],Ea=function(Mn){return Wn.getStringUnitWidth(Mn,{font:ja,charSpace:tn,fontSize:Qe,doKerning:!1})*Qe/Qa};if(Object.prototype.toString.call(x)==="[object Array]"){var Sa;rt=pi(x),zt!=="left"&&(ti=rt.map(Ea));var Fr,Cs=0;if(zt==="right"){L-=ti[0],x=[],ca=rt.length;for(var Ki=0;Ki<ca;Ki++)Ki===0?(Fr=br(L),Sa=$i(re)):(Fr=ee(Cs-ti[Ki]),Sa=-Mi),x.push([rt[Ki],Fr,Sa]),Cs=ti[Ki]}else if(zt==="center"){L-=ti[0]/2,x=[],ca=rt.length;for(var gi=0;gi<ca;gi++)gi===0?(Fr=br(L),Sa=$i(re)):(Fr=ee((Cs-ti[gi])/2),Sa=-Mi),x.push([rt[gi],Fr,Sa]),Cs=ti[gi]}else if(zt==="left"){x=[],ca=rt.length;for(var ls=0;ls<ca;ls++)x.push(rt[ls])}else if(zt==="justify"&&ja.encoding==="Identity-H"){x=[],ca=rt.length,on=on!==0?on:Gi;for(var cs=0,fr=0;fr<ca;fr++)if(Sa=fr===0?$i(re):-Mi,Fr=fr===0?br(L):cs,fr<ca-1){var Gs=ee((on-ti[fr])/(rt[fr].split(" ").length-1)),ni=rt[fr].split(" ");x.push([ni[0]+" ",Fr,Sa]),cs=0;for(var Ri=1;Ri<ni.length;Ri++){var Hr=(Ea(ni[Ri-1]+" "+ni[Ri])-Ea(ni[Ri]))*Qa+Gs;Ri==ni.length-1?x.push([ni[Ri],Hr,0]):x.push([ni[Ri]+" ",Hr,0]),cs-=Hr}}else x.push([rt[fr],Fr,Sa]);x.push(["",cs,0])}else{if(zt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],ca=rt.length,on=on!==0?on:Gi,fr=0;fr<ca;fr++){Sa=fr===0?$i(re):-Mi,Fr=fr===0?br(L):0;var Js=rt[fr].split(" ").length-1,da=Js>0?(on-ti[fr])/Js:0;fr<ca-1?Ji.push(xe(ee(da))):Ji.push(0),x.push([rt[fr],Fr,Sa])}}}(typeof me.R2L=="boolean"?me.R2L:Rt)===!0&&(x=Yi(x,function(Mn,Hn,nn){return[Mn.split("").reverse().join(""),Hn,nn]})),Ge={text:x,x:L,y:re,options:me,mutex:{pdfEscape:dr,activeFontKey:qe,fonts:He,activeFontSize:Qe}},hn.publish("postProcessText",Ge),x=Ge.text,$n=Ge.mutex.isHex||!1;var yo=He[qe].encoding;yo!=="WinAnsiEncoding"&&yo!=="StandardEncoding"||(x=Yi(x,function(Mn,Hn,nn){return[Ia(Mn),Hn,nn]})),rt=pi(x),x=[];for(var ds,Ps,Ls,Na=Array.isArray(rt[0])?1:0,_s="",Ks=function(Mn,Hn,nn){var wr="";return nn instanceof St?(nn=typeof me.angle=="number"?Xt(nn,new St(1,0,0,1,Mn,Hn)):Xt(new St(1,0,0,1,Mn,Hn),nn),H===K&&(nn=Xt(new St(1,0,0,-1,0,0),nn)),wr=nn.join(" ")+` Tm
`):wr=xe(Mn)+" "+xe(Hn)+` Td
`,wr},sr=0;sr<rt.length;sr++){switch(_s="",Na){case 1:Ls=($n?"<":"(")+rt[sr][0]+($n?">":")"),ds=parseFloat(rt[sr][1]),Ps=parseFloat(rt[sr][2]);break;case 0:Ls=($n?"<":"(")+rt[sr]+($n?">":")"),ds=br(L),Ps=$i(re)}Ji!==void 0&&Ji[sr]!==void 0&&(_s=Ji[sr]+` Tw
`),sr===0?x.push(_s+Ks(ds,Ps,An)+Ls):Na===0?x.push(_s+Ls):Na===1&&x.push(_s+Ks(ds,Ps,An)+Ls)}x=Na===0?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var En=`BT
/`;return En+=qe+" "+Qe+` Tf
`,En+=xe(Qe*Vi)+` TL
`,En+=di+`
`,En+=Cr,En+=x,Y(En+="ET"),R[qe]=!0,Wn};var Un=b.__private__.clip=b.clip=function(x){return Y(x==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return Un("evenodd")},b.__private__.discardPath=b.discardPath=function(){return Y("n"),this};var La=b.__private__.isValidStyle=function(x){var L=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(L=!0),L};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(x){return La(x)&&(v=x),this};var qr=b.__private__.getStyle=b.getStyle=function(x){var L=v;switch(x){case"D":case"S":L="S";break;case"F":L="f";break;case"FD":case"DF":L="B";break;case"f":case"f*":case"B":case"B*":L=x}return L},Ln=b.close=function(){return Y("h"),this};b.stroke=function(){return Y("S"),this},b.fill=function(x){return ci("f",x),this},b.fillEvenOdd=function(x){return ci("f*",x),this},b.fillStroke=function(x){return ci("B",x),this},b.fillStrokeEvenOdd=function(x){return ci("B*",x),this};var ci=function(x,L){er(L)==="object"?Ns(L,x):Y(x)},Ss=function(x){x===null||H===K&&x===void 0||(x=qr(x),Y(x))};function Eo(x,L,re,me,Ae){var Ge=new yc(L||this.boundingBox,re||this.xStep,me||this.yStep,this.gState,Ae||this.matrix);Ge.stream=this.stream;var rt=x+"$$"+this.cloneIndex+++"$$";return Ur(rt,Ge),Ge}var Ns=function(x,L){var re=vn[x.key],me=yt[re];if(me instanceof Wl)Y("q"),Y($r(L)),me.gState&&b.setGState(me.gState),Y(x.matrix.toString()+" cm"),Y("/"+re+" sh"),Y("Q");else if(me instanceof yc){var Ae=new St(1,0,0,-1,0,hi());x.matrix&&(Ae=Ae.multiply(x.matrix||Jn),re=Eo.call(me,x.key,x.boundingBox,x.xStep,x.yStep,Ae).id),Y("q"),Y("/Pattern cs"),Y("/"+re+" scn"),me.gState&&b.setGState(me.gState),Y(L),Y("Q")}},$r=function(x){switch(x){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},qi=b.moveTo=function(x,L){return Y(xe(ee(x))+" "+xe(ie(L))+" m"),this},bn=b.lineTo=function(x,L){return Y(xe(ee(x))+" "+xe(ie(L))+" l"),this},ir=b.curveTo=function(x,L,re,me,Ae,Ge){return Y([xe(ee(x)),xe(ie(L)),xe(ee(re)),xe(ie(me)),xe(ee(Ae)),xe(ie(Ge)),"c"].join(" ")),this};b.__private__.line=b.line=function(x,L,re,me,Ae){if(isNaN(x)||isNaN(L)||isNaN(re)||isNaN(me)||!La(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return H===q?this.lines([[re-x,me-L]],x,L,[1,1],Ae||"S"):this.lines([[re-x,me-L]],x,L,[1,1]).stroke()},b.__private__.lines=b.lines=function(x,L,re,me,Ae,Ge){var rt,Nt,zt,tn,on,kn,rr,An,Wn,_n,$n,Cr;if(typeof x=="number"&&(Cr=re,re=L,L=x,x=Cr),me=me||[1,1],Ge=Ge||!1,isNaN(L)||isNaN(re)||!Array.isArray(x)||!Array.isArray(me)||!La(Ae)||typeof Ge!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(qi(L,re),rt=me[0],Nt=me[1],tn=x.length,_n=L,$n=re,zt=0;zt<tn;zt++)(on=x[zt]).length===2?(_n=on[0]*rt+_n,$n=on[1]*Nt+$n,bn(_n,$n)):(kn=on[0]*rt+_n,rr=on[1]*Nt+$n,An=on[2]*rt+_n,Wn=on[3]*Nt+$n,_n=on[4]*rt+_n,$n=on[5]*Nt+$n,ir(kn,rr,An,Wn,_n,$n));return Ge&&Ln(),Ss(Ae),this},b.path=function(x){for(var L=0;L<x.length;L++){var re=x[L],me=re.c;switch(re.op){case"m":qi(me[0],me[1]);break;case"l":bn(me[0],me[1]);break;case"c":ir.apply(this,me);break;case"h":Ln()}}return this},b.__private__.rect=b.rect=function(x,L,re,me,Ae){if(isNaN(x)||isNaN(L)||isNaN(re)||isNaN(me)||!La(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return H===q&&(me=-me),Y([xe(ee(x)),xe(ie(L)),xe(ee(re)),xe(ee(me)),"re"].join(" ")),Ss(Ae),this},b.__private__.triangle=b.triangle=function(x,L,re,me,Ae,Ge,rt){if(isNaN(x)||isNaN(L)||isNaN(re)||isNaN(me)||isNaN(Ae)||isNaN(Ge)||!La(rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[re-x,me-L],[Ae-re,Ge-me],[x-Ae,L-Ge]],x,L,[1,1],rt,!0),this},b.__private__.roundedRect=b.roundedRect=function(x,L,re,me,Ae,Ge,rt){if(isNaN(x)||isNaN(L)||isNaN(re)||isNaN(me)||isNaN(Ae)||isNaN(Ge)||!La(rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nt=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*re),Ge=Math.min(Ge,.5*me),this.lines([[re-2*Ae,0],[Ae*Nt,0,Ae,Ge-Ge*Nt,Ae,Ge],[0,me-2*Ge],[0,Ge*Nt,-Ae*Nt,Ge,-Ae,Ge],[2*Ae-re,0],[-Ae*Nt,0,-Ae,-Ge*Nt,-Ae,-Ge],[0,2*Ge-me],[0,-Ge*Nt,Ae*Nt,-Ge,Ae,-Ge]],x+Ae,L,[1,1],rt,!0),this},b.__private__.ellipse=b.ellipse=function(x,L,re,me,Ae){if(isNaN(x)||isNaN(L)||isNaN(re)||isNaN(me)||!La(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ge=4/3*(Math.SQRT2-1)*re,rt=4/3*(Math.SQRT2-1)*me;return qi(x+re,L),ir(x+re,L-rt,x+Ge,L-me,x,L-me),ir(x-Ge,L-me,x-re,L-rt,x-re,L),ir(x-re,L+rt,x-Ge,L+me,x,L+me),ir(x+Ge,L+me,x+re,L+rt,x+re,L),Ss(Ae),this},b.__private__.circle=b.circle=function(x,L,re,me){if(isNaN(x)||isNaN(L)||isNaN(re)||!La(me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,L,re,re,me)},b.setFont=function(x,L,re){return re&&(L=Pe(L,re)),qe=xa(x,L,{disableWarning:!1}),this};var _a=b.__private__.getFont=b.getFont=function(){return He[xa.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var x,L,re={};for(x in ct)if(ct.hasOwnProperty(x))for(L in re[x]=[],ct[x])ct[x].hasOwnProperty(L)&&re[x].push(L);return re},b.addFont=function(x,L,re,me,Ae){var Ge=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ge.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&Ge.indexOf(arguments[3])==-1&&(re=Pe(re,me)),qa.call(this,x,L,re,Ae=Ae||"Identity-H")};var ya,Yn=i.lineWidth||.200025,aa=b.__private__.getLineWidth=b.getLineWidth=function(){return Yn},en=b.__private__.setLineWidth=b.setLineWidth=function(x){return Yn=x,Y(xe(ee(x))+" w"),this};b.__private__.setLineDash=Yt.API.setLineDash=Yt.API.setLineDashPattern=function(x,L){if(x=x||[],L=L||0,isNaN(L)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(re){return xe(ee(re))}).join(" "),L=xe(ee(L)),Y("["+x+"] "+L+" d"),this};var Ja=b.__private__.getLineHeight=b.getLineHeight=function(){return Qe*ya};b.__private__.getLineHeight=b.getLineHeight=function(){return Qe*ya};var Nn=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(ya=x),this},qs=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return ya};Nn(i.lineHeight);var br=b.__private__.getHorizontalCoordinate=function(x){return ee(x)},$i=b.__private__.getVerticalCoordinate=function(x){return H===K?x:Dt[G].mediaBox.topRightY-Dt[G].mediaBox.bottomLeftY-ee(x)},$s=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(x){return xe(br(x))},ks=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(x){return xe($i(x))},va=i.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return Pt(va)},b.__private__.setStrokeColor=b.setDrawColor=function(x,L,re,me){return va=Rn({ch1:x,ch2:L,ch3:re,ch4:me,pdfColorType:"draw",precision:2}),Y(va),this};var Mo=i.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return Pt(Mo)},b.__private__.setFillColor=b.setFillColor=function(x,L,re,me){return Mo=Rn({ch1:x,ch2:L,ch3:re,ch4:me,pdfColorType:"fill",precision:2}),Y(Mo),this};var di=i.textColor||"0 g",tr=b.__private__.getTextColor=b.getTextColor=function(){return Pt(di)};b.__private__.setTextColor=b.setTextColor=function(x,L,re,me){return di=Rn({ch1:x,ch2:L,ch3:re,ch4:me,pdfColorType:"text",precision:3}),this};var ba=i.charSpace,is=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(ba||0)};b.__private__.setCharSpace=b.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ba=x,this};var Hs=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(x){var L=b.CapJoinStyles[x];if(L===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hs=L,Y(L+" J"),this};var ur=0;b.__private__.setLineJoin=b.setLineJoin=function(x){var L=b.CapJoinStyles[x];if(L===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ur=L,Y(L+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(xe(ee(x))+" M"),this},b.GState=Yd,b.setGState=function(x){(x=typeof x=="string"?$t[Ut[x]]:Vs(null,x)).equals(he)||(Y("/"+x.id+" gs"),he=x)};var Vs=function(x,L){if(!x||!Ut[x]){var re=!1;for(var me in $t)if($t.hasOwnProperty(me)&&$t[me].equals(L)){re=!0;break}if(re)L=$t[me];else{var Ae="GS"+(Object.keys($t).length+1).toString(10);$t[Ae]=L,L.id=Ae}return x&&(Ut[x]=L.id),hn.publish("addGState",L),L}};b.addGState=function(x,L){return Vs(x,L),this},b.saveGraphicsState=function(){return Y("q"),Qt.push({key:qe,size:Qe,color:di}),this},b.restoreGraphicsState=function(){Y("Q");var x=Qt.pop();return qe=x.key,Qe=x.size,di=x.color,he=null,this},b.setCurrentTransformationMatrix=function(x){return Y(x.toString()+" cm"),this},b.comment=function(x){return Y("#"+x),this};var ui=function(x,L){var re=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return re},set:function(Ge){isNaN(Ge)||(re=parseFloat(Ge))}});var me=L||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return me},set:function(Ge){isNaN(Ge)||(me=parseFloat(Ge))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(Ge){Ae=Ge.toString()}}),this},Hi=function(x,L,re,me){ui.call(this,x,L),this.type="rect";var Ae=re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(rt){isNaN(rt)||(Ae=parseFloat(rt))}});var Ge=me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ge},set:function(rt){isNaN(rt)||(Ge=parseFloat(rt))}}),this},Ys=function(){this.page=ft,this.currentPage=G,this.pages=_e.slice(0),this.pagesContext=Dt.slice(0),this.x=je,this.y=nt,this.matrix=pt,this.width=fi(G),this.height=wa(G),this.outputDestination=ot,this.id="",this.objectNumber=-1};Ys.prototype.restore=function(){ft=this.page,G=this.currentPage,Dt=this.pagesContext,_e=this.pages,je=this.x,nt=this.y,pt=this.matrix,wn(G,this.width),Fn(G,this.height),ot=this.outputDestination};var ia=function(x,L,re,me,Ae){pn.push(new Ys),ft=G=0,_e=[],je=x,nt=L,pt=Ae,ga([re,me])};for(var Rr in b.beginFormObject=function(x,L,re,me,Ae){return ia(x,L,re,me,Ae),this},b.endFormObject=function(x){return(function(L){if(Ar[L])pn.pop().restore();else{var re=new Ys,me="Xo"+(Object.keys(Sn).length+1).toString(10);re.id=me,Ar[L]=me,Sn[me]=re,hn.publish("addFormObject",re),pn.pop().restore()}})(x),this},b.doFormObject=function(x,L){var re=Sn[Ar[x]];return Y("q"),Y(L.toString()+" cm"),Y("/"+re.id+" Do"),Y("Q"),this},b.getFormObject=function(x){var L=Sn[Ar[x]];return{x:L.x,y:L.y,width:L.width,height:L.height,matrix:L.matrix}},b.save=function(x,L){return x=x||"generated.pdf",(L=L||{}).returnPromise=L.returnPromise||!1,L.returnPromise===!1?(Ul(li(Va()),x),typeof Ul.unload=="function"&&cn.setTimeout&&setTimeout(Ul.unload,911),this):new Promise(function(re,me){try{var Ae=Ul(li(Va()),x);typeof Ul.unload=="function"&&cn.setTimeout&&setTimeout(Ul.unload,911),re(Ae)}catch(Ge){me(Ge.message)}})},Yt.API)Yt.API.hasOwnProperty(Rr)&&(Rr==="events"&&Yt.API.events.length?(function(x,L){var re,me,Ae;for(Ae=L.length-1;Ae!==-1;Ae--)re=L[Ae][0],me=L[Ae][1],x.subscribe.apply(x,[re].concat(typeof me=="function"?[me]:me))})(hn,Yt.API.events):b[Rr]=Yt.API[Rr]);function fi(x){return Dt[x].mediaBox.topRightX-Dt[x].mediaBox.bottomLeftX}function wn(x,L){Dt[x].mediaBox.topRightX=L+Dt[x].mediaBox.bottomLeftX}function wa(x){return Dt[x].mediaBox.topRightY-Dt[x].mediaBox.bottomLeftY}function Fn(x,L){Dt[x].mediaBox.topRightY=L+Dt[x].mediaBox.bottomLeftY}var Ei=b.getPageWidth=function(x){return fi(x=x||G)/se},nr=b.setPageWidth=function(x,L){wn(x,L*se)},hi=b.getPageHeight=function(x){return wa(x=x||G)/se},Ka=b.setPageHeight=function(x,L){Fn(x,L*se)};return b.internal={pdfEscape:dr,getStyle:qr,getFont:_a,getFontSize:gt,getCharSpace:is,getTextColor:tr,getLineHeight:Ja,getLineHeightFactor:qs,getLineWidth:aa,write:mt,getHorizontalCoordinate:br,getVerticalCoordinate:$i,getCoordinateString:$s,getVerticalCoordinateString:ks,collections:{},newObject:zn,newAdditionalObject:ws,newObjectDeferred:cr,newObjectDeferredBegin:Vn,getFilters:Ca,putStream:Pa,events:hn,scaleFactor:se,pageSize:{getWidth:function(){return Ei(G)},setWidth:function(x){nr(G,x)},getHeight:function(){return hi(G)},setHeight:function(x){Ka(G,x)}},encryptionOptions:j,encryption:Mr,getEncryptor:function(x){return j!==null?Mr.encryptor(x,0):function(L){return L}},output:Wi,getNumberOfPages:Wr,get pages(){return _e},out:Y,f2:B,f3:$,getPageInfo:Ga,getPageInfoByObjId:js,getCurrentPageInfo:Io,getPDFVersion:M,Point:ui,Rectangle:Hi,Matrix:St,hasHotfix:Ya},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Ei(G)},set:function(x){nr(G,x)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return hi(G)},set:function(x){Ka(G,x)},enumerable:!0,configurable:!0}),(function(x){for(var L=0,re=Ct.length;L<re;L++){var me=qa.call(this,x[L][0],x[L][1],x[L][2],Ct[L][3],!0);A===!1&&(R[me]=!0);var Ae=x[L][0].split("-");rs({id:me,fontName:Ae[0],fontStyle:Ae[1]||""})}hn.publish("addFonts",{fonts:He,dictionary:ct})}).call(b,Ct),qe="F1",$a(c,r),hn.publish("initialized"),b}gc.prototype.lsbFirstWord=function(i){return String.fromCharCode(255&i,i>>8&255,i>>16&255,i>>24&255)},gc.prototype.toHexString=function(i){return i.split("").map(function(a){return("0"+(255&a.charCodeAt(0)).toString(16)).slice(-2)}).join("")},gc.prototype.hexToBytes=function(i){for(var a=[],r=0;r<i.length;r+=2)a.push(String.fromCharCode(parseInt(i.substr(r,2),16)));return a.join("")},gc.prototype.processOwnerPassword=function(i,a){return jf(wf(a).substr(0,5),i)},gc.prototype.encryptor=function(i,a){var r=wf(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&a,a>>8&255)).substr(0,10);return function(o){return jf(r,o)}},Yd.prototype.equals=function(i){var a,r="id,objectNumber,equals";if(!i||er(i)!==er(this))return!1;var o=0;for(a in this)if(!(r.indexOf(a)>=0)){if(this.hasOwnProperty(a)&&!i.hasOwnProperty(a)||this[a]!==i[a])return!1;o++}for(a in i)i.hasOwnProperty(a)&&r.indexOf(a)<0&&o--;return o===0},Yt.API={events:[]},Yt.version="3.0.4";var zr=Yt.API,Df=1,Kl=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},pc=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},gn=function(i){return i.toFixed(2)},pl=function(i){return i.toFixed(5)};zr.__acroform__={};var ns=function(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i},sm=function(i){return i*Df},Co=function(i){var a=new w0,r=Bt.internal.getHeight(i)||0,o=Bt.internal.getWidth(i)||0;return a.BBox=[0,0,Number(gn(o)),Number(gn(r))],a},$x=zr.__acroform__.setBit=function(i,a){if(i=i||0,a=a||0,isNaN(i)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|1<<a},Hx=zr.__acroform__.clearBit=function(i,a){if(i=i||0,a=a||0,isNaN(i)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&~(1<<a)},Vx=zr.__acroform__.getBit=function(i,a){if(isNaN(i)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return i&1<<a?1:0},Qr=zr.__acroform__.getBitForPdf=function(i,a){if(isNaN(i)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Vx(i,a-1)},Xr=zr.__acroform__.setBitForPdf=function(i,a){if(isNaN(i)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return $x(i,a-1)},Zr=zr.__acroform__.clearBitForPdf=function(i,a){if(isNaN(i)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Hx(i,a-1)},Yx=zr.__acroform__.calculateCoordinates=function(i,a){var r=a.internal.getHorizontalCoordinate,o=a.internal.getVerticalCoordinate,c=i[0],l=i[1],g=i[2],p=i[3],m={};return m.lowerLeft_X=r(c)||0,m.lowerLeft_Y=o(l+p)||0,m.upperRight_X=r(c+g)||0,m.upperRight_Y=o(l)||0,[Number(gn(m.lowerLeft_X)),Number(gn(m.lowerLeft_Y)),Number(gn(m.upperRight_X)),Number(gn(m.upperRight_Y))]},Gx=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var a=[],r=i._V||i.DV,o=Sf(i,r),c=i.scope.internal.getFont(i.fontName,i.fontStyle).id;a.push("/Tx BMC"),a.push("q"),a.push("BT"),a.push(i.scope.__private__.encodeColorString(i.color)),a.push("/"+c+" "+gn(o.fontSize)+" Tf"),a.push("1 0 0 1 0 0 Tm"),a.push(o.text),a.push("ET"),a.push("Q"),a.push("EMC");var l=Co(i);return l.scope=i.scope,l.stream=a.join(`
`),l}},Sf=function(i,a){var r=i.fontSize===0?i.maxFontSize:i.fontSize,o={text:"",fontSize:""},c=(a=(a=a.substr(0,1)=="("?a.substr(1):a).substr(a.length-1)==")"?a.substr(0,a.length-1):a).split(" ");c=i.multiline?c.map(function(B){return B.split(`
`)}):c.map(function(B){return[B]});var l=r,g=Bt.internal.getHeight(i)||0;g=g<0?-g:g;var p=Bt.internal.getWidth(i)||0;p=p<0?-p:p;var m=function(B,$,ee){if(B+1<c.length){var ie=$+" "+c[B+1][0];return Rd(ie,i,ee).width<=p-4}return!1};l++;e:for(;l>0;){a="",l--;var v,j,A=Rd("3",i,l).height,R=i.multiline?g-l:(g-A)/2,b=R+=2,z=0,M=0,E=0;if(l<=0){a=`(...) Tj
`,a+="% Width of Text: "+Rd(a,i,l=12).width+", FieldWidth:"+p+`
`;break}for(var P="",q=0,K=0;K<c.length;K++)if(c.hasOwnProperty(K)){var H=!1;if(c[K].length!==1&&E!==c[K].length-1){if((A+2)*(q+2)+2>g)continue e;P+=c[K][E],H=!0,M=K,K--}else{P=(P+=c[K][E]+" ").substr(P.length-1)==" "?P.substr(0,P.length-1):P;var fe=parseInt(K),de=m(fe,P,l),Pe=K>=c.length-1;if(de&&!Pe){P+=" ",E=0;continue}if(de||Pe){if(Pe)M=fe;else if(i.multiline&&(A+2)*(q+2)+2>g)continue e}else{if(!i.multiline||(A+2)*(q+2)+2>g)continue e;M=fe}}for(var xe="",Z=z;Z<=M;Z++){var ge=c[Z];if(i.multiline){if(Z===M){xe+=ge[E]+" ",E=(E+1)%ge.length;continue}if(Z===z){xe+=ge[ge.length-1]+" ";continue}}xe+=ge[0]+" "}switch(xe=xe.substr(xe.length-1)==" "?xe.substr(0,xe.length-1):xe,j=Rd(xe,i,l).width,i.textAlign){case"right":v=p-j-2;break;case"center":v=(p-j)/2;break;default:v=2}a+=gn(v)+" "+gn(b)+` Td
`,a+="("+Kl(xe)+`) Tj
`,a+=-gn(v)+` 0 Td
`,b=-(l+2),j=0,z=H?M:M+1,q++,P=""}break}return o.text=a,o.fontSize=l,o},Rd=function(i,a,r){var o=a.scope.internal.getFont(a.fontName,a.fontStyle),c=a.scope.getStringUnitWidth(i,{font:o,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:a.scope.getStringUnitWidth("3",{font:o,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:c}},Jx={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Kx=function(i,a){var r={type:"reference",object:i};a.internal.getPageInfo(i.page).pageContext.annotations.find(function(o){return o.type===r.type&&o.object===r.object})===void 0&&a.internal.getPageInfo(i.page).pageContext.annotations.push(r)},Qx=function(i,a){if(a.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(mo.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(Jx)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Df=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new j0,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var o=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var c in o)if(o.hasOwnProperty(c)){var l=o[c];l.objId=void 0,l.hasAnnotation&&Kx(l,r)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(r){(function(o,c){var l=!o;for(var g in o||(c.internal.newObjectDeferredBegin(c.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),c.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),o=o||c.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(o.hasOwnProperty(g)){var p=o[g],m=[],v=p.Rect;if(p.Rect&&(p.Rect=Yx(p.Rect,c)),c.internal.newObjectDeferredBegin(p.objId,!0),p.DA=Bt.createDefaultAppearanceStream(p),er(p)==="object"&&typeof p.getKeyValueListForStream=="function"&&(m=p.getKeyValueListForStream()),p.Rect=v,p.hasAppearanceStream&&!p.appearanceStreamContent){var j=Gx(p);m.push({key:"AP",value:"<</N "+j+">>"}),c.internal.acroformPlugin.xForms.push(j)}if(p.appearanceStreamContent){var A="";for(var R in p.appearanceStreamContent)if(p.appearanceStreamContent.hasOwnProperty(R)){var b=p.appearanceStreamContent[R];if(A+="/"+R+" ",A+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var g in b)if(b.hasOwnProperty(g)){var z=b[g];typeof z=="function"&&(z=z.call(c,p)),A+="/"+g+" "+z+" ",c.internal.acroformPlugin.xForms.indexOf(z)>=0||c.internal.acroformPlugin.xForms.push(z)}}else typeof(z=b)=="function"&&(z=z.call(c,p)),A+="/"+g+" "+z,c.internal.acroformPlugin.xForms.indexOf(z)>=0||c.internal.acroformPlugin.xForms.push(z);A+=">>"}m.push({key:"AP",value:`<<
`+A+">>"})}c.internal.putStream({additionalKeyValues:m,objectId:p.objId}),c.internal.out("endobj")}l&&(function(M,E){for(var P in M)if(M.hasOwnProperty(P)){var q=P,K=M[P];E.internal.newObjectDeferredBegin(K.objId,!0),er(K)==="object"&&typeof K.putStream=="function"&&K.putStream(),delete M[q]}})(c.internal.acroformPlugin.xForms,c)})(r,i)}),i.internal.acroformPlugin.isInitialized=!0}},b0=zr.__acroform__.arrayToPdfArray=function(i,a,r){var o=function(g){return g};if(Array.isArray(i)){for(var c="[",l=0;l<i.length;l++)switch(l!==0&&(c+=" "),er(i[l])){case"boolean":case"number":case"object":c+=i[l].toString();break;case"string":i[l].substr(0,1)!=="/"?(a!==void 0&&r&&(o=r.internal.getEncryptor(a)),c+="("+Kl(o(i[l].toString()))+")"):c+=i[l].toString()}return c+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},af=function(i,a,r){var o=function(c){return c};return a!==void 0&&r&&(o=r.internal.getEncryptor(a)),(i=i||"").toString(),"("+Kl(o(i))+")"},Po=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Po.prototype.toString=function(){return this.objId+" 0 R"},Po.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},Po.prototype.getKeyValueListForStream=function(){var i=[],a=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var r in a)if(Object.getOwnPropertyDescriptor(this,a[r]).configurable===!1){var o=a[r],c=this[o];c&&(Array.isArray(c)?i.push({key:o,value:b0(c,this.objId,this.scope)}):c instanceof Po?(c.scope=this.scope,i.push({key:o,value:c.objId+" 0 R"})):typeof c!="function"&&i.push({key:o,value:c}))}return i};var w0=function(){Po.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,a=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return a},set:function(r){a=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){i=r.trim()},get:function(){return i||null}})};ns(w0,Po);var j0=function(){Po.call(this);var i,a=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return a.length>0?a:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return a}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var r=function(o){return o};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Kl(r(i))+")"}},set:function(r){i=r}})};ns(j0,Po);var mo=function i(){Po.call(this);var a=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return a},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute F supplied.');a=P}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Qr(a,3)},set:function(P){P?this.F=Xr(a,3):this.F=Zr(a,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute Ff supplied.');r=P}});var o=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(o.length!==0)return o},set:function(P){o=P!==void 0?P:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[0])?0:o[0]},set:function(P){o[0]=P}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[1])?0:o[1]},set:function(P){o[1]=P}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[2])?0:o[2]},set:function(P){o[2]=P}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[3])?0:o[3]},set:function(P){o[3]=P}});var c="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return c},set:function(P){switch(P){case"/Btn":case"/Tx":case"/Ch":case"/Sig":c=P;break;default:throw new Error('Invalid value "'+P+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof Gd)return;l="FieldObject"+i.FieldNum++}var P=function(q){return q};return this.scope&&(P=this.scope.internal.getEncryptor(this.objId)),"("+Kl(P(l))+")"},set:function(P){l=P.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(P){l=P}});var g="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return g},set:function(P){g=P}});var p="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return p},set:function(P){p=P}});var m=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return m},set:function(P){m=P}});var v=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return v===void 0?50/Df:v},set:function(P){v=P}});var j="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return j},set:function(P){j=P}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof Gd||this instanceof ql))return af(A,this.objId,this.scope)},set:function(P){P=P.toString(),A=P}});var R=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(R)return this instanceof za==0?af(R,this.objId,this.scope):R},set:function(P){P=P.toString(),R=this instanceof za==0?P.substr(0,1)==="("?pc(P.substr(1,P.length-2)):pc(P):P}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof za==1?pc(R.substr(1,R.length-1)):R},set:function(P){P=P.toString(),R=this instanceof za==1?"/"+P:P}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(P){this.V=P}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof za==0?af(b,this.objId,this.scope):b},set:function(P){P=P.toString(),b=this instanceof za==0?P.substr(0,1)==="("?pc(P.substr(1,P.length-2)):pc(P):P}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof za==1?pc(b.substr(1,b.length-1)):b},set:function(P){P=P.toString(),b=this instanceof za==1?"/"+P:P}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var z,M=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return M},set:function(P){P=!!P,M=P}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(z)return z},set:function(P){z=P}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,1)},set:function(P){P?this.Ff=Xr(this.Ff,1):this.Ff=Zr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,2)},set:function(P){P?this.Ff=Xr(this.Ff,2):this.Ff=Zr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,3)},set:function(P){P?this.Ff=Xr(this.Ff,3):this.Ff=Zr(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(P){if([0,1,2].indexOf(P)===-1)throw new Error('Invalid value "'+P+'" for attribute Q supplied.');E=P}}),Object.defineProperty(this,"textAlign",{get:function(){var P;switch(E){case 0:default:P="left";break;case 1:P="center";break;case 2:P="right"}return P},configurable:!0,enumerable:!0,set:function(P){switch(P){case"right":case 2:E=2;break;case"center":case 1:E=1;break;default:E=0}}})};ns(mo,Po);var vc=function(){mo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(r){i=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(r){i=r}});var a=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return b0(a,this.objId,this.scope)},set:function(r){var o,c;c=[],typeof(o=r)=="string"&&(c=(function(l,g,p){p||(p=1);for(var m,v=[];m=g.exec(l);)v.push(m[p]);return v})(o,/\((.*?)\)/g)),a=c}}),this.getOptions=function(){return a},this.setOptions=function(r){a=r,this.sort&&a.sort()},this.addOption=function(r){r=(r=r||"").toString(),a.push(r),this.sort&&a.sort()},this.removeOption=function(r,o){for(o=o||!1,r=(r=r||"").toString();a.indexOf(r)!==-1&&(a.splice(a.indexOf(r),1),o!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,18)},set:function(r){r?this.Ff=Xr(this.Ff,18):this.Ff=Zr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Xr(this.Ff,19):this.Ff=Zr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,20)},set:function(r){r?(this.Ff=Xr(this.Ff,20),a.sort()):this.Ff=Zr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,22)},set:function(r){r?this.Ff=Xr(this.Ff,22):this.Ff=Zr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,23)},set:function(r){r?this.Ff=Xr(this.Ff,23):this.Ff=Zr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,27)},set:function(r){r?this.Ff=Xr(this.Ff,27):this.Ff=Zr(this.Ff,27)}}),this.hasAppearanceStream=!1};ns(vc,mo);var bc=function(){vc.call(this),this.fontName="helvetica",this.combo=!1};ns(bc,vc);var wc=function(){bc.call(this),this.combo=!0};ns(wc,bc);var zd=function(){wc.call(this),this.edit=!0};ns(zd,wc);var za=function(){mo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,15)},set:function(r){r?this.Ff=Xr(this.Ff,15):this.Ff=Zr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,16)},set:function(r){r?this.Ff=Xr(this.Ff,16):this.Ff=Zr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,17)},set:function(r){r?this.Ff=Xr(this.Ff,17):this.Ff=Zr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,26)},set:function(r){r?this.Ff=Xr(this.Ff,26):this.Ff=Zr(this.Ff,26)}});var i,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(l){return l};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(a).length!==0){var o,c=[];for(o in c.push("<<"),a)c.push("/"+o+" ("+Kl(r(a[o]))+")");return c.push(">>"),c.join(`
`)}},set:function(r){er(r)==="object"&&(a=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(r){typeof r=="string"&&(a.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(r){i=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(r){i="/"+r}})};ns(za,mo);var Ud=function(){za.call(this),this.pushButton=!0};ns(Ud,za);var jc=function(){za.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(a){i=a!==void 0?a:[]}})};ns(jc,za);var Gd=function(){var i,a;mo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(c){i=c}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return a},set:function(c){a=c}});var r,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var c=function(p){return p};this.scope&&(c=this.scope.internal.getEncryptor(this.objId));var l,g=[];for(l in g.push("<<"),o)g.push("/"+l+" ("+Kl(c(o[l]))+")");return g.push(">>"),g.join(`
`)},set:function(c){er(c)==="object"&&(o=c)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(c){typeof c=="string"&&(o.CA=c)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(c){r=c}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(c){r="/"+c}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ns(Gd,mo),jc.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var a in this.Kids)if(this.Kids.hasOwnProperty(a)){var r=this.Kids[a];r.appearanceStreamContent=i.createAppearanceStream(r.optionName),r.caption=i.getCA()}},jc.prototype.createOption=function(i){var a=new Gd;return a.Parent=this,a.optionName=i,this.Kids.push(a),Xx.call(this.scope,a),a};var Wd=function(){za.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Bt.CheckBox.createAppearanceStream()};ns(Wd,za);var ql=function(){mo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,13)},set:function(a){a?this.Ff=Xr(this.Ff,13):this.Ff=Zr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,21)},set:function(a){a?this.Ff=Xr(this.Ff,21):this.Ff=Zr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,23)},set:function(a){a?this.Ff=Xr(this.Ff,23):this.Ff=Zr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,24)},set:function(a){a?this.Ff=Xr(this.Ff,24):this.Ff=Zr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,25)},set:function(a){a?this.Ff=Xr(this.Ff,25):this.Ff=Zr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,26)},set:function(a){a?this.Ff=Xr(this.Ff,26):this.Ff=Zr(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(a){i=a}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(a){Number.isInteger(a)&&(i=a)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ns(ql,mo);var qd=function(){ql.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Qr(this.Ff,14)},set:function(i){i?this.Ff=Xr(this.Ff,14):this.Ff=Zr(this.Ff,14)}}),this.password=!0};ns(qd,ql);var Bt={CheckBox:{createAppearanceStream:function(){return{N:{On:Bt.CheckBox.YesNormal},D:{On:Bt.CheckBox.YesPushDown,Off:Bt.CheckBox.OffPushDown}}},YesPushDown:function(i){var a=Co(i);a.scope=i.scope;var r=[],o=i.scope.internal.getFont(i.fontName,i.fontStyle).id,c=i.scope.__private__.encodeColorString(i.color),l=Sf(i,i.caption);return r.push("0.749023 g"),r.push("0 0 "+gn(Bt.internal.getWidth(i))+" "+gn(Bt.internal.getHeight(i))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+o+" "+gn(l.fontSize)+" Tf "+c),r.push("BT"),r.push(l.text),r.push("ET"),r.push("Q"),r.push("EMC"),a.stream=r.join(`
`),a},YesNormal:function(i){var a=Co(i);a.scope=i.scope;var r=i.scope.internal.getFont(i.fontName,i.fontStyle).id,o=i.scope.__private__.encodeColorString(i.color),c=[],l=Bt.internal.getHeight(i),g=Bt.internal.getWidth(i),p=Sf(i,i.caption);return c.push("1 g"),c.push("0 0 "+gn(g)+" "+gn(l)+" re"),c.push("f"),c.push("q"),c.push("0 0 1 rg"),c.push("0 0 "+gn(g-1)+" "+gn(l-1)+" re"),c.push("W"),c.push("n"),c.push("0 g"),c.push("BT"),c.push("/"+r+" "+gn(p.fontSize)+" Tf "+o),c.push(p.text),c.push("ET"),c.push("Q"),a.stream=c.join(`
`),a},OffPushDown:function(i){var a=Co(i);a.scope=i.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+gn(Bt.internal.getWidth(i))+" "+gn(Bt.internal.getHeight(i))+" re"),r.push("f"),a.stream=r.join(`
`),a}},RadioButton:{Circle:{createAppearanceStream:function(i){var a={D:{Off:Bt.RadioButton.Circle.OffPushDown},N:{}};return a.N[i]=Bt.RadioButton.Circle.YesNormal,a.D[i]=Bt.RadioButton.Circle.YesPushDown,a},getCA:function(){return"l"},YesNormal:function(i){var a=Co(i);a.scope=i.scope;var r=[],o=Bt.internal.getWidth(i)<=Bt.internal.getHeight(i)?Bt.internal.getWidth(i)/4:Bt.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var c=Bt.internal.Bezier_C,l=Number((o*c).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+pl(Bt.internal.getWidth(i)/2)+" "+pl(Bt.internal.getHeight(i)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),r.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),r.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),r.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a},YesPushDown:function(i){var a=Co(i);a.scope=i.scope;var r=[],o=Bt.internal.getWidth(i)<=Bt.internal.getHeight(i)?Bt.internal.getWidth(i)/4:Bt.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var c=Number((2*o).toFixed(5)),l=Number((c*Bt.internal.Bezier_C).toFixed(5)),g=Number((o*Bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+pl(Bt.internal.getWidth(i)/2)+" "+pl(Bt.internal.getHeight(i)/2)+" cm"),r.push(c+" 0 m"),r.push(c+" "+l+" "+l+" "+c+" 0 "+c+" c"),r.push("-"+l+" "+c+" -"+c+" "+l+" -"+c+" 0 c"),r.push("-"+c+" -"+l+" -"+l+" -"+c+" 0 -"+c+" c"),r.push(l+" -"+c+" "+c+" -"+l+" "+c+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+pl(Bt.internal.getWidth(i)/2)+" "+pl(Bt.internal.getHeight(i)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+g+" "+g+" "+o+" 0 "+o+" c"),r.push("-"+g+" "+o+" -"+o+" "+g+" -"+o+" 0 c"),r.push("-"+o+" -"+g+" -"+g+" -"+o+" 0 -"+o+" c"),r.push(g+" -"+o+" "+o+" -"+g+" "+o+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a},OffPushDown:function(i){var a=Co(i);a.scope=i.scope;var r=[],o=Bt.internal.getWidth(i)<=Bt.internal.getHeight(i)?Bt.internal.getWidth(i)/4:Bt.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var c=Number((2*o).toFixed(5)),l=Number((c*Bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+pl(Bt.internal.getWidth(i)/2)+" "+pl(Bt.internal.getHeight(i)/2)+" cm"),r.push(c+" 0 m"),r.push(c+" "+l+" "+l+" "+c+" 0 "+c+" c"),r.push("-"+l+" "+c+" -"+c+" "+l+" -"+c+" 0 c"),r.push("-"+c+" -"+l+" -"+l+" -"+c+" 0 -"+c+" c"),r.push(l+" -"+c+" "+c+" -"+l+" "+c+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a}},Cross:{createAppearanceStream:function(i){var a={D:{Off:Bt.RadioButton.Cross.OffPushDown},N:{}};return a.N[i]=Bt.RadioButton.Cross.YesNormal,a.D[i]=Bt.RadioButton.Cross.YesPushDown,a},getCA:function(){return"8"},YesNormal:function(i){var a=Co(i);a.scope=i.scope;var r=[],o=Bt.internal.calculateCross(i);return r.push("q"),r.push("1 1 "+gn(Bt.internal.getWidth(i)-2)+" "+gn(Bt.internal.getHeight(i)-2)+" re"),r.push("W"),r.push("n"),r.push(gn(o.x1.x)+" "+gn(o.x1.y)+" m"),r.push(gn(o.x2.x)+" "+gn(o.x2.y)+" l"),r.push(gn(o.x4.x)+" "+gn(o.x4.y)+" m"),r.push(gn(o.x3.x)+" "+gn(o.x3.y)+" l"),r.push("s"),r.push("Q"),a.stream=r.join(`
`),a},YesPushDown:function(i){var a=Co(i);a.scope=i.scope;var r=Bt.internal.calculateCross(i),o=[];return o.push("0.749023 g"),o.push("0 0 "+gn(Bt.internal.getWidth(i))+" "+gn(Bt.internal.getHeight(i))+" re"),o.push("f"),o.push("q"),o.push("1 1 "+gn(Bt.internal.getWidth(i)-2)+" "+gn(Bt.internal.getHeight(i)-2)+" re"),o.push("W"),o.push("n"),o.push(gn(r.x1.x)+" "+gn(r.x1.y)+" m"),o.push(gn(r.x2.x)+" "+gn(r.x2.y)+" l"),o.push(gn(r.x4.x)+" "+gn(r.x4.y)+" m"),o.push(gn(r.x3.x)+" "+gn(r.x3.y)+" l"),o.push("s"),o.push("Q"),a.stream=o.join(`
`),a},OffPushDown:function(i){var a=Co(i);a.scope=i.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+gn(Bt.internal.getWidth(i))+" "+gn(Bt.internal.getHeight(i))+" re"),r.push("f"),a.stream=r.join(`
`),a}}},createDefaultAppearanceStream:function(i){var a=i.scope.internal.getFont(i.fontName,i.fontStyle).id,r=i.scope.__private__.encodeColorString(i.color);return"/"+a+" "+i.fontSize+" Tf "+r}};Bt.internal={Bezier_C:.551915024494,calculateCross:function(i){var a=Bt.internal.getWidth(i),r=Bt.internal.getHeight(i),o=Math.min(a,r);return{x1:{x:(a-o)/2,y:(r-o)/2+o},x2:{x:(a-o)/2+o,y:(r-o)/2},x3:{x:(a-o)/2,y:(r-o)/2},x4:{x:(a-o)/2+o,y:(r-o)/2+o}}}},Bt.internal.getWidth=function(i){var a=0;return er(i)==="object"&&(a=sm(i.Rect[2])),a},Bt.internal.getHeight=function(i){var a=0;return er(i)==="object"&&(a=sm(i.Rect[3])),a};var Xx=zr.addField=function(i){if(Qx(this,i),!(i instanceof mo))throw new Error("Invalid argument passed to jsPDF.addField.");var a;return(a=i).scope.internal.acroformPlugin.printedOut&&(a.scope.internal.acroformPlugin.printedOut=!1,a.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),a.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(a),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};zr.AcroFormChoiceField=vc,zr.AcroFormListBox=bc,zr.AcroFormComboBox=wc,zr.AcroFormEditBox=zd,zr.AcroFormButton=za,zr.AcroFormPushButton=Ud,zr.AcroFormRadioButton=jc,zr.AcroFormCheckBox=Wd,zr.AcroFormTextField=ql,zr.AcroFormPasswordField=qd,zr.AcroFormAppearance=Bt,zr.AcroForm={ChoiceField:vc,ListBox:bc,ComboBox:wc,EditBox:zd,Button:za,PushButton:Ud,RadioButton:jc,CheckBox:Wd,TextField:ql,PasswordField:qd,Appearance:Bt},Yt.AcroForm={ChoiceField:vc,ListBox:bc,ComboBox:wc,EditBox:zd,Button:za,PushButton:Ud,RadioButton:jc,CheckBox:Wd,TextField:ql,PasswordField:qd,Appearance:Bt};Yt.AcroForm;function S0(i){return i.reduce(function(a,r,o){return a[r]=o,a},{})}(function(i){var a="addImage_";i.__addimage__={};var r="UNKNOWN",o={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},c=i.__addimage__.getImageFileTypeByImageData=function(B,$){var ee,ie,Ne,Re,Me,ue=r;if(($=$||r)==="RGBA"||B.data!==void 0&&B.data instanceof Uint8ClampedArray&&"height"in B&&"width"in B)return"RGBA";if(de(B))for(Me in o)for(Ne=o[Me],ee=0;ee<Ne.length;ee+=1){for(Re=!0,ie=0;ie<Ne[ee].length;ie+=1)if(Ne[ee][ie]!==void 0&&Ne[ee][ie]!==B[ie]){Re=!1;break}if(Re===!0){ue=Me;break}}else for(Me in o)for(Ne=o[Me],ee=0;ee<Ne.length;ee+=1){for(Re=!0,ie=0;ie<Ne[ee].length;ie+=1)if(Ne[ee][ie]!==void 0&&Ne[ee][ie]!==B.charCodeAt(ie)){Re=!1;break}if(Re===!0){ue=Me;break}}return ue===r&&$!==r&&(ue=$),ue},l=function B($){for(var ee=this.internal.write,ie=this.internal.putStream,Ne=(0,this.internal.getFilters)();Ne.indexOf("FlateEncode")!==-1;)Ne.splice(Ne.indexOf("FlateEncode"),1);$.objectId=this.internal.newObject();var Re=[];if(Re.push({key:"Type",value:"/XObject"}),Re.push({key:"Subtype",value:"/Image"}),Re.push({key:"Width",value:$.width}),Re.push({key:"Height",value:$.height}),$.colorSpace===P.INDEXED?Re.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+($.palette.length/3-1)+" "+("sMask"in $&&$.sMask!==void 0?$.objectId+2:$.objectId+1)+" 0 R]"}):(Re.push({key:"ColorSpace",value:"/"+$.colorSpace}),$.colorSpace===P.DEVICE_CMYK&&Re.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Re.push({key:"BitsPerComponent",value:$.bitsPerComponent}),"decodeParameters"in $&&$.decodeParameters!==void 0&&Re.push({key:"DecodeParms",value:"<<"+$.decodeParameters+">>"}),"transparency"in $&&Array.isArray($.transparency)&&$.transparency.length>0){for(var Me="",ue=0,Ce=$.transparency.length;ue<Ce;ue++)Me+=$.transparency[ue]+" "+$.transparency[ue]+" ";Re.push({key:"Mask",value:"["+Me+"]"})}$.sMask!==void 0&&Re.push({key:"SMask",value:$.objectId+1+" 0 R"});var Le=$.filter!==void 0?["/"+$.filter]:void 0;if(ie({data:$.data,additionalKeyValues:Re,alreadyAppliedFilters:Le,objectId:$.objectId}),ee("endobj"),"sMask"in $&&$.sMask!==void 0){var Q,C=(Q=$.sMaskBitsPerComponent)!==null&&Q!==void 0?Q:$.bitsPerComponent,G={width:$.width,height:$.height,colorSpace:"DeviceGray",bitsPerComponent:C,data:$.sMask};"filter"in $&&(G.decodeParameters="/Predictor ".concat($.predictor," /Colors 1 /BitsPerComponent ").concat(C," /Columns ").concat($.width),G.filter=$.filter),B.call(this,G)}if($.colorSpace===P.INDEXED){var J=this.internal.newObject();ie({data:xe(new Uint8Array($.palette)),objectId:J}),ee("endobj")}},g=function(){var B=this.internal.collections[a+"images"];for(var $ in B)l.call(this,B[$])},p=function(){var B,$=this.internal.collections[a+"images"],ee=this.internal.write;for(var ie in $)ee("/I"+(B=$[ie]).index,B.objectId,"0","R")},m=function(){this.internal.collections[a+"images"]||(this.internal.collections[a+"images"]={},this.internal.events.subscribe("putResources",g),this.internal.events.subscribe("putXobjectDict",p))},v=function(){var B=this.internal.collections[a+"images"];return m.call(this),B},j=function(){return Object.keys(this.internal.collections[a+"images"]).length},A=function(B){return typeof i["process"+B.toUpperCase()]=="function"},R=function(B){return er(B)==="object"&&B.nodeType===1},b=function(B,$){if(B.nodeName==="IMG"&&B.hasAttribute("src")){var ee=""+B.getAttribute("src");if(ee.indexOf("data:image/")===0)return Bd(unescape(ee).split("base64,").pop());var ie=i.loadFile(ee,!0);if(ie!==void 0)return ie}if(B.nodeName==="CANVAS"){if(B.width===0||B.height===0)throw new Error("Given canvas must have data. Canvas width: "+B.width+", height: "+B.height);var Ne;switch($){case"PNG":Ne="image/png";break;case"WEBP":Ne="image/webp";break;default:Ne="image/jpeg"}return Bd(B.toDataURL(Ne,1).split("base64,").pop())}},z=function(B){var $=this.internal.collections[a+"images"];if($){for(var ee in $)if(B===$[ee].alias)return $[ee]}},M=function(B,$,ee){return B||$||(B=-96,$=-96),B<0&&(B=-1*ee.width*72/B/this.internal.scaleFactor),$<0&&($=-1*ee.height*72/$/this.internal.scaleFactor),B===0&&(B=$*ee.width/ee.height),$===0&&($=B*ee.height/ee.width),[B,$]},E=function(B,$,ee,ie,Ne,Re){var Me=M.call(this,ee,ie,Ne),ue=this.internal.getCoordinateString,Ce=this.internal.getVerticalCoordinateString,Le=v.call(this);if(ee=Me[0],ie=Me[1],Le[Ne.index]=Ne,Re){Re*=Math.PI/180;var Q=Math.cos(Re),C=Math.sin(Re),G=function(oe){return oe.toFixed(4)},J=[G(Q),G(C),G(-1*C),G(Q),0,0,"cm"]}this.internal.write("q"),Re?(this.internal.write([1,"0","0",1,ue(B),Ce($+ie),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([ue(ee),"0","0",ue(ie),"0","0","cm"].join(" "))):this.internal.write([ue(ee),"0","0",ue(ie),ue(B),Ce($+ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ne.index+" Do"),this.internal.write("Q")},P=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var q=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},K=i.__addimage__.sHashCode=function(B){var $,ee,ie=0;if(typeof B=="string")for(ee=B.length,$=0;$<ee;$++)ie=(ie<<5)-ie+B.charCodeAt($),ie|=0;else if(de(B))for(ee=B.byteLength/2,$=0;$<ee;$++)ie=(ie<<5)-ie+B[$],ie|=0;return ie},H=i.__addimage__.validateStringAsBase64=function(B){(B=B||"").toString().trim();var $=!0;return B.length===0&&($=!1),B.length%4!=0&&($=!1),/^[A-Za-z0-9+/]+$/.test(B.substr(0,B.length-2))===!1&&($=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(B.substr(-2))===!1&&($=!1),$},fe=i.__addimage__.extractImageFromDataUrl=function(B){if(B==null||!(B=B.trim()).startsWith("data:"))return null;var $=B.indexOf(",");return $<0?null:B.substring(0,$).trim().endsWith("base64")?B.substring($+1):null};i.__addimage__.isArrayBuffer=function(B){return B instanceof ArrayBuffer};var de=i.__addimage__.isArrayBufferView=function(B){return B instanceof Int8Array||B instanceof Uint8Array||B instanceof Uint8ClampedArray||B instanceof Int16Array||B instanceof Uint16Array||B instanceof Int32Array||B instanceof Uint32Array||B instanceof Float32Array||B instanceof Float64Array},Pe=i.__addimage__.binaryStringToUint8Array=function(B){for(var $=B.length,ee=new Uint8Array($),ie=0;ie<$;ie++)ee[ie]=B.charCodeAt(ie);return ee},xe=i.__addimage__.arrayBufferToBinaryString=function(B){for(var $="",ee=de(B)?B:new Uint8Array(B),ie=0;ie<ee.length;ie+=8192)$+=String.fromCharCode.apply(null,ee.subarray(ie,ie+8192));return $};i.addImage=function(){var B,$,ee,ie,Ne,Re,Me,ue,Ce;if(typeof arguments[1]=="number"?($=r,ee=arguments[1],ie=arguments[2],Ne=arguments[3],Re=arguments[4],Me=arguments[5],ue=arguments[6],Ce=arguments[7]):($=arguments[1],ee=arguments[2],ie=arguments[3],Ne=arguments[4],Re=arguments[5],Me=arguments[6],ue=arguments[7],Ce=arguments[8]),er(B=arguments[0])==="object"&&!R(B)&&"imageData"in B){var Le=B;B=Le.imageData,$=Le.format||$||r,ee=Le.x||ee||0,ie=Le.y||ie||0,Ne=Le.w||Le.width||Ne,Re=Le.h||Le.height||Re,Me=Le.alias||Me,ue=Le.compression||ue,Ce=Le.rotation||Le.angle||Ce}var Q=this.internal.getFilters();if(ue===void 0&&Q.indexOf("FlateEncode")!==-1&&(ue="SLOW"),isNaN(ee)||isNaN(ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");m.call(this);var C=Z.call(this,B,$,Me,ue);return E.call(this,ee,ie,Ne,Re,C,Ce),this};var Z=function(B,$,ee,ie){var Ne,Re,Me;if(typeof B=="string"&&c(B)===r){B=unescape(B);var ue=ge(B,!1);(ue!==""||(ue=i.loadFile(B,!0))!==void 0)&&(B=ue)}if(R(B)&&(B=b(B,$)),$=c(B,$),!A($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(((Me=ee)==null||Me.length===0)&&(ee=(function(Ce){return typeof Ce=="string"||de(Ce)?K(Ce):de(Ce.data)?K(Ce.data):null})(B)),(Ne=z.call(this,ee))||(B instanceof Uint8Array||$==="RGBA"||(Re=B,B=Pe(B)),Ne=this["process"+$.toUpperCase()](B,j.call(this),ee,(function(Ce){return Ce&&typeof Ce=="string"&&(Ce=Ce.toUpperCase()),Ce in i.image_compression?Ce:q.NONE})(ie),Re)),!Ne)throw new Error("An unknown error occurred whilst processing the image.");return Ne},ge=i.__addimage__.convertBase64ToBinaryString=function(B,$){$=typeof $!="boolean"||$;var ee,ie="";if(typeof B=="string"){var Ne;ee=(Ne=fe(B))!==null&&Ne!==void 0?Ne:B;try{ie=Bd(ee)}catch(Re){if($)throw H(ee)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Re.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ie};i.getImageProperties=function(B){var $,ee,ie="";if(R(B)&&(B=b(B)),typeof B=="string"&&c(B)===r&&((ie=ge(B,!1))===""&&(ie=i.loadFile(B)||""),B=ie),ee=c(B),!A(ee))throw new Error("addImage does not support files of type '"+ee+"', please ensure that a plugin for '"+ee+"' support is added.");if(B instanceof Uint8Array||(B=Pe(B)),!($=this["process"+ee.toUpperCase()](B)))throw new Error("An unknown error occurred whilst processing the image");return $.fileType=ee,$}})(Yt.API),(function(i){var a=function(r){if(r!==void 0&&r!="")return!0};Yt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(r){for(var o,c,l,g=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString,m=this.internal.getPageInfoByObjId(r.objId),v=r.pageContext.annotations,j=!1,A=0;A<v.length&&!j;A++)switch((o=v[A]).type){case"link":(a(o.options.url)||a(o.options.pageNumber))&&(j=!0);break;case"reference":case"text":case"freetext":j=!0}if(j!=0){this.internal.write("/Annots [");for(var R=0;R<v.length;R++){o=v[R];var b=this.internal.pdfEscape,z=this.internal.getEncryptor(r.objId);switch(o.type){case"reference":this.internal.write(" "+o.object.objId+" 0 R ");break;case"text":var M=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),P=this.internal.getEncryptor(M.objId),q=o.title||"Note";l="<</Type /Annot /Subtype /Text "+(c="/Rect ["+g(o.bounds.x)+" "+p(o.bounds.y+o.bounds.h)+" "+g(o.bounds.x+o.bounds.w)+" "+p(o.bounds.y)+"] ")+"/Contents ("+b(P(o.contents))+")",l+=" /Popup "+E.objId+" 0 R",l+=" /P "+m.objId+" 0 R",l+=" /T ("+b(P(q))+") >>",M.content=l;var K=M.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(c="/Rect ["+g(o.bounds.x+30)+" "+p(o.bounds.y+o.bounds.h)+" "+g(o.bounds.x+o.bounds.w+30)+" "+p(o.bounds.y)+"] ")+" /Parent "+K,o.open&&(l+=" /Open true"),l+=" >>",E.content=l,this.internal.write(M.objId,"0 R",E.objId,"0 R");break;case"freetext":c="/Rect ["+g(o.bounds.x)+" "+p(o.bounds.y)+" "+g(o.bounds.x+o.bounds.w)+" "+p(o.bounds.y+o.bounds.h)+"] ";var H=o.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+c+"/Contents ("+b(z(o.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+H+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(o.options.name){var fe=this.annotations._nameMap[o.options.name];o.options.pageNumber=fe.page,o.options.top=fe.y}else o.options.top||(o.options.top=0);if(c="/Rect ["+o.finalBounds.x+" "+o.finalBounds.y+" "+o.finalBounds.w+" "+o.finalBounds.h+"] ",l="",o.options.url)l="<</Type /Annot /Subtype /Link "+c+"/Border [0 0 0] /A <</S /URI /URI ("+b(z(o.options.url))+") >>";else if(o.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+c+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(o.options.pageNumber).objId+" 0 R",o.options.magFactor=o.options.magFactor||"XYZ",o.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+o.options.top+"]";break;case"FitV":o.options.left=o.options.left||0,l+=" /FitV "+o.options.left+"]";break;default:var de=p(o.options.top);o.options.left=o.options.left||0,o.options.zoom===void 0&&(o.options.zoom=0),l+=" /XYZ "+o.options.left+" "+de+" "+o.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),i.createAnnotation=function(r){var o=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":o.pageContext.annotations.push(r)}},i.link=function(r,o,c,l,g){var p=this.internal.getCurrentPageInfo(),m=this.internal.getCoordinateString,v=this.internal.getVerticalCoordinateString;p.pageContext.annotations.push({finalBounds:{x:m(r),y:v(o),w:m(r+c),h:v(o+l)},options:g,type:"link"})},i.textWithLink=function(r,o,c,l){var g,p,m=this.getTextWidth(r),v=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){p=l.maxWidth;var j=this.splitTextToSize(r,p).length;g=Math.ceil(v*j)}else p=m,g=v;return this.text(r,o,c,l),c+=.2*v,l.align==="center"&&(o-=m/2),l.align==="right"&&(o-=m),this.link(o,c-v,p,g,l),m},i.getTextWidth=function(r){var o=this.internal.getFontSize();return this.getStringUnitWidth(r)*o/this.internal.scaleFactor}})(Yt.API),(function(i){var a={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},o={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},c=[1570,1571,1573,1575];i.__arabicParser__={};var l=i.__arabicParser__.isInArabicSubstitutionA=function(M){return a[M.charCodeAt(0)]!==void 0},g=i.__arabicParser__.isArabicLetter=function(M){return typeof M=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(M)},p=i.__arabicParser__.isArabicEndLetter=function(M){return g(M)&&l(M)&&a[M.charCodeAt(0)].length<=2},m=i.__arabicParser__.isArabicAlfLetter=function(M){return g(M)&&c.indexOf(M.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(M){return g(M)&&l(M)&&a[M.charCodeAt(0)].length>=1};var v=i.__arabicParser__.arabicLetterHasFinalForm=function(M){return g(M)&&l(M)&&a[M.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(M){return g(M)&&l(M)&&a[M.charCodeAt(0)].length>=3};var j=i.__arabicParser__.arabicLetterHasMedialForm=function(M){return g(M)&&l(M)&&a[M.charCodeAt(0)].length==4},A=i.__arabicParser__.resolveLigatures=function(M){var E=0,P=r,q="",K=0;for(E=0;E<M.length;E+=1)P[M.charCodeAt(E)]!==void 0?(K++,typeof(P=P[M.charCodeAt(E)])=="number"&&(q+=String.fromCharCode(P),P=r,K=0),E===M.length-1&&(P=r,q+=M.charAt(E-(K-1)),E-=K-1,K=0)):(P=r,q+=M.charAt(E-K),E-=K,K=0);return q};i.__arabicParser__.isArabicDiacritic=function(M){return M!==void 0&&o[M.charCodeAt(0)]!==void 0};var R=i.__arabicParser__.getCorrectForm=function(M,E,P){return g(M)?l(M)===!1?-1:!v(M)||!g(E)&&!g(P)||!g(P)&&p(E)||p(M)&&!g(E)||p(M)&&m(E)||p(M)&&p(E)?0:j(M)&&g(E)&&!p(E)&&g(P)&&v(P)?3:p(M)||!g(P)?1:2:-1},b=function(M){var E=0,P=0,q=0,K="",H="",fe="",de=(M=M||"").split("\\s+"),Pe=[];for(E=0;E<de.length;E+=1){for(Pe.push(""),P=0;P<de[E].length;P+=1)K=de[E][P],H=de[E][P-1],fe=de[E][P+1],g(K)?(q=R(K,H,fe),Pe[E]+=q!==-1?String.fromCharCode(a[K.charCodeAt(0)][q]):K):Pe[E]+=K;Pe[E]=A(Pe[E])}return Pe.join(" ")},z=i.__arabicParser__.processArabic=i.processArabic=function(){var M,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,P=[];if(Array.isArray(E)){var q=0;for(P=[],q=0;q<E.length;q+=1)Array.isArray(E[q])?P.push([b(E[q][0]),E[q][1],E[q][2]]):P.push([b(E[q])]);M=P}else M=b(E);return typeof arguments[0]=="string"?M:(arguments[0].text=M,arguments[0])};i.events.push(["preProcessText",z])})(Yt.API),Yt.API.autoPrint=function(i){var a;return(i=i||{}).variant=i.variant||"non-conform",i.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){a=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+a+" 0 R")})),this},(function(i){var a=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(p){r=p}});var o=150;Object.defineProperty(this,"width",{get:function(){return o},set:function(p){o=isNaN(p)||Number.isInteger(p)===!1||p<0?150:p,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=o+1)}});var c=300;Object.defineProperty(this,"height",{get:function(){return c},set:function(p){c=isNaN(p)||Number.isInteger(p)===!1||p<0?300:p,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=c+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(p){l=p}});var g={};Object.defineProperty(this,"style",{get:function(){return g},set:function(p){g=p}}),Object.defineProperty(this,"parentNode",{})};a.prototype.getContext=function(r,o){var c;if((r=r||"2d")!=="2d")return null;for(c in o)this.pdf.context2d.hasOwnProperty(c)&&(this.pdf.context2d[c]=o[c]);return this.pdf.context2d._canvas=this,this.pdf.context2d},a.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new a,this.canvas.pdf=this}])})(Yt.API),(function(i){var a={left:0,top:0,bottom:0,right:0},r=!1,o=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},a),this.internal.__cell__.margins.width=this.getPageWidth(),c.call(this))},c=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var m=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return m},set:function(M){m=M}});var v=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return v},set:function(M){v=M}});var j=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return j},set:function(M){j=M}});var A=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return A},set:function(M){A=M}});var R=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return R},set:function(M){R=M}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(M){b=M}});var z=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return z},set:function(M){z=M}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(m){return o.call(this),this.internal.__cell__.headerFunction=typeof m=="function"?m:void 0,this},i.getTextDimensions=function(m,v){o.call(this);var j=(v=v||{}).fontSize||this.getFontSize(),A=v.font||this.getFont(),R=v.scaleFactor||this.internal.scaleFactor,b=0,z=0,M=0,E=this;if(!Array.isArray(m)&&typeof m!="string"){if(typeof m!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");m=String(m)}var P=v.maxWidth;P>0?typeof m=="string"?m=this.splitTextToSize(m,P):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(K,H){return K.concat(E.splitTextToSize(H,P))},[])):m=Array.isArray(m)?m:[m];for(var q=0;q<m.length;q++)b<(M=this.getStringUnitWidth(m[q],{font:A})*j)&&(b=M);return b!==0&&(z=m.length),{w:b/=R,h:Math.max((z*j*this.getLineHeightFactor()-j*(this.getLineHeightFactor()-1))/R,0)}},i.cellAddPage=function(){o.call(this),this.addPage();var m=this.internal.__cell__.margins||a;return this.internal.__cell__.lastCell=new l(m.left,m.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var g=i.cell=function(){var m;m=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),o.call(this);var v=this.internal.__cell__.lastCell,j=this.internal.__cell__.padding,A=this.internal.__cell__.margins||a,R=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return v.lineNumber!==void 0&&(v.lineNumber===m.lineNumber?(m.x=(v.x||0)+(v.width||0),m.y=v.y||0):v.y+v.height+m.height+A.bottom>this.getPageHeight()?(this.cellAddPage(),m.y=A.top,b&&R&&(this.printHeaderRow(m.lineNumber,!0),m.y+=R[0].height)):m.y=v.y+v.height||m.y),m.text[0]!==void 0&&(this.rect(m.x,m.y,m.width,m.height,r===!0?"FD":void 0),m.align==="right"?this.text(m.text,m.x+m.width-j,m.y+j,{align:"right",baseline:"top"}):m.align==="center"?this.text(m.text,m.x+m.width/2,m.y+j,{align:"center",baseline:"top",maxWidth:m.width-j-j}):this.text(m.text,m.x+j,m.y+j,{align:"left",baseline:"top",maxWidth:m.width-j-j})),this.internal.__cell__.lastCell=m,this};i.table=function(m,v,j,A,R){if(o.call(this),!j)throw new Error("No data for PDF table.");var b,z,M,E,P=[],q=[],K=[],H={},fe={},de=[],Pe=[],xe=(R=R||{}).autoSize||!1,Z=R.printHeaders!==!1,ge=R.css&&R.css["font-size"]!==void 0?16*R.css["font-size"]:R.fontSize||12,B=R.margins||Object.assign({width:this.getPageWidth()},a),$=typeof R.padding=="number"?R.padding:3,ee=R.headerBackgroundColor||"#c8c8c8",ie=R.headerTextColor||"#000";if(c.call(this),this.internal.__cell__.printHeaders=Z,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=ge,this.internal.__cell__.padding=$,this.internal.__cell__.headerBackgroundColor=ee,this.internal.__cell__.headerTextColor=ie,this.setFontSize(ge),A==null)q=P=Object.keys(j[0]),K=P.map(function(){return"left"});else if(Array.isArray(A)&&er(A[0])==="object")for(P=A.map(function(Le){return Le.name}),q=A.map(function(Le){return Le.prompt||Le.name||""}),K=A.map(function(Le){return Le.align||"left"}),b=0;b<A.length;b+=1)fe[A[b].name]=.7499990551181103*A[b].width;else Array.isArray(A)&&typeof A[0]=="string"&&(q=P=A,K=P.map(function(){return"left"}));if(xe||Array.isArray(A)&&typeof A[0]=="string")for(b=0;b<P.length;b+=1){for(H[E=P[b]]=j.map(function(Le){return Le[E]}),this.setFont(void 0,"bold"),de.push(this.getTextDimensions(q[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),z=H[E],this.setFont(void 0,"normal"),M=0;M<z.length;M+=1)de.push(this.getTextDimensions(z[M],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);fe[E]=Math.max.apply(null,de)+$+$,de=[]}if(Z){var Ne={};for(b=0;b<P.length;b+=1)Ne[P[b]]={},Ne[P[b]].text=q[b],Ne[P[b]].align=K[b];var Re=p.call(this,Ne,fe);Pe=P.map(function(Le){return new l(m,v,fe[Le],Re,Ne[Le].text,void 0,Ne[Le].align)}),this.setTableHeaderRow(Pe),this.printHeaderRow(1,!1)}var Me=A.reduce(function(Le,Q){return Le[Q.name]=Q.align,Le},{});for(b=0;b<j.length;b+=1){"rowStart"in R&&R.rowStart instanceof Function&&R.rowStart({row:b,data:j[b]},this);var ue=p.call(this,j[b],fe);for(M=0;M<P.length;M+=1){var Ce=j[b][P[M]];"cellStart"in R&&R.cellStart instanceof Function&&R.cellStart({row:b,col:M,data:Ce},this),g.call(this,new l(m,v,fe[P[M]],ue,Ce,b+2,Me[P[M]]))}}return this.internal.__cell__.table_x=m,this.internal.__cell__.table_y=v,this};var p=function(m,v){var j=this.internal.__cell__.padding,A=this.internal.__cell__.table_font_size,R=this.internal.scaleFactor;return Object.keys(m).map(function(b){var z=m[b];return this.splitTextToSize(z.hasOwnProperty("text")?z.text:z,v[b]-j-j)},this).map(function(b){return this.getLineHeightFactor()*b.length*A/R+j+j},this).reduce(function(b,z){return Math.max(b,z)},0)};i.setTableHeaderRow=function(m){o.call(this),this.internal.__cell__.tableHeaderRow=m},i.printHeaderRow=function(m,v){if(o.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var j;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var A=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(A[0],A[1],A[2],A[3],void 0,-1)}this.setFont(void 0,"bold");for(var R=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){j=this.internal.__cell__.tableHeaderRow[b].clone(),v&&(j.y=this.internal.__cell__.margins.top||0,R.push(j)),j.lineNumber=m;var z=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),g.call(this,j),this.setTextColor(z)}R.length>0&&this.setTableHeaderRow(R),this.setFont(void 0,"normal"),r=!1}})(Yt.API);var N0={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},k0=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Nf=S0(k0),A0=[100,200,300,400,500,600,700,800,900],Zx=S0(A0);function sf(i){var a=i.family.replace(/"|'/g,"").toLowerCase(),r=(function(l){return N0[l=l||"normal"]?l:"normal"})(i.style),o=(function(l){return l?typeof l=="number"?l>=100&&l<=900&&l%100==0?l:400:/^\d00$/.test(l)?parseInt(l):l==="bold"?700:400:400})(i.weight),c=(function(l){return typeof Nf[l=l||"normal"]=="number"?l:"normal"})(i.stretch);return{family:a,style:r,weight:o,stretch:c,src:i.src||[],ref:i.ref||{name:a,style:[c,r,o].join(" ")}}}function om(i,a,r,o){var c;for(c=r;c>=0&&c<a.length;c+=o)if(i[a[c]])return i[a[c]];for(c=r;c>=0&&c<a.length;c-=o)if(i[a[c]])return i[a[c]]}var ey={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},lm={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function cm(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function dm(i){return i.trimLeft()}function ty(i,a){for(var r=0;r<i.length;){if(i.charAt(r)===a)return[i.substring(0,r),i.substring(r+1)];r+=1}return null}function ny(i){var a=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return a===null?null:[a[0],i.substring(a[0].length)]}var Fd,um,fm,mc,Dd,hm,pm,mm,of=["times"];function gm(i,a,r,o,c){var l=4,g=ym;switch(c){case Yt.API.image_compression.FAST:l=1,g=xm;break;case Yt.API.image_compression.MEDIUM:l=6,g=vm;break;case Yt.API.image_compression.SLOW:l=9,g=bm}i=(function(m,v,j,A){for(var R,b=m.length/v,z=new Uint8Array(m.length+b),M=[ry,xm,ym,vm,bm],E=0;E<b;E+=1){var P=E*v,q=m.subarray(P,P+v);if(A)z.set(A(q,j,R),P+E);else{for(var K=M.length,H=[],fe=0;fe<K;fe+=1)H[fe]=M[fe](q,j,R);var de=iy(H.concat());z.set(H[de],P+E)}R=q}return z})(i,a,Math.ceil(r*o/8),g);var p=xf(i,{level:l});return Yt.API.__addimage__.arrayBufferToBinaryString(p)}function ry(i){var a=Array.apply([],i);return a.unshift(0),a}function xm(i,a){var r=i.length,o=[];o[0]=1;for(var c=0;c<r;c+=1){var l=i[c-a]||0;o[c+1]=i[c]-l+256&255}return o}function ym(i,a,r){var o=i.length,c=[];c[0]=2;for(var l=0;l<o;l+=1){var g=r&&r[l]||0;c[l+1]=i[l]-g+256&255}return c}function vm(i,a,r){var o=i.length,c=[];c[0]=3;for(var l=0;l<o;l+=1){var g=i[l-a]||0,p=r&&r[l]||0;c[l+1]=i[l]+256-(g+p>>>1)&255}return c}function bm(i,a,r){var o=i.length,c=[];c[0]=4;for(var l=0;l<o;l+=1){var g=ay(i[l-a]||0,r&&r[l]||0,r&&r[l-a]||0);c[l+1]=i[l]-g+256&255}return c}function ay(i,a,r){if(i===a&&a===r)return i;var o=Math.abs(a-r),c=Math.abs(i-r),l=Math.abs(i+a-r-r);return o<=c&&o<=l?i:c<=l?a:r}function iy(i){var a=i.map(function(r){return r.reduce(function(o,c){return o+Math.abs(c)},0)});return a.indexOf(Math.min.apply(null,a))}function lf(i,a,r){var o=a*r,c=Math.floor(o/8),l=16-(o-8*c+r),g=(1<<r)-1;return C0(i,c)>>l&g}function wm(i,a,r,o){var c=r*o,l=Math.floor(c/8),g=16-(c-8*l+o),p=(1<<o)-1,m=(a&p)<<g;(function(v,j,A){if(j+1<v.byteLength)v.setUint16(j,A,!1);else{var R=A>>8&255;v.setUint8(j,R)}})(i,l,C0(i,l)&~(p<<g)&65535|m)}function C0(i,a){return a+1<i.byteLength?i.getUint16(a,!1):i.getUint8(a)<<8}function sy(i){var a=0;if(i[a++]!==71||i[a++]!==73||i[a++]!==70||i[a++]!==56||(i[a++]+1&253)!=56||i[a++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=i[a++]|i[a++]<<8,o=i[a++]|i[a++]<<8,c=i[a++],l=c>>7,g=1<<1+(7&c);i[a++],i[a++];var p=null,m=null;l&&(p=a,m=g,a+=3*g);var v=!0,j=[],A=0,R=null,b=0,z=null;for(this.width=r,this.height=o;v&&a<i.length;)switch(i[a++]){case 33:switch(i[a++]){case 255:if(i[a]!==11||i[a+1]==78&&i[a+2]==69&&i[a+3]==84&&i[a+4]==83&&i[a+5]==67&&i[a+6]==65&&i[a+7]==80&&i[a+8]==69&&i[a+9]==50&&i[a+10]==46&&i[a+11]==48&&i[a+12]==3&&i[a+13]==1&&i[a+16]==0)a+=14,z=i[a++]|i[a++]<<8,a++;else for(a+=12;;){if(!((B=i[a++])>=0))throw Error("Invalid block size");if(B===0)break;a+=B}break;case 249:if(i[a++]!==4||i[a+4]!==0)throw new Error("Invalid graphics extension block.");var M=i[a++];A=i[a++]|i[a++]<<8,R=i[a++],1&M||(R=null),b=M>>2&7,a++;break;case 254:for(;;){if(!((B=i[a++])>=0))throw Error("Invalid block size");if(B===0)break;a+=B}break;default:throw new Error("Unknown graphic control label: 0x"+i[a-1].toString(16))}break;case 44:var E=i[a++]|i[a++]<<8,P=i[a++]|i[a++]<<8,q=i[a++]|i[a++]<<8,K=i[a++]|i[a++]<<8,H=i[a++],fe=H>>6&1,de=1<<1+(7&H),Pe=p,xe=m,Z=!1;H>>7&&(Z=!0,Pe=a,xe=de,a+=3*de);var ge=a;for(a++;;){var B;if(!((B=i[a++])>=0))throw Error("Invalid block size");if(B===0)break;a+=B}j.push({x:E,y:P,width:q,height:K,has_local_palette:Z,palette_offset:Pe,palette_size:xe,data_offset:ge,data_length:a-ge,transparent_index:R,interlaced:!!fe,delay:A,disposal:b});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+i[a-1].toString(16))}this.numFrames=function(){return j.length},this.loopCount=function(){return z},this.frameInfo=function($){if($<0||$>=j.length)throw new Error("Frame index out of range.");return j[$]},this.decodeAndBlitFrameBGRA=function($,ee){var ie=this.frameInfo($),Ne=ie.width*ie.height,Re=new Uint8Array(Ne);jm(i,ie.data_offset,Re,Ne);var Me=ie.palette_offset,ue=ie.transparent_index;ue===null&&(ue=256);var Ce=ie.width,Le=r-Ce,Q=Ce,C=4*(ie.y*r+ie.x),G=4*((ie.y+ie.height)*r+ie.x),J=C,oe=4*Le;ie.interlaced===!0&&(oe+=4*r*7);for(var pe=8,be=0,Fe=Re.length;be<Fe;++be){var De=Re[be];if(Q===0&&(Q=Ce,(J+=oe)>=G&&(oe=4*Le+4*r*(pe-1),J=C+(Ce+Le)*(pe<<1),pe>>=1)),De===ue)J+=4;else{var Ue=i[Me+3*De],_e=i[Me+3*De+1],at=i[Me+3*De+2];ee[J++]=at,ee[J++]=_e,ee[J++]=Ue,ee[J++]=255}--Q}},this.decodeAndBlitFrameRGBA=function($,ee){var ie=this.frameInfo($),Ne=ie.width*ie.height,Re=new Uint8Array(Ne);jm(i,ie.data_offset,Re,Ne);var Me=ie.palette_offset,ue=ie.transparent_index;ue===null&&(ue=256);var Ce=ie.width,Le=r-Ce,Q=Ce,C=4*(ie.y*r+ie.x),G=4*((ie.y+ie.height)*r+ie.x),J=C,oe=4*Le;ie.interlaced===!0&&(oe+=4*r*7);for(var pe=8,be=0,Fe=Re.length;be<Fe;++be){var De=Re[be];if(Q===0&&(Q=Ce,(J+=oe)>=G&&(oe=4*Le+4*r*(pe-1),J=C+(Ce+Le)*(pe<<1),pe>>=1)),De===ue)J+=4;else{var Ue=i[Me+3*De],_e=i[Me+3*De+1],at=i[Me+3*De+2];ee[J++]=Ue,ee[J++]=_e,ee[J++]=at,ee[J++]=255}--Q}}}function jm(i,a,r,o){for(var c=i[a++],l=1<<c,g=l+1,p=g+1,m=c+1,v=(1<<m)-1,j=0,A=0,R=0,b=i[a++],z=new Int32Array(4096),M=null;;){for(;j<16&&b!==0;)A|=i[a++]<<j,j+=8,b===1?b=i[a++]:--b;if(j<m)break;var E=A&v;if(A>>=m,j-=m,E!==l){if(E===g)break;for(var P=E<p?E:M,q=0,K=P;K>l;)K=z[K]>>8,++q;var H=K;if(R+q+(P!==E?1:0)>o)return void lr.log("Warning, gif stream longer than expected.");r[R++]=H;var fe=R+=q;for(P!==E&&(r[R++]=H),K=P;q--;)K=z[K],r[--fe]=255&K,K>>=8;M!==null&&p<4096&&(z[p++]=M<<8|H,p>=v+1&&m<12&&(++m,v=v<<1|1)),M=E}else p=g+1,v=(1<<(m=c+1))-1,M=null}return R!==o&&lr.log("Warning, gif stream shorter than expected."),r}function cf(i){var a,r,o,c,l,g=Math.floor,p=new Array(64),m=new Array(64),v=new Array(64),j=new Array(64),A=new Array(65535),R=new Array(65535),b=new Array(64),z=new Array(64),M=[],E=0,P=7,q=new Array(64),K=new Array(64),H=new Array(64),fe=new Array(256),de=new Array(2048),Pe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],xe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],ge=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],$=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ee=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Re(C,G){for(var J=0,oe=0,pe=new Array,be=1;be<=16;be++){for(var Fe=1;Fe<=C[be];Fe++)pe[G[oe]]=[],pe[G[oe]][0]=J,pe[G[oe]][1]=be,oe++,J++;J*=2}return pe}function Me(C){for(var G=C[0],J=C[1]-1;J>=0;)G&1<<J&&(E|=1<<P),J--,--P<0&&(E==255?(ue(255),ue(0)):ue(E),P=7,E=0)}function ue(C){M.push(C)}function Ce(C){ue(C>>8&255),ue(255&C)}function Le(C,G,J,oe,pe){for(var be,Fe=pe[0],De=pe[240],Ue=(function(Qe,bt){var gt,Rt,Ft,jt,Gt,qt,Jt,ke,qe,se,je=0;for(qe=0;qe<8;++qe){gt=Qe[je],Rt=Qe[je+1],Ft=Qe[je+2],jt=Qe[je+3],Gt=Qe[je+4],qt=Qe[je+5],Jt=Qe[je+6];var nt=gt+(ke=Qe[je+7]),pt=gt-ke,He=Rt+Jt,ct=Rt-Jt,Qt=Ft+qt,yt=Ft-qt,vn=jt+Gt,$t=jt-Gt,Ut=nt+vn,he=nt-vn,ft=He+Qt,Dt=He-Qt;Qe[je]=Ut+ft,Qe[je+4]=Ut-ft;var hn=.707106781*(Dt+he);Qe[je+2]=he+hn,Qe[je+6]=he-hn;var ta=.382683433*((Ut=$t+yt)-(Dt=ct+pt)),Sn=.5411961*Ut+ta,Ar=1.306562965*Dt+ta,pn=.707106781*(ft=yt+ct),St=pt+pn,Xt=pt-pn;Qe[je+5]=Xt+Sn,Qe[je+3]=Xt-Sn,Qe[je+1]=St+Ar,Qe[je+7]=St-Ar,je+=8}for(je=0,qe=0;qe<8;++qe){gt=Qe[je],Rt=Qe[je+8],Ft=Qe[je+16],jt=Qe[je+24],Gt=Qe[je+32],qt=Qe[je+40],Jt=Qe[je+48];var Jn=gt+(ke=Qe[je+56]),Ur=gt-ke,Ua=Rt+Jt,zn=Rt-Jt,cr=Ft+qt,Vn=Ft-qt,ws=jt+Gt,zs=jt-Gt,Wa=Jn+ws,Pt=Jn-ws,Rn=Ua+cr,Ca=Ua-cr;Qe[je]=Wa+Rn,Qe[je+32]=Wa-Rn;var Pa=.707106781*(Ca+Pt);Qe[je+16]=Pt+Pa,Qe[je+48]=Pt-Pa;var xo=.382683433*((Wa=zs+Vn)-(Ca=zn+Ur)),na=.5411961*Wa+xo,ra=1.306562965*Ca+xo,Ui=.707106781*(Rn=Vn+zn),Us=Ur+Ui,Ii=Ur-Ui;Qe[je+40]=Ii+na,Qe[je+24]=Ii-na,Qe[je+8]=Us+ra,Qe[je+56]=Us-ra,je++}for(qe=0;qe<64;++qe)se=Qe[qe]*bt[qe],b[qe]=se>0?se+.5|0:se-.5|0;return b})(C,G),_e=0;_e<64;++_e)z[Pe[_e]]=Ue[_e];var at=z[0]-J;J=z[0],at==0?Me(oe[0]):(Me(oe[R[be=32767+at]]),Me(A[be]));for(var ot=63;ot>0&&z[ot]==0;)ot--;if(ot==0)return Me(Fe),J;for(var it,Y=1;Y<=ot;){for(var mt=Y;z[Y]==0&&Y<=ot;)++Y;var Mt=Y-mt;if(Mt>=16){it=Mt>>4;for(var Ct=1;Ct<=it;++Ct)Me(De);Mt&=15}be=32767+z[Y],Me(pe[(Mt<<4)+R[be]]),Me(A[be]),Y++}return ot!=63&&Me(Fe),J}function Q(C){C=Math.min(Math.max(C,1),100),l!=C&&((function(G){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],oe=0;oe<64;oe++){var pe=g((J[oe]*G+50)/100);pe=Math.min(Math.max(pe,1),255),p[Pe[oe]]=pe}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Fe=0;Fe<64;Fe++){var De=g((be[Fe]*G+50)/100);De=Math.min(Math.max(De,1),255),m[Pe[Fe]]=De}for(var Ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,at=0;at<8;at++)for(var ot=0;ot<8;ot++)v[_e]=1/(p[Pe[_e]]*Ue[at]*Ue[ot]*8),j[_e]=1/(m[Pe[_e]]*Ue[at]*Ue[ot]*8),_e++})(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),l=C)}this.encode=function(C,G){G&&Q(G),M=new Array,E=0,P=7,Ce(65496),Ce(65504),Ce(16),ue(74),ue(70),ue(73),ue(70),ue(0),ue(1),ue(1),ue(0),Ce(1),Ce(1),ue(0),ue(0),(function(){Ce(65499),Ce(132),ue(0);for(var Rt=0;Rt<64;Rt++)ue(p[Rt]);ue(1);for(var Ft=0;Ft<64;Ft++)ue(m[Ft])})(),(function(Rt,Ft){Ce(65472),Ce(17),ue(8),Ce(Ft),Ce(Rt),ue(3),ue(1),ue(17),ue(0),ue(2),ue(17),ue(1),ue(3),ue(17),ue(1)})(C.width,C.height),(function(){Ce(65476),Ce(418),ue(0);for(var Rt=0;Rt<16;Rt++)ue(xe[Rt+1]);for(var Ft=0;Ft<=11;Ft++)ue(Z[Ft]);ue(16);for(var jt=0;jt<16;jt++)ue(ge[jt+1]);for(var Gt=0;Gt<=161;Gt++)ue(B[Gt]);ue(1);for(var qt=0;qt<16;qt++)ue($[qt+1]);for(var Jt=0;Jt<=11;Jt++)ue(ee[Jt]);ue(17);for(var ke=0;ke<16;ke++)ue(ie[ke+1]);for(var qe=0;qe<=161;qe++)ue(Ne[qe])})(),Ce(65498),Ce(12),ue(3),ue(1),ue(0),ue(2),ue(17),ue(3),ue(17),ue(0),ue(63),ue(0);var J=0,oe=0,pe=0;E=0,P=7,this.encode.displayName="_encode_";for(var be,Fe,De,Ue,_e,at,ot,it,Y,mt=C.data,Mt=C.width,Ct=C.height,Qe=4*Mt,bt=0;bt<Ct;){for(be=0;be<Qe;){for(_e=Qe*bt+be,ot=-1,it=0,Y=0;Y<64;Y++)at=_e+(it=Y>>3)*Qe+(ot=4*(7&Y)),bt+it>=Ct&&(at-=Qe*(bt+1+it-Ct)),be+ot>=Qe&&(at-=be+ot-Qe+4),Fe=mt[at++],De=mt[at++],Ue=mt[at++],q[Y]=(de[Fe]+de[De+256|0]+de[Ue+512|0]>>16)-128,K[Y]=(de[Fe+768|0]+de[De+1024|0]+de[Ue+1280|0]>>16)-128,H[Y]=(de[Fe+1280|0]+de[De+1536|0]+de[Ue+1792|0]>>16)-128;J=Le(q,v,J,a,o),oe=Le(K,j,oe,r,c),pe=Le(H,j,pe,r,c),be+=32}bt+=8}if(P>=0){var gt=[];gt[1]=P+1,gt[0]=(1<<P+1)-1,Me(gt)}return Ce(65497),new Uint8Array(M)},i=i||50,(function(){for(var C=String.fromCharCode,G=0;G<256;G++)fe[G]=C(G)})(),a=Re(xe,Z),r=Re($,ee),o=Re(ge,B),c=Re(ie,Ne),(function(){for(var C=1,G=2,J=1;J<=15;J++){for(var oe=C;oe<G;oe++)R[32767+oe]=J,A[32767+oe]=[],A[32767+oe][1]=J,A[32767+oe][0]=oe;for(var pe=-(G-1);pe<=-C;pe++)R[32767+pe]=J,A[32767+pe]=[],A[32767+pe][1]=J,A[32767+pe][0]=G-1+pe;C<<=1,G<<=1}})(),(function(){for(var C=0;C<256;C++)de[C]=19595*C,de[C+256|0]=38470*C,de[C+512|0]=7471*C+32768,de[C+768|0]=-11059*C,de[C+1024|0]=-21709*C,de[C+1280|0]=32768*C+8421375,de[C+1536|0]=-27439*C,de[C+1792|0]=-5329*C})(),Q(i)}function fo(i,a){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!a,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Sm(i){function a(Z){if(!Z)throw Error("assert :P")}function r(Z,ge,B){for(var $=0;4>$;$++)if(Z[ge+$]!=B.charCodeAt($))return!0;return!1}function o(Z,ge,B,$,ee){for(var ie=0;ie<ee;ie++)Z[ge+ie]=B[$+ie]}function c(Z,ge,B,$){for(var ee=0;ee<$;ee++)Z[ge+ee]=B}function l(Z){return new Int32Array(Z)}function g(Z,ge){for(var B=[],$=0;$<Z;$++)B.push(new ge);return B}function p(Z,ge){var B=[];return(function $(ee,ie,Ne){for(var Re=Ne[ie],Me=0;Me<Re&&(ee.push(Ne.length>ie+1?[]:new ge),!(Ne.length<ie+1));Me++)$(ee[Me],ie+1,Ne)})(B,0,Z),B}var m=function(){var Z=this;function ge(d,h){for(var w=1<<h-1>>>0;d&w;)w>>>=1;return w?(d&w-1)+w:d}function B(d,h,w,N,I){a(!(N%w));do d[h+(N-=w)]=I;while(0<N)}function $(d,h,w,N,I){if(a(2328>=I),512>=I)var T=l(512);else if((T=l(I))==null)return 0;return(function(O,W,V,te,ye,Be){var ne,we,Te=W,Ke=1<<V,We=l(16),Ye=l(16);for(a(ye!=0),a(te!=null),a(O!=null),a(0<V),we=0;we<ye;++we){if(15<te[we])return 0;++We[te[we]]}if(We[0]==ye)return 0;for(Ye[1]=0,ne=1;15>ne;++ne){if(We[ne]>1<<ne)return 0;Ye[ne+1]=Ye[ne]+We[ne]}for(we=0;we<ye;++we)ne=te[we],0<te[we]&&(Be[Ye[ne]++]=we);if(Ye[15]==1)return(te=new ee).g=0,te.value=Be[0],B(O,Te,1,Ke,te),Ke;var Je,et=-1,tt=Ke-1,Ht=0,Lt=1,fn=1,Tt=1<<V;for(we=0,ne=1,ye=2;ne<=V;++ne,ye<<=1){if(Lt+=fn<<=1,0>(fn-=We[ne]))return 0;for(;0<We[ne];--We[ne])(te=new ee).g=ne,te.value=Be[we++],B(O,Te+Ht,ye,Tt,te),Ht=ge(Ht,ne)}for(ne=V+1,ye=2;15>=ne;++ne,ye<<=1){if(Lt+=fn<<=1,0>(fn-=We[ne]))return 0;for(;0<We[ne];--We[ne]){if(te=new ee,(Ht&tt)!=et){for(Te+=Tt,Je=1<<(et=ne)-V;15>et&&!(0>=(Je-=We[et]));)++et,Je<<=1;Ke+=Tt=1<<(Je=et-V),O[W+(et=Ht&tt)].g=Je+V,O[W+et].value=Te-W-et}te.g=ne-V,te.value=Be[we++],B(O,Te+(Ht>>V),ye,Tt,te),Ht=ge(Ht,ne)}}return Lt!=2*Ye[15]-1?0:Ke})(d,h,w,N,I,T)}function ee(){this.value=this.g=0}function ie(){this.value=this.g=0}function Ne(){this.G=g(5,ee),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=g(Ea,ie)}function Re(d,h,w,N){a(d!=null),a(h!=null),a(2147483648>N),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=h,d.pa=w,d.Jd=h,d.Yc=w+N,d.Zc=4<=N?w+N-4+1:w,Fe(d)}function Me(d,h){for(var w=0;0<h--;)w|=Ue(d,128)<<h;return w}function ue(d,h){var w=Me(d,h);return De(d)?-w:w}function Ce(d,h,w,N){var I,T=0;for(a(d!=null),a(h!=null),a(4294967288>N),d.Sb=N,d.Ra=0,d.u=0,d.h=0,4<N&&(N=4),I=0;I<N;++I)T+=h[w+I]<<8*I;d.Ra=T,d.bb=N,d.oa=h,d.pa=w}function Le(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<Cs-8>>>0,++d.bb,d.u-=8;oe(d)&&(d.h=1,d.u=0)}function Q(d,h){if(a(0<=h),!d.h&&h<=Fr){var w=J(d)&Sa[h];return d.u+=h,Le(d),w}return d.h=1,d.u=0}function C(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(d){return d.Ra>>>(d.u&Cs-1)>>>0}function oe(d){return a(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>Cs}function pe(d,h){d.u=h,d.h=oe(d)}function be(d){d.u>=Ki&&(a(d.u>=Ki),Le(d))}function Fe(d){a(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(a(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function De(d){return Me(d,1)}function Ue(d,h){var w=d.Ca;0>d.b&&Fe(d);var N=d.b,I=w*h>>>8,T=(d.I>>>N>I)+0;for(T?(w-=I,d.I-=I+1<<N>>>0):w=I+1,N=w,I=0;256<=N;)I+=8,N>>=8;return N=7^I+gi[N],d.b-=N,d.Ca=(w<<N)-1,T}function _e(d,h,w){d[h+0]=w>>24&255,d[h+1]=w>>16&255,d[h+2]=w>>8&255,d[h+3]=255&w}function at(d,h){return d[h+0]|d[h+1]<<8}function ot(d,h){return at(d,h)|d[h+2]<<16}function it(d,h){return at(d,h)|at(d,h+2)<<16}function Y(d,h){var w=1<<h;return a(d!=null),a(0<h),d.X=l(w),d.X==null?0:(d.Mb=32-h,d.Xa=h,1)}function mt(d,h){a(d!=null),a(h!=null),a(d.Xa==h.Xa),o(h.X,0,d.X,0,1<<h.Xa)}function Mt(){this.X=[],this.Xa=this.Mb=0}function Ct(d,h,w,N){a(w!=null),a(N!=null);var I=w[0],T=N[0];return I==0&&(I=(d*T+h/2)/h),T==0&&(T=(h*I+d/2)/d),0>=I||0>=T?0:(w[0]=I,N[0]=T,1)}function Qe(d,h){return d+(1<<h)-1>>>h}function bt(d,h){return((4278255360&d)+(4278255360&h)>>>0&4278255360)+((16711935&d)+(16711935&h)>>>0&16711935)>>>0}function gt(d,h){Z[h]=function(w,N,I,T,O,W,V){var te;for(te=0;te<O;++te){var ye=Z[d](W[V+te-1],I,T+te);W[V+te]=bt(w[N+te],ye)}}}function Rt(){this.ud=this.hd=this.jd=0}function Ft(d,h){return((4278124286&(d^h))>>>1)+(d&h)>>>0}function jt(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Gt(d,h){return jt(d+(d-h+.5>>1))}function qt(d,h,w){return Math.abs(h-w)-Math.abs(d-w)}function Jt(d,h,w,N,I,T,O){for(N=T[O-1],w=0;w<I;++w)T[O+w]=N=bt(d[h+w],N)}function ke(d,h,w,N,I){var T;for(T=0;T<w;++T){var O=d[h+T],W=O>>8&255,V=16711935&(V=(V=16711935&O)+((W<<16)+W));N[I+T]=(4278255360&O)+V>>>0}}function qe(d,h){h.jd=255&d,h.hd=d>>8&255,h.ud=d>>16&255}function se(d,h,w,N,I,T){var O;for(O=0;O<N;++O){var W=h[w+O],V=W>>>8,te=W,ye=255&(ye=(ye=W>>>16)+((d.jd<<24>>24)*(V<<24>>24)>>>5));te=255&(te=(te+=(d.hd<<24>>24)*(V<<24>>24)>>>5)+((d.ud<<24>>24)*(ye<<24>>24)>>>5)),I[T+O]=(4278255360&W)+(ye<<16)+te}}function je(d,h,w,N,I){Z[h]=function(T,O,W,V,te,ye,Be,ne,we){for(V=Be;V<ne;++V)for(Be=0;Be<we;++Be)te[ye++]=I(W[N(T[O++])])},Z[d]=function(T,O,W,V,te,ye,Be){var ne=8>>T.b,we=T.Ea,Te=T.K[0],Ke=T.w;if(8>ne)for(T=(1<<T.b)-1,Ke=(1<<ne)-1;O<W;++O){var We,Ye=0;for(We=0;We<we;++We)We&T||(Ye=N(V[te++])),ye[Be++]=I(Te[Ye&Ke]),Ye>>=ne}else Z["VP8LMapColor"+w](V,te,Te,Ke,ye,Be,O,W,we)}}function nt(d,h,w,N,I){for(w=h+w;h<w;){var T=d[h++];N[I++]=T>>16&255,N[I++]=T>>8&255,N[I++]=255&T}}function pt(d,h,w,N,I){for(w=h+w;h<w;){var T=d[h++];N[I++]=T>>16&255,N[I++]=T>>8&255,N[I++]=255&T,N[I++]=T>>24&255}}function He(d,h,w,N,I){for(w=h+w;h<w;){var T=(O=d[h++])>>16&240|O>>12&15,O=240&O|O>>28&15;N[I++]=T,N[I++]=O}}function ct(d,h,w,N,I){for(w=h+w;h<w;){var T=(O=d[h++])>>16&248|O>>13&7,O=O>>5&224|O>>3&31;N[I++]=T,N[I++]=O}}function Qt(d,h,w,N,I){for(w=h+w;h<w;){var T=d[h++];N[I++]=255&T,N[I++]=T>>8&255,N[I++]=T>>16&255}}function yt(d,h,w,N,I,T){if(T==0)for(w=h+w;h<w;)_e(N,((T=d[h++])[0]>>24|T[1]>>8&65280|T[2]<<8&16711680|T[3]<<24)>>>0),I+=32;else o(N,I,d,h,w)}function vn(d,h){Z[h][0]=Z[d+"0"],Z[h][1]=Z[d+"1"],Z[h][2]=Z[d+"2"],Z[h][3]=Z[d+"3"],Z[h][4]=Z[d+"4"],Z[h][5]=Z[d+"5"],Z[h][6]=Z[d+"6"],Z[h][7]=Z[d+"7"],Z[h][8]=Z[d+"8"],Z[h][9]=Z[d+"9"],Z[h][10]=Z[d+"10"],Z[h][11]=Z[d+"11"],Z[h][12]=Z[d+"12"],Z[h][13]=Z[d+"13"],Z[h][14]=Z[d+"0"],Z[h][15]=Z[d+"0"]}function $t(d){return d==wo||d==eo||d==Oo||d==Bo}function Ut(){this.eb=[],this.size=this.A=this.fb=0}function he(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ft(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ut,this.f.kb=new he,this.sd=null}function Dt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function hn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ta(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Sn(d,h){var w=d.T,N=h.ba.f.RGBA,I=N.eb,T=N.fb+d.ka*N.A,O=It[h.ba.S],W=d.y,V=d.O,te=d.f,ye=d.N,Be=d.ea,ne=d.W,we=h.cc,Te=h.dc,Ke=h.Mc,We=h.Nc,Ye=d.ka,Je=d.ka+d.T,et=d.U,tt=et+1>>1;for(Ye==0?O(W,V,null,null,te,ye,Be,ne,te,ye,Be,ne,I,T,null,null,et):(O(h.ec,h.fc,W,V,we,Te,Ke,We,te,ye,Be,ne,I,T-N.A,I,T,et),++w);Ye+2<Je;Ye+=2)we=te,Te=ye,Ke=Be,We=ne,ye+=d.Rc,ne+=d.Rc,T+=2*N.A,O(W,(V+=2*d.fa)-d.fa,W,V,we,Te,Ke,We,te,ye,Be,ne,I,T-N.A,I,T,et);return V+=d.fa,d.j+Je<d.o?(o(h.ec,h.fc,W,V,et),o(h.cc,h.dc,te,ye,tt),o(h.Mc,h.Nc,Be,ne,tt),w--):1&Je||O(W,V,null,null,te,ye,Be,ne,te,ye,Be,ne,I,T+N.A,null,null,et),w}function Ar(d,h,w){var N=d.F,I=[d.J];if(N!=null){var T=d.U,O=h.ba.S,W=O==To||O==Oo;h=h.ba.f.RGBA;var V=[0],te=d.ka;V[0]=d.T,d.Kb&&(te==0?--V[0]:(--te,I[0]-=d.width),d.j+d.ka+d.T==d.o&&(V[0]=d.o-d.j-te));var ye=h.eb;te=h.fb+te*h.A,d=Do(N,I[0],d.width,T,V,ye,te+(W?0:3),h.A),a(w==V),d&&$t(O)&&Xs(ye,te,W,T,V,h.A)}return 0}function pn(d){var h=d.ma,w=h.ba.S,N=11>w,I=w==Is||w==Ra||w==To||w==Ee||w==12||$t(w);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Gi(h.Oa,d,I?11:12))return 0;if(I&&$t(w)&&pi(),d.da)alert("todo:use_scaling");else{if(N){if(h.Ib=ta,d.Kb){if(w=d.U+1>>1,h.memory=l(d.U+2*w),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+d.U,h.Mc=h.cc,h.Nc=h.dc+w,h.Ib=Sn,pi()}}else alert("todo:EmitYUV");I&&(h.Jb=Ar,N&&Qa())}if(N&&!Yr){for(d=0;256>d;++d)wi[d]=89858*(d-128)+wt>>hs,ji[d]=-22014*(d-128)+wt,tl[d]=-45773*(d-128),Uo[d]=113618*(d-128)+wt>>hs;for(d=Zt;d<yn;++d)h=76283*(d-16)+wt>>hs,Xl[d-Zt]=Kn(h,255),Xc[d-Zt]=Kn(h+8>>4,15);Yr=1}return 1}function St(d){var h=d.ma,w=d.U,N=d.T;return a(!(1&d.ka)),0>=w||0>=N?0:(w=h.Ib(d,h),h.Jb!=null&&h.Jb(d,h,w),h.Dc+=w,1)}function Xt(d){d.ma.memory=null}function Jn(d,h,w,N){return Q(d,8)!=47?0:(h[0]=Q(d,14)+1,w[0]=Q(d,14)+1,N[0]=Q(d,1),Q(d,3)!=0?0:!d.h)}function Ur(d,h){if(4>d)return d+1;var w=d-2>>1;return(2+(1&d)<<w)+Q(h,w)+1}function Ua(d,h){return 120<h?h-120:1<=(w=((w=Zo[h-1])>>4)*d+(8-(15&w)))?w:1;var w}function zn(d,h,w){var N=J(w),I=d[h+=255&N].g-8;return 0<I&&(pe(w,w.u+8),N=J(w),h+=d[h].value,h+=N&(1<<I)-1),pe(w,w.u+d[h].g),d[h].value}function cr(d,h,w){return w.g+=d.g,w.value+=d.value<<h>>>0,a(8>=w.g),d.g}function Vn(d,h,w){var N=d.xc;return a((h=N==0?0:d.vc[d.md*(w>>N)+(h>>N)])<d.Wb),d.Ya[h]}function ws(d,h,w,N){var I=d.ab,T=d.c*h,O=d.C;h=O+h;var W=w,V=N;for(N=d.Ta,w=d.Ua;0<I--;){var te=d.gc[I],ye=O,Be=h,ne=W,we=V,Te=(V=N,W=w,te.Ea);switch(a(ye<Be),a(Be<=te.nc),te.hc){case 2:fr(ne,we,(Be-ye)*Te,V,W);break;case 0:var Ke=ye,We=Be,Ye=V,Je=W,et=(Tt=te).Ea;Ke==0&&(ls(ne,we,null,null,1,Ye,Je),Jt(ne,we+1,0,0,et-1,Ye,Je+1),we+=et,Je+=et,++Ke);for(var tt=1<<Tt.b,Ht=tt-1,Lt=Qe(et,Tt.b),fn=Tt.K,Tt=Tt.w+(Ke>>Tt.b)*Lt;Ke<We;){var Cn=fn,jr=Tt,mn=1;for(cs(ne,we,Ye,Je-et,1,Ye,Je);mn<et;){var _t=(mn&~Ht)+tt;_t>et&&(_t=et),(0,Js[Cn[jr++]>>8&15])(ne,we+ +mn,Ye,Je+mn-et,_t-mn,Ye,Je+mn),mn=_t}we+=et,Je+=et,++Ke&Ht||(Tt+=Lt)}Be!=te.nc&&o(V,W-Te,V,W+(Be-ye-1)*Te,Te);break;case 1:for(Te=ne,We=we,et=(ne=te.Ea)-(Je=ne&~(Ye=(we=1<<te.b)-1)),Ke=Qe(ne,te.b),tt=te.K,te=te.w+(ye>>te.b)*Ke;ye<Be;){for(Ht=tt,Lt=te,fn=new Rt,Tt=We+Je,Cn=We+ne;We<Tt;)qe(Ht[Lt++],fn),da(fn,Te,We,we,V,W),We+=we,W+=we;We<Cn&&(qe(Ht[Lt++],fn),da(fn,Te,We,et,V,W),We+=et,W+=et),++ye&Ye||(te+=Ke)}break;case 3:if(ne==V&&we==W&&0<te.b){for(We=V,ne=Te=W+(Be-ye)*Te-(Je=(Be-ye)*Qe(te.Ea,te.b)),we=V,Ye=W,Ke=[],Je=(et=Je)-1;0<=Je;--Je)Ke[Je]=we[Ye+Je];for(Je=et-1;0<=Je;--Je)We[ne+Je]=Ke[Je];Gs(te,ye,Be,V,Te,V,W)}else Gs(te,ye,Be,ne,we,V,W)}W=N,V=w}V!=w&&o(N,w,W,V,T)}function zs(d,h){var w=d.V,N=d.Ba+d.c*d.C,I=h-d.C;if(a(h<=d.l.o),a(16>=I),0<I){var T=d.l,O=d.Ta,W=d.Ua,V=T.width;if(ws(d,I,w,N),I=W=[W],a((w=d.C)<(N=h)),a(T.v<T.va),N>T.o&&(N=T.o),w<T.j){var te=T.j-w;w=T.j,I[0]+=te*V}if(w>=N?w=0:(I[0]+=4*T.v,T.ka=w-T.j,T.U=T.va-T.v,T.T=N-w,w=1),w){if(W=W[0],11>(w=d.ca).S){var ye=w.f.RGBA,Be=(N=w.S,I=T.U,T=T.T,te=ye.eb,ye.A),ne=T;for(ye=ye.fb+d.Ma*ye.A;0<ne--;){var we=O,Te=W,Ke=I,We=te,Ye=ye;switch(N){case Qo:yo(we,Te,Ke,We,Ye);break;case Is:ds(we,Te,Ke,We,Ye);break;case wo:ds(we,Te,Ke,We,Ye),Xs(We,Ye,0,Ke,1,0);break;case Ma:Na(we,Te,Ke,We,Ye);break;case Ra:yt(we,Te,Ke,We,Ye,1);break;case eo:yt(we,Te,Ke,We,Ye,1),Xs(We,Ye,0,Ke,1,0);break;case To:yt(we,Te,Ke,We,Ye,0);break;case Oo:yt(we,Te,Ke,We,Ye,0),Xs(We,Ye,1,Ke,1,0);break;case Ee:Ps(we,Te,Ke,We,Ye);break;case Bo:Ps(we,Te,Ke,We,Ye),jl(We,Ye,Ke,1,0);break;case ri:Ls(we,Te,Ke,We,Ye);break;default:a(0)}W+=V,ye+=Be}d.Ma+=T}else alert("todo:EmitRescaledRowsYUVA");a(d.Ma<=w.height)}}d.C=h,a(d.C<=d.i)}function Wa(d){var h;if(0<d.ua)return 0;for(h=0;h<d.Wb;++h){var w=d.Ya[h].G,N=d.Ya[h].H;if(0<w[1][N[1]+0].g||0<w[2][N[2]+0].g||0<w[3][N[3]+0].g)return 0}return 1}function Pt(d,h,w,N,I,T){if(d.Z!=0){var O=d.qd,W=d.rd;for(a(Xe[d.Z]!=null);h<w;++h)Xe[d.Z](O,W,N,I,N,I,T),O=N,W=I,I+=T;d.qd=O,d.rd=W}}function Rn(d,h){var w=d.l.ma,N=w.Z==0||w.Z==1?d.l.j:d.C;if(N=d.C<N?N:d.C,a(h<=d.l.o),h>N){var I=d.l.width,T=w.ca,O=w.tb+I*N,W=d.V,V=d.Ba+d.c*N,te=d.gc;a(d.ab==1),a(te[0].hc==3),Ri(te[0],N,h,W,V,T,O),Pt(w,N,h,T,O,I)}d.C=d.Ma=h}function Ca(d,h,w,N,I,T,O){var W=d.$/N,V=d.$%N,te=d.m,ye=d.s,Be=w+d.$,ne=Be;I=w+N*I;var we=w+N*T,Te=280+ye.ua,Ke=d.Pb?W:16777216,We=0<ye.ua?ye.Wa:null,Ye=ye.wc,Je=Be<we?Vn(ye,V,W):null;a(d.C<T),a(we<=I);var et=!1;e:for(;;){for(;et||Be<we;){var tt=0;if(W>=Ke){var Ht=Be-w;a((Ke=d).Pb),Ke.wd=Ke.m,Ke.xd=Ht,0<Ke.s.ua&&mt(Ke.s.Wa,Ke.s.vb),Ke=W+el}if(V&Ye||(Je=Vn(ye,V,W)),a(Je!=null),Je.Qb&&(h[Be]=Je.qb,et=!0),!et)if(be(te),Je.jc){tt=te,Ht=h;var Lt=Be,fn=Je.pd[J(tt)&Ea-1];a(Je.jc),256>fn.g?(pe(tt,tt.u+fn.g),Ht[Lt]=fn.value,tt=0):(pe(tt,tt.u+fn.g-256),a(256<=fn.value),tt=fn.value),tt==0&&(et=!0)}else tt=zn(Je.G[0],Je.H[0],te);if(te.h)break;if(et||256>tt){if(!et)if(Je.nd)h[Be]=(Je.qb|tt<<8)>>>0;else{if(be(te),et=zn(Je.G[1],Je.H[1],te),be(te),Ht=zn(Je.G[2],Je.H[2],te),Lt=zn(Je.G[3],Je.H[3],te),te.h)break;h[Be]=(Lt<<24|et<<16|tt<<8|Ht)>>>0}if(et=!1,++Be,++V>=N&&(V=0,++W,O!=null&&W<=T&&!(W%16)&&O(d,W),We!=null))for(;ne<Be;)tt=h[ne++],We.X[(506832829*tt&4294967295)>>>We.Mb]=tt}else if(280>tt){if(tt=Ur(tt-256,te),Ht=zn(Je.G[4],Je.H[4],te),be(te),Ht=Ua(N,Ht=Ur(Ht,te)),te.h)break;if(Be-w<Ht||I-Be<tt)break e;for(Lt=0;Lt<tt;++Lt)h[Be+Lt]=h[Be+Lt-Ht];for(Be+=tt,V+=tt;V>=N;)V-=N,++W,O!=null&&W<=T&&!(W%16)&&O(d,W);if(a(Be<=I),V&Ye&&(Je=Vn(ye,V,W)),We!=null)for(;ne<Be;)tt=h[ne++],We.X[(506832829*tt&4294967295)>>>We.Mb]=tt}else{if(!(tt<Te))break e;for(et=tt-280,a(We!=null);ne<Be;)tt=h[ne++],We.X[(506832829*tt&4294967295)>>>We.Mb]=tt;tt=Be,a(!(et>>>(Ht=We).Xa)),h[tt]=Ht.X[et],et=!0}et||a(te.h==oe(te))}if(d.Pb&&te.h&&Be<I)a(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&mt(d.s.vb,d.s.Wa);else{if(te.h)break e;O?.(d,W>T?T:W),d.a=0,d.$=Be-w}return 1}return d.a=3,0}function Pa(d){a(d!=null),d.vc=null,d.yc=null,d.Ya=null;var h=d.Wa;h!=null&&(h.X=null),d.vb=null,a(d!=null)}function xo(){var d=new tn;return d==null?null:(d.a=0,d.xb=Ze,vn("Predictor","VP8LPredictors"),vn("Predictor","VP8LPredictors_C"),vn("PredictorAdd","VP8LPredictorsAdd"),vn("PredictorAdd","VP8LPredictorsAdd_C"),fr=ke,da=se,yo=nt,ds=pt,Ps=He,Ls=ct,Na=Qt,Z.VP8LMapColor32b=ni,Z.VP8LMapColor8b=Hr,d)}function na(d,h,w,N,I){var T=1,O=[d],W=[h],V=N.m,te=N.s,ye=null,Be=0;e:for(;;){if(w)for(;T&&Q(V,1);){var ne=O,we=W,Te=N,Ke=1,We=Te.m,Ye=Te.gc[Te.ab],Je=Q(We,2);if(Te.Oc&1<<Je)T=0;else{switch(Te.Oc|=1<<Je,Ye.hc=Je,Ye.Ea=ne[0],Ye.nc=we[0],Ye.K=[null],++Te.ab,a(4>=Te.ab),Je){case 0:case 1:Ye.b=Q(We,3)+2,Ke=na(Qe(Ye.Ea,Ye.b),Qe(Ye.nc,Ye.b),0,Te,Ye.K),Ye.K=Ye.K[0];break;case 3:var et,tt=Q(We,8)+1,Ht=16<tt?0:4<tt?1:2<tt?2:3;if(ne[0]=Qe(Ye.Ea,Ht),Ye.b=Ht,et=Ke=na(tt,1,0,Te,Ye.K)){var Lt,fn=tt,Tt=Ye,Cn=1<<(8>>Tt.b),jr=l(Cn);if(jr==null)et=0;else{var mn=Tt.K[0],_t=Tt.w;for(jr[0]=Tt.K[0][0],Lt=1;Lt<1*fn;++Lt)jr[Lt]=bt(mn[_t+Lt],jr[Lt-1]);for(;Lt<4*Cn;++Lt)jr[Lt]=0;Tt.K[0]=null,Tt.K[0]=jr,et=1}}Ke=et;break;case 2:break;default:a(0)}T=Ke}}if(O=O[0],W=W[0],T&&Q(V,1)&&!(T=1<=(Be=Q(V,4))&&11>=Be)){N.a=3;break e}var xt;if(xt=T)t:{var Pr,sn,jn,ar=N,fa=O,Dr=W,xr=Be,Gr=w,ha=ar.m,hr=ar.s,In=[null],Tn=1,pr=0,On=Ll[xr];n:for(;;){if(Gr&&Q(ha,1)){var Sr=Q(ha,3)+2,Nr=Qe(fa,Sr),Qn=Qe(Dr,Sr),Fa=Nr*Qn;if(!na(Nr,Qn,0,ar,In))break n;for(In=In[0],hr.xc=Sr,Pr=0;Pr<Fa;++Pr){var Gn=In[Pr]>>8&65535;In[Pr]=Gn,Gn>=Tn&&(Tn=Gn+1)}}if(ha.h)break n;for(sn=0;5>sn;++sn){var Xn=Es[sn];!sn&&0<xr&&(Xn+=1<<xr),pr<Xn&&(pr=Xn)}var Tr=g(Tn*On,ee),ka=Tn,Si=g(ka,Ne);if(Si==null)var Lr=null;else a(65536>=ka),Lr=Si;var _r=l(pr);if(Lr==null||_r==null||Tr==null){ar.a=1;break n}var Da=Tr;for(Pr=jn=0;Pr<Tn;++Pr){var Zn=Lr[Pr],Ta=Zn.G,Qi=Zn.H,ps=0,pa=1,Ir=0;for(sn=0;5>sn;++sn){Xn=Es[sn],Ta[sn]=Da,Qi[sn]=jn,!sn&&0<xr&&(Xn+=1<<xr);a:{var jo,ao=Xn,nl=ar,Rs=_r,ed=Da,Pc=jn,or=0,ms=nl.m,Lc=Q(ms,1);if(c(Rs,0,0,ao),Lc){var _c=Q(ms,1)+1,Zl=Q(ms,1),ec=Q(ms,Zl==0?1:8);Rs[ec]=1,_c==2&&(Rs[ec=Q(ms,8)]=1);var Fs=1}else{var mr=l(19),Or=Q(ms,4)+4;if(19<Or){nl.a=3;var Er=0;break a}for(jo=0;jo<Or;++jo)mr[Ql[jo]]=Q(ms,3);var rl=void 0,io=void 0,al=nl,eu=mr,Jr=ao,tc=Rs,Ml=0,Ds=al.m,gs=8,Di=g(128,ee);r:for(;$(Di,0,7,eu,19);){if(Q(Ds,1)){var Rl=2+2*Q(Ds,3);if((rl=2+Q(Ds,Rl))>Jr)break r}else rl=Jr;for(io=0;io<Jr&&rl--;){be(Ds);var nc=Di[0+(127&J(Ds))];pe(Ds,Ds.u+nc.g);var So=nc.value;if(16>So)tc[io++]=So,So!=0&&(gs=So);else{var td=So==16,Ic=So-16,nd=Xo[Ic],Ec=Q(Ds,zo[Ic])+nd;if(io+Ec>Jr)break r;for(var rd=td?gs:0;0<Ec--;)tc[io++]=rd}}Ml=1;break r}Ml||(al.a=3),Fs=Ml}(Fs=Fs&&!ms.h)&&(or=$(ed,Pc,8,Rs,ao)),Fs&&or!=0?Er=or:(nl.a=3,Er=0)}if(Er==0)break n;if(pa&&Pl[sn]==1&&(pa=Da[jn].g==0),ps+=Da[jn].g,jn+=Er,3>=sn){var il,rc=_r[0];for(il=1;il<Xn;++il)_r[il]>rc&&(rc=_r[il]);Ir+=rc}}if(Zn.nd=pa,Zn.Qb=0,pa&&(Zn.qb=(Ta[3][Qi[3]+0].value<<24|Ta[1][Qi[1]+0].value<<16|Ta[2][Qi[2]+0].value)>>>0,ps==0&&256>Ta[0][Qi[0]+0].value&&(Zn.Qb=1,Zn.qb+=Ta[0][Qi[0]+0].value<<8)),Zn.jc=!Zn.Qb&&6>Ir,Zn.jc){var Fl,Ti=Zn;for(Fl=0;Fl<Ea;++Fl){var so=Fl,xs=Ti.pd[so],qo=Ti.G[0][Ti.H[0]+so];256<=qo.value?(xs.g=qo.g+256,xs.value=qo.value):(xs.g=0,xs.value=0,so>>=cr(qo,8,xs),so>>=cr(Ti.G[1][Ti.H[1]+so],16,xs),so>>=cr(Ti.G[2][Ti.H[2]+so],0,xs),cr(Ti.G[3][Ti.H[3]+so],24,xs))}}}hr.vc=In,hr.Wb=Tn,hr.Ya=Lr,hr.yc=Tr,xt=1;break t}xt=0}if(!(T=xt)){N.a=3;break e}if(0<Be){if(te.ua=1<<Be,!Y(te.Wa,Be)){N.a=1,T=0;break e}}else te.ua=0;var ac=N,ic=O,ad=W,sc=ac.s,oc=sc.xc;if(ac.c=ic,ac.i=ad,sc.md=Qe(ic,oc),sc.wc=oc==0?-1:(1<<oc)-1,w){N.xb=Ie;break e}if((ye=l(O*W))==null){N.a=1,T=0;break e}T=(T=Ca(N,ye,0,O,W,W,null))&&!V.h;break e}return T?(I!=null?I[0]=ye:(a(ye==null),a(w)),N.$=0,w||Pa(te)):Pa(te),T}function ra(d,h){var w=d.c*d.i,N=w+h+16*h;return a(d.c<=h),d.V=l(N),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+w+h,1)}function Ui(d,h){var w=d.C,N=h-w,I=d.V,T=d.Ba+d.c*w;for(a(h<=d.l.o);0<N;){var O=16<N?16:N,W=d.l.ma,V=d.l.width,te=V*O,ye=W.ca,Be=W.tb+V*w,ne=d.Ta,we=d.Ua;ws(d,O,I,T),Sl(ne,we,ye,Be,te),Pt(W,w,w+O,ye,Be,V),N-=O,I+=O*d.c,w+=O}a(w==h),d.C=d.Ma=h}function Us(){this.ub=this.yd=this.td=this.Rb=0}function Ii(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ut(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function xn(){this.Yb=(function(){var d=[];return(function h(w,N,I){for(var T=I[N],O=0;O<T&&(w.push(I.length>N+1?[]:0),!(I.length<N+1));O++)h(w[O],N+1,I)})(d,0,[3,11]),d})()}function rs(){this.jb=l(3),this.Wc=p([4,8],xn),this.Xc=p([4,17],xn)}function qa(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function dr(){this.ld=this.La=this.dd=this.tc=0}function ga(){this.Na=this.la=0}function $a(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function as(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ws(){this.uc=this.M=this.Nb=0,this.wa=Array(new dr),this.Y=0,this.ya=Array(new as),this.aa=0,this.l=new oi}function Wr(){this.y=l(16),this.f=l(8),this.ea=l(8)}function xa(){this.cb=this.a=0,this.sc="",this.m=new C,this.Od=new Us,this.Kc=new Ii,this.ed=new qa,this.Qa=new ut,this.Ic=this.$c=this.Aa=0,this.D=new Ws,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=g(8,C),this.ia=0,this.pb=g(4,$a),this.Pa=new rs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Wr),this.Hd=0,this.rb=Array(new ga),this.sb=0,this.wa=Array(new dr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new as),this.L=this.aa=0,this.gd=p([4,2],dr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Kn(d,h){return 0>d?0:d>h?h:d}function oi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function _o(){var d=new xa;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,vi||(vi=li)),d}function Kt(d,h,w){return d.a==0&&(d.a=h,d.sc=w,d.cb=0),0}function Ha(d,h,w){return 3<=w&&d[h+0]==157&&d[h+1]==1&&d[h+2]==42}function Va(d,h){if(d==null)return 0;if(d.a=0,d.sc="OK",h==null)return Kt(d,2,"null VP8Io passed to VP8GetHeaders()");var w=h.data,N=h.w,I=h.ha;if(4>I)return Kt(d,7,"Truncated header.");var T=w[N+0]|w[N+1]<<8|w[N+2]<<16,O=d.Od;if(O.Rb=!(1&T),O.td=T>>1&7,O.yd=T>>4&1,O.ub=T>>5,3<O.td)return Kt(d,3,"Incorrect keyframe parameters.");if(!O.yd)return Kt(d,4,"Frame not displayable.");N+=3,I-=3;var W=d.Kc;if(O.Rb){if(7>I)return Kt(d,7,"cannot parse picture header");if(!Ha(w,N,I))return Kt(d,3,"Bad code word");W.c=16383&(w[N+4]<<8|w[N+3]),W.Td=w[N+4]>>6,W.i=16383&(w[N+6]<<8|w[N+5]),W.Ud=w[N+6]>>6,N+=7,I-=7,d.za=W.c+15>>4,d.Ub=W.i+15>>4,h.width=W.c,h.height=W.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,c((T=d.Pa).jb,0,255,T.jb.length),a((T=d.Qa)!=null),T.Cb=0,T.Bb=0,T.Fb=1,c(T.Zb,0,0,T.Zb.length),c(T.Lb,0,0,T.Lb)}if(O.ub>I)return Kt(d,7,"bad partition length");Re(T=d.m,w,N,O.ub),N+=O.ub,I-=O.ub,O.Rb&&(W.Ld=De(T),W.Kd=De(T)),W=d.Qa;var V,te=d.Pa;if(a(T!=null),a(W!=null),W.Cb=De(T),W.Cb){if(W.Bb=De(T),De(T)){for(W.Fb=De(T),V=0;4>V;++V)W.Zb[V]=De(T)?ue(T,7):0;for(V=0;4>V;++V)W.Lb[V]=De(T)?ue(T,6):0}if(W.Bb)for(V=0;3>V;++V)te.jb[V]=De(T)?Me(T,8):255}else W.Bb=0;if(T.Ka)return Kt(d,3,"cannot parse segment header");if((W=d.ed).zd=De(T),W.Tb=Me(T,6),W.wb=Me(T,3),W.Pc=De(T),W.Pc&&De(T)){for(te=0;4>te;++te)De(T)&&(W.vd[te]=ue(T,6));for(te=0;4>te;++te)De(T)&&(W.od[te]=ue(T,6))}if(d.L=W.Tb==0?0:W.zd?1:2,T.Ka)return Kt(d,3,"cannot parse filter header");var ye=I;if(I=V=N,N=V+ye,W=ye,d.Xb=(1<<Me(d.m,2))-1,ye<3*(te=d.Xb))w=7;else{for(V+=3*te,W-=3*te,ye=0;ye<te;++ye){var Be=w[I+0]|w[I+1]<<8|w[I+2]<<16;Be>W&&(Be=W),Re(d.Jc[+ye],w,V,Be),V+=Be,W-=Be,I+=3}Re(d.Jc[+te],w,V,W),w=V<N?0:5}if(w!=0)return Kt(d,w,"cannot parse partitions");for(w=Me(V=d.m,7),I=De(V)?ue(V,4):0,N=De(V)?ue(V,4):0,W=De(V)?ue(V,4):0,te=De(V)?ue(V,4):0,V=De(V)?ue(V,4):0,ye=d.Qa,Be=0;4>Be;++Be){if(ye.Cb){var ne=ye.Zb[Be];ye.Fb||(ne+=w)}else{if(0<Be){d.pb[Be]=d.pb[0];continue}ne=w}var we=d.pb[Be];we.Sc[0]=to[Kn(ne+I,127)],we.Sc[1]=Ms[Kn(ne+0,127)],we.Eb[0]=2*to[Kn(ne+N,127)],we.Eb[1]=101581*Ms[Kn(ne+W,127)]>>16,8>we.Eb[1]&&(we.Eb[1]=8),we.Qc[0]=to[Kn(ne+te,117)],we.Qc[1]=Ms[Kn(ne+V,127)],we.lc=ne+V}if(!O.Rb)return Kt(d,4,"Not a key frame.");for(De(T),O=d.Pa,w=0;4>w;++w){for(I=0;8>I;++I)for(N=0;3>N;++N)for(W=0;11>W;++W)te=Ue(T,_[w][I][N][W])?Me(T,8):k[w][I][N][W],O.Wc[w][I].Yb[N][W]=te;for(I=0;17>I;++I)O.Xc[w][I]=O.Wc[w][D[I]]}return d.kc=De(T),d.kc&&(d.Bd=Me(T,8)),d.cb=1}function li(d,h,w,N,I,T,O){var W=h[I].Yb[w];for(w=0;16>I;++I){if(!Ue(d,W[w+0]))return I;for(;!Ue(d,W[w+1]);)if(W=h[++I].Yb[0],w=0,I==16)return 16;var V=h[I+1].Yb;if(Ue(d,W[w+2])){var te=d,ye=0;if(Ue(te,(ne=W)[(Be=w)+3]))if(Ue(te,ne[Be+6])){for(W=0,Be=2*(ye=Ue(te,ne[Be+8]))+(ne=Ue(te,ne[Be+9+ye])),ye=0,ne=no[Be];ne[W];++W)ye+=ye+Ue(te,ne[W]);ye+=3+(8<<Be)}else Ue(te,ne[Be+7])?(ye=7+2*Ue(te,165),ye+=Ue(te,145)):ye=5+Ue(te,159);else ye=Ue(te,ne[Be+4])?3+Ue(te,ne[Be+5]):2;W=V[2]}else ye=1,W=V[1];V=O+_l[I],0>(te=d).b&&Fe(te);var Be,ne=te.b,we=(Be=te.Ca>>1)-(te.I>>ne)>>31;--te.b,te.Ca+=we,te.Ca|=1,te.I-=(Be+1&we)<<ne,T[V]=((ye^we)-we)*N[(0<I)+0]}return 16}function Wi(d){var h=d.rb[d.sb-1];h.la=0,h.Na=0,c(d.zc,0,0,d.zc.length),d.ja=0}function Ya(d,h,w,N,I){I=d[h+w+32*N]+(I>>3),d[h+w+32*N]=-256&I?0>I?0:255:I}function Mr(d,h,w,N,I,T){Ya(d,h,0,w,N+I),Ya(d,h,1,w,N+T),Ya(d,h,2,w,N-T),Ya(d,h,3,w,N-I)}function Ga(d){return(20091*d>>16)+d}function js(d,h,w,N){var I,T=0,O=l(16);for(I=0;4>I;++I){var W=d[h+0]+d[h+8],V=d[h+0]-d[h+8],te=(35468*d[h+4]>>16)-Ga(d[h+12]),ye=Ga(d[h+4])+(35468*d[h+12]>>16);O[T+0]=W+ye,O[T+1]=V+te,O[T+2]=V-te,O[T+3]=W-ye,T+=4,h++}for(I=T=0;4>I;++I)W=(d=O[T+0]+4)+O[T+8],V=d-O[T+8],te=(35468*O[T+4]>>16)-Ga(O[T+12]),Ya(w,N,0,0,W+(ye=Ga(O[T+4])+(35468*O[T+12]>>16))),Ya(w,N,1,0,V+te),Ya(w,N,2,0,V-te),Ya(w,N,3,0,W-ye),T++,N+=32}function Io(d,h,w,N){var I=d[h+0]+4,T=35468*d[h+4]>>16,O=Ga(d[h+4]),W=35468*d[h+1]>>16;Mr(w,N,0,I+O,d=Ga(d[h+1]),W),Mr(w,N,1,I+T,d,W),Mr(w,N,2,I-T,d,W),Mr(w,N,3,I-O,d,W)}function Un(d,h,w,N,I){js(d,h,w,N),I&&js(d,h+16,w,N+4)}function La(d,h,w,N){Ks(d,h+0,w,N,1),Ks(d,h+32,w,N+128,1)}function qr(d,h,w,N){var I;for(d=d[h+0]+4,I=0;4>I;++I)for(h=0;4>h;++h)Ya(w,N,h,I,d)}function Ln(d,h,w,N){d[h+0]&&Mn(d,h+0,w,N),d[h+16]&&Mn(d,h+16,w,N+4),d[h+32]&&Mn(d,h+32,w,N+128),d[h+48]&&Mn(d,h+48,w,N+128+4)}function ci(d,h,w,N){var I,T=l(16);for(I=0;4>I;++I){var O=d[h+0+I]+d[h+12+I],W=d[h+4+I]+d[h+8+I],V=d[h+4+I]-d[h+8+I],te=d[h+0+I]-d[h+12+I];T[0+I]=O+W,T[8+I]=O-W,T[4+I]=te+V,T[12+I]=te-V}for(I=0;4>I;++I)O=(d=T[0+4*I]+3)+T[3+4*I],W=T[1+4*I]+T[2+4*I],V=T[1+4*I]-T[2+4*I],te=d-T[3+4*I],w[N+0]=O+W>>3,w[N+16]=te+V>>3,w[N+32]=O-W>>3,w[N+48]=te-V>>3,N+=64}function Ss(d,h,w){var N,I=h-32,T=ua,O=255-d[I-1];for(N=0;N<w;++N){var W,V=T,te=O+d[h-1];for(W=0;W<w;++W)d[h+W]=V[te+d[I+W]];h+=32}}function Eo(d,h){Ss(d,h,4)}function Ns(d,h){Ss(d,h,8)}function $r(d,h){Ss(d,h,16)}function qi(d,h){var w;for(w=0;16>w;++w)o(d,h+32*w,d,h-32,16)}function bn(d,h){var w;for(w=16;0<w;--w)c(d,h,d[h-1],16),h+=32}function ir(d,h,w){var N;for(N=0;16>N;++N)c(h,w+32*N,d,16)}function _a(d,h){var w,N=16;for(w=0;16>w;++w)N+=d[h-1+32*w]+d[h+w-32];ir(N>>5,d,h)}function ya(d,h){var w,N=8;for(w=0;16>w;++w)N+=d[h-1+32*w];ir(N>>4,d,h)}function Yn(d,h){var w,N=8;for(w=0;16>w;++w)N+=d[h+w-32];ir(N>>4,d,h)}function aa(d,h){ir(128,d,h)}function en(d,h,w){return d+2*h+w+2>>2}function Ja(d,h){var w,N=h-32;for(N=new Uint8Array([en(d[N-1],d[N+0],d[N+1]),en(d[N+0],d[N+1],d[N+2]),en(d[N+1],d[N+2],d[N+3]),en(d[N+2],d[N+3],d[N+4])]),w=0;4>w;++w)o(d,h+32*w,N,0,N.length)}function Nn(d,h){var w=d[h-1],N=d[h-1+32],I=d[h-1+64],T=d[h-1+96];_e(d,h+0,16843009*en(d[h-1-32],w,N)),_e(d,h+32,16843009*en(w,N,I)),_e(d,h+64,16843009*en(N,I,T)),_e(d,h+96,16843009*en(I,T,T))}function qs(d,h){var w,N=4;for(w=0;4>w;++w)N+=d[h+w-32]+d[h-1+32*w];for(N>>=3,w=0;4>w;++w)c(d,h+32*w,N,4)}function br(d,h){var w=d[h-1+0],N=d[h-1+32],I=d[h-1+64],T=d[h-1-32],O=d[h+0-32],W=d[h+1-32],V=d[h+2-32],te=d[h+3-32];d[h+0+96]=en(N,I,d[h-1+96]),d[h+1+96]=d[h+0+64]=en(w,N,I),d[h+2+96]=d[h+1+64]=d[h+0+32]=en(T,w,N),d[h+3+96]=d[h+2+64]=d[h+1+32]=d[h+0+0]=en(O,T,w),d[h+3+64]=d[h+2+32]=d[h+1+0]=en(W,O,T),d[h+3+32]=d[h+2+0]=en(V,W,O),d[h+3+0]=en(te,V,W)}function $i(d,h){var w=d[h+1-32],N=d[h+2-32],I=d[h+3-32],T=d[h+4-32],O=d[h+5-32],W=d[h+6-32],V=d[h+7-32];d[h+0+0]=en(d[h+0-32],w,N),d[h+1+0]=d[h+0+32]=en(w,N,I),d[h+2+0]=d[h+1+32]=d[h+0+64]=en(N,I,T),d[h+3+0]=d[h+2+32]=d[h+1+64]=d[h+0+96]=en(I,T,O),d[h+3+32]=d[h+2+64]=d[h+1+96]=en(T,O,W),d[h+3+64]=d[h+2+96]=en(O,W,V),d[h+3+96]=en(W,V,V)}function $s(d,h){var w=d[h-1+0],N=d[h-1+32],I=d[h-1+64],T=d[h-1-32],O=d[h+0-32],W=d[h+1-32],V=d[h+2-32],te=d[h+3-32];d[h+0+0]=d[h+1+64]=T+O+1>>1,d[h+1+0]=d[h+2+64]=O+W+1>>1,d[h+2+0]=d[h+3+64]=W+V+1>>1,d[h+3+0]=V+te+1>>1,d[h+0+96]=en(I,N,w),d[h+0+64]=en(N,w,T),d[h+0+32]=d[h+1+96]=en(w,T,O),d[h+1+32]=d[h+2+96]=en(T,O,W),d[h+2+32]=d[h+3+96]=en(O,W,V),d[h+3+32]=en(W,V,te)}function ks(d,h){var w=d[h+0-32],N=d[h+1-32],I=d[h+2-32],T=d[h+3-32],O=d[h+4-32],W=d[h+5-32],V=d[h+6-32],te=d[h+7-32];d[h+0+0]=w+N+1>>1,d[h+1+0]=d[h+0+64]=N+I+1>>1,d[h+2+0]=d[h+1+64]=I+T+1>>1,d[h+3+0]=d[h+2+64]=T+O+1>>1,d[h+0+32]=en(w,N,I),d[h+1+32]=d[h+0+96]=en(N,I,T),d[h+2+32]=d[h+1+96]=en(I,T,O),d[h+3+32]=d[h+2+96]=en(T,O,W),d[h+3+64]=en(O,W,V),d[h+3+96]=en(W,V,te)}function va(d,h){var w=d[h-1+0],N=d[h-1+32],I=d[h-1+64],T=d[h-1+96];d[h+0+0]=w+N+1>>1,d[h+2+0]=d[h+0+32]=N+I+1>>1,d[h+2+32]=d[h+0+64]=I+T+1>>1,d[h+1+0]=en(w,N,I),d[h+3+0]=d[h+1+32]=en(N,I,T),d[h+3+32]=d[h+1+64]=en(I,T,T),d[h+3+64]=d[h+2+64]=d[h+0+96]=d[h+1+96]=d[h+2+96]=d[h+3+96]=T}function Mo(d,h){var w=d[h-1+0],N=d[h-1+32],I=d[h-1+64],T=d[h-1+96],O=d[h-1-32],W=d[h+0-32],V=d[h+1-32],te=d[h+2-32];d[h+0+0]=d[h+2+32]=w+O+1>>1,d[h+0+32]=d[h+2+64]=N+w+1>>1,d[h+0+64]=d[h+2+96]=I+N+1>>1,d[h+0+96]=T+I+1>>1,d[h+3+0]=en(W,V,te),d[h+2+0]=en(O,W,V),d[h+1+0]=d[h+3+32]=en(w,O,W),d[h+1+32]=d[h+3+64]=en(N,w,O),d[h+1+64]=d[h+3+96]=en(I,N,w),d[h+1+96]=en(T,I,N)}function di(d,h){var w;for(w=0;8>w;++w)o(d,h+32*w,d,h-32,8)}function tr(d,h){var w;for(w=0;8>w;++w)c(d,h,d[h-1],8),h+=32}function ba(d,h,w){var N;for(N=0;8>N;++N)c(h,w+32*N,d,8)}function is(d,h){var w,N=8;for(w=0;8>w;++w)N+=d[h+w-32]+d[h-1+32*w];ba(N>>4,d,h)}function Hs(d,h){var w,N=4;for(w=0;8>w;++w)N+=d[h+w-32];ba(N>>3,d,h)}function ur(d,h){var w,N=4;for(w=0;8>w;++w)N+=d[h-1+32*w];ba(N>>3,d,h)}function Vs(d,h){ba(128,d,h)}function ui(d,h,w){var N=d[h-w],I=d[h+0],T=3*(I-N)+Fi[1020+d[h-2*w]-d[h+w]],O=Zs[112+(T+4>>3)];d[h-w]=ua[255+N+Zs[112+(T+3>>3)]],d[h+0]=ua[255+I-O]}function Hi(d,h,w,N){var I=d[h+0],T=d[h+w];return yi[255+d[h-2*w]-d[h-w]]>N||yi[255+T-I]>N}function Ys(d,h,w,N){return 4*yi[255+d[h-w]-d[h+0]]+yi[255+d[h-2*w]-d[h+w]]<=N}function ia(d,h,w,N,I){var T=d[h-3*w],O=d[h-2*w],W=d[h-w],V=d[h+0],te=d[h+w],ye=d[h+2*w],Be=d[h+3*w];return 4*yi[255+W-V]+yi[255+O-te]>N?0:yi[255+d[h-4*w]-T]<=I&&yi[255+T-O]<=I&&yi[255+O-W]<=I&&yi[255+Be-ye]<=I&&yi[255+ye-te]<=I&&yi[255+te-V]<=I}function Rr(d,h,w,N){var I=2*N+1;for(N=0;16>N;++N)Ys(d,h+N,w,I)&&ui(d,h+N,w)}function fi(d,h,w,N){var I=2*N+1;for(N=0;16>N;++N)Ys(d,h+N*w,1,I)&&ui(d,h+N*w,1)}function wn(d,h,w,N){var I;for(I=3;0<I;--I)Rr(d,h+=4*w,w,N)}function wa(d,h,w,N){var I;for(I=3;0<I;--I)fi(d,h+=4,w,N)}function Fn(d,h,w,N,I,T,O,W){for(T=2*T+1;0<I--;){if(ia(d,h,w,T,O))if(Hi(d,h,w,W))ui(d,h,w);else{var V=d,te=h,ye=w,Be=V[te-2*ye],ne=V[te-ye],we=V[te+0],Te=V[te+ye],Ke=V[te+2*ye],We=27*(Je=Fi[1020+3*(we-ne)+Fi[1020+Be-Te]])+63>>7,Ye=18*Je+63>>7,Je=9*Je+63>>7;V[te-3*ye]=ua[255+V[te-3*ye]+Je],V[te-2*ye]=ua[255+Be+Ye],V[te-ye]=ua[255+ne+We],V[te+0]=ua[255+we-We],V[te+ye]=ua[255+Te-Ye],V[te+2*ye]=ua[255+Ke-Je]}h+=N}}function Ei(d,h,w,N,I,T,O,W){for(T=2*T+1;0<I--;){if(ia(d,h,w,T,O))if(Hi(d,h,w,W))ui(d,h,w);else{var V=d,te=h,ye=w,Be=V[te-ye],ne=V[te+0],we=V[te+ye],Te=Zs[112+(4+(Ke=3*(ne-Be))>>3)],Ke=Zs[112+(Ke+3>>3)],We=Te+1>>1;V[te-2*ye]=ua[255+V[te-2*ye]+We],V[te-ye]=ua[255+Be+Ke],V[te+0]=ua[255+ne-Te],V[te+ye]=ua[255+we-We]}h+=N}}function nr(d,h,w,N,I,T){Fn(d,h,w,1,16,N,I,T)}function hi(d,h,w,N,I,T){Fn(d,h,1,w,16,N,I,T)}function Ka(d,h,w,N,I,T){var O;for(O=3;0<O;--O)Ei(d,h+=4*w,w,1,16,N,I,T)}function x(d,h,w,N,I,T){var O;for(O=3;0<O;--O)Ei(d,h+=4,1,w,16,N,I,T)}function L(d,h,w,N,I,T,O,W){Fn(d,h,I,1,8,T,O,W),Fn(w,N,I,1,8,T,O,W)}function re(d,h,w,N,I,T,O,W){Fn(d,h,1,I,8,T,O,W),Fn(w,N,1,I,8,T,O,W)}function me(d,h,w,N,I,T,O,W){Ei(d,h+4*I,I,1,8,T,O,W),Ei(w,N+4*I,I,1,8,T,O,W)}function Ae(d,h,w,N,I,T,O,W){Ei(d,h+4,1,I,8,T,O,W),Ei(w,N+4,1,I,8,T,O,W)}function Ge(){this.ba=new ft,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new hn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Nt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zt(){this.ua=0,this.Wa=new Mt,this.vb=new Mt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ne,this.yc=new ee}function tn(){this.xb=this.a=0,this.l=new oi,this.ca=new ft,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zt,this.ab=0,this.gc=g(4,Nt),this.Oc=0}function on(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new oi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function kn(d,h,w,N,I,T,O){for(d=d==null?0:d[h+0],h=0;h<O;++h)I[T+h]=d+w[N+h]&255,d=I[T+h]}function rr(d,h,w,N,I,T,O){var W;if(d==null)kn(null,null,w,N,I,T,O);else for(W=0;W<O;++W)I[T+W]=d[h+W]+w[N+W]&255}function An(d,h,w,N,I,T,O){if(d==null)kn(null,null,w,N,I,T,O);else{var W,V=d[h+0],te=V,ye=V;for(W=0;W<O;++W)te=ye+(V=d[h+W])-te,ye=w[N+W]+(-256&te?0>te?0:255:te)&255,te=V,I[T+W]=ye}}function Wn(d,h,w,N){var I=h.width,T=h.o;if(a(d!=null&&h!=null),0>w||0>=N||w+N>T)return null;if(!d.Cc){if(d.ga==null){var O;if(d.ga=new on,(O=d.ga==null)||(O=h.width*h.o,a(d.Gb.length==0),d.Gb=l(O),d.Uc=0,d.Gb==null?O=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,O=1),O=!O),!O){O=d.ga;var W=d.Fa,V=d.P,te=d.qc,ye=d.mb,Be=d.nb,ne=V+1,we=te-1,Te=O.l;if(a(W!=null&&ye!=null&&h!=null),Xe[0]=null,Xe[1]=kn,Xe[2]=rr,Xe[3]=An,O.ca=ye,O.tb=Be,O.c=h.width,O.i=h.height,a(0<O.c&&0<O.i),1>=te)h=0;else if(O.$a=3&W[V+0],O.Z=W[V+0]>>2&3,O.Lc=W[V+0]>>4&3,V=W[V+0]>>6&3,0>O.$a||1<O.$a||4<=O.Z||1<O.Lc||V)h=0;else if(Te.put=St,Te.ac=pn,Te.bc=Xt,Te.ma=O,Te.width=h.width,Te.height=h.height,Te.Da=h.Da,Te.v=h.v,Te.va=h.va,Te.j=h.j,Te.o=h.o,O.$a)e:{a(O.$a==1),h=xo();t:for(;;){if(h==null){h=0;break e}if(a(O!=null),O.mc=h,h.c=O.c,h.i=O.i,h.l=O.l,h.l.ma=O,h.l.width=O.c,h.l.height=O.i,h.a=0,Ce(h.m,W,ne,we),!na(O.c,O.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&Wa(h.s)?(O.ic=1,W=h.c*h.i,h.Ta=null,h.Ua=0,h.V=l(W),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(O.ic=0,h=ra(h,O.c)),!h))break t;h=1;break e}O.mc=null,h=0}else h=we>=O.c*O.i;O=!h}if(O)return null;d.ga.Lc!=1?d.Ga=0:N=T-w}a(d.ga!=null),a(w+N<=T);e:{if(h=(W=d.ga).c,T=W.l.o,W.$a==0){if(ne=d.rc,we=d.Vc,Te=d.Fa,V=d.P+1+w*h,te=d.mb,ye=d.nb+w*h,a(V<=d.P+d.qc),W.Z!=0)for(a(Xe[W.Z]!=null),O=0;O<N;++O)Xe[W.Z](ne,we,Te,V,te,ye,h),ne=te,we=ye,ye+=h,V+=h;else for(O=0;O<N;++O)o(te,ye,Te,V,h),ne=te,we=ye,ye+=h,V+=h;d.rc=ne,d.Vc=we}else{if(a(W.mc!=null),h=w+N,a((O=W.mc)!=null),a(h<=O.i),O.C>=h)h=1;else if(W.ic||Qa(),W.ic){W=O.V,ne=O.Ba,we=O.c;var Ke=O.i,We=(Te=1,V=O.$/we,te=O.$%we,ye=O.m,Be=O.s,O.$),Ye=we*Ke,Je=we*h,et=Be.wc,tt=We<Je?Vn(Be,te,V):null;a(We<=Ye),a(h<=Ke),a(Wa(Be));t:for(;;){for(;!ye.h&&We<Je;){if(te&et||(tt=Vn(Be,te,V)),a(tt!=null),be(ye),256>(Ke=zn(tt.G[0],tt.H[0],ye)))W[ne+We]=Ke,++We,++te>=we&&(te=0,++V<=h&&!(V%16)&&Rn(O,V));else{if(!(280>Ke)){Te=0;break t}Ke=Ur(Ke-256,ye);var Ht,Lt=zn(tt.G[4],tt.H[4],ye);if(be(ye),!(We>=(Lt=Ua(we,Lt=Ur(Lt,ye)))&&Ye-We>=Ke)){Te=0;break t}for(Ht=0;Ht<Ke;++Ht)W[ne+We+Ht]=W[ne+We+Ht-Lt];for(We+=Ke,te+=Ke;te>=we;)te-=we,++V<=h&&!(V%16)&&Rn(O,V);We<Je&&te&et&&(tt=Vn(Be,te,V))}a(ye.h==oe(ye))}Rn(O,V>h?h:V);break t}!Te||ye.h&&We<Ye?(Te=0,O.a=ye.h?5:3):O.$=We,h=Te}else h=Ca(O,O.V,O.Ba,O.c,O.i,h,Ui);if(!h){N=0;break e}}w+N>=T&&(d.Cc=1),N=1}if(!N)return null;if(d.Cc&&((N=d.ga)!=null&&(N.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+w*I}function _n(d,h,w,N,I,T){for(;0<I--;){var O,W=d,V=h+(w?1:0),te=d,ye=h+(w?0:3);for(O=0;O<N;++O){var Be=te[ye+4*O];Be!=255&&(Be*=32897,W[V+4*O+0]=W[V+4*O+0]*Be>>23,W[V+4*O+1]=W[V+4*O+1]*Be>>23,W[V+4*O+2]=W[V+4*O+2]*Be>>23)}h+=T}}function $n(d,h,w,N,I){for(;0<N--;){var T;for(T=0;T<w;++T){var O=d[h+2*T+0],W=15&(te=d[h+2*T+1]),V=4369*W,te=(240&te|te>>4)*V>>16;d[h+2*T+0]=(240&O|O>>4)*V>>16&240|(15&O|O<<4)*V>>16>>4&15,d[h+2*T+1]=240&te|W}h+=I}}function Cr(d,h,w,N,I,T,O,W){var V,te,ye=255;for(te=0;te<I;++te){for(V=0;V<N;++V){var Be=d[h+V];T[O+4*V]=Be,ye&=Be}h+=w,O+=W}return ye!=255}function Vi(d,h,w,N,I){var T;for(T=0;T<I;++T)w[N+T]=d[h+T]>>8}function Qa(){Xs=_n,jl=$n,Do=Cr,Sl=Vi}function Ia(d,h,w){Z[d]=function(N,I,T,O,W,V,te,ye,Be,ne,we,Te,Ke,We,Ye,Je,et){var tt,Ht=et-1>>1,Lt=W[V+0]|te[ye+0]<<16,fn=Be[ne+0]|we[Te+0]<<16;a(N!=null);var Tt=3*Lt+fn+131074>>2;for(h(N[I+0],255&Tt,Tt>>16,Ke,We),T!=null&&(Tt=3*fn+Lt+131074>>2,h(T[O+0],255&Tt,Tt>>16,Ye,Je)),tt=1;tt<=Ht;++tt){var Cn=W[V+tt]|te[ye+tt]<<16,jr=Be[ne+tt]|we[Te+tt]<<16,mn=Lt+Cn+fn+jr+524296,_t=mn+2*(Cn+fn)>>3;Tt=_t+Lt>>1,Lt=(mn=mn+2*(Lt+jr)>>3)+Cn>>1,h(N[I+2*tt-1],255&Tt,Tt>>16,Ke,We+(2*tt-1)*w),h(N[I+2*tt-0],255&Lt,Lt>>16,Ke,We+(2*tt-0)*w),T!=null&&(Tt=mn+fn>>1,Lt=_t+jr>>1,h(T[O+2*tt-1],255&Tt,Tt>>16,Ye,Je+(2*tt-1)*w),h(T[O+2*tt+0],255&Lt,Lt>>16,Ye,Je+(2*tt+0)*w)),Lt=Cn,fn=jr}1&et||(Tt=3*Lt+fn+131074>>2,h(N[I+et-1],255&Tt,Tt>>16,Ke,We+(et-1)*w),T!=null&&(Tt=3*fn+Lt+131074>>2,h(T[O+et-1],255&Tt,Tt>>16,Ye,Je+(et-1)*w)))}}function pi(){It[Qo]=vt,It[Is]=un,It[Ma]=Dn,It[Ra]=gr,It[To]=Vr,It[Ee]=ai,It[ri]=Il,It[wo]=un,It[eo]=gr,It[Oo]=Vr,It[Bo]=ai}function Yi(d){return d&-16384?0>d?0:255:d>>bi}function ss(d,h){return Yi((19077*d>>8)+(26149*h>>8)-14234)}function sa(d,h,w){return Yi((19077*d>>8)-(6419*h>>8)-(13320*w>>8)+8708)}function oa(d,h){return Yi((19077*d>>8)+(33050*h>>8)-17685)}function la(d,h,w,N,I){N[I+0]=ss(d,w),N[I+1]=sa(d,h,w),N[I+2]=oa(d,h)}function ca(d,h,w,N,I){N[I+0]=oa(d,h),N[I+1]=sa(d,h,w),N[I+2]=ss(d,w)}function mi(d,h,w,N,I){var T=sa(d,h,w);h=T<<3&224|oa(d,h)>>3,N[I+0]=248&ss(d,w)|T>>5,N[I+1]=h}function Xa(d,h,w,N,I){var T=240&oa(d,h)|15;N[I+0]=240&ss(d,w)|sa(d,h,w)>>4,N[I+1]=T}function As(d,h,w,N,I){N[I+0]=255,la(d,h,w,N,I+1)}function kt(d,h,w,N,I){ca(d,h,w,N,I),N[I+3]=255}function dn(d,h,w,N,I){la(d,h,w,N,I),N[I+3]=255}function Za(d,h,w){Z[d]=function(N,I,T,O,W,V,te,ye,Be){for(var ne=ye+(-2&Be)*w;ye!=ne;)h(N[I+0],T[O+0],W[V+0],te,ye),h(N[I+1],T[O+0],W[V+0],te,ye+w),I+=2,++O,++V,ye+=2*w;1&Be&&h(N[I+0],T[O+0],W[V+0],te,ye)}}function ei(d,h,w){return w==0?d==0?h==0?6:5:h==0?4:0:w}function os(d,h,w,N,I){switch(d>>>30){case 3:Ks(h,w,N,I,0);break;case 2:sr(h,w,N,I);break;case 1:Mn(h,w,N,I)}}function ti(d,h){var w,N,I=h.M,T=h.Nb,O=d.oc,W=d.pc+40,V=d.oc,te=d.pc+584,ye=d.oc,Be=d.pc+600;for(w=0;16>w;++w)O[W+32*w-1]=129;for(w=0;8>w;++w)V[te+32*w-1]=129,ye[Be+32*w-1]=129;for(0<I?O[W-1-32]=V[te-1-32]=ye[Be-1-32]=129:(c(O,W-32-1,127,21),c(V,te-32-1,127,9),c(ye,Be-32-1,127,9)),N=0;N<d.za;++N){var ne=h.ya[h.aa+N];if(0<N){for(w=-1;16>w;++w)o(O,W+32*w-4,O,W+32*w+12,4);for(w=-1;8>w;++w)o(V,te+32*w-4,V,te+32*w+4,4),o(ye,Be+32*w-4,ye,Be+32*w+4,4)}var we=d.Gd,Te=d.Hd+N,Ke=ne.ad,We=ne.Hc;if(0<I&&(o(O,W-32,we[Te].y,0,16),o(V,te-32,we[Te].f,0,8),o(ye,Be-32,we[Te].ea,0,8)),ne.Za){var Ye=O,Je=W-32+16;for(0<I&&(N>=d.za-1?c(Ye,Je,we[Te].y[15],4):o(Ye,Je,we[Te+1].y,0,4)),w=0;4>w;w++)Ye[Je+128+w]=Ye[Je+256+w]=Ye[Je+384+w]=Ye[Je+0+w];for(w=0;16>w;++w,We<<=2)Ye=O,Je=W+Cc[w],le[ne.Ob[w]](Ye,Je),os(We,Ke,16*+w,Ye,Je)}else if(Ye=ei(N,I,ne.Ob[0]),ae[Ye](O,W),We!=0)for(w=0;16>w;++w,We<<=2)os(We,Ke,16*+w,O,W+Cc[w]);for(w=ne.Gc,Ye=ei(N,I,ne.Dd),Oe[Ye](V,te),Oe[Ye](ye,Be),We=Ke,Ye=V,Je=te,255&(ne=0|w)&&(170&ne?En(We,256,Ye,Je):Hn(We,256,Ye,Je)),ne=ye,We=Be,255&(w>>=8)&&(170&w?En(Ke,320,ne,We):Hn(Ke,320,ne,We)),I<d.Ub-1&&(o(we[Te].y,0,O,W+480,16),o(we[Te].f,0,V,te+224,8),o(we[Te].ea,0,ye,Be+224,8)),w=8*T*d.B,we=d.sa,Te=d.ta+16*N+16*T*d.R,Ke=d.qa,ne=d.ra+8*N+w,We=d.Ha,Ye=d.Ia+8*N+w,w=0;16>w;++w)o(we,Te+w*d.R,O,W+32*w,16);for(w=0;8>w;++w)o(Ke,ne+w*d.B,V,te+32*w,8),o(We,Ye+w*d.B,ye,Be+32*w,8)}}function Mi(d,h,w,N,I,T,O,W,V){var te=[0],ye=[0],Be=0,ne=V!=null?V.kd:0,we=V??new rt;if(d==null||12>w)return 7;we.data=d,we.w=h,we.ha=w,h=[h],w=[w],we.gb=[we.gb];e:{var Te=h,Ke=w,We=we.gb;if(a(d!=null),a(Ke!=null),a(We!=null),We[0]=0,12<=Ke[0]&&!r(d,Te[0],"RIFF")){if(r(d,Te[0]+8,"WEBP")){We=3;break e}var Ye=it(d,Te[0]+4);if(12>Ye||4294967286<Ye){We=3;break e}if(ne&&Ye>Ke[0]-8){We=7;break e}We[0]=Ye,Te[0]+=12,Ke[0]-=12}We=0}if(We!=0)return We;for(Ye=0<we.gb[0],w=w[0];;){e:{var Je=d;Ke=h,We=w;var et=te,tt=ye,Ht=Te=[0];if((Tt=Be=[Be])[0]=0,8>We[0])We=7;else{if(!r(Je,Ke[0],"VP8X")){if(it(Je,Ke[0]+4)!=10){We=3;break e}if(18>We[0]){We=7;break e}var Lt=it(Je,Ke[0]+8),fn=1+ot(Je,Ke[0]+12);if(2147483648<=fn*(Je=1+ot(Je,Ke[0]+15))){We=3;break e}Ht!=null&&(Ht[0]=Lt),et!=null&&(et[0]=fn),tt!=null&&(tt[0]=Je),Ke[0]+=18,We[0]-=18,Tt[0]=1}We=0}}if(Be=Be[0],Te=Te[0],We!=0)return We;if(Ke=!!(2&Te),!Ye&&Be)return 3;if(T!=null&&(T[0]=!!(16&Te)),O!=null&&(O[0]=Ke),W!=null&&(W[0]=0),O=te[0],Te=ye[0],Be&&Ke&&V==null){We=0;break}if(4>w){We=7;break}if(Ye&&Be||!Ye&&!Be&&!r(d,h[0],"ALPH")){w=[w],we.na=[we.na],we.P=[we.P],we.Sa=[we.Sa];e:{Lt=d,We=h,Ye=w;var Tt=we.gb;et=we.na,tt=we.P,Ht=we.Sa,fn=22,a(Lt!=null),a(Ye!=null),Je=We[0];var Cn=Ye[0];for(a(et!=null),a(Ht!=null),et[0]=null,tt[0]=null,Ht[0]=0;;){if(We[0]=Je,Ye[0]=Cn,8>Cn){We=7;break e}var jr=it(Lt,Je+4);if(4294967286<jr){We=3;break e}var mn=8+jr+1&-2;if(fn+=mn,0<Tt&&fn>Tt){We=3;break e}if(!r(Lt,Je,"VP8 ")||!r(Lt,Je,"VP8L")){We=0;break e}if(Cn[0]<mn){We=7;break e}r(Lt,Je,"ALPH")||(et[0]=Lt,tt[0]=Je+8,Ht[0]=jr),Je+=mn,Cn-=mn}}if(w=w[0],we.na=we.na[0],we.P=we.P[0],we.Sa=we.Sa[0],We!=0)break}w=[w],we.Ja=[we.Ja],we.xa=[we.xa];e:if(Tt=d,We=h,Ye=w,et=we.gb[0],tt=we.Ja,Ht=we.xa,Lt=We[0],Je=!r(Tt,Lt,"VP8 "),fn=!r(Tt,Lt,"VP8L"),a(Tt!=null),a(Ye!=null),a(tt!=null),a(Ht!=null),8>Ye[0])We=7;else{if(Je||fn){if(Tt=it(Tt,Lt+4),12<=et&&Tt>et-12){We=3;break e}if(ne&&Tt>Ye[0]-8){We=7;break e}tt[0]=Tt,We[0]+=8,Ye[0]-=8,Ht[0]=fn}else Ht[0]=5<=Ye[0]&&Tt[Lt+0]==47&&!(Tt[Lt+4]>>5),tt[0]=Ye[0];We=0}if(w=w[0],we.Ja=we.Ja[0],we.xa=we.xa[0],h=h[0],We!=0)break;if(4294967286<we.Ja)return 3;if(W==null||Ke||(W[0]=we.xa?2:1),O=[O],Te=[Te],we.xa){if(5>w){We=7;break}W=O,ne=Te,Ke=T,d==null||5>w?d=0:5<=w&&d[h+0]==47&&!(d[h+4]>>5)?(Ye=[0],Tt=[0],et=[0],Ce(tt=new G,d,h,w),Jn(tt,Ye,Tt,et)?(W!=null&&(W[0]=Ye[0]),ne!=null&&(ne[0]=Tt[0]),Ke!=null&&(Ke[0]=et[0]),d=1):d=0):d=0}else{if(10>w){We=7;break}W=Te,d==null||10>w||!Ha(d,h+3,w-3)?d=0:(ne=d[h+0]|d[h+1]<<8|d[h+2]<<16,Ke=16383&(d[h+7]<<8|d[h+6]),d=16383&(d[h+9]<<8|d[h+8]),1&ne||3<(ne>>1&7)||!(ne>>4&1)||ne>>5>=we.Ja||!Ke||!d?d=0:(O&&(O[0]=Ke),W&&(W[0]=d),d=1))}if(!d||(O=O[0],Te=Te[0],Be&&(te[0]!=O||ye[0]!=Te)))return 3;V!=null&&(V[0]=we,V.offset=h-V.w,a(4294967286>h-V.w),a(V.offset==V.ha-w));break}return We==0||We==7&&Be&&V==null?(T!=null&&(T[0]|=we.na!=null&&0<we.na.length),N!=null&&(N[0]=O),I!=null&&(I[0]=Te),0):We}function Gi(d,h,w){var N=h.width,I=h.height,T=0,O=0,W=N,V=I;if(h.Da=d!=null&&0<d.Da,h.Da&&(W=d.cd,V=d.bd,T=d.v,O=d.j,11>w||(T&=-2,O&=-2),0>T||0>O||0>=W||0>=V||T+W>N||O+V>I))return 0;if(h.v=T,h.j=O,h.va=T+W,h.o=O+V,h.U=W,h.T=V,h.da=d!=null&&0<d.da,h.da){if(!Ct(W,V,w=[d.ib],T=[d.hb]))return 0;h.ib=w[0],h.hb=T[0]}return h.ob=d!=null&&d.ob,h.Kb=d==null||!d.Sd,h.da&&(h.ob=h.ib<3*N/4&&h.hb<3*I/4,h.Kb=0),1}function ja(d){if(d==null)return 2;if(11>d.S){var h=d.f.RGBA;h.fb+=(d.height-1)*h.A,h.A=-h.A}else h=d.f.kb,d=d.height,h.O+=(d-1)*h.fa,h.fa=-h.fa,h.N+=(d-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(d-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(d-1)*h.lb,h.lb=-h.lb);return 0}function Ji(d,h,w,N){if(N==null||0>=d||0>=h)return 2;if(w!=null){if(w.Da){var I=w.cd,T=w.bd,O=-2&w.v,W=-2&w.j;if(0>O||0>W||0>=I||0>=T||O+I>d||W+T>h)return 2;d=I,h=T}if(w.da){if(!Ct(d,h,I=[w.ib],T=[w.hb]))return 2;d=I[0],h=T[0]}}N.width=d,N.height=h;e:{var V=N.width,te=N.height;if(d=N.S,0>=V||0>=te||!(d>=Qo&&13>d))d=2;else{if(0>=N.Rd&&N.sd==null){O=T=I=h=0;var ye=(W=V*El[d])*te;if(11>d||(T=(te+1)/2*(h=(V+1)/2),d==12&&(O=(I=V)*te)),(te=l(ye+2*T+O))==null){d=1;break e}N.sd=te,11>d?((V=N.f.RGBA).eb=te,V.fb=0,V.A=W,V.size=ye):((V=N.f.kb).y=te,V.O=0,V.fa=W,V.Fd=ye,V.f=te,V.N=0+ye,V.Ab=h,V.Cd=T,V.ea=te,V.W=0+ye+T,V.Db=h,V.Ed=T,d==12&&(V.F=te,V.J=0+ye+2*T),V.Tc=O,V.lb=I)}if(h=1,I=N.S,T=N.width,O=N.height,I>=Qo&&13>I)if(11>I)d=N.f.RGBA,h&=(W=Math.abs(d.A))*(O-1)+T<=d.size,h&=W>=T*El[I],h&=d.eb!=null;else{d=N.f.kb,W=(T+1)/2,ye=(O+1)/2,V=Math.abs(d.fa),te=Math.abs(d.Ab);var Be=Math.abs(d.Db),ne=Math.abs(d.lb),we=ne*(O-1)+T;h&=V*(O-1)+T<=d.Fd,h&=te*(ye-1)+W<=d.Cd,h=(h&=Be*(ye-1)+W<=d.Ed)&V>=T&te>=W&Be>=W,h&=d.y!=null,h&=d.f!=null,h&=d.ea!=null,I==12&&(h&=ne>=T,h&=we<=d.Tc,h&=d.F!=null)}else h=0;d=h?0:2}}return d!=0||w!=null&&w.fd&&(d=ja(N)),d}var Ea=64,Sa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Fr=24,Cs=32,Ki=8,gi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];gt("Predictor0","PredictorAdd0"),Z.Predictor0=function(){return 4278190080},Z.Predictor1=function(d){return d},Z.Predictor2=function(d,h,w){return h[w+0]},Z.Predictor3=function(d,h,w){return h[w+1]},Z.Predictor4=function(d,h,w){return h[w-1]},Z.Predictor5=function(d,h,w){return Ft(Ft(d,h[w+1]),h[w+0])},Z.Predictor6=function(d,h,w){return Ft(d,h[w-1])},Z.Predictor7=function(d,h,w){return Ft(d,h[w+0])},Z.Predictor8=function(d,h,w){return Ft(h[w-1],h[w+0])},Z.Predictor9=function(d,h,w){return Ft(h[w+0],h[w+1])},Z.Predictor10=function(d,h,w){return Ft(Ft(d,h[w-1]),Ft(h[w+0],h[w+1]))},Z.Predictor11=function(d,h,w){var N=h[w+0];return 0>=qt(N>>24&255,d>>24&255,(h=h[w-1])>>24&255)+qt(N>>16&255,d>>16&255,h>>16&255)+qt(N>>8&255,d>>8&255,h>>8&255)+qt(255&N,255&d,255&h)?N:d},Z.Predictor12=function(d,h,w){var N=h[w+0];return(jt((d>>24&255)+(N>>24&255)-((h=h[w-1])>>24&255))<<24|jt((d>>16&255)+(N>>16&255)-(h>>16&255))<<16|jt((d>>8&255)+(N>>8&255)-(h>>8&255))<<8|jt((255&d)+(255&N)-(255&h)))>>>0},Z.Predictor13=function(d,h,w){var N=h[w-1];return(Gt((d=Ft(d,h[w+0]))>>24&255,N>>24&255)<<24|Gt(d>>16&255,N>>16&255)<<16|Gt(d>>8&255,N>>8&255)<<8|Gt(255&d,255&N))>>>0};var ls=Z.PredictorAdd0;Z.PredictorAdd1=Jt,gt("Predictor2","PredictorAdd2"),gt("Predictor3","PredictorAdd3"),gt("Predictor4","PredictorAdd4"),gt("Predictor5","PredictorAdd5"),gt("Predictor6","PredictorAdd6"),gt("Predictor7","PredictorAdd7"),gt("Predictor8","PredictorAdd8"),gt("Predictor9","PredictorAdd9"),gt("Predictor10","PredictorAdd10"),gt("Predictor11","PredictorAdd11"),gt("Predictor12","PredictorAdd12"),gt("Predictor13","PredictorAdd13");var cs=Z.PredictorAdd2;je("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),je("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var fr,Gs=Z.ColorIndexInverseTransform,ni=Z.MapARGB,Ri=Z.VP8LColorIndexInverseTransformAlpha,Hr=Z.MapAlpha,Js=Z.VP8LPredictorsAdd=[];Js.length=16,(Z.VP8LPredictors=[]).length=16,(Z.VP8LPredictorsAdd_C=[]).length=16,(Z.VP8LPredictors_C=[]).length=16;var da,yo,ds,Ps,Ls,Na,_s,Ks,sr,En,Mn,Hn,nn,wr,xi,vo,bo,us,Jo,fs,Ro,wl,Fo,Qs,Xs,jl,Do,Sl,Nl=l(511),kl=l(2041),Al=l(225),Cl=l(767),Ko=0,Fi=kl,Zs=Al,ua=Cl,yi=Nl,Qo=0,Is=1,Ma=2,Ra=3,To=4,Ee=5,ri=6,wo=7,eo=8,Oo=9,Bo=10,zo=[2,3,7],Xo=[3,3,11],Es=[280,256,256,256,40],Pl=[0,1,1,1,0],Ql=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Zo=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ll=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],el=8,to=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ms=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vi=null,no=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_l=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],u=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],k=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],U=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],_=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],D=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ae=[],le=[],Oe=[],Ie=1,Ze=2,Xe=[],It=[];Ia("UpsampleRgbLinePair",la,3),Ia("UpsampleBgrLinePair",ca,3),Ia("UpsampleRgbaLinePair",dn,4),Ia("UpsampleBgraLinePair",kt,4),Ia("UpsampleArgbLinePair",As,4),Ia("UpsampleRgba4444LinePair",Xa,2),Ia("UpsampleRgb565LinePair",mi,2);var vt=Z.UpsampleRgbLinePair,Dn=Z.UpsampleBgrLinePair,un=Z.UpsampleRgbaLinePair,gr=Z.UpsampleBgraLinePair,Vr=Z.UpsampleArgbLinePair,ai=Z.UpsampleRgba4444LinePair,Il=Z.UpsampleRgb565LinePair,hs=16,wt=1<<hs-1,Zt=-227,yn=482,bi=6,Yr=0,wi=l(256),Uo=l(256),tl=l(256),ji=l(256),Xl=l(yn-Zt),Xc=l(yn-Zt);Za("YuvToRgbRow",la,3),Za("YuvToBgrRow",ca,3),Za("YuvToRgbaRow",dn,4),Za("YuvToBgraRow",kt,4),Za("YuvToArgbRow",As,4),Za("YuvToRgba4444Row",Xa,2),Za("YuvToRgb565Row",mi,2);var Cc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Wo=[0,2,8],Zc=[8,7,6,4,4,2,2,2,1,1,1,1],ro=1;this.WebPDecodeRGBA=function(d,h,w,N,I){var T=Is,O=new Ge,W=new ft;O.ba=W,W.S=T,W.width=[W.width],W.height=[W.height];var V=W.width,te=W.height,ye=new Dt;if(ye==null||d==null)var Be=2;else a(ye!=null),Be=Mi(d,h,w,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(Be!=0?V=0:(V!=null&&(V[0]=ye.width[0]),te!=null&&(te[0]=ye.height[0]),V=1),V){W.width=W.width[0],W.height=W.height[0],N!=null&&(N[0]=W.width),I!=null&&(I[0]=W.height);e:{if(N=new oi,(I=new rt).data=d,I.w=h,I.ha=w,I.kd=1,h=[0],a(I!=null),((d=Mi(I.data,I.w,I.ha,null,null,null,h,null,I))==0||d==7)&&h[0]&&(d=4),(h=d)==0){if(a(O!=null),N.data=I.data,N.w=I.w+I.offset,N.ha=I.ha-I.offset,N.put=St,N.ac=pn,N.bc=Xt,N.ma=O,I.xa){if((d=xo())==null){O=1;break e}if((function(ne,we){var Te=[0],Ke=[0],We=[0];t:for(;;){if(ne==null)return 0;if(we==null)return ne.a=2,0;if(ne.l=we,ne.a=0,Ce(ne.m,we.data,we.w,we.ha),!Jn(ne.m,Te,Ke,We)){ne.a=3;break t}if(ne.xb=Ze,we.width=Te[0],we.height=Ke[0],!na(Te[0],Ke[0],1,ne,null))break t;return 1}return a(ne.a!=0),0})(d,N)){if(N=(h=Ji(N.width,N.height,O.Oa,O.ba))==0){t:{N=d;n:for(;;){if(N==null){N=0;break t}if(a(N.s.yc!=null),a(N.s.Ya!=null),a(0<N.s.Wb),a((w=N.l)!=null),a((I=w.ma)!=null),N.xb!=0){if(N.ca=I.ba,N.tb=I.tb,a(N.ca!=null),!Gi(I.Oa,w,Ra)){N.a=2;break n}if(!ra(N,w.width)||w.da)break n;if((w.da||$t(N.ca.S))&&Qa(),11>N.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),N.ca.f.kb.F!=null&&Qa()),N.Pb&&0<N.s.ua&&N.s.vb.X==null&&!Y(N.s.vb,N.s.Wa.Xa)){N.a=1;break n}N.xb=0}if(!Ca(N,N.V,N.Ba,N.c,N.i,w.o,zs))break n;I.Dc=N.Ma,N=1;break t}a(N.a!=0),N=0}N=!N}N&&(h=d.a)}else h=d.a}else{if((d=new _o)==null){O=1;break e}if(d.Fa=I.na,d.P=I.P,d.qc=I.Sa,Va(d,N)){if((h=Ji(N.width,N.height,O.Oa,O.ba))==0){if(d.Aa=0,w=O.Oa,a((I=d)!=null),w!=null){if(0<(V=0>(V=w.Md)?0:100<V?255:255*V/100)){for(te=ye=0;4>te;++te)12>(Be=I.pb[te]).lc&&(Be.ia=V*Zc[0>Be.lc?0:Be.lc]>>3),ye|=Be.ia;ye&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=w.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}(function(ne,we){if(ne==null)return 0;if(we==null)return Kt(ne,2,"NULL VP8Io parameter in VP8Decode().");if(!ne.cb&&!Va(ne,we))return 0;if(a(ne.cb),we.ac==null||we.ac(we)){we.ob&&(ne.L=0);var Te=Wo[ne.L];if(ne.L==2?(ne.yb=0,ne.zb=0):(ne.yb=we.v-Te>>4,ne.zb=we.j-Te>>4,0>ne.yb&&(ne.yb=0),0>ne.zb&&(ne.zb=0)),ne.Va=we.o+15+Te>>4,ne.Hb=we.va+15+Te>>4,ne.Hb>ne.za&&(ne.Hb=ne.za),ne.Va>ne.Ub&&(ne.Va=ne.Ub),0<ne.L){var Ke=ne.ed;for(Te=0;4>Te;++Te){var We;if(ne.Qa.Cb){var Ye=ne.Qa.Lb[Te];ne.Qa.Fb||(Ye+=Ke.Tb)}else Ye=Ke.Tb;for(We=0;1>=We;++We){var Je=ne.gd[Te][We],et=Ye;if(Ke.Pc&&(et+=Ke.vd[0],We&&(et+=Ke.od[0])),0<(et=0>et?0:63<et?63:et)){var tt=et;0<Ke.wb&&(tt=4<Ke.wb?tt>>2:tt>>1)>9-Ke.wb&&(tt=9-Ke.wb),1>tt&&(tt=1),Je.dd=tt,Je.tc=2*et+tt,Je.ld=40<=et?2:15<=et?1:0}else Je.tc=0;Je.La=We}}}Te=0}else Kt(ne,6,"Frame setup failed"),Te=ne.a;if(Te=Te==0){if(Te){ne.$c=0,0<ne.Aa||(ne.Ic=ro);t:{Te=ne.Ic,Ke=4*(tt=ne.za);var Ht=32*tt,Lt=tt+1,fn=0<ne.L?tt*(0<ne.Aa?2:1):0,Tt=(ne.Aa==2?2:1)*tt;if((Je=Ke+832+(We=3*(16*Te+Wo[ne.L])/2*Ht)+(Ye=ne.Fa!=null&&0<ne.Fa.length?ne.Kc.c*ne.Kc.i:0))!=Je)Te=0;else{if(Je>ne.Vb){if(ne.Vb=0,ne.Ec=l(Je),ne.Fc=0,ne.Ec==null){Te=Kt(ne,1,"no memory during frame initialization.");break t}ne.Vb=Je}Je=ne.Ec,et=ne.Fc,ne.Ac=Je,ne.Bc=et,et+=Ke,ne.Gd=g(Ht,Wr),ne.Hd=0,ne.rb=g(Lt+1,ga),ne.sb=1,ne.wa=fn?g(fn,dr):null,ne.Y=0,ne.D.Nb=0,ne.D.wa=ne.wa,ne.D.Y=ne.Y,0<ne.Aa&&(ne.D.Y+=tt),a(!0),ne.oc=Je,ne.pc=et,et+=832,ne.ya=g(Tt,as),ne.aa=0,ne.D.ya=ne.ya,ne.D.aa=ne.aa,ne.Aa==2&&(ne.D.aa+=tt),ne.R=16*tt,ne.B=8*tt,tt=(Ht=Wo[ne.L])*ne.R,Ht=Ht/2*ne.B,ne.sa=Je,ne.ta=et+tt,ne.qa=ne.sa,ne.ra=ne.ta+16*Te*ne.R+Ht,ne.Ha=ne.qa,ne.Ia=ne.ra+8*Te*ne.B+Ht,ne.$c=0,et+=We,ne.mb=Ye?Je:null,ne.nb=Ye?et:null,a(et+Ye<=ne.Fc+ne.Vb),Wi(ne),c(ne.Ac,ne.Bc,0,Ke),Te=1}}if(Te){if(we.ka=0,we.y=ne.sa,we.O=ne.ta,we.f=ne.qa,we.N=ne.ra,we.ea=ne.Ha,we.Vd=ne.Ia,we.fa=ne.R,we.Rc=ne.B,we.F=null,we.J=0,!Ko){for(Te=-255;255>=Te;++Te)Nl[255+Te]=0>Te?-Te:Te;for(Te=-1020;1020>=Te;++Te)kl[1020+Te]=-128>Te?-128:127<Te?127:Te;for(Te=-112;112>=Te;++Te)Al[112+Te]=-16>Te?-16:15<Te?15:Te;for(Te=-255;510>=Te;++Te)Cl[255+Te]=0>Te?0:255<Te?255:Te;Ko=1}_s=ci,Ks=Un,En=La,Mn=qr,Hn=Ln,sr=Io,nn=nr,wr=hi,xi=L,vo=re,bo=Ka,us=x,Jo=me,fs=Ae,Ro=Rr,wl=fi,Fo=wn,Qs=wa,le[0]=qs,le[1]=Eo,le[2]=Ja,le[3]=Nn,le[4]=br,le[5]=$s,le[6]=$i,le[7]=ks,le[8]=Mo,le[9]=va,ae[0]=_a,ae[1]=$r,ae[2]=qi,ae[3]=bn,ae[4]=ya,ae[5]=Yn,ae[6]=aa,Oe[0]=is,Oe[1]=Ns,Oe[2]=di,Oe[3]=tr,Oe[4]=ur,Oe[5]=Hs,Oe[6]=Vs,Te=1}else Te=0}Te&&(Te=(function(Cn,jr){for(Cn.M=0;Cn.M<Cn.Va;++Cn.M){var mn,_t=Cn.Jc[Cn.M&Cn.Xb],xt=Cn.m,Pr=Cn;for(mn=0;mn<Pr.za;++mn){var sn=xt,jn=Pr,ar=jn.Ac,fa=jn.Bc+4*mn,Dr=jn.zc,xr=jn.ya[jn.aa+mn];if(jn.Qa.Bb?xr.$b=Ue(sn,jn.Pa.jb[0])?2+Ue(sn,jn.Pa.jb[2]):Ue(sn,jn.Pa.jb[1]):xr.$b=0,jn.kc&&(xr.Ad=Ue(sn,jn.Bd)),xr.Za=!Ue(sn,145)+0,xr.Za){var Gr=xr.Ob,ha=0;for(jn=0;4>jn;++jn){var hr,In=Dr[0+jn];for(hr=0;4>hr;++hr){In=U[ar[fa+hr]][In];for(var Tn=u[Ue(sn,In[0])];0<Tn;)Tn=u[2*Tn+Ue(sn,In[Tn])];In=-Tn,ar[fa+hr]=In}o(Gr,ha,ar,fa,4),ha+=4,Dr[0+jn]=In}}else In=Ue(sn,156)?Ue(sn,128)?1:3:Ue(sn,163)?2:0,xr.Ob[0]=In,c(ar,fa,In,4),c(Dr,0,In,4);xr.Dd=Ue(sn,142)?Ue(sn,114)?Ue(sn,183)?1:3:2:0}if(Pr.m.Ka)return Kt(Cn,7,"Premature end-of-partition0 encountered.");for(;Cn.ja<Cn.za;++Cn.ja){if(Pr=_t,sn=(xt=Cn).rb[xt.sb-1],ar=xt.rb[xt.sb+xt.ja],mn=xt.ya[xt.aa+xt.ja],fa=xt.kc?mn.Ad:0)sn.la=ar.la=0,mn.Za||(sn.Na=ar.Na=0),mn.Hc=0,mn.Gc=0,mn.ia=0;else{var pr,On;if(sn=ar,ar=Pr,fa=xt.Pa.Xc,Dr=xt.ya[xt.aa+xt.ja],xr=xt.pb[Dr.$b],jn=Dr.ad,Gr=0,ha=xt.rb[xt.sb-1],In=hr=0,c(jn,Gr,0,384),Dr.Za)var Sr=0,Nr=fa[3];else{Tn=l(16);var Qn=sn.Na+ha.Na;if(Qn=vi(ar,fa[1],Qn,xr.Eb,0,Tn,0),sn.Na=ha.Na=(0<Qn)+0,1<Qn)_s(Tn,0,jn,Gr);else{var Fa=Tn[0]+3>>3;for(Tn=0;256>Tn;Tn+=16)jn[Gr+Tn]=Fa}Sr=1,Nr=fa[0]}var Gn=15&sn.la,Xn=15&ha.la;for(Tn=0;4>Tn;++Tn){var Tr=1&Xn;for(Fa=On=0;4>Fa;++Fa)Gn=Gn>>1|(Tr=(Qn=vi(ar,Nr,Qn=Tr+(1&Gn),xr.Sc,Sr,jn,Gr))>Sr)<<7,On=On<<2|(3<Qn?3:1<Qn?2:jn[Gr+0]!=0),Gr+=16;Gn>>=4,Xn=Xn>>1|Tr<<7,hr=(hr<<8|On)>>>0}for(Nr=Gn,Sr=Xn>>4,pr=0;4>pr;pr+=2){for(On=0,Gn=sn.la>>4+pr,Xn=ha.la>>4+pr,Tn=0;2>Tn;++Tn){for(Tr=1&Xn,Fa=0;2>Fa;++Fa)Qn=Tr+(1&Gn),Gn=Gn>>1|(Tr=0<(Qn=vi(ar,fa[2],Qn,xr.Qc,0,jn,Gr)))<<3,On=On<<2|(3<Qn?3:1<Qn?2:jn[Gr+0]!=0),Gr+=16;Gn>>=2,Xn=Xn>>1|Tr<<5}In|=On<<4*pr,Nr|=Gn<<4<<pr,Sr|=(240&Xn)<<pr}sn.la=Nr,ha.la=Sr,Dr.Hc=hr,Dr.Gc=In,Dr.ia=43690&In?0:xr.ia,fa=!(hr|In)}if(0<xt.L&&(xt.wa[xt.Y+xt.ja]=xt.gd[mn.$b][mn.Za],xt.wa[xt.Y+xt.ja].La|=!fa),Pr.Ka)return Kt(Cn,7,"Premature end-of-file encountered.")}if(Wi(Cn),xt=jr,Pr=1,mn=(_t=Cn).D,sn=0<_t.L&&_t.M>=_t.zb&&_t.M<=_t.Va,_t.Aa==0)t:{if(mn.M=_t.M,mn.uc=sn,ti(_t,mn),Pr=1,mn=(On=_t.D).Nb,sn=(In=Wo[_t.L])*_t.R,ar=In/2*_t.B,Tn=16*mn*_t.R,Fa=8*mn*_t.B,fa=_t.sa,Dr=_t.ta-sn+Tn,xr=_t.qa,jn=_t.ra-ar+Fa,Gr=_t.Ha,ha=_t.Ia-ar+Fa,Xn=(Gn=On.M)==0,hr=Gn>=_t.Va-1,_t.Aa==2&&ti(_t,On),On.uc)for(Tr=(Qn=_t).D.M,a(Qn.D.uc),On=Qn.yb;On<Qn.Hb;++On){Sr=On,Nr=Tr;var ka=(Si=(Ir=Qn).D).Nb;pr=Ir.R;var Si=Si.wa[Si.Y+Sr],Lr=Ir.sa,_r=Ir.ta+16*ka*pr+16*Sr,Da=Si.dd,Zn=Si.tc;if(Zn!=0)if(a(3<=Zn),Ir.L==1)0<Sr&&wl(Lr,_r,pr,Zn+4),Si.La&&Qs(Lr,_r,pr,Zn),0<Nr&&Ro(Lr,_r,pr,Zn+4),Si.La&&Fo(Lr,_r,pr,Zn);else{var Ta=Ir.B,Qi=Ir.qa,ps=Ir.ra+8*ka*Ta+8*Sr,pa=Ir.Ha,Ir=Ir.Ia+8*ka*Ta+8*Sr;ka=Si.ld,0<Sr&&(wr(Lr,_r,pr,Zn+4,Da,ka),vo(Qi,ps,pa,Ir,Ta,Zn+4,Da,ka)),Si.La&&(us(Lr,_r,pr,Zn,Da,ka),fs(Qi,ps,pa,Ir,Ta,Zn,Da,ka)),0<Nr&&(nn(Lr,_r,pr,Zn+4,Da,ka),xi(Qi,ps,pa,Ir,Ta,Zn+4,Da,ka)),Si.La&&(bo(Lr,_r,pr,Zn,Da,ka),Jo(Qi,ps,pa,Ir,Ta,Zn,Da,ka))}}if(_t.ia&&alert("todo:DitherRow"),xt.put!=null){if(On=16*Gn,Gn=16*(Gn+1),Xn?(xt.y=_t.sa,xt.O=_t.ta+Tn,xt.f=_t.qa,xt.N=_t.ra+Fa,xt.ea=_t.Ha,xt.W=_t.Ia+Fa):(On-=In,xt.y=fa,xt.O=Dr,xt.f=xr,xt.N=jn,xt.ea=Gr,xt.W=ha),hr||(Gn-=In),Gn>xt.o&&(Gn=xt.o),xt.F=null,xt.J=null,_t.Fa!=null&&0<_t.Fa.length&&On<Gn&&(xt.J=Wn(_t,xt,On,Gn-On),xt.F=_t.mb,xt.F==null&&xt.F.length==0)){Pr=Kt(_t,3,"Could not decode alpha data.");break t}On<xt.j&&(In=xt.j-On,On=xt.j,a(!(1&In)),xt.O+=_t.R*In,xt.N+=_t.B*(In>>1),xt.W+=_t.B*(In>>1),xt.F!=null&&(xt.J+=xt.width*In)),On<Gn&&(xt.O+=xt.v,xt.N+=xt.v>>1,xt.W+=xt.v>>1,xt.F!=null&&(xt.J+=xt.v),xt.ka=On-xt.j,xt.U=xt.va-xt.v,xt.T=Gn-On,Pr=xt.put(xt))}mn+1!=_t.Ic||hr||(o(_t.sa,_t.ta-sn,fa,Dr+16*_t.R,sn),o(_t.qa,_t.ra-ar,xr,jn+8*_t.B,ar),o(_t.Ha,_t.Ia-ar,Gr,ha+8*_t.B,ar))}if(!Pr)return Kt(Cn,6,"Output aborted.")}return 1})(ne,we)),we.bc!=null&&we.bc(we),Te&=1}return Te?(ne.cb=0,Te):0})(d,N)||(h=d.a)}}else h=d.a}h==0&&O.Oa!=null&&O.Oa.fd&&(h=ja(O.ba))}O=h}T=O!=0?null:11>T?W.f.RGBA.eb:W.f.kb.y}else T=null;return T};var El=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function v(Z,ge){for(var B="",$=0;$<4;$++)B+=String.fromCharCode(Z[ge++]);return B}function j(Z,ge){return Z[ge+0]|Z[ge+1]<<8}function A(Z,ge){return(Z[ge+0]|Z[ge+1]<<8|Z[ge+2]<<16)>>>0}function R(Z,ge){return(Z[ge+0]|Z[ge+1]<<8|Z[ge+2]<<16|Z[ge+3]<<24)>>>0}new m;var b=[0],z=[0],M=[],E=new m,P=i,q=(function(Z,ge){var B={},$=0,ee=!1,ie=0,Ne=0;if(B.frames=[],!(function(C,G){for(var J=0;J<4;J++)if(C[G+J]!="RIFF".charCodeAt(J))return!0;return!1})(Z,ge)){for(R(Z,ge+=4),ge+=8;ge<Z.length;){var Re=v(Z,ge),Me=R(Z,ge+=4);ge+=4;var ue=Me+(1&Me);switch(Re){case"VP8 ":case"VP8L":B.frames[$]===void 0&&(B.frames[$]={}),(Q=B.frames[$]).src_off=ee?Ne:ge-8,Q.src_size=ie+Me+8,$++,ee&&(ee=!1,ie=0,Ne=0);break;case"VP8X":(Q=B.header={}).feature_flags=Z[ge];var Ce=ge+4;Q.canvas_width=1+A(Z,Ce),Ce+=3,Q.canvas_height=1+A(Z,Ce),Ce+=3;break;case"ALPH":ee=!0,ie=ue+8,Ne=ge-8;break;case"ANIM":(Q=B.header).bgcolor=R(Z,ge),Ce=ge+4,Q.loop_count=j(Z,Ce),Ce+=2;break;case"ANMF":var Le,Q;(Q=B.frames[$]={}).offset_x=2*A(Z,ge),ge+=3,Q.offset_y=2*A(Z,ge),ge+=3,Q.width=1+A(Z,ge),ge+=3,Q.height=1+A(Z,ge),ge+=3,Q.duration=A(Z,ge),ge+=3,Le=Z[ge++],Q.dispose=1&Le,Q.blend=Le>>1&1}Re!="ANMF"&&(ge+=ue)}return B}})(P,0);q.response=P,q.rgbaoutput=!0,q.dataurl=!1;var K=q.header?q.header:null,H=q.frames?q.frames:null;if(K){K.loop_counter=K.loop_count,b=[K.canvas_height],z=[K.canvas_width];for(var fe=0;fe<H.length&&H[fe].blend!=0;fe++);}var de=H[0],Pe=E.WebPDecodeRGBA(P,de.src_off,de.src_size,z,b);de.rgba=Pe,de.imgwidth=z[0],de.imgheight=b[0];for(var xe=0;xe<z[0]*b[0]*4;xe++)M[xe]=Pe[xe];return this.width=z,this.height=b,this.data=M,this}(function(i){var a,r,o,c,l,g,p,m,v,j=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new m,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new g,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new g,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new A(this),a=this.internal.f2,r=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,g=this.internal.Point,p=this.internal.Rectangle,m=this.internal.Matrix,v=new j}]);var A=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=C;Object.defineProperty(this,"pdf",{get:function(){return G}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(Y){J=!!Y}});var oe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return oe},set:function(Y){oe=!!Y}});var pe=0;Object.defineProperty(this,"posX",{get:function(){return pe},set:function(Y){isNaN(Y)||(pe=Y)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(Y){isNaN(Y)||(be=Y)}}),Object.defineProperty(this,"margin",{get:function(){return v.margin},set:function(Y){var mt;typeof Y=="number"?mt=[Y,Y,Y,Y]:((mt=new Array(4))[0]=Y[0],mt[1]=Y.length>=2?Y[1]:mt[0],mt[2]=Y.length>=3?Y[2]:mt[0],mt[3]=Y.length>=4?Y[3]:mt[1]),v.margin=mt}});var Fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Fe},set:function(Y){Fe=Y}});var De=0;Object.defineProperty(this,"lastBreak",{get:function(){return De},set:function(Y){De=Y}});var Ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ue},set:function(Y){Ue=Y}}),Object.defineProperty(this,"ctx",{get:function(){return v},set:function(Y){Y instanceof j&&(v=Y)}}),Object.defineProperty(this,"path",{get:function(){return v.path},set:function(Y){v.path=Y}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(Y){_e=Y}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Y){var mt;mt=R(Y),this.ctx.fillStyle=mt.style,this.ctx.isFillTransparent=mt.a===0,this.ctx.fillOpacity=mt.a,this.pdf.setFillColor(mt.r,mt.g,mt.b,{a:mt.a}),this.pdf.setTextColor(mt.r,mt.g,mt.b,{a:mt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Y){var mt=R(Y);this.ctx.strokeStyle=mt.style,this.ctx.isStrokeTransparent=mt.a===0,this.ctx.strokeOpacity=mt.a,mt.a===0?this.pdf.setDrawColor(255,255,255):(mt.a,this.pdf.setDrawColor(mt.r,mt.g,mt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Y){["butt","round","square"].indexOf(Y)!==-1&&(this.ctx.lineCap=Y,this.pdf.setLineCap(Y))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Y){isNaN(Y)||(this.ctx.lineWidth=Y,this.pdf.setLineWidth(Y))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Y){["bevel","round","miter"].indexOf(Y)!==-1&&(this.ctx.lineJoin=Y,this.pdf.setLineJoin(Y))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Y){isNaN(Y)||(this.ctx.miterLimit=Y,this.pdf.setMiterLimit(Y))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Y){this.ctx.textBaseline=Y}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Y){["right","end","center","left","start"].indexOf(Y)!==-1&&(this.ctx.textAlign=Y)}});var at=null,ot=null,it=null;Object.defineProperty(this,"fontFaces",{get:function(){return it},set:function(Y){at=null,ot=null,it=Y}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Y){var mt;if(this.ctx.font=Y,(mt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Y))!==null){var Mt=mt[1];mt[2];var Ct=mt[3],Qe=mt[4];mt[5];var bt=mt[6],gt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Qe)[2];Qe=Math.floor(gt==="px"?parseFloat(Qe)*this.pdf.internal.scaleFactor:gt==="em"?parseFloat(Qe)*this.pdf.getFontSize():parseFloat(Qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Qe);var Rt=(function(je){var nt,pt,He=[],ct=je.trim();if(ct==="")return of;if(ct in lm)return[lm[ct]];for(;ct!=="";){switch(pt=null,nt=(ct=dm(ct)).charAt(0)){case'"':case"'":pt=ty(ct.substring(1),nt);break;default:pt=ny(ct)}if(pt===null||(He.push(pt[0]),(ct=dm(pt[1]))!==""&&ct.charAt(0)!==","))return of;ct=ct.replace(/^,/,"")}return He})(bt);if(this.fontFaces){var Ft=(function(je,nt){var pt=je.getFontList(),He=JSON.stringify(pt);if(at===null||ot!==He){var ct=(function(Qt){var yt=[];return Object.keys(Qt).forEach(function(vn){Qt[vn].forEach(function($t){var Ut=null;switch($t){case"bold":Ut={family:vn,weight:"bold"};break;case"italic":Ut={family:vn,style:"italic"};break;case"bolditalic":Ut={family:vn,weight:"bold",style:"italic"};break;case"":case"normal":Ut={family:vn}}Ut!==null&&(Ut.ref={name:vn,style:$t},yt.push(Ut))})}),yt})(pt);at=(function(Qt){for(var yt={},vn=0;vn<Qt.length;++vn){var $t=sf(Qt[vn]),Ut=$t.family,he=$t.stretch,ft=$t.style,Dt=$t.weight;yt[Ut]=yt[Ut]||{},yt[Ut][he]=yt[Ut][he]||{},yt[Ut][he][ft]=yt[Ut][he][ft]||{},yt[Ut][he][ft][Dt]=$t}return yt})(ct.concat(nt)),ot=He}return at})(this.pdf,this.fontFaces),jt=Rt.map(function(je){return{family:je,stretch:"normal",weight:Ct,style:Mt}}),Gt=(function(je,nt,pt){for(var He=(pt=pt||{}).defaultFontFamily||"times",ct=Object.assign({},ey,pt.genericFontFamilies||{}),Qt=null,yt=null,vn=0;vn<nt.length;++vn)if(ct[(Qt=sf(nt[vn])).family]&&(Qt.family=ct[Qt.family]),je.hasOwnProperty(Qt.family)){yt=je[Qt.family];break}if(!(yt=yt||je[He]))throw new Error("Could not find a font-family for the rule '"+cm(Qt)+"' and default family '"+He+"'.");if(yt=(function($t,Ut){if(Ut[$t])return Ut[$t];var he=Nf[$t],ft=he<=Nf.normal?-1:1,Dt=om(Ut,k0,he,ft);if(!Dt)throw new Error("Could not find a matching font-stretch value for "+$t);return Dt})(Qt.stretch,yt),yt=(function($t,Ut){if(Ut[$t])return Ut[$t];for(var he=N0[$t],ft=0;ft<he.length;++ft)if(Ut[he[ft]])return Ut[he[ft]];throw new Error("Could not find a matching font-style for "+$t)})(Qt.style,yt),!(yt=(function($t,Ut){if(Ut[$t])return Ut[$t];if($t===400&&Ut[500])return Ut[500];if($t===500&&Ut[400])return Ut[400];var he=Zx[$t],ft=om(Ut,A0,he,$t<400?-1:1);if(!ft)throw new Error("Could not find a matching font-weight for value "+$t);return ft})(Qt.weight,yt)))throw new Error("Failed to resolve a font for the rule '"+cm(Qt)+"'.");return yt})(Ft,jt);this.pdf.setFont(Gt.ref.name,Gt.ref.style)}else{var qt="";(Ct==="bold"||parseInt(Ct,10)>=700||Mt==="bold")&&(qt="bold"),Mt==="italic"&&(qt+="italic"),qt.length===0&&(qt="normal");for(var Jt="",ke={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qe=0;qe<Rt.length;qe++){if(this.pdf.internal.getFont(Rt[qe],qt,{noFallback:!0,disableWarning:!0})!==void 0){Jt=Rt[qe];break}if(qt==="bolditalic"&&this.pdf.internal.getFont(Rt[qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Jt=Rt[qe],qt="bold";else if(this.pdf.internal.getFont(Rt[qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Jt=Rt[qe],qt="normal";break}}if(Jt===""){for(var se=0;se<Rt.length;se++)if(ke[Rt[se]]){Jt=ke[Rt[se]];break}}Jt=Jt===""?"Times":Jt,this.pdf.setFont(Jt,qt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Y){this.ctx.globalCompositeOperation=Y}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Y){this.ctx.globalAlpha=Y}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Y){this.ctx.lineDashOffset=Y,Q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Y){this.ctx.lineDash=Y,Q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Y){this.ctx.ignoreClearRect=!!Y}})};A.prototype.setLineDash=function(C){this.lineDash=C},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){H.call(this,"fill",!1)},A.prototype.stroke=function(){H.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(C,G){if(isNaN(C)||isNaN(G))throw lr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new g(C,G));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new g(C,G)},A.prototype.closePath=function(){var C=new g(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&er(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){C=new g(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new g(C.x,C.y)},A.prototype.lineTo=function(C,G){if(isNaN(C)||isNaN(G))throw lr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new g(C,G));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new g(J.x,J.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),H.call(this,null,!0)},A.prototype.quadraticCurveTo=function(C,G,J,oe){if(isNaN(J)||isNaN(oe)||isNaN(C)||isNaN(G))throw lr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pe=this.ctx.transform.applyToPoint(new g(J,oe)),be=this.ctx.transform.applyToPoint(new g(C,G));this.path.push({type:"qct",x1:be.x,y1:be.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new g(pe.x,pe.y)},A.prototype.bezierCurveTo=function(C,G,J,oe,pe,be){if(isNaN(pe)||isNaN(be)||isNaN(C)||isNaN(G)||isNaN(J)||isNaN(oe))throw lr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Fe=this.ctx.transform.applyToPoint(new g(pe,be)),De=this.ctx.transform.applyToPoint(new g(C,G)),Ue=this.ctx.transform.applyToPoint(new g(J,oe));this.path.push({type:"bct",x1:De.x,y1:De.y,x2:Ue.x,y2:Ue.y,x:Fe.x,y:Fe.y}),this.ctx.lastPoint=new g(Fe.x,Fe.y)},A.prototype.arc=function(C,G,J,oe,pe,be){if(isNaN(C)||isNaN(G)||isNaN(J)||isNaN(oe)||isNaN(pe))throw lr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var Fe=this.ctx.transform.applyToPoint(new g(C,G));C=Fe.x,G=Fe.y;var De=this.ctx.transform.applyToPoint(new g(0,J)),Ue=this.ctx.transform.applyToPoint(new g(0,0));J=Math.sqrt(Math.pow(De.x-Ue.x,2)+Math.pow(De.y-Ue.y,2))}Math.abs(pe-oe)>=2*Math.PI&&(oe=0,pe=2*Math.PI),this.path.push({type:"arc",x:C,y:G,radius:J,startAngle:oe,endAngle:pe,counterclockwise:be})},A.prototype.arcTo=function(C,G,J,oe,pe){throw new Error("arcTo not implemented.")},A.prototype.rect=function(C,G,J,oe){if(isNaN(C)||isNaN(G)||isNaN(J)||isNaN(oe))throw lr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,G),this.lineTo(C+J,G),this.lineTo(C+J,G+oe),this.lineTo(C,G+oe),this.lineTo(C,G),this.lineTo(C+J,G),this.lineTo(C,G)},A.prototype.fillRect=function(C,G,J,oe){if(isNaN(C)||isNaN(G)||isNaN(J)||isNaN(oe))throw lr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var pe={};this.lineCap!=="butt"&&(pe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(pe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,G,J,oe),this.fill(),pe.hasOwnProperty("lineCap")&&(this.lineCap=pe.lineCap),pe.hasOwnProperty("lineJoin")&&(this.lineJoin=pe.lineJoin)}},A.prototype.strokeRect=function(C,G,J,oe){if(isNaN(C)||isNaN(G)||isNaN(J)||isNaN(oe))throw lr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");z.call(this)||(this.beginPath(),this.rect(C,G,J,oe),this.stroke())},A.prototype.clearRect=function(C,G,J,oe){if(isNaN(C)||isNaN(G)||isNaN(J)||isNaN(oe))throw lr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,G,J,oe))},A.prototype.save=function(C){C=typeof C!="boolean"||C;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var oe=new j(this.ctx);this.ctxStack.push(this.ctx),this.ctx=oe}},A.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(G),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var R=function(C){var G,J,oe,pe;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))G=0,J=0,oe=0,pe=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(be!==null)G=parseInt(be[1]),J=parseInt(be[2]),oe=parseInt(be[3]),pe=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)G=parseInt(be[1]),J=parseInt(be[2]),oe=parseInt(be[3]),pe=parseFloat(be[4]);else{if(pe=1,typeof C=="string"&&C.charAt(0)!=="#"){var Fe=new x0(C);C=Fe.ok?Fe.toHex():"#000000"}C.length===4?(G=C.substring(1,2),G+=G,J=C.substring(2,3),J+=J,oe=C.substring(3,4),oe+=oe):(G=C.substring(1,3),J=C.substring(3,5),oe=C.substring(5,7)),G=parseInt(G,16),J=parseInt(J,16),oe=parseInt(oe,16)}}return{r:G,g:J,b:oe,a:pe,style:C}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},z=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};A.prototype.fillText=function(C,G,J,oe){if(isNaN(G)||isNaN(J)||typeof C!="string")throw lr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(oe=isNaN(oe)?void 0:oe,!b.call(this)){var pe=ue(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;$.call(this,{text:C,x:G,y:J,scale:be,angle:pe,align:this.textAlign,maxWidth:oe})}},A.prototype.strokeText=function(C,G,J,oe){if(isNaN(G)||isNaN(J)||typeof C!="string")throw lr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!z.call(this)){oe=isNaN(oe)?void 0:oe;var pe=ue(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;$.call(this,{text:C,x:G,y:J,scale:be,renderingMode:"stroke",angle:pe,align:this.textAlign,maxWidth:oe})}},A.prototype.measureText=function(C){if(typeof C!="string")throw lr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,J=this.pdf.internal.scaleFactor,oe=G.internal.getFontSize(),pe=G.getStringUnitWidth(C)*oe/G.internal.scaleFactor;return new function(be){var Fe=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Fe}}),this}({width:pe*=Math.round(96*J/72*1e4)/1e4})},A.prototype.scale=function(C,G){if(isNaN(C)||isNaN(G))throw lr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new m(C,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},A.prototype.rotate=function(C){if(isNaN(C))throw lr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new m(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},A.prototype.translate=function(C,G){if(isNaN(C)||isNaN(G))throw lr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new m(1,0,0,1,C,G);this.ctx.transform=this.ctx.transform.multiply(J)},A.prototype.transform=function(C,G,J,oe,pe,be){if(isNaN(C)||isNaN(G)||isNaN(J)||isNaN(oe)||isNaN(pe)||isNaN(be))throw lr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Fe=new m(C,G,J,oe,pe,be);this.ctx.transform=this.ctx.transform.multiply(Fe)},A.prototype.setTransform=function(C,G,J,oe,pe,be){C=isNaN(C)?1:C,G=isNaN(G)?0:G,J=isNaN(J)?0:J,oe=isNaN(oe)?1:oe,pe=isNaN(pe)?0:pe,be=isNaN(be)?0:be,this.ctx.transform=new m(C,G,J,oe,pe,be)};var M=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(C,G,J,oe,pe,be,Fe,De,Ue){var _e=this.pdf.getImageProperties(C),at=1,ot=1,it=1,Y=1;oe!==void 0&&De!==void 0&&(it=De/oe,Y=Ue/pe,at=_e.width/oe*De/oe,ot=_e.height/pe*Ue/pe),be===void 0&&(be=G,Fe=J,G=0,J=0),oe!==void 0&&De===void 0&&(De=oe,Ue=pe),oe===void 0&&De===void 0&&(De=_e.width,Ue=_e.height);var mt=this.ctx.transform.decompose(),Mt=ue(mt.rotate.shx),Ct=new m,Qe=(Ct=(Ct=(Ct=Ct.multiply(mt.translate)).multiply(mt.skew)).multiply(mt.scale)).applyToRectangle(new p(be-G*it,Fe-J*Y,oe*at,pe*ot));if(this.autoPaging){for(var bt,gt=E.call(this,Qe),Rt=[],Ft=0;Ft<gt.length;Ft+=1)Rt.indexOf(gt[Ft])===-1&&Rt.push(gt[Ft]);K(Rt);for(var jt=Rt[0],Gt=Rt[Rt.length-1],qt=jt;qt<Gt+1;qt++){this.pdf.setPage(qt);var Jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ke=qt===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],se=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],je=qt===1?0:qe+(qt-2)*se;if(this.ctx.clip_path.length!==0){var nt=this.path;bt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=q(bt,this.posX+this.margin[3],-je+ke+this.ctx.prevPageLastElemOffset),fe.call(this,"fill",!0),this.path=nt}var pt=JSON.parse(JSON.stringify(Qe));pt=q([pt],this.posX+this.margin[3],-je+ke+this.ctx.prevPageLastElemOffset)[0];var He=(qt>jt||qt<Gt)&&M.call(this);He&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,se,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",pt.x,pt.y,pt.w,pt.h,null,null,Mt),He&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(C,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,Mt)};var E=function(C,G,J){var oe=[];G=G||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var pe=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":oe.push(Math.floor((C.y+pe)/J)+1);break;case"arc":oe.push(Math.floor((C.y+pe-C.radius)/J)+1),oe.push(Math.floor((C.y+pe+C.radius)/J)+1);break;case"qct":var be=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);oe.push(Math.floor((be.y+pe)/J)+1),oe.push(Math.floor((be.y+be.h+pe)/J)+1);break;case"bct":var Fe=Le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);oe.push(Math.floor((Fe.y+pe)/J)+1),oe.push(Math.floor((Fe.y+Fe.h+pe)/J)+1);break;case"rect":oe.push(Math.floor((C.y+pe)/J)+1),oe.push(Math.floor((C.y+C.h+pe)/J)+1)}for(var De=0;De<oe.length;De+=1)for(;this.pdf.internal.getNumberOfPages()<oe[De];)P.call(this);return oe},P=function(){var C=this.fillStyle,G=this.strokeStyle,J=this.font,oe=this.lineCap,pe=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=G,this.font=J,this.lineCap=oe,this.lineWidth=pe,this.lineJoin=be},q=function(C,G,J){for(var oe=0;oe<C.length;oe++)switch(C[oe].type){case"bct":C[oe].x2+=G,C[oe].y2+=J;case"qct":C[oe].x1+=G,C[oe].y1+=J;default:C[oe].x+=G,C[oe].y+=J}return C},K=function(C){return C.sort(function(G,J){return G-J})},H=function(C,G){var J=this.fillStyle,oe=this.strokeStyle,pe=this.lineCap,be=this.lineWidth,Fe=Math.abs(be*this.ctx.transform.scaleX),De=this.lineJoin;if(this.autoPaging){for(var Ue,_e,at=JSON.parse(JSON.stringify(this.path)),ot=JSON.parse(JSON.stringify(this.path)),it=[],Y=0;Y<ot.length;Y++)if(ot[Y].x!==void 0)for(var mt=E.call(this,ot[Y]),Mt=0;Mt<mt.length;Mt+=1)it.indexOf(mt[Mt])===-1&&it.push(mt[Mt]);for(var Ct=0;Ct<it.length;Ct++)for(;this.pdf.internal.getNumberOfPages()<it[Ct];)P.call(this);K(it);for(var Qe=it[0],bt=it[it.length-1],gt=Qe;gt<bt+1;gt++){this.pdf.setPage(gt),this.fillStyle=J,this.strokeStyle=oe,this.lineCap=pe,this.lineWidth=Fe,this.lineJoin=De;var Rt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ft=gt===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qt=gt===1?0:jt+(gt-2)*Gt;if(this.ctx.clip_path.length!==0){var Jt=this.path;Ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=q(Ue,this.posX+this.margin[3],-qt+Ft+this.ctx.prevPageLastElemOffset),fe.call(this,C,!0),this.path=Jt}if(_e=JSON.parse(JSON.stringify(at)),this.path=q(_e,this.posX+this.margin[3],-qt+Ft+this.ctx.prevPageLastElemOffset),G===!1||gt===0){var ke=(gt>Qe||gt<bt)&&M.call(this);ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Rt,Gt,null).clip().discardPath()),fe.call(this,C,G),ke&&this.pdf.restoreGraphicsState()}this.lineWidth=be}this.path=at}else this.lineWidth=Fe,fe.call(this,C,G),this.lineWidth=be},fe=function(C,G){if((C!=="stroke"||G||!z.call(this))&&(C==="stroke"||G||!b.call(this))){for(var J,oe,pe=[],be=this.path,Fe=0;Fe<be.length;Fe++){var De=be[Fe];switch(De.type){case"begin":pe.push({begin:!0});break;case"close":pe.push({close:!0});break;case"mt":pe.push({start:De,deltas:[],abs:[]});break;case"lt":var Ue=pe.length;if(be[Fe-1]&&!isNaN(be[Fe-1].x)&&(J=[De.x-be[Fe-1].x,De.y-be[Fe-1].y],Ue>0)){for(;Ue>=0;Ue--)if(pe[Ue-1].close!==!0&&pe[Ue-1].begin!==!0){pe[Ue-1].deltas.push(J),pe[Ue-1].abs.push(De);break}}break;case"bct":J=[De.x1-be[Fe-1].x,De.y1-be[Fe-1].y,De.x2-be[Fe-1].x,De.y2-be[Fe-1].y,De.x-be[Fe-1].x,De.y-be[Fe-1].y],pe[pe.length-1].deltas.push(J);break;case"qct":var _e=be[Fe-1].x+2/3*(De.x1-be[Fe-1].x),at=be[Fe-1].y+2/3*(De.y1-be[Fe-1].y),ot=De.x+2/3*(De.x1-De.x),it=De.y+2/3*(De.y1-De.y),Y=De.x,mt=De.y;J=[_e-be[Fe-1].x,at-be[Fe-1].y,ot-be[Fe-1].x,it-be[Fe-1].y,Y-be[Fe-1].x,mt-be[Fe-1].y],pe[pe.length-1].deltas.push(J);break;case"arc":pe.push({deltas:[],abs:[],arc:!0}),Array.isArray(pe[pe.length-1].abs)&&pe[pe.length-1].abs.push(De)}}oe=G?null:C==="stroke"?"stroke":"fill";for(var Mt=!1,Ct=0;Ct<pe.length;Ct++)if(pe[Ct].arc)for(var Qe=pe[Ct].abs,bt=0;bt<Qe.length;bt++){var gt=Qe[bt];gt.type==="arc"?xe.call(this,gt.x,gt.y,gt.radius,gt.startAngle,gt.endAngle,gt.counterclockwise,void 0,G,!Mt):ee.call(this,gt.x,gt.y),Mt=!0}else if(pe[Ct].close===!0)this.pdf.internal.out("h"),Mt=!1;else if(pe[Ct].begin!==!0){var Rt=pe[Ct].start.x,Ft=pe[Ct].start.y;ie.call(this,pe[Ct].deltas,Rt,Ft),Mt=!0}oe&&Z.call(this,oe),G&&ge.call(this)}},de=function(C){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-J;case"top":return C+G-J;case"hanging":return C+G-2*J;case"middle":return C+G/2-J;default:return C}},Pe=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(G,J){this.colorStops.push([G,J])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var xe=function(C,G,J,oe,pe,be,Fe,De,Ue){for(var _e=Re.call(this,J,oe,pe,be),at=0;at<_e.length;at++){var ot=_e[at];at===0&&(Ue?B.call(this,ot.x1+C,ot.y1+G):ee.call(this,ot.x1+C,ot.y1+G)),Ne.call(this,C,G,ot.x2,ot.y2,ot.x3,ot.y3,ot.x4,ot.y4)}De?ge.call(this):Z.call(this,Fe)},Z=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ge=function(){this.pdf.clip(),this.pdf.discardPath()},B=function(C,G){this.pdf.internal.out(r(C)+" "+o(G)+" m")},$=function(C){var G;switch(C.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var J,oe,pe,be=this.pdf.getTextDimensions(C.text),Fe=de.call(this,C.y),De=Pe.call(this,Fe)-be.h,Ue=this.ctx.transform.applyToPoint(new g(C.x,Fe));if(this.autoPaging){var _e=this.ctx.transform.decompose(),at=new m;at=(at=(at=at.multiply(_e.translate)).multiply(_e.skew)).multiply(_e.scale);for(var ot=this.ctx.transform.applyToRectangle(new p(C.x,Fe,be.w,be.h)),it=at.applyToRectangle(new p(C.x,De,be.w,be.h)),Y=E.call(this,it),mt=[],Mt=0;Mt<Y.length;Mt+=1)mt.indexOf(Y[Mt])===-1&&mt.push(Y[Mt]);K(mt);for(var Ct=mt[0],Qe=mt[mt.length-1],bt=Ct;bt<Qe+1;bt++){this.pdf.setPage(bt);var gt=bt===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[2],jt=Ft-this.margin[0],Gt=this.pdf.internal.pageSize.width-this.margin[1],qt=Gt-this.margin[3],Jt=bt===1?0:Rt+(bt-2)*jt;if(this.ctx.clip_path.length!==0){var ke=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=q(J,this.posX+this.margin[3],-1*Jt+gt),fe.call(this,"fill",!0),this.path=ke}var qe=q([JSON.parse(JSON.stringify(it))],this.posX+this.margin[3],-Jt+gt+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(oe*C.scale),pe=this.lineWidth,this.lineWidth=pe*C.scale);var se=this.autoPaging!=="text";if(se||qe.y+qe.h<=Ft){if(se||qe.y>=gt&&qe.x<=Gt){var je=se?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||Gt-qe.x)[0],nt=q([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-Jt+gt+this.ctx.prevPageLastElemOffset)[0],pt=se&&(bt>Ct||bt<Qe)&&M.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,jt,null).clip().discardPath()),this.pdf.text(je,nt.x,nt.y,{angle:C.angle,align:G,renderingMode:C.renderingMode}),pt&&this.pdf.restoreGraphicsState()}}else qe.y<Ft&&(this.ctx.prevPageLastElemOffset+=Ft-qe.y);C.scale>=.01&&(this.pdf.setFontSize(oe),this.lineWidth=pe)}}else C.scale>=.01&&(oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(oe*C.scale),pe=this.lineWidth,this.lineWidth=pe*C.scale),this.pdf.text(C.text,Ue.x+this.posX,Ue.y+this.posY,{angle:C.angle,align:G,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(oe),this.lineWidth=pe)},ee=function(C,G,J,oe){J=J||0,oe=oe||0,this.pdf.internal.out(r(C+J)+" "+o(G+oe)+" l")},ie=function(C,G,J){return this.pdf.lines(C,G,J,null,null)},Ne=function(C,G,J,oe,pe,be,Fe,De){this.pdf.internal.out([a(c(J+C)),a(l(oe+G)),a(c(pe+C)),a(l(be+G)),a(c(Fe+C)),a(l(De+G)),"c"].join(" "))},Re=function(C,G,J,oe){for(var pe=2*Math.PI,be=Math.PI/2;G>J;)G-=pe;var Fe=Math.abs(J-G);Fe<pe&&oe&&(Fe=pe-Fe);for(var De=[],Ue=oe?-1:1,_e=G;Fe>1e-5;){var at=_e+Ue*Math.min(Fe,be);De.push(Me.call(this,C,_e,at)),Fe-=Math.abs(at-_e),_e=at}return De},Me=function(C,G,J){var oe=(J-G)/2,pe=C*Math.cos(oe),be=C*Math.sin(oe),Fe=pe,De=-be,Ue=Fe*Fe+De*De,_e=Ue+Fe*pe+De*be,at=4/3*(Math.sqrt(2*Ue*_e)-_e)/(Fe*be-De*pe),ot=Fe-at*De,it=De+at*Fe,Y=ot,mt=-it,Mt=oe+G,Ct=Math.cos(Mt),Qe=Math.sin(Mt);return{x1:C*Math.cos(G),y1:C*Math.sin(G),x2:ot*Ct-it*Qe,y2:ot*Qe+it*Ct,x3:Y*Ct-mt*Qe,y3:Y*Qe+mt*Ct,x4:C*Math.cos(J),y4:C*Math.sin(J)}},ue=function(C){return 180*C/Math.PI},Ce=function(C,G,J,oe,pe,be){var Fe=C+.5*(J-C),De=G+.5*(oe-G),Ue=pe+.5*(J-pe),_e=be+.5*(oe-be),at=Math.min(C,pe,Fe,Ue),ot=Math.max(C,pe,Fe,Ue),it=Math.min(G,be,De,_e),Y=Math.max(G,be,De,_e);return new p(at,it,ot-at,Y-it)},Le=function(C,G,J,oe,pe,be,Fe,De){var Ue,_e,at,ot,it,Y,mt,Mt,Ct,Qe,bt,gt,Rt,Ft,jt=J-C,Gt=oe-G,qt=pe-J,Jt=be-oe,ke=Fe-pe,qe=De-be;for(_e=0;_e<41;_e++)Ct=(mt=(at=C+(Ue=_e/40)*jt)+Ue*((it=J+Ue*qt)-at))+Ue*(it+Ue*(pe+Ue*ke-it)-mt),Qe=(Mt=(ot=G+Ue*Gt)+Ue*((Y=oe+Ue*Jt)-ot))+Ue*(Y+Ue*(be+Ue*qe-Y)-Mt),_e==0?(bt=Ct,gt=Qe,Rt=Ct,Ft=Qe):(bt=Math.min(bt,Ct),gt=Math.min(gt,Qe),Rt=Math.max(Rt,Ct),Ft=Math.max(Ft,Qe));return new p(Math.round(bt),Math.round(gt),Math.round(Rt-bt),Math.round(Ft-gt))},Q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,G,J=(C=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:G}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(Yt.API),(function(i){var a=function(g){var p,m,v,j,A,R,b,z,M,E;for(m=[],v=0,j=(g+=p="\0\0\0\0".slice(g.length%4||4)).length;j>v;v+=4)(A=(g.charCodeAt(v)<<24)+(g.charCodeAt(v+1)<<16)+(g.charCodeAt(v+2)<<8)+g.charCodeAt(v+3))!==0?(R=(A=((A=((A=((A=(A-(E=A%85))/85)-(M=A%85))/85)-(z=A%85))/85)-(b=A%85))/85)%85,m.push(R+33,b+33,z+33,M+33,E+33)):m.push(122);return(function(P,q){for(var K=q;K>0;K--)P.pop()})(m,p.length),String.fromCharCode.apply(String,m)+"~>"},r=function(g){var p,m,v,j,A,R=String,b="length",z=255,M="charCodeAt",E="slice",P="replace";for(g[E](-2),g=g[E](0,-2)[P](/\s/g,"")[P]("z","!!!!!"),v=[],j=0,A=(g+=p="uuuuu"[E](g[b]%5||5))[b];A>j;j+=5)m=52200625*(g[M](j)-33)+614125*(g[M](j+1)-33)+7225*(g[M](j+2)-33)+85*(g[M](j+3)-33)+(g[M](j+4)-33),v.push(z&m>>24,z&m>>16,z&m>>8,z&m);return(function(q,K){for(var H=K;H>0;H--)q.pop()})(v,p[b]),R.fromCharCode.apply(R,v)},o=function(g){return g.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">"},c=function(g){var p=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((g=g.replace(/\s/g,"")).indexOf(">")!==-1&&(g=g.substr(0,g.indexOf(">"))),g.length%2&&(g+="0"),p.test(g)===!1)return"";for(var m="",v=0;v<g.length;v+=2)m+=String.fromCharCode("0x"+(g[v]+g[v+1]));return m},l=function(g){for(var p=new Uint8Array(g.length),m=g.length;m--;)p[m]=g.charCodeAt(m);return(p=xf(p)).reduce(function(v,j){return v+String.fromCharCode(j)},"")};i.processDataByFilters=function(g,p){var m=0,v=g||"",j=[];for(typeof(p=p||[])=="string"&&(p=[p]),m=0;m<p.length;m+=1)switch(p[m]){case"ASCII85Decode":case"/ASCII85Decode":v=r(v),j.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":v=a(v),j.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":v=c(v),j.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":v=o(v),j.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":v=l(v),j.push("/FlateDecode");break;default:throw new Error('The filter: "'+p[m]+'" is not implemented')}return{data:v,reverseChain:j.reverse().join(" ")}}})(Yt.API),(function(i){i.loadFile=function(a,r,o){return(function(c,l,g){l=l!==!1,g=typeof g=="function"?g:function(){};var p=void 0;try{p=(function(m,v,j){var A=new XMLHttpRequest,R=0,b=function(z){var M=z.length,E=[],P=String.fromCharCode;for(R=0;R<M;R+=1)E.push(P(255&z.charCodeAt(R)));return E.join("")};if(A.open("GET",m,!v),A.overrideMimeType("text/plain; charset=x-user-defined"),v===!1&&(A.onload=function(){A.status===200?j(b(this.responseText)):j(void 0)}),A.send(null),v&&A.status===200)return b(A.responseText)})(c,l,g)}catch{}return p})(a,r,o)},i.loadImageFile=i.loadFile})(Yt.API),(function(i){function a(){return(cn.html2canvas?Promise.resolve(cn.html2canvas):Uu(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load html2canvas: "+p))}).then(function(p){return p.default?p.default:p})}function r(){return(cn.DOMPurify?Promise.resolve(cn.DOMPurify):Uu(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load dompurify: "+p))}).then(function(p){return p.default?p.default:p})}var o=function(p){var m=er(p);return m==="undefined"?"undefined":m==="string"||p instanceof String?"string":m==="number"||p instanceof Number?"number":m==="function"||p instanceof Function?"function":p&&p.constructor===Array?"array":p&&p.nodeType===1?"element":m==="object"?"object":"unknown"},c=function(p,m){var v=document.createElement(p);for(var j in m.className&&(v.className=m.className),m.innerHTML&&m.dompurify&&(v.innerHTML=m.dompurify.sanitize(m.innerHTML)),m.style)v.style[j]=m.style[j];return v},l=function p(m,v){for(var j=m.nodeType===3?document.createTextNode(m.nodeValue):m.cloneNode(!1),A=m.firstChild;A;A=A.nextSibling)v!==!0&&A.nodeType===1&&A.nodeName==="SCRIPT"||j.appendChild(p(A,v));return m.nodeType===1&&(m.nodeName==="CANVAS"?(j.width=m.width,j.height=m.height,j.getContext("2d").drawImage(m,0,0)):m.nodeName!=="TEXTAREA"&&m.nodeName!=="SELECT"||(j.value=m.value),j.addEventListener("load",function(){j.scrollTop=m.scrollTop,j.scrollLeft=m.scrollLeft},!0)),j},g=function p(m){var v=Object.assign(p.convert(Promise.resolve()),JSON.parse(JSON.stringify(p.template))),j=p.convert(Promise.resolve(),v);return(j=j.setProgress(1,p,1,[p])).set(m)};(g.prototype=Object.create(Promise.prototype)).constructor=g,g.convert=function(p,m){return p.__proto__=m||g.prototype,p},g.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},g.prototype.from=function(p,m){return this.then(function(){switch(m=m||(function(v){switch(o(v)){case"string":return"string";case"element":return v.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(p),m){case"string":return this.then(r).then(function(v){return this.set({src:c("div",{innerHTML:p,dompurify:v})})});case"element":return this.set({src:p});case"canvas":return this.set({canvas:p});case"img":return this.set({img:p});default:return this.error("Unknown source type.")}})},g.prototype.to=function(p){switch(p){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},g.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var p={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},m=l(this.prop.src,this.opt.html2canvas.javascriptEnabled);m.tagName==="BODY"&&(p.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=c("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=c("div",{className:"html2pdf__container",style:p}),this.prop.container.appendChild(m),this.prop.container.firstChild.appendChild(c("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},g.prototype.toCanvas=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(a).then(function(m){var v=Object.assign({},this.opt.html2canvas);return delete v.onrendered,m(this.prop.container,v)}).then(function(m){(this.opt.html2canvas.onrendered||function(){})(m),this.prop.canvas=m,document.body.removeChild(this.prop.overlay)})},g.prototype.toContext2d=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(a).then(function(m){var v=this.opt.jsPDF,j=this.opt.fontFaces,A=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,R=Object.assign({async:!0,allowTaint:!0,scale:A,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete R.onrendered,v.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,v.context2d.posX=this.opt.x,v.context2d.posY=this.opt.y,v.context2d.margin=this.opt.margin,v.context2d.fontFaces=j,j)for(var b=0;b<j.length;++b){var z=j[b],M=z.src.find(function(E){return E.format==="truetype"});M&&v.addFont(M.url,z.ref.name,z.ref.style)}return R.windowHeight=R.windowHeight||0,R.windowHeight=R.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):R.windowHeight,v.context2d.save(!0),m(this.prop.container,R)}).then(function(m){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(m),this.prop.canvas=m,document.body.removeChild(this.prop.overlay)})},g.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var p=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=p})},g.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},g.prototype.output=function(p,m,v){return(v=v||"pdf").toLowerCase()==="img"||v.toLowerCase()==="image"?this.outputImg(p,m):this.outputPdf(p,m)},g.prototype.outputPdf=function(p,m){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(p,m)})},g.prototype.outputImg=function(p){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(p){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+p+'" is not supported.'}})},g.prototype.save=function(p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(p?{filename:p}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},g.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},g.prototype.set=function(p){if(o(p)!=="object")return this;var m=Object.keys(p||{}).map(function(v){if(v in g.template.prop)return function(){this.prop[v]=p[v]};switch(v){case"margin":return this.setMargin.bind(this,p.margin);case"jsPDF":return function(){return this.opt.jsPDF=p.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,p.pageSize);default:return function(){this.opt[v]=p[v]}}},this);return this.then(function(){return this.thenList(m)})},g.prototype.get=function(p,m){return this.then(function(){var v=p in g.template.prop?this.prop[p]:this.opt[p];return m?m(v):v})},g.prototype.setMargin=function(p){return this.then(function(){switch(o(p)){case"number":p=[p,p,p,p];case"array":if(p.length===2&&(p=[p[0],p[1],p[0],p[1]]),p.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=p}).then(this.setPageSize)},g.prototype.setPageSize=function(p){function m(v,j){return Math.floor(v*j/72*96)}return this.then(function(){(p=p||Yt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(p.inner={width:p.width-this.opt.margin[1]-this.opt.margin[3],height:p.height-this.opt.margin[0]-this.opt.margin[2]},p.inner.px={width:m(p.inner.width,p.k),height:m(p.inner.height,p.k)},p.inner.ratio=p.inner.height/p.inner.width),this.prop.pageSize=p})},g.prototype.setProgress=function(p,m,v,j){return p!=null&&(this.progress.val=p),m!=null&&(this.progress.state=m),v!=null&&(this.progress.n=v),j!=null&&(this.progress.stack=j),this.progress.ratio=this.progress.val/this.progress.state,this},g.prototype.updateProgress=function(p,m,v,j){return this.setProgress(p?this.progress.val+p:null,m||null,v?this.progress.n+v:null,j?this.progress.stack.concat(j):null)},g.prototype.then=function(p,m){var v=this;return this.thenCore(p,m,function(j,A){return v.updateProgress(null,null,1,[j]),Promise.prototype.then.call(this,function(R){return v.updateProgress(null,j),R}).then(j,A).then(function(R){return v.updateProgress(1),R})})},g.prototype.thenCore=function(p,m,v){v=v||Promise.prototype.then;var j=this;p&&(p=p.bind(j)),m&&(m=m.bind(j));var A=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?j:g.convert(Object.assign({},j),Promise.prototype),R=v.call(A,p,m);return g.convert(R,j.__proto__)},g.prototype.thenExternal=function(p,m){return Promise.prototype.then.call(this,p,m)},g.prototype.thenList=function(p){var m=this;return p.forEach(function(v){m=m.thenCore(v)}),m},g.prototype.catch=function(p){p&&(p=p.bind(this));var m=Promise.prototype.catch.call(this,p);return g.convert(m,this)},g.prototype.catchExternal=function(p){return Promise.prototype.catch.call(this,p)},g.prototype.error=function(p){return this.then(function(){throw new Error(p)})},g.prototype.using=g.prototype.set,g.prototype.saveAs=g.prototype.save,g.prototype.export=g.prototype.output,g.prototype.run=g.prototype.then,Yt.getPageSize=function(p,m,v){if(er(p)==="object"){var j=p;p=j.orientation,m=j.unit||m,v=j.format||v}m=m||"mm",v=v||"a4",p=(""+(p||"P")).toLowerCase();var A,R=(""+v).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(m){case"pt":A=1;break;case"mm":A=72/25.4;break;case"cm":A=72/2.54;break;case"in":A=72;break;case"px":A=.75;break;case"pc":case"em":A=12;break;case"ex":A=6;break;default:throw"Invalid unit: "+m}var z,M=0,E=0;if(b.hasOwnProperty(R))M=b[R][1]/A,E=b[R][0]/A;else try{M=v[1],E=v[0]}catch{throw new Error("Invalid format: "+v)}if(p==="p"||p==="portrait")p="p",E>M&&(z=E,E=M,M=z);else{if(p!=="l"&&p!=="landscape")throw"Invalid orientation: "+p;p="l",M>E&&(z=E,E=M,M=z)}return{width:E,height:M,unit:m,k:A,orientation:p}},i.html=function(p,m){(m=m||{}).callback=m.callback||function(){},m.html2canvas=m.html2canvas||{},m.html2canvas.canvas=m.html2canvas.canvas||this.canvas,m.jsPDF=m.jsPDF||this,m.fontFaces=m.fontFaces?m.fontFaces.map(sf):null;var v=new g(m);return m.worker?v:v.from(p).doCallback()}})(Yt.API),Yt.API.addJS=function(i){return fm=i,this.internal.events.subscribe("postPutResources",function(){Fd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Fd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),um=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+fm+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Fd!==void 0&&um!==void 0&&this.internal.out("/Names <</JavaScript "+Fd+" 0 R>>")}),this},(function(i){var a;i.events.push(["postPutResources",function(){var r=this,o=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var c=r.outline.render().split(/\r\n/),l=0;l<c.length;l++){var g=c[l],p=o.exec(g);if(p!=null){var m=p[1];r.internal.newObjectDeferredBegin(m,!1)}r.internal.write(g)}if(this.outline.createNamedDestinations){var v=this.internal.pages.length,j=[];for(l=0;l<v;l++){var A=r.internal.newObject();j.push(A);var R=r.internal.getPageInfo(l+1);r.internal.write("<< /D["+R.objId+" 0 R /XYZ null null null]>> endobj")}var b=r.internal.newObject();for(r.internal.write("<< /Names [ "),l=0;l<j.length;l++)r.internal.write("(page_"+(l+1)+")"+j[l]+" 0 R");r.internal.write(" ] >>","endobj"),a=r.internal.newObject(),r.internal.write("<< /Dests "+b+" 0 R"),r.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+a+" 0 R"))}]),i.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(o,c,l){var g={title:c,options:l,children:[]};return o==null&&(o=this.root),o.children.push(g),g},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(o){o.id=r.internal.newObjectDeferred();for(var c=0;c<o.children.length;c++)this.genIds_r(o.children[c])},r.outline.renderRoot=function(o){this.objStart(o),this.line("/Type /Outlines"),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1]))),this.line("/Count "+this.count_r({count:0},o)),this.objEnd()},r.outline.renderItems=function(o){for(var c=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<o.children.length;l++){var g=o.children[l];this.objStart(g),this.line("/Title "+this.makeString(g.title)),this.line("/Parent "+this.makeRef(o)),l>0&&this.line("/Prev "+this.makeRef(o.children[l-1])),l<o.children.length-1&&this.line("/Next "+this.makeRef(o.children[l+1])),g.children.length>0&&(this.line("/First "+this.makeRef(g.children[0])),this.line("/Last "+this.makeRef(g.children[g.children.length-1])));var p=this.count=this.count_r({count:0},g);if(p>0&&this.line("/Count "+p),g.options&&g.options.pageNumber){var m=r.internal.getPageInfo(g.options.pageNumber);this.line("/Dest ["+m.objId+" 0 R /XYZ 0 "+c(0)+" 0]")}this.objEnd()}for(var v=0;v<o.children.length;v++)this.renderItems(o.children[v])},r.outline.line=function(o){this.ctx.val+=o+`\r
`},r.outline.makeRef=function(o){return o.id+" 0 R"},r.outline.makeString=function(o){return"("+r.internal.pdfEscape(o)+")"},r.outline.objStart=function(o){this.ctx.val+=`\r
`+o.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(o,c){for(var l=0;l<c.children.length;l++)o.count++,this.count_r(o,c.children[l]);return o.count}}])})(Yt.API),(function(i){var a=[192,193,194,195,196,197,198,199];i.processJPEG=function(r,o,c,l,g,p){var m,v=this.decode.DCT_DECODE,j=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=g||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,m=(function(A){for(var R,b=256*A.charCodeAt(4)+A.charCodeAt(5),z=A.length,M={width:0,height:0,numcomponents:1},E=4;E<z;E+=2){if(E+=b,a.indexOf(A.charCodeAt(E+1))!==-1){R=256*A.charCodeAt(E+5)+A.charCodeAt(E+6),M={width:256*A.charCodeAt(E+7)+A.charCodeAt(E+8),height:R,numcomponents:A.charCodeAt(E+9)};break}b=256*A.charCodeAt(E+2)+A.charCodeAt(E+3)}return M})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),m.numcomponents){case 1:p=this.color_spaces.DEVICE_GRAY;break;case 4:p=this.color_spaces.DEVICE_CMYK;break;case 3:p=this.color_spaces.DEVICE_RGB}j={data:r,width:m.width,height:m.height,colorSpace:p,bitsPerComponent:8,filter:v,index:o,alias:c}}return j}})(Yt.API),Yt.API.processPNG=function(i,a,r,o){if(this.__addimage__.isArrayBuffer(i)&&(i=new Uint8Array(i)),this.__addimage__.isArrayBufferView(i)){var c,l=Bx(i,{checkCrc:!0}),g=l.width,p=l.height,m=l.channels,v=l.palette,j=l.depth;c=v&&m===1?(function(xe){for(var Z=xe.width,ge=xe.height,B=xe.data,$=xe.palette,ee=xe.depth,ie=!1,Ne=[],Re=[],Me=void 0,ue=!1,Ce=0,Le=0;Le<$.length;Le++){var Q=gp($[Le],4),C=Q[0],G=Q[1],J=Q[2],oe=Q[3];Ne.push(C,G,J),oe!=null&&(oe===0?(Ce++,Re.length<1&&Re.push(Le)):oe<255&&(ue=!0))}if(ue||Ce>1){ie=!0,Re=void 0;var pe=Z*ge;Me=new Uint8Array(pe);for(var be=new DataView(B.buffer),Fe=0;Fe<pe;Fe++){var De=lf(be,Fe,ee),Ue=gp($[De],4)[3];Me[Fe]=Ue}}else Ce===0&&(Re=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ie?8:void 0,colorBytes:B,alphaBytes:Me,needSMask:ie,palette:Ne,mask:Re}})(l):m===2||m===4?(function(xe){for(var Z=xe.data,ge=xe.width,B=xe.height,$=xe.channels,ee=xe.depth,ie=$===2?"DeviceGray":"DeviceRGB",Ne=$-1,Re=ge*B,Me=Ne,ue=Re*Me,Ce=1*Re,Le=Math.ceil(ue*ee/8),Q=Math.ceil(Ce*ee/8),C=new Uint8Array(Le),G=new Uint8Array(Q),J=new DataView(Z.buffer),oe=new DataView(C.buffer),pe=new DataView(G.buffer),be=!1,Fe=0;Fe<Re;Fe++){for(var De=Fe*$,Ue=0;Ue<Me;Ue++)wm(oe,lf(J,De+Ue,ee),Fe*Me+Ue,ee);var _e=lf(J,De+Me,ee);_e<(1<<ee)-1&&(be=!0),wm(pe,_e,1*Fe,ee)}return{colorSpace:ie,colorsPerPixel:Ne,sMaskBitsPerComponent:be?ee:void 0,colorBytes:C,alphaBytes:G,needSMask:be}})(l):(function(xe){var Z=xe.data,ge=xe.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ge,colorsPerPixel:ge==="DeviceGray"?1:3,colorBytes:Z instanceof Uint16Array?(function(B){for(var $=B.length,ee=new Uint8Array(2*$),ie=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),Ne=0;Ne<$;Ne++)ie.setUint16(2*Ne,B[Ne],!1);return ee})(Z):Z,needSMask:!1}})(l);var A,R,b,z=c,M=z.colorSpace,E=z.colorsPerPixel,P=z.sMaskBitsPerComponent,q=z.colorBytes,K=z.alphaBytes,H=z.needSMask,fe=z.palette,de=z.mask,Pe=null;return o!==Yt.API.image_compression.NONE&&typeof xf=="function"?(Pe=(function(xe){var Z;switch(xe){case Yt.API.image_compression.FAST:Z=11;break;case Yt.API.image_compression.MEDIUM:Z=13;break;case Yt.API.image_compression.SLOW:Z=14;break;default:Z=12}return Z})(o),A=this.decode.FLATE_DECODE,R="/Predictor ".concat(Pe," /Colors ").concat(E," /BitsPerComponent ").concat(j," /Columns ").concat(g),i=gm(q,Math.ceil(g*E*j/8),E,j,o),H&&(b=gm(K,Math.ceil(g*P/8),1,P,o))):(A=void 0,R=void 0,i=q,H&&(b=K)),(this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i))&&(i=this.__addimage__.arrayBufferToBinaryString(i)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:r,data:i,index:a,filter:A,decodeParameters:R,transparency:de,palette:fe,sMask:b,predictor:Pe,width:g,height:p,bitsPerComponent:j,sMaskBitsPerComponent:P,colorSpace:M}}},(function(i){i.processGIF89A=function(a,r,o,c){var l=new sy(a),g=l.width,p=l.height,m=[];l.decodeAndBlitFrameRGBA(0,m);var v={data:m,width:g,height:p},j=new cf(100).encode(v,100);return i.processJPEG.call(this,j,r,o,c)},i.processGIF87A=i.processGIF89A})(Yt.API),fo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var a=0;a<i;a++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[a]={red:c,green:o,blue:r,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},fo.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,a=this.width*this.height*4;this.data=new Uint8Array(a),this[i]()}catch(r){lr.log("bit decode error:"+r)}},fo.prototype.bit1=function(){var i,a=Math.ceil(this.width/8),r=a%4;for(i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,c=0;c<a;c++)for(var l=this.datav.getUint8(this.pos++,!0),g=o*this.width*4+8*c*4,p=0;p<8&&8*c+p<this.width;p++){var m=this.palette[l>>7-p&1];this.data[g+4*p]=m.blue,this.data[g+4*p+1]=m.green,this.data[g+4*p+2]=m.red,this.data[g+4*p+3]=255}r!==0&&(this.pos+=4-r)}},fo.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),a=i%4,r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,c=0;c<i;c++){var l=this.datav.getUint8(this.pos++,!0),g=o*this.width*4+2*c*4,p=l>>4,m=15&l,v=this.palette[p];if(this.data[g]=v.blue,this.data[g+1]=v.green,this.data[g+2]=v.red,this.data[g+3]=255,2*c+1>=this.width)break;v=this.palette[m],this.data[g+4]=v.blue,this.data[g+4+1]=v.green,this.data[g+4+2]=v.red,this.data[g+4+3]=255}a!==0&&(this.pos+=4-a)}},fo.prototype.bit8=function(){for(var i=this.width%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,o=0;o<this.width;o++){var c=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+4*o;if(c<this.palette.length){var g=this.palette[c];this.data[l]=g.red,this.data[l+1]=g.green,this.data[l+2]=g.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}i!==0&&(this.pos+=4-i)}},fo.prototype.bit15=function(){for(var i=this.width%3,a=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,c=0;c<this.width;c++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var g=(l&a)/a*255|0,p=(l>>5&a)/a*255|0,m=(l>>10&a)/a*255|0,v=l>>15?255:0,j=o*this.width*4+4*c;this.data[j]=m,this.data[j+1]=p,this.data[j+2]=g,this.data[j+3]=v}this.pos+=i}},fo.prototype.bit16=function(){for(var i=this.width%3,a=parseInt("11111",2),r=parseInt("111111",2),o=this.height-1;o>=0;o--){for(var c=this.bottom_up?o:this.height-1-o,l=0;l<this.width;l++){var g=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(g&a)/a*255|0,m=(g>>5&r)/r*255|0,v=(g>>11)/a*255|0,j=c*this.width*4+4*l;this.data[j]=v,this.data[j+1]=m,this.data[j+2]=p,this.data[j+3]=255}this.pos+=i}},fo.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),g=a*this.width*4+4*r;this.data[g]=l,this.data[g+1]=c,this.data[g+2]=o,this.data[g+3]=255}this.pos+=this.width%4}},fo.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var a=this.bottom_up?i:this.height-1-i,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),g=this.datav.getUint8(this.pos++,!0),p=a*this.width*4+4*r;this.data[p]=l,this.data[p+1]=c,this.data[p+2]=o,this.data[p+3]=g}},fo.prototype.getData=function(){return this.data},(function(i){i.processBMP=function(a,r,o,c){var l=new fo(a,!1),g=l.width,p=l.height,m={data:l.getData(),width:g,height:p},v=new cf(100).encode(m,100);return i.processJPEG.call(this,v,r,o,c)}})(Yt.API),Sm.prototype.getData=function(){return this.data},(function(i){i.processWEBP=function(a,r,o,c){var l=new Sm(a),g=l.width,p=l.height,m={data:l.getData(),width:g,height:p},v=new cf(100).encode(m,100);return i.processJPEG.call(this,v,r,o,c)}})(Yt.API),Yt.API.processRGBA=function(i,a,r){for(var o=i.data,c=o.length,l=new Uint8Array(c/4*3),g=new Uint8Array(c/4),p=0,m=0,v=0;v<c;v+=4){var j=o[v],A=o[v+1],R=o[v+2],b=o[v+3];l[p++]=j,l[p++]=A,l[p++]=R,g[m++]=b}var z=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(g),data:z,index:a,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},Yt.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},mc=Yt.API,Dd=mc.getCharWidthsArray=function(i,a){var r,o,c=(a=a||{}).font||this.internal.getFont(),l=a.fontSize||this.internal.getFontSize(),g=a.charSpace||this.internal.getCharSpace(),p=a.widths?a.widths:c.metadata.Unicode.widths,m=p.fof?p.fof:1,v=a.kerning?a.kerning:c.metadata.Unicode.kerning,j=v.fof?v.fof:1,A=a.doKerning!==!1,R=0,b=i.length,z=0,M=p[0]||m,E=[];for(r=0;r<b;r++)o=i.charCodeAt(r),typeof c.metadata.widthOfString=="function"?E.push((c.metadata.widthOfGlyph(c.metadata.characterToGlyph(o))+g*(1e3/l)||0)/1e3):(R=A&&er(v[o])==="object"&&!isNaN(parseInt(v[o][z],10))?v[o][z]/j:0,E.push((p[o]||M)/m+R)),z=o;return E},hm=mc.getStringUnitWidth=function(i,a){var r=(a=a||{}).fontSize||this.internal.getFontSize(),o=a.font||this.internal.getFont(),c=a.charSpace||this.internal.getCharSpace();return mc.processArabic&&(i=mc.processArabic(i)),typeof o.metadata.widthOfString=="function"?o.metadata.widthOfString(i,r,c)/r:Dd.apply(this,arguments).reduce(function(l,g){return l+g},0)},pm=function(i,a,r,o){for(var c=[],l=0,g=i.length,p=0;l!==g&&p+a[l]<r;)p+=a[l],l++;c.push(i.slice(0,l));var m=l;for(p=0;l!==g;)p+a[l]>o&&(c.push(i.slice(m,l)),p=0,m=l),p+=a[l],l++;return m!==l&&c.push(i.slice(m,l)),c},mm=function(i,a,r){r||(r={});var o,c,l,g,p,m,v,j=[],A=[j],R=r.textIndent||0,b=0,z=0,M=i.split(" "),E=Dd.apply(this,[" ",r])[0];if(m=r.lineIndent===-1?M[0].length+2:r.lineIndent||0){var P=Array(m).join(" "),q=[];M.map(function(H){(H=H.split(/\s*\n/)).length>1?q=q.concat(H.map(function(fe,de){return(de&&fe.length?`
`:"")+fe})):q.push(H[0])}),M=q,m=hm.apply(this,[P,r])}for(l=0,g=M.length;l<g;l++){var K=0;if(o=M[l],m&&o[0]==`
`&&(o=o.substr(1),K=1),R+b+(z=(c=Dd.apply(this,[o,r])).reduce(function(H,fe){return H+fe},0))>a||K){if(z>a){for(p=pm.apply(this,[o,c,a-(R+b),a]),j.push(p.shift()),j=[p.pop()];p.length;)A.push([p.shift()]);z=c.slice(o.length-(j[0]?j[0].length:0)).reduce(function(H,fe){return H+fe},0)}else j=[o];A.push(j),R=z+m,b=E}else j.push(o),R+=b+z,b=E}return v=m?function(H,fe){return(fe?P:"")+H.join(" ")}:function(H){return H.join(" ")},A.map(v)},mc.splitTextToSize=function(i,a,r){var o,c=(r=r||{}).fontSize||this.internal.getFontSize(),l=(function(j){if(j.widths&&j.kerning)return{widths:j.widths,kerning:j.kerning};var A=this.internal.getFont(j.fontName,j.fontStyle),R="Unicode";return A.metadata[R]?{widths:A.metadata[R].widths||{0:1},kerning:A.metadata[R].kerning||{}}:{font:A.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);o=Array.isArray(i)?i:String(i).split(/\r?\n/);var g=1*this.internal.scaleFactor*a/c;l.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/c:0,l.lineIndent=r.lineIndent;var p,m,v=[];for(p=0,m=o.length;p<m;p++)v=v.concat(mm.apply(this,[o[p],g,l]));return v},(function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var a="0123456789abcdef",r="klmnopqrstuvwxyz",o={},c={},l=0;l<16;l++)o[r[l]]=a[l],c[a[l]]=r[l];var g=function(R){return"0x"+parseInt(R,10).toString(16)},p=i.__fontmetrics__.compress=function(R){var b,z,M,E,P=["{"];for(var q in R){if(b=R[q],isNaN(parseInt(q,10))?z="'"+q+"'":(q=parseInt(q,10),z=(z=g(q).slice(2)).slice(0,-1)+c[z.slice(-1)]),typeof b=="number")b<0?(M=g(b).slice(3),E="-"):(M=g(b).slice(2),E=""),M=E+M.slice(0,-1)+c[M.slice(-1)];else{if(er(b)!=="object")throw new Error("Don't know what to do with value type "+er(b)+".");M=p(b)}P.push(z+M)}return P.push("}"),P.join("")},m=i.__fontmetrics__.uncompress=function(R){if(typeof R!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,z,M,E,P={},q=1,K=P,H=[],fe="",de="",Pe=R.length-1,xe=1;xe<Pe;xe+=1)(E=R[xe])=="'"?b?(M=b.join(""),b=void 0):b=[]:b?b.push(E):E=="{"?(H.push([K,M]),K={},M=void 0):E=="}"?((z=H.pop())[0][z[1]]=K,M=void 0,K=z[0]):E=="-"?q=-1:M===void 0?o.hasOwnProperty(E)?(fe+=o[E],M=parseInt(fe,16)*q,q=1,fe=""):fe+=E:o.hasOwnProperty(E)?(de+=o[E],K[M]=parseInt(de,16)*q,q=1,M=void 0,de=""):de+=E;return P},v={codePages:["WinAnsiEncoding"],WinAnsiEncoding:m("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},j={Unicode:{Courier:v,"Courier-Bold":v,"Courier-BoldOblique":v,"Courier-Oblique":v,Helvetica:v,"Helvetica-Bold":v,"Helvetica-BoldOblique":v,"Helvetica-Oblique":v,"Times-Roman":v,"Times-Bold":v,"Times-BoldItalic":v,"Times-Italic":v}},A={Unicode:{"Courier-Oblique":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":m("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":m("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":m("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:m("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:m("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":m("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:m("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":m("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":m("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":m("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(R){var b=R.font,z=A.Unicode[b.postScriptName];z&&(b.metadata.Unicode={},b.metadata.Unicode.widths=z.widths,b.metadata.Unicode.kerning=z.kerning);var M=j.Unicode[b.postScriptName];M&&(b.metadata.Unicode.encoding=M,b.encoding=M.codePages[0])}])})(Yt.API),(function(i){var a=function(r){for(var o=r.length,c=new Uint8Array(o),l=0;l<o;l++)c[l]=r.charCodeAt(l);return c};i.API.events.push(["addFont",function(r){var o=void 0,c=r.font,l=r.instance;if(!c.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+c.postScriptName+"').");if(typeof(o=l.existsFileInVFS(c.postScriptName)===!1?l.loadFile(c.postScriptName):l.getFileFromVFS(c.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+c.postScriptName+"').");(function(g,p){p=/^\x00\x01\x00\x00/.test(p)?a(p):a(Bd(p)),g.metadata=i.API.TTFFont.open(p),g.metadata.Unicode=g.metadata.Unicode||{encoding:{},kerning:{},widths:[]},g.metadata.glyIdsUsed=[0]})(c,o)}}])})(Yt),Yt.API.addSvgAsImage=function(i,a,r,o,c,l,g,p){if(isNaN(a)||isNaN(r))throw lr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(c))throw lr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var m=document.createElement("canvas");m.width=o,m.height=c;var v=m.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,m.width,m.height);var j={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return(cn.canvg?Promise.resolve(cn.canvg):Uu(()=>import("./index.es-BLssv8hy.js"),[])).catch(function(R){return Promise.reject(new Error("Could not load canvg: "+R))}).then(function(R){return R.default?R.default:R}).then(function(R){return R.fromString(v,i,j)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(R){return R.render(j)}).then(function(){A.addImage(m.toDataURL("image/jpeg",1),a,r,o,c,g,p)})},Yt.API.putTotalPages=function(i){var a,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(a=new RegExp(i,"g"),r=this.internal.getNumberOfPages()):(a=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var o=1;o<=this.internal.getNumberOfPages();o++)for(var c=0;c<this.internal.pages[o].length;c++)this.internal.pages[o][c]=this.internal.pages[o][c].replace(a,r);return this},Yt.API.viewerPreferences=function(i,a){var r;i=i||{},a=a||!1;var o,c,l,g={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},p=Object.keys(g),m=[],v=0,j=0,A=0;function R(z,M){var E,P=!1;for(E=0;E<z.length;E+=1)z[E]===M&&(P=!0);return P}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(g)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,i==="reset"||a===!0){var b=p.length;for(A=0;A<b;A+=1)r[p[A]].value=r[p[A]].defaultValue,r[p[A]].explicitSet=!1}if(er(i)==="object"){for(c in i)if(l=i[c],R(p,c)&&l!==void 0){if(r[c].type==="boolean"&&typeof l=="boolean")r[c].value=l;else if(r[c].type==="name"&&R(r[c].valueSet,l))r[c].value=l;else if(r[c].type==="integer"&&Number.isInteger(l))r[c].value=l;else if(r[c].type==="array"){for(v=0;v<l.length;v+=1)if(o=!0,l[v].length===1&&typeof l[v][0]=="number")m.push(String(l[v]-1));else if(l[v].length>1){for(j=0;j<l[v].length;j+=1)typeof l[v][j]!="number"&&(o=!1);o===!0&&m.push([l[v][0]-1,l[v][1]-1].join(" "))}r[c].value="["+m.join(" ")+"]"}else r[c].value=r[c].defaultValue;r[c].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var z,M=[];for(z in r)r[z].explicitSet===!0&&(r[z].type==="name"?M.push("/"+z+" /"+r[z].value):M.push("/"+z+" "+r[z].value));M.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+M.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(i){var a=function(){var o='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',c=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(o)),g=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),p=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),m=unescape(encodeURIComponent("</x:xmpmeta>")),v=l.length+g.length+p.length+c.length+m.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+v+" >>"),this.internal.write("stream"),this.internal.write(c+l+g+p+m),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(o,c){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:o,namespaceuri:c||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",a)),this}})(Yt.API),(function(i){var a=i.API,r=a.pdfEscape16=function(l,g){for(var p,m=g.metadata.Unicode.widths,v=["","0","00","000","0000"],j=[""],A=0,R=l.length;A<R;++A){if(p=g.metadata.characterToGlyph(l.charCodeAt(A)),g.metadata.glyIdsUsed.push(p),g.metadata.toUnicode[p]=l.charCodeAt(A),m.indexOf(p)==-1&&(m.push(p),m.push([parseInt(g.metadata.widthOfGlyph(p),10)])),p=="0")return j.join("");p=p.toString(16),j.push(v[4-p.length],p)}return j.join("")},o=function(l){var g,p,m,v,j,A,R;for(j=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,m=[],A=0,R=(p=Object.keys(l).sort(function(b,z){return b-z})).length;A<R;A++)g=p[A],m.length>=100&&(j+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar`,m=[]),l[g]!==void 0&&l[g]!==null&&typeof l[g].toString=="function"&&(v=("0000"+l[g].toString(16)).slice(-4),g=("0000"+(+g).toString(16)).slice(-4),m.push("<"+g+"><"+v+">"));return m.length&&(j+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar
`),j+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};a.events.push(["putFont",function(l){(function(g){var p=g.font,m=g.out,v=g.newObject,j=g.putStream;if(p.metadata instanceof i.API.TTFFont&&p.encoding==="Identity-H"){for(var A=p.metadata.Unicode.widths,R=p.metadata.subset.encode(p.metadata.glyIdsUsed,1),b="",z=0;z<R.length;z++)b+=String.fromCharCode(R[z]);var M=v();j({data:b,addLength1:!0,objectId:M}),m("endobj");var E=v();j({data:o(p.metadata.toUnicode),addLength1:!0,objectId:E}),m("endobj");var P=v();m("<<"),m("/Type /FontDescriptor"),m("/FontName /"+xc(p.fontName)),m("/FontFile2 "+M+" 0 R"),m("/FontBBox "+i.API.PDFObject.convert(p.metadata.bbox)),m("/Flags "+p.metadata.flags),m("/StemV "+p.metadata.stemV),m("/ItalicAngle "+p.metadata.italicAngle),m("/Ascent "+p.metadata.ascender),m("/Descent "+p.metadata.decender),m("/CapHeight "+p.metadata.capHeight),m(">>"),m("endobj");var q=v();m("<<"),m("/Type /Font"),m("/BaseFont /"+xc(p.fontName)),m("/FontDescriptor "+P+" 0 R"),m("/W "+i.API.PDFObject.convert(A)),m("/CIDToGIDMap /Identity"),m("/DW 1000"),m("/Subtype /CIDFontType2"),m("/CIDSystemInfo"),m("<<"),m("/Supplement 0"),m("/Registry (Adobe)"),m("/Ordering ("+p.encoding+")"),m(">>"),m(">>"),m("endobj"),p.objectNumber=v(),m("<<"),m("/Type /Font"),m("/Subtype /Type0"),m("/ToUnicode "+E+" 0 R"),m("/BaseFont /"+xc(p.fontName)),m("/Encoding /"+p.encoding),m("/DescendantFonts ["+q+" 0 R]"),m(">>"),m("endobj"),p.isAlreadyPutted=!0}})(l)}]),a.events.push(["putFont",function(l){(function(g){var p=g.font,m=g.out,v=g.newObject,j=g.putStream;if(p.metadata instanceof i.API.TTFFont&&p.encoding==="WinAnsiEncoding"){for(var A=p.metadata.rawData,R="",b=0;b<A.length;b++)R+=String.fromCharCode(A[b]);var z=v();j({data:R,addLength1:!0,objectId:z}),m("endobj");var M=v();j({data:o(p.metadata.toUnicode),addLength1:!0,objectId:M}),m("endobj");var E=v();m("<<"),m("/Descent "+p.metadata.decender),m("/CapHeight "+p.metadata.capHeight),m("/StemV "+p.metadata.stemV),m("/Type /FontDescriptor"),m("/FontFile2 "+z+" 0 R"),m("/Flags 96"),m("/FontBBox "+i.API.PDFObject.convert(p.metadata.bbox)),m("/FontName /"+xc(p.fontName)),m("/ItalicAngle "+p.metadata.italicAngle),m("/Ascent "+p.metadata.ascender),m(">>"),m("endobj"),p.objectNumber=v();for(var P=0;P<p.metadata.hmtx.widths.length;P++)p.metadata.hmtx.widths[P]=parseInt(p.metadata.hmtx.widths[P]*(1e3/p.metadata.head.unitsPerEm));m("<</Subtype/TrueType/Type/Font/ToUnicode "+M+" 0 R/BaseFont/"+xc(p.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+p.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(p.metadata.hmtx.widths)+">>"),m("endobj"),p.isAlreadyPutted=!0}})(l)}]);var c=function(l){var g,p=l.text||"",m=l.x,v=l.y,j=l.options||{},A=l.mutex||{},R=A.pdfEscape,b=A.activeFontKey,z=A.fonts,M=b,E="",P=0,q="",K=z[M].encoding;if(z[M].encoding!=="Identity-H")return{text:p,x:m,y:v,options:j,mutex:A};for(q=p,M=b,Array.isArray(p)&&(q=p[0]),P=0;P<q.length;P+=1)z[M].metadata.hasOwnProperty("cmap")&&(g=z[M].metadata.cmap.unicode.codeMap[q[P].charCodeAt(0)]),g||q[P].charCodeAt(0)<256&&z[M].metadata.hasOwnProperty("Unicode")?E+=q[P]:E+="";var H="";return parseInt(M.slice(1))<14||K==="WinAnsiEncoding"?H=R(E,M).split("").map(function(fe){return fe.charCodeAt(0).toString(16)}).join(""):K==="Identity-H"&&(H=r(E,z[M])),A.isHex=!0,{text:H,x:m,y:v,options:j,mutex:A}};a.events.push(["postProcessText",function(l){var g=l.text||"",p=[],m={text:g,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(g)){var v=0;for(v=0;v<g.length;v+=1)Array.isArray(g[v])&&g[v].length===3?p.push([c(Object.assign({},m,{text:g[v][0]})).text,g[v][1],g[v][2]]):p.push(c(Object.assign({},m,{text:g[v]})).text);l.text=p}else l.text=c(Object.assign({},m,{text:g})).text}])})(Yt),(function(i){var a=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(r){return a.call(this),this.internal.vFS[r]!==void 0},i.addFileToVFS=function(r,o){return a.call(this),this.internal.vFS[r]=o,this},i.getFileFromVFS=function(r){return a.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Yt.API),(function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(o){var c,l,g,p,m,v,j,A=a,R=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],z={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},M={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],P=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),q=!1,K=0;this.__bidiEngine__={};var H=function(B){var $=B.charCodeAt(),ee=$>>8,ie=M[ee];return ie!==void 0?A[256*ie+(255&$)]:ee===252||ee===253?"AL":P.test(ee)?"L":ee===8?"R":"N"},fe=function(B){for(var $,ee=0;ee<B.length;ee++){if(($=H(B.charAt(ee)))==="L")return!1;if($==="R")return!0}return!1},de=function(B,$,ee,ie){var Ne,Re,Me,ue,Ce=$[ie];switch(Ce){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":q=!1;break;case"N":case"AN":break;case"EN":q&&(Ce="AN");break;case"AL":q=!0,Ce="R";break;case"WS":case"BN":Ce="N";break;case"CS":ie<1||ie+1>=$.length||(Ne=ee[ie-1])!=="EN"&&Ne!=="AN"||(Re=$[ie+1])!=="EN"&&Re!=="AN"?Ce="N":q&&(Re="AN"),Ce=Re===Ne?Re:"N";break;case"ES":Ce=(Ne=ie>0?ee[ie-1]:"B")==="EN"&&ie+1<$.length&&$[ie+1]==="EN"?"EN":"N";break;case"ET":if(ie>0&&ee[ie-1]==="EN"){Ce="EN";break}if(q){Ce="N";break}for(Me=ie+1,ue=$.length;Me<ue&&$[Me]==="ET";)Me++;Ce=Me<ue&&$[Me]==="EN"?"EN":"N";break;case"NSM":if(g&&!p){for(ue=$.length,Me=ie+1;Me<ue&&$[Me]==="NSM";)Me++;if(Me<ue){var Le=B[ie],Q=Le>=1425&&Le<=2303||Le===64286;if(Ne=$[Me],Q&&(Ne==="R"||Ne==="AL")){Ce="R";break}}}Ce=ie<1||(Ne=$[ie-1])==="B"?"N":ee[ie-1];break;case"B":q=!1,c=!0,Ce=K;break;case"S":l=!0,Ce="N"}return Ce},Pe=function(B,$,ee){var ie=B.split("");return ee&&xe(ie,ee,{hiLevel:K}),ie.reverse(),$&&$.reverse(),ie.join("")},xe=function(B,$,ee){var ie,Ne,Re,Me,ue,Ce=-1,Le=B.length,Q=0,C=[],G=K?b:R,J=[];for(q=!1,c=!1,l=!1,Ne=0;Ne<Le;Ne++)J[Ne]=H(B[Ne]);for(Re=0;Re<Le;Re++){if(ue=Q,C[Re]=de(B,J,C,Re),ie=240&(Q=G[ue][z[C[Re]]]),Q&=15,$[Re]=Me=G[Q][5],ie>0)if(ie===16){for(Ne=Ce;Ne<Re;Ne++)$[Ne]=1;Ce=-1}else Ce=-1;if(G[Q][6])Ce===-1&&(Ce=Re);else if(Ce>-1){for(Ne=Ce;Ne<Re;Ne++)$[Ne]=Me;Ce=-1}J[Re]==="B"&&($[Re]=0),ee.hiLevel|=Me}l&&(function(oe,pe,be){for(var Fe=0;Fe<be;Fe++)if(oe[Fe]==="S"){pe[Fe]=K;for(var De=Fe-1;De>=0&&oe[De]==="WS";De--)pe[De]=K}})(J,$,Le)},Z=function(B,$,ee,ie,Ne){if(!(Ne.hiLevel<B)){if(B===1&&K===1&&!c)return $.reverse(),void(ee&&ee.reverse());for(var Re,Me,ue,Ce,Le=$.length,Q=0;Q<Le;){if(ie[Q]>=B){for(ue=Q+1;ue<Le&&ie[ue]>=B;)ue++;for(Ce=Q,Me=ue-1;Ce<Me;Ce++,Me--)Re=$[Ce],$[Ce]=$[Me],$[Me]=Re,ee&&(Re=ee[Ce],ee[Ce]=ee[Me],ee[Me]=Re);Q=ue}Q++}}},ge=function(B,$,ee){var ie=B.split(""),Ne={hiLevel:K};return ee||(ee=[]),xe(ie,ee,Ne),(function(Re,Me,ue){if(ue.hiLevel!==0&&j)for(var Ce,Le=0;Le<Re.length;Le++)Me[Le]===1&&(Ce=E.indexOf(Re[Le]))>=0&&(Re[Le]=E[Ce+1])})(ie,ee,Ne),Z(2,ie,$,ee,Ne),Z(1,ie,$,ee,Ne),ie.join("")};return this.__bidiEngine__.doBidiReorder=function(B,$,ee){if((function(Ne,Re){if(Re)for(var Me=0;Me<Ne.length;Me++)Re[Me]=Me;p===void 0&&(p=fe(Ne)),v===void 0&&(v=fe(Ne))})(B,$),g||!m||v)if(g&&m&&p^v)K=p?1:0,B=Pe(B,$,ee);else if(!g&&m&&v)K=p?1:0,B=ge(B,$,ee),B=Pe(B,$);else if(!g||p||m||v){if(g&&!m&&p^v)B=Pe(B,$),p?(K=0,B=ge(B,$,ee)):(K=1,B=ge(B,$,ee),B=Pe(B,$));else if(g&&p&&!m&&v)K=1,B=ge(B,$,ee),B=Pe(B,$);else if(!g&&!m&&p^v){var ie=j;p?(K=1,B=ge(B,$,ee),K=0,j=!1,B=ge(B,$,ee),j=ie):(K=0,B=ge(B,$,ee),B=Pe(B,$),K=1,j=!1,B=ge(B,$,ee),j=ie,B=Pe(B,$))}}else K=0,B=ge(B,$,ee);else K=p?1:0,B=ge(B,$,ee);return B},this.__bidiEngine__.setOptions=function(B){B&&(g=B.isInputVisual,m=B.isOutputVisual,p=B.isInputRtl,v=B.isOutputRtl,j=B.isSymmetricSwapping)},this.__bidiEngine__.setOptions(o),this.__bidiEngine__};var a=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(o){var c=o.text;o.x,o.y;var l=o.options||{};o.mutex,l.lang;var g=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,r.setOptions(l),Object.prototype.toString.call(c)==="[object Array]"){var p=0;for(g=[],p=0;p<c.length;p+=1)Object.prototype.toString.call(c[p])==="[object Array]"?g.push([r.doBidiReorder(c[p][0]),c[p][1],c[p][2]]):g.push([r.doBidiReorder(c[p])]);o.text=g}else o.text=r.doBidiReorder(c);r.setOptions({isInputVisual:!0})}])})(Yt),Yt.API.TTFFont=(function(){function i(a){var r;if(this.rawData=a,r=this.contents=new yl(a),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new wy(this),this.registerTTF()}return i.open=function(a){return new i(a)},i.prototype.parse=function(){return this.directory=new oy(this.contents),this.head=new cy(this),this.name=new py(this),this.cmap=new P0(this),this.toUnicode={},this.hhea=new dy(this),this.maxp=new my(this),this.hmtx=new gy(this),this.post=new fy(this),this.os2=new uy(this),this.loca=new by(this),this.glyf=new xy(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var a,r,o,c,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var g,p,m,v;for(v=[],g=0,p=(m=this.bbox).length;g<p;g++)a=m[g],v.push(Math.round(a*this.scaleFactor));return v}).call(this),this.stemV=0,this.post.exists?(o=255&(c=this.post.italic_angle),32768&(r=c>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+o)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(a){var r;return((r=this.cmap.unicode)!=null?r.codeMap[a]:void 0)||0},i.prototype.widthOfGlyph=function(a){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(a).advance*r},i.prototype.widthOfString=function(a,r,o){var c,l,g,p;for(g=0,l=0,p=(a=""+a).length;0<=p?l<p:l>p;l=0<=p?++l:--l)c=a.charCodeAt(l),g+=this.widthOfGlyph(this.characterToGlyph(c))+o*(1e3/r)||0;return g*(r/1e3)},i.prototype.lineHeight=function(a,r){var o;return r==null&&(r=!1),o=r?this.lineGap:0,(this.ascender+o-this.decender)/1e3*a},i})();var go,yl=(function(){function i(a){this.data=a??[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(a){return this.data[this.pos++]=a},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(a){return this.writeByte(a>>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},i.prototype.readInt32=function(){var a;return(a=this.readUInt32())>=2147483648?a-4294967296:a},i.prototype.writeInt32=function(a){return a<0&&(a+=4294967296),this.writeUInt32(a)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(a){return this.writeByte(a>>8&255),this.writeByte(255&a)},i.prototype.readInt16=function(){var a;return(a=this.readUInt16())>=32768?a-65536:a},i.prototype.writeInt16=function(a){return a<0&&(a+=65536),this.writeUInt16(a)},i.prototype.readString=function(a){var r,o;for(o=[],r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)o[r]=String.fromCharCode(this.readByte());return o.join("")},i.prototype.writeString=function(a){var r,o,c;for(c=[],r=0,o=a.length;0<=o?r<o:r>o;r=0<=o?++r:--r)c.push(this.writeByte(a.charCodeAt(r)));return c},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(a){return this.writeInt16(a)},i.prototype.readLongLong=function(){var a,r,o,c,l,g,p,m;return a=this.readByte(),r=this.readByte(),o=this.readByte(),c=this.readByte(),l=this.readByte(),g=this.readByte(),p=this.readByte(),m=this.readByte(),128&a?-1*(72057594037927940*(255^a)+281474976710656*(255^r)+1099511627776*(255^o)+4294967296*(255^c)+16777216*(255^l)+65536*(255^g)+256*(255^p)+(255^m)+1):72057594037927940*a+281474976710656*r+1099511627776*o+4294967296*c+16777216*l+65536*g+256*p+m},i.prototype.writeLongLong=function(a){var r,o;return r=Math.floor(a/4294967296),o=4294967295&a,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(a){return this.writeInt32(a)},i.prototype.read=function(a){var r,o;for(r=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)r.push(this.readByte());return r},i.prototype.write=function(a){var r,o,c,l;for(l=[],o=0,c=a.length;o<c;o++)r=a[o],l.push(this.writeByte(r));return l},i})(),oy=(function(){var i;function a(r){var o,c,l;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},c=0,l=this.tableCount;0<=l?c<l:c>l;c=0<=l?++c:--c)o={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[o.tag]=o}return a.prototype.encode=function(r){var o,c,l,g,p,m,v,j,A,R,b,z,M;for(M in b=Object.keys(r).length,m=Math.log(2),A=16*Math.floor(Math.log(b)/m),g=Math.floor(A/m),j=16*b-A,(c=new yl).writeInt(this.scalarType),c.writeShort(b),c.writeShort(A),c.writeShort(g),c.writeShort(j),l=16*b,v=c.pos+l,p=null,z=[],r)for(R=r[M],c.writeString(M),c.writeInt(i(R)),c.writeInt(v),c.writeInt(R.length),z=z.concat(R),M==="head"&&(p=v),v+=R.length;v%4;)z.push(0),v++;return c.write(z),o=2981146554-i(c.data),c.pos=p+8,c.writeUInt32(o),c.data},i=function(r){var o,c,l,g;for(r=L0.call(r);r.length%4;)r.push(0);for(l=new yl(r),c=0,o=0,g=r.length;o<g;o=o+=4)c+=l.readUInt32();return 4294967295&c},a})(),ly={}.hasOwnProperty,Lo=function(i,a){for(var r in a)ly.call(a,r)&&(i[r]=a[r]);function o(){this.constructor=i}return o.prototype=a.prototype,i.prototype=new o,i.__super__=a.prototype,i};go=(function(){function i(a){var r;this.file=a,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i})();var cy=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Lo(i,go),i.prototype.tag="head",i.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.revision=a.readInt(),this.checkSumAdjustment=a.readInt(),this.magicNumber=a.readInt(),this.flags=a.readShort(),this.unitsPerEm=a.readShort(),this.created=a.readLongLong(),this.modified=a.readLongLong(),this.xMin=a.readShort(),this.yMin=a.readShort(),this.xMax=a.readShort(),this.yMax=a.readShort(),this.macStyle=a.readShort(),this.lowestRecPPEM=a.readShort(),this.fontDirectionHint=a.readShort(),this.indexToLocFormat=a.readShort(),this.glyphDataFormat=a.readShort()},i.prototype.encode=function(a){var r;return(r=new yl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(a),r.writeShort(this.glyphDataFormat),r.data},i})(),Nm=(function(){function i(a,r){var o,c,l,g,p,m,v,j,A,R,b,z,M,E,P,q,K;switch(this.platformID=a.readUInt16(),this.encodingID=a.readShort(),this.offset=r+a.readInt(),A=a.pos,a.pos=this.offset,this.format=a.readUInt16(),this.length=a.readUInt16(),this.language=a.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(m=0;m<256;++m)this.codeMap[m]=a.readByte();break;case 4:for(b=a.readUInt16(),R=b/2,a.pos+=6,l=(function(){var H,fe;for(fe=[],m=H=0;0<=R?H<R:H>R;m=0<=R?++H:--H)fe.push(a.readUInt16());return fe})(),a.pos+=2,M=(function(){var H,fe;for(fe=[],m=H=0;0<=R?H<R:H>R;m=0<=R?++H:--H)fe.push(a.readUInt16());return fe})(),v=(function(){var H,fe;for(fe=[],m=H=0;0<=R?H<R:H>R;m=0<=R?++H:--H)fe.push(a.readUInt16());return fe})(),j=(function(){var H,fe;for(fe=[],m=H=0;0<=R?H<R:H>R;m=0<=R?++H:--H)fe.push(a.readUInt16());return fe})(),c=(this.length-a.pos+this.offset)/2,p=(function(){var H,fe;for(fe=[],m=H=0;0<=c?H<c:H>c;m=0<=c?++H:--H)fe.push(a.readUInt16());return fe})(),m=P=0,K=l.length;P<K;m=++P)for(E=l[m],o=q=z=M[m];z<=E?q<=E:q>=E;o=z<=E?++q:--q)j[m]===0?g=o+v[m]:(g=p[j[m]/2+(o-z)-(R-m)]||0)!==0&&(g+=v[m]),this.codeMap[o]=65535&g}a.pos=A}return i.encode=function(a,r){var o,c,l,g,p,m,v,j,A,R,b,z,M,E,P,q,K,H,fe,de,Pe,xe,Z,ge,B,$,ee,ie,Ne,Re,Me,ue,Ce,Le,Q,C,G,J,oe,pe,be,Fe,De,Ue,_e,at;switch(ie=new yl,g=Object.keys(a).sort(function(ot,it){return ot-it}),r){case"macroman":for(M=0,E=(function(){var ot=[];for(z=0;z<256;++z)ot.push(0);return ot})(),q={0:0},l={},Ne=0,Ce=g.length;Ne<Ce;Ne++)q[De=a[c=g[Ne]]]==null&&(q[De]=++M),l[c]={old:a[c],new:q[a[c]]},E[c]=q[a[c]];return ie.writeUInt16(1),ie.writeUInt16(0),ie.writeUInt32(12),ie.writeUInt16(0),ie.writeUInt16(262),ie.writeUInt16(0),ie.write(E),{charMap:l,subtable:ie.data,maxGlyphID:M+1};case"unicode":for($=[],A=[],K=0,q={},o={},P=v=null,Re=0,Le=g.length;Re<Le;Re++)q[fe=a[c=g[Re]]]==null&&(q[fe]=++K),o[c]={old:fe,new:q[fe]},p=q[fe]-c,P!=null&&p===v||(P&&A.push(P),$.push(c),v=p),P=c;for(P&&A.push(P),A.push(65535),$.push(65535),ge=2*(Z=$.length),xe=2*Math.pow(Math.log(Z)/Math.LN2,2),R=Math.log(xe/2)/Math.LN2,Pe=2*Z-xe,m=[],de=[],b=[],z=Me=0,Q=$.length;Me<Q;z=++Me){if(B=$[z],j=A[z],B===65535){m.push(0),de.push(0);break}if(B-(ee=o[B].new)>=32768)for(m.push(0),de.push(2*(b.length+Z-z)),c=ue=B;B<=j?ue<=j:ue>=j;c=B<=j?++ue:--ue)b.push(o[c].new);else m.push(ee-B),de.push(0)}for(ie.writeUInt16(3),ie.writeUInt16(1),ie.writeUInt32(12),ie.writeUInt16(4),ie.writeUInt16(16+8*Z+2*b.length),ie.writeUInt16(0),ie.writeUInt16(ge),ie.writeUInt16(xe),ie.writeUInt16(R),ie.writeUInt16(Pe),be=0,C=A.length;be<C;be++)c=A[be],ie.writeUInt16(c);for(ie.writeUInt16(0),Fe=0,G=$.length;Fe<G;Fe++)c=$[Fe],ie.writeUInt16(c);for(Ue=0,J=m.length;Ue<J;Ue++)p=m[Ue],ie.writeUInt16(p);for(_e=0,oe=de.length;_e<oe;_e++)H=de[_e],ie.writeUInt16(H);for(at=0,pe=b.length;at<pe;at++)M=b[at],ie.writeUInt16(M);return{charMap:o,subtable:ie.data,maxGlyphID:K+1}}},i})(),P0=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Lo(i,go),i.prototype.tag="cmap",i.prototype.parse=function(a){var r,o,c;for(a.pos=this.offset,this.version=a.readUInt16(),c=a.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=c?o<c:o>c;o=0<=c?++o:--o)r=new Nm(a,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},i.encode=function(a,r){var o,c;return r==null&&(r="macroman"),o=Nm.encode(a,r),(c=new yl).writeUInt16(0),c.writeUInt16(1),o.table=c.data.concat(o.subtable),o},i})(),dy=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Lo(i,go),i.prototype.tag="hhea",i.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.ascender=a.readShort(),this.decender=a.readShort(),this.lineGap=a.readShort(),this.advanceWidthMax=a.readShort(),this.minLeftSideBearing=a.readShort(),this.minRightSideBearing=a.readShort(),this.xMaxExtent=a.readShort(),this.caretSlopeRise=a.readShort(),this.caretSlopeRun=a.readShort(),this.caretOffset=a.readShort(),a.pos+=8,this.metricDataFormat=a.readShort(),this.numberOfMetrics=a.readUInt16()},i})(),uy=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Lo(i,go),i.prototype.tag="OS/2",i.prototype.parse=function(a){if(a.pos=this.offset,this.version=a.readUInt16(),this.averageCharWidth=a.readShort(),this.weightClass=a.readUInt16(),this.widthClass=a.readUInt16(),this.type=a.readShort(),this.ySubscriptXSize=a.readShort(),this.ySubscriptYSize=a.readShort(),this.ySubscriptXOffset=a.readShort(),this.ySubscriptYOffset=a.readShort(),this.ySuperscriptXSize=a.readShort(),this.ySuperscriptYSize=a.readShort(),this.ySuperscriptXOffset=a.readShort(),this.ySuperscriptYOffset=a.readShort(),this.yStrikeoutSize=a.readShort(),this.yStrikeoutPosition=a.readShort(),this.familyClass=a.readShort(),this.panose=(function(){var r,o;for(o=[],r=0;r<10;++r)o.push(a.readByte());return o})(),this.charRange=(function(){var r,o;for(o=[],r=0;r<4;++r)o.push(a.readInt());return o})(),this.vendorID=a.readString(4),this.selection=a.readShort(),this.firstCharIndex=a.readShort(),this.lastCharIndex=a.readShort(),this.version>0&&(this.ascent=a.readShort(),this.descent=a.readShort(),this.lineGap=a.readShort(),this.winAscent=a.readShort(),this.winDescent=a.readShort(),this.codePageRange=(function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(a.readInt());return o})(),this.version>1))return this.xHeight=a.readShort(),this.capHeight=a.readShort(),this.defaultChar=a.readShort(),this.breakChar=a.readShort(),this.maxContext=a.readShort()},i})(),fy=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Lo(i,go),i.prototype.tag="post",i.prototype.parse=function(a){var r,o,c;switch(a.pos=this.offset,this.format=a.readInt(),this.italicAngle=a.readInt(),this.underlinePosition=a.readShort(),this.underlineThickness=a.readShort(),this.isFixedPitch=a.readInt(),this.minMemType42=a.readInt(),this.maxMemType42=a.readInt(),this.minMemType1=a.readInt(),this.maxMemType1=a.readInt(),this.format){case 65536:case 196608:break;case 131072:var l;for(o=a.readUInt16(),this.glyphNameIndex=[],l=0;0<=o?l<o:l>o;l=0<=o?++l:--l)this.glyphNameIndex.push(a.readUInt16());for(this.names=[],c=[];a.pos<this.offset+this.length;)r=a.readByte(),c.push(this.names.push(a.readString(r)));return c;case 151552:return o=a.readUInt16(),this.offsets=a.read(o);case 262144:return this.map=(function(){var g,p,m;for(m=[],l=g=0,p=this.file.maxp.numGlyphs;0<=p?g<p:g>p;l=0<=p?++g:--g)m.push(a.readUInt32());return m}).call(this)}},i})(),hy=function(i,a){this.raw=i,this.length=i.length,this.platformID=a.platformID,this.encodingID=a.encodingID,this.languageID=a.languageID},py=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Lo(i,go),i.prototype.tag="name",i.prototype.parse=function(a){var r,o,c,l,g,p,m,v,j,A,R;for(a.pos=this.offset,a.readShort(),r=a.readShort(),p=a.readShort(),o=[],l=0;0<=r?l<r:l>r;l=0<=r?++l:--l)o.push({platformID:a.readShort(),encodingID:a.readShort(),languageID:a.readShort(),nameID:a.readShort(),length:a.readShort(),offset:this.offset+p+a.readShort()});for(m={},l=j=0,A=o.length;j<A;l=++j)c=o[l],a.pos=c.offset,v=a.readString(c.length),g=new hy(v,c),m[R=c.nameID]==null&&(m[R]=[]),m[c.nameID].push(g);this.strings=m,this.copyright=m[0],this.fontFamily=m[1],this.fontSubfamily=m[2],this.uniqueSubfamily=m[3],this.fontName=m[4],this.version=m[5];try{this.postscriptName=m[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=m[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=m[7],this.manufacturer=m[8],this.designer=m[9],this.description=m[10],this.vendorUrl=m[11],this.designerUrl=m[12],this.license=m[13],this.licenseUrl=m[14],this.preferredFamily=m[15],this.preferredSubfamily=m[17],this.compatibleFull=m[18],this.sampleText=m[19]},i})(),my=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Lo(i,go),i.prototype.tag="maxp",i.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.numGlyphs=a.readUInt16(),this.maxPoints=a.readUInt16(),this.maxContours=a.readUInt16(),this.maxCompositePoints=a.readUInt16(),this.maxComponentContours=a.readUInt16(),this.maxZones=a.readUInt16(),this.maxTwilightPoints=a.readUInt16(),this.maxStorage=a.readUInt16(),this.maxFunctionDefs=a.readUInt16(),this.maxInstructionDefs=a.readUInt16(),this.maxStackElements=a.readUInt16(),this.maxSizeOfInstructions=a.readUInt16(),this.maxComponentElements=a.readUInt16(),this.maxComponentDepth=a.readUInt16()},i})(),gy=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Lo(i,go),i.prototype.tag="hmtx",i.prototype.parse=function(a){var r,o,c,l,g,p,m;for(a.pos=this.offset,this.metrics=[],r=0,p=this.file.hhea.numberOfMetrics;0<=p?r<p:r>p;r=0<=p?++r:--r)this.metrics.push({advance:a.readUInt16(),lsb:a.readInt16()});for(c=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var v,j;for(j=[],r=v=0;0<=c?v<c:v>c;r=0<=c?++v:--v)j.push(a.readInt16());return j})(),this.widths=(function(){var v,j,A,R;for(R=[],v=0,j=(A=this.metrics).length;v<j;v++)l=A[v],R.push(l.advance);return R}).call(this),o=this.widths[this.widths.length-1],m=[],r=g=0;0<=c?g<c:g>c;r=0<=c?++g:--g)m.push(this.widths.push(o));return m},i.prototype.forGlyph=function(a){return a in this.metrics?this.metrics[a]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[a-this.metrics.length]}},i})(),L0=[].slice,xy=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Lo(i,go),i.prototype.tag="glyf",i.prototype.parse=function(){return this.cache={}},i.prototype.glyphFor=function(a){var r,o,c,l,g,p,m,v,j,A;return a in this.cache?this.cache[a]:(l=this.file.loca,r=this.file.contents,o=l.indexOf(a),(c=l.lengthOf(a))===0?this.cache[a]=null:(r.pos=this.offset+o,g=(p=new yl(r.read(c))).readShort(),v=p.readShort(),A=p.readShort(),m=p.readShort(),j=p.readShort(),this.cache[a]=g===-1?new vy(p,v,A,m,j):new yy(p,g,v,A,m,j),this.cache[a]))},i.prototype.encode=function(a,r,o){var c,l,g,p,m;for(g=[],l=[],p=0,m=r.length;p<m;p++)c=a[r[p]],l.push(g.length),c&&(g=g.concat(c.encode(o)));return l.push(g.length),{table:g,offsets:l}},i})(),yy=(function(){function i(a,r,o,c,l,g){this.raw=a,this.numberOfContours=r,this.xMin=o,this.yMin=c,this.xMax=l,this.yMax=g,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i})(),vy=(function(){function i(a,r,o,c,l){var g,p;for(this.raw=a,this.xMin=r,this.yMin=o,this.xMax=c,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],g=this.raw;p=g.readShort(),this.glyphOffsets.push(g.pos),this.glyphIDs.push(g.readUInt16()),32&p;)g.pos+=1&p?4:2,128&p?g.pos+=8:64&p?g.pos+=4:8&p&&(g.pos+=2)}return i.prototype.encode=function(){var a,r,o;for(r=new yl(L0.call(this.raw.data)),a=0,o=this.glyphIDs.length;a<o;++a)r.pos=this.glyphOffsets[a];return r.data},i})(),by=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Lo(i,go),i.prototype.tag="loca",i.prototype.parse=function(a){var r,o;return a.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var c,l;for(l=[],o=0,c=this.length;o<c;o+=2)l.push(2*a.readUInt16());return l}).call(this):(function(){var c,l;for(l=[],o=0,c=this.length;o<c;o+=4)l.push(a.readUInt32());return l}).call(this)},i.prototype.indexOf=function(a){return this.offsets[a]},i.prototype.lengthOf=function(a){return this.offsets[a+1]-this.offsets[a]},i.prototype.encode=function(a,r){for(var o=new Uint32Array(this.offsets.length),c=0,l=0,g=0;g<o.length;++g)if(o[g]=c,l<r.length&&r[l]==g){++l,o[g]=c;var p=this.offsets[g],m=this.offsets[g+1]-p;m>0&&(c+=m)}for(var v=new Array(4*o.length),j=0;j<o.length;++j)v[4*j+3]=255&o[j],v[4*j+2]=(65280&o[j])>>8,v[4*j+1]=(16711680&o[j])>>16,v[4*j]=(4278190080&o[j])>>24;return v},i})(),wy=(function(){function i(a){this.font=a,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var a,r,o,c,l;for(r in c=this.font.cmap.tables[0].codeMap,a={},l=this.subset)o=l[r],a[r]=c[o];return a},i.prototype.glyphsFor=function(a){var r,o,c,l,g,p,m;for(c={},g=0,p=a.length;g<p;g++)c[l=a[g]]=this.font.glyf.glyphFor(l);for(l in r=[],c)(o=c[l])!=null&&o.compound&&r.push.apply(r,o.glyphIDs);if(r.length>0)for(l in m=this.glyphsFor(r))o=m[l],c[l]=o;return c},i.prototype.encode=function(a,r){var o,c,l,g,p,m,v,j,A,R,b,z,M,E,P;for(c in o=P0.encode(this.generateCmap(),"unicode"),g=this.glyphsFor(a),b={0:0},P=o.charMap)b[(m=P[c]).old]=m.new;for(z in R=o.maxGlyphID,g)z in b||(b[z]=R++);return j=(function(q){var K,H;for(K in H={},q)H[q[K]]=K;return H})(b),A=Object.keys(j).sort(function(q,K){return q-K}),M=(function(){var q,K,H;for(H=[],q=0,K=A.length;q<K;q++)p=A[q],H.push(j[p]);return H})(),l=this.font.glyf.encode(g,M,b),v=this.font.loca.encode(l.offsets,M),E={cmap:this.font.cmap.raw(),glyf:l.table,loca:v,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},i})();Yt.API.PDFObject=(function(){var i;function a(){}return i=function(r,o){return(Array(o+1).join("0")+r).slice(-o)},a.convert=function(r){var o,c,l,g;if(Array.isArray(r))return"["+(function(){var p,m,v;for(v=[],p=0,m=r.length;p<m;p++)o=r[p],v.push(a.convert(o));return v})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+i(r.getUTCFullYear(),4)+i(r.getUTCMonth(),2)+i(r.getUTCDate(),2)+i(r.getUTCHours(),2)+i(r.getUTCMinutes(),2)+i(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(c in l=["<<"],r)g=r[c],l.push("/"+c+" "+a.convert(g));return l.push(">>"),l.join(`
`)}return""+r},a})();function jy(){try{const i=localStorage.getItem("userLocale");if(i)return i;const a=navigator.language||navigator.userLanguage;if(a)return a}catch(i){console.error("Error getting user locale:",i)}return"en-US"}function yr(i,a={}){try{const r=jy(),o={minimumFractionDigits:0,maximumFractionDigits:2,...a};return new Intl.NumberFormat(r,o).format(i)}catch(r){return console.error("Error formatting number:",r),String(i||0)}}function Sy(){return[{value:"en-US",label:"English (United States)"},{value:"en-IN",label:"English (India)"},{value:"en-GB",label:"English (United Kingdom)"},{value:"en-AU",label:"English (Australia)"},{value:"en-CA",label:"English (Canada)"},{value:"fr-FR",label:"French (France)"},{value:"de-DE",label:"German (Germany)"},{value:"es-ES",label:"Spanish (Spain)"},{value:"es-MX",label:"Spanish (Mexico)"},{value:"it-IT",label:"Italian (Italy)"},{value:"pt-BR",label:"Portuguese (Brazil)"},{value:"pt-PT",label:"Portuguese (Portugal)"},{value:"nl-NL",label:"Dutch (Netherlands)"},{value:"ru-RU",label:"Russian (Russia)"},{value:"ja-JP",label:"Japanese (Japan)"},{value:"ko-KR",label:"Korean (Korea)"},{value:"zh-CN",label:"Chinese (Simplified)"},{value:"zh-TW",label:"Chinese (Traditional)"},{value:"ar-SA",label:"Arabic (Saudi Arabia)"},{value:"hi-IN",label:"Hindi (India)"}]}function Ny(){const{members:i,admins:a,invoices:r,payments:o,recentPayments:c,paymentHistory:l,communicationLog:g,paymentMethods:p,metrics:m,reminderRules:v,automationEnabled:j,setAutomationEnabled:A,reminderTemplates:R,organizationInfo:b,fetchAdmins:z,fetchInvoices:M,fetchPayments:E,fetchMembers:P,selectedMember:q,setSelectedMember:K,addMember:H,updateMember:fe,deleteMember:de,addInvoice:Pe,updateInvoice:xe,deleteInvoice:Z,addCommunication:ge,updatePaymentMethod:B,updateReminderRule:$,updateReminderTemplate:ee,updateOrganizationInfo:ie,userLocale:Ne,updateUserLocale:Re,addAdminUser:Me,updateAdminUser:ue,deleteAdminUser:Ce,resetAllData:Le,addPayment:Q,reminderLogs:C,fetchReminderLogs:G,donations:J,fetchDonations:oe,addDonation:pe,deleteDonation:be,loading:Fe}=Qd(),De=sessionStorage.getItem("adminRole")||"Viewer";let Ue=De;De==="Owner"?Ue="Admin":De==="Finance Admin"&&(Ue="Finance");const _e=Ue==="Admin",at=Ue==="Owner",ot=Ue==="Viewer",it=Ue==="Admin"||Ue==="Finance",Y=_e||at,mt={Admin:"Admin Portal",Finance:"Finance Portal",Staff:"Staff Portal",Viewer:"Viewer Portal"},Mt={Admin:"Full administration access",Finance:"Finance operations and reporting",Staff:"Member management and reporting",Viewer:"Read-only access to view data"},Ct=mt[Ue]||"Admin Portal",Qe=Mt[Ue]||"Administration",bt=[{id:"members",label:"Members",icon:"fa-users",items:[{id:"members",label:"Members List",roles:["Admin","Finance","Staff","Viewer"]},{id:"member-detail",label:"Member Details",roles:["Admin","Finance","Staff","Viewer"]},{id:"invoice-builder",label:"Subscriptions",roles:["Admin","Finance"]}]},{id:"finance",label:"Finance",icon:"fa-dollar-sign",items:[{id:"invoices",label:"Invoices",roles:["Admin","Finance"]},{id:"payments",label:"Payments",roles:["Admin","Finance"]},{id:"donations",label:"Donations",roles:["Admin","Finance"]}]},{id:"communication",label:"Communication",icon:"fa-comments",items:[{id:"automation",label:"Reminders",roles:["Admin","Finance"]},{id:"communications",label:"Reminder Logs",roles:["Admin","Finance","Staff","Viewer"]}]},{id:"reports",label:"Reports",icon:"fa-chart-bar",items:[{id:"reports",label:"Financial Reports",roles:["Admin","Finance","Staff","Viewer"]},{id:"export-reports",label:"Export Reports",roles:["Admin","Finance"]}]},{id:"settings",label:"Settings",icon:"fa-cog",items:[{id:"settings",label:"Users",roles:["Admin"]},{id:"roles",label:"Roles",roles:["Admin"]},{id:"org-settings",label:"Organization Settings",roles:["Admin","Finance"]}]}],gt=[{id:"dashboard",label:"Dashboard"},...bt.flatMap(u=>u.items)],[Rt,Ft]=Dm(),[jt,Gt]=X.useState(()=>{const u=Rt.get("section");return u&&gt.find(U=>U.id===u)?u:gt[0].id}),[qt,Jt]=X.useState("Invoices"),[ke,qe]=X.useState(()=>{const u={};return bt.forEach(k=>{u[k.id]=!1}),u}),[se,je]=X.useState(!1),[nt,pt]=X.useState(!1),[He,ct]=X.useState(null),[Qt,yt]=X.useState(null),[vn,$t]=X.useState("success"),[Ut,he]=X.useState(null),[ft,Dt]=X.useState(!1),[hn,ta]=X.useState({isOpen:!1,message:"",onConfirm:null,onCancel:null,confirmButtonText:"Confirm"}),[Sn,Ar]=X.useState({name:"",email:"",phone:"",status:"Active",balance:"250",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"}),[pn,St]=X.useState({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),[Xt,Jn]=X.useState(null),[Ur,Ua]=X.useState(!1),zn=(u,k,U={})=>{let _="";switch(u){case"name":k.trim()?k.trim().length<2&&(_="Name must be at least 2 characters."):_="Name is required.";break;case"email":k.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k.trim())||(_="Please enter a valid email address."):_="Email is required.";break;case"phone":k&&k.length<100&&(_="Phone number must be at least 8 digits.");break;case"nextDue":{k?isNaN(new Date(k).getTime())&&(_="Please select a valid start date."):_="Start date is required.";break}case"lastPayment":{k&&isNaN(new Date(k).getTime())&&(_="Please select a valid end date.");break}}return _},cr=()=>{const u=["name","email","phone","nextDue","lastPayment"];if(Xt){const k=zn(Xt,Sn[Xt]);if(!k)St(U=>({...U,[Xt]:!1})),Jn(null);else return St(U=>({...U,[Xt]:!0})),Ee(k,"error"),setTimeout(()=>{if(document.querySelector(`input[name="${Xt}"], input[type="text"][value*=""], input[type="email"], input[type="date"], input[type="tel"]`)){document.querySelectorAll('input[type="text"], input[type="email"], input[type="date"], input[type="tel"]');const _=u.indexOf(Xt);if(_===0){const D=document.querySelector('input[type="text"][required]');D&&D.focus()}else if(_===1){const D=document.querySelector('input[type="email"]');D&&D.focus()}else if(_===2){const D=document.querySelector('input[type="tel"]');D&&D.focus()}else if(_===3){const D=document.querySelectorAll('input[type="date"]');D[0]&&D[0].focus()}else if(_===4){const D=document.querySelectorAll('input[type="date"]');D[1]&&D[1].focus()}}},100),!1}for(const k of u){const U=zn(k,Sn[k]);if(U)return St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),St(_=>({..._,[k]:!0})),Jn(k),Ee(U,"error"),setTimeout(()=>{const _=document.querySelector("form.form-grid");if(!_)return;const D=u.indexOf(k);let ae=null;D===0?ae=_.querySelector('input[type="text"][required]'):D===1?ae=_.querySelector('input[type="email"]'):D===2?ae=_.querySelector('input[type="tel"]'):D===3?ae=_.querySelectorAll('input[type="date"]')[0]:D===4&&(ae=_.querySelectorAll('input[type="date"]')[1]),ae&&(ae.focus(),ae.scrollIntoView({behavior:"smooth",block:"center"}))},100),!1}return St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),Jn(null),!0},Vn=(u,k)=>{let U=k;if(u==="phone")U=k;else if(u==="balance")U=k.replace(/\D/g,"");else if(u==="subscriptionType"){k==="Yearly + Janaza Fund"?(U=k,Ar(_=>({..._,subscriptionType:k,balance:"500"}))):(U=k,Ar(_=>({..._,subscriptionType:k,balance:"250"})));return}Ar(_=>({..._,[u]:U})),zn(u,U,u==="password"?{}:{})};Sn.name.trim()&&Sn.email.trim();const[ws,zs]=X.useState({name:"",email:"",password:""}),Wa=()=>new Date().toLocaleDateString("en-US",{month:"short",year:"numeric"}),[Pt,Rn]=X.useState({memberId:"",period:Wa(),amount:"250",invoiceType:"Lifetime",due:"",notes:""}),Ca=()=>{const k=`INV-${new Date().getFullYear()}-`,_=(r||[]).map(ae=>ae.id).filter(Boolean).filter(ae=>ae.startsWith(k)).reduce((ae,le)=>{const Ie=le.split("-")[2]||"",Ze=parseInt(Ie,10);return isNaN(Ze)?ae:Math.max(ae,Ze)},0),D=String(_+1).padStart(3,"0");return`${k}${D}`},Pa=X.useMemo(()=>Ca(),[r]),[xo,na]=X.useState({donorName:!1,amount:!1,method:!1,date:!1,reference:!1,screenshot:!1}),[ra,Ui]=X.useState(null),[Us,Ii]=X.useState(!1),[ut,xn]=X.useState({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),[rs,qa]=X.useState(null),[dr,ga]=X.useState(null),[$a,as]=X.useState(b),[Ws,Wr]=X.useState(!1),[xa,Kn]=X.useState({name:"",email:"",password:"",role:"Viewer",status:"Active"}),[oi,_o]=X.useState({subject:"Payment Reminder - Outstanding Balance",htmlTemplate:`<div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
  <h2 style="color: #1a1a1a; border-bottom: 2px solid #5a31ea; padding-bottom: 10px;">
    Payment Reminder - Outstanding Balance
  </h2>
  <p>Dear {{member_name}},</p>
  <p>This is a friendly reminder about your outstanding subscription payments.</p>
  <div style="background: #f9fafb; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <p><strong>Member ID:</strong> {{member_id}}</p>
    <p><strong>Email:</strong> {{member_email}}</p>
    <p><strong>Total Outstanding:</strong> <span style="color: #ef4444; font-size: 18px; font-weight: bold;">\${{total_due}}</span></p>
  </div>
                            <h3 style="color: #1a1a1a;">Outstanding Invoices ({{invoice_count}}):</h3>
  <ul style="list-style: none; padding: 0;">
    {{invoice_list}}
  </ul>
  <div style="background: #f8f9ff; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <p><strong> Payment Methods Available:</strong></p>
    <ul>
      {{payment_methods}}
    </ul>
  </div>
  <p style="text-align: center; margin: 30px 0;">
    <a href="{{portal_link}}" style="background: #5a31ea; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; display: inline-block;">
      Access Member Portal
    </a>
  </p>
  <p>Please settle your outstanding balance at your earliest convenience.</p>
  <p>Best regards,<br><strong>Finance Team</strong><br>Subscription Manager HK</p>
</div>`}),[Kt,Ha]=X.useState({emailService:"gmail",emailUser:"",emailPassword:"kuil uhbe zlqq oymd",scheduleTime:"09:00",scheduleEnabled:!0,reminderInterval:7}),[Va,li]=X.useState("AM"),[Wi,Ya]=X.useState(!1),[Mr,Ga]=X.useState("not_connected"),[js,Io]=X.useState(!1),[Un,La]=X.useState({from:"2025-01-01",to:"2025-12-31"}),[qr,Ln]=X.useState({}),[ci,Ss]=X.useState("This Year"),[Eo,Ns]=X.useState(!1),[$r,qi]=X.useState(null),[bn,ir]=X.useState({paymentMethod:"",imageFile:null,imagePreview:null,imageUrl:"",reference:""}),[_a,ya]=X.useState(!1),[Yn,aa]=X.useState({image:!1,reference:!1}),[en,Ja]=X.useState(!1),[Nn,qs]=X.useState(null),[br,$i]=X.useState(null),[$s,ks]=X.useState({x:0,y:0}),va=X.useRef(null),[Mo,di]=X.useState({}),[tr,ba]=X.useState(!1),[is,Hs]=X.useState({}),[ur,Vs]=X.useState(!1),[ui,Hi]=X.useState(!1),[Ys,ia]=X.useState(!1),[Rr,fi]=X.useState(null),[wn,wa]=X.useState([]),[Fn,Ei]=X.useState("All"),[nr,hi]=X.useState("All"),[Ka,x]=X.useState("all"),[L,re]=X.useState("all"),[me,Ae]=X.useState(""),[Ge,rt]=X.useState("All"),[Nt,zt]=X.useState("none"),[tn,on]=X.useState(()=>{try{return JSON.parse(localStorage.getItem("memberNotes")||"{}")}catch{return{}}}),[kn,rr]=X.useState(""),[An,Wn]=X.useState(""),[_n,$n]=X.useState(""),[Cr,Vi]=X.useState(!1),[Qa,Ia]=X.useState(!1),[pi,Yi]=X.useState(!1),[ss,sa]=X.useState(!1),[oa,la]=X.useState(null),[ca,mi]=X.useState({memberId:!1,amount:!1,method:!1,screenshot:!1}),[Xa,As]=X.useState(null),[kt,dn]=X.useState({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""}),[Za,ei]=X.useState(1),[os,ti]=X.useState(10),[Mi,Gi]=X.useState(1),[ja,Ji]=X.useState(10),[Ea,Sa]=X.useState(1),[Fr,Cs]=X.useState(10),[Ki,gi]=X.useState(1),[ls,cs]=X.useState(10),[fr,Gs]=X.useState(1),[ni,Ri]=X.useState(10),[Hr,Js]=X.useState("All"),[da,yo]=X.useState("All"),ds=po();Om(15),X.useEffect(()=>{Rt.get("section")!==jt&&Ft({section:jt},{replace:!1})},[jt,Rt,Ft]),X.useEffect(()=>{const u=()=>{const U=new URLSearchParams(window.location.search).get("section");U&&gt.find(D=>D.id===U)&&U!==jt?Gt(U):!U&&jt!==gt[0].id&&Gt(gt[0].id)};return window.addEventListener("popstate",u),()=>{window.removeEventListener("popstate",u)}},[jt]),X.useEffect(()=>{jt==="communications"&&G()},[jt,G]);const Ps=()=>{const u=new Date,k=[],U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let D=11;D>=0;D--){const ae=new Date(u.getFullYear(),u.getMonth()-D,1),le=`${U[ae.getMonth()]} ${ae.getFullYear()}`,Oe=U[ae.getMonth()],Ie=l.filter(Xe=>{if(!(Xe.status==="Completed"||Xe.status==="Paid")||!Xe.date)return!1;const vt=new Date(Xe.date);return vt.getMonth()===ae.getMonth()&&vt.getFullYear()===ae.getFullYear()}),Ze=Ie.reduce((Xe,It)=>{const vt=parseFloat(It.amount?.replace(/[^0-9.]/g,"")||0);return Xe+vt},0);k.push({month:Oe,monthKey:le,value:Ze,count:Ie.length})}const _=Math.max(...k.map(D=>D.value),1);return k.map(D=>({...D,percentage:_>0?D.value/_*100:0}))},Ls=()=>{const u=new Date,k=u.getFullYear(),U=u.getMonth(),_=new Set(i.map(wt=>wt.id).filter(Boolean)),D=new Set(i.map(wt=>wt.email?.toLowerCase()).filter(Boolean)),ae=new Set(i.map(wt=>wt.name?.toLowerCase()).filter(Boolean)),le=l||[],Oe=le.reduce((wt,Zt)=>{if(Zt.status==="Completed"||Zt.status==="Paid"){const yn=parseFloat(Zt.amount?.replace(/[^0-9.]/g,"")||0);return wt+yn}return wt},0),Ze=le.filter(wt=>{if(!(wt.status==="Completed"||wt.status==="Paid")||!wt.date)return!1;const yn=new Date(wt.date);return yn.getMonth()===U&&yn.getFullYear()===k}).reduce((wt,Zt)=>{if(Zt.status==="Completed"||Zt.status==="Paid"){const yn=parseFloat(Zt.amount?.replace(/[^0-9.]/g,"")||0);return wt+yn}return wt},0),It=le.filter(wt=>!(wt.status==="Completed"||wt.status==="Paid")||!wt.date?!1:new Date(wt.date).getFullYear()===k).reduce((wt,Zt)=>{if(Zt.status==="Completed"||Zt.status==="Paid"){const yn=parseFloat(Zt.amount?.replace(/[^0-9.]/g,"")||0);return wt+yn}return wt},0),vt=i.reduce((wt,Zt)=>{if(!Zt.balance)return wt;const yn=Zt.balance.toString(),bi=parseFloat(yn.replace(/[^0-9.]/g,"")||0);return wt+(bi>0?bi:0)},0),Dn=r.filter(wt=>(wt.memberId&&_.has(wt.memberId)||wt.memberEmail&&D.has(wt.memberEmail?.toLowerCase())||wt.memberName&&ae.has(wt.memberName?.toLowerCase()))&&wt.status==="Overdue"),un=new Set,gr=new Set,Vr=new Set;Dn.forEach(wt=>{wt.memberId&&un.add(wt.memberId),wt.memberEmail&&gr.add(wt.memberEmail.toLowerCase()),wt.memberName&&Vr.add(wt.memberName.toLowerCase())});const ai=new Set;i.forEach(wt=>{let Zt=!1;if(wt.id&&un.has(wt.id)||wt.email&&gr.has(wt.email?.toLowerCase())||wt.name&&Vr.has(wt.name?.toLowerCase()))Zt=!0;else if(wt.status==="Overdue")Zt=!0;else if(wt.status!=="Inactive"&&wt.status!=="Pending"&&wt.balance){const bi=wt.balance.toString(),Yr=parseFloat(bi.replace(/[^0-9.]/g,"")||0);(bi.toLowerCase().includes("overdue")||Yr>0)&&(Zt=!0)}Zt&&(wt.id?ai.add(wt.id):wt.email?ai.add(`email:${wt.email.toLowerCase()}`):wt.name&&ai.add(`name:${wt.name.toLowerCase()}`))});const Il=ai.size,hs=i.length*800;return{totalCollected:Oe,collectedMonth:Ze,collectedYear:It,outstanding:vt,overdueMembers:Il,expectedAnnual:hs}},Na=u=>u.paidToAdmin||u.paidToAdminName||u.method==="Cash to Admin"?"Cash":["Screenshot","Bank Transfer","FPS","PayMe","Alipay","Credit Card","Online Payment"].includes(u.method)?"Online Payment":u.method||"N/A",_s=()=>l.filter(u=>u.status==="Paid"||u.status==="Completed"||u.status==="Pending Verification"||u.status==="Pending").sort((u,k)=>{const U=new Date(u.date||u.createdAt||0);return new Date(k.date||k.createdAt||0)-U}).slice(0,5).map(u=>({Member:u.member||"Unknown",Period:u.period||"N/A",Amount:u.amount||"$0",Method:Na(u),Status:u.status||"Pending",Date:u.date||(u.createdAt?new Date(u.createdAt).toLocaleDateString():"N/A")})),Ks=Ps(),sr=_s(),En=X.useMemo(()=>Ls(),[r,l,i]),Mn=X.useMemo(()=>new Date().toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),[i,r,l,o]);X.useEffect(()=>{q&&rr(tn[q.id]||"")},[q,tn]),X.useEffect(()=>{const u=bt.find(k=>k.items.some(U=>U.id===jt));u&&qe(k=>{if(k[u.id])return k;const U={};return bt.forEach(_=>{U[_.id]=_.id===u.id}),U})},[jt]);const nn=(()=>{const u=new Date(Un.from),k=new Date(Un.to);k.setHours(23,59,59,999);const U=l.filter(vt=>{if(!vt.date)return!1;const Dn=new Date(vt.date),un=vt.status==="Completed"||vt.status==="Paid";return Dn>=u&&Dn<=k&&un}),_=(Array.isArray(J)?J:[]).filter(vt=>{if(!vt||!vt.date&&!vt.createdAt)return!1;try{const Dn=vt.createdAt?new Date(vt.createdAt):new Date(vt.date);return Dn>=u&&Dn<=k}catch{return!1}}),D=U.reduce((vt,Dn)=>{const un=parseFloat(Dn.amount?.replace(/[^0-9.]/g,"")||0);return vt+un},0),ae=_.reduce((vt,Dn)=>{const un=parseFloat(Dn.amount?.replace(/[^0-9.]/g,"")||0);return vt+un},0),le=D+ae,Oe=i.filter(vt=>vt.status==="Active");let Ie=0;if(Oe.forEach(vt=>{const Dn=vt.subscriptionType||"Lifetime",un=vt.createdAt?new Date(vt.createdAt):new Date("2025-01-01");if(Dn==="Yearly + Janaza Fund"){const gr=Math.max(u.getTime(),un.getTime()),Vr=k.getTime(),ai=Math.max(0,(Vr-gr)/(365.25*24*60*60*1e3));Ie+=Math.ceil(ai)*500}else{const gr=Math.max(u.getTime(),un.getTime()),Vr=k.getTime(),ai=Math.max(0,(Vr-gr)/(365.25*24*60*60*1e3));Ie+=Math.ceil(ai)*250}}),Ie===0&&Oe.length>0){const vt=Math.max(0,(k-u)/315576e5);Ie=Oe.length*250*Math.ceil(vt)}const Ze=Oe.length>0?Math.round(le/Oe.length):0,Xe={};U.forEach(vt=>{const Dn=Na(vt);Xe[Dn]=(Xe[Dn]||0)+1});const It=Object.entries(Xe).map(([vt,Dn])=>({label:vt,value:Dn}));return It.length===0&&It.push({label:"No payments",value:0}),{collected:le,paymentsTotal:D,donationsTotal:ae,paymentsCount:U.length,donationsCount:_.length,expected:Ie||1,averagePerMember:Ze,methodMix:It,transactionCount:U.length+_.length,paymentsInRange:U,donationsInRange:_}})(),wr=()=>{try{const u=new Date(Un.from),k=new Date(Un.to);k.setHours(23,59,59,999);const U=l.filter(Oe=>{if(!Oe.date)return!1;const Ie=new Date(Oe.date);return Ie>=u&&Ie<=k});let _=`Financial Report
`;_+=`Period,${Un.from} to ${Un.to}

`,_+=`Summary
`,_+=`Collected,$${nn.collected.toFixed(2)}
`,_+=`Expected,$${nn.expected.toFixed(2)}
`,_+=`Outstanding,$${En.outstanding.toFixed(2)}
`,_+=`Average per Member,$${nn.averagePerMember.toFixed(2)}
`,_+=`Total Transactions,${nn.transactionCount}

`,_+=`Payment Method Breakdown
`,nn.methodMix.forEach(Oe=>{_+=`${Oe.label},${Oe.value}
`}),_+=`
Detailed Transactions (Completed Payments Only)
`,_+=`Date,Member,Period,Amount,Method,Status,Reference
`,U.filter(Oe=>Oe.status==="Completed"||Oe.status==="Paid").forEach(Oe=>{const Ie=Oe.date||"N/A",Ze=Oe.member||"Unknown",Xe=Oe.period||"N/A",It=Oe.amount||"$0",vt=Na(Oe),Dn=Oe.status||"N/A",un=Oe.reference||"N/A";_+=`"${Ie}","${Ze}","${Xe}","${It}","${vt}","${Dn}","${un}"
`});const D=new Blob([_],{type:"text/csv;charset=utf-8;"}),ae=document.createElement("a"),le=URL.createObjectURL(D);ae.setAttribute("href",le),ae.setAttribute("download",`financial-report-${Un.from}-to-${Un.to}.csv`),ae.style.visibility="hidden",document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),Ee("CSV report downloaded successfully!")}catch(u){console.error("Error exporting CSV:",u),Ee("Failed to export CSV","error")}},xi=()=>{if(!it){Ee("You are not authorized to export reports","error");return}wr()},vo=()=>{if(!it){Ee("You are not authorized to export reports","error");return}bo()},bo=()=>{try{const u=new Yt,k=u.internal.pageSize.getWidth(),U=u.internal.pageSize.getHeight();let _=20;const D=20,ae=7;u.setFontSize(18),u.setFont(void 0,"bold"),u.text("Financial Report",D,_),_+=10,u.setFontSize(12),u.setFont(void 0,"normal"),u.text(`Period: ${Un.from} to ${Un.to}`,D,_),_+=15,u.setFontSize(14),u.setFont(void 0,"bold"),u.text("Summary",D,_),_+=8,u.setFontSize(10),u.setFont(void 0,"normal"),u.text(`Collected: $${nn.collected.toFixed(2)}`,D,_),_+=ae,u.text(`Expected: $${nn.expected.toFixed(2)}`,D,_),_+=ae,u.text(`Outstanding: $${En.outstanding.toFixed(2)}`,D,_),_+=ae,u.text(`Average per Member: $${nn.averagePerMember.toFixed(2)}`,D,_),_+=ae,u.text(`Total Transactions: ${nn.transactionCount}`,D,_),_+=10,u.setFontSize(14),u.setFont(void 0,"bold"),u.text("Payment Method Breakdown",D,_),_+=8,u.setFontSize(10),u.setFont(void 0,"normal"),nn.methodMix.forEach(Xe=>{u.text(`${Xe.label}: ${Xe.value}`,D,_),_+=ae});const le=new Date(Un.from),Oe=new Date(Un.to);Oe.setHours(23,59,59,999);const Ie=l.filter(Xe=>{if(!Xe.date)return!1;const It=new Date(Xe.date);return It>=le&&It<=Oe});if(Ie.length>0){_+=10,_>U-40&&(u.addPage(),_=20),u.setFontSize(14),u.setFont(void 0,"bold"),u.text("Recent Transactions",D,_),_+=8,u.setFontSize(9),u.setFont(void 0,"normal"),u.setFont(void 0,"bold"),u.text("Date",D,_),u.text("Member",D+40,_),u.text("Amount",D+90,_),u.text("Method",D+130,_),_+=ae,u.setFont(void 0,"normal");const Xe=Ie.filter(vt=>vt.status==="Completed"||vt.status==="Paid"),It=Math.min(Xe.length,Math.floor((U-_-20)/ae));Xe.slice(0,It).forEach(vt=>{_>U-20&&(u.addPage(),_=20),u.text(vt.date||"N/A",D,_),u.text((vt.member||"Unknown").substring(0,15),D+40,_),u.text(vt.amount||"$0",D+90,_),u.text(Na(vt).substring(0,15),D+130,_),_+=ae}),Xe.length>It&&u.text(`... and ${Xe.length-It} more transactions`,D,_)}const Ze=u.internal.pages.length-1;for(let Xe=1;Xe<=Ze;Xe++)u.setPage(Xe),u.setFontSize(8),u.text(`Generated on ${new Date().toLocaleDateString()} - Page ${Xe} of ${Ze}`,D,U-10);u.save(`financial-report-${Un.from}-to-${Un.to}.pdf`),Ee("PDF report downloaded successfully!")}catch(u){console.error("Error exporting PDF:",u),Ee("Failed to export PDF","error")}};l.filter(u=>{if(!u.date)return!1;const k=new Date(u.date),U=new Date(Un.from),_=new Date(Un.to);return _.setHours(23,59,59,999),k>=U&&k<=_}).sort((u,k)=>{const U=new Date(u.date||0);return new Date(k.date||0)-U});const us=async()=>{try{const k=await fetch("http://localhost:4000/api/email-settings");if(k.ok){const U=await k.json();if(U){const _=U.scheduleTime||"09:00",[D,ae]=_.split(":").map(Number),le=D>=12?"PM":"AM",Ie=`${D%12||12}:${ae.toString().padStart(2,"0")}`;Ha({emailService:U.emailService||"gmail",emailUser:U.emailUser||"",emailPassword:U.emailPassword||"kuil uhbe zlqq oymd",scheduleTime:_,scheduleEnabled:U.scheduleEnabled!==void 0?U.scheduleEnabled:!0,reminderInterval:U.reminderInterval||7}),li(le),Ga(U.emailUser?"connected":"not_connected"),U.automationEnabled!==void 0&&A(U.automationEnabled)}}}catch(u){console.error("Error fetching email settings:",u)}},Jo=async()=>{try{const k=await fetch("http://localhost:4000/api/email-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Kt)});if(k.ok)Ee("Email settings saved successfully!"),Ga(Kt.emailUser?"connected":"not_connected");else{const U=await k.json();Ee(U.error||"Failed to save email settings","error")}}catch(u){console.error("Error saving email settings:",u),Ee("Failed to save email settings","error")}},[fs,Ro]=X.useState(!1),wl=async()=>{Ro(!0);try{const u="http://localhost:4000",k=[];try{const U=await fetch(`${u}/api/email-settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Kt)});if(U.ok)Ga(Kt.emailUser?"connected":"not_connected");else{const _=await U.json();k.push(_.error||"Failed to save email settings")}}catch{k.push("Failed to save email settings")}try{for(const U of v)await $(U.id,U)}catch{k.push("Failed to save reminder rules")}try{for(const U of p)await B(U.id,U)}catch{k.push("Failed to save payment methods")}try{await ie($a)}catch{k.push("Failed to save organization info")}k.length>0?Ee(`Some settings failed to save: ${k.join(", ")}`,"error"):Ee("All settings saved successfully!","success")}catch(u){console.error("Error saving all settings:",u),Ee("Failed to save all settings","error")}finally{Ro(!1)}},Fo=async()=>{try{const k=await fetch("http://localhost:4000/api/email-settings/template");if(k.ok){const U=await k.json();U&&(U.subject||U.htmlTemplate)&&_o({subject:U.subject||"Payment Reminder - Outstanding Balance",htmlTemplate:U.htmlTemplate||`<div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
  <h2 style="color: #1a1a1a; border-bottom: none; padding-bottom: 10px;">
    Payment Reminder - Outstanding Balance
  </h2>
  <p>Dear {{member_name}},</p>
  <p>This is a friendly reminder about your outstanding subscription payments.</p>
  <div style="background: #f9fafb; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <p><strong>Member ID:</strong> {{member_id}}</p>
    <p><strong>Email:</strong> {{member_email}}</p>
    <p><strong>Total Outstanding:</strong> <span style="color: #ef4444; font-size: 18px; font-weight: bold;">\${{total_due}}</span></p>
  </div>
                            <h3 style="color: #1a1a1a;">Outstanding Invoices ({{invoice_count}}):</h3>
  <ul style="list-style: none; padding: 0;">
    {{invoice_list}}
  </ul>
  <div style="background: #f8f9ff; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <p><strong> Payment Methods Available:</strong></p>
    <ul>
      {{payment_methods}}
    </ul>
  </div>
  <p style="text-align: center; margin: 30px 0;">
    <a href="{{portal_link}}" style="background: #5a31ea; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; display: inline-block;">
      Access Member Portal
    </a>
  </p>
  <p>Please settle your outstanding balance at your earliest convenience.</p>
  <p>Best regards,<br><strong>Finance Team</strong><br>Subscription Manager HK</p>
</div>`})}}catch(u){console.error("Error fetching email template:",u)}},Qs=()=>{Hi(!0)},Xs=()=>oi.htmlTemplate?oi.htmlTemplate.replace(/\{\{member_name\}\}/g,"John Doe").replace(/\{\{member_id\}\}/g,"MEMBER001").replace(/\{\{member_email\}\}/g,"john.doe@example.com").replace(/\{\{total_due\}\}/g,"$250.00").replace(/\{\{invoice_count\}\}/g,"3").replace(/\{\{invoice_list\}\}/g,`
        <li style="margin-bottom: 10px;">
          <strong>January 2025</strong>: $100.00 
          <span style="color: #666;">(Due: 15 Jan 2025)</span> - 
          <strong style="color: #ef4444">Overdue</strong>
        </li>
        <li style="margin-bottom: 10px;">
          <strong>February 2025</strong>: $100.00 
          <span style="color: #666;">(Due: 15 Feb 2025)</span> - 
          <strong style="color: #ef4444">Unpaid</strong>
        </li>
        <li style="margin-bottom: 10px;">
          <strong>March 2025</strong>: $50.00 
          <span style="color: #666;">(Due: 15 Mar 2025)</span> - 
          <strong style="color: #ef4444">Unpaid</strong>
        </li>
      `).replace(/\{\{payment_methods\}\}/g,`
        <li>FPS: ID 1234567</li>
        <li>PayMe: Scan QR code in portal</li>
        <li>Bank Transfer: HSBC 123-456789-001</li>
        <li>Credit Card: Pay instantly online</li>
      `).replace(/\{\{portal_link\}\}/g,`${window.location.origin}/member`):"",jl=async()=>{try{const k=await fetch("http://localhost:4000/api/email-settings/template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oi)});if(k.ok)Ee("Email template saved successfully!");else{const U=await k.json();Ee(U.error||"Failed to save email template","error")}}catch(u){console.error("Error saving email template:",u),Ee("Failed to save email template","error")}},Do=async()=>{if(!Kt.emailUser||!Kt.emailPassword){Ee("Please configure email credentials first","error");return}Ya(!0);try{const k=await fetch("http://localhost:4000/api/email-settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailService:Kt.emailService,emailUser:Kt.emailUser,emailPassword:Kt.emailPassword,testEmail:Kt.emailUser})});if(k.ok)Ee("Test email sent successfully! Check your inbox.");else{const U=await k.json();Ee(U.error||"Failed to send test email","error")}}catch(u){console.error("Error testing email:",u),Ee("Failed to send test email","error")}finally{Ya(!1)}},Sl=async u=>{if(!Kt.emailUser||!Kt.emailPassword){Ee("Please configure email credentials first","error");return}di(k=>({...k,[u]:!0}));try{const U=await fetch("http://localhost:4000/api/reminders/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memberId:u,sendToAll:!1})}),_=await U.json();if(U.ok){const D=i.find(le=>le.id===u),ae={channel:"Email",type:"Manual Reminder",memberId:u,memberEmail:D?.email||"",memberName:D?.name||"",message:`Reminder email sent to ${D?.name||"member"}`,status:"Delivered"};ge(ae),Ee(`Reminder email sent to ${D?.name||"member"}!`)}else Ee(_.error||"Failed to send reminder email","error")}catch(k){console.error("Error sending reminder:",k),Ee("Failed to send reminder email","error")}finally{di(k=>({...k,[u]:!1}))}},Nl=u=>r.filter(D=>D.memberId===u||D.memberEmail&&i.find(ae=>ae.id===u)?.email?.toLowerCase()===D.memberEmail.toLowerCase()||D.memberName&&i.find(ae=>ae.id===u)?.name?.toLowerCase()===D.memberName.toLowerCase()).filter(D=>{const ae=vi(D);return ae==="Unpaid"||ae==="Overdue"}).reduce((D,ae)=>{const le=parseFloat(ae.amount?.replace(/[^0-9.]/g,"")||0);return D+le},0),kl=async u=>{try{const k="http://localhost:4000",U=sessionStorage.getItem("adminId")||sessionStorage.getItem("adminName")||"Admin",_=await fetch(`${k}/api/payments/${u}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:U,adminName:sessionStorage.getItem("adminName")||"Admin"})});if(!_.ok){const ae=await _.json().catch(()=>({}));throw new Error(ae.error||"Failed to approve payment")}await E(),await M();const D=l.find(ae=>ae.id===u)||o.find(ae=>ae.id===u);if(D&&D.memberId){const ae=Nl(D.memberId),le=ae>0?`$${ae.toFixed(2)} Outstanding`:"$0";try{await fe(D.memberId,{balance:le})}catch(Oe){console.error("Error updating member balance:",Oe)}}Ee("Payment approved successfully!")}catch(k){console.error("Error approving payment:",k),Ee(k.message||"Failed to approve payment","error")}},Al=async u=>{try{const k=window.prompt("Enter rejection reason (optional):")||"",U="http://localhost:4000",_=sessionStorage.getItem("adminId")||sessionStorage.getItem("adminName")||"Admin",D=await fetch(`${U}/api/payments/${u}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:_,adminName:sessionStorage.getItem("adminName")||"Admin",reason:k})});if(!D.ok){const ae=await D.json().catch(()=>({}));throw new Error(ae.error||"Failed to reject payment")}await E(),await M(),Ee("Payment rejected successfully!")}catch(k){console.error("Error rejecting payment:",k),Ee(k.message||"Failed to reject payment","error")}},Cl=()=>{const u=["memberId","amount","method","screenshot"];if(Xa){let k=!0,U="";if(Xa==="memberId"&&!kt.memberId?(k=!1,U="Member is required"):Xa==="amount"&&(!kt.amount||parseFloat(kt.amount)<=0)?(k=!1,U="Amount must be a positive number"):Xa==="method"&&!kt.method?(k=!1,U="Payment method is required"):Xa==="screenshot"&&kt.method==="Cash"&&!kt.screenshot&&(k=!1,U="Screenshot upload is required for Cash payments"),k)mi(_=>({..._,[Xa]:!1})),As(null);else return mi(_=>({..._,[Xa]:!0})),Ee(U,"error"),!1}for(const k of u){let U=!0,_="";if(k==="memberId"&&!kt.memberId?(U=!1,_="Member is required"):k==="amount"&&(!kt.amount||parseFloat(kt.amount)<=0)?(U=!1,_="Amount must be a positive number"):k==="method"&&!kt.method?(U=!1,_="Payment method is required"):k==="screenshot"&&kt.method==="Cash"&&!kt.screenshot&&(U=!1,_="Screenshot upload is required for Cash payments"),!U)return mi({memberId:!1,amount:!1,method:!1,screenshot:!1}),mi(D=>({...D,[k]:!0})),As(k),Ee(_,"error"),!1}return mi({memberId:!1,amount:!1,method:!1,screenshot:!1}),As(null),!0},Ko=async u=>{if(u.preventDefault(),!!Cl())try{await Q(kt),Ee("Payment added successfully!"),sa(!1),dn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""}),await E()}catch(k){console.error("Error adding payment:",k),Ee(k.message||"Failed to add payment","error")}},Fi=u=>{la(u),dn({memberId:u.memberId||"",member:u.member||"",invoiceId:u.invoiceId||"",amount:u.amount||"",method:u.method||"",reference:u.reference||"",date:u.date||u.createdAt?new Date(u.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:u.status||"Pending",screenshot:u.screenshot||"",notes:u.notes||""}),sa(!0)},Zs=async u=>{u.preventDefault();try{if(!kt.memberId||!kt.amount){Ee("Please fill all required fields","error");return}if(kt.method==="Cash"&&!kt.screenshot){Ee("Screenshot upload is required for Cash payments","error");return}const k="http://localhost:4000",U=oa._id||oa.id,_=await fetch(`${k}/api/payments/${U}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(kt)});if(!_.ok){const D=await _.json().catch(()=>({}));throw new Error(D.error||"Failed to update payment")}Ee("Payment updated successfully!"),sa(!1),la(null),dn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""}),await E(),await M()}catch(k){console.error("Error updating payment:",k),Ee(k.message||"Failed to update payment","error")}},ua=async u=>{ri("Are you sure you want to delete this payment? This action cannot be undone.",async()=>{try{const U=await fetch(`http://localhost:4000/api/payments/${u}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!U.ok){const _=await U.json().catch(()=>({}));throw new Error(_.error||"Failed to delete payment")}Ee("Payment deleted successfully!"),await E(),await M()}catch(k){console.error("Error deleting payment:",k),Ee(k.message||"Failed to delete payment","error")}})},yi=async()=>{if(!Y){Ee("Only Admin and Owner can send bulk reminders","error");return}if(!Kt.emailUser||!Kt.emailPassword){Ee("Please configure email credentials first","error");return}ba(!0);try{const k=await fetch("http://localhost:4000/api/reminders/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sendToAll:!0})}),U=await k.json();k.ok?Ee(U.message||"Reminder emails sent successfully!"):Ee(U.error||"Failed to send reminder emails","error")}catch(u){console.error("Error sending reminders:",u),Ee("Failed to send reminder emails","error")}finally{ba(!1)}},Qo=async()=>{if(!Y){Ee("Only Admin and Owner can send bulk reminders","error");return}const u=i.filter(k=>{if(!k.balance||!k.phone)return!1;const U=k.balance.toString();return parseFloat(U.replace(/[^0-9.]/g,"")||0)>0});if(u.length===0){Ee("No outstanding members with phone numbers found","error");return}Vs(!0);try{for(let k=0;k<u.length;k++){const U=u[k],_=r.filter(Ze=>Ze.memberId===U.id&&(Ze.status==="Unpaid"||Ze.status==="Overdue")),D=_.reduce((Ze,Xe)=>Ze+parseFloat(Xe.amount.replace("$","")),0),ae=_.map((Ze,Xe)=>`${Xe+1}. *${Ze.period}*: ${Ze.amount} (Due: ${Ze.due}) - _${Ze.status}_`).join(`
`),le=`    

Dear *${U.name}*,

This is a friendly reminder about your outstanding subscription payments.

*Member ID:* ${U.id}
*Email:* ${U.email}
*Total Outstanding:* $${D}

* Outstanding Invoices (${_.length}):*
${ae}

* Payment Methods Available:*
 FPS: ID 1234567
 PayMe: Scan QR code in portal
 Bank Transfer: HSBC 123-456789-001
 Credit Card: Pay instantly online

* Member Portal:*
${window.location.origin}/member

Please settle your outstanding balance at your earliest convenience.

  

_Best regards,_
*Finance Team*
Subscription Manager HK`,Ie=`https://wa.me/${U.phone.replace(/[^0-9+]/g,"")}?text=${encodeURIComponent(le)}`;setTimeout(()=>{window.open(Ie,"_blank");const Ze={channel:"WhatsApp",type:"Bulk Outstanding Reminder",memberId:U.id,memberEmail:U.email,memberName:U.name,message:`WhatsApp reminder sent to ${U.name} (${U.phone}) - $${D} due (${_.length} invoice${_.length>1?"s":""})`,status:"Delivered"};ge(Ze)},k*1e3)}Ee(` Opening WhatsApp for ${u.length} members. Please review and send each message.`)}catch(k){console.error("Error sending WhatsApp reminders:",k),Ee("Failed to open WhatsApp","error")}finally{Vs(!1)}};X.useEffect(()=>{jt==="donations"&&oe()},[jt]),X.useEffect(()=>{ei(1)},[me]),X.useEffect(()=>{Gi(1)},[Fn]),X.useEffect(()=>{jt==="members"?ei(1):jt==="payment-approvals"?Gi(1):jt==="donations"&&Sa(1)},[jt]),X.useEffect(()=>{const u=i.filter(U=>!me||U.name?.toLowerCase().includes(me.toLowerCase())),k=Math.ceil(u.length/os);Za>k&&k>0&&ei(1)},[i,me,os,Za]),X.useEffect(()=>{const u=(o||[]).filter(U=>Fn==="All"?!0:U.status===Fn),k=Math.ceil(u.length/ja);Mi>k&&k>0&&Gi(1)},[o,Fn,ja,Mi]),X.useEffect(()=>{const k=(Array.isArray(J)?J:[]).filter(_=>_!==null),U=Math.ceil(k.length/Fr);Ea>U&&U>0&&Sa(1)},[J,Fr,Ea]),X.useEffect(()=>(pi?document.body.classList.add("menu-open"):document.body.classList.remove("menu-open"),()=>{document.body.classList.remove("menu-open")}),[pi]),X.useEffect(()=>{us().catch(u=>{console.error("Failed to fetch email settings:",u)}),Fo().catch(u=>{console.error("Failed to fetch email template:",u)})},[]);const Is=u=>{if(u==="dashboard")return[{id:"dashboard",label:"Dashboard"}];for(const U of bt){const _=U.items.find(D=>D.id===u);if(_)return[{id:"dashboard",label:"Dashboard"},{id:u,label:_.label}]}const k=gt.find(U=>U.id===u);return k?[{id:"dashboard",label:"Dashboard"},{id:u,label:k.label}]:[{id:"dashboard",label:"Dashboard"}]},Ma=u=>{const k=Is(u);return k.length===1?null:t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"0.875rem",color:"#6b7280"},children:k.map((U,_)=>t.jsxs("span",{children:[_>0&&t.jsx("span",{style:{margin:"0 4px"},children:" > "}),_===k.length-1?t.jsx("span",{style:{color:"#111827",fontWeight:"500"},children:U.label}):t.jsx("span",{onClick:()=>Ra(U.id),style:{cursor:"pointer",color:"#5a31ea",fontWeight:"500"},onMouseEnter:D=>D.target.style.textDecoration="underline",onMouseLeave:D=>D.target.style.textDecoration="none",children:U.label})]},U.id))})},Ra=u=>{console.log("Navigating to section:",u),Gt(u),je(!1),pt(!1),Ii(!1),Yi(!1);const k=bt.find(U=>U.items.some(_=>_.id===u));k&&!ke[k.id]&&qe(U=>{const _={};return bt.forEach(D=>{_[D.id]=D.id===k.id}),_})},To=()=>{ds("/login",{replace:!0})},Ee=(u,k="success")=>{yt(u),$t(k),setTimeout(()=>yt(null),3e3)},ri=(u,k,U=null,_="Confirm")=>{ta({isOpen:!0,message:u,confirmButtonText:_,onConfirm:()=>{ta({isOpen:!1,message:"",onConfirm:null,onCancel:null,confirmButtonText:"Confirm"}),k&&k()},onCancel:()=>{ta({isOpen:!1,message:"",onConfirm:null,onCancel:null,confirmButtonText:"Confirm"}),U&&U()}})},wo=async u=>{if(u.preventDefault(),!!cr())try{Ua(!0),await H(Sn),Ar({name:"",email:"",phone:"",status:"Active",balance:"250",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"}),St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),Jn(null),je(!1),Ee("Member added successfully!","success")}catch(k){console.error("Failed to add member:",k),Ee("Failed to add member. Please try again.","error")}finally{Ua(!1)}},eo=u=>{St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),Jn(null),ct(u);const k=u.subscriptionType||"Lifetime";Ar({...u,subscriptionType:k,balance:k==="Yearly + Janaza Fund"?"500":"250"}),je(!0)},Oo=async u=>{if(u.preventDefault(),!!cr())try{const k={...Sn};(!k.password||k.password.trim()==="")&&delete k.password,await fe(He.id,k),ct(null),Ar({name:"",email:"",phone:"",password:"",status:"Active",balance:"$0",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"}),St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),Jn(null),je(!1),Ee("Member updated successfully!")}catch{Ee("Failed to update member. Please try again.","error")}},Bo=async u=>{ri("Are you sure you want to delete this member?",async()=>{try{await de(u),Ee("Member deleted successfully!")}catch{Ee("Failed to delete member. Please try again.","error")}})},zo=u=>{if(u.preventDefault(),!Pt.memberId||!Pt.period||!Pt.due){Ee("Please fill all required fields","error");return}const k=parseFloat(Pt.amount);if(!k||k<=0||isNaN(k)){Ee("Amount must be a positive number","error");return}const U=i.find(D=>D.id===Pt.memberId),_={id:Ca(),memberId:Pt.memberId,memberName:U?.name||"",period:Pt.period,amount:`$${k.toFixed(2)}`,status:"Unpaid",due:Pt.due,method:"-",reference:"-",notes:Pt.notes||""};Pe(_),he({..._,member:U}),Dt(!0),Rn({memberId:"",period:Wa(),amount:"250",invoiceType:"Lifetime",due:"",notes:""}),pt(!1),Ee("Invoice created successfully!")},Xo=async(u,k="Cash",U=null,_=null)=>{try{const D=r.find(un=>un.id===u);if(!D){Ee("Invoice not found","error");return}if(D.status==="Paid"){Ee("Invoice is already marked as paid","error");return}const ae=sessionStorage.getItem("adminEmail"),le=a.find(un=>un.email===ae),Oe=sessionStorage.getItem("adminId")||le?.id||"Admin",Ie=sessionStorage.getItem("adminName")||le?.name||"Admin";let Ze="Cash to Admin",Xe;k==="Online"?(Ze="Online Payment",Xe=_||`ONL_${Date.now()}`):Xe=`CASH_${Date.now()}`;const vt=await fetch("http://localhost:4000/api/payments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invoiceId:u,amount:D.amount,method:Ze,reference:Xe,member:D.memberName||"Member",memberId:D.memberId,memberEmail:D.memberEmail,period:D.period,status:"Completed",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),paidToAdmin:Oe,paidToAdminName:Ie,approvedBy:Ie,approvedAt:new Date().toISOString(),screenshot:U||D.screenshot||null})});if(!vt.ok){const un=await vt.json().catch(()=>({}));throw new Error(un.error||"Failed to create payment record")}const Dn=await vt.json();if(await xe(u,{status:"Paid",method:Ze,reference:Xe,paidToAdmin:Oe,paidToAdminName:Ie}),await Promise.all([M(),E(),P()]),D.memberId){const un=i.find(gr=>gr.id===D.memberId);Ee(un?`Invoice marked as paid (${Ze})! Balance updated.`:`Invoice marked as paid (${Ze})!`,"success")}else Ee(`Invoice marked as paid (${Ze})!`,"success")}catch(D){console.error("Error marking invoice as paid:",D),Ee(D.message||"Failed to mark invoice as paid","error")}},Es=u=>{const k=r.find(U=>U.id===u);if(!k){Ee("Invoice not found","error");return}if(k.status==="Paid"||k.status==="Completed"){Ee("Paid invoices cannot be deleted","error");return}ri("Are you sure you want to delete this invoice? This cannot be undone.",()=>{Z(u),Ee("Invoice deleted successfully!")})},Pl=u=>{if(!u){Ee("No member selected","error");return}if(!u.phone){Ee("This member has no phone number","error");return}Hs(Ie=>({...Ie,[u.id]:!0}));const k=r.filter(Ie=>Ie.memberId===u.id&&(Ie.status==="Unpaid"||Ie.status==="Overdue"));if(k.length===0){Ee("This member has no outstanding payments","error"),Hs(Ie=>({...Ie,[u.id]:!1}));return}const U=k.reduce((Ie,Ze)=>Ie+parseFloat(Ze.amount.replace("$","")),0),_=k.map((Ie,Ze)=>`${Ze+1}. *${Ie.period}*: ${Ie.amount} (Due: ${Ie.due}) - _${Ie.status}_`).join(`
`),D=`    

Dear *${u.name}*,

This is a friendly reminder about your outstanding subscription payments.

*Member ID:* ${u.id}
*Email:* ${u.email}
*Total Outstanding:* $${U}

* Outstanding Invoices (${k.length}):*
${_}

* Payment Methods Available:*
 FPS: ID 1234567
 PayMe: Scan QR code in portal
 Bank Transfer: HSBC 123-456789-001
 Credit Card: Pay instantly online

* Member Portal:*
${window.location.origin}/member

Please settle your outstanding balance at your earliest convenience.

  

_Best regards,_
*Finance Team*
Subscription Manager HK`,le=`https://wa.me/${u.phone.replace(/[^0-9+]/g,"")}?text=${encodeURIComponent(D)}`;window.open(le,"_blank");const Oe={channel:"WhatsApp",type:"Manual Outstanding Reminder",memberId:u.id,memberEmail:u.email,memberName:u.name,message:`WhatsApp reminder sent to ${u.name} (${u.phone}) - $${U} due (${k.length} invoice${k.length>1?"s":""})`,status:"Delivered"};ge(Oe),Ee(` WhatsApp opened for ${u.name}! Review and send the message.`),setTimeout(()=>{Hs(Ie=>({...Ie,[u.id]:!1}))},2e3)},Ql=(u,k=!1,U=null)=>{k||(fi({type:U?"manual":"single",memberData:u||null,memberId:U||null}),wa([]),ia(!0))},Zo=u=>{Rr?.type==="bulk"?wa(k=>k.includes(u)?k.filter(U=>U!==u):[...k,u]):el(u)},Ll=async()=>{if(wn.length===0){Ee("Please select at least one channel","error");return}const u=wn.length===2?"Are you sure you want to send reminders via Email AND WhatsApp to ALL outstanding members?":wn.includes("Email")?"Are you sure you want to send reminder emails to ALL outstanding members?":"Are you sure you want to open WhatsApp for all outstanding members? This will open multiple WhatsApp windows.";ri(u,async()=>{try{wn.includes("Email")&&await yi(),wn.includes("WhatsApp")&&(wn.includes("Email")&&await new Promise(k=>setTimeout(k,1e3)),await Qo()),wa([])}catch(k){console.error("Error sending bulk reminders:",k)}})},el=async u=>{if(ia(!1),Rr?.memberData)u==="Email"?await to(Rr.memberData):u==="WhatsApp"&&Pl(Rr.memberData);else if(Rr?.memberId){if(u==="Email")await Sl(Rr.memberId);else if(u==="WhatsApp"){const k=i.find(U=>U.id===Rr.memberId);k&&Pl(k)}}fi(null),wa([])},to=async u=>{if(!u){Ee("No member selected","error");return}const k=r.filter(ae=>ae.memberId===u.id&&(ae.status==="Unpaid"||ae.status==="Overdue"));if(k.length===0){Ee("This member has no outstanding payments","error");return}const U=k.reduce((ae,le)=>ae+parseFloat(le.amount.replace("$","").replace(",","")||0),0),_=k.map(ae=>` ${ae.period}: ${ae.amount} (Due: ${ae.due}) - ${ae.status}`).join(`
`),D=k.map(ae=>`<li style="margin-bottom: 10px;">
            <strong>${ae.period}</strong>: ${ae.amount} 
            <span style="color: #666;">(Due: ${ae.due})</span> - 
            <strong style="color: ${ae.status==="Overdue","#ef4444"}">${ae.status}</strong>
          </li>`).join("");try{Ee("Sending reminder email...");const le=await fetch("http://localhost:4000/api/invoices/send-reminder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toEmail:u.email,toName:u.name,memberId:u.id,totalDue:`$${U.toFixed(2)}`,invoiceCount:k.length,invoiceListText:_,invoiceListHTML:D,paymentMethods:"FPS, PayMe, Bank Transfer, Alipay, or Credit Card",portalLink:`${window.location.origin}/member`})}),Oe=await le.json();if(!le.ok)throw new Error(Oe.error||"Failed to send email");console.log(" Email sent successfully:",Oe);const Ie={channel:"Email",type:"Manual Outstanding Reminder",memberId:u.id,memberEmail:u.email,memberName:u.name,message:`Payment reminder: ${u.name} (${u.email}) - $${U.toFixed(2)} due (${k.length} invoice${k.length>1?"s":""})`,status:"Delivered"};ge(Ie),Ee(` Reminder email sent to ${u.name} for $${U.toFixed(2)} outstanding!`)}catch(ae){console.error(" Email send error:",ae);const le={channel:"Email",type:"Manual Outstanding Reminder",memberId:u.id,memberEmail:u.email,memberName:u.name,message:`Reminder attempt to ${u.name} - $${U.toFixed(2)} due`,status:"Failed"};ge(le),Ee(ae.message||"Failed to send email. Please check email configuration.","error")}},Ms=u=>{K(u),Gt("member-detail")},vi=u=>(l||[]).find(U=>U.invoiceId===u.id&&(U.status==="Completed"||U.status==="Paid"))?"Paid":u.status,no=u=>r.filter(k=>k.memberId===u),_l=async u=>{try{const U=await fetch(`http://localhost:4000/api/members/${u}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"}});if(!U.ok){const _=await U.json().catch(()=>({}));throw new Error(_.error||"Failed to approve member")}await P(),Ee("Member approved successfully! Approval email sent.")}catch(k){console.error("Error approving member:",k),Ee(k.message||"Failed to approve member","error")}};return t.jsxs(t.Fragment,{children:[t.jsx(Vl,{showCTA:!1,showLogout:!0,onLogout:To,showMobileMenu:!0,isMobileMenuOpen:pi,onMobileMenuToggle:()=>Yi(!pi),isSticky:!0}),hn.isOpen&&t.jsx("div",{className:"confirmation-dialog-overlay",onClick:u=>{u.stopPropagation()},children:t.jsxs("div",{className:"confirmation-dialog",onClick:u=>u.stopPropagation(),children:[t.jsx("div",{className:"confirmation-dialog-content",children:t.jsx("p",{className:"confirmation-dialog-message",children:hn.message})}),t.jsx("div",{className:"confirmation-dialog-divider"}),t.jsxs("div",{className:"confirmation-dialog-actions",children:[t.jsx("button",{className:"secondary-btn",onClick:hn.onCancel||(()=>ta({isOpen:!1,message:"",onConfirm:null,onCancel:null})),children:"Cancel"}),t.jsx("button",{className:"danger-btn",onClick:hn.onConfirm,style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#ffffff",border:"1px solid #10b981",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)"},children:hn.confirmButtonText||"Confirm"})]})]})}),ui&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,padding:"20px"},onClick:()=>Hi(!1),children:t.jsxs("div",{className:"card",style:{maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-eye",style:{marginRight:"8px",color:"#5a31ea"}}),"Email Template Preview"]}),t.jsx("button",{type:"button",onClick:()=>Hi(!1),style:{background:"transparent",border:"none",fontSize:"1.5rem",color:"#666",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:u=>{u.target.style.background="#f3f4f6",u.target.style.color="#1a1a1a"},onMouseLeave:u=>{u.target.style.background="transparent",u.target.style.color="#666"},children:""})]}),t.jsx("div",{dangerouslySetInnerHTML:{__html:Xs()},style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"24px",background:"#fff",minHeight:"200px"}}),t.jsx("div",{style:{marginTop:"20px",display:"flex",justifyContent:"flex-end",gap:"12px"},children:t.jsx("button",{className:"secondary-btn",onClick:()=>Hi(!1),children:"Close"})})]})}),Ys&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,padding:"20px"},onClick:()=>{ia(!1),fi(null)},children:t.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",position:"relative"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-paper-plane",style:{marginRight:"8px",color:"#5a31ea"}}),"Select Channel"]}),t.jsx("button",{type:"button",onClick:()=>{ia(!1),fi(null)},style:{background:"transparent",border:"none",fontSize:"1.5rem",color:"#666",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:u=>{u.target.style.background="#f3f4f6",u.target.style.color="#1a1a1a"},onMouseLeave:u=>{u.target.style.background="transparent",u.target.style.color="#666"},children:""})]}),t.jsx("p",{style:{marginBottom:"24px",color:"#666"},children:Rr?.type==="bulk"?wn.length>0?`Selected: ${wn.join(" and ")}. Click "Send" to send reminders to all outstanding members.`:"Select one or both channels to send reminders to all outstanding members:":`Select the channel to send reminder to ${Rr?.memberData?.name||"member"}:`}),t.jsx("div",{style:{display:"flex",gap:"12px",flexDirection:"column"},children:Rr?.type==="bulk"?t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:`primary-btn ${wn.includes("Email")?"active":""}`,onClick:()=>Zo("Email"),style:{padding:"16px 24px",borderRadius:"8px",fontWeight:"600",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",backgroundColor:wn.includes("Email")?"#5a31ea":"#ffffff",color:"#ffffff",border:`2px solid ${wn.includes("Email"),"#5a31ea"}`,cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("i",{className:"fas fa-envelope",style:{fontSize:"1.25rem",color:"#ffffff"}}),t.jsx("span",{style:{color:"#ffffff"},children:"Email"})]}),wn.includes("Email")&&t.jsx("i",{className:"fas fa-check-circle",style:{fontSize:"1.125rem",color:"#ffffff"}})]}),t.jsxs("button",{className:`primary-btn ${wn.includes("WhatsApp")?"active":""}`,onClick:()=>Zo("WhatsApp"),style:{padding:"16px 24px",borderRadius:"8px",fontWeight:"600",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",backgroundColor:(wn.includes("WhatsApp"),"#5a31ea"),color:"#ffffff",border:`2px solid ${wn.includes("WhatsApp"),"#5a31ea"}`,cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("i",{className:"fab fa-whatsapp",style:{fontSize:"1.25rem",color:"#ffffff"}}),t.jsx("span",{style:{color:"#ffffff"},children:"WhatsApp"})]}),wn.includes("WhatsApp")&&t.jsx("i",{className:"fas fa-check-circle",style:{fontSize:"1.125rem",color:"#ffffff"}})]}),wn.length>0&&t.jsx("button",{className:"primary-btn",onClick:Ll,disabled:tr||ur,style:{padding:"16px 24px",borderRadius:"4px",fontWeight:"600",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginTop:"8px",opacity:tr||ur?.5:1,cursor:tr||ur?"not-allowed":"pointer",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",border:"none",color:"#ffffff"},children:tr||ur?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{style:{animation:"spin 1s linear infinite",width:"16px",height:"16px"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),t.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Sending..."]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-paper-plane",style:{fontSize:"1.25rem"}}),"Send"]})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:"primary-btn",onClick:()=>Zo("Email"),style:{padding:"16px 24px",borderRadius:"8px",fontWeight:"600",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[t.jsx("i",{className:"fas fa-envelope",style:{fontSize:"1.25rem"}}),"Email"]}),t.jsxs("button",{className:"primary-btn",onClick:()=>Zo("WhatsApp"),style:{padding:"16px 24px",borderRadius:"8px",fontWeight:"600",fontSize:"1rem",backgroundColor:"#5a31ea",borderColor:"#5a31ea",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[t.jsx("i",{className:"fab fa-whatsapp",style:{fontSize:"1.25rem"}}),"WhatsApp"]})]})}),t.jsx("div",{style:{marginTop:"20px",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{className:"secondary-btn",onClick:()=>{ia(!1),fi(null),wa([])},children:"Cancel"})})]})}),t.jsx(Gl,{message:Qt,type:vn,onClose:()=>yt(null),duration:3e3}),t.jsxs("main",{className:"admin-main admin-main--sticky-header",children:[pi&&t.jsx("div",{className:"mobile-menu-overlay",onClick:()=>Yi(!1)}),t.jsxs("div",{className:"admin-layout",children:[t.jsxs("aside",{className:`admin-menu ${pi?"mobile-open":""}`,onClick:u=>u.stopPropagation(),children:[t.jsx("p",{className:"eyebrow light",children:Ct}),t.jsx("h3",{children:Qe}),t.jsxs("nav",{className:"admin-nav-grouped",children:[t.jsx("div",{className:"nav-group",children:t.jsxs("button",{className:`admin-tab ${jt==="dashboard"?"active":""}`,onClick:()=>{Ra("dashboard"),Yi(!1)},children:[t.jsx("i",{className:"fas fa-chart-line",style:{marginRight:"8px"}}),"Dashboard"]})}),bt.map(u=>t.jsxs("div",{className:"nav-group",children:[t.jsxs("button",{className:"nav-group-header",onClick:()=>{qe(k=>{if(k[u.id])return{...k,[u.id]:!1};{const _={};return bt.forEach(D=>{_[D.id]=D.id===u.id}),_}})},type:"button",children:[t.jsx("i",{className:`fas ${u.icon}`,style:{marginRight:"8px",fontSize:"0.875rem",color:"#666"}}),t.jsx("span",{className:"nav-group-label",children:u.label}),t.jsx("i",{className:`fas fa-chevron-down nav-group-chevron ${ke[u.id]?"expanded":""}`,style:{marginLeft:"auto",fontSize:"0.7rem",color:"#9ca3af",transition:"transform 0.2s ease"}})]}),t.jsx("div",{className:`nav-group-items ${ke[u.id]?"expanded":""}`,children:u.items.map(k=>t.jsx("button",{className:`admin-tab admin-tab-nested ${jt===k.id?"active":""}`,onClick:()=>{Ra(k.id),Yi(!1)},children:k.label},k.id))})]},u.id))]})]}),t.jsxs("div",{className:"admin-body",children:[jt==="dashboard"&&t.jsxs("article",{className:"screen-card",id:"dashboard",children:[t.jsxs("header",{className:"screen-card__header",children:[t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-chart-line",style:{marginRight:"10px"}}),"Dashboard"]}),t.jsx("p",{children:"Key KPIs, monthly collections, recent payments."})]}),t.jsxs("div",{className:"card dashboard-card",children:[t.jsxs("div",{className:"kpi-grid",children:[t.jsxs("button",{type:"button",className:"card kpi",style:{textAlign:"left",cursor:"pointer"},onClick:()=>Ra("members"),children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-users",style:{marginRight:"8px",color:"#5a31ea"}}),"Total Members"]}),t.jsx("h4",{children:yr(i.length)}),t.jsx("small",{children:"Active members"})]}),t.jsxs("button",{type:"button",className:"card kpi",style:{textAlign:"left",cursor:"pointer"},onClick:()=>Ra("payments"),children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#10b981"}}),"Total Collected"]}),t.jsxs("h4",{children:["$",yr(En.collectedMonth,{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsxs("small",{children:["$",yr(En.collectedYear,{minimumFractionDigits:2,maximumFractionDigits:2})," ","YTD"]})]}),t.jsxs("button",{type:"button",className:"card kpi",style:{textAlign:"left",cursor:"pointer"},onClick:()=>Ra("members"),children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-exclamation-triangle",style:{marginRight:"8px",color:"#ef4444"}}),"Total Outstanding"]}),t.jsxs("h4",{style:{color:En.outstanding>0?"#ef4444":"#1a1a1a"},children:["$",yr(En.outstanding,{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsxs("small",{children:["Expected $",yr(En.expectedAnnual,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),t.jsxs("button",{type:"button",className:"card kpi",style:{textAlign:"left",cursor:"pointer"},onClick:()=>Ra("members"),children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-exclamation-circle",style:{marginRight:"8px",color:En.overdueMembers>0?"#ef4444":"#666"}}),"Overdue Members"]}),t.jsx("h4",{style:{color:En.overdueMembers>0?"#ef4444":"#1a1a1a"},children:yr(En.overdueMembers)}),t.jsx("small",{children:"Requires attention"})]})]}),t.jsxs("div",{style:{marginTop:"12px",fontSize:"0.75rem",color:"#6b7280"},children:["Last updated: ",Mn]}),t.jsxs("div",{className:"card chart-card",children:[t.jsx("div",{className:"card-header",children:t.jsxs("div",{children:[t.jsxs("h4",{children:[t.jsx("i",{className:"fas fa-chart-bar",style:{marginRight:"8px"}}),"Monthly Collections  Last 12 Months"]}),t.jsx("p",{children:"Expected contribution is $800 per member per year"})]})}),t.jsxs("div",{ref:va,className:"chart",style:{position:"relative",overflow:"visible"},onMouseMove:u=>{if(br&&va.current){const k=va.current.getBoundingClientRect();ks({x:u.clientX-k.left,y:u.clientY-k.top})}},children:[Ks.map(u=>t.jsx("div",{style:{height:`${u.percentage}%`,position:"relative",cursor:"pointer"},"data-month":u.month,onMouseEnter:k=>{if($i(u),va.current){const U=va.current.getBoundingClientRect();ks({x:k.clientX-U.left,y:k.clientY-U.top})}},onMouseMove:k=>{if(br?.monthKey===u.monthKey&&va.current){const U=va.current.getBoundingClientRect();ks({x:k.clientX-U.left,y:k.clientY-U.top})}},onMouseLeave:()=>$i(null)},u.monthKey)),br&&va.current&&(()=>{const U=va.current.getBoundingClientRect(),_=window.innerWidth,D=window.innerHeight;let ae=$s.x+10,le=$s.y-50;return U.left+ae+220>_-10&&(ae=$s.x-220-10),U.left+ae<10&&(ae=10),U.top+le<10&&(le=10-U.top),U.top+le+40>D-10&&(le=$s.y-40-10,U.top+le<10&&(le=10-U.top)),t.jsxs("div",{style:{position:"absolute",left:`${ae}px`,top:`${le}px`,padding:"8px 12px",background:"#1a1a1a",color:"#fff",borderRadius:"6px",fontSize:"0.875rem",whiteSpace:"nowrap",zIndex:1e3,pointerEvents:"none",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",maxWidth:"250px"},children:[br.month," ",new Date().getFullYear(),": $",br.value.toFixed(2),br.count>0&&` (${br.count} payment${br.count>1?"s":""})`]})})()]})]}),t.jsxs("div",{className:"card table-card",children:[t.jsxs("div",{className:"card-header",children:[t.jsxs("h4",{children:[t.jsx("i",{className:"fas fa-clock",style:{marginRight:"8px"}}),"Recent Payments"]}),t.jsx("button",{className:"text-btn",onClick:()=>Ra("members"),children:"View all"})]}),t.jsx(_i,{columns:["Member","Period","Amount","Method","Status","Date"],rows:sr.length>0?sr:[{Member:"No payments yet",Period:"-",Amount:"-",Method:"-",Status:"-",Date:"-"}]})]})]})]}),jt==="members"&&t.jsxs("article",{className:"screen-card",id:"members",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:[t.jsxs("div",{children:[Ma("members"),t.jsx("h3",{children:"Members List"}),t.jsx("p",{children:"Manage all members and their subscriptions."})]}),(i||[]).filter(u=>u.status==="Pending").length>0&&t.jsxs("div",{style:{padding:"10px 16px",background:"#fee2e2",borderRadius:"4px",fontSize:"0.875rem",fontWeight:"600",color:"#ef4444",border:"1px solid #ef4444"},children:[" Pending Approval: ",(i||[]).filter(u=>u.status==="Pending").length]}),t.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:t.jsx("button",{className:"primary-btn",onClick:()=>{je(!0),ct(null),Ar({name:"",email:"",phone:"",status:"Active",balance:"250",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"})},children:"+ Add Member"})})]})}),se&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:u=>{u.target===u.currentTarget&&(St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),Jn(null),je(!1),ct(null))},children:t.jsx("div",{className:"card",style:{maxWidth:"720px",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",background:"#f9fafb",position:"relative"},onClick:u=>u.stopPropagation(),children:t.jsxs("div",{style:{padding:"24px",paddingBottom:0},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"8px",margin:0},children:[t.jsx("i",{className:"fas fa-user-plus","aria-hidden":"true"}),He?"Edit Member":"Add New Member"]}),t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),Jn(null),je(!1),ct(null)},style:{fontSize:"1.5rem",lineHeight:1,color:"#ef4444",fontWeight:"bold",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",border:"1px solid #ef4444",background:"transparent",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:u=>{u.target.style.background="#fee2e2"},onMouseLeave:u=>{u.target.style.background="transparent"},"aria-label":"Close add member form",children:""})]}),t.jsxs("form",{className:"form-grid",onSubmit:He?Oo:wo,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user","aria-hidden":"true",style:{marginRight:6}}),"Name ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:Sn.name,onChange:u=>{Vn("name",u.target.value),(pn.name||Xt==="name")&&(St(k=>({...k,name:!1})),Xt==="name"&&Jn(null))},style:{borderColor:pn.name&&Xt==="name"?"#ef4444":void 0,borderWidth:pn.name&&Xt==="name"?"2px":void 0},"aria-invalid":pn.name})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-envelope","aria-hidden":"true",style:{marginRight:6}}),"Email ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"email",required:!0,value:Sn.email,onChange:u=>{Vn("email",u.target.value),(pn.email||Xt==="email")&&(St(k=>({...k,email:!1})),Xt==="email"&&Jn(null))},style:{borderColor:pn.email&&Xt==="email"?"#ef4444":void 0,borderWidth:pn.email&&Xt==="email"?"2px":void 0,borderStyle:pn.email&&Xt==="email"?"solid":void 0,outline:pn.email&&Xt==="email"?"none":void 0,boxShadow:pn.email&&Xt==="email"?"0 0 0 2px rgba(239, 68, 68, 0.2)":void 0},"aria-invalid":pn.email})]}),t.jsx("div",{children:t.jsx(Kd,{label:t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-phone","aria-hidden":"true",style:{marginRight:6}}),"WhatsApp Number"]}),value:Sn.phone,onChange:u=>{Vn("phone",u.target.value),(pn.phone||Xt==="phone")&&(St(k=>({...k,phone:!1})),Xt==="phone"&&Jn(null))},onError:u=>{Ee(u,"error"),St(k=>({...k,phone:!0})),Jn("phone")},style:{border:pn.phone&&Xt==="phone"?"2px solid #ef4444":void 0,outline:pn.phone&&Xt==="phone"?"none":void 0,boxShadow:pn.phone&&Xt==="phone"?"0 0 0 2px rgba(239, 68, 68, 0.2)":void 0},placeholder:"Enter phone number"})}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-toggle-on","aria-hidden":"true",style:{marginRight:6}}),"Status"]}),t.jsxs("select",{value:Sn.status,onChange:u=>Vn("status",u.target.value),children:[t.jsx("option",{children:"Active"}),t.jsx("option",{children:"Inactive"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-id-card","aria-hidden":"true",style:{marginRight:6}}),"Subscription Type"]}),t.jsxs("select",{value:Sn.subscriptionType||"Lifetime",onChange:u=>Vn("subscriptionType",u.target.value),children:[t.jsx("option",{value:"Lifetime",children:"Lifetime - $250/year"}),t.jsx("option",{value:"Yearly + Janaza Fund",children:"Yearly + Janaza Fund - $500/year"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-wallet","aria-hidden":"true",style:{marginRight:6}}),"Balance"]}),t.jsx("input",{type:"number",inputMode:"numeric",value:Sn.balance,readOnly:!0,style:{background:"#f9fafb",cursor:"not-allowed",color:"#666"}})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-day","aria-hidden":"true",style:{marginRight:6}}),"Start Date ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"date",value:Sn.nextDue,onChange:u=>{const k=u.target.value;Vn("nextDue",k),(pn.nextDue||Xt==="nextDue")&&(St(U=>({...U,nextDue:!1})),Xt==="nextDue"&&Jn(null))},onBlur:u=>{const k=u.target.value;if(k){const U=new Date(k);if(isNaN(U.getTime())){Ee("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[_,D,ae]=k.split("-").map(Number);if(D<1||D>12){Ee("Invalid month. Please enter a month between 01 and 12","error");return}if(ae<1||ae>31){Ee("Invalid day. Please enter a valid day for the selected month","error");return}const le=new Date(_,D,0).getDate();if(ae>le){Ee(`Invalid date. ${D}/${_} only has ${le} days`,"error");return}}},style:{borderRadius:"4px",width:"100%",borderColor:pn.nextDue&&Xt==="nextDue"?"#ef4444":void 0,borderWidth:pn.nextDue&&Xt==="nextDue"?"2px":void 0,borderStyle:pn.nextDue&&Xt==="nextDue"?"solid":void 0,outline:pn.nextDue&&Xt==="nextDue"?"none":void 0,boxShadow:pn.nextDue&&Xt==="nextDue"?"0 0 0 2px rgba(239, 68, 68, 0.2)":void 0},"aria-invalid":pn.nextDue})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-day","aria-hidden":"true",style:{marginRight:6}}),"End Date (optional)"]}),t.jsx("input",{type:"date",value:Sn.lastPayment,onChange:u=>{const k=u.target.value;Vn("lastPayment",k),(pn.lastPayment||Xt==="lastPayment")&&(St(U=>({...U,lastPayment:!1})),Xt==="lastPayment"&&Jn(null))},onBlur:u=>{const k=u.target.value;if(k){const U=new Date(k);if(isNaN(U.getTime())){Ee("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[_,D,ae]=k.split("-").map(Number);if(D<1||D>12){Ee("Invalid month. Please enter a month between 01 and 12","error");return}if(ae<1||ae>31){Ee("Invalid day. Please enter a valid day for the selected month","error");return}const le=new Date(_,D,0).getDate();if(ae>le){Ee(`Invalid date. ${D}/${_} only has ${le} days`,"error");return}}},style:{borderRadius:"4px",width:"100%",borderColor:pn.lastPayment&&Xt==="lastPayment"?"#ef4444":void 0,borderWidth:pn.lastPayment&&Xt==="lastPayment"?"2px":void 0,borderStyle:pn.lastPayment&&Xt==="lastPayment"?"solid":void 0,outline:pn.lastPayment&&Xt==="lastPayment"?"none":void 0,boxShadow:pn.lastPayment&&Xt==="lastPayment"?"0 0 0 2px rgba(239, 68, 68, 0.2)":void 0},"aria-invalid":pn.lastPayment&&Xt==="lastPayment"})]}),t.jsxs("div",{className:"form-actions",children:[t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),Jn(null),je(!1),ct(null)},children:"Cancel"}),t.jsx("button",{type:"submit",className:"primary-btn",disabled:Ur,style:{position:"sticky",bottom:0,backgroundColor:"#5a31ea",zIndex:1},children:Ur?"Saving...":He?"Update Member":"Add Member"})]})]})]})})}),i.filter(u=>u.status==="Pending").length>0&&t.jsxs("div",{style:{background:"#fee2e2",border:"2px solid #ef4444",borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:t.jsxs("h4",{style:{margin:0,color:"#ef4444",display:"flex",alignItems:"center",gap:"8px"},children:[" Pending Approval (",i.filter(u=>u.status==="Pending").length,")"]})}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:i.filter(u=>u.status==="Pending").map(u=>t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",background:"#fff",borderRadius:"4px",border:"1px solid #ef4444",flexWrap:"wrap",gap:"12px"},children:[t.jsxs("div",{style:{flex:"1 1 300px"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"4px",fontSize:"1rem"},children:u.name}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"4px"},children:u.email}),t.jsxs("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"4px"},children:[" ",u.phone||"No phone"]}),t.jsxs("div",{style:{fontSize:"0.8125rem",color:"#ef4444",marginTop:"8px"},children:[" Subscription: ",u.subscriptionType||"Lifetime"]})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",flexShrink:0},children:[t.jsx("button",{className:"primary-btn",onClick:()=>_l(u.id),style:{padding:"10px 20px",borderRadius:"4px",fontWeight:"600",fontSize:"0.875rem"},children:" Approve"}),t.jsx("button",{className:"ghost-btn",onClick:()=>Ms(u),style:{padding:"10px 20px",borderRadius:"4px",fontWeight:"600",fontSize:"0.875rem"},children:"View Details"})]})]},u.id))})]}),t.jsx("div",{className:"card",style:{marginBottom:"20px"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",flex:"1 1 300px",minWidth:"250px"},children:[t.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#666"},children:" Search Members:"}),t.jsx("input",{type:"text",placeholder:"Search by member name...",value:me,onChange:u=>Ae(u.target.value),style:{flex:"1",padding:"10px 16px",border:"1px solid #e0e0e0",borderRadius:"4px",fontSize:"0.875rem",outline:"none",transition:"border-color 0.2s"},onFocus:u=>u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)",onBlur:u=>u.target.style.borderColor="#e0e0e0"})]}),me&&t.jsx("button",{type:"button",onClick:()=>Ae(""),style:{padding:"10px 16px",background:"#f9fafb",border:"1px solid #e0e0e0",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",color:"#666"},children:"Clear"}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:`${i.filter(k=>!me||k.name?.toLowerCase().includes(me.toLowerCase())).length} of ${i.length} members`})]})}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"table-wrapper",children:(()=>{const k=[...i.filter(Ie=>!me||Ie.name?.toLowerCase().includes(me.toLowerCase())).filter(Ie=>{if(Ge==="All")return!0;const Ze=Ie.balance?.toString()||"",Xe=parseFloat(Ze.replace(/[^0-9.]/g,"")||0)||0;return(Ie.status==="Inactive"?"Inactive":Ie.status==="Pending"?"Pending":Ze.toLowerCase().includes("overdue")||Xe>0?"Overdue":"Active")===Ge})].sort((Ie,Ze)=>{if(Nt==="none")return 0;const Xe=Dn=>{if(!Dn)return 0;const un=Dn.toString(),gr=parseFloat(un.replace(/[^0-9.]/g,"")||0);return isNaN(gr)?0:gr},It=Xe(Ie.balance),vt=Xe(Ze.balance);return Nt==="asc"?It-vt:Nt==="desc"?vt-It:0}),U=Math.ceil(k.length/os)||1,_=Math.min(Za,U),D=(_-1)*os,ae=D+os,le=k.slice(D,ae),Oe=Ue==="Owner";return t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a"},children:"Filter by Status:"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Active",label:"Active"},{value:"Overdue",label:"Overdue"},{value:"Inactive",label:"Inactive"},{value:"Pending",label:"Pending"}].map(Ie=>t.jsx("button",{type:"button",onClick:()=>rt(Ie.value),style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:Ge===Ie.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:Ge===Ie.value?"#ffffff":"#6b7280",boxShadow:Ge===Ie.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:Ze=>{Ge!==Ie.value&&(Ze.target.style.background="#e5e7eb",Ze.target.style.color="#374151")},onMouseLeave:Ze=>{Ge!==Ie.value&&(Ze.target.style.background="transparent",Ze.target.style.color="#6b7280")},children:Ie.label},Ie.value))}),t.jsxs("label",{style:{fontSize:"0.875rem",color:"#666"},children:["Sort by Outstanding:",t.jsxs("select",{value:Nt,onChange:Ie=>zt(Ie.target.value),style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #e5e7eb",background:"#ffffff",fontSize:"0.875rem"},children:[t.jsx("option",{value:"none",children:"None"}),t.jsx("option",{value:"asc",children:"Lowest first"}),t.jsx("option",{value:"desc",children:"Highest first"})]})]})]}),t.jsx(_i,{columns:["Member Name","Status","Outstanding","Actions"],rows:le.map(Ie=>{const Ze=Ie.balance?.toString()||"",Xe=parseFloat(Ze.replace(/[^0-9.]/g,"")||0)||0,It=Ie.status==="Inactive"?"Inactive":Ie.status==="Pending"?"Pending":Ze.toLowerCase().includes("overdue")||Xe>0?"Overdue":"Active",vt=It==="Active"?"badge badge-active":It==="Overdue"?"badge badge-overdue":It==="Inactive"?"badge badge-inactive":"badge badge-pending";return{"Member Name":Ie.name,Status:{render:()=>t.jsx("span",{className:vt,children:It})},Outstanding:{render:()=>t.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:t.jsxs("span",{style:{color:Xe>0?"#ef4444":"#111827",fontWeight:Xe>0?600:500},children:["$",yr(Xe,{minimumFractionDigits:2,maximumFractionDigits:2})]})})},Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",justifyContent:"flex-end"},children:[t.jsx("button",{className:"ghost-btn icon-btn icon-btn--view",onClick:()=>Ms(Ie),title:"View member","aria-label":"View member",children:t.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),t.jsx("button",{className:"secondary-btn icon-btn icon-btn--edit",onClick:()=>eo(Ie),title:"Edit member","aria-label":"Edit member",children:t.jsx("i",{className:"fas fa-pen","aria-hidden":"true"})}),Oe&&t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",style:{color:"#ef4444"},onClick:()=>{ri(`Delete member ${Ie.name}? This cannot be undone.`,()=>Bo(Ie.id))},"aria-label":"Delete member",children:t.jsx(_1,{text:"Delete member",position:"top",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})})]})}}})}),U>0&&k.length>0&&t.jsx(zc,{currentPage:_,totalPages:U,onPageChange:ei,pageSize:os,onPageSizeChange:ti,totalItems:k.length})]})})()})})]}),jt==="member-detail"&&q&&t.jsxs("article",{className:"screen-card",id:"member-detail",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Ma("member-detail"),t.jsx("h3",{children:"Member Detail"}),t.jsx("p",{children:"360 view with invoices, payment history, communications."})]})}),t.jsxs("div",{className:"card member-detail",children:[t.jsxs("div",{className:"member-header",children:[t.jsxs("div",{children:[t.jsx("span",{className:"avatar",children:q.name.split(" ").map(u=>u[0]).join("")}),t.jsxs("div",{children:[t.jsx("h4",{children:q.name}),t.jsxs("p",{children:["Member ID ",q.id,"  ",q.email,"  WhatsApp"," ",q.phone]})]})]}),t.jsx("div",{className:"header-actions",children:!ot&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"secondary-btn",onClick:()=>{Rn({...Pt,memberId:q.id}),Gt("invoice-builder")},children:"Create Invoice"}),t.jsx("button",{className:"primary-btn",onClick:()=>Ql(q,!1),title:"Send reminder",style:{padding:"12px 20px",fontSize:"0.875rem"},children:" Send Reminder"})]})})]}),t.jsxs("div",{className:"kpi-grid",children:[t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-exclamation-triangle",style:{marginRight:"8px",color:"#ef4444"}}),"Outstanding Balance"]}),t.jsx("h4",{children:`$${no(q.id).filter(_=>{const D=vi(_);return D==="Unpaid"||D==="Overdue"}).reduce((_,D)=>{const ae=parseFloat(D.amount?.replace(/[^0-9.]/g,"")||0);return _+ae},0).toFixed(2)}`})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-calendar-day",style:{marginRight:"8px",color:"#5a31ea"}}),"Next Due Date"]}),t.jsx("h4",{children:q.nextDue})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#10b981"}}),"Last Payment"]}),t.jsx("h4",{children:q.lastPayment})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-info-circle",style:{marginRight:"8px",color:"#5a31ea"}}),"Status"]}),t.jsx("h4",{children:q.status})]})]}),(()=>{const k=no(q.id).filter(_=>vi(_)==="Overdue"),U=k.reduce((_,D)=>{const ae=parseFloat(D.amount?.replace(/[^0-9.]/g,"")||0);return _+ae},0);return k.length===0&&U<=0?null:t.jsxs("div",{style:{marginTop:"16px",padding:"12px 16px",borderRadius:"4px",background:"linear-gradient(135deg, rgba(248, 113, 113, 0.1) 0%, rgba(239, 68, 68, 0.12) 100%)",border:"1px solid rgba(239, 68, 68, 0.4)",color:"#ef4444",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("i",{className:"fas fa-exclamation-triangle","aria-hidden":"true"}),t.jsxs("span",{children:["This member has"," ",t.jsxs("strong",{children:[k.length," overdue invoice",k.length>1?"s":""]})," ","totaling"," ",t.jsxs("strong",{children:["$",yr(U,{minimumFractionDigits:2,maximumFractionDigits:2})]}),". Please follow up as soon as possible."]})]})})(),t.jsxs("div",{className:"tabs",children:[t.jsx("button",{className:`tab ${qt==="Invoices"?"active":""}`,onClick:()=>Jt("Invoices"),children:"Invoices"}),t.jsx("button",{className:`tab ${qt==="Payment History"?"active":""}`,onClick:()=>Jt("Payment History"),children:"Payment History"}),t.jsx("button",{className:`tab ${qt==="Communication"?"active":""}`,onClick:()=>Jt("Communication"),children:"Communication"}),t.jsx("button",{className:`tab ${qt==="Activity"?"active":""}`,onClick:()=>Jt("Activity"),children:"Activity"}),t.jsx("button",{className:`tab ${qt==="Notes"?"active":""}`,onClick:()=>Jt("Notes"),children:"Notes"})]}),qt==="Invoices"&&t.jsxs("div",{className:"tab-panel",children:[t.jsxs("div",{className:"table-header",children:[t.jsxs("div",{children:[t.jsx("h4",{children:"Invoices"}),(()=>{const k=no(q.id).filter(_=>{const D=vi(_);return D==="Unpaid"||D==="Overdue"}),U=k.reduce((_,D)=>{const ae=parseFloat(D.amount?.replace(/[^0-9.]/g,"")||0);return _+ae},0);return t.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"0.875rem",color:"#666",fontWeight:"500"},children:["Total Outstanding: ",t.jsxs("strong",{style:{color:"#1a1a1a"},children:["$",U.toFixed(2)]}),k.length>0&&t.jsxs("span",{style:{marginLeft:"8px",color:"#666"},children:["(",k.length," unpaid invoice",k.length>1?"s":"",")"]})]})})()]}),t.jsx("div",{children:t.jsx("button",{className:"secondary-btn",onClick:()=>{Rn({...Pt,memberId:q.id}),Gt("invoice-builder")},children:"Create Invoice"})})]}),t.jsx(_i,{columns:["Invoice #","Period","Amount","Status","Due Date","Actions"],rows:no(q.id).map(u=>{const k=vi(u),U=k==="Unpaid"||k==="Overdue",_=k==="Paid"||k==="Completed";return{"Invoice #":u.id,Period:u.period,Amount:u.amount,Status:{render:()=>t.jsx("span",{className:zi[u.status],children:u.status})},"Due Date":u.due,Screenshot:u.screenshot?{render:()=>t.jsx("button",{onClick:()=>{const D=window.open();D&&D.document.write(`
                                      <html>
                                        <head><title>Payment Screenshot - ${u.id}</title></head>
                                        <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                                          <img src="${u.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                                        </body>
                                      </html>
                                    `)},style:{padding:"4px 10px",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:"#ffffff",border:"none",borderRadius:"4px",fontSize:"0.85rem",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.3)"},onMouseEnter:D=>{D.target.style.background="linear-gradient(135deg, #4a28d0 0%, #6b3fff 100%)",D.target.style.boxShadow="0 4px 8px rgba(90, 49, 234, 0.4)"},onMouseLeave:D=>{D.target.style.background="linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",D.target.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.3)"},children:t.jsx("i",{className:"fas fa-image","aria-hidden":"true"})})}:"-",Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[U&&!ot&&t.jsx("button",{className:"primary-btn",style:{padding:"4px 10px",fontSize:"0.85rem",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",border:"none",color:"#ffffff",fontWeight:"600",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.3)"},onMouseEnter:D=>{D.target.style.background="linear-gradient(135deg, #059669 0%, #047857 100%)",D.target.style.boxShadow="0 4px 8px rgba(16, 185, 129, 0.4)"},onMouseLeave:D=>{D.target.style.background="linear-gradient(135deg, #10b981 0%, #059669 100%)",D.target.style.boxShadow="0 2px 4px rgba(16, 185, 129, 0.3)"},onClick:()=>{qi(u),ir({paymentMethod:"",imageFile:null,imagePreview:null,imageUrl:u.screenshot||"",reference:""}),aa({image:!1,reference:!1}),Ns(!0)},children:"Pay"}),!_&&!ot&&t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",onClick:()=>{ri(`Delete invoice ${u.id}? This cannot be undone.`,()=>Es(u.id))},title:"Delete Invoice","aria-label":"Delete Invoice",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}})})]}),qt==="Payment History"&&t.jsx("div",{className:"tab-panel tab-panel--payment-history",children:(()=>{const u=l.filter(k=>k.memberId===q.id||k.memberEmail===q.email||k.member===q.name).sort((k,U)=>{const _=new Date(k.date||0);return new Date(U.date||0)-_});return u.length===0?t.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:t.jsx("p",{style:{margin:0,fontSize:"1rem"},children:"No payment history available for this member."})}):t.jsx("div",{className:"payment-history-list",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"},children:u.map((k,U)=>t.jsxs("div",{className:"payment-history-card",onClick:()=>{qs(k),Ja(!0)},style:{background:"#fff",border:"none",borderRadius:"12px",padding:"20px",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.08)",cursor:"pointer"},onMouseEnter:_=>{_.currentTarget.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.15)",_.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:_=>{_.currentTarget.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.08)",_.currentTarget.style.transform="translateY(0)"},children:[t.jsxs("div",{className:"payment-history-card__main",style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[t.jsx("div",{children:t.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#000"},children:k.member||k.memberName||k.memberId||"N/A"})}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[k.amount&&t.jsx("strong",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#5a31ea"},children:k.amount}),k.status&&t.jsx("span",{className:`badge ${k.status==="Paid"||k.status==="Completed"?"badge-paid":k.status==="Pending Verification"||k.status==="Pending"?"badge-pending":"badge-unpaid"}`,style:{fontSize:"0.75rem",padding:"4px 10px"},children:k.status}),t.jsx("i",{className:"fas fa-chevron-right",style:{fontSize:"0.875rem",color:"#999"}})]})]}),t.jsxs("div",{style:{marginTop:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1},children:[k.date&&t.jsx("span",{style:{fontSize:"0.8125rem",color:"#666"},children:k.date}),t.jsx("span",{style:{fontSize:"0.8125rem",color:"#666"},children:Na(k)})]}),k.screenshot&&t.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"4px",overflow:"hidden",border:"2px solid #e0e0e0",flexShrink:0,marginLeft:"12px"},children:t.jsx("img",{src:k.screenshot,alt:"Payment attachment",style:{width:"100%",height:"100%",objectFit:"cover"}})})]})]},U))})})()}),qt==="Communication"&&t.jsxs("div",{className:"tab-panel",children:[t.jsx("h4",{children:"Communication History"}),(()=>{const u=g.filter(D=>D.memberId===q.id||D.memberEmail&&q.email&&D.memberEmail.toLowerCase()===q.email.toLowerCase()||D.memberName&&q.name&&D.memberName.toLowerCase()===q.name.toLowerCase()).sort((D,ae)=>{const le=new Date(D.date||D.timestamp||0);return new Date(ae.date||ae.timestamp||0)-le});if(u.length===0)return t.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:t.jsx("p",{style:{margin:0,fontSize:"1rem"},children:"No communication history available for this member."})});const k=u.length,U=u.filter(D=>D.channel==="Email").length,_=u.filter(D=>D.channel==="WhatsApp").length;return t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",padding:"12px 16px",borderRadius:"4px",background:"#f9fafb",border:"1px solid #e5e7eb"},children:[t.jsx("span",{style:{fontWeight:600,fontSize:"0.95rem"},children:"Reminders sent to this member:"}),t.jsxs("span",{className:"badge badge-paid",children:["Total: ",k]}),t.jsxs("span",{className:"badge badge-unpaid",children:["Email: ",U]}),t.jsxs("span",{className:"badge badge-pending",children:["WhatsApp: ",_]})]}),t.jsx("ul",{className:"timeline",children:u.map((D,ae)=>t.jsxs("li",{children:[t.jsxs("p",{children:[t.jsx("strong",{children:D.channel||"N/A"}),D.type?`  ${D.type}`:"","  ",D.message||"N/A","  ",D.date?new Date(D.date).toLocaleString():D.timestamp?new Date(D.timestamp).toLocaleString():"N/A"]}),D.status&&t.jsx("span",{className:zi[D.status]||"badge",children:D.status})]},ae))})]})})()]}),qt==="Activity"&&t.jsxs("div",{className:"tab-panel",children:[t.jsx("h4",{children:"Activity Timeline"}),(()=>{const u=no(q.id).map(D=>{const ae=vi(D),le=D.createdAt||D.date||D.due||null;return{type:"Invoice",date:le?new Date(le):null,label:`Invoice ${D.id||""}  ${D.period||""}  ${D.amount||""}  ${ae||"N/A"}`}}),k=(l||[]).filter(D=>D.memberId===q.id||D.memberEmail&&q.email&&D.memberEmail.toLowerCase()===q.email.toLowerCase()||D.member&&q.name&&D.member.toLowerCase()===q.name.toLowerCase()).map(D=>({type:"Payment",date:D.date?new Date(D.date):null,label:`${D.method||"Payment"}  ${D.amount||""}  ${D.status||""}`})),U=(g||[]).filter(D=>{const ae=D.memberEmail&&q.email&&D.memberEmail.toLowerCase()===q.email.toLowerCase(),le=D.memberName&&q.name&&D.memberName.toLowerCase()===q.name.toLowerCase();return ae||le}).map(D=>({type:D.type||D.channel||"Communication",date:D.date?new Date(D.date):D.timestamp?new Date(D.timestamp):null,label:D.message||"Communication sent"})),_=[...u,...k,...U].filter(D=>D.date).sort((D,ae)=>ae.date-D.date);return _.length===0?t.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:t.jsx("p",{style:{margin:0,fontSize:"1rem"},children:"No activity recorded for this member yet."})}):t.jsx("div",{className:"payment-history-list",children:_.map((D,ae)=>t.jsxs("div",{className:"payment-history-card",children:[t.jsx("div",{className:"payment-card-header",children:t.jsxs("div",{className:"payment-card-main",children:[t.jsx("span",{className:"payment-amount",children:D.type}),t.jsx("span",{className:"payment-meta",children:D.date?.toLocaleString()})]})}),t.jsx("div",{className:"payment-card-body",children:t.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#4b5563"},children:D.label})})]},ae))})})()]}),qt==="Notes"&&t.jsxs("div",{className:"tab-panel",children:[t.jsx("h4",{children:"Internal Notes"}),t.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"12px"},children:["These notes are ",t.jsx("strong",{children:"internal only"})," and are not visible to members."]}),t.jsx("textarea",{value:kn,onChange:u=>rr(u.target.value),rows:5,className:"settings-form__input",placeholder:"Add any internal notes about this member (e.g., context, special arrangements, follow-up actions)...",disabled:ot}),!ot&&t.jsx("div",{style:{marginTop:"12px",textAlign:"right"},children:t.jsx("button",{className:"primary-btn",onClick:()=>{const u={...tn,[q.id]:kn};on(u),localStorage.setItem("memberNotes",JSON.stringify(u)),Ee("Internal note saved")},children:"Save Note"})}),ot&&t.jsx("p",{style:{marginTop:"8px",fontSize:"0.8rem",color:"#6b7280"},children:"You have read-only access. Contact an Owner or Admin to update notes."})]})]})]}),jt==="invoice-builder"&&t.jsxs("article",{className:"screen-card",id:"invoice-builder",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Ma("invoice-builder"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-file-invoice",style:{marginRight:"10px"}}),"Invoice Builder"]}),t.jsx("p",{children:"Create invoices for Lifetime or Yearly + Janaza Fund subscriptions."})]})}),ft&&Ut&&t.jsxs("div",{style:{marginBottom:"24px",padding:"24px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderRadius:"12px",border:"2px solid #5a31ea",boxShadow:"0 4px 12px rgba(90, 49, 234, 0.15)"},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"#fff"},children:""}),t.jsxs("div",{children:[t.jsx("h4",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:"#1a1a1a"},children:"Invoice Has Been Created"}),t.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"0.875rem",color:"#666"},children:["Invoice for ",Ut.memberName," - ",Ut.period," (",Ut.amount,")"]})]})]})}),t.jsxs("div",{className:"success-card-actions",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginTop:"16px"},children:[t.jsxs("button",{className:"primary-btn",onClick:()=>{Ut.member&&(Ms(Ut.member),Gt("member-detail"),Dt(!1))},style:{padding:"12px 20px",fontSize:"0.9375rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px"}}),"Member Detail"]}),t.jsxs("button",{className:"secondary-btn",onClick:async()=>{Ut.member&&await to(Ut.member)},style:{padding:"12px 20px",fontSize:"0.9375rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-envelope",style:{marginRight:"8px"}}),"Send Reminder"]}),t.jsx("button",{className:"ghost-btn",onClick:()=>{Dt(!1),he(null)},style:{padding:"12px 20px",fontSize:"0.9375rem",fontWeight:"600"},children:"Close"})]})]}),t.jsxs("form",{className:"card form-grid",onSubmit:zo,noValidate:!0,style:{padding:"40px",background:"linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)",boxShadow:"0 4px 16px rgba(90, 49, 234, 0.1)"},children:[t.jsxs("label",{style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Invoice Number"]}),t.jsx("input",{type:"text",value:Pa,readOnly:!0,className:"mono-input",style:{color:"#6b7280",background:"#f3f4f6",cursor:"not-allowed"}})]}),t.jsxs("label",{style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Member ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("div",{style:{position:"relative"},"data-member-dropdown":!0,children:[t.jsxs("div",{onClick:()=>Vi(!Cr),style:{padding:"14px 16px",border:"none",borderRadius:"10px",background:"#f8f9ff",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",color:Pt.memberId?"#1a1a1a":"#9ca3af",minHeight:"48px",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.08)",transition:"all 0.2s ease"},onMouseEnter:u=>{u.currentTarget.style.boxShadow="0 4px 8px rgba(90, 49, 234, 0.12)"},onMouseLeave:u=>{u.currentTarget.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.08)"},children:[t.jsx("span",{children:Pt.memberId?(()=>{const u=i.find(k=>k.id===Pt.memberId);return u?`${u.name} (${u.id})`:"Select Member"})():"Select Member"}),t.jsx("span",{style:{fontSize:"0.75rem",color:"#5a31ea",transition:"transform 0.2s ease",transform:Cr?"rotate(180deg)":"rotate(0deg)",display:"inline-block"},children:""})]}),Cr&&t.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#fff",border:"none",borderRadius:"10px",marginTop:"8px",maxHeight:"300px",overflow:"hidden",zIndex:1e3,boxShadow:"0 8px 24px rgba(90, 49, 234, 0.15)"},children:[t.jsxs("div",{style:{padding:"12px",borderBottom:"none",background:"linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.05)"},children:[t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:"text",placeholder:" Search member by name or ID...",value:An,onChange:u=>Wn(u.target.value),onClick:u=>u.stopPropagation(),onKeyDown:u=>u.stopPropagation(),autoFocus:!0,style:{width:"100%",padding:"12px 36px 12px 16px",border:"none",borderRadius:"4px",fontSize:"0.875rem",outline:"none",background:"#ffffff",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.08)",color:"#1a1a1a"},onFocus:u=>{u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)"},onBlur:u=>{u.target.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.08)"}}),An&&t.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),Wn("")},style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#666",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center"},title:"Clear search",children:""})]}),An&&t.jsxs("div",{style:{marginTop:"8px",fontSize:"0.75rem",color:"#666"},children:[i.filter(u=>!An||u.name?.toLowerCase().includes(An.toLowerCase())||u.id?.toLowerCase().includes(An.toLowerCase())).length," member",i.filter(u=>!An||u.name?.toLowerCase().includes(An.toLowerCase())||u.id?.toLowerCase().includes(An.toLowerCase())).length!==1?"s":""," found"]})]}),t.jsxs("div",{style:{maxHeight:"250px",overflowY:"auto"},children:[i.filter(u=>!An||u.name?.toLowerCase().includes(An.toLowerCase())||u.id?.toLowerCase().includes(An.toLowerCase())).map(u=>t.jsxs("div",{onClick:()=>{Rn({...Pt,memberId:u.id}),Vi(!1),Wn("")},style:{padding:"14px 16px",cursor:"pointer",borderBottom:"none",background:Pt.memberId===u.id?"linear-gradient(135deg, #f0f4ff 0%, #e8f0ff 100%)":"#fff",transition:"all 0.2s",boxShadow:Pt.memberId===u.id?"0 2px 4px rgba(90, 49, 234, 0.1)":"none"},onMouseEnter:k=>{Pt.memberId!==u.id&&(k.currentTarget.style.background="#f8f9ff")},onMouseLeave:k=>{Pt.memberId!==u.id&&(k.currentTarget.style.background="#fff")},children:[t.jsx("div",{style:{fontWeight:"500",color:"#1a1a1a"},children:u.name}),t.jsxs("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"2px"},children:[u.id," ",u.email?` ${u.email}`:""]})]},u.id)),i.filter(u=>!An||u.name?.toLowerCase().includes(An.toLowerCase())||u.id?.toLowerCase().includes(An.toLowerCase())).length===0&&t.jsx("div",{style:{padding:"16px",textAlign:"center",color:"#999",fontSize:"0.875rem"},children:"No members found"})]})]})]}),!Pt.memberId&&t.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"4px",display:"none"},children:"Please select a member"})]}),t.jsxs("label",{style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-id-card",style:{marginRight:"8px",color:"#5a31ea"}}),"Invoice Type ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{required:!0,value:Pt.invoiceType,onChange:u=>{const k=u.target.value;Rn({...Pt,invoiceType:k,amount:k==="Yearly + Janaza Fund"?"500":"250"})},style:{color:"#1a1a1a",background:"#ffffff",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.08)",transition:"all 0.2s"},className:"mono-input",onFocus:u=>{u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)"},onBlur:u=>{u.target.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.08)"},children:[t.jsx("option",{value:"",children:"Select Invoice Type"}),t.jsx("option",{value:"Lifetime",children:"Lifetime - $250"}),t.jsx("option",{value:"Yearly + Janaza Fund",children:"Yearly + Janaza Fund - $500"})]})]}),t.jsxs("label",{style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-calendar",style:{marginRight:"8px",color:"#5a31ea"}}),"Period ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"month",required:!0,value:Pt.period?(()=>{try{if(Pt.period.match(/^[A-Za-z]{3} \d{4}$/)){const u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],k=Pt.period.split(" "),U=k[0],_=parseInt(k[1],10),D=u.findIndex(ae=>ae.toLowerCase()===U.toLowerCase());if(D!==-1&&!isNaN(_)&&_>0){const ae=String(D+1).padStart(2,"0");return`${_}-${ae}`}}if(Pt.period.match(/^\d{4}-\d{2}$/))return Pt.period}catch(u){console.error("Error parsing period:",u)}return""})():"",onChange:u=>{const k=u.target.value;if(k&&k.match(/^\d{4}-\d{2}$/))try{const U=new Date(k+"-01");if(isNaN(U.getTime()))Rn({...Pt,period:""});else{const _=U.toLocaleDateString("en-US",{month:"short",year:"numeric"});Rn({...Pt,period:_})}}catch(U){console.error("Error formatting period:",U),Rn({...Pt,period:""})}else k||Rn({...Pt,period:""})},onFocus:u=>{u.currentTarget.select()},className:"mono-input",style:{color:"#1a1a1a"}})]}),t.jsxs("label",{style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ($) ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"number",inputMode:"numeric",required:!0,value:Pt.amount,onChange:u=>{const k=u.target.value.replace(/\\D/g,"");Rn({...Pt,amount:k})},className:"mono-input",style:{color:"#1a1a1a"}})]}),t.jsxs("label",{style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-calendar-check",style:{marginRight:"8px",color:"#5a31ea"}}),"Due Date ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"date",required:!0,value:Pt.due,onChange:u=>{const k=u.target.value;Rn({...Pt,due:k})},onBlur:u=>{const k=u.target.value;if(k){const U=new Date(k);if(isNaN(U.getTime())){Ee("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[_,D,ae]=k.split("-").map(Number);if(D<1||D>12){Ee("Invalid month. Please enter a month between 01 and 12","error");return}if(ae<1||ae>31){Ee("Invalid day. Please enter a valid day for the selected month","error");return}const le=new Date(_,D,0).getDate();if(ae>le){Ee(`Invalid date. ${D}/${_} only has ${le} days`,"error");return}}},className:"mono-input",style:{color:"#1a1a1a",borderRadius:"4px",width:"100%"}})]}),t.jsxs("label",{className:"notes",style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"8px",color:"#5a31ea"}}),"Notes"]}),t.jsx("textarea",{placeholder:"Add context for this invoice",value:Pt.notes,onChange:u=>Rn({...Pt,notes:u.target.value}),className:"mono-input",style:{color:"#1a1a1a",minHeight:"100px"}})]}),t.jsxs("div",{style:{marginBottom:"16px",padding:"16px 18px",borderRadius:"10px",background:"#f9fafb",border:"1px solid #e5e7eb",fontSize:"0.875rem",color:"#4b5563"},children:[t.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"0.95rem",color:"#111827"},children:"Invoice Preview"}),t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Invoice #:"})," ",Pa]}),t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Member:"})," ",Pt.memberId?(()=>{const u=i.find(k=>k.id===Pt.memberId);return u?`${u.name} (${u.id})`:"Not selected"})():"Not selected"]}),t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Period:"})," ",Pt.period||"N/A"]}),t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Amount:"})," ",Pt.amount?`$${Number(Pt.amount||0).toFixed(2)}`:"$0.00"]}),t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Due Date:"})," ",Pt.due?new Date(Pt.due).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"]}),t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Status:"})," Unpaid"]}),Pt.notes&&t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Notes:"})," ",Pt.notes]})]}),t.jsxs("div",{className:"form-actions",style:{marginTop:"8px",gap:"12px"},children:[t.jsxs("button",{type:"submit",className:"primary-btn",style:{padding:"14px 28px",fontSize:"1rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-file-invoice",style:{marginRight:"8px"}}),"Create Invoice"]}),t.jsx("button",{type:"button",className:"secondary-btn",onClick:async()=>{const u=i.find(Ie=>Ie.id===Pt.memberId);if(!u){Ee("Please select a member","error");return}if(!Pt.memberId||!Pt.period||!Pt.due){Ee("Please fill all required fields","error");return}const k=parseFloat(Pt.amount);if(!k||k<=0||isNaN(k)){Ee("Amount must be a positive number","error");return}const U={id:Ca(),memberId:Pt.memberId,memberName:u?.name||"",period:Pt.period,amount:`$${k.toFixed(2)}`,status:"Unpaid",due:Pt.due,method:"-",reference:"-",notes:Pt.notes||""};Pe(U),he({...U,member:u}),Dt(!0);const D=[...r.filter(Ie=>Ie.memberId===u.id&&(Ie.status==="Unpaid"||Ie.status==="Overdue")),U],ae=D.reduce((Ie,Ze)=>Ie+parseFloat(Ze.amount.replace("$","")),0),le=D.map(Ie=>` ${Ie.period}: ${Ie.amount} (Due: ${Ie.due}) - ${Ie.status}`).join(`
`),Oe=D.map(Ie=>`<li style="margin-bottom: 10px;">
                                <strong>${Ie.period}</strong>: ${Ie.amount} 
                                <span style="color: #666;">(Due: ${Ie.due})</span> - 
                                <strong>${Ie.status}</strong>
                              </li>`).join("");try{Ee("Sending reminder email...");const Ze=await fetch("http://localhost:4000/api/invoices/send-reminder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toEmail:u.email,toName:u.name,memberId:u.id,totalDue:`$${ae.toFixed(2)}`,invoiceCount:D.length,invoiceListText:le,invoiceListHTML:Oe,paymentMethods:"FPS, PayMe, Bank Transfer, Alipay, or Credit Card",portalLink:`${window.location.origin}/member`})}),Xe=await Ze.json();if(!Ze.ok)throw new Error(Xe.error||"Failed to send email");console.log(" Email sent successfully:",Xe);const It={channel:"Email",message:`Payment reminder: ${u.name} (${u.email}) - $${ae.toFixed(2)} due (${D.length} invoice${D.length>1?"s":""})`,status:"Delivered"};ge(It),Rn({memberId:"",period:Wa(),amount:"250",invoiceType:"Lifetime",due:"",notes:""}),pt(!1),Ee(` Invoice created and reminder sent to ${u.name} for $${ae.toFixed(2)}!`),he({...U,member:u}),Dt(!0)}catch(Ie){console.error(" Email send error:",Ie);const Ze={channel:"Email",message:`Reminder attempt to ${u.name} - $${ae.toFixed(2)} due`,status:"Failed"};ge(Ze),Ee(Ie.message||"Invoice created but failed to send email. Please check email configuration.","error"),he({...U,member:u}),Dt(!0)}},children:"Create & Send Reminder"})]})]})]}),jt==="automation"&&t.jsxs("article",{className:"screen-card",id:"automation",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Ma("automation"),t.jsx("h3",{children:"Reminders & Automation"}),t.jsx("p",{children:"Configure automated payment reminders and email templates."})]})}),t.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"clamp(24px, 4vw, 32px)",border:"none",marginTop:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:"clamp(16px, 3vw, 24px)",flexWrap:"wrap"},children:[t.jsxs("div",{style:{flex:"1 1 300px",minWidth:"250px"},children:[t.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"clamp(1.25rem, 3vw, 1.5rem)",fontWeight:"700",color:"#000"},children:"Automation Control"}),t.jsx("p",{style:{margin:0,fontSize:"clamp(0.875rem, 2vw, 0.9375rem)",color:"#666",lineHeight:"1.6"},children:"Enable or disable automated payment reminders system-wide"})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"clamp(12px, 2vw, 16px)",flexShrink:0},children:[t.jsx("span",{style:{fontSize:"clamp(0.75rem, 1.5vw, 0.875rem)",fontWeight:"600",color:j?"#000":"#999",textTransform:"uppercase",letterSpacing:"0.5px",minWidth:"28px",textAlign:"right"},children:j?"ON":"OFF"}),t.jsx("button",{type:"button",role:"switch","aria-checked":j,onClick:async()=>{const u=!j;A(u);try{await fetch("http://localhost:4000/api/email-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Kt,automationEnabled:u})}),Ee(u?"Automation enabled!":"Automation disabled!")}catch(k){console.error("Error saving automation status:",k),Ee("Failed to save automation status","error"),A(!u)}},style:{position:"relative",width:"clamp(60px, 8vw, 72px)",height:"clamp(34px, 5vw, 40px)",borderRadius:"999px",border:"none",background:j?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#f3f4f6",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",outline:"none",padding:0,display:"flex",alignItems:"center",boxShadow:j?"0 4px 12px rgba(0,0,0,0.15)":"inset 0 2px 4px rgba(0,0,0,0.1)",WebkitTapHighlightColor:"transparent"},onMouseEnter:u=>{u.currentTarget.style.transform="scale(1.05)"},onMouseLeave:u=>{u.currentTarget.style.transform="scale(1)"},children:t.jsx("span",{style:{position:"absolute",width:"clamp(26px, 4vw, 30px)",height:"clamp(26px, 4vw, 30px)",borderRadius:"50%",background:j?"#ffffff":"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",left:j?"auto":"4px",right:j?"4px":"auto",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",border:"1px solid rgba(0,0,0,0.1)"}})})]})]})}),t.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"clamp(24px, 4vw, 32px)",border:"none",marginTop:"24px",boxShadow:"0 4px 12px rgba(90, 49, 234, 0.12)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{children:[t.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"clamp(1.25rem, 3vw, 1.5rem)",fontWeight:"700",color:"#000"},children:"Outstanding Members"}),t.jsx("p",{style:{margin:0,fontSize:"clamp(0.875rem, 2vw, 0.9375rem)",color:"#666",lineHeight:"1.6"},children:"Send manual reminder emails or WhatsApp messages to members with outstanding invoices"})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("button",{type:"button",onClick:()=>{wn.includes("Email")?wa(u=>u.filter(k=>k!=="Email")):wa(u=>[...u,"Email"])},disabled:tr||ur||!Y,title:"Email",style:{padding:"12px",borderRadius:"8px",fontWeight:"600",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:tr||ur||!Y?"not-allowed":"pointer",transition:"all 0.2s ease",background:wn.includes("Email")?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#ffffff",color:wn.includes("Email")?"#ffffff":"#6b7280",border:wn.includes("Email")?"2px solid #5a31ea":"2px solid #e5e7eb",boxShadow:wn.includes("Email")?"0 2px 8px rgba(90, 49, 234, 0.3)":"none",opacity:tr||ur||!Y?.5:1,width:"48px",height:"48px"},onMouseEnter:u=>{!tr&&!ur&&Y&&!wn.includes("Email")&&(u.target.style.background="#f3f4f6",u.target.style.color="#374151")},onMouseLeave:u=>{!tr&&!ur&&Y&&!wn.includes("Email")&&(u.target.style.background="#ffffff",u.target.style.color="#6b7280")},children:t.jsx("i",{className:"fas fa-envelope"})}),t.jsx("button",{type:"button",onClick:()=>{wn.includes("WhatsApp")?wa(u=>u.filter(k=>k!=="WhatsApp")):wa(u=>[...u,"WhatsApp"])},disabled:tr||ur||!Y,title:"WhatsApp",style:{padding:"12px",borderRadius:"8px",fontWeight:"600",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:tr||ur||!Y?"not-allowed":"pointer",transition:"all 0.2s ease",background:wn.includes("WhatsApp")?"linear-gradient(135deg, #25D366 0%, #128C7E 100%)":"#ffffff",color:wn.includes("WhatsApp")?"#ffffff":"#25D366",border:(wn.includes("WhatsApp"),"2px solid #25D366"),boxShadow:wn.includes("WhatsApp")?"0 2px 8px rgba(37, 211, 102, 0.3)":"none",opacity:tr||ur||!Y?.5:1,width:"48px",height:"48px"},onMouseEnter:u=>{!tr&&!ur&&Y&&!wn.includes("WhatsApp")&&(u.target.style.background="#dcfce7",u.target.style.color="#16a34a")},onMouseLeave:u=>{!tr&&!ur&&Y&&!wn.includes("WhatsApp")&&(u.target.style.background="#ffffff",u.target.style.color="#25D366")},children:t.jsx("i",{className:"fab fa-whatsapp"})}),wn.length>0&&t.jsx("button",{className:"primary-btn",onClick:Ll,disabled:tr||ur||!Y,style:{padding:"12px 20px",borderRadius:"4px",fontWeight:"600",fontSize:"0.875rem",opacity:tr||ur||!Y?.5:1,cursor:tr||ur||!Y?"not-allowed":"pointer"},children:tr||ur?"Sending...":"Send All"})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[i.filter(u=>r.filter(U=>U.memberId===u.id&&(U.status==="Unpaid"||U.status==="Overdue")).length>0).map(u=>{const k=r.filter(le=>le.memberId===u.id&&(le.status==="Unpaid"||le.status==="Overdue")),U=k.reduce((le,Oe)=>{const Ie=parseFloat(Oe.amount?.replace(/[^0-9.]/g,"")||0);return le+Ie},0),_=k.filter(le=>le.status==="Overdue").length,D=k.filter(le=>le.status==="Unpaid").length,ae=Mo[u.id];return t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",background:"#f9f9f9",borderRadius:"4px",border:"1px solid #e0e0e0",gap:"16px",flexWrap:"wrap"},children:[t.jsxs("div",{style:{flex:"1 1 300px",minWidth:"200px"},children:[t.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#000",marginBottom:"4px"},children:u.name}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"4px"},children:u.email}),t.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"0.8125rem",color:"#666"},children:[t.jsxs("span",{children:[t.jsxs("strong",{style:{color:"#000"},children:["$",U.toFixed(2)]})," outstanding"]}),_>0&&t.jsxs("span",{style:{color:"#ef4444",fontWeight:"600"},children:[_," overdue"]}),D>0&&t.jsxs("span",{style:{color:"#ef4444",fontWeight:"600"},children:[D," unpaid"]})]})]}),t.jsx("div",{style:{display:"flex",gap:"8px",flexShrink:0},children:t.jsx("button",{className:"secondary-btn",onClick:()=>Ql(u,!1),disabled:ae||is[u.id],style:{padding:"12px 20px",borderRadius:"4px",fontWeight:"600",fontSize:"0.875rem",opacity:ae||is[u.id]?.5:1,cursor:ae||is[u.id]?"not-allowed":"pointer"},children:ae||is[u.id]?"Sending...":" Send Reminder"})})]},u.id)}),i.filter(u=>r.filter(U=>U.memberId===u.id&&(U.status==="Unpaid"||U.status==="Overdue")).length>0).length===0&&t.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#666",fontSize:"0.9375rem"},children:"No members with outstanding invoices"})]})]}),t.jsxs("div",{style:{marginTop:"32px"},children:[t.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"1.25rem",fontWeight:"700",color:"#000"},children:"Email Template"}),t.jsxs("div",{style:{background:"#fff",border:"none",borderRadius:"12px",padding:"32px",boxShadow:"0 4px 12px rgba(90, 49, 234, 0.12)"},children:[t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Email Subject"}),t.jsx("input",{type:"text",value:oi.subject,onChange:u=>_o({...oi,subject:u.target.value}),placeholder:"Payment Reminder - Outstanding Balance",style:{width:"100%",padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}}),t.jsxs("small",{style:{display:"block",marginTop:"6px",fontSize:"0.75rem",color:"#666"},children:["You can use placeholders: ","{{member_name}}",", ","{{total_due}}",", ","{{invoice_count}}"]})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"HTML Email Template"}),t.jsx("textarea",{value:oi.htmlTemplate,onChange:u=>_o({...oi,htmlTemplate:u.target.value}),rows:20,style:{width:"100%",padding:"14px",border:"1.5px solid #e0e0e0",borderRadius:"10px",fontSize:"0.875rem",fontFamily:"monospace",resize:"vertical",transition:"all 0.2s ease"},onFocus:u=>{u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)",u.target.style.boxShadow="0 0 0 3px rgba(0,0,0,0.05)"},onBlur:u=>{u.target.style.borderColor="#e0e0e0",u.target.style.boxShadow="none"},placeholder:"Enter HTML email template..."}),t.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"#f8f9fa",borderRadius:"4px",fontSize:"0.75rem",color:"#666"},children:[t.jsx("strong",{children:"Available Placeholders:"}),t.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[t.jsxs("li",{children:[t.jsx("code",{children:"{{member_name}}"})," - Member's full name"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{member_id}}"})," - Member ID"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{member_email}}"})," - Member email"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{total_due}}"})," - Total outstanding amount"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{invoice_count}}"})," - Number of unpaid invoices"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{invoice_list}}"})," - HTML list of invoices"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{payment_methods}}"})," - Payment methods list"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{portal_link}}"})," - Member portal URL"]})]})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",paddingTop:"16px",borderTop:"1px solid #e0e0e0"},children:[t.jsx("button",{className:"secondary-btn",onClick:Qs,style:{padding:"12px 24px",borderRadius:"4px",fontWeight:"600"},children:" Preview Template"}),t.jsx("button",{className:"primary-btn",onClick:jl,style:{padding:"12px 24px",borderRadius:"4px",fontWeight:"600"},children:" Save Email Template"})]})]})]}),t.jsxs("div",{id:"email-config-section",style:{marginTop:"32px"},children:[t.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"1.25rem",fontWeight:"700",color:"#000"},children:"Email Automation Configuration"}),t.jsxs("div",{style:{background:"#fff",border:"none",borderRadius:"12px",padding:"32px",boxShadow:"0 4px 12px rgba(90, 49, 234, 0.12)"},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px",marginBottom:"24px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Email Service"}),t.jsxs("select",{value:Kt.emailService,onChange:u=>Ha({...Kt,emailService:u.target.value}),style:{width:"100%",padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"},children:[t.jsx("option",{value:"gmail",children:"Gmail"}),t.jsx("option",{value:"outlook",children:"Outlook"}),t.jsx("option",{value:"yahoo",children:"Yahoo"}),t.jsx("option",{value:"custom",children:"Custom SMTP"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:["Email Address ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"email",value:Kt.emailUser,onChange:u=>Ha({...Kt,emailUser:u.target.value}),placeholder:"your-email@gmail.com",style:{width:"100%",padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:["App Password ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:js?"text":"password",value:Kt.emailPassword,onChange:u=>Ha({...Kt,emailPassword:u.target.value}),placeholder:"Enter app password",style:{width:"100%",padding:"12px",paddingRight:"45px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}}),t.jsx("button",{type:"button",onClick:()=>Io(!js),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666"},"aria-label":js?"Hide password":"Show password",children:js?t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),t.jsx("small",{style:{display:"block",marginTop:"6px",fontSize:"0.75rem",color:"#666"},children:"For Gmail: Use App Password (not regular password)"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Schedule Time"}),t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t.jsx("input",{type:"time",value:Kt.scheduleTime,onChange:u=>{const k=u.target.value;Ha({...Kt,scheduleTime:k});const[U]=k.split(":").map(Number);li(U>=12?"PM":"AM")},style:{flex:1,padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}}),t.jsxs("select",{value:Va,onChange:u=>{const k=u.target.value;li(k);const[U,_]=Kt.scheduleTime.split(":").map(Number);let D=U;k==="AM"&&U===12?D=0:k==="PM"&&U!==12?D=U+12:k==="AM"&&U>=12?D=U-12:k==="PM"&&U<12&&(D=U+12);const ae=`${D.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`;Ha({...Kt,scheduleTime:ae})},style:{padding:"12px 16px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit",background:"white",cursor:"pointer",fontWeight:"500"},children:[t.jsx("option",{value:"AM",children:"AM"}),t.jsx("option",{value:"PM",children:"PM"})]})]}),t.jsxs("small",{style:{display:"block",marginTop:"6px",fontSize:"0.75rem",color:"#666"},children:["Daily reminder time (24-hour format stored: ",Kt.scheduleTime,")"]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Reminder Interval (days)"}),t.jsx("input",{type:"number",min:"1",max:"30",value:Kt.reminderInterval,onChange:u=>Ha({...Kt,reminderInterval:parseInt(u.target.value)||7}),style:{width:"100%",padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}}),t.jsx("small",{style:{display:"block",marginTop:"6px",fontSize:"0.75rem",color:"#666"},children:"Days between reminder emails (min: 1, max: 30)"})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",paddingTop:"16px",borderTop:"1px solid #e0e0e0"},children:[t.jsx("button",{className:"secondary-btn",onClick:Do,disabled:Wi||!Kt.emailUser||!Kt.emailPassword,style:{padding:"12px 24px",borderRadius:"4px",fontWeight:"600",opacity:Wi||!Kt.emailUser||!Kt.emailPassword?.5:1,cursor:Wi||!Kt.emailUser||!Kt.emailPassword?"not-allowed":"pointer"},children:Wi?"Sending...":" Test Email"}),t.jsx("button",{className:"primary-btn",onClick:Jo,style:{padding:"12px 24px",borderRadius:"4px",fontWeight:"600"},children:" Save Email Settings"})]})]})]}),t.jsx("div",{style:{marginTop:"32px",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{className:"primary-btn",onClick:wl,disabled:fs,style:{padding:"12px 24px",fontSize:"0.9375rem",fontWeight:"600",borderRadius:"4px",color:"#ffffff",opacity:fs?.6:1,cursor:fs?"not-allowed":"pointer"},children:fs?t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#ffffff"},children:[t.jsxs("svg",{style:{animation:"spin 1s linear infinite",width:"16px",height:"16px"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),t.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Saving..."]}):t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#ffffff"},children:[t.jsx("i",{className:"fas fa-save"}),"Save All Settings"]})})})]}),jt==="communications"&&t.jsxs("article",{className:"screen-card",id:"communications",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Ma("communications"),t.jsx("h3",{children:"Reminders Log"}),t.jsx("p",{children:"See all reminder emails and WhatsApp messages sent to members."})]})}),(()=>{const u=(C||[]).map(Ze=>{const Xe=Ze.status?String(Ze.status).trim():"",It=Xe.toLowerCase();let vt="Delivered";return It==="failed"?vt="Failed":It==="pending"?vt="Pending":Xe&&(vt=Xe),{status:vt}}),k=(g||[]).filter(Ze=>Ze.channel==="WhatsApp").map(Ze=>({status:(Ze.status?String(Ze.status).trim():"")||"Delivered"})),U=[...u,...k],_=U.length,D=u.length,ae=k.length,le=U.filter(Ze=>Ze.status==="Delivered").length,Oe=U.filter(Ze=>Ze.status==="Failed").length,Ie=U.filter(Ze=>Ze.status==="Pending").length;return t.jsxs("div",{className:"kpi-grid",style:{marginBottom:"24px"},children:[t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-bell",style:{marginRight:"8px",color:"#5a31ea"}}),"Total Reminders"]}),t.jsx("h4",{children:yr(_)})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-envelope",style:{marginRight:"8px",color:"#5a31ea"}}),"Email Reminders"]}),t.jsx("h4",{children:yr(D)})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fab fa-whatsapp",style:{marginRight:"8px",color:"#25D366"}}),"WhatsApp Reminders"]}),t.jsx("h4",{children:yr(ae)})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-check-circle",style:{marginRight:"8px",color:"#10b981"}}),"Delivered"]}),t.jsx("h4",{style:{color:"#10b981"},children:yr(le)})]}),Oe>0&&t.jsxs("div",{className:"card kpi",style:{background:"linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)",border:"1px solid #ef4444"},children:[t.jsxs("p",{style:{color:"#ef4444"},children:[t.jsx("i",{className:"fas fa-times-circle",style:{marginRight:"8px",color:"#ef4444"}}),"Failed"]}),t.jsx("h4",{style:{color:"#ef4444"},children:yr(Oe)})]}),Ie>0&&t.jsxs("div",{className:"card kpi",style:{background:"linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)",border:"1px solid #ef4444"},children:[t.jsxs("p",{style:{color:"#ef4444"},children:[t.jsx("i",{className:"fas fa-clock",style:{marginRight:"8px",color:"#ef4444"}}),"Pending"]}),t.jsx("h4",{style:{color:"#ef4444"},children:yr(Ie)})]})]})})(),t.jsxs("div",{className:"card",children:[t.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"16px",flexWrap:"wrap",alignItems:"center"},children:[t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a"},children:"Filter by Status:"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Delivered",label:"Delivered"},{value:"Failed",label:"Failed"},{value:"Pending",label:"Pending"}].map(u=>t.jsx("button",{type:"button",onClick:()=>{Js(u.value),gi(1)},style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:Hr===u.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:Hr===u.value?"#ffffff":"#6b7280",boxShadow:Hr===u.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{Hr!==u.value&&(k.target.style.background="#e5e7eb",k.target.style.color="#374151")},onMouseLeave:k=>{Hr!==u.value&&(k.target.style.background="transparent",k.target.style.color="#6b7280")},children:u.label},u.value))})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a"},children:"Filter by Channel:"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Email",label:"Email"},{value:"WhatsApp",label:"WhatsApp"}].map(u=>t.jsx("button",{type:"button",onClick:()=>{yo(u.value),gi(1)},style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:da===u.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:da===u.value?"#ffffff":"#6b7280",boxShadow:da===u.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{da!==u.value&&(k.target.style.background="#e5e7eb",k.target.style.color="#374151")},onMouseLeave:k=>{da!==u.value&&(k.target.style.background="transparent",k.target.style.color="#6b7280")},children:u.label},u.value))})]})]}),(()=>{const u=(C||[]).map(D=>({memberName:(i.find(le=>le.id===D.memberId)||i.find(le=>le.email&&D.memberEmail&&le.email.toLowerCase()===D.memberEmail.toLowerCase()))?.name||D.memberEmail||"N/A",memberId:D.memberId,channel:"Email",type:D.reminderType==="overdue"?"Overdue (auto/manual)":"Upcoming (auto/manual)",message:`Email reminder - ${D.amount}  ${D.invoiceCount} invoice(s)`,date:D.sentAt?new Date(D.sentAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",status:(()=>{const le=D.status?String(D.status).trim():"",Oe=le.toLowerCase();return Oe==="failed"?"Failed":Oe==="pending"?"Pending":le||"Delivered"})(),rawDate:D.sentAt||null,raw:D})),k=(g||[]).filter(D=>D.channel==="WhatsApp").map(D=>{const le=(D.status?String(D.status).trim():"")||"Delivered";return{memberName:D.memberName||D.member||"N/A",memberId:D.memberId,channel:"WhatsApp",type:D.type||"Manual Outstanding Reminder",message:D.message,date:D.date,status:le,rawDate:D.timestamp||null,raw:D}});let U=[...u,...k];U=U.filter(D=>{const ae=D.status?String(D.status).trim():"Delivered";let le=!1;if(Hr==="All")le=!0;else{const Ze=Hr.toLowerCase(),Xe=ae.toLowerCase();le=Ze===Xe}const Oe=D.channel?String(D.channel).trim():"";return le&&(da==="All"||Oe===da)}),U.sort((D,ae)=>{const le=D.rawDate?new Date(D.rawDate).getTime():0;return(ae.rawDate?new Date(ae.rawDate).getTime():0)-le});const _=U.length;if(_===0){const D=(C||[]).map(Ie=>{const Ze=Ie.status?String(Ie.status).trim():"",Xe=Ze.toLowerCase();let It="Delivered";return Xe==="failed"?It="Failed":Xe==="pending"?It="Pending":Ze&&(It=Ze),{status:It,channel:"Email"}}),ae=(g||[]).filter(Ie=>Ie.channel==="WhatsApp").map(Ie=>({status:Ie.status||"Delivered",channel:"WhatsApp"})),le=D.length+ae.length;let Oe="No reminders have been sent yet.";return le>0&&(Hr!=="All"&&da!=="All"?Oe=`No ${Hr.toLowerCase()} ${da.toLowerCase()} reminders found.`:Hr!=="All"?Oe=`No ${Hr.toLowerCase()} reminders found.`:da!=="All"&&(Oe=`No ${da.toLowerCase()} reminders found.`)),t.jsx("div",{style:{padding:"32px 20px",textAlign:"center",color:"#666"},children:t.jsx("p",{style:{margin:0},children:Oe})})}return t.jsx(t.Fragment,{children:(()=>{const D=Math.max(ls,10),ae=Math.max(1,Math.ceil(_/D)),le=Math.min(Ki,ae),Oe=(le-1)*D,Ie=Oe+D,Ze=U.slice(Oe,Ie);return t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{className:"table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Member"}),t.jsx("th",{children:"Channel"}),t.jsx("th",{children:"Type"}),t.jsx("th",{children:"Message"}),t.jsx("th",{children:"Date"}),t.jsx("th",{children:"Status"}),t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:Ze.map((Xe,It)=>t.jsxs("tr",{children:[t.jsxs("td",{children:[Xe.memberName||Xe.member||"N/A",Xe.memberId?` (${Xe.memberId})`:""]}),t.jsx("td",{children:Xe.channel||"N/A"}),t.jsx("td",{children:Xe.type||"-"}),t.jsx("td",{style:{maxWidth:"320px",whiteSpace:"normal"},children:Xe.message||"N/A"}),t.jsx("td",{children:Xe.date||"N/A"}),t.jsx("td",{children:t.jsx("span",{className:zi[Xe.status]||"badge",children:Xe.status||"N/A"})}),t.jsx("td",{children:t.jsxs("div",{style:{display:"flex",gap:"6px"},children:[t.jsx("button",{type:"button",className:"icon-btn icon-btn--view",title:"View full message","aria-label":"View full message",onClick:()=>{const vt=[`Member: ${Xe.memberName||"N/A"}`,`Channel: ${Xe.channel||"N/A"}`,`Type: ${Xe.type||"-"}`,`Date: ${Xe.date||"N/A"}`,"","Message:",Xe.message||"N/A"].join(`
`);window.alert(vt)},children:t.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),Xe.channel==="Email"&&Xe.status==="Failed"&&!ot&&t.jsx("button",{type:"button",className:"icon-btn icon-btn--edit",title:"Retry sending","aria-label":"Retry sending reminder",onClick:async()=>{try{const vt=Xe.raw,Dn=vt?._id||vt?.id,gr=await fetch("http://localhost:4000/api/reminders/retry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reminderId:Dn})}),Vr=await gr.json();gr.ok?(Ee(Vr.message||"Reminder retry queued"),typeof G=="function"&&G()):Ee(Vr.error||"Failed to retry reminder","error")}catch(vt){console.error("Retry reminder failed",vt),Ee("Failed to retry reminder","error")}},children:t.jsx("i",{className:"fas fa-redo","aria-hidden":"true"})})]})})]},`${Xe.memberId||Xe.memberName||"row"}-${Oe+It}`))})]})}),t.jsxs("div",{style:{marginTop:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[t.jsxs("div",{style:{fontSize:"0.875rem",color:"#555"},children:["Showing"," ",t.jsxs("strong",{children:[Oe+1,"-",Math.min(Ie,_)]})," ","of ",t.jsx("strong",{children:_})," reminders"]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("button",{type:"button",className:"secondary-btn",disabled:le<=1,onClick:()=>gi(Math.max(1,le-1)),children:"Previous"}),t.jsxs("span",{style:{fontSize:"0.875rem"},children:["Page ",t.jsx("strong",{children:le})," of ",t.jsx("strong",{children:ae})]}),t.jsx("button",{type:"button",className:"secondary-btn",disabled:le>=ae,onClick:()=>gi(Math.min(ae,le+1)),children:"Next"})]})]})]})})()})})()]})]}),jt==="payment-methods"&&t.jsxs("article",{className:"screen-card",id:"payment-methods",children:[t.jsxs("header",{className:"screen-card__header",children:[t.jsxs("div",{children:[t.jsx("h3",{children:"Payment Methods"}),t.jsx("p",{children:"Configure payment methods and QR codes for member payments."})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",padding:"8px 16px",background:"#f8f9fa",borderRadius:"8px",fontSize:"0.875rem"},children:[t.jsx("span",{style:{color:"#666"},children:"Active Methods:"}),t.jsx("strong",{style:{color:"#000"},children:p.filter(u=>(u.name==="Alipay"||u.name==="PayMe"||u.name==="FPS"||u.name==="Direct Bank Transfer")&&u.visible).length})]})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"24px",marginTop:"32px"},children:p.filter(u=>u.name==="Alipay"||u.name==="PayMe"||u.name==="FPS"||u.name==="Direct Bank Transfer").map(u=>{const k=u.name==="Alipay"||u.name==="PayMe",U=async(_,D)=>{const ae=_.target.files[0];if(ae){if(!ae.type.startsWith("image/")){Ee("Please upload an image file","error");return}Ln(le=>({...le,[D]:!0}));try{const le="http://localhost:4000",Oe=new FormData;Oe.append("screenshot",ae),Oe.append("uploadType","qr-code");const Ie=await fetch(`${le}/api/upload/screenshot`,{method:"POST",body:Oe});if(!Ie.ok){let It="Failed to upload QR code";try{const vt=await Ie.json();It=vt.error||It,console.error("Upload error response:",vt)}catch(vt){console.error("Failed to parse error response:",vt),It=`Upload failed with status ${Ie.status}`}throw new Error(It)}const Ze=await Ie.json();if(!Ze.url)throw new Error("No URL returned from upload. Please try again.");const Xe=Ze.url;await B(D,{qrImageUrl:Xe}),Ee(`${D} QR code uploaded successfully!`)}catch(le){console.error("Error uploading QR code:",le),Ee(le.message||"Failed to upload QR code. Please try again.","error")}finally{Ln(le=>({...le,[D]:!1}))}}};return t.jsxs("div",{style:{background:"#fff",border:"none",borderRadius:"20px",padding:"28px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",boxShadow:u.visible?"0 10px 30px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.05)":"0 2px 8px rgba(0,0,0,0.04)",display:"flex",flexDirection:"column",gap:"20px",overflow:"hidden"},onMouseEnter:_=>{u.visible&&(_.currentTarget.style.boxShadow="0 12px 36px rgba(0,0,0,0.12), 0 0 0 1px rgba(0,0,0,0.08)",_.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:_=>{u.visible&&(_.currentTarget.style.boxShadow="0 10px 30px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.05)",_.currentTarget.style.transform="translateY(0)")},children:[t.jsx("div",{onClick:async()=>{try{await B(u.name,{visible:!u.visible})}catch(_){console.error("Error updating payment method:",_)}},style:{position:"absolute",top:"20px",right:"20px",padding:"6px 14px",borderRadius:"20px",fontSize:"0.7rem",fontWeight:"700",background:u.visible?"linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%)":"#f5f5f5",color:u.visible?"#1b5e20":"#757575",textTransform:"uppercase",letterSpacing:"0.8px",cursor:"pointer",transition:"all 0.2s ease",userSelect:"none",border:u.visible?"1px solid #a5d6a7":"1px solid #e0e0e0",boxShadow:u.visible?"0 2px 4px rgba(0,0,0,0.1)":"none"},onMouseEnter:_=>{_.target.style.transform="scale(1.08)",_.target.style.boxShadow=u.visible?"0 4px 8px rgba(0,0,0,0.15)":"0 2px 4px rgba(0,0,0,0.1)"},onMouseLeave:_=>{_.target.style.transform="scale(1)",_.target.style.boxShadow=u.visible?"0 2px 4px rgba(0,0,0,0.1)":"none"},children:u.visible?" Active":" Inactive"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"18px",marginBottom:"4px",paddingBottom:"20px",borderBottom:"1px solid #e5e7eb"},children:[t.jsxs("div",{style:{width:"64px",height:"64px",borderRadius:"16px",background:u.name==="Alipay"?"linear-gradient(135deg, #1677FF 0%, #0958d9 100%)":u.name==="PayMe"?"linear-gradient(135deg, #00C300 0%, #009900 100%)":u.name==="FPS"?"linear-gradient(135deg, #0066CC 0%, #004499 100%)":"linear-gradient(135deg, #E60012 0%, #CC0011 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"28px",fontWeight:"700",color:"#fff",boxShadow:"0 6px 16px rgba(0,0,0,0.15)",position:"relative"},children:[u.name==="Alipay"?"A":u.name==="PayMe"?"P":u.name==="FPS"?"F":"B",u.visible&&t.jsx("div",{style:{position:"absolute",top:"-4px",right:"-4px",width:"18px",height:"18px",borderRadius:"50%",background:"#4caf50",border:"2px solid #fff",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{style:{fontSize:"10px",color:"#fff"},children:""})})]}),t.jsxs("div",{style:{flex:1},children:[t.jsx("h4",{style:{margin:0,fontSize:"1.625rem",fontWeight:"700",color:"#000",letterSpacing:"-0.5px",marginBottom:"6px"},children:u.name==="Direct Bank Transfer"?"Bank Transfer":u.name}),t.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666",fontWeight:"500"},children:u.name==="Alipay"?"Alipay HK":u.name==="PayMe"?"PayMe by HSBC":u.name==="FPS"?"Faster Payment System":"Direct Bank Transfer"})]})]}),k?t.jsx("div",{style:{background:"linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%)",borderRadius:"16px",padding:"28px",border:u.qrImageUrl?"1px solid #e0e0e0":"2px dashed #d0d0d0",minHeight:"300px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"20px",position:"relative",transition:"all 0.3s ease"},children:u.qrImageUrl?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{padding:"16px",background:"#fff",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0"},children:t.jsx("img",{src:u.qrImageUrl,alt:`${u.name} QR Code`,style:{maxWidth:"260px",maxHeight:"260px",width:"100%",height:"auto",borderRadius:"4px",display:"block",objectFit:"contain"}})}),t.jsx("button",{onClick:()=>{const _=document.createElement("input");_.type="file",_.accept="image/*",_.onchange=D=>U(D,u.name),_.click()},disabled:qr[u.name],style:{padding:"10px 20px",background:"#fff",border:"none",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.1)",borderRadius:"4px",fontSize:"0.875rem",fontWeight:"600",cursor:qr[u.name]?"not-allowed":"pointer",transition:"all 0.2s ease",color:"#000",opacity:qr[u.name]?.6:1},onMouseEnter:_=>{qr[u.name]||(_.target.style.background="#000",_.target.style.color="#fff",_.target.style.transform="translateY(-2px)",_.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)")},onMouseLeave:_=>{qr[u.name]||(_.target.style.background="#fff",_.target.style.color="#000",_.target.style.transform="translateY(0)",_.target.style.boxShadow="none")},children:qr[u.name]?" Uploading...":" Change QR Code"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"40px",color:"#bbb",marginBottom:"12px",border:"2px dashed #d0d0d0"},children:""}),t.jsx("p",{style:{margin:0,fontSize:"0.9375rem",color:"#666",textAlign:"center",marginBottom:"4px",fontWeight:"500"},children:"No QR code uploaded"}),t.jsx("p",{style:{margin:0,fontSize:"0.8125rem",color:"#999",textAlign:"center",marginBottom:"16px"},children:"Upload a QR code image to enable this payment method"}),t.jsxs("label",{style:{padding:"12px 24px",background:"linear-gradient(135deg, #1a1a1a 0%, #374151 100%)",color:"#fff",borderRadius:"10px",fontSize:"0.875rem",fontWeight:"600",cursor:qr[u.name]?"not-allowed":"pointer",display:"inline-block",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",opacity:qr[u.name]?.6:1},onMouseEnter:_=>{qr[u.name]||(_.target.style.transform="translateY(-2px)",_.target.style.boxShadow="0 6px 16px rgba(0,0,0,0.2)")},onMouseLeave:_=>{qr[u.name]||(_.target.style.transform="translateY(0)",_.target.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)")},children:[qr[u.name]?" Uploading...":" Upload QR Code",t.jsx("input",{type:"file",accept:"image/*",onChange:_=>U(_,u.name),style:{display:"none"},disabled:qr[u.name]})]})]})}):t.jsxs("div",{style:{background:"linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%)",borderRadius:"16px",padding:"24px",border:"1px solid #e0e0e0"},children:[t.jsxs("div",{style:{fontSize:"0.8125rem",fontWeight:"700",color:"#666",marginBottom:"18px",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Payment Details"})]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:u.details&&u.details.map((_,D)=>t.jsx("div",{style:{padding:"16px 18px",background:"#fff",borderRadius:"10px",fontSize:"0.9375rem",color:"#333",borderLeft:"4px solid #5a31ea",fontWeight:"500",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",transition:"all 0.2s ease"},onMouseEnter:ae=>{ae.currentTarget.style.boxShadow="0 4px 10px rgba(0,0,0,0.1)",ae.currentTarget.style.transform="translateX(4px)"},onMouseLeave:ae=>{ae.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.06)",ae.currentTarget.style.transform="translateX(0)"},children:_},`${u.name}-detail-${D}`))})]}),t.jsxs("div",{onClick:async()=>{try{await B(u.name,{visible:!u.visible})}catch(_){console.error("Error updating payment method:",_)}},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"18px 20px",background:u.visible?"linear-gradient(135deg, #f8f9ff 0%, #e8f0ff 100%)":"#f9fafb",borderRadius:"12px",border:`2px solid ${u.visible?"#2196F3":"#e0e0e0"}`,cursor:"pointer",transition:"all 0.3s ease",marginTop:"4px"},onMouseEnter:_=>{_.currentTarget.style.background=u.visible?"linear-gradient(135deg, #bbdefb 0%, #90caf9 100%)":"#f3f4f6",_.currentTarget.style.borderColor=u.visible?"#1976D2":"#ccc",_.currentTarget.style.transform="scale(1.01)"},onMouseLeave:_=>{_.currentTarget.style.background=u.visible?"linear-gradient(135deg, #f8f9ff 0%, #e8f0ff 100%)":"#fafafa",_.currentTarget.style.borderColor=u.visible?"#2196F3":"#e0e0e0",_.currentTarget.style.transform="scale(1)"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("span",{style:{fontSize:"0.9375rem",fontWeight:"700",color:u.visible?"#1565C0":"#666",display:"block",marginBottom:"6px"},children:u.visible?" Enabled for members":" Disabled for members"}),t.jsx("span",{style:{fontSize:"0.8125rem",color:u.visible?"#1976D2":"#999",lineHeight:"1.4"},children:u.visible?"This payment method is visible to all members":"This payment method is hidden from members"})]}),t.jsxs("label",{className:"switch",style:{margin:0,marginLeft:"16px"},onClick:_=>_.stopPropagation(),children:[t.jsx("input",{type:"checkbox",checked:u.visible,onChange:async _=>{_.stopPropagation();try{await B(u.name,{visible:_.target.checked})}catch(D){console.error("Error updating payment method:",D)}},tabIndex:-1,onFocus:_=>_.target.blur()}),t.jsx("span",{})]})]})]},u.name)})})]}),jt==="payment-approvals"&&t.jsxs("article",{className:"screen-card",id:"payment-approvals",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("h3",{children:"Payment Approvals"}),t.jsx("p",{children:"Review and approve member payment submissions."})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("button",{className:"primary-btn",onClick:()=>{sa(!0),la(null),dn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},children:"+ Add Payment"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Pending",label:"Pending"},{value:"Completed",label:"Approved"},{value:"Rejected",label:"Rejected"}].map(u=>t.jsx("button",{type:"button",onClick:()=>Ei(u.value),style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:Fn===u.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:Fn===u.value?"#ffffff":"#6b7280",boxShadow:Fn===u.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{Fn!==u.value&&(k.target.style.background="#e5e7eb",k.target.style.color="#374151")},onMouseLeave:k=>{Fn!==u.value&&(k.target.style.background="transparent",k.target.style.color="#6b7280")},children:u.label},u.value))}),t.jsxs("div",{style:{padding:"10px 16px",background:"#fee2e2",borderRadius:"4px",fontSize:"0.875rem",fontWeight:"600",color:"#ef4444",border:"1px solid #ef4444"},children:[" Pending: ",(o||[]).filter(u=>u.status==="Pending").length]})]})]})}),ss&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:u=>{u.target,u.currentTarget},children:t.jsxs("div",{className:"card",style:{maxWidth:"640px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative",background:"#ffffff"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t.jsx("h4",{style:{margin:0},children:oa?"Edit Payment":"Add New Payment"}),t.jsx("button",{className:"ghost-btn",type:"button",onClick:()=>{mi({memberId:!1,amount:!1,method:!1,screenshot:!1}),As(null),sa(!1),la(null),dn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},style:{fontSize:"1.5rem",lineHeight:1,color:"#ef4444",fontWeight:"bold",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",border:"1px solid #ef4444",background:"transparent",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:u=>{u.target.style.background="#fee2e2"},onMouseLeave:u=>{u.target.style.background="transparent"},children:""})]}),t.jsxs("form",{className:"form-grid",onSubmit:oa?Zs:Ko,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Member ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{value:kt.memberId,onChange:u=>{const k=i.find(U=>U.id===u.target.value);dn({...kt,memberId:u.target.value,member:k?k.name:""})},required:!0,children:[t.jsx("option",{value:"",children:"Select Member"}),i.map(u=>t.jsxs("option",{value:u.id,children:[u.name," (",u.id,")"]},u.id))]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Invoice ID"]}),t.jsx("input",{type:"text",value:kt.invoiceId,onChange:u=>dn({...kt,invoiceId:u.target.value}),placeholder:"INV-2025-001"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",value:kt.amount,onChange:u=>dn({...kt,amount:u.target.value}),placeholder:"$50",required:!0})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"8px",color:"#5a31ea"}}),"Payment Method ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{value:kt.method,onChange:u=>dn({...kt,method:u.target.value}),required:!0,children:[t.jsx("option",{value:"",children:"Select Method"}),t.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),t.jsx("option",{value:"FPS",children:"FPS"}),t.jsx("option",{value:"PayMe",children:"PayMe"}),t.jsx("option",{value:"Alipay",children:"Alipay"}),t.jsx("option",{value:"Credit Card",children:"Credit Card"}),t.jsx("option",{value:"Cash",children:"Cash"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Reference Number"]}),t.jsx("input",{type:"text",value:kt.reference,onChange:u=>dn({...kt,reference:u.target.value}),placeholder:"Transaction reference"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-day",style:{marginRight:"8px",color:"#5a31ea"}}),"Date"]}),t.jsx("input",{type:"text",value:kt.date,onChange:u=>dn({...kt,date:u.target.value}),placeholder:"01 Jan 2025"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-toggle-on",style:{marginRight:"8px",color:"#5a31ea"}}),"Status ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{value:kt.status,onChange:u=>dn({...kt,status:u.target.value}),required:!0,children:[t.jsx("option",{value:"Pending",children:"Pending"}),t.jsx("option",{value:"Completed",children:"Completed"}),t.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#5a31ea"}}),"Screenshot URL"," ",kt.method==="Cash"&&t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",value:kt.screenshot,onChange:u=>dn({...kt,screenshot:u.target.value}),placeholder:"https://...",required:kt.method==="Cash"}),kt.method==="Cash"&&!kt.screenshot&&t.jsx("small",{style:{color:"#ef4444",fontSize:"0.75rem",marginTop:"4px",display:"block"},children:"Screenshot is required for Cash payments"})]}),t.jsxs("label",{style:{gridColumn:"1 / -1"},children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"8px",color:"#5a31ea"}}),"Notes"]}),t.jsx("textarea",{value:kt.notes,onChange:u=>dn({...kt,notes:u.target.value}),rows:3,placeholder:"Additional notes..."})]}),t.jsxs("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:[t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{sa(!1),la(null),dn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[oa?"Update":"Add"," Payment"]})]})]})]})}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"table-wrapper",children:(()=>{const u=(o||[]).filter(le=>Fn==="All"?!0:le.status===Fn).sort((le,Oe)=>{if(le.status==="Pending"&&Oe.status!=="Pending")return-1;if(le.status!=="Pending"&&Oe.status==="Pending")return 1;const Ie=le.createdAt?new Date(le.createdAt):new Date(le.date||0);return(Oe.createdAt?new Date(Oe.createdAt):new Date(Oe.date||0))-Ie}),k=Math.ceil(u.length/ja)||1,U=Math.min(Mi,k),_=(U-1)*ja,D=_+ja,ae=u.slice(_,D);return t.jsxs(t.Fragment,{children:[t.jsx(_i,{columns:["Date","Member","Invoice ID","Amount","Method","Screenshot","Status","Actions"],rows:ae.map(le=>{const Oe=le._id||le.id,Ie=Oe?.toString?Oe.toString():Oe;return{Date:le.date||(le.createdAt?new Date(le.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),Member:le.member||"Unknown","Invoice ID":le.invoiceId||"N/A",Amount:le.amount||"$0",Method:Na(le),Screenshot:{render:()=>le.screenshot?t.jsx("a",{href:le.screenshot,target:"_blank",rel:"noopener noreferrer",style:{color:"#000",textDecoration:"none"},title:"View screenshot","aria-label":"View screenshot",children:t.jsx("i",{className:"fas fa-image","aria-hidden":"true"})}):"N/A"},Status:{render:()=>t.jsx("span",{className:zi[le.status]||"badge badge-unpaid",children:le.status})},Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[le.status==="Pending"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"icon-btn icon-btn--view",onClick:()=>{Ie&&kl(Ie)},title:"Approve payment (By Admin)","aria-label":"Approve payment (By Admin)",children:t.jsx("i",{className:"fas fa-check","aria-hidden":"true"})}),t.jsx("button",{className:"icon-btn icon-btn--delete",onClick:()=>{Ie&&Al(Ie)},title:"Reject payment (By Admin)","aria-label":"Reject payment (By Admin)",children:t.jsx("i",{className:"fas fa-times","aria-hidden":"true"})})]}),le.status==="Rejected"&&le.rejectionReason&&t.jsxs("span",{style:{fontSize:"0.75rem",color:"#666",fontStyle:"italic"},children:["Reason: ",le.rejectionReason]}),le.status==="Completed"&&(()=>{const Ze=le.paidToAdmin||le.paidToAdminName,It=["Screenshot","Bank Transfer","FPS","PayMe","Alipay","Credit Card","Online Payment"].includes(le.method);return Ze?t.jsx("span",{className:"icon-btn",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",color:"#4caf50",cursor:"default",padding:"4px 8px"},title:"Paid by Admin (Cash)","aria-label":"Paid by Admin (Cash)",children:t.jsx("i",{className:"fas fa-user-shield","aria-hidden":"true"})}):It?t.jsx("span",{className:"icon-btn",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",color:"#2196F3",cursor:"default",padding:"4px 8px"},title:"Paid Online","aria-label":"Paid Online",children:t.jsx("i",{className:"fas fa-globe","aria-hidden":"true"})}):t.jsxs("span",{style:{fontSize:"0.75rem",color:"#4caf50"},children:[" Approved by ",le.approvedBy||"Admin"]})})(),t.jsx("button",{className:"secondary-btn icon-btn icon-btn--edit",onClick:()=>Fi(le),title:"Edit Payment",children:t.jsx("i",{className:"fas fa-pen","aria-hidden":"true"})}),t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",style:{color:"#ef4444"},onClick:()=>{Ie&&ua(Ie)},title:"Delete Payment",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}})}),k>0&&u.length>0&&t.jsx(zc,{currentPage:U,totalPages:k,onPageChange:Gi,pageSize:ja,onPageSizeChange:Ji,totalItems:u.length})]})})()})})]}),jt==="invoices"&&t.jsxs("article",{className:"screen-card",id:"invoices",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:[t.jsxs("div",{children:[Ma("invoices"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-file-invoice",style:{marginRight:"10px"}}),"Invoices"]}),t.jsx("p",{children:"View and manage all invoices."})]}),t.jsxs("button",{className:"primary-btn",onClick:()=>{Ra("invoice-builder"),Ee("Redirecting to Invoice Builder...")},children:[t.jsx("i",{className:"fas fa-plus",style:{marginRight:"8px"}}),"Create Invoice"]})]})}),(()=>{const u=r||[],k=u.length,U=u.filter(Oe=>{const Ie=Oe?.status||"Unpaid";return Ie!=="Paid"&&Ie!=="Completed"}),_=u.filter(Oe=>{const Ie=Oe?.status||"Unpaid";return Ie==="Paid"||Ie==="Completed"}),D=u.filter(Oe=>Oe?.status==="Overdue"),ae=U.reduce((Oe,Ie)=>{const Ze=parseFloat((Ie?.amount||"0").replace(/[^0-9.]/g,"")||0);return Oe+Ze},0),le=_.reduce((Oe,Ie)=>{const Ze=parseFloat((Ie?.amount||"0").replace(/[^0-9.]/g,"")||0);return Oe+Ze},0);return t.jsxs("div",{className:"kpi-grid",style:{marginBottom:"24px"},children:[t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-file-invoice",style:{marginRight:"8px",color:"#5a31ea"}}),"Total Invoices"]}),t.jsx("h4",{children:yr(k)})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-check-circle",style:{marginRight:"8px",color:"#57BF57"}}),"Paid"]}),t.jsx("h4",{style:{color:"#57BF57"},children:yr(_.length)})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-exclamation-circle",style:{marginRight:"8px",color:"#ef4444"}}),"Unpaid"]}),t.jsx("h4",{style:{color:"#ef4444"},children:yr(U.length)})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-exclamation-triangle",style:{marginRight:"8px",color:"#ef4444"}}),"Overdue"]}),t.jsx("h4",{style:{color:"#ef4444"},children:yr(D.length)})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#ef4444"}}),"Total Unpaid"]}),t.jsxs("h4",{style:{color:"#ef4444"},children:["$",yr(ae,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#57BF57"}}),"Total Collected"]}),t.jsxs("h4",{style:{color:"#57BF57"},children:["$",yr(le,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})(),t.jsx("div",{className:"card",children:t.jsx("div",{className:"table-wrapper",children:(()=>{let u=r||[];nr!=="All"&&(u=u.filter(ae=>{const le=ae.status||"Unpaid";return nr==="Paid"?le==="Paid"||le==="Completed":nr==="Unpaid"?le!=="Paid"&&le!=="Completed"&&le!=="Overdue":le===nr}));const k=(fr-1)*ni,U=k+ni,_=u.slice(k,U),D=Math.ceil(u.length/ni);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a"},children:"Filter by Status:"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Paid",label:"Paid"},{value:"Unpaid",label:"Unpaid"},{value:"Overdue",label:"Overdue"},{value:"Pending",label:"Pending"}].map(ae=>t.jsx("button",{type:"button",onClick:()=>hi(ae.value),style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:nr===ae.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:nr===ae.value?"#ffffff":"#6b7280",boxShadow:nr===ae.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:le=>{nr!==ae.value&&(le.target.style.background="#e5e7eb",le.target.style.color="#374151")},onMouseLeave:le=>{nr!==ae.value&&(le.target.style.background="transparent",le.target.style.color="#6b7280")},children:ae.label},ae.value))})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:_.map(ae=>{const le=ae.status==="Paid"||ae.status==="Completed",Oe=ae.status==="Overdue",Ie=!le&&!Oe&&(ae.status==="Unpaid"||!ae.status);return t.jsxs("div",{className:"card",style:{padding:"16px",borderRadius:"8px",border:`1px solid ${Oe?"#ef4444":Ie?"#f59e0b":"#e5e7eb"}`,background:Oe?"linear-gradient(135deg, rgba(254, 226, 226, 0.3) 0%, rgba(254, 202, 202, 0.3) 100%)":"#ffffff",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.1)",transition:"all 0.2s ease"},children:[t.jsx("div",{style:{marginBottom:"12px"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[t.jsxs("div",{children:[t.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"Invoice ID"}),t.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"700",color:"#1a1a1a"},children:ae.id||ae.invoiceId||"N/A"})]}),t.jsx("span",{className:ae.status==="Paid"?"badge badge-paid":ae.status==="Overdue"?"badge badge-overdue":ae.status==="Pending"?"badge badge-pending":"badge badge-unpaid",style:{fontSize:"0.75rem",padding:"4px 8px"},children:ae.status||"Unpaid"})]})}),t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280"},children:"Member"}),t.jsx("p",{style:{margin:0,fontSize:"0.875rem",fontWeight:"500",color:"#1a1a1a"},children:ae.memberName||ae.member||"Unknown"})]}),t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280"},children:"Period"}),t.jsx("p",{style:{margin:0,fontSize:"0.875rem",fontWeight:"500",color:"#1a1a1a"},children:ae.period||"N/A"})]}),t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280"},children:"Amount"}),t.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"700",color:"#1a1a1a"},children:ae.amount||"$0"})]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280"},children:"Due Date"}),t.jsx("p",{style:{margin:0,fontSize:"0.875rem",fontWeight:"500",color:"#1a1a1a"},children:ae.due?new Date(ae.due).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"})]}),t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsxs("button",{className:"ghost-btn",onClick:()=>{const Ze=i.find(Xe=>Xe.id===ae.memberId||Xe.email===ae.memberEmail||Xe.name===ae.memberName);Ze&&(Ms(Ze),Gt("member-detail"),Jt("Invoices"))},title:"View Invoice Details",style:{flex:1,padding:"8px 12px",fontSize:"0.875rem"},children:[t.jsx("i",{className:"fas fa-eye",style:{marginRight:"4px"}}),"View"]}),!le&&t.jsx("button",{className:"ghost-btn",style:{color:"#ef4444",padding:"8px 12px",fontSize:"0.875rem"},onClick:()=>{(ae.id||ae._id)&&Es(ae.id||ae._id)},title:"Delete Invoice",children:t.jsx("i",{className:"fas fa-trash"})})]})]},ae.id||ae._id)})}),D>0&&r.length>0&&t.jsx(zc,{currentPage:fr,totalPages:D,onPageChange:Gs,pageSize:ni,onPageSizeChange:Ri,totalItems:u.length})]})})()})})]}),jt==="payments"&&t.jsxs("article",{className:"screen-card",id:"payments",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:[t.jsxs("div",{children:[Ma("payments"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"10px"}}),"Payments"]}),t.jsx("p",{children:"View and manage all payment transactions."})]}),t.jsxs("button",{className:"secondary-btn",onClick:()=>{sa(!0),la(null),dn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},children:[t.jsx("i",{className:"fas fa-plus",style:{marginRight:"8px"}}),"Add Payment"]})]})}),ss&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:u=>{u.target===u.currentTarget&&(sa(!1),la(null),dn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""}))},children:t.jsxs("div",{className:"card",style:{maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"8px",color:"#5a31ea"}}),oa?"Edit Payment":"Add New Payment"]}),t.jsx("button",{type:"button",onClick:()=>{sa(!1),la(null),dn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},style:{background:"transparent",border:"none",fontSize:"1.5rem",color:"#666",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:u=>{u.target.style.background="#f3f4f6",u.target.style.color="#1a1a1a"},onMouseLeave:u=>{u.target.style.background="transparent",u.target.style.color="#666"},children:""})]}),t.jsxs("form",{className:"form-grid",onSubmit:oa?Zs:Ko,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Member ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{ref:u=>{u&&oa&&setTimeout(()=>u.focus(),100)},value:kt.memberId,onChange:u=>{const k=i.find(U=>U.id===u.target.value);dn({...kt,memberId:u.target.value,member:k?k.name:""})},required:!0,children:[t.jsx("option",{value:"",children:"Select Member"}),i.map(u=>t.jsxs("option",{value:u.id,children:[u.name," (",u.id,")"]},u.id))]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Invoice ID"]}),t.jsx("input",{type:"text",value:kt.invoiceId,onChange:u=>dn({...kt,invoiceId:u.target.value}),placeholder:"INV-2025-001"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",value:kt.amount,onChange:u=>dn({...kt,amount:u.target.value}),placeholder:"$50",required:!0})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"8px",color:"#5a31ea"}}),"Payment Method ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{value:kt.method,onChange:u=>dn({...kt,method:u.target.value}),required:!0,children:[t.jsx("option",{value:"",children:"Select Method"}),t.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),t.jsx("option",{value:"FPS",children:"FPS"}),t.jsx("option",{value:"PayMe",children:"PayMe"}),t.jsx("option",{value:"Alipay",children:"Alipay"}),t.jsx("option",{value:"Credit Card",children:"Credit Card"}),t.jsx("option",{value:"Cash",children:"Cash"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Reference Number"]}),t.jsx("input",{type:"text",value:kt.reference,onChange:u=>dn({...kt,reference:u.target.value}),placeholder:"Transaction reference"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-day",style:{marginRight:"8px",color:"#5a31ea"}}),"Date"]}),t.jsx("input",{type:"text",value:kt.date,onChange:u=>dn({...kt,date:u.target.value}),placeholder:"01 Jan 2025"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-toggle-on",style:{marginRight:"8px",color:"#5a31ea"}}),"Status ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{value:kt.status,onChange:u=>dn({...kt,status:u.target.value}),required:!0,children:[t.jsx("option",{value:"Pending",children:"Pending"}),t.jsx("option",{value:"Completed",children:"Completed"}),t.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#5a31ea"}}),"Screenshot URL ",kt.method==="Cash"&&t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",value:kt.screenshot,onChange:u=>dn({...kt,screenshot:u.target.value}),placeholder:"https://...",required:kt.method==="Cash"}),kt.method==="Cash"&&!kt.screenshot&&t.jsx("small",{style:{color:"#ef4444",fontSize:"0.75rem",marginTop:"4px",display:"block"},children:"Screenshot is required for Cash payments"})]}),t.jsxs("label",{style:{gridColumn:"1 / -1"},children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"8px",color:"#5a31ea"}}),"Notes"]}),t.jsx("textarea",{value:kt.notes,onChange:u=>dn({...kt,notes:u.target.value}),rows:3,placeholder:"Additional notes..."})]}),t.jsxs("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:[t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{sa(!1),la(null),dn({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[oa?"Update":"Add"," Payment"]})]})]})]})}),t.jsx("div",{className:"card",children:t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a"},children:"Filter by Status:"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Pending",label:"Pending"},{value:"Completed",label:"Completed"},{value:"Paid",label:"Paid"},{value:"Rejected",label:"Rejected"}].map(u=>t.jsx("button",{type:"button",onClick:()=>Ei(u.value),style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:Fn===u.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:Fn===u.value?"#ffffff":"#6b7280",boxShadow:Fn===u.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{Fn!==u.value&&(k.target.style.background="#e5e7eb",k.target.style.color="#374151")},onMouseLeave:k=>{Fn!==u.value&&(k.target.style.background="transparent",k.target.style.color="#6b7280")},children:u.label},u.value))})]}),(()=>{const u=(o||[]).filter(le=>Fn==="All"?!0:le.status===Fn).sort((le,Oe)=>{if(le.status==="Pending"&&Oe.status!=="Pending")return-1;if(le.status!=="Pending"&&Oe.status==="Pending")return 1;const Ie=le.createdAt?new Date(le.createdAt):new Date(le.date||0);return(Oe.createdAt?new Date(Oe.createdAt):new Date(Oe.date||0))-Ie}),k=Math.ceil(u.length/ja)||1,U=Math.min(Mi,k),_=(U-1)*ja,D=_+ja,ae=u.slice(_,D);return t.jsxs(t.Fragment,{children:[t.jsx(_i,{columns:["Date","Member","Invoice ID","Amount","Method","Screenshot","Status","Actions"],rows:ae.map(le=>{const Oe=le._id||le.id,Ie=Oe?.toString?Oe.toString():Oe;return{Date:le.date||(le.createdAt?new Date(le.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),Member:le.member||"Unknown","Invoice ID":le.invoiceId||"N/A",Amount:le.amount||"$0",Method:Na(le),Screenshot:{render:()=>le.screenshot?t.jsxs("a",{href:le.screenshot,target:"_blank",rel:"noopener noreferrer",style:{color:"#5a31ea",textDecoration:"none"},children:[t.jsx("i",{className:"fas fa-image",style:{marginRight:"4px"}}),"View"]}):"N/A"},Status:{render:()=>t.jsx("span",{className:le.status==="Paid"||le.status==="Completed"?"badge badge-paid":le.status==="Pending"?"badge badge-pending":le.status==="Rejected"?"badge badge-overdue":"badge badge-active",children:le.status})},Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsx("button",{className:"ghost-btn icon-btn icon-btn--edit",onClick:()=>Fi(le),title:"Edit Payment",children:t.jsx("i",{className:"fas fa-pen","aria-hidden":"true"})}),t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",style:{color:"#ef4444"},onClick:()=>{Ie&&ua(Ie)},title:"Delete Payment",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}})}),k>0&&u.length>0&&t.jsx(zc,{currentPage:U,totalPages:k,onPageChange:Gi,pageSize:ja,onPageSizeChange:Ji,totalItems:u.length})]})})()]})})]}),jt==="donations"&&t.jsxs("article",{className:"screen-card",id:"donations",style:{minHeight:"400px"},children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:[t.jsxs("div",{children:[Ma("donations"),t.jsx("h3",{children:"Donations"}),t.jsx("p",{children:"Manage donation records from members and non-members."})]}),t.jsx("button",{className:"primary-btn",onClick:()=>Ii(!0),children:"+ Add Donation"})]})}),Us&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:u=>{u.target===u.currentTarget&&(Ii(!1),xn({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),qa(null),ga(null),$n(""),Ia(!1))},children:t.jsxs("div",{className:"card",style:{maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-heart",style:{marginRight:"8px",color:"#5a31ea"}}),"Add Donation"]}),t.jsx("button",{type:"button",onClick:()=>{na({donorName:!1,amount:!1,method:!1,date:!1,reference:!1,screenshot:!1}),Ui(null),Ii(!1),xn({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),qa(null),ga(null),$n(""),Ia(!1)},style:{background:"transparent",border:"1px solid #ef4444",fontSize:"1.5rem",color:"#ef4444",fontWeight:"bold",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",cursor:"pointer",padding:"0",transition:"all 0.2s ease"},onMouseEnter:u=>{u.target.style.background="#f3f4f6",u.target.style.color="#1a1a1a"},onMouseLeave:u=>{u.target.style.background="transparent",u.target.style.color="#666"},children:""})]}),t.jsxs("form",{noValidate:!0,onSubmit:async u=>{if(u.preventDefault(),!!(()=>{const U=["donorName","amount","method","date","reference","screenshot"];if(ra){let _=!0,D="";if(ra==="donorName"&&!ut.donorName)_=!1,D="Donor name is required";else if(ra==="amount")if(!ut.amount)_=!1,D="Amount is required";else{const ae=parseFloat(ut.amount);(!ae||ae<=0||isNaN(ae))&&(_=!1,D="Amount must be a positive number")}else ra==="method"&&!ut.method?(_=!1,D="Payment method is required"):ra==="date"&&!ut.date?(_=!1,D="Date is required"):ra==="reference"?["Bank Transfer","FPS","PayMe","Alipay","Credit Card"].includes(ut.method)&&!ut.reference.trim()&&(_=!1,D="Reference number is required for online payment methods"):ra==="screenshot"&&(ut.method==="Cash"&&!ut.screenshot&&!rs?(_=!1,D="Proof image is required for Cash payments"):["Bank Transfer","FPS","PayMe","Alipay","Credit Card"].includes(ut.method)&&!ut.screenshot&&!rs&&(_=!1,D="Proof image is required for online payment methods"));if(_)na(ae=>({...ae,[ra]:!1})),Ui(null);else return na(ae=>({...ae,[ra]:!0})),Ee(D,"error"),!1}for(const _ of U){let D=!0,ae="";if(_==="donorName"&&!ut.donorName)D=!1,ae="Donor name is required";else if(_==="amount")if(!ut.amount)D=!1,ae="Amount is required";else{const le=parseFloat(ut.amount);(!le||le<=0||isNaN(le))&&(D=!1,ae="Amount must be a positive number")}else _==="method"&&!ut.method?(D=!1,ae="Payment method is required"):_==="date"&&!ut.date?(D=!1,ae="Date is required"):_==="reference"?["Bank Transfer","FPS","PayMe","Alipay","Credit Card"].includes(ut.method)&&!ut.reference.trim()&&(D=!1,ae="Reference number is required for online payment methods"):_==="screenshot"&&(ut.method==="Cash"&&!ut.screenshot&&!rs?(D=!1,ae="Proof image is required for Cash payments"):["Bank Transfer","FPS","PayMe","Alipay","Credit Card"].includes(ut.method)&&!ut.screenshot&&!rs&&(D=!1,ae="Proof image is required for online payment methods"));if(!D)return na({donorName:!1,amount:!1,method:!1,date:!1,reference:!1,screenshot:!1}),na(le=>({...le,[_]:!0})),Ui(_),Ee(ae,"error"),!1}return na({donorName:!1,amount:!1,method:!1,date:!1,reference:!1,screenshot:!1}),Ui(null),!0})())try{let U=ut.screenshot;if(rs){const _="http://localhost:4000",D=new FormData;D.append("screenshot",rs),D.append("uploadType","donation-proof");const ae=await fetch(`${_}/api/upload/screenshot`,{method:"POST",body:D});if(!ae.ok){let Oe="Failed to upload image";try{Oe=(await ae.json()).error||Oe}catch{Oe=`Upload failed with status ${ae.status}`}throw new Error(Oe)}const le=await ae.json();if(!le.url)throw new Error("No URL returned from upload. Please try again.");U=le.url}await pe({...ut,amount:amountNum.toFixed(2),screenshot:U}),Ee("Donation added successfully!"),Ii(!1),xn({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),qa(null),ga(null),$n(""),Ia(!1),await oe()}catch(U){Ee(U.message||"Failed to add donation","error")}},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Donor Name ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",value:ut.donorName,onChange:u=>xn({...ut,donorName:u.target.value}),required:!0,placeholder:ut.isMember?"Will be filled automatically when member is selected":"Enter donor name",disabled:!!(ut.isMember&&ut.memberId),style:{background:ut.isMember&&ut.memberId?"#f9fafb":"#fff",cursor:ut.isMember&&ut.memberId?"not-allowed":"text"}}),ut.isMember&&ut.memberId&&t.jsx("span",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px",display:"block"},children:"Donor name is automatically set from selected member"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"number",inputMode:"numeric",value:ut.amount,onChange:u=>{const k=u.target.value.replace(/[^0-9.]/g,"");xn({...ut,amount:k})},placeholder:"100",required:!0})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"12px"},children:"Donor Type"}),t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[t.jsxs("button",{type:"button",onClick:()=>xn({...ut,isMember:!0,memberId:"",donorName:ut.donorName}),style:{flex:"1",minWidth:"150px",padding:"14px 20px",borderRadius:"4px",border:"none",background:ut.isMember?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#f8f9ff",color:ut.isMember?"#ffffff":"#1a1a1a",boxShadow:ut.isMember?"0 4px 12px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)",fontWeight:"600",fontSize:"0.9375rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:u=>{ut.isMember||(u.currentTarget.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.15)",u.currentTarget.style.background="#f8f8f8")},onMouseLeave:u=>{ut.isMember||(u.currentTarget.style.borderColor="#e0e0e0",u.currentTarget.style.background="#fff")},children:[t.jsx("span",{style:{color:ut.isMember?"#ffffff":"inherit"},children:""}),t.jsx("span",{style:{color:ut.isMember?"#ffffff":"inherit"},children:"Member"})]}),t.jsxs("button",{type:"button",onClick:()=>xn({...ut,isMember:!1,memberId:"",donorName:ut.donorName}),style:{flex:"1",minWidth:"150px",padding:"14px 20px",borderRadius:"4px",border:"none",background:ut.isMember?"#f8f9ff":"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:ut.isMember?"#1a1a1a":"#ffffff",boxShadow:ut.isMember?"0 2px 4px rgba(90, 49, 234, 0.08)":"0 4px 12px rgba(90, 49, 234, 0.3)",fontWeight:"600",fontSize:"0.9375rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:u=>{ut.isMember&&(u.currentTarget.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.15)",u.currentTarget.style.background="#f8f8f8")},onMouseLeave:u=>{ut.isMember&&(u.currentTarget.style.borderColor="#e0e0e0",u.currentTarget.style.background="#fff")},children:[t.jsx("span",{style:{color:ut.isMember?"inherit":"#ffffff"},children:""}),t.jsx("span",{style:{color:ut.isMember?"inherit":"#ffffff"},children:"Non-Member"})]})]})]}),ut.isMember&&t.jsx("div",{style:{marginBottom:"16px"},children:t.jsxs("label",{children:["Select Member ",t.jsx("span",{style:{color:"#ef4444"},children:"*"}),t.jsxs("div",{style:{position:"relative"},"data-donation-member-dropdown":!0,children:[t.jsxs("div",{onClick:()=>Ia(!Qa),style:{padding:"10px 16px",border:"1px solid #e0e0e0",borderRadius:"4px",background:"#fff",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",color:ut.memberId?"#000":"#999",minHeight:"42px"},children:[t.jsx("span",{children:ut.memberId?(()=>{const u=i.find(k=>k.id===ut.memberId);return u?`${u.name} (${u.id})`:"Select Member"})():"Select Member"}),t.jsx("span",{style:{fontSize:"0.75rem",color:"#5a31ea",transition:"transform 0.2s ease",transform:Qa?"rotate(180deg)":"rotate(0deg)",display:"inline-block"},children:""})]}),Qa&&t.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#fff",border:"1px solid #e0e0e0",borderRadius:"4px",marginTop:"4px",maxHeight:"300px",overflow:"hidden",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[t.jsxs("div",{style:{padding:"12px",borderBottom:"1px solid #e0e0e0",background:"#f9fafb"},children:[t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:"text",placeholder:" Search member by name or ID...",value:_n,onChange:u=>$n(u.target.value),onClick:u=>u.stopPropagation(),onKeyDown:u=>u.stopPropagation(),autoFocus:!0,style:{width:"100%",padding:"10px 36px 10px 12px",border:"1px solid #e0e0e0",borderRadius:"4px",fontSize:"0.875rem",outline:"none",background:"#fff",transition:"border-color 0.2s"},onFocus:u=>{u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)",u.target.style.boxShadow="0 0 0 2px rgba(0,0,0,0.05)"},onBlur:u=>{u.target.style.borderColor="#e0e0e0",u.target.style.boxShadow="none"}}),_n&&t.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),$n("")},style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#666",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center"},title:"Clear search",children:""})]}),_n&&t.jsxs("div",{style:{marginTop:"8px",fontSize:"0.75rem",color:"#666"},children:[i.filter(u=>!_n||u.name?.toLowerCase().includes(_n.toLowerCase())||u.id?.toLowerCase().includes(_n.toLowerCase())).length," member",i.filter(u=>!_n||u.name?.toLowerCase().includes(_n.toLowerCase())||u.id?.toLowerCase().includes(_n.toLowerCase())).length!==1?"s":""," found"]})]}),t.jsxs("div",{style:{maxHeight:"250px",overflowY:"auto"},children:[i.filter(u=>!_n||u.name?.toLowerCase().includes(_n.toLowerCase())||u.id?.toLowerCase().includes(_n.toLowerCase())).map(u=>t.jsxs("div",{onClick:()=>{xn({...ut,memberId:u.id,donorName:u.name||""}),Ia(!1),$n("")},style:{padding:"12px 16px",cursor:"pointer",borderBottom:"1px solid #e5e7eb",background:ut.memberId===u.id?"#f9fafb":"#fff",transition:"background 0.2s"},onMouseEnter:k=>{ut.memberId!==u.id&&(k.target.style.background="#f9f9f9")},onMouseLeave:k=>{ut.memberId!==u.id&&(k.target.style.background="#fff")},children:[t.jsx("div",{style:{fontWeight:"500",color:"#000"},children:u.name}),t.jsxs("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"2px"},children:[u.id," ",u.email?` ${u.email}`:""]})]},u.id)),i.filter(u=>!_n||u.name?.toLowerCase().includes(_n.toLowerCase())||u.id?.toLowerCase().includes(_n.toLowerCase())).length===0&&t.jsx("div",{style:{padding:"16px",textAlign:"center",color:"#999",fontSize:"0.875rem"},children:"No members found"})]})]})]}),!ut.memberId&&t.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"4px",display:"none"},children:"Please select a member"})]})}),t.jsxs("label",{children:["Payment Method ",t.jsx("span",{style:{color:"#ef4444"},children:"*"}),t.jsxs("select",{value:ut.method,onChange:u=>xn({...ut,method:u.target.value}),required:!0,children:[t.jsx("option",{value:"",children:"Select method"}),t.jsx("option",{value:"Cash",children:"Cash"}),t.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),t.jsx("option",{value:"FPS",children:"FPS"}),t.jsx("option",{value:"PayMe",children:"PayMe"}),t.jsx("option",{value:"Alipay",children:"Alipay"}),t.jsx("option",{value:"Credit Card",children:"Credit Card"})]})]}),["Bank Transfer","FPS","PayMe","Alipay","Credit Card"].includes(ut.method)&&t.jsxs("label",{children:["Reference Number ",t.jsx("span",{style:{color:"#ef4444"},children:"*"}),t.jsx("input",{type:"text",value:ut.reference,onChange:u=>xn({...ut,reference:u.target.value}),placeholder:"Transaction reference number",required:!0}),!ut.reference.trim()&&t.jsx("small",{style:{color:"#ef4444",fontSize:"0.75rem",marginTop:"4px",display:"block"},children:"Reference number is required for online payment methods"})]}),ut.method==="Cash"&&t.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Proof Image ",t.jsx("span",{style:{color:"#ef4444"},children:"*"}),t.jsx("div",{style:{border:"2px dashed #d0d0d0",borderRadius:"4px",padding:"24px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",background:dr||ut.screenshot?"#f9fafb":"#fafafa"},onMouseEnter:u=>{u.currentTarget.style.borderColor="#5a31ea",u.currentTarget.style.background="#f8f9ff"},onMouseLeave:u=>{u.currentTarget.style.borderColor="#d0d0d0",u.currentTarget.style.background=dr||ut.screenshot?"#f9fafb":"#fafafa"},onClick:()=>{const u=document.createElement("input");u.type="file",u.accept="image/*",u.onchange=async k=>{const U=k.target.files[0];if(!U)return;if(!U.type.startsWith("image/")){Ee("Please upload an image file","error");return}const _=new FileReader;_.onloadend=()=>{qa(U),ga(_.result)},_.readAsDataURL(U)},u.click()},children:dr||ut.screenshot?t.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[t.jsx("img",{src:dr||ut.screenshot,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"4px",marginBottom:"8px"}}),t.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),qa(null),ga(null),xn({...ut,screenshot:""})},style:{position:"absolute",top:"8px",right:"8px",background:"#ef4444",color:"#fff",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem"},children:""}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"8px"},children:"Click to change image"})]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-cloud-upload-alt",style:{fontSize:"2rem",color:"#5a31ea",marginBottom:"8px"}}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"8px"},children:"Click to upload image"}),t.jsx("div",{style:{fontSize:"0.75rem",color:"#999",marginTop:"4px"},children:"PNG, JPG, GIF up to 10MB"})]})}),!dr&&!ut.screenshot&&t.jsx("small",{style:{color:"#ef4444",fontSize:"0.75rem",marginTop:"4px",display:"block"},children:"Proof image is required for Cash payments"})]}),["Bank Transfer","FPS","PayMe","Alipay","Credit Card"].includes(ut.method)&&t.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Proof Image ",t.jsx("span",{style:{color:"#ef4444"},children:"*"}),t.jsx("div",{style:{border:"2px dashed #d0d0d0",borderRadius:"4px",padding:"24px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",background:dr||ut.screenshot?"#f9fafb":"#fafafa"},onMouseEnter:u=>{u.currentTarget.style.borderColor="#5a31ea",u.currentTarget.style.background="#f8f9ff"},onMouseLeave:u=>{u.currentTarget.style.borderColor="#d0d0d0",u.currentTarget.style.background=dr||ut.screenshot?"#f9fafb":"#fafafa"},onClick:()=>{const u=document.createElement("input");u.type="file",u.accept="image/*",u.onchange=async k=>{const U=k.target.files[0];if(!U)return;if(!U.type.startsWith("image/")){Ee("Please upload an image file","error");return}const _=new FileReader;_.onloadend=()=>{qa(U),ga(_.result)},_.readAsDataURL(U)},u.click()},children:dr||ut.screenshot?t.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[t.jsx("img",{src:dr||ut.screenshot,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"4px",marginBottom:"8px"}}),t.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),qa(null),ga(null),xn({...ut,screenshot:""})},style:{position:"absolute",top:"8px",right:"8px",background:"#ef4444",color:"#fff",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem"},children:""}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"8px"},children:"Click to change image"})]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-cloud-upload-alt",style:{fontSize:"2rem",color:"#5a31ea",marginBottom:"8px"}}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"8px"},children:"Click to upload image"}),t.jsx("div",{style:{fontSize:"0.75rem",color:"#999",marginTop:"4px"},children:"PNG, JPG, GIF up to 10MB"})]})}),!dr&&!ut.screenshot&&t.jsx("small",{style:{color:"#ef4444",fontSize:"0.75rem",marginTop:"4px",display:"block"},children:"Proof image is required for online payment methods"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-day",style:{marginRight:"8px",color:"#5a31ea"}}),"Date ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"date",value:ut.date,onChange:u=>{const k=u.target.value;xn({...ut,date:k})},onBlur:u=>{const k=u.target.value;if(k){const U=new Date(k);if(isNaN(U.getTime())){Ee("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[_,D,ae]=k.split("-").map(Number);if(D<1||D>12){Ee("Invalid month. Please enter a month between 01 and 12","error");return}if(ae<1||ae>31){Ee("Invalid day. Please enter a valid day for the selected month","error");return}const le=new Date(_,D,0).getDate();if(ae>le){Ee(`Invalid date. ${D}/${_} only has ${le} days`,"error");return}}},required:!0,style:{borderRadius:"4px",width:"100%"}})]}),t.jsxs("label",{children:["Notes (Optional)",t.jsx("textarea",{value:ut.notes,onChange:u=>xn({...ut,notes:u.target.value}),rows:3,placeholder:"Additional notes about this donation..."})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[t.jsx("button",{type:"submit",className:"primary-btn",children:"Save Donation"}),t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{Ii(!1),xn({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),qa(null),ga(null),$n(""),Ia(!1)},children:"Cancel"})]})]})]})}),t.jsx("div",{className:"card",children:!J||Array.isArray(J)&&J.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("p",{style:{margin:0,fontSize:"1.125rem",fontWeight:"500"},children:"No donations yet"}),t.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.9375rem",color:"#999"},children:'Click "Add Donation" to record your first donation'})]}):t.jsx("div",{className:"table-wrapper",children:(()=>{const k=(Array.isArray(J)?J:[]).filter(Oe=>Oe!==null),U=Math.ceil(k.length/Fr)||1,_=Math.min(Ea,U),D=(_-1)*Fr,ae=D+Fr,le=k.slice(D,ae);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[t.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["Total donations:"," ",t.jsxs("strong",{children:["$",yr(k.reduce((Oe,Ie)=>{const Ze=parseFloat(Ie?.amount||0);return Oe+(isNaN(Ze)?0:Ze)},0),{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{try{const Oe=k.map(un=>({Date:un.date||(un.createdAt?new Date(un.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),DonorName:un.donorName||"",Type:un.isMember?"Member":"Non-Member",Amount:un.amount||"0",Method:un.method||"",Notes:(un.notes||"").replace(/\r?\n/g," ")})),Ie=["Date","DonorName","Type","Amount","Method","Notes"],Ze=[Ie.join(","),...Oe.map(un=>Ie.map(gr=>{const Vr=un[gr]??"";return`"${String(Vr).replace(/"/g,'""')}"`}).join(","))],Xe=new Blob([Ze.join(`
`)],{type:"text/csv;charset=utf-8;"}),It=URL.createObjectURL(Xe),vt=document.createElement("a");vt.href=It;const Dn=new Date().toISOString().slice(0,10);vt.download=`donations-report-${Dn}.csv`,document.body.appendChild(vt),vt.click(),document.body.removeChild(vt),URL.revokeObjectURL(It),Ee("Donations report exported as CSV")}catch(Oe){console.error("Export donations CSV failed",Oe),Ee("Failed to export donations report","error")}},children:" Export Donations CSV"})]}),t.jsx(_i,{columns:["Date","Donor Name","Type","Amount","Method","Notes","Actions"],rows:le.map(Oe=>Oe?{Date:Oe.date||(Oe.createdAt?new Date(Oe.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),"Donor Name":Oe.donorName||"Unknown",Type:Oe.isMember?t.jsx("span",{className:"badge badge-active",children:"Member"}):t.jsx("span",{className:"badge badge-inactive",children:"Non-Member"}),Amount:Oe.amount?`$${yr(Number(Oe.amount),{minimumFractionDigits:2,maximumFractionDigits:2})}`:"$0.00",Method:Oe.method||"-",Notes:Oe.notes||"-",Actions:{render:()=>t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",onClick:async()=>{ri("Are you sure you want to delete this donation?",async()=>{try{const Ze=Oe._id||Oe.id;await be(Ze),Ee("Donation deleted successfully!"),await oe()}catch(Ze){Ee(Ze.message||"Failed to delete donation","error")}})},title:"Delete Donation","aria-label":"Delete Donation",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})}}:null).filter(Oe=>Oe!==null)}),U>0&&k.length>0&&t.jsx(zc,{currentPage:_,totalPages:U,onPageChange:Sa,pageSize:Fr,onPageSizeChange:Cs,totalItems:k.length})]})})()})})]}),jt==="reports"&&t.jsxs("article",{className:"screen-card",id:"reports",children:[t.jsxs("header",{className:"screen-card__header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{children:[Ma("reports"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-chart-line",style:{marginRight:"10px"}}),"Financial Reports"]}),t.jsx("p",{children:"Comprehensive financial overview and payment analytics."})]}),it&&t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("button",{type:"button",onClick:xi,title:"Export CSV",style:{padding:"12px",borderRadius:"8px",fontWeight:"600",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",background:"linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",color:"#5a31ea",border:"2px solid #e5e7eb",boxShadow:"none",width:"48px",height:"48px"},onMouseEnter:u=>{u.target.style.background="linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",u.target.style.color="#ffffff",u.target.style.border="2px solid #5a31ea",u.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.3)"},onMouseLeave:u=>{u.target.style.background="linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",u.target.style.color="#5a31ea",u.target.style.border="2px solid #e5e7eb",u.target.style.boxShadow="none"},children:t.jsx("i",{className:"fas fa-file-csv"})}),t.jsx("button",{type:"button",onClick:vo,title:"Export PDF",style:{padding:"12px",borderRadius:"8px",fontWeight:"600",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",background:"linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",color:"#5a31ea",border:"2px solid #e5e7eb",boxShadow:"none",width:"48px",height:"48px"},onMouseEnter:u=>{u.target.style.background="linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",u.target.style.color="#ffffff",u.target.style.border="2px solid #5a31ea",u.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.3)"},onMouseLeave:u=>{u.target.style.background="linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",u.target.style.color="#5a31ea",u.target.style.border="2px solid #e5e7eb",u.target.style.boxShadow="none"},children:t.jsx("i",{className:"fas fa-file-pdf"})})]})]}),t.jsx("div",{className:"card",style:{marginBottom:"24px",padding:"20px",background:"linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)"},children:t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"16px",alignItems:"flex-end"},children:[t.jsxs("div",{style:{flex:"1",minWidth:"200px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:[t.jsx("i",{className:"fas fa-calendar-alt",style:{marginRight:"6px",color:"#5a31ea"}}),"Date From"]}),t.jsx("input",{type:"date",value:Un.from,onChange:u=>{const k=u.target.value;La({...Un,from:k})},style:{width:"100%",padding:"12px 16px",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"0.9375rem",background:"#ffffff",transition:"all 0.2s ease"},onFocus:u=>{u.target.style.borderColor="#5a31ea",u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1)"},onBlur:u=>{u.target.style.borderColor="#e5e7eb",u.target.style.boxShadow="none"}})]}),t.jsxs("div",{style:{flex:"1",minWidth:"200px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:[t.jsx("i",{className:"fas fa-calendar-check",style:{marginRight:"6px",color:"#5a31ea"}}),"Date To"]}),t.jsx("input",{type:"date",value:Un.to,onChange:u=>{const k=u.target.value;La({...Un,to:k})},style:{width:"100%",padding:"12px 16px",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"0.9375rem",background:"#ffffff",transition:"all 0.2s ease"},onFocus:u=>{u.target.style.borderColor="#5a31ea",u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1)"},onBlur:u=>{u.target.style.borderColor="#e5e7eb",u.target.style.boxShadow="none"}})]}),t.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["This Year","This Quarter","This Month"].map(u=>t.jsx("button",{onClick:()=>{Ss(u);const k=new Date;if(u==="This Year")La({from:`${k.getFullYear()}-01-01`,to:`${k.getFullYear()}-12-31`});else if(u==="This Quarter"){const _=Math.floor(k.getMonth()/3)*3;La({from:`${k.getFullYear()}-${String(_+1).padStart(2,"0")}-01`,to:`${k.getFullYear()}-${String(_+3).padStart(2,"0")}-31`})}else La({from:`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-01`,to:`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-31`})},style:{padding:"12px 20px",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",background:ci===u?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#ffffff",color:ci===u?"#ffffff":"#6b7280",border:ci===u?"none":"2px solid #e5e7eb",boxShadow:ci===u?"0 4px 12px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{ci!==u&&(k.target.style.background="#f3f4f6",k.target.style.borderColor="#d1d5db")},onMouseLeave:k=>{ci!==u&&(k.target.style.background="#ffffff",k.target.style.borderColor="#e5e7eb")},children:u},u))})]})}),t.jsxs("div",{className:"kpi-grid",style:{marginBottom:"24px"},children:[t.jsxs("div",{className:"card kpi",style:{background:"linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%)",border:"2px solid #10b981"},children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#10b981"}}),"Total Collected"]}),t.jsxs("h4",{style:{color:"#10b981"},children:["$",nn.collected.toLocaleString()]}),t.jsxs("small",{children:[Math.round(nn.collected/nn.expected*100),"% of $",nn.expected.toLocaleString()," expected"]})]}),t.jsxs("div",{className:"card kpi",style:{background:"linear-gradient(135deg, #ffffff 0%, #fef3c7 100%)",border:"2px solid #f59e0b"},children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-exclamation-triangle",style:{marginRight:"8px",color:"#f59e0b"}}),"Outstanding"]}),t.jsxs("h4",{style:{color:"#f59e0b"},children:["$",yr(En.outstanding)]}),t.jsx("small",{children:"Pending collection"})]}),t.jsxs("div",{className:"card kpi",style:{background:"linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%)",border:"2px solid #5a31ea"},children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-users",style:{marginRight:"8px",color:"#5a31ea"}}),"Avg per Member"]}),t.jsxs("h4",{style:{color:"#5a31ea"},children:["$",nn.averagePerMember]}),t.jsx("small",{children:"Goal: $800"})]}),t.jsxs("div",{className:"card kpi",style:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",border:"2px solid #3b82f6"},children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-exchange-alt",style:{marginRight:"8px",color:"#3b82f6"}}),"Transactions"]}),t.jsx("h4",{style:{color:"#3b82f6"},children:nn.transactionCount}),t.jsx("small",{children:"In selected period"})]})]}),t.jsxs("div",{style:{marginBottom:"24px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"24px"},children:[t.jsxs("div",{className:"card",style:{padding:"24px",background:"linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)",border:"1px solid #e5e7eb"},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:t.jsxs("h4",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:"#1a1a1a"},children:[t.jsx("i",{className:"fas fa-chart-pie",style:{marginRight:"10px",color:"#5a31ea"}}),"Collected vs Outstanding"]})}),t.jsxs("div",{style:{position:"relative",height:"240px",display:"flex",alignItems:"flex-end",gap:"24px",justifyContent:"center",padding:"0 16px"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",flex:1},children:[t.jsxs("div",{style:{width:"100%",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"12px 12px 0 0",minHeight:"50px",height:`${Math.max(50,Math.round(nn.collected/(nn.collected+En.outstanding)*200)||0)}px`,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"700",fontSize:"1rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.4)",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:u=>{u.target.style.transform="scaleY(1.05)",u.target.style.boxShadow="0 6px 16px rgba(16, 185, 129, 0.5)"},onMouseLeave:u=>{u.target.style.transform="scaleY(1)",u.target.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.4)"},children:["$",yr(nn.collected)]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("span",{style:{fontSize:"0.9375rem",fontWeight:"700",color:"#10b981",display:"block"},children:"Collected"}),t.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[Math.round(nn.collected/(nn.collected+En.outstanding)*100),"%"]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",flex:1},children:[t.jsxs("div",{style:{width:"100%",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",borderRadius:"12px 12px 0 0",minHeight:"50px",height:`${Math.max(50,Math.round(En.outstanding/(nn.collected+En.outstanding)*200)||0)}px`,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"700",fontSize:"1rem",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.4)",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:u=>{u.target.style.transform="scaleY(1.05)",u.target.style.boxShadow="0 6px 16px rgba(239, 68, 68, 0.5)"},onMouseLeave:u=>{u.target.style.transform="scaleY(1)",u.target.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.4)"},children:["$",En.outstanding.toLocaleString()]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("span",{style:{fontSize:"0.9375rem",fontWeight:"700",color:"#ef4444",display:"block"},children:"Outstanding"}),t.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[Math.round(En.outstanding/(nn.collected+En.outstanding)*100),"%"]})]})]})]})]}),t.jsxs("div",{className:"card",style:{padding:"24px",background:"linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)",border:"1px solid #e5e7eb"},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:t.jsxs("h4",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:"#1a1a1a"},children:[t.jsx("i",{className:"fas fa-chart-line",style:{marginRight:"10px",color:"#5a31ea"}}),"Payments Over Time"]})}),t.jsx("div",{style:{position:"relative",height:"200px"},children:(()=>{const u={},k=new Date(Un.from),U=new Date(Un.to),_=Math.ceil((U-k)/(1e3*60*60*24));nn.paymentsInRange.forEach(le=>{const Oe=le.date?new Date(le.date):le.createdAt?new Date(le.createdAt):new Date;let Ie;if(_<=7)Ie=Oe.toLocaleDateString("en-US",{month:"short",day:"numeric"});else if(_<=30){const Xe=new Date(Oe);Xe.setDate(Oe.getDate()-Oe.getDay()),Ie=Xe.toLocaleDateString("en-US",{month:"short",day:"numeric"})}else Ie=Oe.toLocaleDateString("en-US",{month:"short",year:"numeric"});u[Ie]||(u[Ie]=0);const Ze=parseFloat(le.amount?.replace(/[^0-9.]/g,"")||0);u[Ie]+=Ze});const D=Object.keys(u).sort((le,Oe)=>new Date(le)-new Date(Oe)).slice(-10),ae=Math.max(...D.map(le=>u[le]),1);return t.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"4px",height:"100%",justifyContent:"space-between",padding:"0 8px"},children:D.length>0?D.map((le,Oe)=>{const Ie=u[le],Ze=Math.max(20,Ie/ae*160);return t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",flex:1,minWidth:"40px"},children:[t.jsx("div",{style:{width:"100%",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",borderRadius:"4px 4px 0 0",height:`${Ze}px`,minHeight:"20px",display:"flex",alignItems:"flex-end",justifyContent:"center",paddingBottom:"4px",color:"#fff",fontSize:"0.7rem",fontWeight:"600",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.3)",cursor:"pointer",transition:"all 0.2s ease"},title:`${le}: $${Ie.toFixed(2)}`,onMouseEnter:Xe=>{Xe.currentTarget.style.transform="scaleY(1.05)",Xe.currentTarget.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.4)"},onMouseLeave:Xe=>{Xe.currentTarget.style.transform="scaleY(1)",Xe.currentTarget.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.3)"},children:Ze>35&&`$${Math.round(Ie)}`}),t.jsx("span",{style:{fontSize:"0.65rem",color:"#666",textAlign:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:le.length>8?le.substring(0,6)+"...":le})]},`${le}-${Oe}`)}):t.jsx("div",{style:{width:"100%",textAlign:"center",color:"#999",padding:"40px 0"},children:"No payment data in selected period"})})})()})]})]}),t.jsxs("div",{className:"card",style:{marginBottom:"24px",padding:"24px",background:"linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)",border:"1px solid #e5e7eb"},children:[t.jsxs("h4",{style:{marginBottom:"20px",fontSize:"1.25rem",fontWeight:"700",color:"#1a1a1a"},children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"10px",color:"#5a31ea"}}),"Payment Method Breakdown"]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:nn.methodMix.map(u=>{const U={FPS:"#10b981",PayMe:"#25D366","Bank Transfer":"#3b82f6","Credit Card":"#5a31ea",Cash:"#f59e0b",Other:"#6b7280"}[u.label]||"#6b7280";return t.jsxs("div",{style:{padding:"16px",borderRadius:"12px",background:"#ffffff",border:`2px solid ${U}`,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},onMouseEnter:_=>{_.currentTarget.style.transform="translateY(-2px)",_.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.12)"},onMouseLeave:_=>{_.currentTarget.style.transform="translateY(0)",_.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.08)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[t.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:U,flexShrink:0}}),t.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1a1a1a",flex:1},children:u.label})]}),t.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:U,marginLeft:"24px"},children:u.value})]},u.label)})})]}),t.jsxs("div",{className:"card",style:{padding:"24px",background:"linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)",border:"1px solid #e5e7eb"},children:[t.jsxs("div",{style:{marginBottom:"24px",display:"flex",gap:"16px",flexWrap:"wrap",alignItems:"center"},children:[t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsxs("label",{style:{fontWeight:"600",color:"#1a1a1a",fontSize:"0.9375rem"},children:[t.jsx("i",{className:"fas fa-filter",style:{marginRight:"6px",color:"#5a31ea"}}),"Filter by Type:"]}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"8px",flexWrap:"wrap"},children:[{value:"all",label:"All"},{value:"payments",label:"Payments"},{value:"donations",label:"Donations"}].map(u=>t.jsx("button",{type:"button",onClick:()=>x(u.value),style:{padding:"8px 16px",borderRadius:"6px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:Ka===u.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:Ka===u.value?"#ffffff":"#6b7280",boxShadow:Ka===u.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{Ka!==u.value&&(k.target.style.background="#e5e7eb",k.target.style.color="#374151")},onMouseLeave:k=>{Ka!==u.value&&(k.target.style.background="transparent",k.target.style.color="#6b7280")},children:u.label},u.value))})]}),Ka==="donations"&&t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a",fontSize:"0.9375rem"},children:"Filter by Donor Type:"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"8px",flexWrap:"wrap"},children:[{value:"all",label:"All"},{value:"member",label:"Members"},{value:"non-member",label:"Non-Members"}].map(u=>t.jsx("button",{type:"button",onClick:()=>re(u.value),style:{padding:"8px 16px",borderRadius:"6px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:L===u.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:L===u.value?"#ffffff":"#6b7280",boxShadow:L===u.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{L!==u.value&&(k.target.style.background="#e5e7eb",k.target.style.color="#374151")},onMouseLeave:k=>{L!==u.value&&(k.target.style.background="transparent",k.target.style.color="#6b7280")},children:u.label},u.value))})]})]}),t.jsxs("div",{children:[t.jsxs("h4",{style:{marginBottom:"16px",fontSize:"1.25rem",fontWeight:"700",color:"#1a1a1a"},children:[t.jsx("i",{className:"fas fa-list",style:{marginRight:"10px",color:"#5a31ea"}}),"Transactions"]}),t.jsx("div",{style:{overflow:"hidden",borderRadius:"8px",border:"1px solid #e5e7eb"},children:t.jsx("div",{className:"table-wrapper",style:{overflowX:"auto",width:"100%",maxWidth:"100%"},children:t.jsx(_i,{columns:["Date","Type","Member / Donor","Invoice ID","Amount","Method","Screenshot","Status","Actions"],rows:[...(nn.paymentsInRange||[]).map(_=>({..._,type:"Payment",source:_.member||"Unknown",amount:_.amount,method:_.method,screenshot:_.screenshot,status:_.status||"Completed",invoiceId:_.invoiceId,period:_.period,date:_.date||(_.createdAt?new Date(_.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),createdAt:_.createdAt||new Date(_.date||0)})),...(nn.donationsInRange||[]).map(_=>({..._,type:"Donation",source:_.donorName,amount:_.amount,method:_.method||"N/A",screenshot:_.screenshot||null,status:"Completed",invoiceId:null,period:null,date:_.date||(_.createdAt?new Date(_.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),createdAt:_.createdAt||new Date(_.date||0),isMember:_.isMember}))].sort((_,D)=>{const ae=_.createdAt?new Date(_.createdAt):new Date(_.date||0);return(D.createdAt?new Date(D.createdAt):new Date(D.date||0))-ae}).filter(_=>!(Ka==="payments"&&_.type!=="Payment"||Ka==="donations"&&_.type!=="Donation"||_.type==="Donation"&&(L==="member"&&!_.isMember||L==="non-member"&&_.isMember))).map(_=>(_._id||_.id,{Date:_.date||"N/A",Type:{render:()=>_.type==="Payment"?t.jsx("span",{className:"badge badge-paid",children:"Payment"}):t.jsx("span",{className:"badge badge-active",children:"Donation"})},"Member / Donor":_.source||"Unknown","Invoice ID":_.invoiceId||(_.type==="Donation","N/A"),Amount:_.amount||"$0",Method:_.type==="Payment"?Na(_):_.method||"N/A",Screenshot:{render:()=>_.screenshot?t.jsx("a",{href:_.screenshot,target:"_blank",rel:"noopener noreferrer",style:{color:"#5a31ea",textDecoration:"none"},title:"View screenshot","aria-label":"View screenshot",children:t.jsx("i",{className:"fas fa-image","aria-hidden":"true"})}):"N/A"},Status:{render:()=>t.jsx("span",{className:zi[_.status]||"badge badge-paid",children:_.status})},Actions:{render:()=>t.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:_.type==="Payment"&&_.invoiceId&&t.jsx("button",{className:"ghost-btn icon-btn icon-btn--view",onClick:()=>{const D=r.find(le=>le.id===_.invoiceId||le._id===_.invoiceId);if(!D){Ee("Invoice not found for this transaction","error");return}const ae=i.find(le=>le.id===D.memberId)||i.find(le=>le.name&&D.memberName&&le.name.toLowerCase()===D.memberName.toLowerCase());if(!ae){Ee("Member not found for this invoice","error");return}K(ae),Gt("member-detail"),Jt("Invoices")},title:"View Invoice",children:t.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})})})}}))})})})]})]})]}),jt==="export-reports"&&t.jsxs("article",{className:"screen-card",id:"export-reports",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Ma("export-reports"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-file-export",style:{marginRight:"10px"}}),"Export Reports"]}),t.jsx("p",{children:"Export financial data in various formats."})]})}),t.jsx("div",{className:"card",children:t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("h4",{style:{marginBottom:"12px"},children:"Export Options"}),t.jsx("p",{style:{color:"#666",marginBottom:"20px"},children:"Export your financial data in CSV or PDF format. Select a date range to export specific periods."})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"24px"},children:[t.jsxs("div",{className:"card",style:{padding:"20px",background:"linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"180px"},children:[t.jsxs("div",{children:[t.jsx("h4",{style:{marginBottom:"8px",fontSize:"1rem"},children:" CSV Export"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"16px"},children:"Export all transactions as a CSV file for Excel or spreadsheet applications."})]}),t.jsxs("button",{className:"secondary-btn",onClick:xi,style:{width:"100%",marginTop:"auto"},disabled:!it,title:it?"Export CSV":"Export allowed only for finance roles",children:[t.jsx("i",{className:"fas fa-file-csv",style:{marginRight:"8px"}}),"Export CSV"]})]}),t.jsxs("div",{className:"card",style:{padding:"20px",background:"linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"180px"},children:[t.jsxs("div",{children:[t.jsx("h4",{style:{marginBottom:"8px",fontSize:"1rem"},children:" PDF Export"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"16px"},children:"Generate a formatted PDF report with charts and summaries."})]}),t.jsxs("button",{className:"secondary-btn",onClick:vo,style:{width:"100%",marginTop:"auto"},disabled:!it,title:it?"Export PDF":"Export allowed only for finance roles",children:[t.jsx("i",{className:"fas fa-file-pdf",style:{marginRight:"8px"}}),"Export PDF"]})]})]}),t.jsxs("div",{style:{marginTop:"24px",padding:"16px",background:"#f8f9ff",borderRadius:"8px"},children:[t.jsxs("p",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"8px"},children:[t.jsx("strong",{children:"Note:"})," For detailed reports with date filters and analytics, visit the Financial Reports section."]}),t.jsxs("button",{className:"ghost-btn",onClick:()=>{Ra("reports"),Ee("Redirecting to Financial Reports...")},children:[t.jsx("i",{className:"fas fa-chart-bar",style:{marginRight:"8px"}}),"Go to Financial Reports"]})]})]})})]}),jt==="roles"&&_e&&t.jsxs("article",{className:"screen-card",id:"roles",children:[t.jsx("header",{className:"screen-card__header",children:t.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:t.jsxs("div",{children:[Ma("roles"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-user-shield",style:{marginRight:"10px"}}),"Roles"]}),t.jsx("p",{children:"Manage admin roles and permissions."})]})})}),t.jsx("div",{className:"card",children:t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h4",{style:{marginBottom:"12px"},children:"Available Roles"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginBottom:"24px"},children:[t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"2px solid #5a31ea"},children:[t.jsx("h5",{style:{margin:"0 0 8px 0",color:"#5a31ea"},children:"Admin"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#666",margin:0},children:"Full access to all features and settings"})]}),t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px"},children:[t.jsx("h5",{style:{margin:"0 0 8px 0"},children:"Finance"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#666",margin:0},children:"Can manage finances, invoices, and payments"})]}),t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px"},children:[t.jsx("h5",{style:{margin:"0 0 8px 0"},children:"Staff"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#666",margin:0},children:"Can manage members and view reports, no financial exports"})]}),t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px"},children:[t.jsx("h5",{style:{margin:"0 0 8px 0"},children:"Viewer"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#666",margin:0},children:"Read-only access to view data"})]})]})]}),t.jsx("div",{className:"table-wrapper",children:t.jsx(_i,{columns:["Name","Email","Role","Status","Actions"],rows:a.map(u=>({Name:u.name||"N/A",Email:u.email||"N/A",Role:{render:()=>t.jsx("span",{className:"badge badge-active",children:u.role||"Viewer"})},Status:{render:()=>t.jsx("span",{className:u.status==="Active"?"badge badge-active":u.status==="Pending"?"badge badge-pending":"badge badge-overdue",children:u.status||"Active"})},Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsx("button",{className:"ghost-btn icon-btn icon-btn--edit",onClick:async()=>{try{const k=["Admin","Finance","Staff","Viewer"],U=u.role||"Viewer",_=k.indexOf(U),D=_===-1?0:(_+1)%k.length,ae=k[D];await ue(u.id,{role:ae}),Ee(`${u.name}'s role updated to ${ae}`)}catch(k){Ee(k.message||"Failed to update role","error")}},title:"Change Role",children:t.jsx("i",{className:"fas fa-sync-alt","aria-hidden":"true"})}),(u.role||"Viewer")!=="Admin"&&t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",style:{color:"#ef4444"},onClick:async()=>{ri(`Remove ${u.name} from admin users?`,async()=>{try{await Ce(u.id),Ee(`${u.name} removed`),await z()}catch(k){Ee(k.message||"Failed to delete admin","error")}})},title:"Delete Admin",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}))})})]})})]}),jt==="org-settings"&&t.jsxs("article",{className:"screen-card",id:"org-settings",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Ma("org-settings"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-building",style:{marginRight:"10px"}}),"Organization Settings"]}),t.jsx("p",{children:"Manage organization information and preferences."})]})}),t.jsx("div",{className:"settings-container",children:t.jsxs("div",{className:"settings-card",children:[t.jsxs("div",{className:"settings-card__header",children:[t.jsx("h4",{className:"settings-card__title",children:"Organization Info"}),t.jsx("p",{className:"settings-card__subtitle",children:"Update your organization's contact information"})]}),t.jsxs("form",{noValidate:!0,onSubmit:u=>{u.preventDefault(),ie($a),Ee("Organization info updated!")},className:"settings-form",children:[t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Organization Name",t.jsx("input",{type:"text",className:"settings-form__input",value:$a.name,onChange:u=>as({...$a,name:u.target.value}),placeholder:"Subscription Manager HK"})]})}),t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Email",t.jsx("input",{type:"email",className:"settings-form__input",value:$a.email,onChange:u=>as({...$a,email:u.target.value}),placeholder:"support@subscriptionhk.org"})]})}),t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Phone",t.jsx("input",{type:"text",className:"settings-form__input",value:$a.phone,onChange:u=>as({...$a,phone:u.target.value}),placeholder:"+852 2800 1122"})]})}),t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Address",t.jsx("textarea",{className:"settings-form__input",value:$a.address,onChange:u=>as({...$a,address:u.target.value}),placeholder:"123 Central Street, Hong Kong",rows:3})]})}),t.jsxs("div",{className:"settings-form__group",children:[t.jsxs("label",{className:"settings-form__label",children:[t.jsx("i",{className:"fas fa-globe",style:{marginRight:"8px",color:"#5a31ea"}}),"Number Format Locale ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("select",{className:"settings-form__input",value:Ne,onChange:u=>{Re(u.target.value),Ee("Number format locale updated! Numbers will refresh automatically.","success")},style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"4px",fontSize:"0.875rem",color:"#1a1a1a",backgroundColor:"#ffffff",cursor:"pointer"},children:Sy().map(u=>t.jsx("option",{value:u.value,children:u.label},u.value))}),t.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"#666"},children:["Choose your preferred number format. Example: ",yr(123456789e-2,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),t.jsx("div",{className:"settings-form__actions",children:t.jsx("button",{type:"submit",className:"primary-btn",children:"Save Changes"})})]})]})})]}),jt==="settings"&&_e&&t.jsxs("article",{className:"screen-card",id:"settings",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Ma("settings"),t.jsx("h3",{children:"Admin Settings"}),t.jsx("p",{children:"Organization profile and admin accounts."})]})}),t.jsx("div",{className:"settings-container",children:t.jsxs("div",{className:"settings-card",children:[t.jsx("div",{className:"settings-card__header",children:t.jsxs("div",{className:"settings-card__header-content",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"settings-card__title",children:"User Management"}),t.jsx("p",{className:"settings-card__subtitle",children:"Manage admin users and their permissions"})]}),t.jsx("button",{className:"settings-card__add-btn secondary-btn",onClick:()=>{if(!_e){Ee("Only Admin can add new admin users","error");return}Wr(!0),Kn({name:"",email:"",password:"",role:"Viewer",status:"Active"})},disabled:!_e,title:_e?"Add a new admin user":"Only Admin can add admins",children:"+ Add Admin"})]})}),t.jsx("div",{className:"settings-table-wrapper",children:t.jsx(_i,{columns:["User","Role","Status","Actions"],rows:a.map(u=>({User:u.name,Role:u.role||"Viewer",Status:{render:()=>t.jsx("span",{className:(u.status||"Active")==="Active"?"badge badge-active":"badge badge-inactive",children:u.status||"Active"})},Actions:{render:()=>t.jsxs("div",{className:"settings-table__actions",children:[(u.status||"Active")==="Active"?t.jsx("button",{className:"ghost-btn settings-table__action-btn",onClick:async()=>{try{await ue(u.id,{status:"Inactive"}),Ee(`${u.name} deactivated`)}catch(k){Ee(k.message||"Failed to update admin","error")}},children:"Deactivate"}):t.jsx("button",{className:"secondary-btn settings-table__action-btn",onClick:async()=>{try{await ue(u.id,{status:"Active"}),Ee(`${u.name} activated`)}catch(k){Ee(k.message||"Failed to update admin","error")}},children:"Activate"}),(u.role||"Viewer")!=="Admin"&&t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",onClick:async()=>{ri(`Remove ${u.name} from admin users?`,async()=>{try{await Ce(u.id),Ee(`${u.name} removed`),await z()}catch(k){Ee(k.message||"Failed to delete admin","error")}})},title:"Remove Admin","aria-label":"Remove Admin",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}))})})]})}),Ws&&t.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:u=>{u.target===u.currentTarget&&Wr(!1)},children:t.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",background:"#f9fafb",position:"relative",padding:"24px 24px 20px"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"8px",margin:0},children:[t.jsx("i",{className:"fas fa-user-plus","aria-hidden":"true"}),"Add New Admin"]}),t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>Wr(!1),style:{fontSize:"1.5rem",lineHeight:1,color:"#ef4444",fontWeight:"bold",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",border:"1px solid #ef4444",background:"transparent",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:u=>{u.target.style.background="#fee2e2"},onMouseLeave:u=>{u.target.style.background="transparent"},"aria-label":"Close add admin form",children:""})]}),t.jsxs("form",{noValidate:!0,onSubmit:async u=>{if(u.preventDefault(),!xa.name){Ee("Please enter admin name","error");return}if(!xa.email){Ee("Please enter admin email","error");return}if(!xa.password){Ee("Please enter admin password","error");return}try{await Me(xa),Wr(!1),Kn({name:"",email:"",password:"",role:"Viewer",status:"Active"}),Ee("Admin user added!")}catch(k){Ee(k.message||"Failed to add admin user","error")}},className:"settings-form",children:[t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Name",t.jsx("input",{type:"text",className:"settings-form__input",required:!0,value:xa.name,onChange:u=>Kn({...xa,name:u.target.value}),placeholder:"Enter admin name"})]})}),t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Email",t.jsx("input",{type:"email",className:"settings-form__input",required:!0,value:xa.email,onChange:u=>Kn({...xa,email:u.target.value}),placeholder:"Enter admin email"})]})}),t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Password",t.jsx("input",{type:"password",className:"settings-form__input",required:!0,value:xa.password,onChange:u=>Kn({...xa,password:u.target.value}),placeholder:"Set a password"})]})}),t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Role",t.jsxs("select",{className:"settings-form__select",value:xa.role,onChange:u=>Kn({...xa,role:u.target.value}),children:[t.jsx("option",{children:"Admin"}),t.jsx("option",{children:"Finance"}),t.jsx("option",{children:"Staff"}),t.jsx("option",{children:"Viewer"})]})]})}),t.jsxs("div",{className:"settings-form__actions",children:[t.jsx("button",{type:"button",className:"ghost-btn settings-form__cancel",onClick:()=>Wr(!1),children:"Cancel"}),t.jsx("button",{type:"submit",className:"primary-btn settings-form__submit-btn",children:"Add Admin"})]})]})]})})]})]})]})]}),Eo&&$r&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:u=>{u.target===u.currentTarget&&(Ns(!1),qi(null),ir({paymentMethod:"Admin",imageFile:null,imagePreview:null,imageUrl:""}))},children:t.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-money-bill-wave",style:{marginRight:"8px",color:"#5a31ea"}}),"Pay Invoice #",$r.id]}),t.jsx("button",{type:"button",onClick:()=>{Ns(!1),qi(null),ir({paymentMethod:"Admin",imageFile:null,imagePreview:null,imageUrl:""})},style:{background:"transparent",border:"none",fontSize:"1.5rem",color:"#666",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:u=>{u.target.style.background="#f3f4f6",u.target.style.color="#1a1a1a"},onMouseLeave:u=>{u.target.style.background="transparent",u.target.style.color="#666"},children:""})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Amount:"}),t.jsx("strong",{style:{color:"#1a1a1a",fontSize:"1.125rem"},children:$r.amount})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Period:"}),t.jsx("span",{style:{color:"#1a1a1a"},children:$r.period})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Due Date:"}),t.jsx("span",{style:{color:"#1a1a1a"},children:$r.due})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"12px"},children:"Payment Method"}),t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[t.jsxs("button",{type:"button",onClick:()=>ir({...bn,paymentMethod:"Admin"}),style:{flex:"1",minWidth:"150px",padding:"12px 20px",borderRadius:"8px",border:"none",background:bn.paymentMethod==="Admin"?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#f8f9ff",color:bn.paymentMethod==="Admin"?"#ffffff":"#1a1a1a",boxShadow:bn.paymentMethod==="Admin"?"0 4px 12px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)",fontWeight:"600",fontSize:"0.9375rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[t.jsx("i",{className:"fas fa-user-shield"}),"Paid to Admin"]}),t.jsxs("button",{type:"button",onClick:()=>ir({...bn,paymentMethod:"Online"}),style:{flex:"1",minWidth:"150px",padding:"12px 20px",borderRadius:"8px",border:"none",background:bn.paymentMethod==="Online"?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#f8f9ff",color:bn.paymentMethod==="Online"?"#ffffff":"#1a1a1a",boxShadow:bn.paymentMethod==="Online"?"0 4px 12px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)",fontWeight:"600",fontSize:"0.9375rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[t.jsx("i",{className:"fas fa-globe"}),"Paid Online"]})]})]}),bn.paymentMethod==="Online"&&t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:["Reference Number ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",value:bn.reference,onChange:u=>{ir({...bn,reference:u.target.value}),Yn.reference&&aa({...Yn,reference:!1})},placeholder:"Enter payment reference number",style:{width:"100%",padding:"10px 12px",border:Yn.reference?"2px solid #ef4444":"1px solid #e0e0e0",borderRadius:"8px",fontSize:"0.875rem",outline:"none",transition:"border-color 0.2s",boxShadow:Yn.reference?"0 0 0 3px rgba(239, 68, 68, 0.1)":"none"},onFocus:u=>{Yn.reference||(u.target.style.borderColor="#5a31ea",u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1)")},onBlur:u=>{Yn.reference||(u.target.style.borderColor="#e0e0e0",u.target.style.boxShadow="none")}})]}),(bn.paymentMethod==="Admin"||bn.paymentMethod==="Online")&&t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"12px"},children:["Attachment Image ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("div",{style:{border:Yn.image?"2px dashed #ef4444":"2px dashed #d0d0d0",borderRadius:"8px",padding:"20px",textAlign:"center",background:Yn.image?"#fef2f2":"#fafafa",cursor:"pointer",transition:"all 0.2s ease",boxShadow:Yn.image?"0 0 0 3px rgba(239, 68, 68, 0.1)":"none"},onMouseEnter:u=>{Yn.image||(u.currentTarget.style.borderColor="#5a31ea",u.currentTarget.style.background="#f8f9ff")},onMouseLeave:u=>{Yn.image?(u.currentTarget.style.borderColor="#ef4444",u.currentTarget.style.background="#fef2f2"):(u.currentTarget.style.borderColor="#d0d0d0",u.currentTarget.style.background="#fafafa")},onClick:()=>{Yn.image&&aa({...Yn,image:!1});const u=document.createElement("input");u.type="file",u.accept="image/*",u.onchange=async k=>{const U=k.target.files[0];if(!U)return;if(!U.type.startsWith("image/")){Ee("Please upload an image file","error");return}const _=new FileReader;_.onloadend=()=>{ir(D=>({...D,imageFile:U,imagePreview:_.result})),aa(D=>({...D,image:!1}))},_.readAsDataURL(U)},u.click()},children:bn.imagePreview||$r.screenshot&&!bn.imageFile?t.jsxs("div",{style:{position:"relative"},children:[t.jsx("img",{src:bn.imagePreview||$r.screenshot,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"4px",marginBottom:"8px"}}),t.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),ir({...bn,imageFile:null,imagePreview:null,imageUrl:""}),aa(k=>({...k,image:!1}))},style:{position:"absolute",top:"8px",right:"8px",background:"#ef4444",color:"#fff",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem"},children:""})]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-cloud-upload-alt",style:{fontSize:"2rem",color:"#5a31ea",marginBottom:"8px"}}),t.jsx("p",{style:{margin:"0",color:"#666",fontSize:"0.875rem"},children:"Click to upload image"}),t.jsx("p",{style:{margin:"4px 0 0 0",color:"#999",fontSize:"0.75rem"},children:"PNG, JPG, GIF up to 5MB"})]})})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"8px"},children:[t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{Ns(!1),qi(null),ir({paymentMethod:"",imageFile:null,imagePreview:null,imageUrl:"",reference:""}),aa({image:!1,reference:!1})},disabled:_a,children:"Cancel"}),bn.paymentMethod&&t.jsx("button",{type:"button",className:"primary-btn",disabled:_a,onClick:async()=>{const u=bn.paymentMethod==="Online"?bn.reference.trim():!0;if(bn.paymentMethod==="Online"&&!u){aa({...Yn,reference:!0}),Ee("Reference number not entered. Please enter a reference number for online payments.","warning");return}if(!(bn.imageFile||bn.imageUrl||$r?.screenshot)){aa({...Yn,image:!0}),Ee("Image has not been uploaded. Please upload an image attachment.","warning");return}aa({image:!1,reference:!1}),ri(`Are you sure you want to mark Invoice #${$r.id} as paid?`,async()=>{ya(!0);try{const U="http://localhost:4000";let _=bn.imageUrl||$r.screenshot;if(bn.imageFile){const le=new FormData;le.append("screenshot",bn.imageFile),le.append("uploadType","invoice-payment-attachment");const Oe=await fetch(`${U}/api/upload/screenshot`,{method:"POST",body:le});if(!Oe.ok){let Ze="Failed to upload image";try{const Xe=await Oe.json();Ze=Xe.error||Ze,console.error("Upload error response:",Xe)}catch(Xe){console.error("Failed to parse error response:",Xe),Ze=`Upload failed with status ${Oe.status}`}throw new Error(Ze)}const Ie=await Oe.json();if(!Ie.url)throw new Error("No URL returned from upload. Please try again.");_=Ie.url}if(!_)throw new Error("Image upload is required for all payments");if(bn.paymentMethod==="Online"&&!bn.reference.trim())throw new Error("Reference number is required for online payments");_&&_!==$r.screenshot&&await xe($r.id,{screenshot:_});const D=bn.paymentMethod==="Admin"?"Cash":"Online",ae=bn.paymentMethod==="Online"?bn.reference.trim():null;await Xo($r.id,D,_,ae),Ns(!1),qi(null),ir({paymentMethod:"",imageFile:null,imagePreview:null,imageUrl:"",reference:""}),aa({image:!1,reference:!1}),Ee(`Invoice #${$r.id} marked as paid!`,"success")}catch(U){console.error("Error processing payment:",U),Ee(U.message||"Failed to process payment","error")}finally{ya(!1)}},null,"Confirm")},style:{opacity:_a?.6:1,cursor:_a?"not-allowed":"pointer"},children:_a?"Processing...":"Mark as Paid"})]})]})]})}),en&&Nn&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:u=>{u.target===u.currentTarget&&(Ja(!1),qs(null))},children:t.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-receipt",style:{marginRight:"8px",color:"#5a31ea"}}),"Payment Details"]}),t.jsx("button",{type:"button",onClick:()=>{Ja(!1),qs(null)},style:{background:"transparent",border:"none",fontSize:"1.5rem",color:"#666",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:u=>{u.target.style.background="#f3f4f6",u.target.style.color="#1a1a1a"},onMouseLeave:u=>{u.target.style.background="transparent",u.target.style.color="#666"},children:""})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[Nn.date&&t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsx("span",{style:{display:"block",color:"#666",fontSize:"0.875rem",marginBottom:"4px"},children:"Date"}),t.jsx("strong",{style:{color:"#1a1a1a",fontSize:"1rem"},children:Nn.date})]}),Nn.amount&&t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsx("span",{style:{display:"block",color:"#666",fontSize:"0.875rem",marginBottom:"4px"},children:"Amount"}),t.jsx("strong",{style:{color:"#5a31ea",fontSize:"1.25rem",fontWeight:"700"},children:Nn.amount})]}),Nn.status&&t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsx("span",{style:{display:"block",color:"#666",fontSize:"0.875rem",marginBottom:"4px"},children:"Status"}),t.jsx("span",{className:`badge ${Nn.status==="Paid"||Nn.status==="Completed"?"badge-paid":Nn.status==="Pending Verification"||Nn.status==="Pending"?"badge-pending":"badge-unpaid"}`,style:{fontSize:"0.875rem",padding:"6px 12px",display:"inline-block",marginTop:"4px"},children:Nn.status})]}),t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsx("span",{style:{display:"block",color:"#666",fontSize:"0.875rem",marginBottom:"4px"},children:"Payment Method"}),t.jsx("strong",{style:{color:"#1a1a1a",fontSize:"1rem"},children:Na(Nn)})]})]}),t.jsxs("div",{style:{padding:"20px",background:"#fafafa",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"1rem",fontWeight:"600",color:"#333"},children:"Additional Information"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[Nn.reference&&Nn.reference!=="N/A"&&Nn.reference!=="-"&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Reference:"}),t.jsx("strong",{style:{fontSize:"0.875rem",fontFamily:"monospace",color:"#1a1a1a"},children:Nn.reference})]}),Nn.paidToAdminName&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Paid to:"}),t.jsx("strong",{style:{fontSize:"0.875rem",color:"#1a1a1a"},children:Nn.paidToAdminName})]}),Nn.period&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Period:"}),t.jsx("strong",{style:{fontSize:"0.875rem",color:"#1a1a1a"},children:Nn.period})]}),Nn.member&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Member:"}),t.jsx("strong",{style:{fontSize:"0.875rem",color:"#1a1a1a"},children:Nn.member})]}),Nn.memberEmail&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Email:"}),t.jsx("strong",{style:{fontSize:"0.875rem",color:"#1a1a1a"},children:Nn.memberEmail})]}),Nn.invoiceId&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Invoice ID:"}),t.jsx("strong",{style:{fontSize:"0.875rem",fontFamily:"monospace",color:"#1a1a1a"},children:Nn.invoiceId})]}),Nn.notes&&t.jsxs("div",{style:{marginTop:"8px",paddingTop:"12px",borderTop:"1px solid #e0e0e0"},children:[t.jsx("span",{style:{display:"block",fontSize:"0.875rem",color:"#666",marginBottom:"4px"},children:"Notes:"}),t.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1a1a1a"},children:Nn.notes})]})]})]}),Nn.screenshot&&t.jsxs("div",{children:[t.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"1rem",fontWeight:"600",color:"#333"},children:[t.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#5a31ea"}}),"Payment Screenshot"]}),t.jsx("div",{style:{border:"1px solid #e0e0e0",borderRadius:"8px",overflow:"hidden",background:"#fafafa"},children:t.jsx("img",{src:Nn.screenshot,alt:"Payment Screenshot",style:{width:"100%",height:"auto",display:"block",cursor:"pointer"},onClick:()=>{const u=window.open();u&&u.document.write(`
                            <html>
                              <head><title>Payment Screenshot</title></head>
                              <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                                <img src="${Nn.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                              </body>
                            </html>
                          `)}})}),t.jsxs("button",{type:"button",onClick:()=>{const u=window.open();u&&u.document.write(`
                          <html>
                            <head><title>Payment Screenshot</title></head>
                            <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                              <img src="${Nn.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                            </body>
                          </html>
                        `)},className:"primary-btn",style:{width:"100%",marginTop:"12px",padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[t.jsx("i",{className:"fas fa-expand"}),"Open Screenshot in New Window"]})]}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"8px"},children:t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{Ja(!1),qs(null)},children:"Close"})})]})]})}),t.jsx(Yl,{})]})}function ky(){const{members:i,admins:a,invoices:r,payments:o,paymentHistory:c,addPayment:l,updateInvoice:g,updateMember:p,fetchInvoices:m,fetchPayments:v,fetchMembers:j,loading:A}=Qd(),R=[{id:"dashboard",label:"Dashboard"},{id:"pay",label:"Pay Now"},{id:"invoices",label:"Invoices"},{id:"history",label:"Payment History"},{id:"profile",label:"Profile"}],[b,z]=X.useState(R[0].id),[M,E]=X.useState("Online Payment"),[P,q]=X.useState([]),[K,H]=X.useState(""),[fe,de]=X.useState(null),[Pe,xe]=X.useState(!1),[Z,ge]=X.useState(null),[B,$]=X.useState(!1),[ee,ie]=X.useState(null),[Ne,Re]=X.useState("success"),[Me,ue]=X.useState(!1),[Ce,Le]=X.useState(!1),[Q,C]=X.useState(!1),[G,J]=X.useState(!1),[oe,pe]=X.useState(1),[be,Fe]=X.useState(10),De=sessionStorage.getItem("memberEmail"),Ue=sessionStorage.getItem("memberId"),_e=Ue?i.find(ke=>ke.id===Ue):De?i.find(ke=>ke.email&&ke.email.toLowerCase()===De.toLowerCase()):null,[at,ot]=X.useState(()=>_e?{name:_e.name||"",email:_e.email||"",phone:_e.phone||"",password:"",emailReminders:!0,whatsappReminders:!0}:{name:"",email:"",phone:"",password:"",emailReminders:!0,whatsappReminders:!0});X.useEffect(()=>{_e&&ot({name:_e.name||"",email:_e.email||"",phone:_e.phone||"",password:"",emailReminders:!0,whatsappReminders:!0})},[_e,i]),X.useEffect(()=>{(De||Ue)&&!_e&&!A&&i.length===0&&j()},[De,Ue,_e,A,i.length]),X.useEffect(()=>{b==="history"&&pe(1)},[be,b]),X.useEffect(()=>{(b==="invoices"||b==="history")&&(m(),v())},[b]),X.useEffect(()=>{const ke=qe=>{Q&&!qe.target.closest(".admin-menu")&&!qe.target.closest(".mobile-menu-toggle")&&C(!1)};return Q?(document.addEventListener("click",ke),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("click",ke),document.body.style.overflow=""}},[Q]);const it=po();Om(15);const Y=ke=>{z(ke),$(!1)},mt=()=>{it("/login",{replace:!0})},Mt=(ke,qe="success")=>{ie(ke),Re(qe),setTimeout(()=>ie(null),3e3)},Ct=ke=>{const qe=(o||c||[]).find(se=>se.invoiceId===ke.id);if(qe){if(qe.status==="Pending")return"Pending Verification";if(qe.status==="Completed")return"Paid";if(qe.status==="Rejected")return"Unpaid"}return ke.status},Qe=()=>_e?r.filter(ke=>{const qe=Ct(ke);return(ke.memberId===_e.id||ke.memberEmail===_e.email||ke.memberName===_e.name)&&(qe==="Unpaid"||qe==="Overdue")}):[],bt=()=>Qe().map(qe=>({label:qe.period,due:qe.due,amount:qe.amount,status:qe.status,id:qe.id})),gt=()=>P.reduce((ke,qe)=>{const se=r.find(je=>je.id===qe);return se?ke+parseFloat(se.amount.replace("$","")):ke},0),Rt=ke=>{P.includes(ke)?q(P.filter(qe=>qe!==ke)):q([...P,ke])},Ft=async ke=>{if(ke.preventDefault(),P.length===0){Mt("Please select at least one invoice","error");return}if(!fe){Mt("Please upload a payment screenshot","error");return}xe(!0);try{const qe="http://localhost:4000",se=new FormData;se.append("screenshot",fe);const je=await fetch(`${qe}/api/upload-screenshot`,{method:"POST",body:se});if(!je.ok){let He="Failed to upload screenshot";try{const ct=await je.json();He=ct.error||He,console.error("Upload error response:",ct)}catch(ct){console.error("Failed to parse error response:",ct),He=`Upload failed with status ${je.status}`}throw new Error(He)}const nt=await je.json();if(!nt.url)throw new Error("No URL returned from upload. Please try again.");const pt=nt.url;for(const He of P){const ct=r.find(Qt=>Qt.id===He);ct&&(await g(He,{status:"Pending Verification",method:"Screenshot",reference:`PENDING_${Date.now()}`,screenshot:pt}),await l({invoiceId:He,amount:ct.amount,method:"Screenshot",reference:`PENDING_${Date.now()}`,member:_e?.name||"Member",memberId:_e?.id,memberEmail:_e?.email,period:ct.period,status:"Pending",screenshot:pt}))}de(null),q([]),$(!0),Mt(`Payment proof submitted successfully! ${P.length} invoice(s) pending admin approval.`)}catch(qe){console.error("Error submitting payment:",qe),Mt(qe.message||"Failed to submit payment. Please try again.","error")}finally{xe(!1)}},jt=async ke=>{if(ke.preventDefault(),P.length===0){Mt("Please select at least one invoice","error");return}if(!K){Mt("Please select the admin you paid to","error");return}xe(!0);try{const qe=a.find(je=>je.id===K);if(!qe){Mt("Admin not found","error");return}let se=null;if(fe){const je="http://localhost:4000",nt=new FormData;nt.append("screenshot",fe);const pt=await fetch(`${je}/api/upload-screenshot`,{method:"POST",body:nt});if(!pt.ok){let ct="Failed to upload screenshot";try{const Qt=await pt.json();ct=Qt.error||ct,console.error("Upload error response:",Qt)}catch(Qt){console.error("Failed to parse error response:",Qt),ct=`Upload failed with status ${pt.status}`}throw new Error(ct)}const He=await pt.json();if(!He.url)throw new Error("No URL returned from upload. Please try again.");se=He.url}for(const je of P){const nt=r.find(pt=>pt.id===je);nt&&(await g(je,{status:"Pending Verification",method:"Cash to Admin",reference:`CASH_PENDING_${Date.now()}`,paidToAdmin:qe.id,paidToAdminName:qe.name,screenshot:se}),await l({invoiceId:je,amount:nt.amount,method:"Cash to Admin",reference:`CASH_PENDING_${Date.now()}`,member:_e?.name||"Member",memberId:_e?.id,memberEmail:_e?.email,period:nt.period,status:"Pending",paidToAdmin:qe.id,paidToAdminName:qe.name,screenshot:se}))}q([]),H(""),de(null),$(!0),Mt(`Payment submitted successfully! ${P.length} invoice(s) pending admin approval.`)}catch(qe){console.error("Error submitting payment:",qe),Mt(qe.message||"Failed to submit payment. Please try again.","error")}finally{xe(!1)}},Gt=async ke=>{if(ke.preventDefault(),!_e){Mt("Member not found","error");return}try{const qe={name:at.name,email:at.email,phone:at.phone};if(at.password&&at.password.trim()!==""){if(at.password.length<6){Mt("Password must be at least 6 characters long","error");return}qe.password=at.password}await p(_e.id,qe),Mt("Profile updated successfully!"),ue(!1),ot({...at,password:""})}catch(qe){console.error("Error updating profile:",qe),Mt("Failed to update profile. Please try again.","error")}},Jt=(()=>{const ke=Qe(),qe=ke.reduce((ct,Qt)=>{const yt=parseFloat(Qt.amount?.replace(/[^0-9.]/g,"")||0);return ct+yt},0),se=new Date().getFullYear();let pt=(_e?c.filter(ct=>(ct.memberId===_e.id||ct.memberEmail===_e.email||ct.member===_e.name)&&(ct.status==="Paid"||ct.status==="Completed")):c.filter(ct=>ct.status==="Paid"||ct.status==="Completed")).filter(ct=>ct.date?new Date(ct.date).getFullYear()===se:!1).reduce((ct,Qt)=>{const yt=parseFloat(Qt.amount?.replace(/[^0-9.]/g,"")||0);return ct+yt},0);pt===0&&(pt=r.filter(yt=>yt.status==="Paid"&&(yt.memberId===_e?.id||yt.memberEmail===_e?.email||yt.memberName===_e?.name)).filter(yt=>yt.due?new Date(yt.due).getFullYear()===se:!0).reduce((yt,vn)=>yt+parseFloat(vn.amount.replace("$","")),0));const He=ke.sort((ct,Qt)=>new Date(ct.due)-new Date(Qt.due))[0];return{outstanding:qe,paidThisYear:pt,nextDue:He?.due||"N/A",nextDueAmount:He?.amount||"$0"}})();return A||(De||Ue)&&!_e&&i.length===0?t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",gap:"16px",background:"linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)"},children:[t.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTop:"4px solid #5a31ea",borderRadius:"50%",animation:"spin 1s linear infinite"}}),t.jsx("p",{style:{color:"#1a1a1a",fontSize:"1rem",fontWeight:"500"},children:A?"Loading data from server...":"Loading member information..."}),t.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]}):(De||Ue)&&!A&&i.length>0&&!_e?t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",gap:"16px",background:"linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)",padding:"20px"},children:[t.jsx("div",{style:{fontSize:"3rem",color:"#ef4444",marginBottom:"16px"},children:""}),t.jsx("p",{style:{color:"#1a1a1a",fontSize:"1.125rem",fontWeight:"600",marginBottom:"8px"},children:"Member Not Found"}),t.jsx("p",{style:{color:"#666",fontSize:"0.875rem",textAlign:"center",marginBottom:"24px"},children:"We couldn't find your member account. Please contact support or try logging in again."}),t.jsx("button",{onClick:()=>{sessionStorage.clear(),it("/login")},className:"primary-btn",style:{padding:"12px 24px"},children:"Return to Login"})]}):t.jsxs(t.Fragment,{children:[t.jsx(Vl,{showCTA:!1,showLogout:!0,onLogout:mt,showMobileMenu:!0,isMobileMenuOpen:Q,onMobileMenuToggle:()=>C(!Q),isSticky:!0}),t.jsx(Gl,{message:ee,type:Ne,onClose:()=>ie(null),duration:3e3}),t.jsxs("main",{className:"admin-main admin-main--sticky-header",children:[Q&&t.jsx("div",{className:"mobile-menu-overlay",onClick:()=>C(!1)}),t.jsxs("div",{className:"admin-layout",children:[t.jsxs("aside",{className:`admin-menu ${Q?"mobile-open":""}`,onClick:ke=>ke.stopPropagation(),children:[t.jsx("p",{className:"eyebrow light",children:"Member Portal"}),t.jsx("h3",{children:_e?.name||"Member"}),t.jsx("nav",{children:R.map(ke=>t.jsx("button",{className:`admin-tab ${b===ke.id?"active":""}`,onClick:()=>{Y(ke.id),C(!1)},children:ke.label},ke.id))})]}),t.jsxs("div",{className:"admin-body",children:[b==="dashboard"&&t.jsxs("article",{className:"screen-card",id:"dashboard",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-chart-line",style:{marginRight:"10px"}}),"Dashboard"]}),t.jsxs("p",{children:["Welcome back, ",_e?.name?.split(" ")[0]||"Member",". Here's an overview of your membership account."]})]})}),t.jsxs("div",{className:"card dashboard-card",children:[Jt.outstanding>0&&!Ce&&t.jsxs("div",{className:"alert-banner alert-warning",style:{marginBottom:"24px"},children:[t.jsxs("div",{className:"alert-content",children:[t.jsx("strong",{children:"Payment Due Soon"}),t.jsxs("p",{children:["You have an outstanding balance of $",Jt.outstanding.toFixed(2),". Please pay to avoid late fees."]})]}),t.jsx("button",{className:"alert-dismiss",onClick:()=>Le(!0),style:{cursor:"pointer"},children:""})]}),t.jsxs("div",{className:"kpi-grid",children:[t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-exclamation-circle",style:{marginRight:"8px",color:"#ef4444"}}),"Outstanding Balance"]}),t.jsxs("h4",{children:["$",Jt.outstanding.toFixed(2)]}),t.jsxs("small",{children:[Qe().length," invoice(s) pending"]})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-calendar-alt",style:{marginRight:"8px",color:"#5a31ea"}}),"Next Due Date"]}),t.jsx("h4",{children:Jt.nextDue}),t.jsx("small",{children:Jt.nextDueAmount})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-check-circle",style:{marginRight:"8px",color:"#10b981"}}),"Paid This Year"]}),t.jsxs("h4",{children:["$",parseFloat(Jt.paidThisYear).toFixed(2)]}),t.jsx("small",{children:"On track"})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-user-check",style:{marginRight:"8px",color:"#5a31ea"}}),"Membership Plan"]}),t.jsx("h4",{children:"Active"}),t.jsx("small",{children:"Lifetime: $250/year or Yearly + Janaza Fund: $500/year"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginTop:"24px"},children:[t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header-flex",children:[t.jsxs("h4",{children:[t.jsx("i",{className:"fas fa-clock",style:{marginRight:"8px"}}),"Upcoming Payments"]}),t.jsx("span",{className:"badge-count",children:bt().length})]}),t.jsx("div",{className:"payment-list",children:bt().slice(0,3).map(ke=>t.jsxs("div",{className:"payment-item",children:[t.jsxs("div",{className:"payment-info",children:[t.jsx("strong",{className:"payment-title",children:ke.label}),t.jsxs("span",{className:"payment-date",children:["Due ",ke.due]})]}),t.jsxs("div",{className:"payment-right",children:[t.jsx("span",{className:"payment-amount",children:ke.amount}),t.jsx("span",{className:zi[ke.status],children:ke.status})]})]},ke.id))}),t.jsx("button",{className:"btn-link",onClick:()=>Y("invoices"),children:"View All Invoices "})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header-flex",children:t.jsxs("h4",{children:[t.jsx("i",{className:"fas fa-history",style:{marginRight:"8px"}}),"Recent Activity"]})}),t.jsx("div",{className:"activity-list",children:(()=>{const qe=(_e?c.filter(se=>se.memberId===_e.id||se.memberEmail===_e.email||se.member===_e.name):c).slice(0,3);return qe.length===0?t.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#666",fontSize:"0.9rem"},children:"No recent payments"}):qe.map((se,je)=>t.jsx("div",{className:"activity-item",children:t.jsxs("div",{className:"activity-details",children:[t.jsx("strong",{children:"Payment Made"}),t.jsxs("span",{children:[se.date,"  ",se.amount," via ",se.paidToAdmin||se.paidToAdminName||se.method==="Cash to Admin"?"Cash":["Screenshot","Bank Transfer","FPS","PayMe","Alipay","Credit Card","Online Payment"].includes(se.method)?"Online Payment":se.method||"N/A",se.paidToAdminName&&`  Paid to ${se.paidToAdminName}`,se.reference&&`  Ref: ${se.reference}`]})]})},je))})()}),(_e?c.filter(qe=>qe.memberId===_e.id||qe.memberEmail===_e.email||qe.member===_e.name):c).length>0&&t.jsx("button",{className:"btn-link",onClick:()=>Y("history"),children:"View Payment History "})]}),t.jsxs("div",{className:"card quick-actions-card",children:[t.jsxs("h4",{children:[t.jsx("i",{className:"fas fa-bolt",style:{marginRight:"8px"}}),"Quick Actions"]}),t.jsxs("div",{className:"quick-actions-grid",children:[t.jsxs("button",{className:"quick-action-btn",onClick:()=>Y("pay"),children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"8px"}}),t.jsx("span",{className:"action-label",children:"Pay Now"})]}),t.jsxs("button",{className:"quick-action-btn",onClick:()=>Y("invoices"),children:[t.jsx("i",{className:"fas fa-file-invoice",style:{marginRight:"8px"}}),t.jsx("span",{className:"action-label",children:"View Invoices"})]}),t.jsxs("button",{className:"quick-action-btn",onClick:()=>Y("history"),children:[t.jsx("i",{className:"fas fa-list-alt",style:{marginRight:"8px"}}),t.jsx("span",{className:"action-label",children:"Payment History"})]}),t.jsxs("button",{className:"quick-action-btn",onClick:()=>Y("profile"),children:[t.jsx("i",{className:"fas fa-cog",style:{marginRight:"8px"}}),t.jsx("span",{className:"action-label",children:"Settings"})]})]})]})]})]})]}),b==="pay"&&t.jsxs("article",{className:"screen-card",id:"pay",children:[t.jsxs("header",{className:"screen-card__header",children:[t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"10px"}}),"Pay Now"]}),t.jsx("p",{children:"Select invoices and choose your payment method."})]}),B?t.jsxs("div",{className:"card",style:{textAlign:"center",padding:"40px"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("h2",{children:"Payment Submitted"}),t.jsx("p",{style:{color:"#666",marginBottom:"24px"},children:"Your payment has been submitted successfully."}),t.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[t.jsx("button",{className:"primary-btn",onClick:()=>Y("dashboard"),children:"Back to Dashboard"}),t.jsx("button",{className:"secondary-btn",onClick:()=>{$(!1),Y("invoices")},children:"View Invoices"})]})]}):t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"invoice-selection-section",style:{marginBottom:"32px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"12px"},children:[t.jsx("h4",{style:{margin:0},children:"Select Invoices to Pay"}),Qe().length>0&&t.jsx("button",{type:"button",className:"ghost-btn",style:{fontSize:"0.875rem",padding:"6px 12px"},onClick:()=>{P.length===Qe().length?q([]):q(Qe().map(ke=>ke.id))},children:P.length===Qe().length?"Deselect All":"Select All"})]}),Qe().length===0?t.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:t.jsx("p",{style:{margin:0,fontSize:"1rem"},children:"No unpaid invoices available."})}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px",marginBottom:"24px"},children:Qe().map(ke=>{const qe=P.includes(ke.id);return t.jsxs("label",{style:{display:"flex",flexDirection:"column",padding:"16px",border:`2px solid ${qe?"#5a31ea":"#e0e0e0"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:qe?"rgba(0, 0, 0, 0.02)":"#fff",position:"relative"},onMouseEnter:se=>{qe||(se.currentTarget.style.borderColor="#ccc")},onMouseLeave:se=>{qe||(se.currentTarget.style.borderColor="#e0e0e0")},children:[t.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[t.jsx("input",{type:"checkbox",checked:qe,onChange:()=>Rt(ke.id),style:{marginTop:"2px",width:"18px",height:"18px",cursor:"pointer",flexShrink:0}}),t.jsxs("div",{style:{flex:1,minWidth:0},children:[t.jsx("div",{style:{fontWeight:"600",fontSize:"0.95rem",marginBottom:"4px",color:"#5a31ea"},children:ke.period}),t.jsxs("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"8px"},children:["Due: ",ke.due]})]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto",paddingTop:"12px",borderTop:"1px solid #e5e7eb"},children:[t.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#1a1a1a"},children:ke.amount}),t.jsx("span",{className:zi[Ct(ke)],style:{fontSize:"0.75rem",padding:"4px 8px"},children:Ct(ke)})]})]},ke.id)})}),P.length>0&&t.jsx("div",{style:{padding:"20px",backgroundColor:"#f8f8f8",borderRadius:"8px",border:"1px solid #e0e0e0"},children:t.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"4px"},children:[P.length," invoice",P.length>1?"s":""," selected"]}),t.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#5a31ea"},children:["Total: $",gt().toFixed(2)]})]})})})]}),P.length>0&&t.jsxs("div",{className:"payment-methods",children:[t.jsxs("div",{className:"tabs",children:[t.jsx("button",{className:`tab ${M==="Online Payment"?"active":""}`,onClick:()=>E("Online Payment"),children:"Online Payment"}),t.jsx("button",{className:`tab ${M==="Cash Payment"?"active":""}`,onClick:()=>E("Cash Payment"),children:"Cash Payment"})]}),M==="Online Payment"&&t.jsxs("form",{className:"method-panel",onSubmit:Ft,noValidate:!0,children:[t.jsx("p",{style:{marginBottom:"16px",color:"#666"},children:"Upload a screenshot of your payment confirmation for the selected invoice(s). All selected invoices will be marked as paid once the screenshot is uploaded."}),t.jsxs("label",{children:["Upload Payment Screenshot *",t.jsx("input",{type:"file",accept:"image/*",required:!0,onInvalid:ke=>ke.preventDefault(),onChange:ke=>de(ke.target.files[0])}),fe&&t.jsxs("div",{style:{marginTop:"8px",fontSize:"0.875rem",color:"#666"},children:["Selected: ",fe.name]})]}),t.jsx("button",{type:"submit",className:"primary-btn",style:{marginTop:"16px"},disabled:Pe,children:Pe?"Uploading...":`Pay $${gt().toFixed(2)}`})]}),M==="Cash Payment"&&t.jsxs("form",{className:"method-panel",onSubmit:jt,noValidate:!0,children:[t.jsx("p",{style:{marginBottom:"16px",color:"#666"},children:"Select the admin you paid to. You can optionally upload a payment screenshot as proof. All selected invoices will be pending admin approval."}),t.jsxs("label",{children:["Select Admin You Paid To *",t.jsxs("select",{required:!0,onInvalid:ke=>ke.preventDefault(),value:K||"",onChange:ke=>H(ke.target.value),style:{color:"#000"},children:[t.jsx("option",{value:"",children:"Choose an admin"}),a.filter(ke=>ke.status==="Active").map(ke=>t.jsxs("option",{value:ke.id,children:[ke.name," (",ke.email,")"]},ke.id))]})]}),t.jsxs("label",{children:["Upload Payment Screenshot (Optional)",t.jsx("input",{type:"file",accept:"image/*",onChange:ke=>de(ke.target.files[0])}),fe&&t.jsxs("div",{style:{marginTop:"8px",fontSize:"0.875rem",color:"#666"},children:["Selected: ",fe.name]})]}),t.jsx("button",{type:"submit",className:"primary-btn",style:{marginTop:"16px"},disabled:Pe,children:Pe?"Uploading...":`Pay $${gt().toFixed(2)}`})]})]}),P.length===0&&t.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666",border:"2px dashed #e0e0e0",borderRadius:"8px"},children:t.jsx("p",{style:{margin:0,fontSize:"1rem"},children:"Please select at least one invoice above to proceed with payment."})})]})]}),b==="invoices"&&t.jsxs("article",{className:"screen-card",id:"invoices",children:[t.jsxs("header",{className:"screen-card__header",children:[t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-file-invoice-dollar",style:{marginRight:"10px"}}),"My Invoices"]}),t.jsx("p",{children:"View all your invoices and payment status."})]}),t.jsx("div",{className:"card",children:(()=>{if(!r||!Array.isArray(r))return t.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"Loading invoices..."});const ke=_e?r.filter(qe=>qe&&(qe.memberId===_e.id||qe.memberEmail===_e.email||qe.memberName===_e.name)):r;return ke.length===0?t.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:t.jsx("p",{children:"No invoices found."})}):t.jsx(_i,{columns:["Invoice No","Period","Amount","Status","Due Date","Action"],rows:ke.map(qe=>{if(!qe)return null;const se=Ct(qe);return{"Invoice No":qe.id||"N/A",Period:qe.period||"N/A",Amount:qe.amount||"$0",Status:{render:()=>t.jsx("span",{className:zi[se]||"badge badge-unpaid",children:se})},"Due Date":qe.due||"N/A",Action:{render:()=>se==="Paid"||se==="Pending Verification"?t.jsx("button",{className:"ghost-btn",style:{padding:"6px 12px"},onClick:()=>ge(qe),children:"View"}):t.jsx("button",{className:"primary-btn",style:{padding:"6px 12px"},onClick:()=>{q([qe.id]),Y("pay")},children:"Pay Now"})}}}).filter(qe=>qe!==null)})})()})]}),Z&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},onClick:()=>ge(null),children:t.jsxs("div",{style:{background:"#fff",borderRadius:"12px",padding:"32px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 8px 24px rgba(0,0,0,0.2)"},onClick:ke=>ke.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[t.jsx("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"700"},children:"Invoice Details"}),t.jsx("button",{onClick:()=>ge(null),style:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"#666",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:ke=>{ke.target.style.background="#f3f4f6",ke.target.style.color="#000"},onMouseLeave:ke=>{ke.target.style.background="transparent",ke.target.style.color="#666"},children:""})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t.jsxs("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Invoice ID:"}),t.jsx("strong",{children:Z.id})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Period:"}),t.jsx("strong",{children:Z.period})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Amount:"}),t.jsx("strong",{style:{fontSize:"1.25rem",color:"#000"},children:Z.amount})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Due Date:"}),t.jsx("strong",{children:Z.due})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Status:"}),t.jsx("span",{className:zi[Ct(Z)],children:Ct(Z)})]})]}),Ct(Z)==="Pending Verification"&&t.jsxs("div",{style:{padding:"16px",background:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107",marginBottom:"16px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[t.jsx("span",{style:{fontSize:"1.25rem"},children:""}),t.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"600",color:"#856404"},children:"Payment Pending Approval"})]}),t.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#856404"},children:"Your payment has been submitted and is awaiting admin approval. You will be notified once it's reviewed."}),Z.method&&t.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #ffc107"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#856404",fontSize:"0.875rem"},children:"Payment Method:"}),t.jsx("strong",{style:{color:"#856404"},children:Z.method})]})})]}),Ct(Z)==="Paid"&&t.jsxs("div",{style:{padding:"16px",background:"#f0f8ff",borderRadius:"8px",border:"1px solid #1677FF"},children:[t.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"1rem",fontWeight:"600"},children:"Payment Information"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Payment Method:"}),t.jsx("strong",{children:Z.paidToAdmin||Z.paidToAdminName||Z.method==="Cash to Admin"?"Cash":["Screenshot","Bank Transfer","FPS","PayMe","Alipay","Credit Card","Online Payment"].includes(Z.method)?"Online Payment":Z.method||"N/A"})]}),Z.reference&&Z.reference!=="-"&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Reference:"}),t.jsx("strong",{children:Z.reference})]}),Z.paidToAdminName&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Paid to:"}),t.jsx("strong",{children:Z.paidToAdminName})]})]})]}),Z.screenshot&&t.jsxs("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[t.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"1rem",fontWeight:"600"},children:"Payment Screenshot"}),t.jsx("button",{onClick:()=>{const ke=window.open();ke&&ke.document.write(`
                                <html>
                                  <head><title>Payment Screenshot - ${Z.id}</title></head>
                                  <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                                    <img src="${Z.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                                  </body>
                                </html>
                              `)},style:{width:"100%",padding:"12px",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.3)"},onMouseEnter:ke=>{ke.target.style.background="linear-gradient(135deg, #4a28d0 0%, #6b3fff 100%)",ke.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.4)"},onMouseLeave:ke=>{ke.target.style.background="linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",ke.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.3)"},children:t.jsx("span",{style:{color:"#ffffff"},children:" View Full Screenshot"})}),t.jsx("img",{src:Z.screenshot,alt:"Payment Screenshot Preview",style:{width:"100%",maxHeight:"300px",objectFit:"contain",borderRadius:"8px",marginTop:"12px",border:"1px solid #e0e0e0"}})]})]}),t.jsx("div",{style:{marginTop:"24px",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{onClick:()=>ge(null),style:{padding:"10px 20px",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.3)"},onMouseEnter:ke=>{ke.target.style.background="linear-gradient(135deg, #4a28d0 0%, #6b3fff 100%)",ke.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.4)"},onMouseLeave:ke=>{ke.target.style.background="linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",ke.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.3)"},children:"Close"})})]})}),b==="history"&&t.jsxs("article",{className:"screen-card",id:"history",children:[t.jsxs("header",{className:"screen-card__header",children:[t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-history",style:{marginRight:"10px"}}),"Payment History"]}),t.jsx("p",{children:"Complete record of all your payments."})]}),t.jsx("div",{style:{marginTop:"24px"},children:(()=>{const ke=_e?c.filter(He=>He.memberId===_e.id||He.memberEmail===_e.email||He.member===_e.name):c,qe=Math.ceil(ke.length/be),se=Math.min(Math.max(1,oe),qe||1),je=se*be,nt=je-be,pt=ke.slice(nt,je);return ke.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("p",{style:{margin:0,fontSize:"1.125rem",fontWeight:"500"},children:"No payment history yet"}),t.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.9375rem",color:"#999"},children:"Your payment records will appear here"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsxs("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("i",{className:"fas fa-list",style:{color:"#5a31ea"}}),"Show:"]}),t.jsxs("select",{value:be,onChange:He=>{Fe(Number(He.target.value)),pe(1)},style:{padding:"8px 12px",border:"none",borderRadius:"8px",background:"#f8f9ff",color:"#1a1a1a",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.08)",outline:"none"},children:[t.jsx("option",{value:2,children:"2"}),t.jsx("option",{value:5,children:"5"}),t.jsx("option",{value:10,children:"10"}),t.jsx("option",{value:20,children:"20"}),t.jsx("option",{value:50,children:"50"}),t.jsx("option",{value:100,children:"100"})]}),t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"per page"})]}),t.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["Showing ",nt+1," to ",Math.min(je,ke.length)," of ",ke.length," payments"]})]}),t.jsx("div",{className:"payment-history-list",style:{marginBottom:"24px"},children:pt.map((He,ct)=>{const Qt=He.paidToAdmin||He.paidToAdminName||He.method==="Cash to Admin"?"Cash":["Screenshot","Bank Transfer","FPS","PayMe","Alipay","Credit Card","Online Payment"].includes(He.method)?"Online Payment":He.method||"N/A";return t.jsxs("div",{className:"payment-history-card",children:[t.jsxs("div",{className:"payment-history-card__main",children:[t.jsxs("div",{children:[t.jsx("p",{className:"payment-history-card__amount",children:He.amount||"$0"}),t.jsx("p",{className:"payment-history-card__date",children:He.date||"N/A"})]}),t.jsx("div",{className:"payment-history-card__status",children:t.jsx("span",{className:zi[He.status]||"payment-history-card__status-pill",children:He.status||"Pending"})})]}),t.jsxs("div",{className:"payment-history-card__meta",children:[t.jsxs("div",{children:[t.jsx("span",{className:"label",children:"Method"}),t.jsx("span",{className:"value",children:Qt})]}),He.reference&&He.reference!=="-"&&t.jsxs("div",{children:[t.jsx("span",{className:"label",children:"Reference"}),t.jsx("span",{className:"value code",children:He.reference})]}),He.paidToAdminName&&t.jsxs("div",{children:[t.jsx("span",{className:"label",children:"Paid to"}),t.jsx("span",{className:"value",children:He.paidToAdminName})]}),He.period&&t.jsxs("div",{children:[t.jsx("span",{className:"label",children:"Period"}),t.jsx("span",{className:"value",children:He.period})]})]}),He.status==="Pending"&&t.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107",fontSize:"0.8rem",color:"#856404"},children:" Your payment is pending admin approval. You will be notified once it's reviewed."}),He.status==="Rejected"&&He.rejectionReason&&t.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#f8d7da",borderRadius:"8px",border:"1px solid #f5c6cb",fontSize:"0.8rem",color:"#721c24"},children:[" Payment rejected: ",He.rejectionReason]}),He.screenshot&&t.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #e5e7eb"},children:t.jsxs("button",{onClick:()=>{const yt=window.open();yt&&yt.document.write(`
                                            <html>
                                              <head><title>Payment Screenshot</title></head>
                                              <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                                                <img src="${He.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                                              </body>
                                            </html>
                                          `)},style:{width:"100%",padding:"8px 12px",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:"#ffffff",border:"none",borderRadius:"8px",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.3)"},children:[t.jsx("span",{style:{color:"#ffffff"},children:""}),t.jsx("span",{style:{color:"#ffffff"},children:"View Screenshot"})]})})]},ct)})}),qe>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",marginTop:"32px",flexWrap:"wrap"},children:[t.jsxs("button",{onClick:()=>pe(He=>Math.max(1,He-1)),disabled:se===1,style:{padding:"10px 16px",border:"none",borderRadius:"8px",background:se===1?"#f3f4f6":"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:se===1?"#999":"#ffffff",fontSize:"0.875rem",fontWeight:"600",cursor:se===1?"not-allowed":"pointer",boxShadow:se===1?"none":"0 2px 8px rgba(90, 49, 234, 0.2)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:He=>{se!==1&&(He.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.3)")},onMouseLeave:He=>{se!==1&&(He.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.2)")},children:[t.jsx("i",{className:"fas fa-chevron-left"}),"Previous"]}),t.jsx("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:Array.from({length:qe},(He,ct)=>ct+1).map(He=>He===1||He===qe||He>=se-1&&He<=se+1?t.jsx("button",{onClick:()=>pe(He),style:{padding:"10px 16px",border:"none",borderRadius:"8px",background:se===He?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#f8f9ff",color:se===He?"#ffffff":"#1a1a1a",fontSize:"0.875rem",fontWeight:se===He?"600":"500",cursor:"pointer",boxShadow:se===He?"0 2px 8px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)",transition:"all 0.2s ease",minWidth:"40px"},onMouseEnter:Qt=>{se!==He&&(Qt.target.style.background="#ffffff",Qt.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.15)")},onMouseLeave:Qt=>{se!==He&&(Qt.target.style.background="#f8f9ff",Qt.target.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.08)")},children:He},He):He===se-2||He===se+2?t.jsx("span",{style:{padding:"10px 8px",color:"#666",fontSize:"0.875rem"},children:"..."},He):null)}),t.jsxs("button",{onClick:()=>pe(He=>Math.min(qe,He+1)),disabled:se===qe,style:{padding:"10px 16px",border:"none",borderRadius:"8px",background:se===qe?"#f3f4f6":"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:se===qe?"#999":"#ffffff",fontSize:"0.875rem",fontWeight:"600",cursor:se===qe?"not-allowed":"pointer",boxShadow:se===qe?"none":"0 2px 8px rgba(90, 49, 234, 0.2)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:He=>{se!==qe&&(He.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.3)")},onMouseLeave:He=>{se!==qe&&(He.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.2)")},children:["Next",t.jsx("i",{className:"fas fa-chevron-right"})]})]})]})})()})]}),b==="profile"&&t.jsxs("article",{className:"screen-card",id:"profile",children:[t.jsxs("header",{className:"screen-card__header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-user-cog",style:{marginRight:"10px"}}),"Profile Settings"]}),t.jsx("p",{children:"Manage your account information and preferences."})]}),!Me&&t.jsx("button",{type:"button",className:"primary-btn",onClick:()=>ue(!0),style:{padding:"10px 20px",fontSize:"0.9rem"},children:"Edit Profile"})]}),t.jsxs("form",{onSubmit:Gt,noValidate:!0,children:[t.jsx("div",{className:"card",style:{padding:"24px",marginBottom:"24px",background:"linear-gradient(135deg, #f8f8f8 0%, #ffffff 100%)",border:"1px solid #e0e0e0",borderRadius:"12px"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",flexWrap:"wrap"},children:[t.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"2rem",fontWeight:"600",flexShrink:0},children:_e?.name?.charAt(0)?.toUpperCase()||"M"}),t.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[t.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"1.5rem",fontWeight:"600"},children:_e?.name||"Member"}),t.jsx("p",{style:{margin:"0 0 4px 0",color:"#666",fontSize:"0.9rem"},children:_e?.email||"No email"}),t.jsx("p",{style:{margin:0,color:"#666",fontSize:"0.9rem"},children:_e?.phone||"No phone"})]}),t.jsx("div",{style:{padding:"8px 16px",background:_e?.status==="Active"?"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)":"linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)",color:_e?.status==="Active"?"#065f46":"#991b1b",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"500"},children:_e?.status||"Active"})]})}),t.jsxs("div",{className:"card",style:{padding:"24px",marginBottom:"24px",border:"1px solid #e0e0e0",borderRadius:"12px"},children:[t.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"1.1rem",fontWeight:"600",paddingBottom:"12px",borderBottom:"2px solid #e5e7eb"},children:"Personal Information"}),Me?t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:[t.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#333"},children:["Full Name ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{required:!0,onInvalid:ke=>ke.preventDefault(),value:at.name,onChange:ke=>ot({...at,name:ke.target.value}),style:{padding:"12px 16px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.2s"},onFocus:ke=>ke.target.style.borderColor="#5a31ea",onBlur:ke=>ke.target.style.borderColor="#ddd"})]}),t.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#333"},children:["Email Address ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{required:!0,type:"email",onInvalid:ke=>ke.preventDefault(),value:at.email,onChange:ke=>ot({...at,email:ke.target.value}),style:{padding:"12px 16px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.2s"},onFocus:ke=>ke.target.style.borderColor="#5a31ea",onBlur:ke=>ke.target.style.borderColor="#ddd"})]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.jsx(Kd,{label:t.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#333"},children:["Phone Number (WhatsApp) ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),value:at.phone,onChange:ke=>ot({...at,phone:ke.target.value}),onError:ke=>{Mt(ke,"error")},placeholder:"Enter phone number",required:!0})}),t.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#333",display:"flex",alignItems:"center",gap:"6px"},children:[t.jsx("i",{className:"fas fa-lock",style:{color:"#5a31ea",fontSize:"0.875rem"}}),"New Password (leave blank to keep current)"]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:G?"text":"password",value:at.password,onChange:ke=>ot({...at,password:ke.target.value}),placeholder:"Enter new password (min. 6 characters)",minLength:6,style:{padding:"12px 45px 12px 16px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem",width:"100%",transition:"border-color 0.2s"},onFocus:ke=>ke.target.style.borderColor="#5a31ea",onBlur:ke=>ke.target.style.borderColor="#ddd"}),t.jsx("button",{type:"button",onClick:()=>J(!G),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666"},"aria-label":G?"Hide password":"Show password",children:G?t.jsx("i",{className:"fas fa-eye-slash",style:{fontSize:"0.875rem"}}):t.jsx("i",{className:"fas fa-eye",style:{fontSize:"0.875rem"}})})]}),t.jsx("small",{style:{fontSize:"0.75rem",color:"#666",marginTop:"-4px"},children:"Leave blank if you don't want to change your password"})]})]}):t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"24px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#666",marginBottom:"8px"},children:"Full Name"}),t.jsx("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#000"},children:_e?.name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#666",marginBottom:"8px"},children:"Email Address"}),t.jsx("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#000"},children:_e?.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#666",marginBottom:"8px"},children:"Phone Number"}),t.jsx("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#000"},children:_e?.phone||"N/A"})]})]})]}),t.jsxs("div",{className:"card",style:{padding:"24px",marginBottom:"24px",border:"1px solid #e0e0e0",borderRadius:"12px"},children:[t.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"1.1rem",fontWeight:"600",paddingBottom:"12px",borderBottom:"2px solid #e5e7eb"},children:"Notification Preferences"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",transition:"all 0.2s",background:"#f8f8f8",opacity:"0.8"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"500",marginBottom:"4px",display:"flex",alignItems:"center",gap:"8px"},children:["Email Reminders",t.jsx("span",{style:{fontSize:"0.75rem",color:"#666",fontWeight:"normal",fontStyle:"italic"},children:"(Required)"})]}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:"Receive payment reminders and updates via email"})]}),t.jsx("div",{style:{position:"relative",width:"50px",height:"28px",borderRadius:"14px",backgroundColor:"#5a31ea",cursor:"not-allowed",transition:"background-color 0.3s ease",flexShrink:0,opacity:"1"},children:t.jsx("div",{style:{position:"absolute",top:"2px",left:"24px",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#fff",transition:"left 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",transition:"all 0.2s",background:"#f8f8f8",opacity:"0.8"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"500",marginBottom:"4px",display:"flex",alignItems:"center",gap:"8px"},children:["WhatsApp Reminders",t.jsx("span",{style:{fontSize:"0.75rem",color:"#666",fontWeight:"normal",fontStyle:"italic"},children:"(Required)"})]}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:"Receive payment reminders via WhatsApp"})]}),t.jsx("div",{style:{position:"relative",width:"50px",height:"28px",borderRadius:"14px",backgroundColor:"#5a31ea",cursor:"not-allowed",transition:"background-color 0.3s ease",flexShrink:0,opacity:"1"},children:t.jsx("div",{style:{position:"absolute",top:"2px",left:"24px",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#fff",transition:"left 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]})]})]}),Me&&t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",paddingTop:"24px",borderTop:"1px solid #e5e7eb"},children:[t.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>{ue(!1),_e&&ot({name:_e.name||"",email:_e.email||"",phone:_e.phone||"",emailReminders:!0,whatsappReminders:!0})},style:{padding:"12px 24px",minWidth:"120px"},children:"Cancel"}),t.jsx("button",{type:"submit",className:"primary-btn",style:{padding:"12px 24px",minWidth:"120px"},children:"Save Changes"})]})]})]})]})]})]}),t.jsx(Yl,{})]})}function Ay(){const{members:i,fetchMembers:a}=Qd(),[r,o]=X.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",subscriptionType:"Lifetime"}),[c,l]=X.useState(!1),[g,p]=X.useState(!1),[m,v]=X.useState(!1),[j,A]=X.useState(null),[R,b]=X.useState("error"),[z,M]=X.useState({name:!1,email:!1,phone:!1,password:!1,confirmPassword:!1}),E=po();X.useEffect(()=>{a()},[a]);const P=fe=>{if(!fe)return!1;const de=fe.trim().toLowerCase();return i.some(xe=>xe.email&&xe.email.toLowerCase()===de)?(A("This email has already been registered. Please use a different email or try logging in."),b("error"),setTimeout(()=>A(null),3e3),!0):!1},q=fe=>{const de=fe.target.value;o({...r,email:de})},K=fe=>{const de=fe.target.value.trim();de&&P(de)},H=async fe=>{fe.preventDefault();const de={name:!1,email:!1,phone:!1,password:!1,confirmPassword:!1};if(!r.name||!r.name.trim()){de.name=!0,A("Name is required"),b("error"),setTimeout(()=>A(null),3e3),M(de);return}if(!r.email||!r.email.trim()){de.email=!0,A("Email is required"),b("error"),setTimeout(()=>A(null),3e3),M(de);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email.trim())){de.email=!0,A("Please enter a valid email address"),b("error"),setTimeout(()=>A(null),3e3),M(de);return}if(P(r.email)){de.email=!0,A("This email has already been registered. Please use a different email or try logging in."),b("error"),setTimeout(()=>A(null),3e3),M(de);return}if(!r.phone||!r.phone.trim()){de.phone=!0,A("Phone number is required"),b("error"),setTimeout(()=>A(null),3e3),M(de);return}if(!r.password){de.password=!0,A("Password is required"),b("error"),setTimeout(()=>A(null),3e3),M(de);return}if(r.password.length<6){de.password=!0,A("Password must be at least 6 characters long"),b("error"),setTimeout(()=>A(null),3e3),M(de);return}if(r.password!==r.confirmPassword){de.confirmPassword=!0,A("Passwords do not match"),b("error"),setTimeout(()=>A(null),3e3),M(de);return}M({name:!1,email:!1,phone:!1,password:!1,confirmPassword:!1}),l(!0);try{const Z=await fetch("http://localhost:4000/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.name.trim(),email:r.email.trim().toLowerCase(),phone:r.phone.trim(),password:r.password,status:"Pending",balance:"$0",nextDue:"",lastPayment:"",subscriptionType:r.subscriptionType})}),ge=await Z.json();if(!Z.ok){const B=ge.message||ge.error||"Failed to create account";throw B.toLowerCase().includes("email")||B.toLowerCase().includes("already exists")||B.toLowerCase().includes("duplicate")?new Error("This email has already been registered. Please use a different email or try logging in."):new Error(B)}A("Account created successfully! Your account is pending approval. You will be able to login once an admin approves your account."),b("success"),setTimeout(()=>A(null),3e3),setTimeout(()=>{E("/login",{replace:!0,state:{message:"Account created successfully! Your account is pending approval. Please wait for admin approval before logging in.",email:r.email}})},3e3)}catch(xe){console.error("Signup error:",xe),A(xe.message||"Failed to create account. Please try again."),b("error"),setTimeout(()=>A(null),3e3)}finally{l(!1)}};return t.jsxs(t.Fragment,{children:[t.jsx(Vl,{showCTA:!1}),t.jsx("main",{className:"login-main",children:t.jsxs("div",{className:"login-shell",children:[t.jsxs("aside",{className:"login-menu",children:[t.jsx("p",{className:"eyebrow light",children:"Welcome"}),t.jsx("h2",{children:"Subscription Manager HK"}),t.jsx("p",{children:"Create your member account to access the subscription portal."}),t.jsxs("ul",{children:[t.jsx("li",{children:"Track your subscription payments"}),t.jsx("li",{children:"View invoices and payment history"}),t.jsx("li",{children:"Manage your profile and preferences"})]})]}),t.jsxs("div",{className:"login-form-card",children:[t.jsxs("div",{className:"login-form-card__header",children:[t.jsxs("h1",{children:[t.jsx("i",{className:"fas fa-user-plus",style:{marginRight:"12px",color:"#5a31ea"}}),"Create Account"]}),t.jsxs("p",{children:["Already have an account? ",t.jsx(Kc,{to:"/login",style:{color:"#5a31ea",textDecoration:"none",fontWeight:"500"},children:"Sign in"})]})]}),t.jsxs("form",{onSubmit:H,noValidate:!0,children:[t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Full Name ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",required:!0,onInvalid:fe=>fe.preventDefault(),value:r.name,onChange:fe=>{o({...r,name:fe.target.value}),z.name&&M(de=>({...de,name:!1}))},style:{borderColor:z.name?"#ef4444":void 0,borderWidth:z.name?"2px":void 0},placeholder:"Enter your full name",className:"mono-input"})]}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-envelope",style:{marginRight:"8px",color:"#5a31ea"}}),"Email ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"email",required:!0,onInvalid:fe=>fe.preventDefault(),value:r.email,onChange:fe=>{q(fe),z.email&&M(de=>({...de,email:!1}))},onBlur:K,style:{borderColor:z.email?"#ef4444":void 0,borderWidth:z.email?"2px":void 0},placeholder:"Enter your email address",className:"mono-input"})]}),t.jsx("div",{className:"mono-label",children:t.jsx(Kd,{label:t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-phone",style:{marginRight:"8px",color:"#5a31ea"}}),"Phone Number ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),value:r.phone,onChange:fe=>{o({...r,phone:fe.target.value}),z.phone&&M(de=>({...de,phone:!1}))},onError:fe=>{A(fe),b("error"),setTimeout(()=>A(null),3e3),M(de=>({...de,phone:!0}))},style:{border:z.phone?"2px solid #ef4444":void 0},placeholder:"Enter your phone number",required:!0,className:"mono-input"})}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-id-card",style:{marginRight:"8px",color:"#5a31ea"}}),"Subscription Type ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"8px"},children:[t.jsxs("button",{type:"button",onClick:()=>o({...r,subscriptionType:"Lifetime"}),style:{padding:"16px",border:"none",borderRadius:"10px",background:r.subscriptionType==="Lifetime"?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#f8f9ff",color:r.subscriptionType==="Lifetime"?"white":"#1a1a1a",cursor:"pointer",fontSize:"1rem",fontWeight:"600",boxShadow:r.subscriptionType==="Lifetime"?"0 4px 12px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:"Lifetime"}),t.jsx("div",{style:{fontSize:"0.875rem",opacity:.9},children:"$250/year"})]}),t.jsxs("button",{type:"button",onClick:()=>o({...r,subscriptionType:"Yearly + Janaza Fund"}),style:{padding:"16px",border:"none",borderRadius:"10px",background:r.subscriptionType==="Yearly + Janaza Fund"?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#f8f9ff",color:r.subscriptionType==="Yearly + Janaza Fund"?"white":"#1a1a1a",cursor:"pointer",fontSize:"1rem",fontWeight:"600",boxShadow:r.subscriptionType==="Yearly + Janaza Fund"?"0 4px 12px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:"Yearly + Janaza Fund"}),t.jsx("div",{style:{fontSize:"0.875rem",opacity:.9},children:"$500/year"})]})]})]}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock",style:{marginRight:"8px",color:"#5a31ea"}}),"Password ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:g?"text":"password",required:!0,onInvalid:fe=>fe.preventDefault(),value:r.password,onChange:fe=>o({...r,password:fe.target.value}),placeholder:"Create a password (min. 6 characters)",className:"mono-input",minLength:6,style:{paddingRight:"45px"}}),t.jsx("button",{type:"button",onClick:()=>p(!g),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666"},"aria-label":g?"Hide password":"Show password",children:g?t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock",style:{marginRight:"8px",color:"#5a31ea"}}),"Confirm Password ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:m?"text":"password",required:!0,onInvalid:fe=>fe.preventDefault(),value:r.confirmPassword,onChange:fe=>{o({...r,confirmPassword:fe.target.value}),z.confirmPassword&&M(de=>({...de,confirmPassword:!1}))},style:{paddingRight:"45px",borderColor:z.confirmPassword?"#ef4444":void 0,borderWidth:z.confirmPassword?"2px":void 0},placeholder:"Confirm your password",className:"mono-input",minLength:6}),t.jsx("button",{type:"button",onClick:()=>v(!m),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666"},"aria-label":m?"Hide password":"Show password",children:m?t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),t.jsx("button",{type:"submit",className:"primary-btn",style:{width:"100%",marginTop:"24px"},disabled:c,children:c?"Creating Account...":"Create Account"})]}),t.jsx(Yc,{isOpen:!!error,message:error,type:"error",onClose:()=>setError(null)}),t.jsx(Yc,{isOpen:!!success,message:success,type:"success",onClose:()=>setSuccess(null)}),t.jsx(Gl,{message:j,type:R,onClose:()=>A(null),duration:3e3})]})]})}),t.jsx(Yl,{})]})}function Cy(){const{members:i,admins:a,invoices:r,payments:o,paymentHistory:c,donations:l,paymentMethods:g,communicationLog:p,fetchMembers:m,fetchAdmins:v,fetchInvoices:j,fetchPayments:A,fetchDonations:R,fetchPaymentMethods:b,addMember:z,updateMember:M,deleteMember:E,addAdminUser:P,updateAdminUser:q,deleteAdminUser:K,addInvoice:H,updateInvoice:fe,deleteInvoice:de,addDonation:Pe,deleteDonation:xe,updatePaymentMethod:Z,loading:ge}=Qd(),B=po(),[$,ee]=X.useState("members"),[ie,Ne]=X.useState(!1),[Re,Me]=X.useState(null),[ue,Ce]=X.useState(null),[Le,Q]=X.useState({name:"",email:"",phone:"",password:"",status:"Active",balance:"$0",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"}),[C,G]=X.useState({name:"",email:"",password:"",role:"Viewer",status:"Active"}),[J,oe]=X.useState({memberId:"",memberName:"",period:"",amount:"",invoiceType:"Lifetime",due:"",status:"Unpaid",notes:""}),[pe,be]=X.useState(!1),[Fe,De]=X.useState(!1),[Ue,_e]=X.useState({donorName:"",isMember:!1,memberId:"",amount:"",notes:""}),[at,ot]=X.useState({name:"",visible:!0,qrImageUrl:"",details:[]});X.useEffect(()=>{m(),v(),j(),A(),R(),b()},[]);const it=(he,ft="success")=>{setNotieMessage(he),setNotieType(ft),setTimeout(()=>setNotieMessage(null),3e3)},Y=()=>{sessionStorage.clear(),B("/login",{replace:!0})},mt=async he=>{he.preventDefault();try{await z(Le),it("Member added successfully!"),Ne(!1),bt(),m()}catch(ft){it(ft.message||"Failed to add member","error")}},Mt=async he=>{he.preventDefault();try{await M(Re.id,Le),it("Member updated successfully!"),Ne(!1),Me(null),bt(),m()}catch(ft){it(ft.message||"Failed to update member","error")}},Ct=async he=>{if(window.confirm("Are you sure you want to delete this member?"))try{await E(he),it("Member deleted successfully!"),m()}catch(ft){it(ft.message||"Failed to delete member","error")}},Qe=he=>{Me(he),Q({name:he.name||"",email:he.email||"",phone:he.phone||"",password:"",status:he.status||"Active",balance:he.balance||"$0",nextDue:he.nextDue||"",lastPayment:he.lastPayment||"",subscriptionType:he.subscriptionType||"Lifetime"}),Ne(!0)},bt=()=>{Q({name:"",email:"",phone:"",password:"",status:"Active",balance:"$0",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"})},gt=async he=>{he.preventDefault();try{await P(C),it("Admin added successfully!"),Ne(!1),Gt(),v()}catch(ft){it(ft.message||"Failed to add admin","error")}},Rt=async he=>{he.preventDefault();try{await q(Re.id,C),it("Admin updated successfully!"),Ne(!1),Me(null),Gt(),v()}catch(ft){it(ft.message||"Failed to update admin","error")}},Ft=async he=>{if(window.confirm("Are you sure you want to delete this admin?"))try{await K(he),it("Admin deleted successfully!"),v()}catch(ft){it(ft.message||"Failed to delete admin","error")}},jt=he=>{Me(he),G({name:he.name||"",email:he.email||"",password:"",role:he.role||"Viewer",status:he.status||"Active"}),Ne(!0)},Gt=()=>{G({name:"",email:"",password:"",role:"Viewer",status:"Active"})},qt=async he=>{he.preventDefault();try{const ft={...J,amount:J.amount.startsWith("$")?J.amount:`$${J.amount}`};await H(ft),it("Invoice added successfully!"),Ne(!1),se(),j()}catch(ft){it(ft.message||"Failed to add invoice","error")}},Jt=async he=>{he.preventDefault();try{const ft={...J,amount:J.amount.startsWith("$")?J.amount:`$${J.amount}`};await fe(Re.id,ft),it("Invoice updated successfully!"),Ne(!1),Me(null),se(),j()}catch(ft){it(ft.message||"Failed to update invoice","error")}},ke=async he=>{if(window.confirm("Are you sure you want to delete this invoice?"))try{await de(he),it("Invoice deleted successfully!"),j()}catch(ft){it(ft.message||"Failed to delete invoice","error")}},qe=he=>{Me(he),oe({memberId:he.memberId||"",memberName:he.memberName||"",period:he.period||"",amount:he.amount?.replace("$","")||"",invoiceType:he.invoiceType||"Lifetime",due:he.due||"",status:he.status||"Unpaid",notes:he.notes||""}),Ne(!0)},se=()=>{oe({memberId:"",memberName:"",period:"",amount:"",invoiceType:"Lifetime",due:"",status:"Unpaid",notes:""})},je=async he=>{he.preventDefault();try{await Pe(Ue),it("Donation added successfully!"),Ne(!1),He(),R()}catch(ft){it(ft.message||"Failed to add donation","error")}},nt=async he=>{he.preventDefault();try{it("Donation update functionality not available","error"),Ne(!1),Me(null),He()}catch(ft){it(ft.message||"Failed to update donation","error")}},pt=async he=>{if(window.confirm("Are you sure you want to delete this donation?"))try{await xe(he),it("Donation deleted successfully!"),R()}catch(ft){it(ft.message||"Failed to delete donation","error")}},He=()=>{_e({donorName:"",isMember:!1,memberId:"",amount:"",notes:""})},ct=async he=>{he.preventDefault();try{const Dt=await fetch("http://localhost:4000/api/payment-methods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(at)});if(!Dt.ok){const hn=await Dt.json().catch(()=>({}));throw new Error(hn.error||"Failed to add payment method")}it("Payment method added successfully!"),Ne(!1),vn(),b()}catch(ft){it(ft.message||"Failed to add payment method","error")}},Qt=async he=>{he.preventDefault();try{await Z(Re.name,at),it("Payment method updated successfully!"),Ne(!1),Me(null),vn(),b()}catch(ft){it(ft.message||"Failed to update payment method","error")}},yt=he=>{Me(he),ot({name:he.name||"",visible:he.visible!==void 0?he.visible:!0,qrImageUrl:he.qrImageUrl||"",details:Array.isArray(he.details)?he.details:[]}),Ne(!0)},vn=()=>{ot({name:"",visible:!0,qrImageUrl:"",details:[]})},$t=()=>{Me(null),$==="members"?bt():$==="admins"?Gt():$==="invoices"?se():$==="donations"?He():$==="payment-methods"&&vn(),Ne(!0)},Ut=()=>{Ne(!1),Me(null),$==="members"?bt():$==="admins"?Gt():$==="invoices"?se():$==="donations"?He():$==="payment-methods"&&vn()};return ge?t.jsxs("div",{className:"server-loading",children:[t.jsx("div",{className:"server-loading-spinner"}),t.jsx("p",{className:"server-loading-text",children:"Loading data from server..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(Vl,{showCTA:!1,showLogout:!0,onLogout:Y,isSticky:!0}),t.jsx(Gl,{message:notieMessage,type:notieType,onClose:()=>setNotieMessage(null),duration:3e3}),t.jsx("main",{className:"server-main server-main--sticky-header",children:t.jsx("div",{className:"server-layout",children:t.jsxs("article",{className:"server-card",children:[t.jsxs("header",{className:"server-header",children:[t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-server"}),"Server Management"]}),t.jsx("p",{children:"Manage all data entities: Members, Admins, Invoices, Payments, Donations, and Payment Methods"})]}),t.jsxs("div",{className:"server-nav",children:[t.jsxs("button",{className:`server-nav-btn ${$==="members"?"active":""}`,onClick:()=>{ee("members"),Ne(!1),Me(null)},children:[t.jsx("i",{className:"fas fa-users"}),"Members (",i.length,")"]}),t.jsxs("button",{className:`server-nav-btn ${$==="admins"?"active":""}`,onClick:()=>{ee("admins"),Ne(!1),Me(null)},children:[t.jsx("i",{className:"fas fa-user-shield"}),"Admins (",a.length,")"]}),t.jsxs("button",{className:`server-nav-btn ${$==="invoices"?"active":""}`,onClick:()=>{ee("invoices"),Ne(!1),Me(null)},children:[t.jsx("i",{className:"fas fa-file-invoice"}),"Invoices (",r.length,")"]}),t.jsxs("button",{className:`server-nav-btn ${$==="payments"?"active":""}`,onClick:()=>{ee("payments"),Ne(!1),Me(null)},children:[t.jsx("i",{className:"fas fa-credit-card"}),"Payments (",c?.length||0,")"]}),t.jsxs("button",{className:`server-nav-btn ${$==="donations"?"active":""}`,onClick:()=>{ee("donations"),Ne(!1),Me(null)},children:[t.jsx("i",{className:"fas fa-hand-holding-heart"}),"Donations (",l?.length||0,")"]}),t.jsxs("button",{className:`server-nav-btn ${$==="payment-methods"?"active":""}`,onClick:()=>{ee("payment-methods"),Ne(!1),Me(null)},children:[t.jsx("i",{className:"fas fa-wallet"}),"Payment Methods (",g?.length||0,")"]})]}),t.jsxs("div",{className:"server-content",children:[$==="members"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"server-section-header",children:[t.jsx("h4",{children:"Members Management"}),t.jsxs("button",{className:"server-add-btn",onClick:$t,children:[t.jsx("i",{className:"fas fa-plus"}),"Add Member"]})]}),ie&&t.jsxs("div",{className:"server-form-card",children:[t.jsx("h4",{children:Re?"Edit Member":"Add New Member"}),t.jsxs("form",{className:"server-form-grid",onSubmit:Re?Mt:mt,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Name ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:Le.name,onChange:he=>Q({...Le,name:he.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-envelope",style:{marginRight:"8px",color:"#5a31ea"}}),"Email ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"email",required:!0,value:Le.email,onChange:he=>Q({...Le,email:he.target.value}),className:"mono-input"})]}),t.jsx("div",{children:t.jsx(Kd,{label:t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-phone",style:{marginRight:"8px",color:"#5a31ea"}}),"Phone"]}),value:Le.phone,onChange:he=>Q({...Le,phone:he.target.value}),onError:he=>{it(he,"error")},placeholder:"Enter phone number",className:"mono-input"})}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock",style:{marginRight:"8px",color:"#5a31ea"}}),"Password ",Re?"(leave blank to keep current)":t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:pe?"text":"password",required:!Re,value:Le.password,onChange:he=>Q({...Le,password:he.target.value}),className:"mono-input"}),t.jsx("button",{type:"button",onClick:()=>be(!pe),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666"},children:t.jsx("i",{className:`fas ${pe?"fa-eye-slash":"fa-eye"}`})})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-toggle-on",style:{marginRight:"8px",color:"#5a31ea"}}),"Status"]}),t.jsxs("select",{value:Le.status,onChange:he=>Q({...Le,status:he.target.value}),className:"mono-input",children:[t.jsx("option",{value:"Active",children:"Active"}),t.jsx("option",{value:"Inactive",children:"Inactive"}),t.jsx("option",{value:"Pending",children:"Pending"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Balance"]}),t.jsx("input",{type:"text",value:Le.balance,onChange:he=>Q({...Le,balance:he.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar",style:{marginRight:"8px",color:"#5a31ea"}}),"Next Due"]}),t.jsx("input",{type:"text",value:Le.nextDue,onChange:he=>Q({...Le,nextDue:he.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-check",style:{marginRight:"8px",color:"#5a31ea"}}),"Last Payment"]}),t.jsx("input",{type:"text",value:Le.lastPayment,onChange:he=>Q({...Le,lastPayment:he.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-id-card",style:{marginRight:"8px",color:"#5a31ea"}}),"Subscription Type"]}),t.jsxs("select",{value:Le.subscriptionType,onChange:he=>Q({...Le,subscriptionType:he.target.value}),className:"mono-input",children:[t.jsx("option",{value:"Lifetime",children:"Lifetime"}),t.jsx("option",{value:"Yearly + Janaza Fund",children:"Yearly + Janaza Fund"})]})]}),t.jsxs("div",{className:"server-form-actions",children:[t.jsx("button",{type:"button",className:"secondary-btn",onClick:Ut,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[Re?"Update":"Add"," Member"]})]})]})]}),t.jsx("div",{className:"server-table-container",children:t.jsx(_i,{columns:["ID","Name","Email","Phone","Status","Balance","Actions"],rows:i.map(he=>({ID:he.id,Name:he.name,Email:he.email,Phone:he.phone||"-",Status:{render:()=>t.jsx("span",{className:he.status==="Active"?"server-badge server-badge--active":he.status==="Pending"?"server-badge server-badge--pending":"server-badge server-badge--inactive",children:he.status})},Balance:he.balance||"$0",Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>Qe(he),children:[t.jsx("i",{className:"fas fa-edit"}),"Edit"]}),t.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>Ct(he.id),title:"Delete Member","aria-label":"Delete Member",children:t.jsx("i",{className:"fas fa-trash"})})]})}}))})})]}),$==="admins"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"server-section-header",children:[t.jsx("h4",{children:"Admins Management"}),t.jsxs("button",{className:"server-add-btn",onClick:$t,children:[t.jsx("i",{className:"fas fa-plus"}),"Add Admin"]})]}),ie&&t.jsxs("div",{className:"server-form-card",children:[t.jsx("h4",{children:Re?"Edit Admin":"Add New Admin"}),t.jsxs("form",{className:"server-form-grid",onSubmit:Re?Rt:gt,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Name ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:C.name,onChange:he=>G({...C,name:he.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-envelope",style:{marginRight:"8px",color:"#5a31ea"}}),"Email ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"email",required:!0,value:C.email,onChange:he=>G({...C,email:he.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock",style:{marginRight:"8px",color:"#5a31ea"}}),"Password ",Re?"(leave blank to keep current)":t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:Fe?"text":"password",required:!Re,value:C.password,onChange:he=>G({...C,password:he.target.value}),className:"mono-input"}),t.jsx("button",{type:"button",onClick:()=>De(!Fe),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666"},children:t.jsx("i",{className:`fas ${Fe?"fa-eye-slash":"fa-eye"}`})})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user-tag",style:{marginRight:"8px",color:"#5a31ea"}}),"Role"]}),t.jsxs("select",{value:C.role,onChange:he=>G({...C,role:he.target.value}),className:"mono-input",children:[t.jsx("option",{value:"Viewer",children:"Viewer"}),t.jsx("option",{value:"Editor",children:"Editor"}),t.jsx("option",{value:"Admin",children:"Admin"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-toggle-on",style:{marginRight:"8px",color:"#5a31ea"}}),"Status"]}),t.jsxs("select",{value:C.status,onChange:he=>G({...C,status:he.target.value}),className:"mono-input",children:[t.jsx("option",{value:"Active",children:"Active"}),t.jsx("option",{value:"Inactive",children:"Inactive"})]})]}),t.jsxs("div",{className:"server-form-actions",children:[t.jsx("button",{type:"button",className:"secondary-btn",onClick:Ut,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[Re?"Update":"Add"," Admin"]})]})]})]}),t.jsx("div",{className:"server-table-container",children:t.jsx(_i,{columns:["ID","Name","Email","Role","Status","Actions"],rows:a.map(he=>({ID:he.id,Name:he.name,Email:he.email,Role:he.role||"Viewer",Status:{render:()=>t.jsx("span",{className:he.status==="Active"?"server-badge server-badge--active":"server-badge server-badge--inactive",children:he.status})},Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>jt(he),children:[t.jsx("i",{className:"fas fa-edit"}),"Edit"]}),t.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>Ft(he.id),title:"Delete Admin","aria-label":"Delete Admin",children:t.jsx("i",{className:"fas fa-trash"})})]})}}))})})]}),$==="invoices"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"server-section-header",children:[t.jsx("h4",{children:"Invoices Management"}),t.jsxs("button",{className:"server-add-btn",onClick:$t,children:[t.jsx("i",{className:"fas fa-plus"}),"Add Invoice"]})]}),ie&&t.jsxs("div",{className:"server-form-card",children:[t.jsx("h4",{children:Re?"Edit Invoice":"Add New Invoice"}),t.jsxs("form",{className:"server-form-grid",onSubmit:Re?Jt:qt,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Member ID ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:J.memberId,onChange:he=>oe({...J,memberId:he.target.value}),className:"mono-input",placeholder:"e.g. HK1001"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Member Name ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:J.memberName,onChange:he=>oe({...J,memberName:he.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar",style:{marginRight:"8px",color:"#5a31ea"}}),"Period ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:J.period,onChange:he=>oe({...J,period:he.target.value}),className:"mono-input",placeholder:"e.g. Nov 2025"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-id-card",style:{marginRight:"8px",color:"#5a31ea"}}),"Invoice Type"]}),t.jsxs("select",{value:J.invoiceType,onChange:he=>oe({...J,invoiceType:he.target.value}),className:"mono-input",children:[t.jsx("option",{value:"Lifetime",children:"Lifetime"}),t.jsx("option",{value:"Yearly + Janaza Fund",children:"Yearly + Janaza Fund"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"number",required:!0,value:J.amount,onChange:he=>oe({...J,amount:he.target.value}),className:"mono-input",placeholder:"e.g. 50"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-check",style:{marginRight:"8px",color:"#5a31ea"}}),"Due Date ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"date",required:!0,value:J.due,onChange:he=>{const ft=he.target.value;oe({...J,due:ft})},onBlur:he=>{const ft=he.target.value;if(ft){const Dt=new Date(ft);if(isNaN(Dt.getTime())){it("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[hn,ta,Sn]=ft.split("-").map(Number);if(ta<1||ta>12){it("Invalid month. Please enter a month between 01 and 12","error");return}if(Sn<1||Sn>31){it("Invalid day. Please enter a valid day for the selected month","error");return}const Ar=new Date(hn,ta,0).getDate();if(Sn>Ar){it(`Invalid date. ${ta}/${hn} only has ${Ar} days`,"error");return}}},className:"mono-input",style:{borderRadius:"4px",width:"100%"}})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-info-circle",style:{marginRight:"8px",color:"#5a31ea"}}),"Status"]}),t.jsxs("select",{value:J.status,onChange:he=>oe({...J,status:he.target.value}),className:"mono-input",children:[t.jsx("option",{value:"Unpaid",children:"Unpaid"}),t.jsx("option",{value:"Paid",children:"Paid"}),t.jsx("option",{value:"Overdue",children:"Overdue"}),t.jsx("option",{value:"Pending Verification",children:"Pending Verification"})]})]}),t.jsxs("label",{className:"notes",style:{gridColumn:"1 / -1"},children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-sticky-note"}),"Notes"]}),t.jsx("textarea",{value:J.notes,onChange:he=>oe({...J,notes:he.target.value}),className:"mono-input",style:{minHeight:"100px"}})]}),t.jsxs("div",{className:"server-form-actions",children:[t.jsx("button",{type:"button",className:"secondary-btn",onClick:Ut,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[Re?"Update":"Add"," Invoice"]})]})]})]}),t.jsx("div",{className:"server-table-container",children:t.jsx(_i,{columns:["Invoice #","Member","Period","Amount","Status","Due Date","Actions"],rows:r.map(he=>({"Invoice #":he.id,Member:he.memberName||he.memberId||"-",Period:he.period,Amount:he.amount,Status:{render:()=>t.jsx("span",{className:he.status==="Paid"?"server-badge server-badge--success":he.status==="Overdue"?"server-badge server-badge--danger":he.status==="Pending Verification"?"server-badge server-badge--pending":"server-badge server-badge--warning",children:he.status})},"Due Date":he.due,Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>qe(he),children:[t.jsx("i",{className:"fas fa-edit"}),"Edit"]}),t.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>ke(he.id),title:"Delete Invoice","aria-label":"Delete Invoice",children:t.jsx("i",{className:"fas fa-trash"})})]})}}))})})]}),$==="payments"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"server-section-header",children:t.jsx("h4",{children:"Payments Management"})}),t.jsx("div",{className:"server-table-container",children:t.jsx(_i,{columns:["Date","Member","Amount","Method","Status","Reference","Period"],rows:(c||[]).map(he=>({Date:he.date||"-",Member:he.member||he.memberName||he.memberId||"-",Amount:he.amount||"$0",Method:he.method||"-",Status:{render:()=>t.jsx("span",{className:he.status==="Paid"||he.status==="Completed"?"server-badge server-badge--success":he.status==="Pending"||he.status==="Pending Verification"?"server-badge server-badge--pending":he.status==="Rejected"?"server-badge server-badge--danger":"server-badge server-badge--warning",children:he.status})},Reference:he.reference||"-",Period:he.period||"-"}))})})]}),$==="donations"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"server-section-header",children:[t.jsx("h4",{children:"Donations Management"}),t.jsxs("button",{className:"server-add-btn",onClick:$t,children:[t.jsx("i",{className:"fas fa-plus"}),"Add Donation"]})]}),ie&&t.jsxs("div",{className:"server-form-card",children:[t.jsx("h4",{children:Re?"Edit Donation":"Add New Donation"}),t.jsxs("form",{className:"server-form-grid",onSubmit:Re?nt:je,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Donor Name ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:Ue.donorName,onChange:he=>_e({...Ue,donorName:he.target.value}),className:"mono-input",placeholder:"Enter donor name"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"number",required:!0,value:Ue.amount,onChange:he=>_e({...Ue,amount:he.target.value}),className:"mono-input",placeholder:"Enter amount"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-check-circle",style:{marginRight:"8px",color:"#5a31ea"}}),"Is Member"]}),t.jsxs("select",{value:Ue.isMember?"true":"false",onChange:he=>_e({...Ue,isMember:he.target.value==="true"}),className:"mono-input",children:[t.jsx("option",{value:"false",children:"No"}),t.jsx("option",{value:"true",children:"Yes"})]})]}),Ue.isMember&&t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Member ID"]}),t.jsx("input",{type:"text",value:Ue.memberId,onChange:he=>_e({...Ue,memberId:he.target.value}),className:"mono-input",placeholder:"Enter member ID"})]}),t.jsxs("label",{className:"notes",style:{gridColumn:"1 / -1"},children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-sticky-note"}),"Notes"]}),t.jsx("textarea",{value:Ue.notes,onChange:he=>_e({...Ue,notes:he.target.value}),className:"mono-input",style:{minHeight:"100px"}})]}),t.jsxs("div",{className:"server-form-actions",children:[t.jsx("button",{type:"button",className:"secondary-btn",onClick:Ut,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[Re?"Update":"Add"," Donation"]})]})]})]}),t.jsx("div",{className:"server-table-container",children:t.jsx(_i,{columns:["Donor","Amount","Is Member","Member ID","Date","Actions"],rows:(l||[]).map(he=>({Donor:he.donorName||"-",Amount:he.amount?`$${he.amount}`:"$0","Is Member":he.isMember?"Yes":"No","Member ID":he.memberId||"-",Date:he.date||"-",Actions:{render:()=>t.jsx("div",{style:{display:"flex",gap:"8px"},children:t.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>pt(he._id||he.id),title:"Delete Donation","aria-label":"Delete Donation",children:t.jsx("i",{className:"fas fa-trash"})})})}}))})})]}),$==="payment-methods"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"server-section-header",children:[t.jsx("h4",{children:"Payment Methods Management"}),t.jsxs("button",{className:"server-add-btn",onClick:$t,children:[t.jsx("i",{className:"fas fa-plus"}),"Add Payment Method"]})]}),ie&&t.jsxs("div",{className:"server-form-card",children:[t.jsx("h4",{children:Re?"Edit Payment Method":"Add New Payment Method"}),t.jsxs("form",{className:"server-form-grid",onSubmit:Re?Qt:ct,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-wallet",style:{marginRight:"8px",color:"#5a31ea"}}),"Name ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:at.name,onChange:he=>ot({...at,name:he.target.value}),className:"mono-input",placeholder:"e.g. FPS, PayMe, Bank Transfer"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-eye",style:{marginRight:"8px",color:"#5a31ea"}}),"Visible"]}),t.jsxs("select",{value:at.visible?"true":"false",onChange:he=>ot({...at,visible:he.target.value==="true"}),className:"mono-input",children:[t.jsx("option",{value:"true",children:"Yes"}),t.jsx("option",{value:"false",children:"No"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#5a31ea"}}),"QR Image URL"]}),t.jsx("input",{type:"url",value:at.qrImageUrl,onChange:he=>ot({...at,qrImageUrl:he.target.value}),className:"mono-input",placeholder:"Enter QR code image URL"})]}),t.jsxs("label",{className:"notes",style:{gridColumn:"1 / -1"},children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-list",style:{marginRight:"8px",color:"#5a31ea"}}),"Details (one per line)"]}),t.jsx("textarea",{value:Array.isArray(at.details)?at.details.join(`
`):"",onChange:he=>ot({...at,details:he.target.value.split(`
`).filter(ft=>ft.trim())}),className:"mono-input",style:{minHeight:"100px"},placeholder:"Enter details, one per line"})]}),t.jsxs("div",{className:"server-form-actions",children:[t.jsx("button",{type:"button",className:"secondary-btn",onClick:Ut,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[Re?"Update":"Add"," Payment Method"]})]})]})]}),t.jsx("div",{className:"server-table-container",children:t.jsx(_i,{columns:["Name","Visible","QR Image","Details","Actions"],rows:(g||[]).map(he=>({Name:he.name||"-",Visible:{render:()=>t.jsx("span",{className:he.visible?"server-badge server-badge--success":"server-badge server-badge--inactive",children:he.visible?"Yes":"No"})},"QR Image":he.qrImageUrl?t.jsx("a",{href:he.qrImageUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"#5a31ea"},children:"View Image"}):"-",Details:Array.isArray(he.details)?he.details.join(", "):"-",Actions:{render:()=>t.jsx("div",{style:{display:"flex",gap:"8px"},children:t.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>yt(he),children:[t.jsx("i",{className:"fas fa-edit"}),"Edit"]})})}}))})})]})]})]})})}),t.jsx(Yl,{})]})}function Py(){const[i,a]=X.useState(""),[r,o]=X.useState("admin"),[c,l]=X.useState(null),[g,p]=X.useState(!1),[m,v]=X.useState(!1),[j,A]=X.useState(""),[R,b]=X.useState(null),[z,M]=X.useState("error"),E=po(),P=K=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(K),q=async K=>{if(K.preventDefault(),A(""),l(null),!i.trim()){A("Email is required"),b("Email is required"),M("error"),setTimeout(()=>b(null),3e3);return}if(!P(i.trim())){A("Please enter a valid email address"),b("Please enter a valid email address"),M("error"),setTimeout(()=>b(null),3e3);return}p(!0),l(null);try{const fe=await fetch("http://localhost:4000/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.trim(),role:r})});let de;try{de=await fe.json()}catch(Pe){console.error("Failed to parse response:",Pe),l({type:"error",text:"Server returned an invalid response. Please try again."}),p(!1);return}if(!fe.ok||!de.success){const Pe=de.message||"Failed to send reset email. Please try again.";Pe.toLowerCase().includes("email")?A(Pe):l({type:"error",text:Pe}),p(!1);return}v(!0),l({type:"success",text:de.message||"Password reset link has been sent to your email."}),p(!1)}catch(H){console.error("Forgot password error:",H),l({type:"error",text:H.message||"Unable to connect. Please check your connection and try again."}),p(!1)}};return t.jsxs(t.Fragment,{children:[t.jsx(Vl,{showCTA:!1}),t.jsx("main",{className:"login-main",children:t.jsxs("div",{className:"login-shell",children:[t.jsxs("aside",{className:"login-menu",children:[t.jsx("p",{className:"eyebrow light",children:"Password Recovery"}),t.jsx("h2",{children:"Reset Your Password"}),t.jsx("p",{children:"Enter your email address and we'll send you a link to reset your password."}),t.jsxs("ul",{children:[t.jsx("li",{children:"Check your email inbox"}),t.jsx("li",{children:"Click the reset link"}),t.jsx("li",{children:"Create a new password"})]})]}),t.jsxs("div",{className:"login-form-card",children:[t.jsx("div",{className:"login-form-card__header",children:t.jsxs("h1",{children:[t.jsx("i",{className:"fas fa-key",style:{marginRight:"12px",color:"#5a31ea"}}),"Forgot Password"]})}),m?t.jsxs("div",{style:{textAlign:"center",padding:"20px 0"},children:[t.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 20px",background:"linear-gradient(135deg, #10b981 0%, #34d399 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"40px",color:"#ffffff"},children:t.jsx("i",{className:"fas fa-check"})}),t.jsx("h3",{style:{marginBottom:"12px",color:"#1a1a1a"},children:"Check Your Email"}),t.jsxs("p",{style:{color:"#666",marginBottom:"24px"},children:["We've sent a password reset link to ",t.jsx("strong",{children:i})]}),t.jsx("p",{style:{color:"#666",fontSize:"0.875rem",marginBottom:"24px"},children:"Please check your inbox and click the link to reset your password. The link will expire in 1 hour."}),t.jsx("div",{className:"login-buttons",children:t.jsx("button",{type:"button",className:"btn-admin",onClick:()=>E("/login"),style:{width:"100%"},children:"Back to Login"})})]}):t.jsxs("form",{onSubmit:q,noValidate:!0,children:[t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-envelope",style:{marginRight:"8px",color:"#5a31ea"}}),"Email ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"email",value:i,onChange:K=>{a(K.target.value),j&&A("")},onBlur:()=>{i.trim()&&!P(i.trim())?(A("Please enter a valid email address"),b("Please enter a valid email address"),M("error"),setTimeout(()=>b(null),3e3)):i.trim()?A(""):(A("Email is required"),b("Email is required"),M("error"),setTimeout(()=>b(null),3e3))},onInvalid:K=>K.preventDefault(),placeholder:"Enter your email address",className:`mono-input ${j?"input-error":""}`,disabled:g,required:!0})]}),t.jsx("div",{className:"login-buttons",children:t.jsx("button",{type:"submit",className:"btn-admin",disabled:g,style:{position:"relative",opacity:g?.7:1,cursor:g?"not-allowed":"pointer",width:"100%"},children:g?t.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[t.jsxs("svg",{style:{animation:"spin 1s linear infinite",width:"16px",height:"16px"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),t.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Sending..."]}):"Send Reset Link"})}),t.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:t.jsxs(Kc,{to:"/login",style:{color:"#5a31ea",textDecoration:"none",fontSize:"0.875rem",fontWeight:"500"},children:[t.jsx("i",{className:"fas fa-arrow-left",style:{marginRight:"6px"}}),"Back to Login"]})})]}),t.jsx(Yc,{isOpen:!!c,message:c?.text,type:c?.type||"error",onClose:()=>l(null)}),t.jsx(Gl,{message:R,type:z,onClose:()=>b(null),duration:3e3})]})]})}),t.jsx(Yl,{})]})}function Ly(){const[i]=Dm(),[a,r]=X.useState(""),[o,c]=X.useState(""),[l,g]=X.useState(!1),[p,m]=X.useState(!1),[v,j]=X.useState(null),[A,R]=X.useState(!1),[b,z]=X.useState(!1),[M,E]=X.useState({password:"",confirmPassword:""}),[P,q]=X.useState(null),[K,H]=X.useState("error"),fe=po(),de=i.get("token"),Pe=i.get("role")||"admin";X.useEffect(()=>{de||j({type:"error",text:"Invalid reset link. Please request a new password reset."})},[de]);const xe=ge=>ge?ge.length<6?"Password must be at least 6 characters long":"":"Password is required",Z=async ge=>{ge.preventDefault();const B=xe(a),$=a!==o?"Passwords do not match":xe(o);if(E({password:B,confirmPassword:$}),B||$){q(B||$),H("error"),setTimeout(()=>q(null),3e3);return}if(!de){j({type:"error",text:"Invalid reset token. Please request a new password reset."});return}R(!0),j(null);try{const ie=await fetch("http://localhost:4000/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:de,newPassword:a,role:Pe})}),Ne=await ie.json();if(!ie.ok||!Ne.success){j({type:"error",text:Ne.message||"Failed to reset password. Please try again."}),R(!1);return}z(!0),j({type:"success",text:Ne.message||"Password has been reset successfully!"}),R(!1),setTimeout(()=>{fe("/login")},3e3)}catch(ee){console.error("Reset password error:",ee),j({type:"error",text:"Unable to connect. Please check your connection and try again."}),R(!1)}};return t.jsxs(t.Fragment,{children:[t.jsx(Vl,{showCTA:!1}),t.jsx("main",{className:"login-main",children:t.jsxs("div",{className:"login-shell",children:[t.jsxs("aside",{className:"login-menu",children:[t.jsx("p",{className:"eyebrow light",children:"Password Reset"}),t.jsx("h2",{children:"Create New Password"}),t.jsx("p",{children:"Enter your new password below. Make sure it's strong and secure."}),t.jsxs("ul",{children:[t.jsx("li",{children:"At least 6 characters long"}),t.jsx("li",{children:"Use a combination of letters and numbers"}),t.jsx("li",{children:"Don't reuse your old password"})]})]}),t.jsxs("div",{className:"login-form-card",children:[t.jsx("div",{className:"login-form-card__header",children:t.jsxs("h1",{children:[t.jsx("i",{className:"fas fa-lock",style:{marginRight:"12px",color:"#5a31ea"}}),"Reset Password"]})}),b?t.jsxs("div",{style:{textAlign:"center",padding:"20px 0"},children:[t.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 20px",background:"linear-gradient(135deg, #10b981 0%, #34d399 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"40px",color:"#ffffff"},children:t.jsx("i",{className:"fas fa-check"})}),t.jsx("h3",{style:{marginBottom:"12px",color:"#1a1a1a"},children:"Password Reset Successful!"}),t.jsx("p",{style:{color:"#666",marginBottom:"24px"},children:"Your password has been reset successfully. You can now login with your new password."}),t.jsx("p",{style:{color:"#666",fontSize:"0.875rem",marginBottom:"24px"},children:"Redirecting to login page in a few seconds..."}),t.jsx("div",{className:"login-buttons",children:t.jsx("button",{type:"button",className:"btn-admin",onClick:()=>fe("/login"),style:{width:"100%"},children:"Go to Login"})})]}):t.jsxs("form",{onSubmit:Z,noValidate:!0,children:[t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock",style:{marginRight:"8px",color:"#5a31ea"}}),"New Password ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:l?"text":"password",value:a,onChange:ge=>{r(ge.target.value),M.password&&E({...M,password:""})},onBlur:()=>{const ge=xe(a);E({...M,password:ge}),ge&&(q(ge),H("error"),setTimeout(()=>q(null),3e3))},onInvalid:ge=>ge.preventDefault(),placeholder:"Enter new password",className:`mono-input ${M.password?"input-error":""}`,style:{paddingRight:"45px"},disabled:A||!de,required:!0}),t.jsx("button",{type:"button",onClick:()=>g(!l),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666"},"aria-label":l?"Hide password":"Show password",disabled:A,children:l?t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock",style:{marginRight:"8px",color:"#5a31ea"}}),"Confirm Password ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:p?"text":"password",value:o,onChange:ge=>{c(ge.target.value),M.confirmPassword&&E({...M,confirmPassword:""})},onBlur:()=>{const ge=a!==o?"Passwords do not match":xe(o);E({...M,confirmPassword:ge}),ge&&(q(ge),H("error"),setTimeout(()=>q(null),3e3))},onInvalid:ge=>ge.preventDefault(),placeholder:"Confirm new password",className:`mono-input ${M.confirmPassword?"input-error":""}`,style:{paddingRight:"45px"},disabled:A||!de,required:!0}),t.jsx("button",{type:"button",onClick:()=>m(!p),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666"},"aria-label":p?"Hide password":"Show password",disabled:A,children:p?t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),t.jsx("div",{className:"login-buttons",children:t.jsx("button",{type:"submit",className:"btn-admin",disabled:A||!de,style:{position:"relative",opacity:A||!de?.7:1,cursor:A||!de?"not-allowed":"pointer",width:"100%"},children:A?t.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[t.jsxs("svg",{style:{animation:"spin 1s linear infinite",width:"16px",height:"16px"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),t.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Resetting..."]}):"Reset Password"})}),t.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:t.jsxs(Kc,{to:"/login",style:{color:"#5a31ea",textDecoration:"none",fontSize:"0.875rem",fontWeight:"500"},children:[t.jsx("i",{className:"fas fa-arrow-left",style:{marginRight:"6px"}}),"Back to Login"]})})]}),t.jsx(Yc,{isOpen:!!v,message:v?.text,type:v?.type||"error",onClose:()=>j(null)}),t.jsx(Gl,{message:P,type:K,onClose:()=>q(null),duration:3e3})]})]})}),t.jsx(Yl,{})]})}function _y(){return t.jsx(I1,{children:t.jsx(v1,{future:{v7_startTransition:!0},children:t.jsxs(u1,{children:[t.jsx(Ao,{path:"/",element:t.jsx(ep,{to:"/login",replace:!0})}),t.jsx(Ao,{path:"/login",element:t.jsx(L1,{})}),t.jsx(Ao,{path:"/signup",element:t.jsx(Ay,{})}),t.jsx(Ao,{path:"/forgot-password",element:t.jsx(Py,{})}),t.jsx(Ao,{path:"/reset-password",element:t.jsx(Ly,{})}),t.jsx(Ao,{path:"/admin",element:t.jsx(Ny,{})}),t.jsx(Ao,{path:"/member",element:t.jsx(ky,{})}),t.jsx(Ao,{path:"/server",element:t.jsx(Cy,{})}),t.jsx(Ao,{path:"*",element:t.jsx(ep,{to:"/login",replace:!0})})]})})})}const Iy="867870699456-djt0cnrakntduqs6g2gm3pk24vj6qoc9.apps.googleusercontent.com",_0=()=>{document.querySelectorAll("input[title], select[title], textarea[title], input[pattern], select[pattern], textarea[pattern]").forEach(a=>{a.removeAttribute("title"),a.removeAttribute("pattern")})},Ey=()=>{const i=()=>{document.querySelectorAll("input[required], select[required], textarea[required]").forEach(o=>{o.hasAttribute("data-invalid-handler-added")||(o.addEventListener("invalid",c=>{c.preventDefault(),c.stopPropagation()},{capture:!0}),o.setAttribute("data-invalid-handler-added","true"))})};i();const a=new MutationObserver(()=>{_0(),i()});document.body?a.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["title","required","pattern"]}):document.addEventListener("DOMContentLoaded",()=>{a.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["title","required","pattern"]})})};_0();Ey();vg.createRoot(document.getElementById("root")).render(t.jsx(Af.StrictMode,{children:t.jsx(P1,{clientId:Iy,children:t.jsx(_y,{})})}));export{er as _,My as c,km as g};
