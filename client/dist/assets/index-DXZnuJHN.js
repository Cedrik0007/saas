function cg(i,a){for(var r=0;r<a.length;r++){const o=a[r];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in i)){const l=Object.getOwnPropertyDescriptor(o,c);l&&Object.defineProperty(i,c,l.get?l:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function r(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerPolicy&&(l.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?l.credentials="include":c.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(c){if(c.ep)return;c.ep=!0;const l=r(c);fetch(c.href,l)}})();var My=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function km(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Du={exports:{}},Bc={},Fu={exports:{}},kn={};var Bh;function dg(){if(Bh)return kn;Bh=1;var i=Symbol.for("react.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),A=Symbol.iterator;function M(te){return te===null||typeof te!="object"?null:(te=A&&te[A]||te["@@iterator"],typeof te=="function"?te:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,E={};function I(te,C,J){this.props=te,this.context=C,this.refs=E,this.updater=J||b}I.prototype.isReactComponent={},I.prototype.setState=function(te,C){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,C,"setState")},I.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function P(){}P.prototype=I.prototype;function W(te,C,J){this.props=te,this.context=C,this.refs=E,this.updater=J||b}var X=W.prototype=new P;X.constructor=W,U(X,I.prototype),X.isPureReactComponent=!0;var H=Array.isArray,fe=Object.prototype.hasOwnProperty,he={current:null},Ee={key:!0,ref:!0,__self:!0,__source:!0};function ge(te,C,J){var Z,de={},ce=null,be=null;if(C!=null)for(Z in C.ref!==void 0&&(be=C.ref),C.key!==void 0&&(ce=""+C.key),C)fe.call(C,Z)&&!Ee.hasOwnProperty(Z)&&(de[Z]=C[Z]);var Me=arguments.length-2;if(Me===1)de.children=J;else if(1<Me){for(var Fe=Array(Me),We=0;We<Me;We++)Fe[We]=arguments[We+2];de.children=Fe}if(te&&te.defaultProps)for(Z in Me=te.defaultProps,Me)de[Z]===void 0&&(de[Z]=Me[Z]);return{$$typeof:i,type:te,key:ce,ref:be,props:de,_owner:he.current}}function ee(te,C){return{$$typeof:i,type:te.type,key:C,ref:te.ref,props:te.props,_owner:te._owner}}function xe(te){return typeof te=="object"&&te!==null&&te.$$typeof===i}function z(te){var C={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(J){return C[J]})}var $=/\/+/g;function le(te,C){return typeof te=="object"&&te!==null&&te.key!=null?z(""+te.key):C.toString(36)}function ie(te,C,J,Z,de){var ce=typeof te;(ce==="undefined"||ce==="boolean")&&(te=null);var be=!1;if(te===null)be=!0;else switch(ce){case"string":case"number":be=!0;break;case"object":switch(te.$$typeof){case i:case a:be=!0}}if(be)return be=te,de=de(be),te=Z===""?"."+le(be,0):Z,H(de)?(J="",te!=null&&(J=te.replace($,"$&/")+"/"),ie(de,C,J,"",function(We){return We})):de!=null&&(xe(de)&&(de=ee(de,J+(!de.key||be&&be.key===de.key?"":(""+de.key).replace($,"$&/")+"/")+te)),C.push(de)),1;if(be=0,Z=Z===""?".":Z+":",H(te))for(var Me=0;Me<te.length;Me++){ce=te[Me];var Fe=Z+le(ce,Me);be+=ie(ce,C,J,Fe,de)}else if(Fe=M(te),typeof Fe=="function")for(te=Fe.call(te),Me=0;!(ce=te.next()).done;)ce=ce.value,Fe=Z+le(ce,Me++),be+=ie(ce,C,J,Fe,de);else if(ce==="object")throw C=String(te),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.");return be}function we(te,C,J){if(te==null)return te;var Z=[],de=0;return ie(te,Z,"","",function(ce){return C.call(J,ce,de++)}),Z}function _e(te){if(te._status===-1){var C=te._result;C=C(),C.then(function(J){(te._status===0||te._status===-1)&&(te._status=1,te._result=J)},function(J){(te._status===0||te._status===-1)&&(te._status=2,te._result=J)}),te._status===-1&&(te._status=0,te._result=C)}if(te._status===1)return te._result.default;throw te._result}var Ie={current:null},pe={transition:null},Pe={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:pe,ReactCurrentOwner:he};function ze(){throw Error("act(...) is not supported in production builds of React.")}return kn.Children={map:we,forEach:function(te,C,J){we(te,function(){C.apply(this,arguments)},J)},count:function(te){var C=0;return we(te,function(){C++}),C},toArray:function(te){return we(te,function(C){return C})||[]},only:function(te){if(!xe(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},kn.Component=I,kn.Fragment=r,kn.Profiler=c,kn.PureComponent=W,kn.StrictMode=o,kn.Suspense=g,kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pe,kn.act=ze,kn.cloneElement=function(te,C,J){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var Z=U({},te.props),de=te.key,ce=te.ref,be=te._owner;if(C!=null){if(C.ref!==void 0&&(ce=C.ref,be=he.current),C.key!==void 0&&(de=""+C.key),te.type&&te.type.defaultProps)var Me=te.type.defaultProps;for(Fe in C)fe.call(C,Fe)&&!Ee.hasOwnProperty(Fe)&&(Z[Fe]=C[Fe]===void 0&&Me!==void 0?Me[Fe]:C[Fe])}var Fe=arguments.length-2;if(Fe===1)Z.children=J;else if(1<Fe){Me=Array(Fe);for(var We=0;We<Fe;We++)Me[We]=arguments[We+2];Z.children=Me}return{$$typeof:i,type:te.type,key:de,ref:ce,props:Z,_owner:be}},kn.createContext=function(te){return te={$$typeof:m,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:l,_context:te},te.Consumer=te},kn.createElement=ge,kn.createFactory=function(te){var C=ge.bind(null,te);return C.type=te,C},kn.createRef=function(){return{current:null}},kn.forwardRef=function(te){return{$$typeof:p,render:te}},kn.isValidElement=xe,kn.lazy=function(te){return{$$typeof:j,_payload:{_status:-1,_result:te},_init:_e}},kn.memo=function(te,C){return{$$typeof:v,type:te,compare:C===void 0?null:C}},kn.startTransition=function(te){var C=pe.transition;pe.transition={};try{te()}finally{pe.transition=C}},kn.unstable_act=ze,kn.useCallback=function(te,C){return Ie.current.useCallback(te,C)},kn.useContext=function(te){return Ie.current.useContext(te)},kn.useDebugValue=function(){},kn.useDeferredValue=function(te){return Ie.current.useDeferredValue(te)},kn.useEffect=function(te,C){return Ie.current.useEffect(te,C)},kn.useId=function(){return Ie.current.useId()},kn.useImperativeHandle=function(te,C,J){return Ie.current.useImperativeHandle(te,C,J)},kn.useInsertionEffect=function(te,C){return Ie.current.useInsertionEffect(te,C)},kn.useLayoutEffect=function(te,C){return Ie.current.useLayoutEffect(te,C)},kn.useMemo=function(te,C){return Ie.current.useMemo(te,C)},kn.useReducer=function(te,C,J){return Ie.current.useReducer(te,C,J)},kn.useRef=function(te){return Ie.current.useRef(te)},kn.useState=function(te){return Ie.current.useState(te)},kn.useSyncExternalStore=function(te,C,J){return Ie.current.useSyncExternalStore(te,C,J)},kn.useTransition=function(){return Ie.current.useTransition()},kn.version="18.3.1",kn}var zh;function kf(){return zh||(zh=1,Fu.exports=dg()),Fu.exports}var Uh;function ug(){if(Uh)return Bc;Uh=1;var i=kf(),a=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function m(p,g,v){var j,A={},M=null,b=null;v!==void 0&&(M=""+v),g.key!==void 0&&(M=""+g.key),g.ref!==void 0&&(b=g.ref);for(j in g)o.call(g,j)&&!l.hasOwnProperty(j)&&(A[j]=g[j]);if(p&&p.defaultProps)for(j in g=p.defaultProps,g)A[j]===void 0&&(A[j]=g[j]);return{$$typeof:a,type:p,key:M,ref:b,props:A,_owner:c.current}}return Bc.Fragment=r,Bc.jsx=m,Bc.jsxs=m,Bc}var qh;function fg(){return qh||(qh=1,Du.exports=ug()),Du.exports}var t=fg(),Q=kf();const Af=km(Q),hg=cg({__proto__:null,default:Af},[Q]);var Ad={},Tu={exports:{}},ss={},Ru={exports:{}},Ou={};var $h;function pg(){return $h||($h=1,(function(i){function a(pe,Pe){var ze=pe.length;pe.push(Pe);e:for(;0<ze;){var te=ze-1>>>1,C=pe[te];if(0<c(C,Pe))pe[te]=Pe,pe[ze]=C,ze=te;else break e}}function r(pe){return pe.length===0?null:pe[0]}function o(pe){if(pe.length===0)return null;var Pe=pe[0],ze=pe.pop();if(ze!==Pe){pe[0]=ze;e:for(var te=0,C=pe.length,J=C>>>1;te<J;){var Z=2*(te+1)-1,de=pe[Z],ce=Z+1,be=pe[ce];if(0>c(de,ze))ce<C&&0>c(be,de)?(pe[te]=be,pe[ce]=ze,te=ce):(pe[te]=de,pe[Z]=ze,te=Z);else if(ce<C&&0>c(be,ze))pe[te]=be,pe[ce]=ze,te=ce;else break e}}return Pe}function c(pe,Pe){var ze=pe.sortIndex-Pe.sortIndex;return ze!==0?ze:pe.id-Pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var m=Date,p=m.now();i.unstable_now=function(){return m.now()-p}}var g=[],v=[],j=1,A=null,M=3,b=!1,U=!1,E=!1,I=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(pe){for(var Pe=r(v);Pe!==null;){if(Pe.callback===null)o(v);else if(Pe.startTime<=pe)o(v),Pe.sortIndex=Pe.expirationTime,a(g,Pe);else break;Pe=r(v)}}function H(pe){if(E=!1,X(pe),!U)if(r(g)!==null)U=!0,_e(fe);else{var Pe=r(v);Pe!==null&&Ie(H,Pe.startTime-pe)}}function fe(pe,Pe){U=!1,E&&(E=!1,P(ge),ge=-1),b=!0;var ze=M;try{for(X(Pe),A=r(g);A!==null&&(!(A.expirationTime>Pe)||pe&&!z());){var te=A.callback;if(typeof te=="function"){A.callback=null,M=A.priorityLevel;var C=te(A.expirationTime<=Pe);Pe=i.unstable_now(),typeof C=="function"?A.callback=C:A===r(g)&&o(g),X(Pe)}else o(g);A=r(g)}if(A!==null)var J=!0;else{var Z=r(v);Z!==null&&Ie(H,Z.startTime-Pe),J=!1}return J}finally{A=null,M=ze,b=!1}}var he=!1,Ee=null,ge=-1,ee=5,xe=-1;function z(){return!(i.unstable_now()-xe<ee)}function $(){if(Ee!==null){var pe=i.unstable_now();xe=pe;var Pe=!0;try{Pe=Ee(!0,pe)}finally{Pe?le():(he=!1,Ee=null)}}else he=!1}var le;if(typeof W=="function")le=function(){W($)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,we=ie.port2;ie.port1.onmessage=$,le=function(){we.postMessage(null)}}else le=function(){I($,0)};function _e(pe){Ee=pe,he||(he=!0,le())}function Ie(pe,Pe){ge=I(function(){pe(i.unstable_now())},Pe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(pe){pe.callback=null},i.unstable_continueExecution=function(){U||b||(U=!0,_e(fe))},i.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<pe?Math.floor(1e3/pe):5},i.unstable_getCurrentPriorityLevel=function(){return M},i.unstable_getFirstCallbackNode=function(){return r(g)},i.unstable_next=function(pe){switch(M){case 1:case 2:case 3:var Pe=3;break;default:Pe=M}var ze=M;M=Pe;try{return pe()}finally{M=ze}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(pe,Pe){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var ze=M;M=pe;try{return Pe()}finally{M=ze}},i.unstable_scheduleCallback=function(pe,Pe,ze){var te=i.unstable_now();switch(typeof ze=="object"&&ze!==null?(ze=ze.delay,ze=typeof ze=="number"&&0<ze?te+ze:te):ze=te,pe){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=ze+C,pe={id:j++,callback:Pe,priorityLevel:pe,startTime:ze,expirationTime:C,sortIndex:-1},ze>te?(pe.sortIndex=ze,a(v,pe),r(g)===null&&pe===r(v)&&(E?(P(ge),ge=-1):E=!0,Ie(H,ze-te))):(pe.sortIndex=C,a(g,pe),U||b||(U=!0,_e(fe))),pe},i.unstable_shouldYield=z,i.unstable_wrapCallback=function(pe){var Pe=M;return function(){var ze=M;M=Pe;try{return pe.apply(this,arguments)}finally{M=ze}}}})(Ou)),Ou}var Wh;function mg(){return Wh||(Wh=1,Ru.exports=pg()),Ru.exports}var Hh;function gg(){if(Hh)return ss;Hh=1;var i=kf(),a=mg();function r(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function l(e,n){m(e,n),m(e+"Capture",n)}function m(e,n){for(c[e]=n,e=0;e<n.length;e++)o.add(n[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j={},A={};function M(e){return g.call(A,e)?!0:g.call(j,e)?!1:v.test(e)?A[e]=!0:(j[e]=!0,!1)}function b(e,n,s,f){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return f?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function U(e,n,s,f){if(n===null||typeof n>"u"||b(e,n,s,f))return!0;if(f)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function E(e,n,s,f,y,S,D){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=S,this.removeEmptyString=D}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){I[e]=new E(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];I[n]=new E(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){I[e]=new E(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){I[e]=new E(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){I[e]=new E(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){I[e]=new E(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){I[e]=new E(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){I[e]=new E(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){I[e]=new E(e,5,!1,e.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function W(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(P,W);I[n]=new E(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(P,W);I[n]=new E(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(P,W);I[n]=new E(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){I[e]=new E(e,1,!1,e.toLowerCase(),null,!1,!1)}),I.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){I[e]=new E(e,1,!1,e.toLowerCase(),null,!0,!0)});function X(e,n,s,f){var y=I.hasOwnProperty(n)?I[n]:null;(y!==null?y.type!==0:f||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(U(n,s,y,f)&&(s=null),f||y===null?M(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):y.mustUseProperty?e[y.propertyName]=s===null?y.type===3?!1:"":s:(n=y.attributeName,f=y.attributeNamespace,s===null?e.removeAttribute(n):(y=y.type,s=y===3||y===4&&s===!0?"":""+s,f?e.setAttributeNS(f,n,s):e.setAttribute(n,s))))}var H=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),he=Symbol.for("react.portal"),Ee=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),xe=Symbol.for("react.provider"),z=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),_e=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),pe=Symbol.iterator;function Pe(e){return e===null||typeof e!="object"?null:(e=pe&&e[pe]||e["@@iterator"],typeof e=="function"?e:null)}var ze=Object.assign,te;function C(e){if(te===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);te=n&&n[1]||""}return`
`+te+e}var J=!1;function Z(e,n){if(!e||J)return"";J=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(Ve){var f=Ve}Reflect.construct(e,[],n)}else{try{n.call()}catch(Ve){f=Ve}e.call(n.prototype)}else{try{throw Error()}catch(Ve){f=Ve}e()}}catch(Ve){if(Ve&&f&&typeof Ve.stack=="string"){for(var y=Ve.stack.split(`
`),S=f.stack.split(`
`),D=y.length-1,ue=S.length-1;1<=D&&0<=ue&&y[D]!==S[ue];)ue--;for(;1<=D&&0<=ue;D--,ue--)if(y[D]!==S[ue]){if(D!==1||ue!==1)do if(D--,ue--,0>ue||y[D]!==S[ue]){var ve=`
`+y[D].replace(" at new "," at ");return e.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",e.displayName)),ve}while(1<=D&&0<=ue);break}}}finally{J=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?C(e):""}function de(e){switch(e.tag){case 5:return C(e.type);case 16:return C("Lazy");case 13:return C("Suspense");case 19:return C("SuspenseList");case 0:case 2:case 15:return e=Z(e.type,!1),e;case 11:return e=Z(e.type.render,!1),e;case 1:return e=Z(e.type,!0),e;default:return""}}function ce(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ee:return"Fragment";case he:return"Portal";case ee:return"Profiler";case ge:return"StrictMode";case le:return"Suspense";case ie:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case z:return(e.displayName||"Context")+".Consumer";case xe:return(e._context.displayName||"Context")+".Provider";case $:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case we:return n=e.displayName||null,n!==null?n:ce(e.type)||"Memo";case _e:n=e._payload,e=e._init;try{return ce(e(n))}catch{}}return null}function be(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(n);case 8:return n===ge?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Me(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fe(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function We(e){var n=Fe(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),f=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var y=s.get,S=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return y.call(this)},set:function(D){f=""+D,S.call(this,D)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return f},setValue:function(D){f=""+D},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function De(e){e._valueTracker||(e._valueTracker=We(e))}function it(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),f="";return e&&(f=Fe(e)?e.checked?"true":"false":e.value),e=f,e!==s?(n.setValue(e),!0):!1}function ot(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function pt(e,n){var s=n.checked;return ze({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function V(e,n){var s=n.defaultValue==null?"":n.defaultValue,f=n.checked!=null?n.checked:n.defaultChecked;s=Me(n.value!=null?n.value:s),e._wrapperState={initialChecked:f,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function et(e,n){n=n.checked,n!=null&&X(e,"checked",n,!1)}function Et(e,n){et(e,n);var s=Me(n.value),f=n.type;if(s!=null)f==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(f==="submit"||f==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Xe(e,n.type,s):n.hasOwnProperty("defaultValue")&&Xe(e,n.type,Me(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Ct(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var f=n.type;if(!(f!=="submit"&&f!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Xe(e,n,s){(n!=="number"||ot(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var bt=Array.isArray;function mt(e,n,s,f){if(e=e.options,n){n={};for(var y=0;y<s.length;y++)n["$"+s[y]]=!0;for(s=0;s<e.length;s++)y=n.hasOwnProperty("$"+e[s].value),e[s].selected!==y&&(e[s].selected=y),y&&f&&(e[s].defaultSelected=!0)}else{for(s=""+Me(s),n=null,y=0;y<e.length;y++){if(e[y].value===s){e[y].selected=!0,f&&(e[y].defaultSelected=!0);return}n!==null||e[y].disabled||(n=e[y])}n!==null&&(n.selected=!0)}}function Pt(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return ze({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Dt(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(r(92));if(bt(s)){if(1<s.length)throw Error(r(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:Me(s)}}function wt(e,n){var s=Me(n.value),f=Me(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),f!=null&&(e.defaultValue=""+f)}function Qt(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function zt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $t(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?zt(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ae,qe=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,f,y){MSApp.execUnsafeLocalFunction(function(){return e(n,s,f,y)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Ae=Ae||document.createElement("div"),Ae.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Ae.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function se(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var Se={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rt=["Webkit","ms","Moz","O"];Object.keys(Se).forEach(function(e){rt.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Se[n]=Se[e]})});function ht(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||Se.hasOwnProperty(e)&&Se[e]?(""+n).trim():n+"px"}function He(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var f=s.indexOf("--")===0,y=ht(s,n[s],f);s==="float"&&(s="cssFloat"),f?e.setProperty(s,y):e[s]=y}}var ct=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vt(e,n){if(n){if(ct[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function vt(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var An=null;function Jt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ut=null,gn=null,Xt=null;function oe(e){if(e=Qe(e)){if(typeof Ut!="function")throw Error(r(280));var n=e.stateNode;n&&(n=Yt(n),Ut(e.stateNode,e.type,n))}}function xt(e){gn?Xt?Xt.push(e):Xt=[e]:gn=e}function pa(){if(gn){var e=gn,n=Xt;if(Xt=gn=null,oe(e),n)for(e=0;e<n.length;e++)oe(n[e])}}function ln(e,n){return e(n)}function jr(){}var nn=!1;function St(e,n,s){if(nn)return e(n,s);nn=!0;try{return ln(e,n,s)}finally{nn=!1,(gn!==null||Xt!==null)&&(jr(),pa())}}function rn(e,n){var s=e.stateNode;if(s===null)return null;var f=Yt(s);if(f===null)return null;s=f[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(e=e.type,f=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!f;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(r(231,n,typeof s));return s}var ir=!1;if(p)try{var ta={};Object.defineProperty(ta,"passive",{get:function(){ir=!0}}),window.addEventListener("test",ta,ta),window.removeEventListener("test",ta,ta)}catch{ir=!1}function Ka(e,n,s,f,y,S,D,ue,ve){var Ve=Array.prototype.slice.call(arguments,3);try{n.apply(s,Ve)}catch(lt){this.onError(lt)}}var zn=!1,hr=null,$n=!1,vs=null,Rs={onError:function(e){zn=!0,hr=e}};function Qa(e,n,s,f,y,S,D,ue,ve){zn=!1,hr=null,Ka.apply(Rs,arguments)}function Lt(e,n,s,f,y,S,D,ue,ve){if(Qa.apply(this,arguments),zn){if(zn){var Ve=hr;zn=!1,hr=null}else throw Error(r(198));$n||($n=!0,vs=Ve)}}function Dn(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function Ra(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Oa(e){if(Dn(e)!==e)throw Error(r(188))}function Wn(e){var n=e.alternate;if(!n){if(n=Dn(e),n===null)throw Error(r(188));return n!==e?null:e}for(var s=e,f=n;;){var y=s.return;if(y===null)break;var S=y.alternate;if(S===null){if(f=y.return,f!==null){s=f;continue}break}if(y.child===S.child){for(S=y.child;S;){if(S===s)return Oa(y),e;if(S===f)return Oa(y),n;S=S.sibling}throw Error(r(188))}if(s.return!==f.return)s=y,f=S;else{for(var D=!1,ue=y.child;ue;){if(ue===s){D=!0,s=y,f=S;break}if(ue===f){D=!0,f=y,s=S;break}ue=ue.sibling}if(!D){for(ue=S.child;ue;){if(ue===s){D=!0,s=S,f=y;break}if(ue===f){D=!0,f=S,s=y;break}ue=ue.sibling}if(!D)throw Error(r(189))}}if(s.alternate!==f)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?e:n}function Kn(e){return e=Wn(e),e!==null?Qn(e):null}function Qn(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Qn(e);if(n!==null)return n;e=e.sibling}return null}var Or=a.unstable_scheduleCallback,Os=a.unstable_cancelCallback,Fi=a.unstable_shouldYield,ut=a.unstable_requestPaint,xn=a.unstable_now,ls=a.unstable_getCurrentPriorityLevel,Xa=a.unstable_ImmediatePriority,_r=a.unstable_UserBlockingPriority,ka=a.unstable_NormalPriority,Za=a.unstable_LowPriority,cs=a.unstable_IdlePriority,Bs=null,na=null;function Aa(e){if(na&&typeof na.onCommitFiberRoot=="function")try{na.onCommitFiberRoot(Bs,e,void 0,(e.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:Kt,pi=Math.log,To=Math.LN2;function Kt(e){return e>>>=0,e===0?32:31-(pi(e)/To|0)|0}var ei=64,ti=4194304;function mi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wi(e,n){var s=e.pendingLanes;if(s===0)return 0;var f=0,y=e.suspendedLanes,S=e.pingedLanes,D=s&268435455;if(D!==0){var ue=D&~y;ue!==0?f=mi(ue):(S&=D,S!==0&&(f=mi(S)))}else D=s&~y,D!==0?f=mi(D):S!==0&&(f=mi(S));if(f===0)return 0;if(n!==0&&n!==f&&(n&y)===0&&(y=f&-f,S=n&-n,y>=S||y===16&&(S&4194240)!==0))return n;if((f&4)!==0&&(f|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=f;0<n;)s=31-Xn(n),y=1<<s,f|=e[s],n&=~y;return f}function ni(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hr(e,n){for(var s=e.suspendedLanes,f=e.pingedLanes,y=e.expirationTimes,S=e.pendingLanes;0<S;){var D=31-Xn(S),ue=1<<D,ve=y[D];ve===-1?((ue&s)===0||(ue&f)!==0)&&(y[D]=ni(ue,n)):ve<=n&&(e.expiredLanes|=ue),S&=~ue}}function ri(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bs(){var e=ei;return ei<<=1,(ei&4194240)===0&&(ei=64),e}function Ro(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function On(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Xn(n),e[n]=s}function Ba(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var f=e.eventTimes;for(e=e.expirationTimes;0<s;){var y=31-Xn(s),S=1<<y;n[y]=0,f[y]=-1,e[y]=-1,s&=~S}}function ra(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var f=31-Xn(s),y=1<<f;y&n|e[f]&n&&(e[f]|=n),s&=~y}}var Cn=0;function gi(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ws,Oo,js,aa,Hi,bn=!1,or=[],za=null,Ca=null,Hn=null,ma=new Map,Zt=new Map,ai=[],Sn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zs(e,n){switch(e){case"focusin":case"focusout":za=null;break;case"dragenter":case"dragleave":Ca=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":ma.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zt.delete(n.pointerId)}}function Ir(e,n,s,f,y,S){return e===null||e.nativeEvent!==S?(e={blockedOn:n,domEventName:s,eventSystemFlags:f,nativeEvent:S,targetContainers:[y]},n!==null&&(n=Qe(n),n!==null&&Oo(n)),e):(e.eventSystemFlags|=f,n=e.targetContainers,y!==null&&n.indexOf(y)===-1&&n.push(y),e)}function Vi(e,n,s,f,y){switch(n){case"focusin":return za=Ir(za,e,n,s,f,y),!0;case"dragenter":return Ca=Ir(Ca,e,n,s,f,y),!0;case"mouseover":return Hn=Ir(Hn,e,n,s,f,y),!0;case"pointerover":var S=y.pointerId;return ma.set(S,Ir(ma.get(S)||null,e,n,s,f,y)),!0;case"gotpointercapture":return S=y.pointerId,Zt.set(S,Ir(Zt.get(S)||null,e,n,s,f,y)),!0}return!1}function Us(e){var n=Ne(e.target);if(n!==null){var s=Dn(n);if(s!==null){if(n=s.tag,n===13){if(n=Ra(s),n!==null){e.blockedOn=n,Hi(e.priority,function(){js(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ss(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Yi(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var f=new s.constructor(s.type,s);An=f,s.target.dispatchEvent(f),An=null}else return n=Qe(s),n!==null&&Oo(n),e.blockedOn=s,!1;n.shift()}return!0}function Pa(e,n,s){Ss(e)&&s.delete(n)}function Bo(){bn=!1,za!==null&&Ss(za)&&(za=null),Ca!==null&&Ss(Ca)&&(Ca=null),Hn!==null&&Ss(Hn)&&(Hn=null),ma.forEach(Pa),Zt.forEach(Pa)}function xi(e,n){e.blockedOn===n&&(e.blockedOn=null,bn||(bn=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Bo)))}function lr(e){function n(y){return xi(y,e)}if(0<or.length){xi(or[0],e);for(var s=1;s<or.length;s++){var f=or[s];f.blockedOn===e&&(f.blockedOn=null)}}for(za!==null&&xi(za,e),Ca!==null&&xi(Ca,e),Hn!==null&&xi(Hn,e),ma.forEach(n),Zt.forEach(n),s=0;s<ai.length;s++)f=ai[s],f.blockedOn===e&&(f.blockedOn=null);for(;0<ai.length&&(s=ai[0],s.blockedOn===null);)Us(s),s.blockedOn===null&&ai.shift()}var La=H.ReactCurrentBatchConfig,ds=!0;function qs(e,n,s,f){var y=Cn,S=La.transition;La.transition=null;try{Cn=1,$s(e,n,s,f)}finally{Cn=y,La.transition=S}}function Sr(e,n,s,f){var y=Cn,S=La.transition;La.transition=null;try{Cn=4,$s(e,n,s,f)}finally{Cn=y,La.transition=S}}function $s(e,n,s,f){if(ds){var y=Yi(e,n,s,f);if(y===null)qo(e,n,f,yi,s),zs(e,f);else if(Vi(y,e,n,s,f))f.stopPropagation();else if(zs(e,f),n&4&&-1<Sn.indexOf(e)){for(;y!==null;){var S=Qe(y);if(S!==null&&ws(S),S=Yi(e,n,s,f),S===null&&qo(e,n,f,yi,s),S===y)break;y=S}y!==null&&f.stopPropagation()}else qo(e,n,f,null,s)}}var yi=null;function Yi(e,n,s,f){if(yi=null,e=Jt(f),e=Ne(e),e!==null)if(n=Dn(e),n===null)e=null;else if(s=n.tag,s===13){if(e=Ra(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return yi=e,null}function Ws(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ls()){case Xa:return 1;case _r:return 4;case ka:case Za:return 16;case cs:return 536870912;default:return 16}default:return 16}}var ga=null,Vr=null,vi=null;function Ln(){if(vi)return vi;var e,n=Vr,s=n.length,f,y="value"in ga?ga.value:ga.textContent,S=y.length;for(e=0;e<s&&n[e]===y[e];e++);var D=s-e;for(f=1;f<=D&&n[s-f]===y[S-f];f++);return vi=y.slice(e,1<f?1-f:void 0)}function _a(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function En(){return!0}function Ti(){return!1}function Vn(e){function n(s,f,y,S,D){this._reactName=s,this._targetInst=y,this.type=f,this.nativeEvent=S,this.target=D,this.currentTarget=null;for(var ue in e)e.hasOwnProperty(ue)&&(s=e[ue],this[ue]=s?s(S):S[ue]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?En:Ti,this.isPropagationStopped=Ti,this}return ze(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=En)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=En)},persist:function(){},isPersistent:En}),n}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=Vn(bi),x=ze({},bi,{view:0,detail:0}),L=Vn(x),ae,me,Le,Ke=ze({},x,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ar,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Le&&(Le&&e.type==="mousemove"?(ae=e.screenX-Le.screenX,me=e.screenY-Le.screenY):me=ae=0,Le=e),ae)},movementY:function(e){return"movementY"in e?e.movementY:me}}),nt=Vn(Ke),Nt=ze({},Ke,{dataTransfer:0}),Ot=Vn(Nt),Ht=ze({},x,{relatedTarget:0}),an=Vn(Ht),fn=ze({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),cr=Vn(fn),dr=ze({},bi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yn=Vn(dr),Nr=ze({},bi,{data:0}),kr=Vn(Nr),Yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ri(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Zn[e])?!!n[e]:!1}function Ar(){return Ri}var wi=ze({},x,{key:function(e){if(e.key){var n=Yr[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=_a(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ar,charCode:function(e){return e.type==="keypress"?_a(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_a(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ji=Vn(wi),Ns=ze({},Ke,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=Vn(Ns),ii=ze({},x,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ar}),pr=Vn(ii),Oi=ze({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ks=Vn(Oi),si=ze({},Ke,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oi=Vn(si),mr=[9,13,27,32],Qi=p&&"CompositionEvent"in window,Ia=null;p&&"documentMode"in document&&(Ia=document.documentMode);var Xi=p&&"TextEvent"in window&&!Ia,ya=p&&(!Qi||Ia&&8<Ia&&11>=Ia),jt=" ",_n=!1;function As(e,n){switch(e){case"keyup":return mr.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ji(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ia=!1;function li(e,n){switch(e){case"compositionend":return ji(n);case"keypress":return n.which!==32?null:(_n=!0,jt);case"textInput":return e=n.data,e===jt&&_n?null:e;default:return null}}function va(e,n){if(ia)return e==="compositionend"||!Qi&&As(e,n)?(e=Ln(),vi=Vr=ga=null,ia=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ya&&n.locale!=="ko"?null:n.data;default:return null}}var Si={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Br(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Si[e.type]:n==="textarea"}function Zi(e,n,s,f){xt(f),n=ci(n,"onChange"),0<n.length&&(s=new xa("onChange","change",null,s,f),e.push({event:s,listeners:n}))}var Bi=null,Ni=null;function Gn(e){So(e,0)}function Hs(e){var n=at(e);if(it(n))return e}function es(e,n){if(e==="change")return n}var Ua=!1;if(p){var Vs;if(p){var mo="oninput"in document;if(!mo){var Ys=document.createElement("div");Ys.setAttribute("oninput","return;"),mo=typeof Ys.oninput=="function"}Vs=mo}else Vs=!1;Ua=Vs&&(!document.documentMode||9<document.documentMode)}function go(){Bi&&(Bi.detachEvent("onpropertychange",ki),Ni=Bi=null)}function ki(e){if(e.propertyName==="value"&&Hs(Ni)){var n=[];Zi(n,Ni,e,Jt(e)),St(Gn,n)}}function Cs(e,n,s){e==="focusin"?(go(),Bi=n,Ni=s,Bi.attachEvent("onpropertychange",ki)):e==="focusout"&&go()}function Gr(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hs(Ni)}function Gs(e,n){if(e==="click")return Hs(n)}function Jr(e,n){if(e==="input"||e==="change")return Hs(n)}function Js(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var gr=typeof Object.is=="function"?Object.is:Js;function qa(e,n){if(gr(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),f=Object.keys(n);if(s.length!==f.length)return!1;for(f=0;f<s.length;f++){var y=s[f];if(!g.call(n,y)||!gr(e[y],n[y]))return!1}return!0}function Mn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wn(e,n){var s=Mn(e);e=0;for(var f;s;){if(s.nodeType===3){if(f=e+s.textContent.length,e<=n&&f>=n)return{node:s,offset:n-e};e=f}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Mn(s)}}function xr(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?xr(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Er(){for(var e=window,n=ot();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=ot(e.document)}return n}function Ai(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function yr(e){var n=Er(),s=e.focusedElem,f=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&xr(s.ownerDocument.documentElement,s)){if(f!==null&&Ai(s)){if(n=f.start,e=f.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var y=s.textContent.length,S=Math.min(f.start,y);f=f.end===void 0?S:Math.min(f.end,y),!e.extend&&S>f&&(y=f,f=S,S=y),y=wn(s,S);var D=wn(s,f);y&&D&&(e.rangeCount!==1||e.anchorNode!==y.node||e.anchorOffset!==y.offset||e.focusNode!==D.node||e.focusOffset!==D.offset)&&(n=n.createRange(),n.setStart(y.node,y.offset),e.removeAllRanges(),S>f?(e.addRange(n),e.extend(D.node,D.offset)):(n.setEnd(D.node,D.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xo=p&&"documentMode"in document&&11>=document.documentMode,Ps=null,In=null,yo=null,zo=!1;function Ko(e,n,s){var f=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;zo||Ps==null||Ps!==ot(f)||(f=Ps,"selectionStart"in f&&Ai(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),yo&&qa(yo,f)||(yo=f,f=ci(In,"onSelect"),0<f.length&&(n=new xa("onSelect","select",null,n,s),e.push({event:n,listeners:f}),n.target=Ps)))}function Uo(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Ks={animationend:Uo("Animation","AnimationEnd"),animationiteration:Uo("Animation","AnimationIteration"),animationstart:Uo("Animation","AnimationStart"),transitionend:Uo("Transition","TransitionEnd")},Qs={},vo={};p&&(vo=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function bo(e){if(Qs[e])return Qs[e];if(!Ks[e])return e;var n=Ks[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in vo)return Qs[e]=n[s];return e}var wl=bo("animationend"),jl=bo("animationiteration"),Sl=bo("animationstart"),Nl=bo("transitionend"),kl=new Map,Al="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(e,n){kl.set(e,n),l(n,[e])}for(var wo=0;wo<Al.length;wo++){var Ea=Al[wo],Ci=Ea.toLowerCase(),Qo=Ea[0].toUpperCase()+Ea.slice(1);ts(Ci,"on"+Qo)}ts(wl,"onAnimationEnd"),ts(jl,"onAnimationIteration"),ts(Sl,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(Nl,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cl=new Set("cancel close invalid load scroll toggle".split(" ").concat(us));function jo(e,n,s){var f=e.type||"unknown-event";e.currentTarget=s,Lt(f,n,void 0,e),e.currentTarget=null}function So(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var f=e[s],y=f.event;f=f.listeners;e:{var S=void 0;if(n)for(var D=f.length-1;0<=D;D--){var ue=f[D],ve=ue.instance,Ve=ue.currentTarget;if(ue=ue.listener,ve!==S&&y.isPropagationStopped())break e;jo(y,ue,Ve),S=ve}else for(D=0;D<f.length;D++){if(ue=f[D],ve=ue.instance,Ve=ue.currentTarget,ue=ue.listener,ve!==S&&y.isPropagationStopped())break e;jo(y,ue,Ve),S=ve}}}if($n)throw e=vs,$n=!1,vs=null,e}function Un(e,n){var s=n[K];s===void 0&&(s=n[K]=new Set);var f=e+"__bubble";s.has(f)||(Ma(n,e,2,!1),s.add(f))}function Xo(e,n,s){var f=0;n&&(f|=4),Ma(s,e,f,n)}var No="_reactListening"+Math.random().toString(36).slice(2);function Mr(e){if(!e[No]){e[No]=!0,o.forEach(function(s){s!=="selectionchange"&&(Cl.has(s)||Xo(s,!1,e),Xo(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[No]||(n[No]=!0,Xo("selectionchange",!1,n))}}function Ma(e,n,s,f){switch(Ws(n)){case 1:var y=qs;break;case 4:y=Sr;break;default:y=$s}s=y.bind(null,n,s,e),y=void 0,!ir||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(y=!0),f?y!==void 0?e.addEventListener(n,s,{capture:!0,passive:y}):e.addEventListener(n,s,!0):y!==void 0?e.addEventListener(n,s,{passive:y}):e.addEventListener(n,s,!1)}function qo(e,n,s,f,y){var S=f;if((n&1)===0&&(n&2)===0&&f!==null)e:for(;;){if(f===null)return;var D=f.tag;if(D===3||D===4){var ue=f.stateNode.containerInfo;if(ue===y||ue.nodeType===8&&ue.parentNode===y)break;if(D===4)for(D=f.return;D!==null;){var ve=D.tag;if((ve===3||ve===4)&&(ve=D.stateNode.containerInfo,ve===y||ve.nodeType===8&&ve.parentNode===y))return;D=D.return}for(;ue!==null;){if(D=Ne(ue),D===null)return;if(ve=D.tag,ve===5||ve===6){f=S=D;continue e}ue=ue.parentNode}}f=f.return}St(function(){var Ve=S,lt=Jt(s),dt=[];e:{var st=kl.get(e);if(st!==void 0){var At=xa,Tt=e;switch(e){case"keypress":if(_a(s)===0)break e;case"keydown":case"keyup":At=Ji;break;case"focusin":Tt="focus",At=an;break;case"focusout":Tt="blur",At=an;break;case"beforeblur":case"afterblur":At=an;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":At=nt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":At=Ot;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":At=pr;break;case wl:case jl:case Sl:At=cr;break;case Nl:At=ks;break;case"scroll":At=L;break;case"wheel":At=oi;break;case"copy":case"cut":case"paste":At=Yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":At=Ki}var Bt=(n&4)!==0,ca=!Bt&&e==="scroll",Oe=Bt?st!==null?st+"Capture":null:st;Bt=[];for(var ke=Ve,$e;ke!==null;){$e=ke;var ft=$e.stateNode;if($e.tag===5&&ft!==null&&($e=ft,Oe!==null&&(ft=rn(ke,Oe),ft!=null&&Bt.push(Ue(ke,ft,$e)))),ca)break;ke=ke.return}0<Bt.length&&(st=new At(st,Tt,null,s,lt),dt.push({event:st,listeners:Bt}))}}if((n&7)===0){e:{if(st=e==="mouseover"||e==="pointerover",At=e==="mouseout"||e==="pointerout",st&&s!==An&&(Tt=s.relatedTarget||s.fromElement)&&(Ne(Tt)||Tt[T]))break e;if((At||st)&&(st=lt.window===lt?lt:(st=lt.ownerDocument)?st.defaultView||st.parentWindow:window,At?(Tt=s.relatedTarget||s.toElement,At=Ve,Tt=Tt?Ne(Tt):null,Tt!==null&&(ca=Dn(Tt),Tt!==ca||Tt.tag!==5&&Tt.tag!==6)&&(Tt=null)):(At=null,Tt=Ve),At!==Tt)){if(Bt=nt,ft="onMouseLeave",Oe="onMouseEnter",ke="mouse",(e==="pointerout"||e==="pointerover")&&(Bt=Ki,ft="onPointerLeave",Oe="onPointerEnter",ke="pointer"),ca=At==null?st:at(At),$e=Tt==null?st:at(Tt),st=new Bt(ft,ke+"leave",At,s,lt),st.target=ca,st.relatedTarget=$e,ft=null,Ne(lt)===Ve&&(Bt=new Bt(Oe,ke+"enter",Tt,s,lt),Bt.target=$e,Bt.relatedTarget=ca,ft=Bt),ca=ft,At&&Tt)t:{for(Bt=At,Oe=Tt,ke=0,$e=Bt;$e;$e=Xs($e))ke++;for($e=0,ft=Oe;ft;ft=Xs(ft))$e++;for(;0<ke-$e;)Bt=Xs(Bt),ke--;for(;0<$e-ke;)Oe=Xs(Oe),$e--;for(;ke--;){if(Bt===Oe||Oe!==null&&Bt===Oe.alternate)break t;Bt=Xs(Bt),Oe=Xs(Oe)}Bt=null}else Bt=null;At!==null&&Vl(dt,st,At,Bt,!1),Tt!==null&&ca!==null&&Vl(dt,ca,Tt,Bt,!0)}}e:{if(st=Ve?at(Ve):window,At=st.nodeName&&st.nodeName.toLowerCase(),At==="select"||At==="input"&&st.type==="file")var Wt=es;else if(Br(st))if(Ua)Wt=Jr;else{Wt=Gr;var en=Cs}else(At=st.nodeName)&&At.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(Wt=Gs);if(Wt&&(Wt=Wt(e,Ve))){Zi(dt,Wt,s,lt);break e}en&&en(e,st,Ve),e==="focusout"&&(en=st._wrapperState)&&en.controlled&&st.type==="number"&&Xe(st,"number",st.value)}switch(en=Ve?at(Ve):window,e){case"focusin":(Br(en)||en.contentEditable==="true")&&(Ps=en,In=Ve,yo=null);break;case"focusout":yo=In=Ps=null;break;case"mousedown":zo=!0;break;case"contextmenu":case"mouseup":case"dragend":zo=!1,Ko(dt,s,lt);break;case"selectionchange":if(xo)break;case"keydown":case"keyup":Ko(dt,s,lt)}var tn;if(Qi)e:{switch(e){case"compositionstart":var dn="onCompositionStart";break e;case"compositionend":dn="onCompositionEnd";break e;case"compositionupdate":dn="onCompositionUpdate";break e}dn=void 0}else ia?As(e,s)&&(dn="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(dn="onCompositionStart");dn&&(ya&&s.locale!=="ko"&&(ia||dn!=="onCompositionStart"?dn==="onCompositionEnd"&&ia&&(tn=Ln()):(ga=lt,Vr="value"in ga?ga.value:ga.textContent,ia=!0)),en=ci(Ve,dn),0<en.length&&(dn=new kr(dn,e,null,s,lt),dt.push({event:dn,listeners:en}),tn?dn.data=tn:(tn=ji(s),tn!==null&&(dn.data=tn)))),(tn=Xi?li(e,s):va(e,s))&&(Ve=ci(Ve,"onBeforeInput"),0<Ve.length&&(lt=new kr("onBeforeInput","beforeinput",null,s,lt),dt.push({event:lt,listeners:Ve}),lt.data=tn))}So(dt,n)})}function Ue(e,n,s){return{instance:e,listener:n,currentTarget:s}}function ci(e,n){for(var s=n+"Capture",f=[];e!==null;){var y=e,S=y.stateNode;y.tag===5&&S!==null&&(y=S,S=rn(e,s),S!=null&&f.unshift(Ue(e,S,y)),S=rn(e,n),S!=null&&f.push(Ue(e,S,y))),e=e.return}return f}function Xs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vl(e,n,s,f,y){for(var S=n._reactName,D=[];s!==null&&s!==f;){var ue=s,ve=ue.alternate,Ve=ue.stateNode;if(ve!==null&&ve===f)break;ue.tag===5&&Ve!==null&&(ue=Ve,y?(ve=rn(s,S),ve!=null&&D.unshift(Ue(s,ve,ue))):y||(ve=rn(s,S),ve!=null&&D.push(Ue(s,ve,ue)))),s=s.return}D.length!==0&&e.push({event:n,listeners:D})}var kc=/\r\n?/g,Ac=/\u0000|\uFFFD/g;function Yl(e){return(typeof e=="string"?e:""+e).replace(kc,`
`).replace(Ac,"")}function Zo(e,n,s){if(n=Yl(n),Yl(e)!==n&&s)throw Error(r(425))}function Zs(){}var ko=null,Ls=null;function Ao(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var el=typeof setTimeout=="function"?setTimeout:void 0,Gl=typeof clearTimeout=="function"?clearTimeout:void 0,Pl=typeof Promise=="function"?Promise:void 0,tl=typeof queueMicrotask=="function"?queueMicrotask:typeof Pl<"u"?function(e){return Pl.resolve(null).then(e).catch(Co)}:el;function Co(e){setTimeout(function(){throw e})}function eo(e,n){var s=n,f=0;do{var y=s.nextSibling;if(e.removeChild(s),y&&y.nodeType===8)if(s=y.data,s==="/$"){if(f===0){e.removeChild(y),lr(n);return}f--}else s!=="$"&&s!=="$?"&&s!=="$!"||f++;s=y}while(s);lr(n)}function Da(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function u(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var k=Math.random().toString(36).slice(2),B="__reactFiber$"+k,F="__reactProps$"+k,T="__reactContainer$"+k,K="__reactEvents$"+k,Y="__reactListeners$"+k,Ce="__reactHandles$"+k;function Ne(e){var n=e[B];if(n)return n;for(var s=e.parentNode;s;){if(n=s[T]||s[B]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=u(e);e!==null;){if(s=e[B])return s;e=u(e)}return n}e=s,s=e.parentNode}return null}function Qe(e){return e=e[B]||e[T],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function at(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Yt(e){return e[F]||null}var yt=[],vn=-1;function sn(e){return{current:e}}function cn(e){0>vn||(e.current=yt[vn],yt[vn]=null,vn--)}function yn(e,n){vn++,yt[vn]=e.current,e.current=n}var ba={},sa=sn(ba),$a=sn(!1),kt=ba;function qn(e,n){var s=e.type.contextTypes;if(!s)return ba;var f=e.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===n)return f.__reactInternalMemoizedMaskedChildContext;var y={},S;for(S in s)y[S]=n[S];return f&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=y),y}function er(e){return e=e.childContextTypes,e!=null}function _s(){cn($a),cn(sa)}function Jl(e,n,s){if(sa.current!==ba)throw Error(r(168));yn(sa,n),yn($a,s)}function Cc(e,n,s){var f=e.stateNode;if(n=n.childContextTypes,typeof f.getChildContext!="function")return s;f=f.getChildContext();for(var y in f)if(!(y in n))throw Error(r(108,be(e)||"Unknown",y));return ze({},s,f)}function $o(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ba,kt=sa.current,yn(sa,e),yn($a,$a.current),!0}function Xc(e,n,s){var f=e.stateNode;if(!f)throw Error(r(169));s?(e=Cc(e,n,kt),f.__reactInternalMemoizedMergedChildContext=e,cn($a),cn(sa),yn(sa,e)):cn($a),yn($a,s)}var to=null,Ll=!1,d=!1;function h(e){to===null?to=[e]:to.push(e)}function w(e){Ll=!0,h(e)}function N(){if(!d&&to!==null){d=!0;var e=0,n=Cn;try{var s=to;for(Cn=1;e<s.length;e++){var f=s[e];do f=f(!0);while(f!==null)}to=null,Ll=!1}catch(y){throw to!==null&&(to=to.slice(e+1)),Or(Xa,N),y}finally{Cn=n,d=!1}}return null}var _=[],R=0,O=null,q=0,G=[],ne=0,ye=null,Re=1,re="";function je(e,n){_[R++]=q,_[R++]=O,O=e,q=n}function Te(e,n,s){G[ne++]=Re,G[ne++]=re,G[ne++]=ye,ye=e;var f=Re;e=re;var y=32-Xn(f)-1;f&=~(1<<y),s+=1;var S=32-Xn(n)+y;if(30<S){var D=y-y%5;S=(f&(1<<D)-1).toString(32),f>>=D,y-=D,Re=1<<32-Xn(n)+y|s<<y|f,re=S+e}else Re=1<<S|s<<y|f,re=e}function Je(e){e.return!==null&&(je(e,1),Te(e,1,0))}function Be(e){for(;e===O;)O=_[--R],_[R]=null,q=_[--R],_[R]=null;for(;e===ye;)ye=G[--ne],G[ne]=null,re=G[--ne],G[ne]=null,Re=G[--ne],G[ne]=null}var Ye=null,Ge=null,Ze=!1,tt=null;function qt(e,n){var s=Fs(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function _t(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Ye=e,Ge=Da(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Ye=e,Ge=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=ye!==null?{id:Re,overflow:re}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Fs(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,Ye=e,Ge=null,!0):!1;default:return!1}}function hn(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ft(e){if(Ze){var n=Ge;if(n){var s=n;if(!_t(e,n)){if(hn(e))throw Error(r(418));n=Da(s.nextSibling);var f=Ye;n&&_t(e,n)?qt(f,s):(e.flags=e.flags&-4097|2,Ze=!1,Ye=e)}}else{if(hn(e))throw Error(r(418));e.flags=e.flags&-4097|2,Ze=!1,Ye=e}}}function Nn(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ye=e}function Dr(e){if(e!==Ye)return!1;if(!Ze)return Nn(e),Ze=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Ao(e.type,e.memoizedProps)),n&&(n=Ge)){if(hn(e))throw pn(),Error(r(418));for(;n;)qt(e,n),n=Da(n.nextSibling)}if(Nn(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){Ge=Da(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}Ge=null}}else Ge=Ye?Da(e.stateNode.nextSibling):null;return!0}function pn(){for(var e=Ge;e;)e=Da(e.nextSibling)}function It(){Ge=Ye=null,Ze=!1}function gt(e){tt===null?tt=[e]:tt.push(e)}var zr=H.ReactCurrentBatchConfig;function on(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var f=s.stateNode}if(!f)throw Error(r(147,e));var y=f,S=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===S?n.ref:(n=function(D){var ue=y.refs;D===null?delete ue[S]:ue[S]=D},n._stringRef=S,n)}if(typeof e!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,e))}return e}function jn(e,n){throw e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function sr(e){var n=e._init;return n(e._payload)}function wa(e){function n(Oe,ke){if(e){var $e=Oe.deletions;$e===null?(Oe.deletions=[ke],Oe.flags|=16):$e.push(ke)}}function s(Oe,ke){if(!e)return null;for(;ke!==null;)n(Oe,ke),ke=ke.sibling;return null}function f(Oe,ke){for(Oe=new Map;ke!==null;)ke.key!==null?Oe.set(ke.key,ke):Oe.set(ke.index,ke),ke=ke.sibling;return Oe}function y(Oe,ke){return Oe=ul(Oe,ke),Oe.index=0,Oe.sibling=null,Oe}function S(Oe,ke,$e){return Oe.index=$e,e?($e=Oe.alternate,$e!==null?($e=$e.index,$e<ke?(Oe.flags|=2,ke):$e):(Oe.flags|=2,ke)):(Oe.flags|=1048576,ke)}function D(Oe){return e&&Oe.alternate===null&&(Oe.flags|=2),Oe}function ue(Oe,ke,$e,ft){return ke===null||ke.tag!==6?(ke=Pu($e,Oe.mode,ft),ke.return=Oe,ke):(ke=y(ke,$e),ke.return=Oe,ke)}function ve(Oe,ke,$e,ft){var Wt=$e.type;return Wt===Ee?lt(Oe,ke,$e.props.children,ft,$e.key):ke!==null&&(ke.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===_e&&sr(Wt)===ke.type)?(ft=y(ke,$e.props),ft.ref=on(Oe,ke,$e),ft.return=Oe,ft):(ft=yd($e.type,$e.key,$e.props,null,Oe.mode,ft),ft.ref=on(Oe,ke,$e),ft.return=Oe,ft)}function Ve(Oe,ke,$e,ft){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==$e.containerInfo||ke.stateNode.implementation!==$e.implementation?(ke=Lu($e,Oe.mode,ft),ke.return=Oe,ke):(ke=y(ke,$e.children||[]),ke.return=Oe,ke)}function lt(Oe,ke,$e,ft,Wt){return ke===null||ke.tag!==7?(ke=Rl($e,Oe.mode,ft,Wt),ke.return=Oe,ke):(ke=y(ke,$e),ke.return=Oe,ke)}function dt(Oe,ke,$e){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ke=Pu(""+ke,Oe.mode,$e),ke.return=Oe,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case fe:return $e=yd(ke.type,ke.key,ke.props,null,Oe.mode,$e),$e.ref=on(Oe,null,ke),$e.return=Oe,$e;case he:return ke=Lu(ke,Oe.mode,$e),ke.return=Oe,ke;case _e:var ft=ke._init;return dt(Oe,ft(ke._payload),$e)}if(bt(ke)||Pe(ke))return ke=Rl(ke,Oe.mode,$e,null),ke.return=Oe,ke;jn(Oe,ke)}return null}function st(Oe,ke,$e,ft){var Wt=ke!==null?ke.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Wt!==null?null:ue(Oe,ke,""+$e,ft);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case fe:return $e.key===Wt?ve(Oe,ke,$e,ft):null;case he:return $e.key===Wt?Ve(Oe,ke,$e,ft):null;case _e:return Wt=$e._init,st(Oe,ke,Wt($e._payload),ft)}if(bt($e)||Pe($e))return Wt!==null?null:lt(Oe,ke,$e,ft,null);jn(Oe,$e)}return null}function At(Oe,ke,$e,ft,Wt){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return Oe=Oe.get($e)||null,ue(ke,Oe,""+ft,Wt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case fe:return Oe=Oe.get(ft.key===null?$e:ft.key)||null,ve(ke,Oe,ft,Wt);case he:return Oe=Oe.get(ft.key===null?$e:ft.key)||null,Ve(ke,Oe,ft,Wt);case _e:var en=ft._init;return At(Oe,ke,$e,en(ft._payload),Wt)}if(bt(ft)||Pe(ft))return Oe=Oe.get($e)||null,lt(ke,Oe,ft,Wt,null);jn(ke,ft)}return null}function Tt(Oe,ke,$e,ft){for(var Wt=null,en=null,tn=ke,dn=ke=0,Ga=null;tn!==null&&dn<$e.length;dn++){tn.index>dn?(Ga=tn,tn=null):Ga=tn.sibling;var Bn=st(Oe,tn,$e[dn],ft);if(Bn===null){tn===null&&(tn=Ga);break}e&&tn&&Bn.alternate===null&&n(Oe,tn),ke=S(Bn,ke,dn),en===null?Wt=Bn:en.sibling=Bn,en=Bn,tn=Ga}if(dn===$e.length)return s(Oe,tn),Ze&&je(Oe,dn),Wt;if(tn===null){for(;dn<$e.length;dn++)tn=dt(Oe,$e[dn],ft),tn!==null&&(ke=S(tn,ke,dn),en===null?Wt=tn:en.sibling=tn,en=tn);return Ze&&je(Oe,dn),Wt}for(tn=f(Oe,tn);dn<$e.length;dn++)Ga=At(tn,Oe,dn,$e[dn],ft),Ga!==null&&(e&&Ga.alternate!==null&&tn.delete(Ga.key===null?dn:Ga.key),ke=S(Ga,ke,dn),en===null?Wt=Ga:en.sibling=Ga,en=Ga);return e&&tn.forEach(function(fl){return n(Oe,fl)}),Ze&&je(Oe,dn),Wt}function Bt(Oe,ke,$e,ft){var Wt=Pe($e);if(typeof Wt!="function")throw Error(r(150));if($e=Wt.call($e),$e==null)throw Error(r(151));for(var en=Wt=null,tn=ke,dn=ke=0,Ga=null,Bn=$e.next();tn!==null&&!Bn.done;dn++,Bn=$e.next()){tn.index>dn?(Ga=tn,tn=null):Ga=tn.sibling;var fl=st(Oe,tn,Bn.value,ft);if(fl===null){tn===null&&(tn=Ga);break}e&&tn&&fl.alternate===null&&n(Oe,tn),ke=S(fl,ke,dn),en===null?Wt=fl:en.sibling=fl,en=fl,tn=Ga}if(Bn.done)return s(Oe,tn),Ze&&je(Oe,dn),Wt;if(tn===null){for(;!Bn.done;dn++,Bn=$e.next())Bn=dt(Oe,Bn.value,ft),Bn!==null&&(ke=S(Bn,ke,dn),en===null?Wt=Bn:en.sibling=Bn,en=Bn);return Ze&&je(Oe,dn),Wt}for(tn=f(Oe,tn);!Bn.done;dn++,Bn=$e.next())Bn=At(tn,Oe,dn,Bn.value,ft),Bn!==null&&(e&&Bn.alternate!==null&&tn.delete(Bn.key===null?dn:Bn.key),ke=S(Bn,ke,dn),en===null?Wt=Bn:en.sibling=Bn,en=Bn);return e&&tn.forEach(function(lg){return n(Oe,lg)}),Ze&&je(Oe,dn),Wt}function ca(Oe,ke,$e,ft){if(typeof $e=="object"&&$e!==null&&$e.type===Ee&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case fe:e:{for(var Wt=$e.key,en=ke;en!==null;){if(en.key===Wt){if(Wt=$e.type,Wt===Ee){if(en.tag===7){s(Oe,en.sibling),ke=y(en,$e.props.children),ke.return=Oe,Oe=ke;break e}}else if(en.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===_e&&sr(Wt)===en.type){s(Oe,en.sibling),ke=y(en,$e.props),ke.ref=on(Oe,en,$e),ke.return=Oe,Oe=ke;break e}s(Oe,en);break}else n(Oe,en);en=en.sibling}$e.type===Ee?(ke=Rl($e.props.children,Oe.mode,ft,$e.key),ke.return=Oe,Oe=ke):(ft=yd($e.type,$e.key,$e.props,null,Oe.mode,ft),ft.ref=on(Oe,ke,$e),ft.return=Oe,Oe=ft)}return D(Oe);case he:e:{for(en=$e.key;ke!==null;){if(ke.key===en)if(ke.tag===4&&ke.stateNode.containerInfo===$e.containerInfo&&ke.stateNode.implementation===$e.implementation){s(Oe,ke.sibling),ke=y(ke,$e.children||[]),ke.return=Oe,Oe=ke;break e}else{s(Oe,ke);break}else n(Oe,ke);ke=ke.sibling}ke=Lu($e,Oe.mode,ft),ke.return=Oe,Oe=ke}return D(Oe);case _e:return en=$e._init,ca(Oe,ke,en($e._payload),ft)}if(bt($e))return Tt(Oe,ke,$e,ft);if(Pe($e))return Bt(Oe,ke,$e,ft);jn(Oe,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,ke!==null&&ke.tag===6?(s(Oe,ke.sibling),ke=y(ke,$e),ke.return=Oe,Oe=ke):(s(Oe,ke),ke=Pu($e,Oe.mode,ft),ke.return=Oe,Oe=ke),D(Oe)):s(Oe,ke)}return ca}var Kr=wa(!0),Cr=wa(!1),oa=sn(null),ja=null,vr=null,Pn=null;function Fn(){Pn=vr=ja=null}function br(e){var n=oa.current;cn(oa),e._currentValue=n}function Tn(e,n,s){for(;e!==null;){var f=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,f!==null&&(f.childLanes|=n)):f!==null&&(f.childLanes&n)!==n&&(f.childLanes|=n),e===s)break;e=e.return}}function Fr(e,n){ja=e,Pn=vr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(rs=!0),e.firstContext=null)}function Tr(e){var n=e._currentValue;if(Pn!==e)if(e={context:e,memoizedValue:n,next:null},vr===null){if(ja===null)throw Error(r(308));vr=e,ja.dependencies={lanes:0,firstContext:e}}else vr=vr.next=e;return n}var tr=null;function Wa(e){tr===null?tr=[e]:tr.push(e)}function Jn(e,n,s,f){var y=n.interleaved;return y===null?(s.next=s,Wa(n)):(s.next=y.next,y.next=s),n.interleaved=s,nr(e,f)}function nr(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Qr=!1;function Fa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pi(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ur(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function qr(e,n,s){var f=e.updateQueue;if(f===null)return null;if(f=f.shared,(Rn&2)!==0){var y=f.pending;return y===null?n.next=n:(n.next=y.next,y.next=n),f.pending=n,nr(e,s)}return y=f.interleaved,y===null?(n.next=n,Wa(f)):(n.next=y.next,y.next=n),f.interleaved=n,nr(e,s)}function Ha(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var f=n.lanes;f&=e.pendingLanes,s|=f,n.lanes=s,ra(e,s)}}function rr(e,n){var s=e.updateQueue,f=e.alternate;if(f!==null&&(f=f.updateQueue,s===f)){var y=null,S=null;if(s=s.firstBaseUpdate,s!==null){do{var D={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};S===null?y=S=D:S=S.next=D,s=s.next}while(s!==null);S===null?y=S=n:S=S.next=n}else y=S=n;s={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:S,shared:f.shared,effects:f.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Va(e,n,s,f){var y=e.updateQueue;Qr=!1;var S=y.firstBaseUpdate,D=y.lastBaseUpdate,ue=y.shared.pending;if(ue!==null){y.shared.pending=null;var ve=ue,Ve=ve.next;ve.next=null,D===null?S=Ve:D.next=Ve,D=ve;var lt=e.alternate;lt!==null&&(lt=lt.updateQueue,ue=lt.lastBaseUpdate,ue!==D&&(ue===null?lt.firstBaseUpdate=Ve:ue.next=Ve,lt.lastBaseUpdate=ve))}if(S!==null){var dt=y.baseState;D=0,lt=Ve=ve=null,ue=S;do{var st=ue.lane,At=ue.eventTime;if((f&st)===st){lt!==null&&(lt=lt.next={eventTime:At,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var Tt=e,Bt=ue;switch(st=n,At=s,Bt.tag){case 1:if(Tt=Bt.payload,typeof Tt=="function"){dt=Tt.call(At,dt,st);break e}dt=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Bt.payload,st=typeof Tt=="function"?Tt.call(At,dt,st):Tt,st==null)break e;dt=ze({},dt,st);break e;case 2:Qr=!0}}ue.callback!==null&&ue.lane!==0&&(e.flags|=64,st=y.effects,st===null?y.effects=[ue]:st.push(ue))}else At={eventTime:At,lane:st,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},lt===null?(Ve=lt=At,ve=dt):lt=lt.next=At,D|=st;if(ue=ue.next,ue===null){if(ue=y.shared.pending,ue===null)break;st=ue,ue=st.next,st.next=null,y.lastBaseUpdate=st,y.shared.pending=null}}while(!0);if(lt===null&&(ve=dt),y.baseState=ve,y.firstBaseUpdate=Ve,y.lastBaseUpdate=lt,n=y.shared.interleaved,n!==null){y=n;do D|=y.lane,y=y.next;while(y!==n)}else S===null&&(y.shared.lanes=0);Ml|=D,e.lanes=D,e.memoizedState=dt}}function ns(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var f=e[n],y=f.callback;if(y!==null){if(f.callback=null,f=s,typeof y!="function")throw Error(r(191,y));y.call(f)}}}var fs={},Sa=sn(fs),$r=sn(fs),Po=sn(fs);function no(e){if(e===fs)throw Error(r(174));return e}function nl(e,n){switch(yn(Po,n),yn($r,e),yn(Sa,fs),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:$t(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=$t(n,e)}cn(Sa),yn(Sa,n)}function Is(){cn(Sa),cn($r),cn(Po)}function Zc(e){no(Po.current);var n=no(Sa.current),s=$t(n,e.type);n!==s&&(yn($r,e),yn(Sa,s))}function Pc(e){$r.current===e&&(cn(Sa),cn($r))}var ur=sn(0);function hs(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Lc=[];function _c(){for(var e=0;e<Lc.length;e++)Lc[e]._workInProgressVersionPrimary=null;Lc.length=0}var Kl=H.ReactCurrentDispatcher,Ql=H.ReactCurrentBatchConfig,Es=0,wr=null,Xr=null,Wr=null,rl=!1,ro=!1,al=0,eu=0;function la(){throw Error(r(321))}function Xl(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!gr(e[s],n[s]))return!1;return!0}function _l(e,n,s,f,y,S){if(Es=S,wr=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Kl.current=e===null||e.memoizedState===null?D0:F0,e=s(f,y),ro){S=0;do{if(ro=!1,al=0,25<=S)throw Error(r(301));S+=1,Wr=Xr=null,n.updateQueue=null,Kl.current=T0,e=s(f,y)}while(ro)}if(Kl.current=ad,n=Xr!==null&&Xr.next!==null,Es=0,Wr=Xr=wr=null,rl=!1,n)throw Error(r(300));return e}function Ms(){var e=al!==0;return al=0,e}function ps(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?wr.memoizedState=Wr=e:Wr=Wr.next=e,Wr}function zi(){if(Xr===null){var e=wr.alternate;e=e!==null?e.memoizedState:null}else e=Xr.next;var n=Wr===null?wr.memoizedState:Wr.next;if(n!==null)Wr=n,Xr=e;else{if(e===null)throw Error(r(310));Xr=e,e={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},Wr===null?wr.memoizedState=Wr=e:Wr=Wr.next=e}return Wr}function Il(e,n){return typeof n=="function"?n(e):n}function Zl(e){var n=zi(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var f=Xr,y=f.baseQueue,S=s.pending;if(S!==null){if(y!==null){var D=y.next;y.next=S.next,S.next=D}f.baseQueue=y=S,s.pending=null}if(y!==null){S=y.next,f=f.baseState;var ue=D=null,ve=null,Ve=S;do{var lt=Ve.lane;if((Es&lt)===lt)ve!==null&&(ve=ve.next={lane:0,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),f=Ve.hasEagerState?Ve.eagerState:e(f,Ve.action);else{var dt={lane:lt,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null};ve===null?(ue=ve=dt,D=f):ve=ve.next=dt,wr.lanes|=lt,Ml|=lt}Ve=Ve.next}while(Ve!==null&&Ve!==S);ve===null?D=f:ve.next=ue,gr(f,n.memoizedState)||(rs=!0),n.memoizedState=f,n.baseState=D,n.baseQueue=ve,s.lastRenderedState=f}if(e=s.interleaved,e!==null){y=e;do S=y.lane,wr.lanes|=S,Ml|=S,y=y.next;while(y!==e)}else y===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function Lo(e){var n=zi(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var f=s.dispatch,y=s.pending,S=n.memoizedState;if(y!==null){s.pending=null;var D=y=y.next;do S=e(S,D.action),D=D.next;while(D!==y);gr(S,n.memoizedState)||(rs=!0),n.memoizedState=S,n.baseQueue===null&&(n.baseState=S),s.lastRenderedState=S}return[S,f]}function ed(){}function Ic(e,n){var s=wr,f=zi(),y=n(),S=!gr(f.memoizedState,y);if(S&&(f.memoizedState=y,rs=!0),f=f.queue,nc(nd.bind(null,s,f,e),[e]),f.getSnapshot!==n||S||Wr!==null&&Wr.memoizedState.tag&1){if(s.flags|=2048,Ui(9,Ec.bind(null,s,f,y,n),void 0,null),Ya===null)throw Error(r(349));(Es&30)!==0||td(s,n,y)}return y}function td(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=wr.updateQueue,n===null?(n={lastEffect:null,stores:null},wr.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Ec(e,n,s,f){n.value=s,n.getSnapshot=f,il(n)&&ec(e)}function nd(e,n,s){return s(function(){il(n)&&ec(e)})}function il(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!gr(e,s)}catch{return!0}}function ec(e){var n=nr(e,1);n!==null&&lo(n,e,1,-1)}function El(e){var n=ps();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:e},n.queue=e,e=e.dispatch=M0.bind(null,wr,e),[n.memoizedState,e]}function Ui(e,n,s,f){return e={tag:e,create:n,destroy:s,deps:f,next:null},n=wr.updateQueue,n===null?(n={lastEffect:null,stores:null},wr.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(f=s.next,s.next=e,e.next=f,n.lastEffect=e)),e}function ao(){return zi().memoizedState}function ms(e,n,s,f){var y=ps();wr.flags|=e,y.memoizedState=Ui(1|n,s,void 0,f===void 0?null:f)}function Wo(e,n,s,f){var y=zi();f=f===void 0?null:f;var S=void 0;if(Xr!==null){var D=Xr.memoizedState;if(S=D.destroy,f!==null&&Xl(f,D.deps)){y.memoizedState=Ui(n,s,S,f);return}}wr.flags|=e,y.memoizedState=Ui(1|n,s,S,f)}function tc(e,n){return ms(8390656,8,e,n)}function nc(e,n){return Wo(2048,8,e,n)}function rd(e,n){return Wo(4,2,e,n)}function rc(e,n){return Wo(4,4,e,n)}function ac(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Rf(e,n,s){return s=s!=null?s.concat([e]):null,Wo(4,4,ac.bind(null,n,e),s)}function tu(){}function Of(e,n){var s=zi();n=n===void 0?null:n;var f=s.memoizedState;return f!==null&&n!==null&&Xl(n,f[1])?f[0]:(s.memoizedState=[e,n],e)}function Bf(e,n){var s=zi();n=n===void 0?null:n;var f=s.memoizedState;return f!==null&&n!==null&&Xl(n,f[1])?f[0]:(e=e(),s.memoizedState=[e,n],e)}function zf(e,n,s){return(Es&21)===0?(e.baseState&&(e.baseState=!1,rs=!0),e.memoizedState=s):(gr(s,n)||(s=bs(),wr.lanes|=s,Ml|=s,e.baseState=!0),n)}function I0(e,n){var s=Cn;Cn=s!==0&&4>s?s:4,e(!0);var f=Ql.transition;Ql.transition={};try{e(!1),n()}finally{Cn=s,Ql.transition=f}}function Uf(){return zi().memoizedState}function E0(e,n,s){var f=cl(e);if(s={lane:f,action:s,hasEagerState:!1,eagerState:null,next:null},qf(e))$f(n,s);else if(s=Jn(e,n,s,f),s!==null){var y=$i();lo(s,e,f,y),Wf(s,n,f)}}function M0(e,n,s){var f=cl(e),y={lane:f,action:s,hasEagerState:!1,eagerState:null,next:null};if(qf(e))$f(n,y);else{var S=e.alternate;if(e.lanes===0&&(S===null||S.lanes===0)&&(S=n.lastRenderedReducer,S!==null))try{var D=n.lastRenderedState,ue=S(D,s);if(y.hasEagerState=!0,y.eagerState=ue,gr(ue,D)){var ve=n.interleaved;ve===null?(y.next=y,Wa(n)):(y.next=ve.next,ve.next=y),n.interleaved=y;return}}catch{}finally{}s=Jn(e,n,y,f),s!==null&&(y=$i(),lo(s,e,f,y),Wf(s,n,f))}}function qf(e){var n=e.alternate;return e===wr||n!==null&&n===wr}function $f(e,n){ro=rl=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function Wf(e,n,s){if((s&4194240)!==0){var f=n.lanes;f&=e.pendingLanes,s|=f,n.lanes=s,ra(e,s)}}var ad={readContext:Tr,useCallback:la,useContext:la,useEffect:la,useImperativeHandle:la,useInsertionEffect:la,useLayoutEffect:la,useMemo:la,useReducer:la,useRef:la,useState:la,useDebugValue:la,useDeferredValue:la,useTransition:la,useMutableSource:la,useSyncExternalStore:la,useId:la,unstable_isNewReconciler:!1},D0={readContext:Tr,useCallback:function(e,n){return ps().memoizedState=[e,n===void 0?null:n],e},useContext:Tr,useEffect:tc,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,ms(4194308,4,ac.bind(null,n,e),s)},useLayoutEffect:function(e,n){return ms(4194308,4,e,n)},useInsertionEffect:function(e,n){return ms(4,2,e,n)},useMemo:function(e,n){var s=ps();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var f=ps();return n=s!==void 0?s(n):n,f.memoizedState=f.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},f.queue=e,e=e.dispatch=E0.bind(null,wr,e),[f.memoizedState,e]},useRef:function(e){var n=ps();return e={current:e},n.memoizedState=e},useState:El,useDebugValue:tu,useDeferredValue:function(e){return ps().memoizedState=e},useTransition:function(){var e=El(!1),n=e[0];return e=I0.bind(null,e[1]),ps().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var f=wr,y=ps();if(Ze){if(s===void 0)throw Error(r(407));s=s()}else{if(s=n(),Ya===null)throw Error(r(349));(Es&30)!==0||td(f,n,s)}y.memoizedState=s;var S={value:s,getSnapshot:n};return y.queue=S,tc(nd.bind(null,f,S,e),[e]),f.flags|=2048,Ui(9,Ec.bind(null,f,S,s,n),void 0,null),s},useId:function(){var e=ps(),n=Ya.identifierPrefix;if(Ze){var s=re,f=Re;s=(f&~(1<<32-Xn(f)-1)).toString(32)+s,n=":"+n+"R"+s,s=al++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=eu++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},F0={readContext:Tr,useCallback:Of,useContext:Tr,useEffect:nc,useImperativeHandle:Rf,useInsertionEffect:rd,useLayoutEffect:rc,useMemo:Bf,useReducer:Zl,useRef:ao,useState:function(){return Zl(Il)},useDebugValue:tu,useDeferredValue:function(e){var n=zi();return zf(n,Xr.memoizedState,e)},useTransition:function(){var e=Zl(Il)[0],n=zi().memoizedState;return[e,n]},useMutableSource:ed,useSyncExternalStore:Ic,useId:Uf,unstable_isNewReconciler:!1},T0={readContext:Tr,useCallback:Of,useContext:Tr,useEffect:nc,useImperativeHandle:Rf,useInsertionEffect:rd,useLayoutEffect:rc,useMemo:Bf,useReducer:Lo,useRef:ao,useState:function(){return Lo(Il)},useDebugValue:tu,useDeferredValue:function(e){var n=zi();return Xr===null?n.memoizedState=e:zf(n,Xr.memoizedState,e)},useTransition:function(){var e=Lo(Il)[0],n=zi().memoizedState;return[e,n]},useMutableSource:ed,useSyncExternalStore:Ic,useId:Uf,unstable_isNewReconciler:!1};function io(e,n){if(e&&e.defaultProps){n=ze({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function nu(e,n,s,f){n=e.memoizedState,s=s(f,n),s=s==null?n:ze({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var id={isMounted:function(e){return(e=e._reactInternals)?Dn(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var f=$i(),y=cl(e),S=Ur(f,y);S.payload=n,s!=null&&(S.callback=s),n=qr(e,S,y),n!==null&&(lo(n,e,y,f),Ha(n,e,y))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var f=$i(),y=cl(e),S=Ur(f,y);S.tag=1,S.payload=n,s!=null&&(S.callback=s),n=qr(e,S,y),n!==null&&(lo(n,e,y,f),Ha(n,e,y))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=$i(),f=cl(e),y=Ur(s,f);y.tag=2,n!=null&&(y.callback=n),n=qr(e,y,f),n!==null&&(lo(n,e,f,s),Ha(n,e,f))}};function Hf(e,n,s,f,y,S,D){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(f,S,D):n.prototype&&n.prototype.isPureReactComponent?!qa(s,f)||!qa(y,S):!0}function Vf(e,n,s){var f=!1,y=ba,S=n.contextType;return typeof S=="object"&&S!==null?S=Tr(S):(y=er(n)?kt:sa.current,f=n.contextTypes,S=(f=f!=null)?qn(e,y):ba),n=new n(s,S),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=id,e.stateNode=n,n._reactInternals=e,f&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=y,e.__reactInternalMemoizedMaskedChildContext=S),n}function Yf(e,n,s,f){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,f),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,f),n.state!==e&&id.enqueueReplaceState(n,n.state,null)}function ru(e,n,s,f){var y=e.stateNode;y.props=s,y.state=e.memoizedState,y.refs={},Fa(e);var S=n.contextType;typeof S=="object"&&S!==null?y.context=Tr(S):(S=er(n)?kt:sa.current,y.context=qn(e,S)),y.state=e.memoizedState,S=n.getDerivedStateFromProps,typeof S=="function"&&(nu(e,n,S,s),y.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(n=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),n!==y.state&&id.enqueueReplaceState(y,y.state,null),Va(e,s,y,f),y.state=e.memoizedState),typeof y.componentDidMount=="function"&&(e.flags|=4194308)}function ic(e,n){try{var s="",f=n;do s+=de(f),f=f.return;while(f);var y=s}catch(S){y=`
Error generating stack: `+S.message+`
`+S.stack}return{value:e,source:n,stack:y,digest:null}}function au(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function iu(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var R0=typeof WeakMap=="function"?WeakMap:Map;function Gf(e,n,s){s=Ur(-1,s),s.tag=3,s.payload={element:null};var f=n.value;return s.callback=function(){fd||(fd=!0,bu=f),iu(e,n)},s}function Jf(e,n,s){s=Ur(-1,s),s.tag=3;var f=e.type.getDerivedStateFromError;if(typeof f=="function"){var y=n.value;s.payload=function(){return f(y)},s.callback=function(){iu(e,n)}}var S=e.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){iu(e,n),typeof f!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var D=n.stack;this.componentDidCatch(n.value,{componentStack:D!==null?D:""})}),s}function Kf(e,n,s){var f=e.pingCache;if(f===null){f=e.pingCache=new R0;var y=new Set;f.set(n,y)}else y=f.get(n),y===void 0&&(y=new Set,f.set(n,y));y.has(s)||(y.add(s),e=Q0.bind(null,e,n,s),n.then(e,e))}function Qf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Xf(e,n,s,f,y){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=Ur(-1,1),n.tag=2,qr(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=y,e)}var O0=H.ReactCurrentOwner,rs=!1;function qi(e,n,s,f){n.child=e===null?Cr(n,null,s,f):Kr(n,e.child,s,f)}function Zf(e,n,s,f,y){s=s.render;var S=n.ref;return Fr(n,y),f=_l(e,n,s,f,S,y),s=Ms(),e!==null&&!rs?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~y,Ho(e,n,y)):(Ze&&s&&Je(n),n.flags|=1,qi(e,n,f,y),n.child)}function eh(e,n,s,f,y){if(e===null){var S=s.type;return typeof S=="function"&&!Cu(S)&&S.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=S,th(e,n,S,f,y)):(e=yd(s.type,null,f,n,n.mode,y),e.ref=n.ref,e.return=n,n.child=e)}if(S=e.child,(e.lanes&y)===0){var D=S.memoizedProps;if(s=s.compare,s=s!==null?s:qa,s(D,f)&&e.ref===n.ref)return Ho(e,n,y)}return n.flags|=1,e=ul(S,f),e.ref=n.ref,e.return=n,n.child=e}function th(e,n,s,f,y){if(e!==null){var S=e.memoizedProps;if(qa(S,f)&&e.ref===n.ref)if(rs=!1,n.pendingProps=f=S,(e.lanes&y)!==0)(e.flags&131072)!==0&&(rs=!0);else return n.lanes=e.lanes,Ho(e,n,y)}return su(e,n,s,f,y)}function nh(e,n,s){var f=n.pendingProps,y=f.children,S=e!==null?e.memoizedState:null;if(f.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn(oc,gs),gs|=s;else{if((s&1073741824)===0)return e=S!==null?S.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,yn(oc,gs),gs|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=S!==null?S.baseLanes:s,yn(oc,gs),gs|=f}else S!==null?(f=S.baseLanes|s,n.memoizedState=null):f=s,yn(oc,gs),gs|=f;return qi(e,n,y,s),n.child}function rh(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function su(e,n,s,f,y){var S=er(s)?kt:sa.current;return S=qn(n,S),Fr(n,y),s=_l(e,n,s,f,S,y),f=Ms(),e!==null&&!rs?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~y,Ho(e,n,y)):(Ze&&f&&Je(n),n.flags|=1,qi(e,n,s,y),n.child)}function ah(e,n,s,f,y){if(er(s)){var S=!0;$o(n)}else S=!1;if(Fr(n,y),n.stateNode===null)od(e,n),Vf(n,s,f),ru(n,s,f,y),f=!0;else if(e===null){var D=n.stateNode,ue=n.memoizedProps;D.props=ue;var ve=D.context,Ve=s.contextType;typeof Ve=="object"&&Ve!==null?Ve=Tr(Ve):(Ve=er(s)?kt:sa.current,Ve=qn(n,Ve));var lt=s.getDerivedStateFromProps,dt=typeof lt=="function"||typeof D.getSnapshotBeforeUpdate=="function";dt||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ue!==f||ve!==Ve)&&Yf(n,D,f,Ve),Qr=!1;var st=n.memoizedState;D.state=st,Va(n,f,D,y),ve=n.memoizedState,ue!==f||st!==ve||$a.current||Qr?(typeof lt=="function"&&(nu(n,s,lt,f),ve=n.memoizedState),(ue=Qr||Hf(n,s,ue,f,st,ve,Ve))?(dt||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(n.flags|=4194308)):(typeof D.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=f,n.memoizedState=ve),D.props=f,D.state=ve,D.context=Ve,f=ue):(typeof D.componentDidMount=="function"&&(n.flags|=4194308),f=!1)}else{D=n.stateNode,Pi(e,n),ue=n.memoizedProps,Ve=n.type===n.elementType?ue:io(n.type,ue),D.props=Ve,dt=n.pendingProps,st=D.context,ve=s.contextType,typeof ve=="object"&&ve!==null?ve=Tr(ve):(ve=er(s)?kt:sa.current,ve=qn(n,ve));var At=s.getDerivedStateFromProps;(lt=typeof At=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ue!==dt||st!==ve)&&Yf(n,D,f,ve),Qr=!1,st=n.memoizedState,D.state=st,Va(n,f,D,y);var Tt=n.memoizedState;ue!==dt||st!==Tt||$a.current||Qr?(typeof At=="function"&&(nu(n,s,At,f),Tt=n.memoizedState),(Ve=Qr||Hf(n,s,Ve,f,st,Tt,ve)||!1)?(lt||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(f,Tt,ve),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(f,Tt,ve)),typeof D.componentDidUpdate=="function"&&(n.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof D.componentDidUpdate!="function"||ue===e.memoizedProps&&st===e.memoizedState||(n.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||ue===e.memoizedProps&&st===e.memoizedState||(n.flags|=1024),n.memoizedProps=f,n.memoizedState=Tt),D.props=f,D.state=Tt,D.context=ve,f=Ve):(typeof D.componentDidUpdate!="function"||ue===e.memoizedProps&&st===e.memoizedState||(n.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||ue===e.memoizedProps&&st===e.memoizedState||(n.flags|=1024),f=!1)}return ou(e,n,s,f,S,y)}function ou(e,n,s,f,y,S){rh(e,n);var D=(n.flags&128)!==0;if(!f&&!D)return y&&Xc(n,s,!1),Ho(e,n,S);f=n.stateNode,O0.current=n;var ue=D&&typeof s.getDerivedStateFromError!="function"?null:f.render();return n.flags|=1,e!==null&&D?(n.child=Kr(n,e.child,null,S),n.child=Kr(n,null,ue,S)):qi(e,n,ue,S),n.memoizedState=f.state,y&&Xc(n,s,!0),n.child}function ih(e){var n=e.stateNode;n.pendingContext?Jl(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Jl(e,n.context,!1),nl(e,n.containerInfo)}function sh(e,n,s,f,y){return It(),gt(y),n.flags|=256,qi(e,n,s,f),n.child}var lu={dehydrated:null,treeContext:null,retryLane:0};function cu(e){return{baseLanes:e,cachePool:null,transitions:null}}function oh(e,n,s){var f=n.pendingProps,y=ur.current,S=!1,D=(n.flags&128)!==0,ue;if((ue=D)||(ue=e!==null&&e.memoizedState===null?!1:(y&2)!==0),ue?(S=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(y|=1),yn(ur,y&1),e===null)return Ft(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(D=f.children,e=f.fallback,S?(f=n.mode,S=n.child,D={mode:"hidden",children:D},(f&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=D):S=vd(D,f,0,null),e=Rl(e,f,s,null),S.return=n,e.return=n,S.sibling=e,n.child=S,n.child.memoizedState=cu(s),n.memoizedState=lu,e):du(n,D));if(y=e.memoizedState,y!==null&&(ue=y.dehydrated,ue!==null))return B0(e,n,D,f,ue,y,s);if(S){S=f.fallback,D=n.mode,y=e.child,ue=y.sibling;var ve={mode:"hidden",children:f.children};return(D&1)===0&&n.child!==y?(f=n.child,f.childLanes=0,f.pendingProps=ve,n.deletions=null):(f=ul(y,ve),f.subtreeFlags=y.subtreeFlags&14680064),ue!==null?S=ul(ue,S):(S=Rl(S,D,s,null),S.flags|=2),S.return=n,f.return=n,f.sibling=S,n.child=f,f=S,S=n.child,D=e.child.memoizedState,D=D===null?cu(s):{baseLanes:D.baseLanes|s,cachePool:null,transitions:D.transitions},S.memoizedState=D,S.childLanes=e.childLanes&~s,n.memoizedState=lu,f}return S=e.child,e=S.sibling,f=ul(S,{mode:"visible",children:f.children}),(n.mode&1)===0&&(f.lanes=s),f.return=n,f.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=f,n.memoizedState=null,f}function du(e,n){return n=vd({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function sd(e,n,s,f){return f!==null&&gt(f),Kr(n,e.child,null,s),e=du(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function B0(e,n,s,f,y,S,D){if(s)return n.flags&256?(n.flags&=-257,f=au(Error(r(422))),sd(e,n,D,f)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(S=f.fallback,y=n.mode,f=vd({mode:"visible",children:f.children},y,0,null),S=Rl(S,y,D,null),S.flags|=2,f.return=n,S.return=n,f.sibling=S,n.child=f,(n.mode&1)!==0&&Kr(n,e.child,null,D),n.child.memoizedState=cu(D),n.memoizedState=lu,S);if((n.mode&1)===0)return sd(e,n,D,null);if(y.data==="$!"){if(f=y.nextSibling&&y.nextSibling.dataset,f)var ue=f.dgst;return f=ue,S=Error(r(419)),f=au(S,f,void 0),sd(e,n,D,f)}if(ue=(D&e.childLanes)!==0,rs||ue){if(f=Ya,f!==null){switch(D&-D){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(f.suspendedLanes|D))!==0?0:y,y!==0&&y!==S.retryLane&&(S.retryLane=y,nr(e,y),lo(f,e,y,-1))}return Au(),f=au(Error(r(421))),sd(e,n,D,f)}return y.data==="$?"?(n.flags|=128,n.child=e.child,n=X0.bind(null,e),y._reactRetry=n,null):(e=S.treeContext,Ge=Da(y.nextSibling),Ye=n,Ze=!0,tt=null,e!==null&&(G[ne++]=Re,G[ne++]=re,G[ne++]=ye,Re=e.id,re=e.overflow,ye=n),n=du(n,f.children),n.flags|=4096,n)}function lh(e,n,s){e.lanes|=n;var f=e.alternate;f!==null&&(f.lanes|=n),Tn(e.return,n,s)}function uu(e,n,s,f,y){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:f,tail:s,tailMode:y}:(S.isBackwards=n,S.rendering=null,S.renderingStartTime=0,S.last=f,S.tail=s,S.tailMode=y)}function ch(e,n,s){var f=n.pendingProps,y=f.revealOrder,S=f.tail;if(qi(e,n,f.children,s),f=ur.current,(f&2)!==0)f=f&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lh(e,s,n);else if(e.tag===19)lh(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}f&=1}if(yn(ur,f),(n.mode&1)===0)n.memoizedState=null;else switch(y){case"forwards":for(s=n.child,y=null;s!==null;)e=s.alternate,e!==null&&hs(e)===null&&(y=s),s=s.sibling;s=y,s===null?(y=n.child,n.child=null):(y=s.sibling,s.sibling=null),uu(n,!1,y,s,S);break;case"backwards":for(s=null,y=n.child,n.child=null;y!==null;){if(e=y.alternate,e!==null&&hs(e)===null){n.child=y;break}e=y.sibling,y.sibling=s,s=y,y=e}uu(n,!0,s,null,S);break;case"together":uu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function od(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Ho(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Ml|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,s=ul(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=ul(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function z0(e,n,s){switch(n.tag){case 3:ih(n),It();break;case 5:Zc(n);break;case 1:er(n.type)&&$o(n);break;case 4:nl(n,n.stateNode.containerInfo);break;case 10:var f=n.type._context,y=n.memoizedProps.value;yn(oa,f._currentValue),f._currentValue=y;break;case 13:if(f=n.memoizedState,f!==null)return f.dehydrated!==null?(yn(ur,ur.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?oh(e,n,s):(yn(ur,ur.current&1),e=Ho(e,n,s),e!==null?e.sibling:null);yn(ur,ur.current&1);break;case 19:if(f=(s&n.childLanes)!==0,(e.flags&128)!==0){if(f)return ch(e,n,s);n.flags|=128}if(y=n.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),yn(ur,ur.current),f)break;return null;case 22:case 23:return n.lanes=0,nh(e,n,s)}return Ho(e,n,s)}var dh,fu,uh,fh;dh=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},fu=function(){},uh=function(e,n,s,f){var y=e.memoizedProps;if(y!==f){e=n.stateNode,no(Sa.current);var S=null;switch(s){case"input":y=pt(e,y),f=pt(e,f),S=[];break;case"select":y=ze({},y,{value:void 0}),f=ze({},f,{value:void 0}),S=[];break;case"textarea":y=Pt(e,y),f=Pt(e,f),S=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(e.onclick=Zs)}Vt(s,f);var D;s=null;for(Ve in y)if(!f.hasOwnProperty(Ve)&&y.hasOwnProperty(Ve)&&y[Ve]!=null)if(Ve==="style"){var ue=y[Ve];for(D in ue)ue.hasOwnProperty(D)&&(s||(s={}),s[D]="")}else Ve!=="dangerouslySetInnerHTML"&&Ve!=="children"&&Ve!=="suppressContentEditableWarning"&&Ve!=="suppressHydrationWarning"&&Ve!=="autoFocus"&&(c.hasOwnProperty(Ve)?S||(S=[]):(S=S||[]).push(Ve,null));for(Ve in f){var ve=f[Ve];if(ue=y?.[Ve],f.hasOwnProperty(Ve)&&ve!==ue&&(ve!=null||ue!=null))if(Ve==="style")if(ue){for(D in ue)!ue.hasOwnProperty(D)||ve&&ve.hasOwnProperty(D)||(s||(s={}),s[D]="");for(D in ve)ve.hasOwnProperty(D)&&ue[D]!==ve[D]&&(s||(s={}),s[D]=ve[D])}else s||(S||(S=[]),S.push(Ve,s)),s=ve;else Ve==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,ue=ue?ue.__html:void 0,ve!=null&&ue!==ve&&(S=S||[]).push(Ve,ve)):Ve==="children"?typeof ve!="string"&&typeof ve!="number"||(S=S||[]).push(Ve,""+ve):Ve!=="suppressContentEditableWarning"&&Ve!=="suppressHydrationWarning"&&(c.hasOwnProperty(Ve)?(ve!=null&&Ve==="onScroll"&&Un("scroll",e),S||ue===ve||(S=[])):(S=S||[]).push(Ve,ve))}s&&(S=S||[]).push("style",s);var Ve=S;(n.updateQueue=Ve)&&(n.flags|=4)}},fh=function(e,n,s,f){s!==f&&(n.flags|=4)};function Mc(e,n){if(!Ze)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:f.sibling=null}}function Li(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,f=0;if(n)for(var y=e.child;y!==null;)s|=y.lanes|y.childLanes,f|=y.subtreeFlags&14680064,f|=y.flags&14680064,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)s|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=f,e.childLanes=s,n}function U0(e,n,s){var f=n.pendingProps;switch(Be(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Li(n),null;case 1:return er(n.type)&&_s(),Li(n),null;case 3:return f=n.stateNode,Is(),cn($a),cn(sa),_c(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(e===null||e.child===null)&&(Dr(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,tt!==null&&(Su(tt),tt=null))),fu(e,n),Li(n),null;case 5:Pc(n);var y=no(Po.current);if(s=n.type,e!==null&&n.stateNode!=null)uh(e,n,s,f,y),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!f){if(n.stateNode===null)throw Error(r(166));return Li(n),null}if(e=no(Sa.current),Dr(n)){f=n.stateNode,s=n.type;var S=n.memoizedProps;switch(f[B]=n,f[F]=S,e=(n.mode&1)!==0,s){case"dialog":Un("cancel",f),Un("close",f);break;case"iframe":case"object":case"embed":Un("load",f);break;case"video":case"audio":for(y=0;y<us.length;y++)Un(us[y],f);break;case"source":Un("error",f);break;case"img":case"image":case"link":Un("error",f),Un("load",f);break;case"details":Un("toggle",f);break;case"input":V(f,S),Un("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!S.multiple},Un("invalid",f);break;case"textarea":Dt(f,S),Un("invalid",f)}Vt(s,S),y=null;for(var D in S)if(S.hasOwnProperty(D)){var ue=S[D];D==="children"?typeof ue=="string"?f.textContent!==ue&&(S.suppressHydrationWarning!==!0&&Zo(f.textContent,ue,e),y=["children",ue]):typeof ue=="number"&&f.textContent!==""+ue&&(S.suppressHydrationWarning!==!0&&Zo(f.textContent,ue,e),y=["children",""+ue]):c.hasOwnProperty(D)&&ue!=null&&D==="onScroll"&&Un("scroll",f)}switch(s){case"input":De(f),Ct(f,S,!0);break;case"textarea":De(f),Qt(f);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(f.onclick=Zs)}f=y,n.updateQueue=f,f!==null&&(n.flags|=4)}else{D=y.nodeType===9?y:y.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zt(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=D.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof f.is=="string"?e=D.createElement(s,{is:f.is}):(e=D.createElement(s),s==="select"&&(D=e,f.multiple?D.multiple=!0:f.size&&(D.size=f.size))):e=D.createElementNS(e,s),e[B]=n,e[F]=f,dh(e,n,!1,!1),n.stateNode=e;e:{switch(D=vt(s,f),s){case"dialog":Un("cancel",e),Un("close",e),y=f;break;case"iframe":case"object":case"embed":Un("load",e),y=f;break;case"video":case"audio":for(y=0;y<us.length;y++)Un(us[y],e);y=f;break;case"source":Un("error",e),y=f;break;case"img":case"image":case"link":Un("error",e),Un("load",e),y=f;break;case"details":Un("toggle",e),y=f;break;case"input":V(e,f),y=pt(e,f),Un("invalid",e);break;case"option":y=f;break;case"select":e._wrapperState={wasMultiple:!!f.multiple},y=ze({},f,{value:void 0}),Un("invalid",e);break;case"textarea":Dt(e,f),y=Pt(e,f),Un("invalid",e);break;default:y=f}Vt(s,y),ue=y;for(S in ue)if(ue.hasOwnProperty(S)){var ve=ue[S];S==="style"?He(e,ve):S==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,ve!=null&&qe(e,ve)):S==="children"?typeof ve=="string"?(s!=="textarea"||ve!=="")&&se(e,ve):typeof ve=="number"&&se(e,""+ve):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(c.hasOwnProperty(S)?ve!=null&&S==="onScroll"&&Un("scroll",e):ve!=null&&X(e,S,ve,D))}switch(s){case"input":De(e),Ct(e,f,!1);break;case"textarea":De(e),Qt(e);break;case"option":f.value!=null&&e.setAttribute("value",""+Me(f.value));break;case"select":e.multiple=!!f.multiple,S=f.value,S!=null?mt(e,!!f.multiple,S,!1):f.defaultValue!=null&&mt(e,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(e.onclick=Zs)}switch(s){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Li(n),null;case 6:if(e&&n.stateNode!=null)fh(e,n,e.memoizedProps,f);else{if(typeof f!="string"&&n.stateNode===null)throw Error(r(166));if(s=no(Po.current),no(Sa.current),Dr(n)){if(f=n.stateNode,s=n.memoizedProps,f[B]=n,(S=f.nodeValue!==s)&&(e=Ye,e!==null))switch(e.tag){case 3:Zo(f.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zo(f.nodeValue,s,(e.mode&1)!==0)}S&&(n.flags|=4)}else f=(s.nodeType===9?s:s.ownerDocument).createTextNode(f),f[B]=n,n.stateNode=f}return Li(n),null;case 13:if(cn(ur),f=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ze&&Ge!==null&&(n.mode&1)!==0&&(n.flags&128)===0)pn(),It(),n.flags|=98560,S=!1;else if(S=Dr(n),f!==null&&f.dehydrated!==null){if(e===null){if(!S)throw Error(r(318));if(S=n.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(r(317));S[B]=n}else It(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Li(n),S=!1}else tt!==null&&(Su(tt),tt=null),S=!0;if(!S)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(f=f!==null,f!==(e!==null&&e.memoizedState!==null)&&f&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(ur.current&1)!==0?Ta===0&&(Ta=3):Au())),n.updateQueue!==null&&(n.flags|=4),Li(n),null);case 4:return Is(),fu(e,n),e===null&&Mr(n.stateNode.containerInfo),Li(n),null;case 10:return br(n.type._context),Li(n),null;case 17:return er(n.type)&&_s(),Li(n),null;case 19:if(cn(ur),S=n.memoizedState,S===null)return Li(n),null;if(f=(n.flags&128)!==0,D=S.rendering,D===null)if(f)Mc(S,!1);else{if(Ta!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(D=hs(e),D!==null){for(n.flags|=128,Mc(S,!1),f=D.updateQueue,f!==null&&(n.updateQueue=f,n.flags|=4),n.subtreeFlags=0,f=s,s=n.child;s!==null;)S=s,e=f,S.flags&=14680066,D=S.alternate,D===null?(S.childLanes=0,S.lanes=e,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=D.childLanes,S.lanes=D.lanes,S.child=D.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=D.memoizedProps,S.memoizedState=D.memoizedState,S.updateQueue=D.updateQueue,S.type=D.type,e=D.dependencies,S.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return yn(ur,ur.current&1|2),n.child}e=e.sibling}S.tail!==null&&xn()>lc&&(n.flags|=128,f=!0,Mc(S,!1),n.lanes=4194304)}else{if(!f)if(e=hs(D),e!==null){if(n.flags|=128,f=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),Mc(S,!0),S.tail===null&&S.tailMode==="hidden"&&!D.alternate&&!Ze)return Li(n),null}else 2*xn()-S.renderingStartTime>lc&&s!==1073741824&&(n.flags|=128,f=!0,Mc(S,!1),n.lanes=4194304);S.isBackwards?(D.sibling=n.child,n.child=D):(s=S.last,s!==null?s.sibling=D:n.child=D,S.last=D)}return S.tail!==null?(n=S.tail,S.rendering=n,S.tail=n.sibling,S.renderingStartTime=xn(),n.sibling=null,s=ur.current,yn(ur,f?s&1|2:s&1),n):(Li(n),null);case 22:case 23:return ku(),f=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==f&&(n.flags|=8192),f&&(n.mode&1)!==0?(gs&1073741824)!==0&&(Li(n),n.subtreeFlags&6&&(n.flags|=8192)):Li(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function q0(e,n){switch(Be(n),n.tag){case 1:return er(n.type)&&_s(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Is(),cn($a),cn(sa),_c(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Pc(n),null;case 13:if(cn(ur),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));It()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return cn(ur),null;case 4:return Is(),null;case 10:return br(n.type._context),null;case 22:case 23:return ku(),null;case 24:return null;default:return null}}var ld=!1,_i=!1,$0=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function sc(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(f){Zr(e,n,f)}else s.current=null}function hu(e,n,s){try{s()}catch(f){Zr(e,n,f)}}var hh=!1;function W0(e,n){if(ko=ds,e=Er(),Ai(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var f=s.getSelection&&s.getSelection();if(f&&f.rangeCount!==0){s=f.anchorNode;var y=f.anchorOffset,S=f.focusNode;f=f.focusOffset;try{s.nodeType,S.nodeType}catch{s=null;break e}var D=0,ue=-1,ve=-1,Ve=0,lt=0,dt=e,st=null;t:for(;;){for(var At;dt!==s||y!==0&&dt.nodeType!==3||(ue=D+y),dt!==S||f!==0&&dt.nodeType!==3||(ve=D+f),dt.nodeType===3&&(D+=dt.nodeValue.length),(At=dt.firstChild)!==null;)st=dt,dt=At;for(;;){if(dt===e)break t;if(st===s&&++Ve===y&&(ue=D),st===S&&++lt===f&&(ve=D),(At=dt.nextSibling)!==null)break;dt=st,st=dt.parentNode}dt=At}s=ue===-1||ve===-1?null:{start:ue,end:ve}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ls={focusedElem:e,selectionRange:s},ds=!1,Mt=n;Mt!==null;)if(n=Mt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Mt=e;else for(;Mt!==null;){n=Mt;try{var Tt=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Tt!==null){var Bt=Tt.memoizedProps,ca=Tt.memoizedState,Oe=n.stateNode,ke=Oe.getSnapshotBeforeUpdate(n.elementType===n.type?Bt:io(n.type,Bt),ca);Oe.__reactInternalSnapshotBeforeUpdate=ke}break;case 3:var $e=n.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ft){Zr(n,n.return,ft)}if(e=n.sibling,e!==null){e.return=n.return,Mt=e;break}Mt=n.return}return Tt=hh,hh=!1,Tt}function Dc(e,n,s){var f=n.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&e)===e){var S=y.destroy;y.destroy=void 0,S!==void 0&&hu(n,s,S)}y=y.next}while(y!==f)}}function cd(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var f=s.create;s.destroy=f()}s=s.next}while(s!==n)}}function pu(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function ph(e){var n=e.alternate;n!==null&&(e.alternate=null,ph(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[B],delete n[F],delete n[K],delete n[Y],delete n[Ce])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mh(e){return e.tag===5||e.tag===3||e.tag===4}function gh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mu(e,n,s){var f=e.tag;if(f===5||f===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Zs));else if(f!==4&&(e=e.child,e!==null))for(mu(e,n,s),e=e.sibling;e!==null;)mu(e,n,s),e=e.sibling}function gu(e,n,s){var f=e.tag;if(f===5||f===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(f!==4&&(e=e.child,e!==null))for(gu(e,n,s),e=e.sibling;e!==null;)gu(e,n,s),e=e.sibling}var di=null,so=!1;function sl(e,n,s){for(s=s.child;s!==null;)xh(e,n,s),s=s.sibling}function xh(e,n,s){if(na&&typeof na.onCommitFiberUnmount=="function")try{na.onCommitFiberUnmount(Bs,s)}catch{}switch(s.tag){case 5:_i||sc(s,n);case 6:var f=di,y=so;di=null,sl(e,n,s),di=f,so=y,di!==null&&(so?(e=di,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):di.removeChild(s.stateNode));break;case 18:di!==null&&(so?(e=di,s=s.stateNode,e.nodeType===8?eo(e.parentNode,s):e.nodeType===1&&eo(e,s),lr(e)):eo(di,s.stateNode));break;case 4:f=di,y=so,di=s.stateNode.containerInfo,so=!0,sl(e,n,s),di=f,so=y;break;case 0:case 11:case 14:case 15:if(!_i&&(f=s.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){y=f=f.next;do{var S=y,D=S.destroy;S=S.tag,D!==void 0&&((S&2)!==0||(S&4)!==0)&&hu(s,n,D),y=y.next}while(y!==f)}sl(e,n,s);break;case 1:if(!_i&&(sc(s,n),f=s.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=s.memoizedProps,f.state=s.memoizedState,f.componentWillUnmount()}catch(ue){Zr(s,n,ue)}sl(e,n,s);break;case 21:sl(e,n,s);break;case 22:s.mode&1?(_i=(f=_i)||s.memoizedState!==null,sl(e,n,s),_i=f):sl(e,n,s);break;default:sl(e,n,s)}}function yh(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new $0),n.forEach(function(f){var y=Z0.bind(null,e,f);s.has(f)||(s.add(f),f.then(y,y))})}}function oo(e,n){var s=n.deletions;if(s!==null)for(var f=0;f<s.length;f++){var y=s[f];try{var S=e,D=n,ue=D;e:for(;ue!==null;){switch(ue.tag){case 5:di=ue.stateNode,so=!1;break e;case 3:di=ue.stateNode.containerInfo,so=!0;break e;case 4:di=ue.stateNode.containerInfo,so=!0;break e}ue=ue.return}if(di===null)throw Error(r(160));xh(S,D,y),di=null,so=!1;var ve=y.alternate;ve!==null&&(ve.return=null),y.return=null}catch(Ve){Zr(y,n,Ve)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)vh(n,e),n=n.sibling}function vh(e,n){var s=e.alternate,f=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(oo(n,e),_o(e),f&4){try{Dc(3,e,e.return),cd(3,e)}catch(Bt){Zr(e,e.return,Bt)}try{Dc(5,e,e.return)}catch(Bt){Zr(e,e.return,Bt)}}break;case 1:oo(n,e),_o(e),f&512&&s!==null&&sc(s,s.return);break;case 5:if(oo(n,e),_o(e),f&512&&s!==null&&sc(s,s.return),e.flags&32){var y=e.stateNode;try{se(y,"")}catch(Bt){Zr(e,e.return,Bt)}}if(f&4&&(y=e.stateNode,y!=null)){var S=e.memoizedProps,D=s!==null?s.memoizedProps:S,ue=e.type,ve=e.updateQueue;if(e.updateQueue=null,ve!==null)try{ue==="input"&&S.type==="radio"&&S.name!=null&&et(y,S),vt(ue,D);var Ve=vt(ue,S);for(D=0;D<ve.length;D+=2){var lt=ve[D],dt=ve[D+1];lt==="style"?He(y,dt):lt==="dangerouslySetInnerHTML"?qe(y,dt):lt==="children"?se(y,dt):X(y,lt,dt,Ve)}switch(ue){case"input":Et(y,S);break;case"textarea":wt(y,S);break;case"select":var st=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!S.multiple;var At=S.value;At!=null?mt(y,!!S.multiple,At,!1):st!==!!S.multiple&&(S.defaultValue!=null?mt(y,!!S.multiple,S.defaultValue,!0):mt(y,!!S.multiple,S.multiple?[]:"",!1))}y[F]=S}catch(Bt){Zr(e,e.return,Bt)}}break;case 6:if(oo(n,e),_o(e),f&4){if(e.stateNode===null)throw Error(r(162));y=e.stateNode,S=e.memoizedProps;try{y.nodeValue=S}catch(Bt){Zr(e,e.return,Bt)}}break;case 3:if(oo(n,e),_o(e),f&4&&s!==null&&s.memoizedState.isDehydrated)try{lr(n.containerInfo)}catch(Bt){Zr(e,e.return,Bt)}break;case 4:oo(n,e),_o(e);break;case 13:oo(n,e),_o(e),y=e.child,y.flags&8192&&(S=y.memoizedState!==null,y.stateNode.isHidden=S,!S||y.alternate!==null&&y.alternate.memoizedState!==null||(vu=xn())),f&4&&yh(e);break;case 22:if(lt=s!==null&&s.memoizedState!==null,e.mode&1?(_i=(Ve=_i)||lt,oo(n,e),_i=Ve):oo(n,e),_o(e),f&8192){if(Ve=e.memoizedState!==null,(e.stateNode.isHidden=Ve)&&!lt&&(e.mode&1)!==0)for(Mt=e,lt=e.child;lt!==null;){for(dt=Mt=lt;Mt!==null;){switch(st=Mt,At=st.child,st.tag){case 0:case 11:case 14:case 15:Dc(4,st,st.return);break;case 1:sc(st,st.return);var Tt=st.stateNode;if(typeof Tt.componentWillUnmount=="function"){f=st,s=st.return;try{n=f,Tt.props=n.memoizedProps,Tt.state=n.memoizedState,Tt.componentWillUnmount()}catch(Bt){Zr(f,s,Bt)}}break;case 5:sc(st,st.return);break;case 22:if(st.memoizedState!==null){jh(dt);continue}}At!==null?(At.return=st,Mt=At):jh(dt)}lt=lt.sibling}e:for(lt=null,dt=e;;){if(dt.tag===5){if(lt===null){lt=dt;try{y=dt.stateNode,Ve?(S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(ue=dt.stateNode,ve=dt.memoizedProps.style,D=ve!=null&&ve.hasOwnProperty("display")?ve.display:null,ue.style.display=ht("display",D))}catch(Bt){Zr(e,e.return,Bt)}}}else if(dt.tag===6){if(lt===null)try{dt.stateNode.nodeValue=Ve?"":dt.memoizedProps}catch(Bt){Zr(e,e.return,Bt)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===e)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===e)break e;for(;dt.sibling===null;){if(dt.return===null||dt.return===e)break e;lt===dt&&(lt=null),dt=dt.return}lt===dt&&(lt=null),dt.sibling.return=dt.return,dt=dt.sibling}}break;case 19:oo(n,e),_o(e),f&4&&yh(e);break;case 21:break;default:oo(n,e),_o(e)}}function _o(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(mh(s)){var f=s;break e}s=s.return}throw Error(r(160))}switch(f.tag){case 5:var y=f.stateNode;f.flags&32&&(se(y,""),f.flags&=-33);var S=gh(e);gu(e,S,y);break;case 3:case 4:var D=f.stateNode.containerInfo,ue=gh(e);mu(e,ue,D);break;default:throw Error(r(161))}}catch(ve){Zr(e,e.return,ve)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function H0(e,n,s){Mt=e,bh(e)}function bh(e,n,s){for(var f=(e.mode&1)!==0;Mt!==null;){var y=Mt,S=y.child;if(y.tag===22&&f){var D=y.memoizedState!==null||ld;if(!D){var ue=y.alternate,ve=ue!==null&&ue.memoizedState!==null||_i;ue=ld;var Ve=_i;if(ld=D,(_i=ve)&&!Ve)for(Mt=y;Mt!==null;)D=Mt,ve=D.child,D.tag===22&&D.memoizedState!==null?Sh(y):ve!==null?(ve.return=D,Mt=ve):Sh(y);for(;S!==null;)Mt=S,bh(S),S=S.sibling;Mt=y,ld=ue,_i=Ve}wh(e)}else(y.subtreeFlags&8772)!==0&&S!==null?(S.return=y,Mt=S):wh(e)}}function wh(e){for(;Mt!==null;){var n=Mt;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:_i||cd(5,n);break;case 1:var f=n.stateNode;if(n.flags&4&&!_i)if(s===null)f.componentDidMount();else{var y=n.elementType===n.type?s.memoizedProps:io(n.type,s.memoizedProps);f.componentDidUpdate(y,s.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var S=n.updateQueue;S!==null&&ns(n,S,f);break;case 3:var D=n.updateQueue;if(D!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}ns(n,D,s)}break;case 5:var ue=n.stateNode;if(s===null&&n.flags&4){s=ue;var ve=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":ve.autoFocus&&s.focus();break;case"img":ve.src&&(s.src=ve.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var Ve=n.alternate;if(Ve!==null){var lt=Ve.memoizedState;if(lt!==null){var dt=lt.dehydrated;dt!==null&&lr(dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}_i||n.flags&512&&pu(n)}catch(st){Zr(n,n.return,st)}}if(n===e){Mt=null;break}if(s=n.sibling,s!==null){s.return=n.return,Mt=s;break}Mt=n.return}}function jh(e){for(;Mt!==null;){var n=Mt;if(n===e){Mt=null;break}var s=n.sibling;if(s!==null){s.return=n.return,Mt=s;break}Mt=n.return}}function Sh(e){for(;Mt!==null;){var n=Mt;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{cd(4,n)}catch(ve){Zr(n,s,ve)}break;case 1:var f=n.stateNode;if(typeof f.componentDidMount=="function"){var y=n.return;try{f.componentDidMount()}catch(ve){Zr(n,y,ve)}}var S=n.return;try{pu(n)}catch(ve){Zr(n,S,ve)}break;case 5:var D=n.return;try{pu(n)}catch(ve){Zr(n,D,ve)}}}catch(ve){Zr(n,n.return,ve)}if(n===e){Mt=null;break}var ue=n.sibling;if(ue!==null){ue.return=n.return,Mt=ue;break}Mt=n.return}}var V0=Math.ceil,dd=H.ReactCurrentDispatcher,xu=H.ReactCurrentOwner,Ds=H.ReactCurrentBatchConfig,Rn=0,Ya=null,Na=null,ui=0,gs=0,oc=sn(0),Ta=0,Fc=null,Ml=0,ud=0,yu=0,Tc=null,as=null,vu=0,lc=1/0,Vo=null,fd=!1,bu=null,ol=null,hd=!1,ll=null,pd=0,Rc=0,wu=null,md=-1,gd=0;function $i(){return(Rn&6)!==0?xn():md!==-1?md:md=xn()}function cl(e){return(e.mode&1)===0?1:(Rn&2)!==0&&ui!==0?ui&-ui:zr.transition!==null?(gd===0&&(gd=bs()),gd):(e=Cn,e!==0||(e=window.event,e=e===void 0?16:Ws(e.type)),e)}function lo(e,n,s,f){if(50<Rc)throw Rc=0,wu=null,Error(r(185));On(e,s,f),((Rn&2)===0||e!==Ya)&&(e===Ya&&((Rn&2)===0&&(ud|=s),Ta===4&&dl(e,ui)),is(e,f),s===1&&Rn===0&&(n.mode&1)===0&&(lc=xn()+500,Ll&&N()))}function is(e,n){var s=e.callbackNode;Hr(e,n);var f=Wi(e,e===Ya?ui:0);if(f===0)s!==null&&Os(s),e.callbackNode=null,e.callbackPriority=0;else if(n=f&-f,e.callbackPriority!==n){if(s!=null&&Os(s),n===1)e.tag===0?w(kh.bind(null,e)):h(kh.bind(null,e)),tl(function(){(Rn&6)===0&&N()}),s=null;else{switch(gi(f)){case 1:s=Xa;break;case 4:s=_r;break;case 16:s=ka;break;case 536870912:s=cs;break;default:s=ka}s=Mh(s,Nh.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function Nh(e,n){if(md=-1,gd=0,(Rn&6)!==0)throw Error(r(327));var s=e.callbackNode;if(cc()&&e.callbackNode!==s)return null;var f=Wi(e,e===Ya?ui:0);if(f===0)return null;if((f&30)!==0||(f&e.expiredLanes)!==0||n)n=xd(e,f);else{n=f;var y=Rn;Rn|=2;var S=Ch();(Ya!==e||ui!==n)&&(Vo=null,lc=xn()+500,Fl(e,n));do try{J0();break}catch(ue){Ah(e,ue)}while(!0);Fn(),dd.current=S,Rn=y,Na!==null?n=0:(Ya=null,ui=0,n=Ta)}if(n!==0){if(n===2&&(y=ri(e),y!==0&&(f=y,n=ju(e,y))),n===1)throw s=Fc,Fl(e,0),dl(e,f),is(e,xn()),s;if(n===6)dl(e,f);else{if(y=e.current.alternate,(f&30)===0&&!Y0(y)&&(n=xd(e,f),n===2&&(S=ri(e),S!==0&&(f=S,n=ju(e,S))),n===1))throw s=Fc,Fl(e,0),dl(e,f),is(e,xn()),s;switch(e.finishedWork=y,e.finishedLanes=f,n){case 0:case 1:throw Error(r(345));case 2:Tl(e,as,Vo);break;case 3:if(dl(e,f),(f&130023424)===f&&(n=vu+500-xn(),10<n)){if(Wi(e,0)!==0)break;if(y=e.suspendedLanes,(y&f)!==f){$i(),e.pingedLanes|=e.suspendedLanes&y;break}e.timeoutHandle=el(Tl.bind(null,e,as,Vo),n);break}Tl(e,as,Vo);break;case 4:if(dl(e,f),(f&4194240)===f)break;for(n=e.eventTimes,y=-1;0<f;){var D=31-Xn(f);S=1<<D,D=n[D],D>y&&(y=D),f&=~S}if(f=y,f=xn()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*V0(f/1960))-f,10<f){e.timeoutHandle=el(Tl.bind(null,e,as,Vo),f);break}Tl(e,as,Vo);break;case 5:Tl(e,as,Vo);break;default:throw Error(r(329))}}}return is(e,xn()),e.callbackNode===s?Nh.bind(null,e):null}function ju(e,n){var s=Tc;return e.current.memoizedState.isDehydrated&&(Fl(e,n).flags|=256),e=xd(e,n),e!==2&&(n=as,as=s,n!==null&&Su(n)),e}function Su(e){as===null?as=e:as.push.apply(as,e)}function Y0(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var f=0;f<s.length;f++){var y=s[f],S=y.getSnapshot;y=y.value;try{if(!gr(S(),y))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function dl(e,n){for(n&=~yu,n&=~ud,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-Xn(n),f=1<<s;e[s]=-1,n&=~f}}function kh(e){if((Rn&6)!==0)throw Error(r(327));cc();var n=Wi(e,0);if((n&1)===0)return is(e,xn()),null;var s=xd(e,n);if(e.tag!==0&&s===2){var f=ri(e);f!==0&&(n=f,s=ju(e,f))}if(s===1)throw s=Fc,Fl(e,0),dl(e,n),is(e,xn()),s;if(s===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Tl(e,as,Vo),is(e,xn()),null}function Nu(e,n){var s=Rn;Rn|=1;try{return e(n)}finally{Rn=s,Rn===0&&(lc=xn()+500,Ll&&N())}}function Dl(e){ll!==null&&ll.tag===0&&(Rn&6)===0&&cc();var n=Rn;Rn|=1;var s=Ds.transition,f=Cn;try{if(Ds.transition=null,Cn=1,e)return e()}finally{Cn=f,Ds.transition=s,Rn=n,(Rn&6)===0&&N()}}function ku(){gs=oc.current,cn(oc)}function Fl(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Gl(s)),Na!==null)for(s=Na.return;s!==null;){var f=s;switch(Be(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&_s();break;case 3:Is(),cn($a),cn(sa),_c();break;case 5:Pc(f);break;case 4:Is();break;case 13:cn(ur);break;case 19:cn(ur);break;case 10:br(f.type._context);break;case 22:case 23:ku()}s=s.return}if(Ya=e,Na=e=ul(e.current,null),ui=gs=n,Ta=0,Fc=null,yu=ud=Ml=0,as=Tc=null,tr!==null){for(n=0;n<tr.length;n++)if(s=tr[n],f=s.interleaved,f!==null){s.interleaved=null;var y=f.next,S=s.pending;if(S!==null){var D=S.next;S.next=y,f.next=D}s.pending=f}tr=null}return e}function Ah(e,n){do{var s=Na;try{if(Fn(),Kl.current=ad,rl){for(var f=wr.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}rl=!1}if(Es=0,Wr=Xr=wr=null,ro=!1,al=0,xu.current=null,s===null||s.return===null){Ta=1,Fc=n,Na=null;break}e:{var S=e,D=s.return,ue=s,ve=n;if(n=ui,ue.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Ve=ve,lt=ue,dt=lt.tag;if((lt.mode&1)===0&&(dt===0||dt===11||dt===15)){var st=lt.alternate;st?(lt.updateQueue=st.updateQueue,lt.memoizedState=st.memoizedState,lt.lanes=st.lanes):(lt.updateQueue=null,lt.memoizedState=null)}var At=Qf(D);if(At!==null){At.flags&=-257,Xf(At,D,ue,S,n),At.mode&1&&Kf(S,Ve,n),n=At,ve=Ve;var Tt=n.updateQueue;if(Tt===null){var Bt=new Set;Bt.add(ve),n.updateQueue=Bt}else Tt.add(ve);break e}else{if((n&1)===0){Kf(S,Ve,n),Au();break e}ve=Error(r(426))}}else if(Ze&&ue.mode&1){var ca=Qf(D);if(ca!==null){(ca.flags&65536)===0&&(ca.flags|=256),Xf(ca,D,ue,S,n),gt(ic(ve,ue));break e}}S=ve=ic(ve,ue),Ta!==4&&(Ta=2),Tc===null?Tc=[S]:Tc.push(S),S=D;do{switch(S.tag){case 3:S.flags|=65536,n&=-n,S.lanes|=n;var Oe=Gf(S,ve,n);rr(S,Oe);break e;case 1:ue=ve;var ke=S.type,$e=S.stateNode;if((S.flags&128)===0&&(typeof ke.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(ol===null||!ol.has($e)))){S.flags|=65536,n&=-n,S.lanes|=n;var ft=Jf(S,ue,n);rr(S,ft);break e}}S=S.return}while(S!==null)}Lh(s)}catch(Wt){n=Wt,Na===s&&s!==null&&(Na=s=s.return);continue}break}while(!0)}function Ch(){var e=dd.current;return dd.current=ad,e===null?ad:e}function Au(){(Ta===0||Ta===3||Ta===2)&&(Ta=4),Ya===null||(Ml&268435455)===0&&(ud&268435455)===0||dl(Ya,ui)}function xd(e,n){var s=Rn;Rn|=2;var f=Ch();(Ya!==e||ui!==n)&&(Vo=null,Fl(e,n));do try{G0();break}catch(y){Ah(e,y)}while(!0);if(Fn(),Rn=s,dd.current=f,Na!==null)throw Error(r(261));return Ya=null,ui=0,Ta}function G0(){for(;Na!==null;)Ph(Na)}function J0(){for(;Na!==null&&!Fi();)Ph(Na)}function Ph(e){var n=Eh(e.alternate,e,gs);e.memoizedProps=e.pendingProps,n===null?Lh(e):Na=n,xu.current=null}function Lh(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=U0(s,n,gs),s!==null){Na=s;return}}else{if(s=q0(s,n),s!==null){s.flags&=32767,Na=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ta=6,Na=null;return}}if(n=n.sibling,n!==null){Na=n;return}Na=n=e}while(n!==null);Ta===0&&(Ta=5)}function Tl(e,n,s){var f=Cn,y=Ds.transition;try{Ds.transition=null,Cn=1,K0(e,n,s,f)}finally{Ds.transition=y,Cn=f}return null}function K0(e,n,s,f){do cc();while(ll!==null);if((Rn&6)!==0)throw Error(r(327));s=e.finishedWork;var y=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var S=s.lanes|s.childLanes;if(Ba(e,S),e===Ya&&(Na=Ya=null,ui=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||hd||(hd=!0,Mh(ka,function(){return cc(),null})),S=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||S){S=Ds.transition,Ds.transition=null;var D=Cn;Cn=1;var ue=Rn;Rn|=4,xu.current=null,W0(e,s),vh(s,e),yr(Ls),ds=!!ko,Ls=ko=null,e.current=s,H0(s),ut(),Rn=ue,Cn=D,Ds.transition=S}else e.current=s;if(hd&&(hd=!1,ll=e,pd=y),S=e.pendingLanes,S===0&&(ol=null),Aa(s.stateNode),is(e,xn()),n!==null)for(f=e.onRecoverableError,s=0;s<n.length;s++)y=n[s],f(y.value,{componentStack:y.stack,digest:y.digest});if(fd)throw fd=!1,e=bu,bu=null,e;return(pd&1)!==0&&e.tag!==0&&cc(),S=e.pendingLanes,(S&1)!==0?e===wu?Rc++:(Rc=0,wu=e):Rc=0,N(),null}function cc(){if(ll!==null){var e=gi(pd),n=Ds.transition,s=Cn;try{if(Ds.transition=null,Cn=16>e?16:e,ll===null)var f=!1;else{if(e=ll,ll=null,pd=0,(Rn&6)!==0)throw Error(r(331));var y=Rn;for(Rn|=4,Mt=e.current;Mt!==null;){var S=Mt,D=S.child;if((Mt.flags&16)!==0){var ue=S.deletions;if(ue!==null){for(var ve=0;ve<ue.length;ve++){var Ve=ue[ve];for(Mt=Ve;Mt!==null;){var lt=Mt;switch(lt.tag){case 0:case 11:case 15:Dc(8,lt,S)}var dt=lt.child;if(dt!==null)dt.return=lt,Mt=dt;else for(;Mt!==null;){lt=Mt;var st=lt.sibling,At=lt.return;if(ph(lt),lt===Ve){Mt=null;break}if(st!==null){st.return=At,Mt=st;break}Mt=At}}}var Tt=S.alternate;if(Tt!==null){var Bt=Tt.child;if(Bt!==null){Tt.child=null;do{var ca=Bt.sibling;Bt.sibling=null,Bt=ca}while(Bt!==null)}}Mt=S}}if((S.subtreeFlags&2064)!==0&&D!==null)D.return=S,Mt=D;else e:for(;Mt!==null;){if(S=Mt,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Dc(9,S,S.return)}var Oe=S.sibling;if(Oe!==null){Oe.return=S.return,Mt=Oe;break e}Mt=S.return}}var ke=e.current;for(Mt=ke;Mt!==null;){D=Mt;var $e=D.child;if((D.subtreeFlags&2064)!==0&&$e!==null)$e.return=D,Mt=$e;else e:for(D=ke;Mt!==null;){if(ue=Mt,(ue.flags&2048)!==0)try{switch(ue.tag){case 0:case 11:case 15:cd(9,ue)}}catch(Wt){Zr(ue,ue.return,Wt)}if(ue===D){Mt=null;break e}var ft=ue.sibling;if(ft!==null){ft.return=ue.return,Mt=ft;break e}Mt=ue.return}}if(Rn=y,N(),na&&typeof na.onPostCommitFiberRoot=="function")try{na.onPostCommitFiberRoot(Bs,e)}catch{}f=!0}return f}finally{Cn=s,Ds.transition=n}}return!1}function _h(e,n,s){n=ic(s,n),n=Gf(e,n,1),e=qr(e,n,1),n=$i(),e!==null&&(On(e,1,n),is(e,n))}function Zr(e,n,s){if(e.tag===3)_h(e,e,s);else for(;n!==null;){if(n.tag===3){_h(n,e,s);break}else if(n.tag===1){var f=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ol===null||!ol.has(f))){e=ic(s,e),e=Jf(n,e,1),n=qr(n,e,1),e=$i(),n!==null&&(On(n,1,e),is(n,e));break}}n=n.return}}function Q0(e,n,s){var f=e.pingCache;f!==null&&f.delete(n),n=$i(),e.pingedLanes|=e.suspendedLanes&s,Ya===e&&(ui&s)===s&&(Ta===4||Ta===3&&(ui&130023424)===ui&&500>xn()-vu?Fl(e,0):yu|=s),is(e,n)}function Ih(e,n){n===0&&((e.mode&1)===0?n=1:(n=ti,ti<<=1,(ti&130023424)===0&&(ti=4194304)));var s=$i();e=nr(e,n),e!==null&&(On(e,n,s),is(e,s))}function X0(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Ih(e,s)}function Z0(e,n){var s=0;switch(e.tag){case 13:var f=e.stateNode,y=e.memoizedState;y!==null&&(s=y.retryLane);break;case 19:f=e.stateNode;break;default:throw Error(r(314))}f!==null&&f.delete(n),Ih(e,s)}var Eh;Eh=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||$a.current)rs=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return rs=!1,z0(e,n,s);rs=(e.flags&131072)!==0}else rs=!1,Ze&&(n.flags&1048576)!==0&&Te(n,q,n.index);switch(n.lanes=0,n.tag){case 2:var f=n.type;od(e,n),e=n.pendingProps;var y=qn(n,sa.current);Fr(n,s),y=_l(null,n,f,e,y,s);var S=Ms();return n.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,er(f)?(S=!0,$o(n)):S=!1,n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Fa(n),y.updater=id,n.stateNode=y,y._reactInternals=n,ru(n,f,e,s),n=ou(null,n,f,!0,S,s)):(n.tag=0,Ze&&S&&Je(n),qi(null,n,y,s),n=n.child),n;case 16:f=n.elementType;e:{switch(od(e,n),e=n.pendingProps,y=f._init,f=y(f._payload),n.type=f,y=n.tag=tg(f),e=io(f,e),y){case 0:n=su(null,n,f,e,s);break e;case 1:n=ah(null,n,f,e,s);break e;case 11:n=Zf(null,n,f,e,s);break e;case 14:n=eh(null,n,f,io(f.type,e),s);break e}throw Error(r(306,f,""))}return n;case 0:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:io(f,y),su(e,n,f,y,s);case 1:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:io(f,y),ah(e,n,f,y,s);case 3:e:{if(ih(n),e===null)throw Error(r(387));f=n.pendingProps,S=n.memoizedState,y=S.element,Pi(e,n),Va(n,f,null,s);var D=n.memoizedState;if(f=D.element,S.isDehydrated)if(S={element:f,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},n.updateQueue.baseState=S,n.memoizedState=S,n.flags&256){y=ic(Error(r(423)),n),n=sh(e,n,f,s,y);break e}else if(f!==y){y=ic(Error(r(424)),n),n=sh(e,n,f,s,y);break e}else for(Ge=Da(n.stateNode.containerInfo.firstChild),Ye=n,Ze=!0,tt=null,s=Cr(n,null,f,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(It(),f===y){n=Ho(e,n,s);break e}qi(e,n,f,s)}n=n.child}return n;case 5:return Zc(n),e===null&&Ft(n),f=n.type,y=n.pendingProps,S=e!==null?e.memoizedProps:null,D=y.children,Ao(f,y)?D=null:S!==null&&Ao(f,S)&&(n.flags|=32),rh(e,n),qi(e,n,D,s),n.child;case 6:return e===null&&Ft(n),null;case 13:return oh(e,n,s);case 4:return nl(n,n.stateNode.containerInfo),f=n.pendingProps,e===null?n.child=Kr(n,null,f,s):qi(e,n,f,s),n.child;case 11:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:io(f,y),Zf(e,n,f,y,s);case 7:return qi(e,n,n.pendingProps,s),n.child;case 8:return qi(e,n,n.pendingProps.children,s),n.child;case 12:return qi(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(f=n.type._context,y=n.pendingProps,S=n.memoizedProps,D=y.value,yn(oa,f._currentValue),f._currentValue=D,S!==null)if(gr(S.value,D)){if(S.children===y.children&&!$a.current){n=Ho(e,n,s);break e}}else for(S=n.child,S!==null&&(S.return=n);S!==null;){var ue=S.dependencies;if(ue!==null){D=S.child;for(var ve=ue.firstContext;ve!==null;){if(ve.context===f){if(S.tag===1){ve=Ur(-1,s&-s),ve.tag=2;var Ve=S.updateQueue;if(Ve!==null){Ve=Ve.shared;var lt=Ve.pending;lt===null?ve.next=ve:(ve.next=lt.next,lt.next=ve),Ve.pending=ve}}S.lanes|=s,ve=S.alternate,ve!==null&&(ve.lanes|=s),Tn(S.return,s,n),ue.lanes|=s;break}ve=ve.next}}else if(S.tag===10)D=S.type===n.type?null:S.child;else if(S.tag===18){if(D=S.return,D===null)throw Error(r(341));D.lanes|=s,ue=D.alternate,ue!==null&&(ue.lanes|=s),Tn(D,s,n),D=S.sibling}else D=S.child;if(D!==null)D.return=S;else for(D=S;D!==null;){if(D===n){D=null;break}if(S=D.sibling,S!==null){S.return=D.return,D=S;break}D=D.return}S=D}qi(e,n,y.children,s),n=n.child}return n;case 9:return y=n.type,f=n.pendingProps.children,Fr(n,s),y=Tr(y),f=f(y),n.flags|=1,qi(e,n,f,s),n.child;case 14:return f=n.type,y=io(f,n.pendingProps),y=io(f.type,y),eh(e,n,f,y,s);case 15:return th(e,n,n.type,n.pendingProps,s);case 17:return f=n.type,y=n.pendingProps,y=n.elementType===f?y:io(f,y),od(e,n),n.tag=1,er(f)?(e=!0,$o(n)):e=!1,Fr(n,s),Vf(n,f,y),ru(n,f,y,s),ou(null,n,f,!0,e,s);case 19:return ch(e,n,s);case 22:return nh(e,n,s)}throw Error(r(156,n.tag))};function Mh(e,n){return Or(e,n)}function eg(e,n,s,f){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fs(e,n,s,f){return new eg(e,n,s,f)}function Cu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tg(e){if(typeof e=="function")return Cu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$)return 11;if(e===we)return 14}return 2}function ul(e,n){var s=e.alternate;return s===null?(s=Fs(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function yd(e,n,s,f,y,S){var D=2;if(f=e,typeof e=="function")Cu(e)&&(D=1);else if(typeof e=="string")D=5;else e:switch(e){case Ee:return Rl(s.children,y,S,n);case ge:D=8,y|=8;break;case ee:return e=Fs(12,s,n,y|2),e.elementType=ee,e.lanes=S,e;case le:return e=Fs(13,s,n,y),e.elementType=le,e.lanes=S,e;case ie:return e=Fs(19,s,n,y),e.elementType=ie,e.lanes=S,e;case Ie:return vd(s,y,S,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xe:D=10;break e;case z:D=9;break e;case $:D=11;break e;case we:D=14;break e;case _e:D=16,f=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return n=Fs(D,s,n,y),n.elementType=e,n.type=f,n.lanes=S,n}function Rl(e,n,s,f){return e=Fs(7,e,f,n),e.lanes=s,e}function vd(e,n,s,f){return e=Fs(22,e,f,n),e.elementType=Ie,e.lanes=s,e.stateNode={isHidden:!1},e}function Pu(e,n,s){return e=Fs(6,e,null,n),e.lanes=s,e}function Lu(e,n,s){return n=Fs(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function ng(e,n,s,f,y){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ro(0),this.expirationTimes=Ro(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ro(0),this.identifierPrefix=f,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function _u(e,n,s,f,y,S,D,ue,ve){return e=new ng(e,n,s,ue,ve),n===1?(n=1,S===!0&&(n|=8)):n=0,S=Fs(3,null,null,n),e.current=S,S.stateNode=e,S.memoizedState={element:f,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fa(S),e}function rg(e,n,s){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:f==null?null:""+f,children:e,containerInfo:n,implementation:s}}function Dh(e){if(!e)return ba;e=e._reactInternals;e:{if(Dn(e)!==e||e.tag!==1)throw Error(r(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(er(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(e.tag===1){var s=e.type;if(er(s))return Cc(e,s,n)}return n}function Fh(e,n,s,f,y,S,D,ue,ve){return e=_u(s,f,!0,e,y,S,D,ue,ve),e.context=Dh(null),s=e.current,f=$i(),y=cl(s),S=Ur(f,y),S.callback=n??null,qr(s,S,y),e.current.lanes=y,On(e,y,f),is(e,f),e}function bd(e,n,s,f){var y=n.current,S=$i(),D=cl(y);return s=Dh(s),n.context===null?n.context=s:n.pendingContext=s,n=Ur(S,D),n.payload={element:e},f=f===void 0?null:f,f!==null&&(n.callback=f),e=qr(y,n,D),e!==null&&(lo(e,y,D,S),Ha(e,y,D)),D}function wd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Th(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Iu(e,n){Th(e,n),(e=e.alternate)&&Th(e,n)}function ag(){return null}var Rh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Eu(e){this._internalRoot=e}jd.prototype.render=Eu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));bd(e,n,null,null)},jd.prototype.unmount=Eu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Dl(function(){bd(null,e,null,null)}),n[T]=null}};function jd(e){this._internalRoot=e}jd.prototype.unstable_scheduleHydration=function(e){if(e){var n=aa();e={blockedOn:null,target:e,priority:n};for(var s=0;s<ai.length&&n!==0&&n<ai[s].priority;s++);ai.splice(s,0,e),s===0&&Us(e)}};function Mu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Oh(){}function ig(e,n,s,f,y){if(y){if(typeof f=="function"){var S=f;f=function(){var Ve=wd(D);S.call(Ve)}}var D=Fh(n,f,e,0,null,!1,!1,"",Oh);return e._reactRootContainer=D,e[T]=D.current,Mr(e.nodeType===8?e.parentNode:e),Dl(),D}for(;y=e.lastChild;)e.removeChild(y);if(typeof f=="function"){var ue=f;f=function(){var Ve=wd(ve);ue.call(Ve)}}var ve=_u(e,0,!1,null,null,!1,!1,"",Oh);return e._reactRootContainer=ve,e[T]=ve.current,Mr(e.nodeType===8?e.parentNode:e),Dl(function(){bd(n,ve,s,f)}),ve}function Nd(e,n,s,f,y){var S=s._reactRootContainer;if(S){var D=S;if(typeof y=="function"){var ue=y;y=function(){var ve=wd(D);ue.call(ve)}}bd(n,D,e,y)}else D=ig(s,n,e,y,f);return wd(D)}ws=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=mi(n.pendingLanes);s!==0&&(ra(n,s|1),is(n,xn()),(Rn&6)===0&&(lc=xn()+500,N()))}break;case 13:Dl(function(){var f=nr(e,1);if(f!==null){var y=$i();lo(f,e,1,y)}}),Iu(e,1)}},Oo=function(e){if(e.tag===13){var n=nr(e,134217728);if(n!==null){var s=$i();lo(n,e,134217728,s)}Iu(e,134217728)}},js=function(e){if(e.tag===13){var n=cl(e),s=nr(e,n);if(s!==null){var f=$i();lo(s,e,n,f)}Iu(e,n)}},aa=function(){return Cn},Hi=function(e,n){var s=Cn;try{return Cn=e,n()}finally{Cn=s}},Ut=function(e,n,s){switch(n){case"input":if(Et(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var f=s[n];if(f!==e&&f.form===e.form){var y=Yt(f);if(!y)throw Error(r(90));it(f),Et(f,y)}}}break;case"textarea":wt(e,s);break;case"select":n=s.value,n!=null&&mt(e,!!s.multiple,n,!1)}},ln=Nu,jr=Dl;var sg={usingClientEntryPoint:!1,Events:[Qe,at,Yt,xt,pa,Nu]},Oc={findFiberByHostInstance:Ne,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},og={bundleType:Oc.bundleType,version:Oc.version,rendererPackageName:Oc.rendererPackageName,rendererConfig:Oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kn(e),e===null?null:e.stateNode},findFiberByHostInstance:Oc.findFiberByHostInstance||ag,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kd.isDisabled&&kd.supportsFiber)try{Bs=kd.inject(og),na=kd}catch{}}return ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sg,ss.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mu(n))throw Error(r(200));return rg(e,n,null,s)},ss.createRoot=function(e,n){if(!Mu(e))throw Error(r(299));var s=!1,f="",y=Rh;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(f=n.identifierPrefix),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=_u(e,1,!1,null,null,s,!1,f,y),e[T]=n.current,Mr(e.nodeType===8?e.parentNode:e),new Eu(n)},ss.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Kn(n),e=e===null?null:e.stateNode,e},ss.flushSync=function(e){return Dl(e)},ss.hydrate=function(e,n,s){if(!Sd(n))throw Error(r(200));return Nd(null,e,n,!0,s)},ss.hydrateRoot=function(e,n,s){if(!Mu(e))throw Error(r(405));var f=s!=null&&s.hydratedSources||null,y=!1,S="",D=Rh;if(s!=null&&(s.unstable_strictMode===!0&&(y=!0),s.identifierPrefix!==void 0&&(S=s.identifierPrefix),s.onRecoverableError!==void 0&&(D=s.onRecoverableError)),n=Fh(n,null,e,1,s??null,y,!1,S,D),e[T]=n.current,Mr(e),f)for(e=0;e<f.length;e++)s=f[e],y=s._getVersion,y=y(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,y]:n.mutableSourceEagerHydrationData.push(s,y);return new jd(n)},ss.render=function(e,n,s){if(!Sd(n))throw Error(r(200));return Nd(null,e,n,!1,s)},ss.unmountComponentAtNode=function(e){if(!Sd(e))throw Error(r(40));return e._reactRootContainer?(Dl(function(){Nd(null,null,e,!1,function(){e._reactRootContainer=null,e[T]=null})}),!0):!1},ss.unstable_batchedUpdates=Nu,ss.unstable_renderSubtreeIntoContainer=function(e,n,s,f){if(!Sd(s))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return Nd(e,n,s,!1,f)},ss.version="18.3.1-next-f1338f8080-20240426",ss}var Vh;function Am(){if(Vh)return Tu.exports;Vh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(a){console.error(a)}}return i(),Tu.exports=gg(),Tu.exports}var Yh;function xg(){if(Yh)return Ad;Yh=1;var i=Am();return Ad.createRoot=i.createRoot,Ad.hydrateRoot=i.hydrateRoot,Ad}var yg=xg();const vg=km(yg);Am();function Wc(){return Wc=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},Wc.apply(this,arguments)}var ml;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(ml||(ml={}));const Gh="popstate";function bg(i){i===void 0&&(i={});function a(o,c){let{pathname:l,search:m,hash:p}=o.location;return df("",{pathname:l,search:m,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(o,c){return typeof c=="string"?c:$d(c)}return jg(a,r,null,i)}function ha(i,a){if(i===!1||i===null||typeof i>"u")throw new Error(a)}function Cf(i,a){if(!i){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function wg(){return Math.random().toString(36).substr(2,8)}function Jh(i,a){return{usr:i.state,key:i.key,idx:a}}function df(i,a,r,o){return r===void 0&&(r=null),Wc({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof a=="string"?wc(a):a,{state:r,key:a&&a.key||o||wg()})}function $d(i){let{pathname:a="/",search:r="",hash:o=""}=i;return r&&r!=="?"&&(a+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(a+=o.charAt(0)==="#"?o:"#"+o),a}function wc(i){let a={};if(i){let r=i.indexOf("#");r>=0&&(a.hash=i.substr(r),i=i.substr(0,r));let o=i.indexOf("?");o>=0&&(a.search=i.substr(o),i=i.substr(0,o)),i&&(a.pathname=i)}return a}function jg(i,a,r,o){o===void 0&&(o={});let{window:c=document.defaultView,v5Compat:l=!1}=o,m=c.history,p=ml.Pop,g=null,v=j();v==null&&(v=0,m.replaceState(Wc({},m.state,{idx:v}),""));function j(){return(m.state||{idx:null}).idx}function A(){p=ml.Pop;let I=j(),P=I==null?null:I-v;v=I,g&&g({action:p,location:E.location,delta:P})}function M(I,P){p=ml.Push;let W=df(E.location,I,P);v=j()+1;let X=Jh(W,v),H=E.createHref(W);try{m.pushState(X,"",H)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;c.location.assign(H)}l&&g&&g({action:p,location:E.location,delta:1})}function b(I,P){p=ml.Replace;let W=df(E.location,I,P);v=j();let X=Jh(W,v),H=E.createHref(W);m.replaceState(X,"",H),l&&g&&g({action:p,location:E.location,delta:0})}function U(I){let P=c.location.origin!=="null"?c.location.origin:c.location.href,W=typeof I=="string"?I:$d(I);return W=W.replace(/ $/,"%20"),ha(P,"No window.location.(origin|href) available to create URL for href: "+W),new URL(W,P)}let E={get action(){return p},get location(){return i(c,m)},listen(I){if(g)throw new Error("A history only accepts one active listener");return c.addEventListener(Gh,A),g=I,()=>{c.removeEventListener(Gh,A),g=null}},createHref(I){return a(c,I)},createURL:U,encodeLocation(I){let P=U(I);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:M,replace:b,go(I){return m.go(I)}};return E}var Kh;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Kh||(Kh={}));function Sg(i,a,r){return r===void 0&&(r="/"),Ng(i,a,r)}function Ng(i,a,r,o){let c=typeof a=="string"?wc(a):a,l=Pf(c.pathname||"/",r);if(l==null)return null;let m=Cm(i);kg(m);let p=null;for(let g=0;p==null&&g<m.length;++g){let v=Rg(l);p=Dg(m[g],v)}return p}function Cm(i,a,r,o){a===void 0&&(a=[]),r===void 0&&(r=[]),o===void 0&&(o="");let c=(l,m,p)=>{let g={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:m,route:l};g.relativePath.startsWith("/")&&(ha(g.relativePath.startsWith(o),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(o.length));let v=xl([o,g.relativePath]),j=r.concat(g);l.children&&l.children.length>0&&(ha(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Cm(l.children,a,j,v)),!(l.path==null&&!l.index)&&a.push({path:v,score:Eg(v,l.index),routesMeta:j})};return i.forEach((l,m)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))c(l,m);else for(let g of Pm(l.path))c(l,m,g)}),a}function Pm(i){let a=i.split("/");if(a.length===0)return[];let[r,...o]=a,c=r.endsWith("?"),l=r.replace(/\?$/,"");if(o.length===0)return c?[l,""]:[l];let m=Pm(o.join("/")),p=[];return p.push(...m.map(g=>g===""?l:[l,g].join("/"))),c&&p.push(...m),p.map(g=>i.startsWith("/")&&g===""?"/":g)}function kg(i){i.sort((a,r)=>a.score!==r.score?r.score-a.score:Mg(a.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const Ag=/^:[\w-]+$/,Cg=3,Pg=2,Lg=1,_g=10,Ig=-2,Qh=i=>i==="*";function Eg(i,a){let r=i.split("/"),o=r.length;return r.some(Qh)&&(o+=Ig),a&&(o+=Pg),r.filter(c=>!Qh(c)).reduce((c,l)=>c+(Ag.test(l)?Cg:l===""?Lg:_g),o)}function Mg(i,a){return i.length===a.length&&i.slice(0,-1).every((o,c)=>o===a[c])?i[i.length-1]-a[a.length-1]:0}function Dg(i,a,r){let{routesMeta:o}=i,c={},l="/",m=[];for(let p=0;p<o.length;++p){let g=o[p],v=p===o.length-1,j=l==="/"?a:a.slice(l.length)||"/",A=Fg({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},j),M=g.route;if(!A)return null;Object.assign(c,A.params),m.push({params:c,pathname:xl([l,A.pathname]),pathnameBase:qg(xl([l,A.pathnameBase])),route:M}),A.pathnameBase!=="/"&&(l=xl([l,A.pathnameBase]))}return m}function Fg(i,a){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[r,o]=Tg(i.path,i.caseSensitive,i.end),c=a.match(r);if(!c)return null;let l=c[0],m=l.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:o.reduce((v,j,A)=>{let{paramName:M,isOptional:b}=j;if(M==="*"){let E=p[A]||"";m=l.slice(0,l.length-E.length).replace(/(.)\/+$/,"$1")}const U=p[A];return b&&!U?v[M]=void 0:v[M]=(U||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:m,pattern:i}}function Tg(i,a,r){a===void 0&&(a=!1),r===void 0&&(r=!0),Cf(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let o=[],c="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,p,g)=>(o.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(o.push({paramName:"*"}),c+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?c+="\\/*$":i!==""&&i!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),o]}function Rg(i){try{return i.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Cf(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),i}}function Pf(i,a){if(a==="/")return i;if(!i.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,o=i.charAt(r);return o&&o!=="/"?null:i.slice(r)||"/"}const Og=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bg=i=>Og.test(i);function zg(i,a){a===void 0&&(a="/");let{pathname:r,search:o="",hash:c=""}=typeof i=="string"?wc(i):i,l;if(r)if(Bg(r))l=r;else{if(r.includes("//")){let m=r;r=r.replace(/\/\/+/g,"/"),Cf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(m+" -> "+r))}r.startsWith("/")?l=Xh(r.substring(1),"/"):l=Xh(r,a)}else l=a;return{pathname:l,search:$g(o),hash:Wg(c)}}function Xh(i,a){let r=a.replace(/\/+$/,"").split("/");return i.split("/").forEach(c=>{c===".."?r.length>1&&r.pop():c!=="."&&r.push(c)}),r.length>1?r.join("/"):"/"}function Bu(i,a,r,o){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+a+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ug(i){return i.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function Lf(i,a){let r=Ug(i);return a?r.map((o,c)=>c===r.length-1?o.pathname:o.pathnameBase):r.map(o=>o.pathnameBase)}function _f(i,a,r,o){o===void 0&&(o=!1);let c;typeof i=="string"?c=wc(i):(c=Wc({},i),ha(!c.pathname||!c.pathname.includes("?"),Bu("?","pathname","search",c)),ha(!c.pathname||!c.pathname.includes("#"),Bu("#","pathname","hash",c)),ha(!c.search||!c.search.includes("#"),Bu("#","search","hash",c)));let l=i===""||c.pathname==="",m=l?"/":c.pathname,p;if(m==null)p=r;else{let A=a.length-1;if(!o&&m.startsWith("..")){let M=m.split("/");for(;M[0]==="..";)M.shift(),A-=1;c.pathname=M.join("/")}p=A>=0?a[A]:"/"}let g=zg(c,p),v=m&&m!=="/"&&m.endsWith("/"),j=(l||m===".")&&r.endsWith("/");return!g.pathname.endsWith("/")&&(v||j)&&(g.pathname+="/"),g}const xl=i=>i.join("/").replace(/\/\/+/g,"/"),qg=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),$g=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Wg=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Hg(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const Lm=["post","put","patch","delete"];new Set(Lm);const Vg=["get",...Lm];new Set(Vg);function Hc(){return Hc=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},Hc.apply(this,arguments)}const If=Q.createContext(null),Yg=Q.createContext(null),vl=Q.createContext(null),Jd=Q.createContext(null),bl=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),_m=Q.createContext(null);function Gg(i,a){let{relative:r}=a===void 0?{}:a;jc()||ha(!1);let{basename:o,navigator:c}=Q.useContext(vl),{hash:l,pathname:m,search:p}=Em(i,{relative:r}),g=m;return o!=="/"&&(g=m==="/"?o:xl([o,m])),c.createHref({pathname:g,search:p,hash:l})}function jc(){return Q.useContext(Jd)!=null}function Sc(){return jc()||ha(!1),Q.useContext(Jd).location}function Im(i){Q.useContext(vl).static||Q.useLayoutEffect(i)}function fo(){let{isDataRoute:i}=Q.useContext(bl);return i?o1():Jg()}function Jg(){jc()||ha(!1);let i=Q.useContext(If),{basename:a,future:r,navigator:o}=Q.useContext(vl),{matches:c}=Q.useContext(bl),{pathname:l}=Sc(),m=JSON.stringify(Lf(c,r.v7_relativeSplatPath)),p=Q.useRef(!1);return Im(()=>{p.current=!0}),Q.useCallback(function(v,j){if(j===void 0&&(j={}),!p.current)return;if(typeof v=="number"){o.go(v);return}let A=_f(v,JSON.parse(m),l,j.relative==="path");i==null&&a!=="/"&&(A.pathname=A.pathname==="/"?a:xl([a,A.pathname])),(j.replace?o.replace:o.push)(A,j.state,j)},[a,o,m,l,i])}function Em(i,a){let{relative:r}=a===void 0?{}:a,{future:o}=Q.useContext(vl),{matches:c}=Q.useContext(bl),{pathname:l}=Sc(),m=JSON.stringify(Lf(c,o.v7_relativeSplatPath));return Q.useMemo(()=>_f(i,JSON.parse(m),l,r==="path"),[i,m,l,r])}function Kg(i,a){return Qg(i,a)}function Qg(i,a,r,o){jc()||ha(!1);let{navigator:c}=Q.useContext(vl),{matches:l}=Q.useContext(bl),m=l[l.length-1],p=m?m.params:{};m&&m.pathname;let g=m?m.pathnameBase:"/";m&&m.route;let v=Sc(),j;if(a){var A;let I=typeof a=="string"?wc(a):a;g==="/"||(A=I.pathname)!=null&&A.startsWith(g)||ha(!1),j=I}else j=v;let M=j.pathname||"/",b=M;if(g!=="/"){let I=g.replace(/^\//,"").split("/");b="/"+M.replace(/^\//,"").split("/").slice(I.length).join("/")}let U=Sg(i,{pathname:b}),E=n1(U&&U.map(I=>Object.assign({},I,{params:Object.assign({},p,I.params),pathname:xl([g,c.encodeLocation?c.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?g:xl([g,c.encodeLocation?c.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),l,r,o);return a&&E?Q.createElement(Jd.Provider,{value:{location:Hc({pathname:"/",search:"",hash:"",state:null,key:"default"},j),navigationType:ml.Pop}},E):E}function Xg(){let i=s1(),a=Hg(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),r=i instanceof Error?i.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},a),r?Q.createElement("pre",{style:c},r):null,null)}const Zg=Q.createElement(Xg,null);class e1 extends Q.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,r){return r.location!==a.location||r.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:r.error,location:r.location,revalidation:a.revalidation||r.revalidation}}componentDidCatch(a,r){console.error("React Router caught the following error during render",a,r)}render(){return this.state.error!==void 0?Q.createElement(bl.Provider,{value:this.props.routeContext},Q.createElement(_m.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function t1(i){let{routeContext:a,match:r,children:o}=i,c=Q.useContext(If);return c&&c.static&&c.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=r.route.id),Q.createElement(bl.Provider,{value:a},o)}function n1(i,a,r,o){var c;if(a===void 0&&(a=[]),r===void 0&&(r=null),o===void 0&&(o=null),i==null){var l;if(!r)return null;if(r.errors)i=r.matches;else if((l=o)!=null&&l.v7_partialHydration&&a.length===0&&!r.initialized&&r.matches.length>0)i=r.matches;else return null}let m=i,p=(c=r)==null?void 0:c.errors;if(p!=null){let j=m.findIndex(A=>A.route.id&&p?.[A.route.id]!==void 0);j>=0||ha(!1),m=m.slice(0,Math.min(m.length,j+1))}let g=!1,v=-1;if(r&&o&&o.v7_partialHydration)for(let j=0;j<m.length;j++){let A=m[j];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(v=j),A.route.id){let{loaderData:M,errors:b}=r,U=A.route.loader&&M[A.route.id]===void 0&&(!b||b[A.route.id]===void 0);if(A.route.lazy||U){g=!0,v>=0?m=m.slice(0,v+1):m=[m[0]];break}}}return m.reduceRight((j,A,M)=>{let b,U=!1,E=null,I=null;r&&(b=p&&A.route.id?p[A.route.id]:void 0,E=A.route.errorElement||Zg,g&&(v<0&&M===0?(l1("route-fallback"),U=!0,I=null):v===M&&(U=!0,I=A.route.hydrateFallbackElement||null)));let P=a.concat(m.slice(0,M+1)),W=()=>{let X;return b?X=E:U?X=I:A.route.Component?X=Q.createElement(A.route.Component,null):A.route.element?X=A.route.element:X=j,Q.createElement(t1,{match:A,routeContext:{outlet:j,matches:P,isDataRoute:r!=null},children:X})};return r&&(A.route.ErrorBoundary||A.route.errorElement||M===0)?Q.createElement(e1,{location:r.location,revalidation:r.revalidation,component:E,error:b,children:W(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):W()},null)}var Mm=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(Mm||{}),Dm=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(Dm||{});function r1(i){let a=Q.useContext(If);return a||ha(!1),a}function a1(i){let a=Q.useContext(Yg);return a||ha(!1),a}function i1(i){let a=Q.useContext(bl);return a||ha(!1),a}function Fm(i){let a=i1(),r=a.matches[a.matches.length-1];return r.route.id||ha(!1),r.route.id}function s1(){var i;let a=Q.useContext(_m),r=a1(),o=Fm();return a!==void 0?a:(i=r.errors)==null?void 0:i[o]}function o1(){let{router:i}=r1(Mm.UseNavigateStable),a=Fm(Dm.UseNavigateStable),r=Q.useRef(!1);return Im(()=>{r.current=!0}),Q.useCallback(function(c,l){l===void 0&&(l={}),r.current&&(typeof c=="number"?i.navigate(c):i.navigate(c,Hc({fromRouteId:a},l)))},[i,a])}const Zh={};function l1(i,a,r){Zh[i]||(Zh[i]=!0)}function c1(i,a){i?.v7_startTransition,i?.v7_relativeSplatPath}function ep(i){let{to:a,replace:r,state:o,relative:c}=i;jc()||ha(!1);let{future:l,static:m}=Q.useContext(vl),{matches:p}=Q.useContext(bl),{pathname:g}=Sc(),v=fo(),j=_f(a,Lf(p,l.v7_relativeSplatPath),g,c==="path"),A=JSON.stringify(j);return Q.useEffect(()=>v(JSON.parse(A),{replace:r,state:o,relative:c}),[v,A,c,r,o]),null}function Eo(i){ha(!1)}function d1(i){let{basename:a="/",children:r=null,location:o,navigationType:c=ml.Pop,navigator:l,static:m=!1,future:p}=i;jc()&&ha(!1);let g=a.replace(/^\/*/,"/"),v=Q.useMemo(()=>({basename:g,navigator:l,static:m,future:Hc({v7_relativeSplatPath:!1},p)}),[g,p,l,m]);typeof o=="string"&&(o=wc(o));let{pathname:j="/",search:A="",hash:M="",state:b=null,key:U="default"}=o,E=Q.useMemo(()=>{let I=Pf(j,g);return I==null?null:{location:{pathname:I,search:A,hash:M,state:b,key:U},navigationType:c}},[g,j,A,M,b,U,c]);return E==null?null:Q.createElement(vl.Provider,{value:v},Q.createElement(Jd.Provider,{children:r,value:E}))}function u1(i){let{children:a,location:r}=i;return Kg(uf(a),r)}new Promise(()=>{});function uf(i,a){a===void 0&&(a=[]);let r=[];return Q.Children.forEach(i,(o,c)=>{if(!Q.isValidElement(o))return;let l=[...a,c];if(o.type===Q.Fragment){r.push.apply(r,uf(o.props.children,l));return}o.type!==Eo&&ha(!1),!o.props.index||!o.props.children||ha(!1);let m={id:o.props.id||l.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(m.children=uf(o.props.children,l)),r.push(m)}),r}function ff(){return ff=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},ff.apply(this,arguments)}function f1(i,a){if(i==null)return{};var r={},o=Object.keys(i),c,l;for(l=0;l<o.length;l++)c=o[l],!(a.indexOf(c)>=0)&&(r[c]=i[c]);return r}function h1(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function p1(i,a){return i.button===0&&(!a||a==="_self")&&!h1(i)}function hf(i){return i===void 0&&(i=""),new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((a,r)=>{let o=i[r];return a.concat(Array.isArray(o)?o.map(c=>[r,c]):[[r,o]])},[]))}function m1(i,a){let r=hf(i);return a&&a.forEach((o,c)=>{r.has(c)||a.getAll(c).forEach(l=>{r.append(c,l)})}),r}const g1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],x1="6";try{window.__reactRouterVersion=x1}catch{}const y1="startTransition",tp=hg[y1];function v1(i){let{basename:a,children:r,future:o,window:c}=i,l=Q.useRef();l.current==null&&(l.current=bg({window:c,v5Compat:!0}));let m=l.current,[p,g]=Q.useState({action:m.action,location:m.location}),{v7_startTransition:v}=o||{},j=Q.useCallback(A=>{v&&tp?tp(()=>g(A)):g(A)},[g,v]);return Q.useLayoutEffect(()=>m.listen(j),[m,j]),Q.useEffect(()=>c1(o),[o]),Q.createElement(d1,{basename:a,children:r,location:p.location,navigationType:p.action,navigator:m,future:o})}const b1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gc=Q.forwardRef(function(a,r){let{onClick:o,relative:c,reloadDocument:l,replace:m,state:p,target:g,to:v,preventScrollReset:j,viewTransition:A}=a,M=f1(a,g1),{basename:b}=Q.useContext(vl),U,E=!1;if(typeof v=="string"&&w1.test(v)&&(U=v,b1))try{let X=new URL(window.location.href),H=v.startsWith("//")?new URL(X.protocol+v):new URL(v),fe=Pf(H.pathname,b);H.origin===X.origin&&fe!=null?v=fe+H.search+H.hash:E=!0}catch{}let I=Gg(v,{relative:c}),P=j1(v,{replace:m,state:p,target:g,preventScrollReset:j,relative:c,viewTransition:A});function W(X){o&&o(X),X.defaultPrevented||P(X)}return Q.createElement("a",ff({},M,{href:U||I,onClick:E||l?o:W,ref:r,target:g}))});var np;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(np||(np={}));var rp;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(rp||(rp={}));function j1(i,a){let{target:r,replace:o,state:c,preventScrollReset:l,relative:m,viewTransition:p}=a===void 0?{}:a,g=fo(),v=Sc(),j=Em(i,{relative:m});return Q.useCallback(A=>{if(p1(A,r)){A.preventDefault();let M=o!==void 0?o:$d(v)===$d(j);g(i,{replace:M,state:c,preventScrollReset:l,relative:m,viewTransition:p})}},[v,g,j,o,c,r,i,l,m,p])}function Tm(i){let a=Q.useRef(hf(i)),r=Q.useRef(!1),o=Sc(),c=Q.useMemo(()=>m1(o.search,r.current?null:a.current),[o.search]),l=fo(),m=Q.useCallback((p,g)=>{const v=hf(typeof p=="function"?p(c):p);r.current=!0,l("?"+v,g)},[l,c]);return[c,m]}function Wd({isOpen:i,message:a,type:r="success",onClose:o,title:c}){if(!i||!a)return null;const l=r==="success"?"success":"error",m=()=>{switch(l){case"success":return"fa-check-circle";case"error":return"fa-exclamation-circle";default:return"fa-exclamation-circle"}};return t.jsx("div",{className:"alert-modal-overlay",onClick:p=>{p.stopPropagation()},children:t.jsxs("div",{className:`alert-modal alert-modal--${l}`,onClick:p=>p.stopPropagation(),children:[t.jsxs("div",{className:"alert-modal-content",children:[t.jsxs("div",{className:"alert-modal-header",children:[t.jsx("div",{className:"alert-modal-icon",children:t.jsx("i",{className:`fas ${m()}`})}),c&&t.jsx("h3",{className:"alert-modal-title",children:c})]}),t.jsx("div",{className:"alert-modal-message",children:a})]}),t.jsx("div",{className:"alert-modal-divider"}),t.jsx("div",{className:"alert-modal-actions",children:t.jsx("button",{className:"primary-btn",onClick:o,children:"OK"})})]})})}function $l({message:i,type:a="success",onClose:r,duration:o=3e3}){const[c,l]=Q.useState(!1),[m,p]=Q.useState(i),[g,v]=Q.useState(a),j=Q.useRef(null),A=Q.useRef(null);if(Q.useEffect(()=>{i&&(j.current&&clearTimeout(j.current),A.current&&clearTimeout(A.current),p(i),v(a),l(!1))},[i,a]),Q.useEffect(()=>(j.current&&clearTimeout(j.current),A.current&&clearTimeout(A.current),m&&!c&&o>0&&(j.current=setTimeout(()=>{l(!0),A.current=setTimeout(()=>{r&&r(),p(null),l(!1)},350)},o)),()=>{j.current&&clearTimeout(j.current),A.current&&clearTimeout(A.current)}),[m,o,r,c]),!m)return null;const M=g==="success"?"success":"error";return t.jsx("div",{className:`notie notie--${M} ${c?"notie--exiting":""}`,children:t.jsx("div",{className:"notie-content",children:m})})}const ap={totalMembers:312,collectedMonth:12450,collectedYear:220800,outstanding:18400,overdueMembers:27,expectedAnnual:249600},ip=[{member:"Fatima Hussain",period:"Oct 2025",amount:"$50",method:"PayMe",status:"Paid",date:"02 Oct  09:11"},{member:"Ahmed Al-Rashid",period:"Oct 2025",amount:"$50",method:"FPS",status:"Paid",date:"05 Oct  10:22"},{member:"Aisha Malik",period:"Sep 2025",amount:"$100",method:"Card",status:"Unpaid",date:"30 Sep  12:44"},{member:"Omar Rahman",period:"Sep 2025",amount:"$100",method:"PayMe",status:"Overdue",date:"20 Sep  14:10"}],S1=[{id:"HK1001",name:"Shan Yeager",email:"0741sanjai@gmail.com",phone:"+852 9000 1234",status:"Active",balance:"$250 Outstanding",nextDue:"20 Nov 2025",lastPayment:"15 Oct 2025"},{id:"HK1021",name:"Ahmed Al-Rashid",email:"ahmed.rashid@hk.org",phone:"+852 9123 4567",status:"Active",balance:"$150 Outstanding",nextDue:"05 Nov 2025",lastPayment:"05 Oct 2025"},{id:"HK1088",name:"Fatima Hussain",email:"fatima.hussain@hk.org",phone:"+852 6789 1234",status:"Active",balance:"$0",nextDue:"05 Nov 2025",lastPayment:"02 Oct 2025"},{id:"HK1104",name:"Omar Rahman",email:"omar.rahman@hk.org",phone:"+852 9555 2011",status:"Inactive",balance:"$250 Overdue",nextDue:"20 Sep 2025",lastPayment:"15 Jul 2025"},{id:"HK1112",name:"Aisha Malik",email:"aisha.malik@hk.org",phone:"+852 9988 7766",status:"Active",balance:"$100 Unpaid",nextDue:"30 Sep 2025",lastPayment:"05 Aug 2025"},{id:"HK1125",name:"Yusuf Ibrahim",email:"yusuf.ibrahim@hk.org",phone:"+852 9234 5678",status:"Active",balance:"$50 Outstanding",nextDue:"10 Nov 2025",lastPayment:"10 Oct 2025"},{id:"HK1136",name:"Mariam Abdullah",email:"mariam.abdullah@hk.org",phone:"+852 9345 6789",status:"Active",balance:"$0",nextDue:"15 Nov 2025",lastPayment:"15 Oct 2025"},{id:"HK1147",name:"Hassan Al-Farsi",email:"hassan.farsi@hk.org",phone:"+852 9456 7890",status:"Active",balance:"$0",nextDue:"20 Nov 2025",lastPayment:"20 Oct 2025"},{id:"HK1158",name:"Zainab Mustafa",email:"zainab.mustafa@hk.org",phone:"+852 9567 8901",status:"Inactive",balance:"$200 Overdue",nextDue:"01 Oct 2025",lastPayment:"01 Aug 2025"}],N1=[{id:1,name:"Ibrahim Khan",role:"Owner",status:"Active"},{id:2,name:"Yasmin Ahmed",role:"Finance Admin",status:"Active"},{id:3,name:"Khalid Hassan",role:"Viewer",status:"Pending"}],k1=[{id:"INV-2025-095",memberId:"HK1001",memberName:"Shan Yeager",period:"Nov 2025 Monthly",amount:"$50",status:"Unpaid",due:"20 Nov 2025",method:"-",reference:"-"},{id:"INV-2025-094",memberId:"HK1001",memberName:"Shan Yeager",period:"Oct 2025 Monthly",amount:"$50",status:"Overdue",due:"20 Oct 2025",method:"-",reference:"-"},{id:"INV-2025-093",memberId:"HK1001",memberName:"Shan Yeager",period:"Sep 2025 Eid 2",amount:"$100",status:"Overdue",due:"30 Sep 2025",method:"-",reference:"-"},{id:"INV-2025-092",memberId:"HK1001",memberName:"Shan Yeager",period:"Sep 2025 Monthly",amount:"$50",status:"Overdue",due:"20 Sep 2025",method:"-",reference:"-"},{id:"INV-2025-091",memberId:"HK1021",memberName:"Ahmed Al-Rashid",period:"Oct 2025",amount:"$50",status:"Paid",due:"05 Oct 2025",method:"FPS",reference:"FP89231"},{id:"INV-2025-072",memberId:"HK1112",memberName:"Aisha Malik",period:"Sep 2025 (Eid)",amount:"$100",status:"Unpaid",due:"30 Sep 2025",method:"PayMe",reference:"PM22011"},{id:"INV-2025-051",memberId:"HK1021",memberName:"Ahmed Al-Rashid",period:"Aug 2025",amount:"$50",status:"Paid",due:"05 Aug 2025",method:"Bank Transfer",reference:"BT99127"}],sp=[{date:"05 Oct 2025",amount:"$50",method:"FPS",reference:"FP89231"},{date:"05 Sep 2025",amount:"$50",method:"PayMe",reference:"PM22110"},{date:"02 Apr 2025",amount:"$100",method:"Bank Transfer",reference:"BT44881"}],op=[{channel:"Email",message:"Upcoming due reminder",status:"Delivered",date:"02 Oct 2025"},{channel:"WhatsApp",message:"Overdue alert",status:"Pending",date:"01 Oct 2025"}],zu=[{label:"3 days before due date",channels:["Email","WhatsApp"]},{label:"On due date",channels:["Email","WhatsApp"]},{label:"5 days after due date",channels:["Email"]}],lp=[{name:"Direct Bank Transfer",visible:!0,details:["HSBC Hong Kong","123-456789-001","Subscription Manager HK"]},{name:"FPS",visible:!0,details:["FPS ID 1234567"]},{name:"Alipay",visible:!0,details:["Upload QR placeholder"]},{name:"PayMe",visible:!0,details:["Upload QR placeholder"]},{name:"Credit/Debit Cards",visible:!0,details:["Gateway: Stripe"]}];function A1(i={}){const{nonce:a,onScriptLoadSuccess:r,onScriptLoadError:o}=i,[c,l]=Q.useState(!1),m=Q.useRef(r);m.current=r;const p=Q.useRef(o);return p.current=o,Q.useEffect(()=>{const g=document.createElement("script");return g.src="https://accounts.google.com/gsi/client",g.async=!0,g.defer=!0,g.nonce=a,g.onload=()=>{var v;l(!0),(v=m.current)===null||v===void 0||v.call(m)},g.onerror=()=>{var v;l(!1),(v=p.current)===null||v===void 0||v.call(p)},document.body.appendChild(g),()=>{document.body.removeChild(g)}},[a]),c}const C1=Q.createContext(null);function P1({clientId:i,nonce:a,onScriptLoadSuccess:r,onScriptLoadError:o,children:c}){const l=A1({nonce:a,onScriptLoadSuccess:r,onScriptLoadError:o}),m=Q.useMemo(()=>({clientId:i,scriptLoadedSuccessfully:l}),[i,l]);return Af.createElement(C1.Provider,{value:m},c)}function L1(){const[i,a]=Q.useState(null),[r,o]=Q.useState(null),[c,l]=Q.useState({email:"",password:""}),[m,p]=Q.useState(!1),[g,v]=Q.useState({email:"",password:""}),[j,A]=Q.useState(null),[M,b]=Q.useState("error"),U=fo();Q.useEffect(()=>{sessionStorage.getItem("logoutReason")==="inactivity"&&(sessionStorage.removeItem("logoutReason"),a({type:"error",text:"Session expired due to inactivity. Please login again."}))},[]),Q.useEffect(()=>(document.body.classList.add("login-page-body"),()=>{document.body.classList.remove("login-page-body")}),[]);const E=X=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(X),I=()=>{const X={email:"",password:""};return c.email.trim()?E(c.email.trim())?c.password?(v(X),!0):(X.password="Password is required",v(X),A("Password is required"),b("error"),!1):(X.email="Please enter a valid email address",v(X),A("Please enter a valid email address"),b("error"),!1):(X.email="Email is required",v(X),A("Email is required"),b("error"),!1)},P=!1,W=async X=>{{if(r!==null||!I())return;o(X),a(null),v({email:"",password:""}),A(null);try{const fe=await fetch("http://localhost:4000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c.email.trim(),password:c.password,role:X})});let he;try{he=await fe.json()}catch(Ee){console.error("JSON parse error:",Ee),A("Invalid response from server. Please try again."),b("error"),o(null);return}if(!fe.ok||!he.success){he.locked?A(he.message||"Account temporarily locked due to multiple failed login attempts. Please try again later."):A(he.message||"Invalid email or password. Please check your credentials and try again."),b("error"),o(null);return}sessionStorage.setItem("authToken",he.token),he.role==="Admin"?(sessionStorage.setItem("adminEmail",he.email),sessionStorage.setItem("adminName",he.name),he.adminId&&sessionStorage.setItem("adminId",he.adminId),he.adminRole&&sessionStorage.setItem("adminRole",he.adminRole),o(null),U("/admin",{replace:!0,state:{role:"Admin",token:he.token,email:he.email,name:he.name,adminId:he.adminId,adminRole:he.adminRole}})):(sessionStorage.setItem("memberEmail",he.email),sessionStorage.setItem("memberName",he.name),sessionStorage.setItem("memberId",he.memberId),o(null),U("/member",{replace:!0,state:{role:"Member",token:he.token,email:he.email,name:he.name,memberId:he.memberId,phone:he.phone}}))}catch(H){console.error("Login error:",H),A("Unable to connect. Please check your connection and try again."),b("error"),o(null)}}};return t.jsx(t.Fragment,{children:t.jsx("main",{className:"login-main",children:t.jsxs("div",{className:"login-shell",children:[t.jsxs("aside",{className:"login-menu",children:[t.jsx("p",{className:"eyebrow light",children:"Welcome"}),t.jsx("h2",{children:"Subscription Manager HK"}),t.jsx("p",{children:"Streamlined portal for Hong Kong membership dues. Track monthly payments and automations from one place."}),t.jsxs("ul",{children:[t.jsx("li",{children:"Supports FPS, PayMe, bank transfers, cards"}),t.jsx("li",{children:"Automated reminders via email and WhatsApp"}),t.jsx("li",{children:"Clear dashboards for admins and members"})]})]}),t.jsxs("div",{className:"login-form-card",children:[t.jsx("div",{className:"login-form-card__header",children:t.jsxs("h1",{children:[t.jsx("i",{className:"fas fa-sign-in-alt login-title-icon"}),"Sign in"]})}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-envelope login-icon"}),"Email ",t.jsx("span",{className:"login-required",children:"*"})]}),t.jsx("input",{type:"text",inputMode:"email",value:c.email,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true",title:"",onInvalid:X=>X.preventDefault(),onChange:X=>{l({...c,email:X.target.value}),g.email&&v({...g,email:""})},placeholder:"Enter your email address",className:`mono-input ${g.email?"input-error":""}`,disabled:r!==null})]}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock login-icon"}),"Password ",t.jsx("span",{className:"login-required",children:"*"})]}),t.jsxs("div",{className:"login-input-wrapper",children:[t.jsx("input",{type:m?"text":"password",value:c.password,autoComplete:"new-password",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true",title:"",onInvalid:X=>X.preventDefault(),onChange:X=>{l({...c,password:X.target.value}),g.password&&v({...g,password:""})},placeholder:"Enter your password",className:`mono-input login-input--with-icon ${g.password?"input-error":""}`,disabled:r!==null}),t.jsx("button",{type:"button",onClick:()=>p(!m),className:"login-password-toggle","aria-label":m?"Hide password":"Show password",disabled:r!==null,children:m?t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),t.jsx("div",{className:"login-forgot-link",children:t.jsx(Gc,{to:"/forgot-password",onClick:X=>{r!==null&&X.preventDefault()},children:"Forgot Password?"})})]}),t.jsxs("div",{className:"login-hints",children:[t.jsxs("p",{className:"login-hints-title",children:[t.jsx("i",{className:"fas fa-info-circle login-icon"}),"Demo Credentials"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Admin:"})," admin2002@gmail.com / #Admin2204"]}),P]}),t.jsxs("div",{className:"login-buttons",children:[t.jsx("button",{type:"button",className:`btn-admin login-btn-wrapper ${r!==null?"login-btn--loading":""}`,onClick:()=>W("admin"),disabled:r!==null,children:r==="admin"?t.jsxs("span",{className:"login-btn-spinner",children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),t.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Authorising"]}):"Login"}),P]}),P,t.jsx(Wd,{isOpen:!!i,message:i?.text,type:i?.type||"error",onClose:()=>a(null)}),t.jsx($l,{message:j,type:M,onClose:()=>A(null),duration:3e3})]})]})})})}function Jc({showCTA:i=!0,showLogout:a=!1,onLogout:r,showMobileMenu:o=!1,isMobileMenuOpen:c=!1,onMobileMenuToggle:l,isSticky:m=!1}){return t.jsxs("header",{className:`site-header ${m?"site-header--sticky":""}`,children:[o&&t.jsx("button",{className:"mobile-menu-toggle",onClick:p=>{p.stopPropagation(),l&&l()},"aria-label":"Toggle menu",type:"button",children:t.jsxs("span",{className:`hamburger ${c?"active":""}`,children:[t.jsx("span",{}),t.jsx("span",{}),t.jsx("span",{})]})}),t.jsxs("div",{className:"brand",children:[t.jsx("span",{className:"logo-mark",children:"SM"}),t.jsxs("div",{children:[t.jsx("p",{className:"logo-title",children:"Subscription Manager HK"}),t.jsx("p",{className:"logo-subtitle",children:"Recurring payments for Hong Kong memberships"})]})]}),i&&t.jsx(Gc,{className:"primary-btn",to:"/login",children:"Launch Demo"}),a&&t.jsx("button",{onClick:r,className:"ghost-btn",children:"Logout"})]})}function Kc(){return t.jsxs("footer",{className:"site-footer",children:[t.jsx("p",{children:" 2025 Subscription Manager HK  Built for recurring memberships in Hong Kong."}),t.jsx("p",{})]})}const hi={Paid:"badge badge-paid",Unpaid:"badge badge-unpaid",Overdue:"badge badge-overdue","Due Soon":"badge badge-unpaid","Pending Verification":"badge badge-pending",Active:"badge badge-active",Inactive:"badge badge-inactive",Delivered:"badge badge-paid",Pending:"badge badge-pending",Completed:"badge badge-paid",Rejected:"badge badge-overdue"};function fi({columns:i,rows:a}){const[r,o]=Q.useState(!1),[c,l]=Q.useState(null),[m,p]=Q.useState({column:null,direction:"asc"});Q.useEffect(()=>{const I=()=>{o(window.innerWidth<=768)};return I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),Q.useEffect(()=>{const I=P=>{P.key==="Escape"&&c!==null&&l(null)};return c!==null?(document.addEventListener("keydown",I),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",I),document.body.style.overflow=""}},[c]);const g=(I,P)=>{const W=["Name","Member","User","Donor Name","Source"];for(const X of W)if(P.includes(X)){const H=I[X];if(H&&H!=="-"&&H!=="N/A"){if(typeof H=="object"&&H!==null&&H.render)continue;return H}}return null},v=(I,P)=>{if(!P.includes("Status"))return{status:null,borderClass:""};const W=I.Status;let X=null;if(typeof W=="object"&&W!==null&&W.render){const he=W.render();typeof he=="string"?X=he:he?.props?.children&&(X=he.props.children)}else W&&(X=W);if(!X||X==="-"||X==="N/A")return{status:null,borderClass:""};const H=X.toLowerCase();let fe="mobile-card-border-default";return H.includes("active")||H.includes("paid")||H.includes("completed")?fe="mobile-card-border-success":H.includes("pending")?fe="mobile-card-border-warning":(H.includes("inactive")||H.includes("overdue")||H.includes("rejected"))&&(fe="mobile-card-border-danger"),{status:X,borderClass:fe,statusValue:W}},j=(I,P)=>{const W=["Balance","Amount"];for(const X of W)if(P.includes(X)){const H=I[X];if(H&&H!=="-"&&H!=="N/A"&&H!=="$0"){if(typeof H=="object"&&H!==null&&H.render)continue;return{label:X,value:H}}}return null},A=I=>{const P=["Amount","Balance","Outstanding","Total","Collected","Expected","Avg per Member","Transactions","Donation","Donations","Invoice #"];return I==="Status"||I==="Actions"?"center":P.includes(I)?"right":"left"},M=I=>{if(I==null)return"";if(typeof I=="number")return I;if(typeof I=="string"){const P=parseFloat(I.replace(/[^0-9.-]/g,"")||"NaN");return isNaN(P)?I.toLowerCase():P}return I},b=I=>{p(P=>P.column===I?{column:I,direction:P.direction==="asc"?"desc":"asc"}:{column:I,direction:"asc"})},U=Q.useMemo(()=>{if(!m.column)return a;const I=m.column,P=m.direction==="asc"?1:-1;return[...a].sort((W,X)=>{const H=W[I],fe=X[I];if(typeof H=="object"&&H!==null&&H.render||typeof fe=="object"&&fe!==null&&fe.render)return 0;const he=M(H),Ee=M(fe);return he<Ee?-1*P:he>Ee?1*P:0})},[a,m]),E=(I,P,W,X)=>{const H=g(I,W),fe=j(I,W);return W.map(he=>{if(["Name","Member","User","Donor Name","Source"].includes(he)&&H)return null;const ee=I[he];let xe;if(typeof ee=="object"&&ee!==null&&ee.render?xe=ee.render():xe=typeof ee=="string"&&hi[ee]&&he==="Status"?t.jsx("span",{className:hi[ee],children:ee}):ee,!xe&&xe!==0&&xe!=="$0"||fe&&he===fe.label)return null;if(he==="Actions"){const le=I[he];if(typeof le=="object"&&le!==null&&le.render)return t.jsxs("div",{className:"mobile-card-modal-row mobile-card-modal-row-actions",onClick:ie=>{(ie.target.tagName==="BUTTON"||ie.target.closest("button"))&&setTimeout(()=>{X()},150)},children:[t.jsx("div",{className:"mobile-card-modal-label",children:he}),t.jsx("div",{className:"mobile-card-modal-value",children:le.render()})]},`${he}-${P}`)}const $=(le=>({Email:"fa-envelope",WhatsApp:"fa-phone",Phone:"fa-phone",Balance:"fa-wallet",Amount:"fa-dollar-sign",Date:"fa-calendar","Due Date":"fa-calendar-alt",Period:"fa-calendar-week",Method:"fa-credit-card",Reference:"fa-hashtag",Status:"fa-info-circle",Type:"fa-tag",Details:"fa-file-alt",ID:"fa-id-card","Invoice #":"fa-file-invoice"})[le]||null)(he);return t.jsxs("div",{className:"mobile-card-modal-row",children:[t.jsxs("div",{className:"mobile-card-modal-label",children:[$&&t.jsx("i",{className:`fas ${$}`,style:{marginRight:"6px",color:"#5a31ea",fontSize:"0.75rem"}}),he]}),t.jsx("div",{className:"mobile-card-modal-value",children:xe})]},`${he}-${P}`)})};if(r){const I=c!==null?U[c]:null;return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mobile-table-cards",children:U.map((P,W)=>{const X=g(P,i)||"View Details",H=v(P,i),fe=j(P,i);return t.jsx("div",{className:`mobile-table-card ${H.borderClass}`,style:P._rowStyle||{},onClick:()=>l(W),children:t.jsx("div",{className:"mobile-table-card-header",children:t.jsxs("div",{className:"mobile-table-card-header-content",children:[t.jsxs("div",{className:"mobile-table-card-title-section",children:[t.jsx("div",{className:"mobile-table-card-title",children:X}),fe&&t.jsxs("div",{className:"mobile-table-card-metric",children:[fe.label==="Balance"&&t.jsx("i",{className:"fas fa-wallet",style:{fontSize:"0.75rem",marginRight:"4px",color:"#666"}}),fe.label==="Amount"&&t.jsx("i",{className:"fas fa-dollar-sign",style:{fontSize:"0.75rem",marginRight:"4px",color:"#666"}}),t.jsx("span",{children:fe.value})]})]}),t.jsxs("div",{className:"mobile-table-card-header-right",children:[H.status&&t.jsx("div",{className:"mobile-table-card-status",children:typeof H.statusValue=="object"&&H.statusValue!==null&&H.statusValue.render?H.statusValue.render():t.jsx("span",{className:hi[H.status]||"badge",children:H.status})}),t.jsx("div",{className:"mobile-table-card-arrow",children:t.jsx("i",{className:"fa-solid fa-chevron-right"})})]})]})})},`mobile-row-${W}`)})}),c!==null&&I&&t.jsx("div",{className:"mobile-card-modal-overlay",onClick:()=>l(null),children:t.jsxs("div",{className:"mobile-card-modal",onClick:P=>P.stopPropagation(),children:[t.jsxs("div",{className:"mobile-card-modal-header",children:[t.jsxs("div",{className:"mobile-card-modal-title-section",children:[t.jsx("div",{className:"mobile-card-modal-title",children:g(I,i)||"Details"}),j(I,i)&&t.jsxs("div",{className:"mobile-card-modal-metric",children:[j(I,i).label==="Balance"&&t.jsx("i",{className:"fas fa-wallet",style:{fontSize:"0.75rem",marginRight:"4px",color:"#666"}}),j(I,i).label==="Amount"&&t.jsx("i",{className:"fas fa-dollar-sign",style:{fontSize:"0.75rem",marginRight:"4px",color:"#666"}}),t.jsx("span",{children:j(I,i).value})]})]}),t.jsx("button",{className:"mobile-card-modal-close",onClick:()=>l(null),"aria-label":"Close",children:t.jsx("i",{className:"fa-solid fa-times"})})]}),t.jsx("div",{className:"mobile-card-modal-content",children:E(I,c,i,()=>l(null))})]})})]})}return t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsx("tr",{children:i.map(I=>{const P=A(I),W=m.column===I,X=W?m.direction==="asc"?"":"":"";return t.jsx("th",{style:{textAlign:P,cursor:"pointer",whiteSpace:"nowrap"},onClick:()=>b(I),"aria-sort":W?m.direction==="asc"?"ascending":"descending":"none",children:t.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[t.jsx("span",{children:I}),t.jsx("span",{style:{fontSize:"0.7rem",opacity:.7},children:X})]})},I)})})}),t.jsx("tbody",{children:U.map((I,P)=>{let W=!1;const X=I.Status;if(X)if(typeof X=="object"&&X!==null&&X.render){const H=X.render();if(typeof H=="object"&&H?.props){const fe=H.props.className||"",he=H.props.children;W=fe.includes("badge-overdue")||fe.includes("badge-unpaid")||typeof he=="string"&&(he.toLowerCase().includes("overdue")||he.toLowerCase().includes("unpaid")||he.toLowerCase().includes("rejected"))}}else typeof X=="string"&&(W=X==="Overdue"||X==="Unpaid"||X==="Rejected"||hi[X]?.includes("badge-overdue")||hi[X]?.includes("badge-unpaid"));return t.jsx("tr",{style:{...I._rowStyle||{},background:W?"#fef2f2":void 0},children:i.map(H=>{const fe=I[H],he=A(H);if(typeof fe=="object"&&fe!==null&&fe.render){const ge=fe.render();return t.jsx("td",{"data-label":H,style:{textAlign:he,verticalAlign:"middle"},children:ge},`${H}-render-${P}`)}const Ee=typeof fe=="string"&&hi[fe]&&H==="Status";return t.jsx("td",{"data-label":H,style:{textAlign:he,verticalAlign:"middle"},children:Ee?t.jsx("span",{className:hi[fe],children:fe}):fe},`${H}-${P}`)})},`${I.id??P}-${P}`)})})]})}function dc({currentPage:i,totalPages:a,onPageChange:r,pageSize:o,onPageSizeChange:c,totalItems:l,pageSizeOptions:m=[5,10,20,50,100]}){if(a<=1&&o>=l)return null;const p=(i-1)*o+1,g=Math.min(i*o,l);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px",padding:"16px",borderTop:"1px solid #e0e0e0",background:"#f9fafb"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[t.jsxs("span",{style:{fontSize:"0.875rem",color:"#666"},children:["Showing ",p," to ",g," of ",l," items"]}),t.jsxs("label",{style:{fontSize:"0.875rem",color:"#666",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"},children:[t.jsx("span",{children:"Items per page:"}),t.jsx("select",{value:o,onChange:v=>{c(Number(v.target.value)),r(1)},style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",fontSize:"0.875rem",background:"#fff",cursor:"pointer",minWidth:"70px"},children:m.map(v=>t.jsx("option",{value:v,children:v},v))})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("button",{onClick:()=>r(1),disabled:i===1,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",background:i===1?"#f5f5f5":"#fff",cursor:i===1?"not-allowed":"pointer",fontSize:"0.875rem",color:i===1?"#999":"#333",opacity:i===1?.5:1},children:" First"}),t.jsx("button",{onClick:()=>r(i-1),disabled:i===1,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",background:i===1?"#f5f5f5":"#fff",cursor:i===1?"not-allowed":"pointer",fontSize:"0.875rem",color:i===1?"#999":"#333",opacity:i===1?.5:1},children:" Prev"}),t.jsxs("span",{style:{fontSize:"0.875rem",color:"#666",padding:"0 8px"},children:["Page ",i," of ",a]}),t.jsx("button",{onClick:()=>r(i+1),disabled:i===a,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",background:i===a?"#f5f5f5":"#fff",cursor:i===a?"not-allowed":"pointer",fontSize:"0.875rem",color:i===a?"#999":"#333",opacity:i===a?.5:1},children:"Next "}),t.jsx("button",{onClick:()=>r(a),disabled:i===a,style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",background:i===a?"#f5f5f5":"#fff",cursor:i===a?"not-allowed":"pointer",fontSize:"0.875rem",color:i===a?"#999":"#333",opacity:i===a?.5:1},children:"Last "})]})]})}function _1({text:i,children:a,position:r="top",delay:o=200}){const[c,l]=Q.useState(!1),[m,p]=Q.useState({top:0,left:0}),g=Q.useRef(null),v=Q.useRef(null),j=Q.useRef(null);Q.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]);const A=()=>{if(!v.current||!g.current)return;const U=v.current.getBoundingClientRect(),E=g.current.getBoundingClientRect(),I=8;let P=0,W=0;switch(r){case"top":P=U.top-E.height-I,W=U.left+U.width/2-E.width/2;break;case"bottom":P=U.bottom+I,W=U.left+U.width/2-E.width/2;break;case"left":P=U.top+U.height/2-E.height/2,W=U.left-E.width-I;break;case"right":P=U.top+U.height/2-E.height/2,W=U.right+I;break;default:P=U.top-E.height-I,W=U.left+U.width/2-E.width/2}const X=window.innerWidth,H=window.innerHeight;W<8&&(W=8),W+E.width>X-8&&(W=X-E.width-8),P<8&&(P=8),P+E.height>H-8&&(P=H-E.height-8),p({top:P,left:W})},M=()=>{j.current=setTimeout(()=>{l(!0),setTimeout(()=>{A()},10)},o)},b=()=>{j.current&&clearTimeout(j.current),l(!1)};return i?t.jsxs("span",{ref:v,className:"tooltip-trigger",onMouseEnter:M,onMouseLeave:b,style:{display:"inline-block",position:"relative"},children:[a,c&&t.jsxs("div",{ref:g,className:`tooltip tooltip--${r}`,style:{top:`${m.top}px`,left:`${m.left}px`},children:[t.jsx("div",{className:"tooltip-content",children:i}),t.jsx("div",{className:`tooltip-arrow tooltip-arrow--${r}`})]})]}):a}const Td=[{code:"HK",name:"Hong Kong",dialCode:"+852",flag:"",minLength:8,maxLength:8},{code:"CN",name:"China",dialCode:"+86",flag:"",minLength:11,maxLength:11},{code:"US",name:"United States",dialCode:"+1",flag:"",minLength:10,maxLength:10},{code:"GB",name:"United Kingdom",dialCode:"+44",flag:"",minLength:10,maxLength:10},{code:"IN",name:"India",dialCode:"+91",flag:"",minLength:10,maxLength:10},{code:"SG",name:"Singapore",dialCode:"+65",flag:"",minLength:8,maxLength:8},{code:"MY",name:"Malaysia",dialCode:"+60",flag:"",minLength:9,maxLength:10},{code:"TH",name:"Thailand",dialCode:"+66",flag:"",minLength:9,maxLength:9},{code:"PH",name:"Philippines",dialCode:"+63",flag:"",minLength:10,maxLength:10},{code:"ID",name:"Indonesia",dialCode:"+62",flag:"",minLength:9,maxLength:12},{code:"AU",name:"Australia",dialCode:"+61",flag:"",minLength:9,maxLength:9},{code:"NZ",name:"New Zealand",dialCode:"+64",flag:"",minLength:8,maxLength:10},{code:"JP",name:"Japan",dialCode:"+81",flag:"",minLength:10,maxLength:11},{code:"KR",name:"South Korea",dialCode:"+82",flag:"",minLength:9,maxLength:11},{code:"TW",name:"Taiwan",dialCode:"+886",flag:"",minLength:9,maxLength:9},{code:"VN",name:"Vietnam",dialCode:"+84",flag:"",minLength:9,maxLength:10},{code:"CA",name:"Canada",dialCode:"+1",flag:"",minLength:10,maxLength:10},{code:"DE",name:"Germany",dialCode:"+49",flag:"",minLength:10,maxLength:11},{code:"FR",name:"France",dialCode:"+33",flag:"",minLength:9,maxLength:9},{code:"IT",name:"Italy",dialCode:"+39",flag:"",minLength:9,maxLength:10},{code:"ES",name:"Spain",dialCode:"+34",flag:"",minLength:9,maxLength:9},{code:"NL",name:"Netherlands",dialCode:"+31",flag:"",minLength:9,maxLength:9},{code:"BE",name:"Belgium",dialCode:"+32",flag:"",minLength:9,maxLength:9},{code:"CH",name:"Switzerland",dialCode:"+41",flag:"",minLength:9,maxLength:9},{code:"AT",name:"Austria",dialCode:"+43",flag:"",minLength:10,maxLength:13},{code:"SE",name:"Sweden",dialCode:"+46",flag:"",minLength:9,maxLength:9},{code:"NO",name:"Norway",dialCode:"+47",flag:"",minLength:8,maxLength:8},{code:"DK",name:"Denmark",dialCode:"+45",flag:"",minLength:8,maxLength:8},{code:"FI",name:"Finland",dialCode:"+358",flag:"",minLength:9,maxLength:10},{code:"PL",name:"Poland",dialCode:"+48",flag:"",minLength:9,maxLength:9},{code:"BR",name:"Brazil",dialCode:"+55",flag:"",minLength:10,maxLength:11},{code:"MX",name:"Mexico",dialCode:"+52",flag:"",minLength:10,maxLength:10},{code:"AR",name:"Argentina",dialCode:"+54",flag:"",minLength:10,maxLength:10},{code:"ZA",name:"South Africa",dialCode:"+27",flag:"",minLength:9,maxLength:9},{code:"AE",name:"UAE",dialCode:"+971",flag:"",minLength:9,maxLength:9},{code:"SA",name:"Saudi Arabia",dialCode:"+966",flag:"",minLength:9,maxLength:9},{code:"IL",name:"Israel",dialCode:"+972",flag:"",minLength:9,maxLength:9},{code:"TR",name:"Turkey",dialCode:"+90",flag:"",minLength:10,maxLength:10},{code:"RU",name:"Russia",dialCode:"+7",flag:"",minLength:10,maxLength:10},{code:"EG",name:"Egypt",dialCode:"+20",flag:"",minLength:10,maxLength:10},{code:"NG",name:"Nigeria",dialCode:"+234",flag:"",minLength:10,maxLength:10},{code:"KE",name:"Kenya",dialCode:"+254",flag:"",minLength:9,maxLength:9}],cp=i=>{if(!i)return{country:Td[0],number:""};const a=i.replace(/[^\d+]/g,"");for(const r of Td)if(a.startsWith(r.dialCode)){const o=a.substring(r.dialCode.length);return{country:r,number:o}}return{country:Td[0],number:a.replace(/[^\d]/g,"")}},Kd=({value:i="",onChange:a,onBlur:r,required:o=!1,placeholder:c="Enter phone number",className:l="",style:m={},error:p=null,label:g=null,id:v=null,"aria-invalid":j=!1,onError:A=null})=>{const M=cp(i),[b,U]=Q.useState(M.country),[E,I]=Q.useState(M.number),[P,W]=Q.useState(!1),[X,H]=Q.useState(""),fe=Q.useRef(null),he=Q.useRef(null);Q.useEffect(()=>{const ie=cp(i);U(ie.country),I(ie.number)},[i]),Q.useEffect(()=>{const ie=we=>{fe.current&&!fe.current.contains(we.target)&&(W(!1),H(""))};return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[]);const Ee=Td.filter(ie=>{const we=X.toLowerCase().trim();return!!(!we||ie.name.toLowerCase().includes(we)||ie.dialCode.includes(X)||ie.code.toLowerCase().includes(we))}),ge=ie=>{U(ie),W(!1),H("");const we=E?`${ie.dialCode}${E}`:"";a?.({target:{value:we}}),setTimeout(()=>he.current?.focus(),0)},ee=ie=>{const _e=ie.target.value.replace(/\D/g,"");I(_e);const Ie=_e?`${b.dialCode}${_e}`:"";a?.({target:{value:Ie}})},xe=(ie=!0)=>E?E.replace(/\D/g,"").length<b.minLength?`Phone number must be at least ${b.minLength} digits for ${b.name}`:null:ie&&o?"Phone number is required":null,z=xe(!0),$=z||l&&l.includes("admin-phone-input-error"),le=ie=>{const we=xe(!1);we&&A&&A(we),r&&r(ie)};return t.jsxs("div",{className:"phone-input-container",children:[g&&t.jsx("div",{className:"phone-input-label-wrapper",children:typeof g=="string"?t.jsx("span",{className:"phone-input-label-text",children:g}):g}),t.jsxs("div",{className:"phone-input-wrapper",children:[t.jsxs("div",{className:"phone-input-country-selector",ref:fe,children:[t.jsxs("button",{type:"button",onClick:()=>W(!P),className:`phone-input-country-button ${$?"phone-input-country-button-error":""}`,children:[t.jsx("span",{className:`fi fi-${b.code.toLowerCase()} phone-input-country-flag`}),t.jsx("span",{className:"phone-input-country-code",children:b.dialCode}),t.jsx("i",{className:`fas fa-chevron-down phone-input-country-chevron ${P?"phone-input-country-chevron-open":""}`})]}),P&&t.jsxs("div",{className:"phone-input-country-dropdown",children:[t.jsx("div",{className:"phone-input-country-search",children:t.jsx("input",{type:"text",placeholder:"Search by name or code...",value:X,onChange:ie=>H(ie.target.value),className:"phone-input-country-search-input",autoFocus:!0})}),t.jsx("div",{className:"phone-input-country-list",children:Ee.length===0?t.jsx("div",{className:"phone-input-country-empty",children:"No countries found"}):Ee.map(ie=>t.jsxs("button",{type:"button",onClick:()=>ge(ie),className:`phone-input-country-item ${b.code===ie.code?"phone-input-country-item-selected":""}`,children:[t.jsx("span",{className:`fi fi-${ie.code.toLowerCase()} phone-input-country-item-flag`}),t.jsx("span",{className:"phone-input-country-item-name",children:ie.name}),t.jsx("span",{className:"phone-input-country-item-code",children:ie.dialCode})]},ie.code))})]})]}),t.jsx("input",{ref:he,id:v,type:"tel",inputMode:"numeric",required:o,value:E,onChange:ee,onBlur:le,placeholder:c,className:`phone-input-field ${l||""} ${$?"phone-input-field-error":""}`,"aria-invalid":j||!!z,onInvalid:ie=>ie.preventDefault()})]})]})},Rm=Q.createContext();function I1({children:i}){const[a,r]=Q.useState([]),[o,c]=Q.useState([]),[l,m]=Q.useState([]),[p,g]=Q.useState([]),[v,j]=Q.useState([]),[A,M]=Q.useState(!0),[b,U]=Q.useState(()=>{const se=localStorage.getItem("recentPayments");return se?JSON.parse(se):ip}),[E,I]=Q.useState(()=>{const se=localStorage.getItem("paymentHistory");return se?JSON.parse(se):sp}),[P,W]=Q.useState(()=>{const se=localStorage.getItem("communicationLog");return se?JSON.parse(se):op}),[X,H]=Q.useState([]),[fe,he]=Q.useState(lp),[Ee,ge]=Q.useState(()=>{const se=localStorage.getItem("metrics");return se?JSON.parse(se):ap}),[ee,xe]=Q.useState(()=>{try{const se=localStorage.getItem("reminderRules");return se?JSON.parse(se):zu}catch{return zu}}),[z,$]=Q.useState(!0),[le,ie]=Q.useState(()=>{const se=localStorage.getItem("reminderTemplates");return se?JSON.parse(se):{upcomingDue:"Hi {{member_name}}, friendly reminder your {{period}} subscription of ${{amount}} is due on {{due_date}}. You can pay via FPS, PayMe, or card. Thank you!",overdue:"Hi {{member_name}}, your {{period}} contribution of ${{amount}} is now overdue. Please settle via the member portal or reply once paid."}}),[we,_e]=Q.useState(()=>{const se=localStorage.getItem("organizationInfo");return se?JSON.parse(se):{name:"Subscription Manager HK",email:"support@subscriptionhk.org",phone:"+852 2800 1122",address:"123 Central Street, Hong Kong"}}),[Ie,pe]=Q.useState(()=>{try{const se=localStorage.getItem("userLocale");return se||navigator.language||navigator.userLanguage||"en-US"}catch(se){return console.error("Error getting user locale:",se),"en-US"}}),Pe=se=>{try{localStorage.setItem("userLocale",se),pe(se),window.dispatchEvent(new CustomEvent("localeChanged",{detail:{locale:se}}))}catch(Se){console.error("Error setting user locale:",Se)}},[ze,te]=Q.useState(null),C="http://localhost:4000",J=async()=>{try{const se=await fetch(`${C}/api/members`);if(!se.ok)throw new Error("Failed to fetch members");const Se=await se.json();r(Se),console.log(" Loaded",Se.length,"members from server")}catch(se){throw console.error("Error fetching members:",se),r([]),se}},Z=async()=>{try{const se=await fetch(`${C}/api/admins`);if(!se.ok)throw new Error("Failed to fetch admins");const Se=await se.json();c(Se),console.log(" Loaded",Se.length,"Admins from server")}catch(se){throw console.error("Error fetching Admins:",se),c([]),se}},de=async()=>{try{const se=await fetch(`${C}/api/invoices`);if(!se.ok)throw new Error("Failed to fetch invoices");const Se=await se.json();m(Se),console.log(" Loaded",Se.length,"invoices from MongoDB")}catch(se){throw console.error("Error fetching invoices:",se),m([]),se}},ce=async()=>{try{const se=await fetch(`${C}/api/payments`);if(!se.ok)throw new Error("Failed to fetch payments");const Se=await se.json();g(Se),I(Se),U(Se.slice(0,10)),console.log(" Loaded",Se.length,"payments from MongoDB")}catch(se){throw console.error("Error fetching payments:",se),g([]),I([]),U([]),se}},be=async()=>{try{const se=await fetch(`${C}/api/donations`);if(!se.ok)throw new Error("Failed to fetch donations");const Se=await se.json();j(Se),console.log(" Loaded",Se.length,"donations from MongoDB")}catch(se){console.error("Error fetching donations:",se),j([])}},Me=async()=>{try{const se=await fetch(`${C}/api/payment-methods`);if(!se.ok)throw new Error("Failed to fetch payment methods");const Se=await se.json();if(Se.length===0){console.log(" No payment methods in database, initializing defaults...");const rt=[{name:"Alipay",visible:!1,qrImageUrl:"",details:[]},{name:"PayMe",visible:!1,qrImageUrl:"",details:[]},{name:"FPS",visible:!0,details:["FPS ID 1234567"]},{name:"Direct Bank Transfer",visible:!0,details:["HSBC Hong Kong","123-456789-001","Subscription Manager HK"]},{name:"Credit/Debit Cards",visible:!0,details:["Gateway: Stripe"]}];for(const ht of rt)try{await fetch(`${C}/api/payment-methods`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ht)})}catch(He){console.error(`Error initializing payment method ${ht.name}:`,He)}he(rt),console.log(" Initialized default payment methods in database")}else he(Se),console.log(" Loaded",Se.length,"payment methods from MongoDB")}catch(se){throw console.error("Error fetching payment methods:",se),he([]),se}},Fe=async()=>{try{const se=await fetch(`${C}/api/reminders/logs`);if(!se.ok)throw new Error("Failed to fetch reminder logs");const Se=await se.json();H(Se),console.log(" Loaded",Se.length,"reminder logs from MongoDB")}catch(se){console.error("Error fetching reminder logs:",se),H([])}};Q.useEffect(()=>{(async()=>{try{const Se=Promise.allSettled([J(),Z(),de()]),rt=Promise.allSettled([ce(),be(),Me(),Fe()]);await Promise.allSettled([Se,rt]),M(!1)}catch(Se){console.error("Error fetching initial data:",Se),M(!1)}})()},[]),Q.useEffect(()=>{localStorage.setItem("recentPayments",JSON.stringify(b))},[b]),Q.useEffect(()=>{localStorage.setItem("paymentHistory",JSON.stringify(E))},[E]),Q.useEffect(()=>{localStorage.setItem("communicationLog",JSON.stringify(P))},[P]),Q.useEffect(()=>{localStorage.setItem("metrics",JSON.stringify(Ee))},[Ee]),Q.useEffect(()=>{localStorage.setItem("reminderRules",JSON.stringify(ee))},[ee]),Q.useEffect(()=>{localStorage.setItem("reminderTemplates",JSON.stringify(le))},[le]),Q.useEffect(()=>{localStorage.setItem("organizationInfo",JSON.stringify(we))},[we]),Q.useEffect(()=>{},[]);const We=async se=>{try{const Se=await fetch(`${C}/api/members`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(!Se.ok)throw new Error("Failed to add member");const rt=await Se.json();return r([...a,rt]),Xe({totalMembers:Ee.totalMembers+1}),console.log(" Member added to server:",rt),rt}catch(Se){throw console.error("Error adding member:",Se),Se}},De=async(se,Se)=>{try{const rt=await fetch(`${C}/api/members/${se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!rt.ok)throw new Error("Failed to update member");const ht=await rt.json();r(a.map(He=>He.id===se?ht:He)),console.log(" Member updated on server:",ht)}catch(rt){throw console.error("Error updating member:",rt),rt}},it=async se=>{try{if(!(await fetch(`${C}/api/members/${se}`,{method:"DELETE"})).ok)throw new Error("Failed to delete member");r(a.filter(rt=>rt.id!==se)),m(l.filter(rt=>rt.memberId!==se)),Xe({totalMembers:Ee.totalMembers-1}),console.log(" Member deleted from server:",se)}catch(Se){throw console.error("Error deleting member:",Se),Se}},ot=async se=>{try{const Se=await fetch(`${C}/api/invoices`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(!Se.ok)throw new Error("Failed to add invoice");const rt=await Se.json();return m([rt,...l]),console.log(" Invoice added to server:",rt),rt}catch(Se){throw console.error("Error adding invoice:",Se),Se}},pt=async(se,Se)=>{try{const rt=await fetch(`${C}/api/invoices/${se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!rt.ok)throw new Error("Failed to update invoice");const ht=await rt.json();if(m(l.map(He=>He.id===se?ht:He)),Se.status==="Paid"){const He=l.find(ct=>ct.id===se);if(He&&He.status!=="Paid"){const ct=parseFloat(He.amount.replace("$",""));Xe({collectedMonth:Ee.collectedMonth+ct,collectedYear:Ee.collectedYear+ct,outstanding:Ee.outstanding-ct})}}console.log(" Invoice updated on server:",ht)}catch(rt){throw console.error("Error updating invoice:",rt),rt}},V=async se=>{try{if(!(await fetch(`${C}/api/invoices/${se}`,{method:"DELETE"})).ok)throw new Error("Failed to delete invoice");m(l.filter(rt=>rt.id!==se)),console.log(" Invoice deleted from server:",se)}catch(Se){throw console.error("Error deleting invoice:",Se),Se}},et=async se=>{try{const Se={...se,date:se.date||new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})},rt=await fetch(`${C}/api/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!rt.ok){const ct=await rt.json().catch(()=>({}));throw new Error(ct.error||"Failed to save payment")}const ht=await rt.json();g([ht,...p]),U([ht,...b]),I([ht,...E]),se.invoiceId&&await pt(se.invoiceId,{status:"Paid",method:se.method,reference:se.reference,screenshot:se.screenshot||se.screenshotUrl,paidToAdmin:se.paidToAdmin,paidToAdminName:se.paidToAdminName});const He=parseFloat(se.amount.replace("$",""));return Xe({collectedMonth:Ee.collectedMonth+He,collectedYear:Ee.collectedYear+He,outstanding:Math.max(0,Ee.outstanding-He)}),console.log(" Payment saved to MongoDB:",ht),ht}catch(Se){console.error("Error adding payment:",Se);const rt={...se,date:se.date||new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})};throw U([rt,...b]),I([rt,...E]),Se}},Et=se=>{const Se={...se,date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Delivered"};return W([Se,...P]),Se},Ct=async(se,Se)=>{try{const rt=await fetch(`${C}/api/payment-methods/${se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!rt.ok)throw new Error("Failed to update payment method");const ht=await rt.json();return he(fe.map(He=>He.name===se?ht:He)),console.log(" Payment method updated in database:",ht),ht}catch(rt){throw console.error("Error updating payment method:",rt),he(fe.map(ht=>ht.name===se?{...ht,...Se}:ht)),rt}},Xe=se=>{ge({...Ee,...se})},qe={members:a,invoices:l,payments:p,donations:v,loading:A,fetchMembers:J,fetchAdmins:Z,fetchInvoices:de,fetchPayments:ce,fetchDonations:be,fetchPaymentMethods:Me,fetchReminderLogs:Fe,recentPayments:b,paymentHistory:E,communicationLog:P,reminderLogs:X,paymentMethods:fe,metrics:Ee,reminderRules:ee,automationEnabled:z,setAutomationEnabled:$,reminderTemplates:le,organizationInfo:we,admins:o,selectedMember:ze,setSelectedMember:te,addMember:We,updateMember:De,deleteMember:it,addInvoice:ot,updateInvoice:pt,deleteInvoice:V,addPayment:et,addDonation:async se=>{try{const Se=await fetch(`${C}/api/donations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(!Se.ok){const ht=await Se.json().catch(()=>({}));throw new Error(ht.error||"Failed to add donation")}const rt=await Se.json();return j([rt,...v]),console.log(" Donation added to server:",rt),rt}catch(Se){throw console.error("Error adding donation:",Se),Se}},deleteDonation:async se=>{try{const Se=await fetch(`${C}/api/donations/${se}`,{method:"DELETE"});if(!Se.ok){const rt=await Se.json().catch(()=>({}));throw new Error(rt.error||"Failed to delete donation")}j(v.filter(rt=>rt._id!==se)),console.log(" Donation deleted from server:",se)}catch(Se){throw console.error("Error deleting donation:",Se),Se}},addCommunication:Et,updatePaymentMethod:Ct,updateMetrics:Xe,updateReminderRule:(se,Se)=>{xe(ee.map(rt=>rt.label===se?{...rt,channels:Se}:rt))},updateReminderTemplate:(se,Se)=>{ie({...le,[se]:Se})},updateOrganizationInfo:se=>{_e({...we,...se})},userLocale:Ie,updateUserLocale:Pe,addAdminUser:async se=>{try{const Se=await fetch(`${C}/api/admins`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:se.name,email:se.email||"",role:se.role||"Viewer",status:se.status||"Active",password:se.password||""})});if(!Se.ok){const ht=await Se.json().catch(()=>({}));throw new Error(ht.message||"Failed to create admin")}const rt=await Se.json();return c([...o,rt]),await Z(),rt}catch(Se){throw console.error("Error adding admin:",Se),Se}},updateAdminUser:async(se,Se)=>{try{const rt=await fetch(`${C}/api/admins/${se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!rt.ok){const He=await rt.json().catch(()=>({}));throw new Error(He.message||"Failed to update admin")}const ht=await rt.json();return c(o.map(He=>He.id===se?ht:He)),await Z(),ht}catch(rt){throw console.error("Error updating admin:",rt),rt}},deleteAdminUser:async se=>{try{const Se=await fetch(`${C}/api/admins/${se}`,{method:"DELETE"});if(!Se.ok){const rt=await Se.json().catch(()=>({}));throw new Error(rt.message||"Failed to delete admin")}c(o.filter(rt=>rt.id!==se)),await Z()}catch(Se){throw console.error("Error deleting admin:",Se),Se}},resetAllData:()=>{localStorage.clear(),r(S1),c(N1),m(k1),U(ip),I(sp),W(op),he(lp),ge(ap),xe(zu),$(!0),localStorage.setItem("dataVersion","v2.0")}};return t.jsx(Rm.Provider,{value:qe,children:i})}function Qd(){const i=Q.useContext(Rm);if(!i)throw new Error("useApp must be used within AppProvider");return i}function Om(i=15){const a=fo(),r=Q.useRef(null),o=Q.useRef(Date.now()),c=()=>{o.current=Date.now(),r.current&&clearTimeout(r.current);const l=i*60*1e3;r.current=setTimeout(()=>{sessionStorage.clear(),sessionStorage.setItem("logoutReason","inactivity"),a("/login",{replace:!0})},l)};Q.useEffect(()=>{const l=["mousedown","mousemove","keypress","scroll","touchstart","click","keydown"],m=()=>{c()};return c(),l.forEach(p=>{document.addEventListener(p,m,!0)}),()=>{l.forEach(p=>{document.removeEventListener(p,m,!0)}),r.current&&clearTimeout(r.current)}},[a,i])}const E1="modulepreload",M1=function(i){return"/"+i},dp={},Uu=function(a,r,o){let c=Promise.resolve();if(r&&r.length>0){let g=function(v){return Promise.all(v.map(j=>Promise.resolve(j).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=m?.nonce||m?.getAttribute("nonce");c=g(r.map(v=>{if(v=M1(v),v in dp)return;dp[v]=!0;const j=v.endsWith(".css"),A=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${A}`))return;const M=document.createElement("link");if(M.rel=j?"stylesheet":E1,j||(M.as="script"),M.crossOrigin="",M.href=v,p&&M.setAttribute("nonce",p),document.head.appendChild(M),j)return new Promise((b,U)=>{M.addEventListener("load",b),M.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(m){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=m,window.dispatchEvent(p),!p.defaultPrevented)throw m}return c.then(m=>{for(const p of m||[])p.status==="rejected"&&l(p.reason);return a().catch(l)})};function ar(i){"@babel/helpers - typeof";return ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ar(i)}var uo=Uint8Array,ys=Uint16Array,Ef=Int32Array,Mf=new uo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Df=new uo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),up=new uo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bm=function(i,a){for(var r=new ys(31),o=0;o<31;++o)r[o]=a+=1<<i[o-1];for(var c=new Ef(r[30]),o=1;o<30;++o)for(var l=r[o];l<r[o+1];++l)c[l]=l-r[o]<<5|o;return{b:r,r:c}},zm=Bm(Mf,2),D1=zm.b,pf=zm.r;D1[28]=258,pf[258]=28;var F1=Bm(Df,0),fp=F1.r,mf=new ys(32768);for(var Lr=0;Lr<32768;++Lr){var hl=(Lr&43690)>>1|(Lr&21845)<<1;hl=(hl&52428)>>2|(hl&13107)<<2,hl=(hl&61680)>>4|(hl&3855)<<4,mf[Lr]=((hl&65280)>>8|(hl&255)<<8)>>1}var qc=(function(i,a,r){for(var o=i.length,c=0,l=new ys(a);c<o;++c)i[c]&&++l[i[c]-1];var m=new ys(a);for(c=1;c<a;++c)m[c]=m[c-1]+l[c-1]<<1;var p;if(r){p=new ys(1<<a);var g=15-a;for(c=0;c<o;++c)if(i[c])for(var v=c<<4|i[c],j=a-i[c],A=m[i[c]-1]++<<j,M=A|(1<<j)-1;A<=M;++A)p[mf[A]>>g]=v}else for(p=new ys(o),c=0;c<o;++c)i[c]&&(p[c]=mf[m[i[c]-1]++]>>15-i[c]);return p}),Ul=new uo(288);for(var Lr=0;Lr<144;++Lr)Ul[Lr]=8;for(var Lr=144;Lr<256;++Lr)Ul[Lr]=9;for(var Lr=256;Lr<280;++Lr)Ul[Lr]=7;for(var Lr=280;Lr<288;++Lr)Ul[Lr]=8;var Hd=new uo(32);for(var Lr=0;Lr<32;++Lr)Hd[Lr]=5;var T1=qc(Ul,9,0),R1=qc(Hd,5,0),Um=function(i){return(i+7)/8|0},O1=function(i,a,r){return(r==null||r>i.length)&&(r=i.length),new uo(i.subarray(a,r))},Yo=function(i,a,r){r<<=a&7;var o=a/8|0;i[o]|=r,i[o+1]|=r>>8},zc=function(i,a,r){r<<=a&7;var o=a/8|0;i[o]|=r,i[o+1]|=r>>8,i[o+2]|=r>>16},qu=function(i,a){for(var r=[],o=0;o<i.length;++o)i[o]&&r.push({s:o,f:i[o]});var c=r.length,l=r.slice();if(!c)return{t:$m,l:0};if(c==1){var m=new uo(r[0].s+1);return m[r[0].s]=1,{t:m,l:1}}r.sort(function(fe,he){return fe.f-he.f}),r.push({s:-1,f:25001});var p=r[0],g=r[1],v=0,j=1,A=2;for(r[0]={s:-1,f:p.f+g.f,l:p,r:g};j!=c-1;)p=r[r[v].f<r[A].f?v++:A++],g=r[v!=j&&r[v].f<r[A].f?v++:A++],r[j++]={s:-1,f:p.f+g.f,l:p,r:g};for(var M=l[0].s,o=1;o<c;++o)l[o].s>M&&(M=l[o].s);var b=new ys(M+1),U=gf(r[j-1],b,0);if(U>a){var o=0,E=0,I=U-a,P=1<<I;for(l.sort(function(he,Ee){return b[Ee.s]-b[he.s]||he.f-Ee.f});o<c;++o){var W=l[o].s;if(b[W]>a)E+=P-(1<<U-b[W]),b[W]=a;else break}for(E>>=I;E>0;){var X=l[o].s;b[X]<a?E-=1<<a-b[X]++-1:++o}for(;o>=0&&E;--o){var H=l[o].s;b[H]==a&&(--b[H],++E)}U=a}return{t:new uo(b),l:U}},gf=function(i,a,r){return i.s==-1?Math.max(gf(i.l,a,r+1),gf(i.r,a,r+1)):a[i.s]=r},hp=function(i){for(var a=i.length;a&&!i[--a];);for(var r=new ys(++a),o=0,c=i[0],l=1,m=function(g){r[o++]=g},p=1;p<=a;++p)if(i[p]==c&&p!=a)++l;else{if(!c&&l>2){for(;l>138;l-=138)m(32754);l>2&&(m(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(m(c),--l;l>6;l-=6)m(8304);l>2&&(m(l-3<<5|8208),l=0)}for(;l--;)m(c);l=1,c=i[p]}return{c:r.subarray(0,o),n:a}},Uc=function(i,a){for(var r=0,o=0;o<a.length;++o)r+=i[o]*a[o];return r},qm=function(i,a,r){var o=r.length,c=Um(a+2);i[c]=o&255,i[c+1]=o>>8,i[c+2]=i[c]^255,i[c+3]=i[c+1]^255;for(var l=0;l<o;++l)i[c+l+4]=r[l];return(c+4+o)*8},pp=function(i,a,r,o,c,l,m,p,g,v,j){Yo(a,j++,r),++c[256];for(var A=qu(c,15),M=A.t,b=A.l,U=qu(l,15),E=U.t,I=U.l,P=hp(M),W=P.c,X=P.n,H=hp(E),fe=H.c,he=H.n,Ee=new ys(19),ge=0;ge<W.length;++ge)++Ee[W[ge]&31];for(var ge=0;ge<fe.length;++ge)++Ee[fe[ge]&31];for(var ee=qu(Ee,7),xe=ee.t,z=ee.l,$=19;$>4&&!xe[up[$-1]];--$);var le=v+5<<3,ie=Uc(c,Ul)+Uc(l,Hd)+m,we=Uc(c,M)+Uc(l,E)+m+14+3*$+Uc(Ee,xe)+2*Ee[16]+3*Ee[17]+7*Ee[18];if(g>=0&&le<=ie&&le<=we)return qm(a,j,i.subarray(g,g+v));var _e,Ie,pe,Pe;if(Yo(a,j,1+(we<ie)),j+=2,we<ie){_e=qc(M,b,0),Ie=M,pe=qc(E,I,0),Pe=E;var ze=qc(xe,z,0);Yo(a,j,X-257),Yo(a,j+5,he-1),Yo(a,j+10,$-4),j+=14;for(var ge=0;ge<$;++ge)Yo(a,j+3*ge,xe[up[ge]]);j+=3*$;for(var te=[W,fe],C=0;C<2;++C)for(var J=te[C],ge=0;ge<J.length;++ge){var Z=J[ge]&31;Yo(a,j,ze[Z]),j+=xe[Z],Z>15&&(Yo(a,j,J[ge]>>5&127),j+=J[ge]>>12)}}else _e=T1,Ie=Ul,pe=R1,Pe=Hd;for(var ge=0;ge<p;++ge){var de=o[ge];if(de>255){var Z=de>>18&31;zc(a,j,_e[Z+257]),j+=Ie[Z+257],Z>7&&(Yo(a,j,de>>23&31),j+=Mf[Z]);var ce=de&31;zc(a,j,pe[ce]),j+=Pe[ce],ce>3&&(zc(a,j,de>>5&8191),j+=Df[ce])}else zc(a,j,_e[de]),j+=Ie[de]}return zc(a,j,_e[256]),j+Ie[256]},B1=new Ef([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$m=new uo(0),z1=function(i,a,r,o,c,l){var m=l.z||i.length,p=new uo(o+m+5*(1+Math.ceil(m/7e3))+c),g=p.subarray(o,p.length-c),v=l.l,j=(l.r||0)&7;if(a){j&&(g[0]=l.r>>3);for(var A=B1[a-1],M=A>>13,b=A&8191,U=(1<<r)-1,E=l.p||new ys(32768),I=l.h||new ys(U+1),P=Math.ceil(r/3),W=2*P,X=function(pt){return(i[pt]^i[pt+1]<<P^i[pt+2]<<W)&U},H=new Ef(25e3),fe=new ys(288),he=new ys(32),Ee=0,ge=0,ee=l.i||0,xe=0,z=l.w||0,$=0;ee+2<m;++ee){var le=X(ee),ie=ee&32767,we=I[le];if(E[ie]=we,I[le]=ie,z<=ee){var _e=m-ee;if((Ee>7e3||xe>24576)&&(_e>423||!v)){j=pp(i,g,0,H,fe,he,ge,xe,$,ee-$,j),xe=Ee=ge=0,$=ee;for(var Ie=0;Ie<286;++Ie)fe[Ie]=0;for(var Ie=0;Ie<30;++Ie)he[Ie]=0}var pe=2,Pe=0,ze=b,te=ie-we&32767;if(_e>2&&le==X(ee-te))for(var C=Math.min(M,_e)-1,J=Math.min(32767,ee),Z=Math.min(258,_e);te<=J&&--ze&&ie!=we;){if(i[ee+pe]==i[ee+pe-te]){for(var de=0;de<Z&&i[ee+de]==i[ee+de-te];++de);if(de>pe){if(pe=de,Pe=te,de>C)break;for(var ce=Math.min(te,de-2),be=0,Ie=0;Ie<ce;++Ie){var Me=ee-te+Ie&32767,Fe=E[Me],We=Me-Fe&32767;We>be&&(be=We,we=Me)}}}ie=we,we=E[ie],te+=ie-we&32767}if(Pe){H[xe++]=268435456|pf[pe]<<18|fp[Pe];var De=pf[pe]&31,it=fp[Pe]&31;ge+=Mf[De]+Df[it],++fe[257+De],++he[it],z=ee+pe,++Ee}else H[xe++]=i[ee],++fe[i[ee]]}}for(ee=Math.max(ee,z);ee<m;++ee)H[xe++]=i[ee],++fe[i[ee]];j=pp(i,g,v,H,fe,he,ge,xe,$,ee-$,j),v||(l.r=j&7|g[j/8|0]<<3,j-=7,l.h=I,l.p=E,l.i=ee,l.w=z)}else{for(var ee=l.w||0;ee<m+v;ee+=65535){var ot=ee+65535;ot>=m&&(g[j/8|0]=v,ot=m),j=qm(g,j+1,i.subarray(ee,ot))}l.i=m}return O1(p,0,o+Um(j)+c)},Wm=function(){var i=1,a=0;return{p:function(r){for(var o=i,c=a,l=r.length|0,m=0;m!=l;){for(var p=Math.min(m+2655,l);m<p;++m)c+=o+=r[m];o=(o&65535)+15*(o>>16),c=(c&65535)+15*(c>>16)}i=o,a=c},d:function(){return i%=65521,a%=65521,(i&255)<<24|(i&65280)<<8|(a&255)<<8|a>>8}}},U1=function(i,a,r,o,c){if(!c&&(c={l:1},a.dictionary)){var l=a.dictionary.subarray(-32768),m=new uo(l.length+i.length);m.set(l),m.set(i,l.length),i=m,c.w=l.length}return z1(i,a.level==null?6:a.level,a.mem==null?c.l?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):20:12+a.mem,r,o,c)},Hm=function(i,a,r){for(;r;++a)i[a]=r,r>>>=8},q1=function(i,a){var r=a.level,o=r==0?0:r<6?1:r==9?3:2;if(i[0]=120,i[1]=o<<6|(a.dictionary&&32),i[1]|=31-(i[0]<<8|i[1])%31,a.dictionary){var c=Wm();c.p(a.dictionary),Hm(i,2,c.d())}};function xf(i,a){a||(a={});var r=Wm();r.p(i);var o=U1(i,a,a.dictionary?6:2,4);return q1(o,a),Hm(o,o.length-4,r.d()),o}var $1=typeof TextDecoder<"u"&&new TextDecoder,W1=0;try{$1.decode($m,{stream:!0}),W1=1}catch{}function H1(i){if(Array.isArray(i))return i}function V1(i,a){var r=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(r!=null){var o,c,l,m,p=[],g=!0,v=!1;try{if(l=(r=r.call(i)).next,a!==0)for(;!(g=(o=l.call(r)).done)&&(p.push(o.value),p.length!==a);g=!0);}catch(j){v=!0,c=j}finally{try{if(!g&&r.return!=null&&(m=r.return(),Object(m)!==m))return}finally{if(v)throw c}}return p}}function mp(i,a){(a==null||a>i.length)&&(a=i.length);for(var r=0,o=Array(a);r<a;r++)o[r]=i[r];return o}function Y1(i,a){if(i){if(typeof i=="string")return mp(i,a);var r={}.toString.call(i).slice(8,-1);return r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set"?Array.from(i):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mp(i,a):void 0}}function G1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gp(i,a){return H1(i)||V1(i,a)||Y1(i,a)||G1()}function xp(i,a="utf8"){return new TextDecoder(a).decode(i)}const J1=new TextEncoder;function K1(i){return J1.encode(i)}const Q1=1024*8,X1=(()=>{const i=new Uint8Array(4),a=new Uint32Array(i.buffer);return!((a[0]=1)&i[0])})(),$u={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Ff{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(a=Q1,r={}){let o=!1;typeof a=="number"?a=new ArrayBuffer(a):(o=!0,this.lastWrittenByte=a.byteLength);const c=r.offset?r.offset>>>0:0,l=a.byteLength-c;let m=c;(ArrayBuffer.isView(a)||a instanceof Ff)&&(a.byteLength!==a.buffer.byteLength&&(m=a.byteOffset+c),a=a.buffer),o?this.lastWrittenByte=l:this.lastWrittenByte=0,this.buffer=a,this.length=l,this.byteLength=l,this.byteOffset=m,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,m,l),this._mark=0,this._marks=[]}available(a=1){return this.offset+a<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(a=1){return this.offset+=a,this}back(a=1){return this.offset-=a,this}seek(a){return this.offset=a,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const a=this._marks.pop();if(a===void 0)throw new Error("Mark stack empty");return this.seek(a),this}rewind(){return this.offset=0,this}ensureAvailable(a=1){if(!this.available(a)){const o=(this.offset+a)*2,c=new Uint8Array(o);c.set(new Uint8Array(this.buffer)),this.buffer=c.buffer,this.length=o,this.byteLength=o,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(a=1){return this.readArray(a,"uint8")}readArray(a,r){const o=$u[r].BYTES_PER_ELEMENT*a,c=this.byteOffset+this.offset,l=this.buffer.slice(c,c+o);if(this.littleEndian===X1&&r!=="uint8"&&r!=="int8"){const p=new Uint8Array(this.buffer.slice(c,c+o));p.reverse();const g=new $u[r](p.buffer);return this.offset+=o,g.reverse(),g}const m=new $u[r](l);return this.offset+=o,m}readInt16(){const a=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,a}readUint16(){const a=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,a}readInt32(){const a=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,a}readUint32(){const a=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat32(){const a=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat64(){const a=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,a}readBigInt64(){const a=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,a}readBigUint64(){const a=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,a}readChar(){return String.fromCharCode(this.readInt8())}readChars(a=1){let r="";for(let o=0;o<a;o++)r+=this.readChar();return r}readUtf8(a=1){return xp(this.readBytes(a))}decodeText(a=1,r="utf8"){return xp(this.readBytes(a),r)}writeBoolean(a){return this.writeUint8(a?255:0),this}writeInt8(a){return this.ensureAvailable(1),this._data.setInt8(this.offset++,a),this._updateLastWrittenByte(),this}writeUint8(a){return this.ensureAvailable(1),this._data.setUint8(this.offset++,a),this._updateLastWrittenByte(),this}writeByte(a){return this.writeUint8(a)}writeBytes(a){this.ensureAvailable(a.length);for(let r=0;r<a.length;r++)this._data.setUint8(this.offset++,a[r]);return this._updateLastWrittenByte(),this}writeInt16(a){return this.ensureAvailable(2),this._data.setInt16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(a){return this.ensureAvailable(2),this._data.setUint16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(a){return this.ensureAvailable(4),this._data.setInt32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(a){return this.ensureAvailable(4),this._data.setUint32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(a){return this.ensureAvailable(4),this._data.setFloat32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(a){return this.ensureAvailable(8),this._data.setFloat64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(a){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(a){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(a){return this.writeUint8(a.charCodeAt(0))}writeChars(a){for(let r=0;r<a.length;r++)this.writeUint8(a.charCodeAt(r));return this}writeUtf8(a){return this.writeBytes(K1(a))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Nc(i){let a=i.length;for(;--a>=0;)i[a]=0}const Z1=3,e2=258,Vm=29,t2=256,n2=t2+1+Vm,Ym=30,r2=512,a2=new Array((n2+2)*2);Nc(a2);const i2=new Array(Ym*2);Nc(i2);const s2=new Array(r2);Nc(s2);const o2=new Array(e2-Z1+1);Nc(o2);const l2=new Array(Vm);Nc(l2);const c2=new Array(Ym);Nc(c2);const d2=(i,a,r,o)=>{let c=i&65535|0,l=i>>>16&65535|0,m=0;for(;r!==0;){m=r>2e3?2e3:r,r-=m;do c=c+a[o++]|0,l=l+c|0;while(--m);c%=65521,l%=65521}return c|l<<16|0};var yf=d2;const u2=()=>{let i,a=[];for(var r=0;r<256;r++){i=r;for(var o=0;o<8;o++)i=i&1?3988292384^i>>>1:i>>>1;a[r]=i}return a},f2=new Uint32Array(u2()),h2=(i,a,r,o)=>{const c=f2,l=o+r;i^=-1;for(let m=o;m<l;m++)i=i>>>8^c[(i^a[m])&255];return i^-1};var Io=h2,vf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Gm={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const p2=(i,a)=>Object.prototype.hasOwnProperty.call(i,a);var m2=function(i){const a=Array.prototype.slice.call(arguments,1);for(;a.length;){const r=a.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const o in r)p2(r,o)&&(i[o]=r[o])}}return i},g2=i=>{let a=0;for(let o=0,c=i.length;o<c;o++)a+=i[o].length;const r=new Uint8Array(a);for(let o=0,c=0,l=i.length;o<l;o++){let m=i[o];r.set(m,c),c+=m.length}return r},Jm={assign:m2,flattenChunks:g2};let Km=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Km=!1}const Vc=new Uint8Array(256);for(let i=0;i<256;i++)Vc[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;Vc[254]=Vc[254]=1;var x2=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let a,r,o,c,l,m=i.length,p=0;for(c=0;c<m;c++)r=i.charCodeAt(c),(r&64512)===55296&&c+1<m&&(o=i.charCodeAt(c+1),(o&64512)===56320&&(r=65536+(r-55296<<10)+(o-56320),c++)),p+=r<128?1:r<2048?2:r<65536?3:4;for(a=new Uint8Array(p),l=0,c=0;l<p;c++)r=i.charCodeAt(c),(r&64512)===55296&&c+1<m&&(o=i.charCodeAt(c+1),(o&64512)===56320&&(r=65536+(r-55296<<10)+(o-56320),c++)),r<128?a[l++]=r:r<2048?(a[l++]=192|r>>>6,a[l++]=128|r&63):r<65536?(a[l++]=224|r>>>12,a[l++]=128|r>>>6&63,a[l++]=128|r&63):(a[l++]=240|r>>>18,a[l++]=128|r>>>12&63,a[l++]=128|r>>>6&63,a[l++]=128|r&63);return a};const y2=(i,a)=>{if(a<65534&&i.subarray&&Km)return String.fromCharCode.apply(null,i.length===a?i:i.subarray(0,a));let r="";for(let o=0;o<a;o++)r+=String.fromCharCode(i[o]);return r};var v2=(i,a)=>{const r=a||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,a));let o,c;const l=new Array(r*2);for(c=0,o=0;o<r;){let m=i[o++];if(m<128){l[c++]=m;continue}let p=Vc[m];if(p>4){l[c++]=65533,o+=p-1;continue}for(m&=p===2?31:p===3?15:7;p>1&&o<r;)m=m<<6|i[o++]&63,p--;if(p>1){l[c++]=65533;continue}m<65536?l[c++]=m:(m-=65536,l[c++]=55296|m>>10&1023,l[c++]=56320|m&1023)}return y2(l,c)},b2=(i,a)=>{a=a||i.length,a>i.length&&(a=i.length);let r=a-1;for(;r>=0&&(i[r]&192)===128;)r--;return r<0||r===0?a:r+Vc[i[r]]>a?r:a},bf={string2buf:x2,buf2string:v2,utf8border:b2};function w2(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var j2=w2;const Cd=16209,S2=16191;var N2=function(a,r){let o,c,l,m,p,g,v,j,A,M,b,U,E,I,P,W,X,H,fe,he,Ee,ge,ee,xe;const z=a.state;o=a.next_in,ee=a.input,c=o+(a.avail_in-5),l=a.next_out,xe=a.output,m=l-(r-a.avail_out),p=l+(a.avail_out-257),g=z.dmax,v=z.wsize,j=z.whave,A=z.wnext,M=z.window,b=z.hold,U=z.bits,E=z.lencode,I=z.distcode,P=(1<<z.lenbits)-1,W=(1<<z.distbits)-1;e:do{U<15&&(b+=ee[o++]<<U,U+=8,b+=ee[o++]<<U,U+=8),X=E[b&P];t:for(;;){if(H=X>>>24,b>>>=H,U-=H,H=X>>>16&255,H===0)xe[l++]=X&65535;else if(H&16){fe=X&65535,H&=15,H&&(U<H&&(b+=ee[o++]<<U,U+=8),fe+=b&(1<<H)-1,b>>>=H,U-=H),U<15&&(b+=ee[o++]<<U,U+=8,b+=ee[o++]<<U,U+=8),X=I[b&W];n:for(;;){if(H=X>>>24,b>>>=H,U-=H,H=X>>>16&255,H&16){if(he=X&65535,H&=15,U<H&&(b+=ee[o++]<<U,U+=8,U<H&&(b+=ee[o++]<<U,U+=8)),he+=b&(1<<H)-1,he>g){a.msg="invalid distance too far back",z.mode=Cd;break e}if(b>>>=H,U-=H,H=l-m,he>H){if(H=he-H,H>j&&z.sane){a.msg="invalid distance too far back",z.mode=Cd;break e}if(Ee=0,ge=M,A===0){if(Ee+=v-H,H<fe){fe-=H;do xe[l++]=M[Ee++];while(--H);Ee=l-he,ge=xe}}else if(A<H){if(Ee+=v+A-H,H-=A,H<fe){fe-=H;do xe[l++]=M[Ee++];while(--H);if(Ee=0,A<fe){H=A,fe-=H;do xe[l++]=M[Ee++];while(--H);Ee=l-he,ge=xe}}}else if(Ee+=A-H,H<fe){fe-=H;do xe[l++]=M[Ee++];while(--H);Ee=l-he,ge=xe}for(;fe>2;)xe[l++]=ge[Ee++],xe[l++]=ge[Ee++],xe[l++]=ge[Ee++],fe-=3;fe&&(xe[l++]=ge[Ee++],fe>1&&(xe[l++]=ge[Ee++]))}else{Ee=l-he;do xe[l++]=xe[Ee++],xe[l++]=xe[Ee++],xe[l++]=xe[Ee++],fe-=3;while(fe>2);fe&&(xe[l++]=xe[Ee++],fe>1&&(xe[l++]=xe[Ee++]))}}else if((H&64)===0){X=I[(X&65535)+(b&(1<<H)-1)];continue n}else{a.msg="invalid distance code",z.mode=Cd;break e}break}}else if((H&64)===0){X=E[(X&65535)+(b&(1<<H)-1)];continue t}else if(H&32){z.mode=S2;break e}else{a.msg="invalid literal/length code",z.mode=Cd;break e}break}}while(o<c&&l<p);fe=U>>3,o-=fe,U-=fe<<3,b&=(1<<U)-1,a.next_in=o,a.next_out=l,a.avail_in=o<c?5+(c-o):5-(o-c),a.avail_out=l<p?257+(p-l):257-(l-p),z.hold=b,z.bits=U};const uc=15,yp=852,vp=592,bp=0,Wu=1,wp=2,k2=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),A2=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),C2=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),P2=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),L2=(i,a,r,o,c,l,m,p)=>{const g=p.bits;let v=0,j=0,A=0,M=0,b=0,U=0,E=0,I=0,P=0,W=0,X,H,fe,he,Ee,ge=null,ee;const xe=new Uint16Array(uc+1),z=new Uint16Array(uc+1);let $=null,le,ie,we;for(v=0;v<=uc;v++)xe[v]=0;for(j=0;j<o;j++)xe[a[r+j]]++;for(b=g,M=uc;M>=1&&xe[M]===0;M--);if(b>M&&(b=M),M===0)return c[l++]=1<<24|64<<16|0,c[l++]=1<<24|64<<16|0,p.bits=1,0;for(A=1;A<M&&xe[A]===0;A++);for(b<A&&(b=A),I=1,v=1;v<=uc;v++)if(I<<=1,I-=xe[v],I<0)return-1;if(I>0&&(i===bp||M!==1))return-1;for(z[1]=0,v=1;v<uc;v++)z[v+1]=z[v]+xe[v];for(j=0;j<o;j++)a[r+j]!==0&&(m[z[a[r+j]]++]=j);if(i===bp?(ge=$=m,ee=20):i===Wu?(ge=k2,$=A2,ee=257):(ge=C2,$=P2,ee=0),W=0,j=0,v=A,Ee=l,U=b,E=0,fe=-1,P=1<<b,he=P-1,i===Wu&&P>yp||i===wp&&P>vp)return 1;for(;;){le=v-E,m[j]+1<ee?(ie=0,we=m[j]):m[j]>=ee?(ie=$[m[j]-ee],we=ge[m[j]-ee]):(ie=96,we=0),X=1<<v-E,H=1<<U,A=H;do H-=X,c[Ee+(W>>E)+H]=le<<24|ie<<16|we|0;while(H!==0);for(X=1<<v-1;W&X;)X>>=1;if(X!==0?(W&=X-1,W+=X):W=0,j++,--xe[v]===0){if(v===M)break;v=a[r+m[j]]}if(v>b&&(W&he)!==fe){for(E===0&&(E=b),Ee+=A,U=v-E,I=1<<U;U+E<M&&(I-=xe[U+E],!(I<=0));)U++,I<<=1;if(P+=1<<U,i===Wu&&P>yp||i===wp&&P>vp)return 1;fe=W&he,c[fe]=b<<24|U<<16|Ee-l|0}}return W!==0&&(c[Ee+W]=v-E<<24|64<<16|0),p.bits=b,0};var $c=L2;const _2=0,Qm=1,Xm=2,{Z_FINISH:jp,Z_BLOCK:I2,Z_TREES:Pd,Z_OK:ql,Z_STREAM_END:E2,Z_NEED_DICT:M2,Z_STREAM_ERROR:Ts,Z_DATA_ERROR:Zm,Z_MEM_ERROR:e0,Z_BUF_ERROR:D2,Z_DEFLATED:Sp}=Gm,Xd=16180,Np=16181,kp=16182,Ap=16183,Cp=16184,Pp=16185,Lp=16186,_p=16187,Ip=16188,Ep=16189,Vd=16190,Go=16191,Hu=16192,Mp=16193,Vu=16194,Dp=16195,Fp=16196,Tp=16197,Rp=16198,Ld=16199,_d=16200,Op=16201,Bp=16202,zp=16203,Up=16204,qp=16205,Yu=16206,$p=16207,Wp=16208,Rr=16209,t0=16210,n0=16211,F2=852,T2=592,R2=15,O2=R2,Hp=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function B2(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Wl=i=>{if(!i)return 1;const a=i.state;return!a||a.strm!==i||a.mode<Xd||a.mode>n0?1:0},r0=i=>{if(Wl(i))return Ts;const a=i.state;return i.total_in=i.total_out=a.total=0,i.msg="",a.wrap&&(i.adler=a.wrap&1),a.mode=Xd,a.last=0,a.havedict=0,a.flags=-1,a.dmax=32768,a.head=null,a.hold=0,a.bits=0,a.lencode=a.lendyn=new Int32Array(F2),a.distcode=a.distdyn=new Int32Array(T2),a.sane=1,a.back=-1,ql},a0=i=>{if(Wl(i))return Ts;const a=i.state;return a.wsize=0,a.whave=0,a.wnext=0,r0(i)},i0=(i,a)=>{let r;if(Wl(i))return Ts;const o=i.state;return a<0?(r=0,a=-a):(r=(a>>4)+5,a<48&&(a&=15)),a&&(a<8||a>15)?Ts:(o.window!==null&&o.wbits!==a&&(o.window=null),o.wrap=r,o.wbits=a,a0(i))},s0=(i,a)=>{if(!i)return Ts;const r=new B2;i.state=r,r.strm=i,r.window=null,r.mode=Xd;const o=i0(i,a);return o!==ql&&(i.state=null),o},z2=i=>s0(i,O2);let Vp=!0,Gu,Ju;const U2=i=>{if(Vp){Gu=new Int32Array(512),Ju=new Int32Array(32);let a=0;for(;a<144;)i.lens[a++]=8;for(;a<256;)i.lens[a++]=9;for(;a<280;)i.lens[a++]=7;for(;a<288;)i.lens[a++]=8;for($c(Qm,i.lens,0,288,Gu,0,i.work,{bits:9}),a=0;a<32;)i.lens[a++]=5;$c(Xm,i.lens,0,32,Ju,0,i.work,{bits:5}),Vp=!1}i.lencode=Gu,i.lenbits=9,i.distcode=Ju,i.distbits=5},o0=(i,a,r,o)=>{let c;const l=i.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Uint8Array(l.wsize)),o>=l.wsize?(l.window.set(a.subarray(r-l.wsize,r),0),l.wnext=0,l.whave=l.wsize):(c=l.wsize-l.wnext,c>o&&(c=o),l.window.set(a.subarray(r-o,r-o+c),l.wnext),o-=c,o?(l.window.set(a.subarray(r-o,r),0),l.wnext=o,l.whave=l.wsize):(l.wnext+=c,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=c))),0},q2=(i,a)=>{let r,o,c,l,m,p,g,v,j,A,M,b,U,E,I=0,P,W,X,H,fe,he,Ee,ge;const ee=new Uint8Array(4);let xe,z;const $=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Wl(i)||!i.output||!i.input&&i.avail_in!==0)return Ts;r=i.state,r.mode===Go&&(r.mode=Hu),m=i.next_out,c=i.output,g=i.avail_out,l=i.next_in,o=i.input,p=i.avail_in,v=r.hold,j=r.bits,A=p,M=g,ge=ql;e:for(;;)switch(r.mode){case Xd:if(r.wrap===0){r.mode=Hu;break}for(;j<16;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(r.wrap&2&&v===35615){r.wbits===0&&(r.wbits=15),r.check=0,ee[0]=v&255,ee[1]=v>>>8&255,r.check=Io(r.check,ee,2,0),v=0,j=0,r.mode=Np;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((v&255)<<8)+(v>>8))%31){i.msg="incorrect header check",r.mode=Rr;break}if((v&15)!==Sp){i.msg="unknown compression method",r.mode=Rr;break}if(v>>>=4,j-=4,Ee=(v&15)+8,r.wbits===0&&(r.wbits=Ee),Ee>15||Ee>r.wbits){i.msg="invalid window size",r.mode=Rr;break}r.dmax=1<<r.wbits,r.flags=0,i.adler=r.check=1,r.mode=v&512?Ep:Go,v=0,j=0;break;case Np:for(;j<16;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(r.flags=v,(r.flags&255)!==Sp){i.msg="unknown compression method",r.mode=Rr;break}if(r.flags&57344){i.msg="unknown header flags set",r.mode=Rr;break}r.head&&(r.head.text=v>>8&1),r.flags&512&&r.wrap&4&&(ee[0]=v&255,ee[1]=v>>>8&255,r.check=Io(r.check,ee,2,0)),v=0,j=0,r.mode=kp;case kp:for(;j<32;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}r.head&&(r.head.time=v),r.flags&512&&r.wrap&4&&(ee[0]=v&255,ee[1]=v>>>8&255,ee[2]=v>>>16&255,ee[3]=v>>>24&255,r.check=Io(r.check,ee,4,0)),v=0,j=0,r.mode=Ap;case Ap:for(;j<16;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}r.head&&(r.head.xflags=v&255,r.head.os=v>>8),r.flags&512&&r.wrap&4&&(ee[0]=v&255,ee[1]=v>>>8&255,r.check=Io(r.check,ee,2,0)),v=0,j=0,r.mode=Cp;case Cp:if(r.flags&1024){for(;j<16;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}r.length=v,r.head&&(r.head.extra_len=v),r.flags&512&&r.wrap&4&&(ee[0]=v&255,ee[1]=v>>>8&255,r.check=Io(r.check,ee,2,0)),v=0,j=0}else r.head&&(r.head.extra=null);r.mode=Pp;case Pp:if(r.flags&1024&&(b=r.length,b>p&&(b=p),b&&(r.head&&(Ee=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(o.subarray(l,l+b),Ee)),r.flags&512&&r.wrap&4&&(r.check=Io(r.check,o,b,l)),p-=b,l+=b,r.length-=b),r.length))break e;r.length=0,r.mode=Lp;case Lp:if(r.flags&2048){if(p===0)break e;b=0;do Ee=o[l+b++],r.head&&Ee&&r.length<65536&&(r.head.name+=String.fromCharCode(Ee));while(Ee&&b<p);if(r.flags&512&&r.wrap&4&&(r.check=Io(r.check,o,b,l)),p-=b,l+=b,Ee)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=_p;case _p:if(r.flags&4096){if(p===0)break e;b=0;do Ee=o[l+b++],r.head&&Ee&&r.length<65536&&(r.head.comment+=String.fromCharCode(Ee));while(Ee&&b<p);if(r.flags&512&&r.wrap&4&&(r.check=Io(r.check,o,b,l)),p-=b,l+=b,Ee)break e}else r.head&&(r.head.comment=null);r.mode=Ip;case Ip:if(r.flags&512){for(;j<16;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(r.wrap&4&&v!==(r.check&65535)){i.msg="header crc mismatch",r.mode=Rr;break}v=0,j=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),i.adler=r.check=0,r.mode=Go;break;case Ep:for(;j<32;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}i.adler=r.check=Hp(v),v=0,j=0,r.mode=Vd;case Vd:if(r.havedict===0)return i.next_out=m,i.avail_out=g,i.next_in=l,i.avail_in=p,r.hold=v,r.bits=j,M2;i.adler=r.check=1,r.mode=Go;case Go:if(a===I2||a===Pd)break e;case Hu:if(r.last){v>>>=j&7,j-=j&7,r.mode=Yu;break}for(;j<3;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}switch(r.last=v&1,v>>>=1,j-=1,v&3){case 0:r.mode=Mp;break;case 1:if(U2(r),r.mode=Ld,a===Pd){v>>>=2,j-=2;break e}break;case 2:r.mode=Fp;break;case 3:i.msg="invalid block type",r.mode=Rr}v>>>=2,j-=2;break;case Mp:for(v>>>=j&7,j-=j&7;j<32;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if((v&65535)!==(v>>>16^65535)){i.msg="invalid stored block lengths",r.mode=Rr;break}if(r.length=v&65535,v=0,j=0,r.mode=Vu,a===Pd)break e;case Vu:r.mode=Dp;case Dp:if(b=r.length,b){if(b>p&&(b=p),b>g&&(b=g),b===0)break e;c.set(o.subarray(l,l+b),m),p-=b,l+=b,g-=b,m+=b,r.length-=b;break}r.mode=Go;break;case Fp:for(;j<14;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(r.nlen=(v&31)+257,v>>>=5,j-=5,r.ndist=(v&31)+1,v>>>=5,j-=5,r.ncode=(v&15)+4,v>>>=4,j-=4,r.nlen>286||r.ndist>30){i.msg="too many length or distance symbols",r.mode=Rr;break}r.have=0,r.mode=Tp;case Tp:for(;r.have<r.ncode;){for(;j<3;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}r.lens[$[r.have++]]=v&7,v>>>=3,j-=3}for(;r.have<19;)r.lens[$[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,xe={bits:r.lenbits},ge=$c(_2,r.lens,0,19,r.lencode,0,r.work,xe),r.lenbits=xe.bits,ge){i.msg="invalid code lengths set",r.mode=Rr;break}r.have=0,r.mode=Rp;case Rp:for(;r.have<r.nlen+r.ndist;){for(;I=r.lencode[v&(1<<r.lenbits)-1],P=I>>>24,W=I>>>16&255,X=I&65535,!(P<=j);){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(X<16)v>>>=P,j-=P,r.lens[r.have++]=X;else{if(X===16){for(z=P+2;j<z;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(v>>>=P,j-=P,r.have===0){i.msg="invalid bit length repeat",r.mode=Rr;break}Ee=r.lens[r.have-1],b=3+(v&3),v>>>=2,j-=2}else if(X===17){for(z=P+3;j<z;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}v>>>=P,j-=P,Ee=0,b=3+(v&7),v>>>=3,j-=3}else{for(z=P+7;j<z;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}v>>>=P,j-=P,Ee=0,b=11+(v&127),v>>>=7,j-=7}if(r.have+b>r.nlen+r.ndist){i.msg="invalid bit length repeat",r.mode=Rr;break}for(;b--;)r.lens[r.have++]=Ee}}if(r.mode===Rr)break;if(r.lens[256]===0){i.msg="invalid code -- missing end-of-block",r.mode=Rr;break}if(r.lenbits=9,xe={bits:r.lenbits},ge=$c(Qm,r.lens,0,r.nlen,r.lencode,0,r.work,xe),r.lenbits=xe.bits,ge){i.msg="invalid literal/lengths set",r.mode=Rr;break}if(r.distbits=6,r.distcode=r.distdyn,xe={bits:r.distbits},ge=$c(Xm,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,xe),r.distbits=xe.bits,ge){i.msg="invalid distances set",r.mode=Rr;break}if(r.mode=Ld,a===Pd)break e;case Ld:r.mode=_d;case _d:if(p>=6&&g>=258){i.next_out=m,i.avail_out=g,i.next_in=l,i.avail_in=p,r.hold=v,r.bits=j,N2(i,M),m=i.next_out,c=i.output,g=i.avail_out,l=i.next_in,o=i.input,p=i.avail_in,v=r.hold,j=r.bits,r.mode===Go&&(r.back=-1);break}for(r.back=0;I=r.lencode[v&(1<<r.lenbits)-1],P=I>>>24,W=I>>>16&255,X=I&65535,!(P<=j);){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(W&&(W&240)===0){for(H=P,fe=W,he=X;I=r.lencode[he+((v&(1<<H+fe)-1)>>H)],P=I>>>24,W=I>>>16&255,X=I&65535,!(H+P<=j);){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}v>>>=H,j-=H,r.back+=H}if(v>>>=P,j-=P,r.back+=P,r.length=X,W===0){r.mode=qp;break}if(W&32){r.back=-1,r.mode=Go;break}if(W&64){i.msg="invalid literal/length code",r.mode=Rr;break}r.extra=W&15,r.mode=Op;case Op:if(r.extra){for(z=r.extra;j<z;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,j-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Bp;case Bp:for(;I=r.distcode[v&(1<<r.distbits)-1],P=I>>>24,W=I>>>16&255,X=I&65535,!(P<=j);){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if((W&240)===0){for(H=P,fe=W,he=X;I=r.distcode[he+((v&(1<<H+fe)-1)>>H)],P=I>>>24,W=I>>>16&255,X=I&65535,!(H+P<=j);){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}v>>>=H,j-=H,r.back+=H}if(v>>>=P,j-=P,r.back+=P,W&64){i.msg="invalid distance code",r.mode=Rr;break}r.offset=X,r.extra=W&15,r.mode=zp;case zp:if(r.extra){for(z=r.extra;j<z;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,j-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){i.msg="invalid distance too far back",r.mode=Rr;break}r.mode=Up;case Up:if(g===0)break e;if(b=M-g,r.offset>b){if(b=r.offset-b,b>r.whave&&r.sane){i.msg="invalid distance too far back",r.mode=Rr;break}b>r.wnext?(b-=r.wnext,U=r.wsize-b):U=r.wnext-b,b>r.length&&(b=r.length),E=r.window}else E=c,U=m-r.offset,b=r.length;b>g&&(b=g),g-=b,r.length-=b;do c[m++]=E[U++];while(--b);r.length===0&&(r.mode=_d);break;case qp:if(g===0)break e;c[m++]=r.length,g--,r.mode=_d;break;case Yu:if(r.wrap){for(;j<32;){if(p===0)break e;p--,v|=o[l++]<<j,j+=8}if(M-=g,i.total_out+=M,r.total+=M,r.wrap&4&&M&&(i.adler=r.check=r.flags?Io(r.check,c,M,m-M):yf(r.check,c,M,m-M)),M=g,r.wrap&4&&(r.flags?v:Hp(v))!==r.check){i.msg="incorrect data check",r.mode=Rr;break}v=0,j=0}r.mode=$p;case $p:if(r.wrap&&r.flags){for(;j<32;){if(p===0)break e;p--,v+=o[l++]<<j,j+=8}if(r.wrap&4&&v!==(r.total&4294967295)){i.msg="incorrect length check",r.mode=Rr;break}v=0,j=0}r.mode=Wp;case Wp:ge=E2;break e;case Rr:ge=Zm;break e;case t0:return e0;case n0:default:return Ts}return i.next_out=m,i.avail_out=g,i.next_in=l,i.avail_in=p,r.hold=v,r.bits=j,(r.wsize||M!==i.avail_out&&r.mode<Rr&&(r.mode<Yu||a!==jp))&&o0(i,i.output,i.next_out,M-i.avail_out),A-=i.avail_in,M-=i.avail_out,i.total_in+=A,i.total_out+=M,r.total+=M,r.wrap&4&&M&&(i.adler=r.check=r.flags?Io(r.check,c,M,i.next_out-M):yf(r.check,c,M,i.next_out-M)),i.data_type=r.bits+(r.last?64:0)+(r.mode===Go?128:0)+(r.mode===Ld||r.mode===Vu?256:0),(A===0&&M===0||a===jp)&&ge===ql&&(ge=D2),ge},$2=i=>{if(Wl(i))return Ts;let a=i.state;return a.window&&(a.window=null),i.state=null,ql},W2=(i,a)=>{if(Wl(i))return Ts;const r=i.state;return(r.wrap&2)===0?Ts:(r.head=a,a.done=!1,ql)},H2=(i,a)=>{const r=a.length;let o,c,l;return Wl(i)||(o=i.state,o.wrap!==0&&o.mode!==Vd)?Ts:o.mode===Vd&&(c=1,c=yf(c,a,r,0),c!==o.check)?Zm:(l=o0(i,a,r,r),l?(o.mode=t0,e0):(o.havedict=1,ql))};var V2=a0,Y2=i0,G2=r0,J2=z2,K2=s0,Q2=q2,X2=$2,Z2=W2,ex=H2,tx="pako inflate (from Nodeca project)",Jo={inflateReset:V2,inflateReset2:Y2,inflateResetKeep:G2,inflateInit:J2,inflateInit2:K2,inflate:Q2,inflateEnd:X2,inflateGetHeader:Z2,inflateSetDictionary:ex,inflateInfo:tx};function nx(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var rx=nx;const l0=Object.prototype.toString,{Z_NO_FLUSH:ax,Z_FINISH:ix,Z_OK:Yc,Z_STREAM_END:Ku,Z_NEED_DICT:Qu,Z_STREAM_ERROR:sx,Z_DATA_ERROR:Yp,Z_MEM_ERROR:ox}=Gm;function Qc(i){this.options=Jm.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const a=this.options;a.raw&&a.windowBits>=0&&a.windowBits<16&&(a.windowBits=-a.windowBits,a.windowBits===0&&(a.windowBits=-15)),a.windowBits>=0&&a.windowBits<16&&!(i&&i.windowBits)&&(a.windowBits+=32),a.windowBits>15&&a.windowBits<48&&(a.windowBits&15)===0&&(a.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j2,this.strm.avail_out=0;let r=Jo.inflateInit2(this.strm,a.windowBits);if(r!==Yc)throw new Error(vf[r]);if(this.header=new rx,Jo.inflateGetHeader(this.strm,this.header),a.dictionary&&(typeof a.dictionary=="string"?a.dictionary=bf.string2buf(a.dictionary):l0.call(a.dictionary)==="[object ArrayBuffer]"&&(a.dictionary=new Uint8Array(a.dictionary)),a.raw&&(r=Jo.inflateSetDictionary(this.strm,a.dictionary),r!==Yc)))throw new Error(vf[r])}Qc.prototype.push=function(i,a){const r=this.strm,o=this.options.chunkSize,c=this.options.dictionary;let l,m,p;if(this.ended)return!1;for(a===~~a?m=a:m=a===!0?ix:ax,l0.call(i)==="[object ArrayBuffer]"?r.input=new Uint8Array(i):r.input=i,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(o),r.next_out=0,r.avail_out=o),l=Jo.inflate(r,m),l===Qu&&c&&(l=Jo.inflateSetDictionary(r,c),l===Yc?l=Jo.inflate(r,m):l===Yp&&(l=Qu));r.avail_in>0&&l===Ku&&r.state.wrap>0&&i[r.next_in]!==0;)Jo.inflateReset(r),l=Jo.inflate(r,m);switch(l){case sx:case Yp:case Qu:case ox:return this.onEnd(l),this.ended=!0,!1}if(p=r.avail_out,r.next_out&&(r.avail_out===0||l===Ku))if(this.options.to==="string"){let g=bf.utf8border(r.output,r.next_out),v=r.next_out-g,j=bf.buf2string(r.output,g);r.next_out=v,r.avail_out=o-v,v&&r.output.set(r.output.subarray(g,g+v),0),this.onData(j)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(l===Yc&&p===0)){if(l===Ku)return l=Jo.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Qc.prototype.onData=function(i){this.chunks.push(i)};Qc.prototype.onEnd=function(i){i===Yc&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Jm.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function lx(i,a){const r=new Qc(a);if(r.push(i),r.err)throw r.msg||vf[r.err];return r.result}var cx=Qc,dx=lx,ux={Inflate:cx,inflate:dx};const{Inflate:fx,inflate:hx}=ux;var Gp=fx,px=hx;const c0=[];for(let i=0;i<256;i++){let a=i;for(let r=0;r<8;r++)a&1?a=3988292384^a>>>1:a=a>>>1;c0[i]=a}const Jp=4294967295;function mx(i,a,r){let o=i;for(let c=0;c<r;c++)o=c0[(o^a[c])&255]^o>>>8;return o}function gx(i,a){return(mx(Jp,i,a)^Jp)>>>0}function Kp(i,a,r){const o=i.readUint32(),c=gx(new Uint8Array(i.buffer,i.byteOffset+i.offset-a-4,a),a);if(c!==o)throw new Error(`CRC mismatch for chunk ${r}. Expected ${o}, found ${c}`)}function d0(i,a,r){for(let o=0;o<r;o++)a[o]=i[o]}function u0(i,a,r,o){let c=0;for(;c<o;c++)a[c]=i[c];for(;c<r;c++)a[c]=i[c]+a[c-o]&255}function f0(i,a,r,o){let c=0;if(r.length===0)for(;c<o;c++)a[c]=i[c];else for(;c<o;c++)a[c]=i[c]+r[c]&255}function h0(i,a,r,o,c){let l=0;if(r.length===0){for(;l<c;l++)a[l]=i[l];for(;l<o;l++)a[l]=i[l]+(a[l-c]>>1)&255}else{for(;l<c;l++)a[l]=i[l]+(r[l]>>1)&255;for(;l<o;l++)a[l]=i[l]+(a[l-c]+r[l]>>1)&255}}function p0(i,a,r,o,c){let l=0;if(r.length===0){for(;l<c;l++)a[l]=i[l];for(;l<o;l++)a[l]=i[l]+a[l-c]&255}else{for(;l<c;l++)a[l]=i[l]+r[l]&255;for(;l<o;l++)a[l]=i[l]+xx(a[l-c],r[l],r[l-c])&255}}function xx(i,a,r){const o=i+a-r,c=Math.abs(o-i),l=Math.abs(o-a),m=Math.abs(o-r);return c<=l&&c<=m?i:l<=m?a:r}function yx(i,a,r,o,c,l){switch(i){case 0:d0(a,r,c);break;case 1:u0(a,r,c,l);break;case 2:f0(a,r,o,c);break;case 3:h0(a,r,o,c,l);break;case 4:p0(a,r,o,c,l);break;default:throw new Error(`Unsupported filter: ${i}`)}}const vx=new Uint16Array([255]),bx=new Uint8Array(vx.buffer),wx=bx[0]===255;function jx(i){const{data:a,width:r,height:o,channels:c,depth:l}=i,m=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],p=Math.ceil(l/8)*c,g=new Uint8Array(o*r*p);let v=0;for(let j=0;j<7;j++){const A=m[j],M=Math.ceil((r-A.x)/A.xStep),b=Math.ceil((o-A.y)/A.yStep);if(M<=0||b<=0)continue;const U=M*p,E=new Uint8Array(U);for(let I=0;I<b;I++){const P=a[v++],W=a.subarray(v,v+U);v+=U;const X=new Uint8Array(U);yx(P,W,X,E,U,p),E.set(X);for(let H=0;H<M;H++){const fe=A.x+H*A.xStep,he=A.y+I*A.yStep;if(!(fe>=r||he>=o))for(let Ee=0;Ee<p;Ee++)g[(he*r+fe)*p+Ee]=X[H*p+Ee]}}}if(l===16){const j=new Uint16Array(g.buffer);if(wx)for(let A=0;A<j.length;A++)j[A]=Sx(j[A]);return j}else return g}function Sx(i){return(i&255)<<8|i>>8&255}const Nx=new Uint16Array([255]),kx=new Uint8Array(Nx.buffer),Ax=kx[0]===255,Cx=new Uint8Array(0);function Qp(i){const{data:a,width:r,height:o,channels:c,depth:l}=i,m=Math.ceil(l/8)*c,p=Math.ceil(l/8*c*r),g=new Uint8Array(o*p);let v=Cx,j=0,A,M;for(let b=0;b<o;b++){switch(A=a.subarray(j+1,j+1+p),M=g.subarray(b*p,(b+1)*p),a[j]){case 0:d0(A,M,p);break;case 1:u0(A,M,p,m);break;case 2:f0(A,M,v,p);break;case 3:h0(A,M,v,p,m);break;case 4:p0(A,M,v,p,m);break;default:throw new Error(`Unsupported filter: ${a[j]}`)}v=M,j+=p+1}if(l===16){const b=new Uint16Array(g.buffer);if(Ax)for(let U=0;U<b.length;U++)b[U]=Px(b[U]);return b}else return g}function Px(i){return(i&255)<<8|i>>8&255}const Rd=Uint8Array.of(137,80,78,71,13,10,26,10);function Xp(i){if(!Lx(i.readBytes(Rd.length)))throw new Error("wrong PNG signature")}function Lx(i){if(i.length<Rd.length)return!1;for(let a=0;a<Rd.length;a++)if(i[a]!==Rd[a])return!1;return!0}const _x="tEXt",Ix=0,m0=new TextDecoder("latin1");function Ex(i){if(Dx(i),i.length===0||i.length>79)throw new Error("keyword length must be between 1 and 79")}const Mx=/^[\u0000-\u00FF]*$/;function Dx(i){if(!Mx.test(i))throw new Error("invalid latin1 text")}function Fx(i,a,r){const o=g0(a);i[o]=Tx(a,r-o.length-1)}function g0(i){for(i.mark();i.readByte()!==Ix;);const a=i.offset;i.reset();const r=m0.decode(i.readBytes(a-i.offset-1));return i.skip(1),Ex(r),r}function Tx(i,a){return m0.decode(i.readBytes(a))}const xs={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Xu={UNKNOWN:-1,DEFLATE:0},Zp={UNKNOWN:-1,ADAPTIVE:0},Zu={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Id={NONE:0,BACKGROUND:1,PREVIOUS:2},ef={SOURCE:0,OVER:1};class Rx extends Ff{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(a,r={}){super(a);const{checkCrc:o=!1}=r;this._checkCrc=o,this._inflator=new Gp,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Xu.UNKNOWN,this._filterMethod=Zp.UNKNOWN,this._interlaceMethod=Zu.UNKNOWN,this._colorType=xs.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Xp(this);!this._end;){const a=this.readUint32(),r=this.readChars(4);this.decodeChunk(a,r)}return this.decodeImage(),this._png}decodeApng(){for(Xp(this);!this._end;){const a=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(a,r)}return this.decodeApngImage(),this._apng}decodeChunk(a,r){const o=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(a);break;case"IDAT":this.decodeIDAT(a);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(a);break;case"iCCP":this.decodeiCCP(a);break;case _x:Fx(this._png.text,this,a);break;case"pHYs":this.decodepHYs();break;default:this.skip(a);break}if(this.offset-o!==a)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Kp(this,a+4,r):this.skip(4)}decodeApngChunk(a,r){const o=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(a);break;default:this.decodeChunk(a,r),this.offset=o+a;break}if(this.offset-o!==a)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Kp(this,a+4,r):this.skip(4)}decodeIHDR(){const a=this._png;a.width=this.readUint32(),a.height=this.readUint32(),a.depth=Ox(this.readUint8());const r=this.readUint8();this._colorType=r;let o;switch(r){case xs.GREYSCALE:o=1;break;case xs.TRUECOLOUR:o=3;break;case xs.INDEXED_COLOUR:o=1;break;case xs.GREYSCALE_ALPHA:o=2;break;case xs.TRUECOLOUR_ALPHA:o=4;break;case xs.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=o,this._compressionMethod=this.readUint8(),this._compressionMethod!==Xu.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const a={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(a)}decodePLTE(a){if(a%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${a}`);const r=a/3;this._hasPalette=!0;const o=[];this._palette=o;for(let c=0;c<r;c++)o.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(a){this._writingDataChunks=!0;const r=a,o=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,o,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodeFDAT(a){this._writingDataChunks=!0;let r=a,o=this.offset+this.byteOffset;if(o+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,o,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodetRNS(a){switch(this._colorType){case xs.GREYSCALE:case xs.TRUECOLOUR:{if(a%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${a}`);if(a/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${a/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(a/2);for(let r=0;r<a/2;r++)this._transparency[r]=this.readUint16();break}case xs.INDEXED_COLOUR:{if(a>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${a} vs ${this._palette.length})`);let r=0;for(;r<a;r++){const o=this.readByte();this._palette[r].push(o)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case xs.UNKNOWN:case xs.GREYSCALE_ALPHA:case xs.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(a){const r=g0(this),o=this.readUint8();if(o!==Xu.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${o}`);const c=this.readBytes(a-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:px(c)}}decodepHYs(){const a=this.readUint32(),r=this.readUint32(),o=this.readByte();this._png.resolution={x:a,y:r,unit:o}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let a=0;a<this._numberOfFrames;a++){const r={sequenceNumber:this._frames[a].sequenceNumber,delayNumber:this._frames[a].delayNumber,delayDenominator:this._frames[a].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},o=this._frames.at(a);if(o){if(o.data=Qp({data:o.data,width:o.width,height:o.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),a===0||o.xOffset===0&&o.yOffset===0&&o.width===this._png.width&&o.height===this._png.height)r.data=o.data;else{const c=this._apng.frames.at(a-1);this.disposeFrame(o,c,r),this.addFrameDataToCanvas(r,o)}this._apng.frames.push(r)}}return this._apng}disposeFrame(a,r,o){switch(a.disposeOp){case Id.NONE:break;case Id.BACKGROUND:for(let c=0;c<this._png.height;c++)for(let l=0;l<this._png.width;l++){const m=(c*a.width+l)*this._png.channels;for(let p=0;p<this._png.channels;p++)o.data[m+p]=0}break;case Id.PREVIOUS:o.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(a,r){const o=1<<this._png.depth,c=(l,m)=>{const p=((l+r.yOffset)*this._png.width+r.xOffset+m)*this._png.channels,g=(l*r.width+m)*this._png.channels;return{index:p,frameIndex:g}};switch(r.blendOp){case ef.SOURCE:for(let l=0;l<r.height;l++)for(let m=0;m<r.width;m++){const{index:p,frameIndex:g}=c(l,m);for(let v=0;v<this._png.channels;v++)a.data[p+v]=r.data[g+v]}break;case ef.OVER:for(let l=0;l<r.height;l++)for(let m=0;m<r.width;m++){const{index:p,frameIndex:g}=c(l,m);for(let v=0;v<this._png.channels;v++){const j=r.data[g+this._png.channels-1]/o,A=v%(this._png.channels-1)===0?1:r.data[g+v],M=Math.floor(j*A+(1-j)*a.data[p+v]);a.data[p+v]+=M}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const a=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Zp.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Zu.NO_INTERLACE)this._png.data=Qp({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Zu.ADAM7)this._png.data=jx({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const a=this._inflator.result,r=this._frames.at(-1);r?r.data=a:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Id.NONE,blendOp:ef.SOURCE,data:a}),this._inflator=new Gp,this._writingDataChunks=!1}}function Ox(i){if(i!==1&&i!==2&&i!==4&&i!==8&&i!==16)throw new Error(`invalid bit depth: ${i}`);return i}var em;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.METRE=1]="METRE"})(em||(em={}));function Bx(i,a){return new Rx(i,a).decode()}var un=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function tf(){un.console&&typeof un.console.log=="function"&&un.console.log.apply(un.console,arguments)}var fr={log:tf,warn:function(i){un.console&&(typeof un.console.warn=="function"?un.console.warn.apply(un.console,arguments):tf.call(null,arguments))},error:function(i){un.console&&(typeof un.console.error=="function"?un.console.error.apply(un.console,arguments):tf(i))}};function nf(i,a,r){var o=new XMLHttpRequest;o.open("GET",i),o.responseType="blob",o.onload=function(){Ol(o.response,a,r)},o.onerror=function(){fr.error("could not download file")},o.send()}function tm(i){var a=new XMLHttpRequest;a.open("HEAD",i,!1);try{a.send()}catch{}return a.status>=200&&a.status<=299}function Ed(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(a)}}var Ol=un.saveAs||((typeof window>"u"?"undefined":ar(window))!=="object"||window!==un?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,a,r){var o=un.URL||un.webkitURL,c=document.createElement("a");a=a||i.name||"download",c.download=a,c.rel="noopener",typeof i=="string"?(c.href=i,c.origin!==location.origin?tm(c.href)?nf(i,a,r):Ed(c,c.target="_blank"):Ed(c)):(c.href=o.createObjectURL(i),setTimeout(function(){o.revokeObjectURL(c.href)},4e4),setTimeout(function(){Ed(c)},0))}:"msSaveOrOpenBlob"in navigator?function(i,a,r){if(a=a||i.name||"download",typeof i=="string")if(tm(i))nf(i,a,r);else{var o=document.createElement("a");o.href=i,o.target="_blank",setTimeout(function(){Ed(o)})}else navigator.msSaveOrOpenBlob((function(c,l){return l===void 0?l={autoBom:!1}:ar(l)!=="object"&&(fr.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c})(i,r),a)}:function(i,a,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),typeof i=="string")return nf(i,a,r);var c=i.type==="application/octet-stream",l=/constructor/i.test(un.HTMLElement)||un.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||c&&l)&&(typeof FileReader>"u"?"undefined":ar(FileReader))==="object"){var p=new FileReader;p.onloadend=function(){var j=p.result;j=m?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=j:location=j,o=null},p.readAsDataURL(i)}else{var g=un.URL||un.webkitURL,v=g.createObjectURL(i);o?o.location=v:location.href=v,o=null,setTimeout(function(){g.revokeObjectURL(v)},4e4)}});function x0(i){var a;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(p){return[parseInt(p[1]),parseInt(p[2]),parseInt(p[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(p){return[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(p){return[parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16),parseInt(p[3]+p[3],16)]}}],o=0;o<r.length;o++){var c=r[o].re,l=r[o].process,m=c.exec(i);m&&(a=l(m),this.r=a[0],this.g=a[1],this.b=a[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var p=this.r.toString(16),g=this.g.toString(16),v=this.b.toString(16);return p.length==1&&(p="0"+p),g.length==1&&(g="0"+g),v.length==1&&(v="0"+v),"#"+p+g+v}}var Od=un.atob.bind(un),nm=un.btoa.bind(un);function rf(i,a){var r=i[0],o=i[1],c=i[2],l=i[3];r=Ii(r,o,c,l,a[0],7,-680876936),l=Ii(l,r,o,c,a[1],12,-389564586),c=Ii(c,l,r,o,a[2],17,606105819),o=Ii(o,c,l,r,a[3],22,-1044525330),r=Ii(r,o,c,l,a[4],7,-176418897),l=Ii(l,r,o,c,a[5],12,1200080426),c=Ii(c,l,r,o,a[6],17,-1473231341),o=Ii(o,c,l,r,a[7],22,-45705983),r=Ii(r,o,c,l,a[8],7,1770035416),l=Ii(l,r,o,c,a[9],12,-1958414417),c=Ii(c,l,r,o,a[10],17,-42063),o=Ii(o,c,l,r,a[11],22,-1990404162),r=Ii(r,o,c,l,a[12],7,1804603682),l=Ii(l,r,o,c,a[13],12,-40341101),c=Ii(c,l,r,o,a[14],17,-1502002290),r=Ei(r,o=Ii(o,c,l,r,a[15],22,1236535329),c,l,a[1],5,-165796510),l=Ei(l,r,o,c,a[6],9,-1069501632),c=Ei(c,l,r,o,a[11],14,643717713),o=Ei(o,c,l,r,a[0],20,-373897302),r=Ei(r,o,c,l,a[5],5,-701558691),l=Ei(l,r,o,c,a[10],9,38016083),c=Ei(c,l,r,o,a[15],14,-660478335),o=Ei(o,c,l,r,a[4],20,-405537848),r=Ei(r,o,c,l,a[9],5,568446438),l=Ei(l,r,o,c,a[14],9,-1019803690),c=Ei(c,l,r,o,a[3],14,-187363961),o=Ei(o,c,l,r,a[8],20,1163531501),r=Ei(r,o,c,l,a[13],5,-1444681467),l=Ei(l,r,o,c,a[2],9,-51403784),c=Ei(c,l,r,o,a[7],14,1735328473),r=Mi(r,o=Ei(o,c,l,r,a[12],20,-1926607734),c,l,a[5],4,-378558),l=Mi(l,r,o,c,a[8],11,-2022574463),c=Mi(c,l,r,o,a[11],16,1839030562),o=Mi(o,c,l,r,a[14],23,-35309556),r=Mi(r,o,c,l,a[1],4,-1530992060),l=Mi(l,r,o,c,a[4],11,1272893353),c=Mi(c,l,r,o,a[7],16,-155497632),o=Mi(o,c,l,r,a[10],23,-1094730640),r=Mi(r,o,c,l,a[13],4,681279174),l=Mi(l,r,o,c,a[0],11,-358537222),c=Mi(c,l,r,o,a[3],16,-722521979),o=Mi(o,c,l,r,a[6],23,76029189),r=Mi(r,o,c,l,a[9],4,-640364487),l=Mi(l,r,o,c,a[12],11,-421815835),c=Mi(c,l,r,o,a[15],16,530742520),r=Di(r,o=Mi(o,c,l,r,a[2],23,-995338651),c,l,a[0],6,-198630844),l=Di(l,r,o,c,a[7],10,1126891415),c=Di(c,l,r,o,a[14],15,-1416354905),o=Di(o,c,l,r,a[5],21,-57434055),r=Di(r,o,c,l,a[12],6,1700485571),l=Di(l,r,o,c,a[3],10,-1894986606),c=Di(c,l,r,o,a[10],15,-1051523),o=Di(o,c,l,r,a[1],21,-2054922799),r=Di(r,o,c,l,a[8],6,1873313359),l=Di(l,r,o,c,a[15],10,-30611744),c=Di(c,l,r,o,a[6],15,-1560198380),o=Di(o,c,l,r,a[13],21,1309151649),r=Di(r,o,c,l,a[4],6,-145523070),l=Di(l,r,o,c,a[11],10,-1120210379),c=Di(c,l,r,o,a[2],15,718787259),o=Di(o,c,l,r,a[9],21,-343485551),i[0]=gl(r,i[0]),i[1]=gl(o,i[1]),i[2]=gl(c,i[2]),i[3]=gl(l,i[3])}function Zd(i,a,r,o,c,l){return a=gl(gl(a,i),gl(o,l)),gl(a<<c|a>>>32-c,r)}function Ii(i,a,r,o,c,l,m){return Zd(a&r|~a&o,i,a,c,l,m)}function Ei(i,a,r,o,c,l,m){return Zd(a&o|r&~o,i,a,c,l,m)}function Mi(i,a,r,o,c,l,m){return Zd(a^r^o,i,a,c,l,m)}function Di(i,a,r,o,c,l,m){return Zd(r^(a|~o),i,a,c,l,m)}function y0(i){var a,r=i.length,o=[1732584193,-271733879,-1732584194,271733878];for(a=64;a<=i.length;a+=64)rf(o,zx(i.substring(a-64,a)));i=i.substring(a-64);var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(a=0;a<i.length;a++)c[a>>2]|=i.charCodeAt(a)<<(a%4<<3);if(c[a>>2]|=128<<(a%4<<3),a>55)for(rf(o,c),a=0;a<16;a++)c[a]=0;return c[14]=8*r,rf(o,c),o}function zx(i){var a,r=[];for(a=0;a<64;a+=4)r[a>>2]=i.charCodeAt(a)+(i.charCodeAt(a+1)<<8)+(i.charCodeAt(a+2)<<16)+(i.charCodeAt(a+3)<<24);return r}var rm="0123456789abcdef".split("");function Ux(i){for(var a="",r=0;r<4;r++)a+=rm[i>>8*r+4&15]+rm[i>>8*r&15];return a}function qx(i){return String.fromCharCode(255&i,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function wf(i){return y0(i).map(qx).join("")}var $x=(function(i){for(var a=0;a<i.length;a++)i[a]=Ux(i[a]);return i.join("")})(y0("hello"))!="5d41402abc4b2a76b9719d911017c592";function gl(i,a){if($x){var r=(65535&i)+(65535&a);return(i>>16)+(a>>16)+(r>>16)<<16|65535&r}return i+a&4294967295}function jf(i,a){var r,o,c,l;if(i!==r){for(var m=(c=i,l=1+(256/i.length|0),new Array(l+1).join(c)),p=[],g=0;g<256;g++)p[g]=g;var v=0;for(g=0;g<256;g++){var j=p[g];v=(v+j+m.charCodeAt(g))%256,p[g]=p[v],p[v]=j}r=i,o=p}else p=o;var A=a.length,M=0,b=0,U="";for(g=0;g<A;g++)b=(b+(j=p[M=(M+1)%256]))%256,p[M]=p[b],p[b]=j,m=p[(p[M]+p[b])%256],U+=String.fromCharCode(a.charCodeAt(g)^m);return U}var am={print:4,modify:8,copy:16,"annot-forms":32};function pc(i,a,r,o){this.v=1,this.r=2;var c=192;i.forEach(function(p){if(am.perm!==void 0)throw new Error("Invalid permission: "+p);c+=am[p]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(a+this.padding).substr(0,32),m=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,m),this.P=-(1+(255^c)),this.encryptionKey=wf(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(o)).substr(0,5),this.U=jf(this.encryptionKey,this.padding)}function mc(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var a="",r=i.length,o=0;o<r;o++){var c=i.charCodeAt(o);a+=c<33||c===35||c===37||c===40||c===41||c===47||c===60||c===62||c===91||c===93||c===123||c===125||c>126?"#"+("0"+c.toString(16)).slice(-2):i[o]}return a}function im(i){if(ar(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var a={};this.subscribe=function(r,o,c){if(c=c||!1,typeof r!="string"||typeof o!="function"||typeof c!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");a.hasOwnProperty(r)||(a[r]={});var l=Math.random().toString(35);return a[r][l]=[o,!!c],l},this.unsubscribe=function(r){for(var o in a)if(a[o][r])return delete a[o][r],Object.keys(a[o]).length===0&&delete a[o],!0;return!1},this.publish=function(r){if(a.hasOwnProperty(r)){var o=Array.prototype.slice.call(arguments,1),c=[];for(var l in a[r]){var m=a[r][l];try{m[0].apply(i,o)}catch(p){un.console&&fr.error("jsPDF PubSub Error",p.message,p)}m[1]&&c.push(l)}c.length&&c.forEach(this.unsubscribe)}},this.getTopics=function(){return a}}function Yd(i){if(!(this instanceof Yd))return new Yd(i);var a="opacity,stroke-opacity".split(",");for(var r in i)i.hasOwnProperty(r)&&a.indexOf(r)>=0&&(this[r]=i[r]);this.id="",this.objectNumber=-1}function v0(i,a){this.gState=i,this.matrix=a,this.id="",this.objectNumber=-1}function Bl(i,a,r,o,c){if(!(this instanceof Bl))return new Bl(i,a,r,o,c);this.type=i==="axial"?2:3,this.coords=a,this.colors=r,v0.call(this,o,c)}function gc(i,a,r,o,c){if(!(this instanceof gc))return new gc(i,a,r,o,c);this.boundingBox=i,this.xStep=a,this.yStep=r,this.stream="",this.cloneIndex=0,v0.call(this,o,c)}function Gt(i){var a,r=typeof arguments[0]=="string"?arguments[0]:"p",o=arguments[1],c=arguments[2],l=arguments[3],m=[],p=1,g=16,v="S",j=null;ar(i=i||{})==="object"&&(r=i.orientation,o=i.unit||o,c=i.format||c,l=i.compress||i.compressPdf||l,(j=i.encryption||null)!==null&&(j.userPassword=j.userPassword||"",j.ownerPassword=j.ownerPassword||"",j.userPermissions=j.userPermissions||[]),p=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(a=i.precision),i.floatPrecision!==void 0&&(g=i.floatPrecision),v=i.defaultPathOperation||"S"),m=i.filters||(l===!0?["FlateEncode"]:m),o=o||"mm",r=(""+(r||"P")).toLowerCase();var A=i.putOnlyUsedFonts||!1,M={},b={internal:{},__private__:{}};b.__private__.PubSub=im;var U="1.3",E=b.__private__.getPdfVersion=function(){return U};b.__private__.setPdfVersion=function(x){U=x};var I={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return I};var P=b.__private__.getPageFormat=function(x){return I[x]};c=c||"a4";var W="compat",X="advanced",H=W;function fe(){this.saveGraphicsState(),V(new St(se,0,0,-se,0,bi()*se).toString()+" cm"),this.setFontSize(this.getFontSize()/se),v="n",H=X}function he(){this.restoreGraphicsState(),v="S",H=W}var Ee=b.__private__.combineFontStyleAndFontWeight=function(x,L){if(x=="bold"&&L=="normal"||x=="bold"&&L==400||x=="normal"&&L=="italic"||x=="bold"&&L=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return L&&(x=L==400||L==="normal"?x==="italic"?"italic":"normal":L!=700&&L!=="bold"||x!=="normal"?(L==700?"bold":L)+""+x:"bold"),x};b.advancedAPI=function(x){var L=H===W;return L&&fe.call(this),typeof x!="function"||(x(this),L&&he.call(this)),this},b.compatAPI=function(x){var L=H===X;return L&&he.call(this),typeof x!="function"||(x(this),L&&fe.call(this)),this},b.isAdvancedAPI=function(){return H===X};var ge,ee=function(x){if(H!==X)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},xe=b.roundToPrecision=b.__private__.roundToPrecision=function(x,L){var ae=a||L;if(isNaN(x)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(ae).replace(/0+$/,"")};ge=b.hpf=b.__private__.hpf=typeof g=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return xe(x,g)}:g==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return xe(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return xe(x,16)};var z=b.f2=b.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return xe(x,2)},$=b.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return xe(x,3)},le=b.scale=b.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return H===W?x*se:H===X?x:void 0},ie=function(x){return le((function(L){return H===W?bi()-L:H===X?L:void 0})(x))};b.__private__.setPrecision=b.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(a=parseInt(x,10))};var we,_e="00000000000000000000000000000000",Ie=b.__private__.getFileId=function(){return _e},pe=b.__private__.setFileId=function(x){return _e=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():_e.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),j!==null&&(Hr=new pc(j.userPermissions,j.userPassword,j.ownerPassword,_e)),_e};b.setFileId=function(x){return pe(x),this},b.getFileId=function(){return Ie()};var Pe=b.__private__.convertDateToPDFDate=function(x){var L=x.getTimezoneOffset(),ae=L<0?"+":"-",me=Math.floor(Math.abs(L/60)),Le=Math.abs(L%60),Ke=[ae,Z(me),"'",Z(Le),"'"].join("");return["D:",x.getFullYear(),Z(x.getMonth()+1),Z(x.getDate()),Z(x.getHours()),Z(x.getMinutes()),Z(x.getSeconds()),Ke].join("")},ze=b.__private__.convertPDFDateToDate=function(x){var L=parseInt(x.substr(2,4),10),ae=parseInt(x.substr(6,2),10)-1,me=parseInt(x.substr(8,2),10),Le=parseInt(x.substr(10,2),10),Ke=parseInt(x.substr(12,2),10),nt=parseInt(x.substr(14,2),10);return new Date(L,ae,me,Le,Ke,nt,0)},te=b.__private__.setCreationDate=function(x){var L;if(x===void 0&&(x=new Date),x instanceof Date)L=Pe(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");L=x}return we=L},C=b.__private__.getCreationDate=function(x){var L=we;return x==="jsDate"&&(L=ze(we)),L};b.setCreationDate=function(x){return te(x),this},b.getCreationDate=function(x){return C(x)};var J,Z=b.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},de=b.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},ce=0,be=[],Me=[],Fe=0,We=[],De=[],it=!1,ot=Me;b.__private__.setCustomOutputDestination=function(x){it=!0,ot=x};var pt=function(x){it||(ot=x)};b.__private__.resetCustomOutputDestination=function(){it=!1,ot=Me};var V=b.__private__.out=function(x){return x=x.toString(),Fe+=x.length+1,ot.push(x),ot},et=b.__private__.write=function(x){return V(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Et=b.__private__.getArrayBuffer=function(x){for(var L=x.length,ae=new ArrayBuffer(L),me=new Uint8Array(ae);L--;)me[L]=x.charCodeAt(L);return ae},Ct=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return Ct};var Xe=i.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(x){return Xe=H===X?x/se:x,this};var bt,mt=b.__private__.getFontSize=b.getFontSize=function(){return H===W?Xe:Xe*se},Pt=i.R2L||!1;b.__private__.setR2L=b.setR2L=function(x){return Pt=x,this},b.__private__.getR2L=b.getR2L=function(){return Pt};var Dt,wt=b.__private__.setZoomMode=function(x){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))bt=x;else if(isNaN(x)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');bt=x}else bt=parseInt(x,10)};b.__private__.getZoomMode=function(){return bt};var Qt,zt=b.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');Dt=x};b.__private__.getPageMode=function(){return Dt};var $t=b.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');Qt=x};b.__private__.getLayoutMode=function(){return Qt},b.__private__.setDisplayMode=b.setDisplayMode=function(x,L,ae){return wt(x),$t(L),zt(ae),this};var Ae={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(x){if(Object.keys(Ae).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ae[x]},b.__private__.getDocumentProperties=function(){return Ae},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(x){for(var L in Ae)Ae.hasOwnProperty(L)&&x[L]&&(Ae[L]=x[L]);return this},b.__private__.setDocumentProperty=function(x,L){if(Object.keys(Ae).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ae[x]=L};var qe,se,Se,rt,ht,He={},ct={},Vt=[],vt={},An={},Jt={},Ut={},gn=null,Xt=0,oe=[],xt=new im(b),pa=i.hotfixes||[],ln={},jr={},nn=[],St=function x(L,ae,me,Le,Ke,nt){if(!(this instanceof x))return new x(L,ae,me,Le,Ke,nt);isNaN(L)&&(L=1),isNaN(ae)&&(ae=0),isNaN(me)&&(me=0),isNaN(Le)&&(Le=1),isNaN(Ke)&&(Ke=0),isNaN(nt)&&(nt=0),this._matrix=[L,ae,me,Le,Ke,nt]};Object.defineProperty(St.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(St.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(St.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(St.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(St.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(St.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(St.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(St.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(St.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(St.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(St.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(St.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(St.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(St.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(St.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(St.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),St.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ge).join(x)},St.prototype.multiply=function(x){var L=x.sx*this.sx+x.shy*this.shx,ae=x.sx*this.shy+x.shy*this.sy,me=x.shx*this.sx+x.sy*this.shx,Le=x.shx*this.shy+x.sy*this.sy,Ke=x.tx*this.sx+x.ty*this.shx+this.tx,nt=x.tx*this.shy+x.ty*this.sy+this.ty;return new St(L,ae,me,Le,Ke,nt)},St.prototype.decompose=function(){var x=this.sx,L=this.shy,ae=this.shx,me=this.sy,Le=this.tx,Ke=this.ty,nt=Math.sqrt(x*x+L*L),Nt=(x/=nt)*ae+(L/=nt)*me;ae-=x*Nt,me-=L*Nt;var Ot=Math.sqrt(ae*ae+me*me);return Nt/=Ot,x*(me/=Ot)<L*(ae/=Ot)&&(x=-x,L=-L,Nt=-Nt,nt=-nt),{scale:new St(nt,0,0,Ot,0,0),translate:new St(1,0,0,1,Le,Ke),rotate:new St(x,L,-L,x,0,0),skew:new St(1,0,Nt,1,0,0)}},St.prototype.toString=function(x){return this.join(" ")},St.prototype.inversed=function(){var x=this.sx,L=this.shy,ae=this.shx,me=this.sy,Le=this.tx,Ke=this.ty,nt=1/(x*me-L*ae),Nt=me*nt,Ot=-L*nt,Ht=-ae*nt,an=x*nt;return new St(Nt,Ot,Ht,an,-Nt*Le-Ht*Ke,-Ot*Le-an*Ke)},St.prototype.applyToPoint=function(x){var L=x.x*this.sx+x.y*this.shx+this.tx,ae=x.x*this.shy+x.y*this.sy+this.ty;return new yi(L,ae)},St.prototype.applyToRectangle=function(x){var L=this.applyToPoint(x),ae=this.applyToPoint(new yi(x.x+x.w,x.y+x.h));return new Yi(L.x,L.y,ae.x-L.x,ae.y-L.y)},St.prototype.clone=function(){var x=this.sx,L=this.shy,ae=this.shx,me=this.sy,Le=this.tx,Ke=this.ty;return new St(x,L,ae,me,Le,Ke)},b.Matrix=St;var rn=b.matrixMult=function(x,L){return L.multiply(x)},ir=new St(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=ir;var ta=function(x,L){if(!An[x]){var ae=(L instanceof Bl?"Sh":"P")+(Object.keys(vt).length+1).toString(10);L.id=ae,An[x]=ae,vt[ae]=L,xt.publish("addPattern",L)}};b.ShadingPattern=Bl,b.TilingPattern=gc,b.addShadingPattern=function(x,L){return ee("addShadingPattern()"),ta(x,L),this},b.beginTilingPattern=function(x){ee("beginTilingPattern()"),ga(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},b.endTilingPattern=function(x,L){ee("endTilingPattern()"),L.stream=De[J].join(`
`),ta(x,L),xt.publish("endTilingPattern",L),nn.pop().restore()};var Ka,zn=b.__private__.newObject=function(){var x=hr();return $n(x,!0),x},hr=b.__private__.newObjectDeferred=function(){return ce++,be[ce]=function(){return Fe},ce},$n=function(x,L){return L=typeof L=="boolean"&&L,be[x]=Fe,L&&V(x+" 0 obj"),x},vs=b.__private__.newAdditionalObject=function(){var x={objId:hr(),content:""};return We.push(x),x},Rs=hr(),Qa=hr(),Lt=b.__private__.decodeColorString=function(x){var L=x.split(" ");if(L.length!==2||L[1]!=="g"&&L[1]!=="G")L.length!==5||L[4]!=="k"&&L[4]!=="K"||(L=[(1-L[0])*(1-L[3]),(1-L[1])*(1-L[3]),(1-L[2])*(1-L[3]),"r"]);else{var ae=parseFloat(L[0]);L=[ae,ae,ae,"r"]}for(var me="#",Le=0;Le<3;Le++)me+=("0"+Math.floor(255*parseFloat(L[Le])).toString(16)).slice(-2);return me},Dn=b.__private__.encodeColorString=function(x){var L;typeof x=="string"&&(x={ch1:x});var ae=x.ch1,me=x.ch2,Le=x.ch3,Ke=x.ch4,nt=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var Nt=new x0(ae);if(Nt.ok)ae=Nt.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var Ot=parseInt(ae.substr(1),16);ae=Ot>>16&255,me=Ot>>8&255,Le=255&Ot}if(me===void 0||Ke===void 0&&ae===me&&me===Le)L=typeof ae=="string"?ae+" "+nt[0]:x.precision===2?z(ae/255)+" "+nt[0]:$(ae/255)+" "+nt[0];else if(Ke===void 0||ar(Ke)==="object"){if(Ke&&!isNaN(Ke.a)&&Ke.a===0)return["1.","1.","1.",nt[1]].join(" ");L=typeof ae=="string"?[ae,me,Le,nt[1]].join(" "):x.precision===2?[z(ae/255),z(me/255),z(Le/255),nt[1]].join(" "):[$(ae/255),$(me/255),$(Le/255),nt[1]].join(" ")}else L=typeof ae=="string"?[ae,me,Le,Ke,nt[2]].join(" "):x.precision===2?[z(ae),z(me),z(Le),z(Ke),nt[2]].join(" "):[$(ae),$(me),$(Le),$(Ke),nt[2]].join(" ");return L},Ra=b.__private__.getFilters=function(){return m},Oa=b.__private__.putStream=function(x){var L=(x=x||{}).data||"",ae=x.filters||Ra(),me=x.alreadyAppliedFilters||[],Le=x.addLength1||!1,Ke=L.length,nt=x.objectId,Nt=function(Nr){return Nr};if(j!==null&&nt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");j!==null&&(Nt=Hr.encryptor(nt,0));var Ot={};ae===!0&&(ae=["FlateEncode"]);var Ht=x.additionalKeyValues||[],an=(Ot=Gt.API.processDataByFilters!==void 0?Gt.API.processDataByFilters(L,ae):{data:L,reverseChain:[]}).reverseChain+(Array.isArray(me)?me.join(" "):me.toString());if(Ot.data.length!==0&&(Ht.push({key:"Length",value:Ot.data.length}),Le===!0&&Ht.push({key:"Length1",value:Ke})),an.length!=0)if(an.split("/").length-1==1)Ht.push({key:"Filter",value:an});else{Ht.push({key:"Filter",value:"["+an+"]"});for(var fn=0;fn<Ht.length;fn+=1)if(Ht[fn].key==="DecodeParms"){for(var cr=[],dr=0;dr<Ot.reverseChain.split("/").length-1;dr+=1)cr.push("null");cr.push(Ht[fn].value),Ht[fn].value="["+cr.join(" ")+"]"}}V("<<");for(var Yn=0;Yn<Ht.length;Yn++)V("/"+Ht[Yn].key+" "+Ht[Yn].value);V(">>"),Ot.data.length!==0&&(V("stream"),V(Nt(Ot.data)),V("endstream"))},Wn=b.__private__.putPage=function(x){var L=x.number,ae=x.data,me=x.objId,Le=x.contentsObjId;$n(me,!0),V("<</Type /Page"),V("/Parent "+x.rootDictionaryObjId+" 0 R"),V("/Resources "+x.resourceDictionaryObjId+" 0 R"),V("/MediaBox ["+parseFloat(ge(x.mediaBox.bottomLeftX))+" "+parseFloat(ge(x.mediaBox.bottomLeftY))+" "+ge(x.mediaBox.topRightX)+" "+ge(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&V("/CropBox ["+ge(x.cropBox.bottomLeftX)+" "+ge(x.cropBox.bottomLeftY)+" "+ge(x.cropBox.topRightX)+" "+ge(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&V("/BleedBox ["+ge(x.bleedBox.bottomLeftX)+" "+ge(x.bleedBox.bottomLeftY)+" "+ge(x.bleedBox.topRightX)+" "+ge(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&V("/TrimBox ["+ge(x.trimBox.bottomLeftX)+" "+ge(x.trimBox.bottomLeftY)+" "+ge(x.trimBox.topRightX)+" "+ge(x.trimBox.topRightY)+"]"),x.artBox!==null&&V("/ArtBox ["+ge(x.artBox.bottomLeftX)+" "+ge(x.artBox.bottomLeftY)+" "+ge(x.artBox.topRightX)+" "+ge(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&V("/UserUnit "+x.userUnit),xt.publish("putPage",{objId:me,pageContext:oe[L],pageNumber:L,page:ae}),V("/Contents "+Le+" 0 R"),V(">>"),V("endobj");var Ke=ae.join(`
`);return H===X&&(Ke+=`
Q`),$n(Le,!0),Oa({data:Ke,filters:Ra(),objectId:Le}),V("endobj"),me},Kn=b.__private__.putPages=function(){var x,L,ae=[];for(x=1;x<=Xt;x++)oe[x].objId=hr(),oe[x].contentsObjId=hr();for(x=1;x<=Xt;x++)ae.push(Wn({number:x,data:De[x],objId:oe[x].objId,contentsObjId:oe[x].contentsObjId,mediaBox:oe[x].mediaBox,cropBox:oe[x].cropBox,bleedBox:oe[x].bleedBox,trimBox:oe[x].trimBox,artBox:oe[x].artBox,userUnit:oe[x].userUnit,rootDictionaryObjId:Rs,resourceDictionaryObjId:Qa}));$n(Rs,!0),V("<</Type /Pages");var me="/Kids [";for(L=0;L<Xt;L++)me+=ae[L]+" 0 R ";V(me+"]"),V("/Count "+Xt),V(">>"),V("endobj"),xt.publish("postPutPages")},Qn=function(x){xt.publish("putFont",{font:x,out:V,newObject:zn,putStream:Oa}),x.isAlreadyPutted!==!0&&(x.objectNumber=zn(),V("<<"),V("/Type /Font"),V("/BaseFont /"+mc(x.postScriptName)),V("/Subtype /Type1"),typeof x.encoding=="string"&&V("/Encoding /"+x.encoding),V("/FirstChar 32"),V("/LastChar 255"),V(">>"),V("endobj"))},Or=function(x){x.objectNumber=zn();var L=[];L.push({key:"Type",value:"/XObject"}),L.push({key:"Subtype",value:"/Form"}),L.push({key:"BBox",value:"["+[ge(x.x),ge(x.y),ge(x.x+x.width),ge(x.y+x.height)].join(" ")+"]"}),L.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var ae=x.pages[1].join(`
`);Oa({data:ae,additionalKeyValues:L,objectId:x.objectNumber}),V("endobj")},Os=function(x,L){L||(L=21);var ae=zn(),me=(function(nt,Nt){var Ot,Ht=[],an=1/(Nt-1);for(Ot=0;Ot<1;Ot+=an)Ht.push(Ot);if(Ht.push(1),nt[0].offset!=0){var fn={offset:0,color:nt[0].color};nt.unshift(fn)}if(nt[nt.length-1].offset!=1){var cr={offset:1,color:nt[nt.length-1].color};nt.push(cr)}for(var dr="",Yn=0,Nr=0;Nr<Ht.length;Nr++){for(Ot=Ht[Nr];Ot>nt[Yn+1].offset;)Yn++;var kr=nt[Yn].offset,Yr=(Ot-kr)/(nt[Yn+1].offset-kr),Gi=nt[Yn].color,Zn=nt[Yn+1].color;dr+=de(Math.round((1-Yr)*Gi[0]+Yr*Zn[0]).toString(16))+de(Math.round((1-Yr)*Gi[1]+Yr*Zn[1]).toString(16))+de(Math.round((1-Yr)*Gi[2]+Yr*Zn[2]).toString(16))}return dr.trim()})(x.colors,L),Le=[];Le.push({key:"FunctionType",value:"0"}),Le.push({key:"Domain",value:"[0.0 1.0]"}),Le.push({key:"Size",value:"["+L+"]"}),Le.push({key:"BitsPerSample",value:"8"}),Le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Oa({data:me,additionalKeyValues:Le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),V("endobj"),x.objectNumber=zn(),V("<< /ShadingType "+x.type),V("/ColorSpace /DeviceRGB");var Ke="/Coords ["+ge(parseFloat(x.coords[0]))+" "+ge(parseFloat(x.coords[1]))+" ";x.type===2?Ke+=ge(parseFloat(x.coords[2]))+" "+ge(parseFloat(x.coords[3])):Ke+=ge(parseFloat(x.coords[2]))+" "+ge(parseFloat(x.coords[3]))+" "+ge(parseFloat(x.coords[4]))+" "+ge(parseFloat(x.coords[5])),V(Ke+="]"),x.matrix&&V("/Matrix ["+x.matrix.toString()+"]"),V("/Function "+ae+" 0 R"),V("/Extend [true true]"),V(">>"),V("endobj")},Fi=function(x,L){var ae=hr(),me=zn();L.push({resourcesOid:ae,objectOid:me}),x.objectNumber=me;var Le=[];Le.push({key:"Type",value:"/Pattern"}),Le.push({key:"PatternType",value:"1"}),Le.push({key:"PaintType",value:"1"}),Le.push({key:"TilingType",value:"1"}),Le.push({key:"BBox",value:"["+x.boundingBox.map(ge).join(" ")+"]"}),Le.push({key:"XStep",value:ge(x.xStep)}),Le.push({key:"YStep",value:ge(x.yStep)}),Le.push({key:"Resources",value:ae+" 0 R"}),x.matrix&&Le.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),Oa({data:x.stream,additionalKeyValues:Le,objectId:x.objectNumber}),V("endobj")},ut=function(x){for(var L in x.objectNumber=zn(),V("<<"),x)switch(L){case"opacity":V("/ca "+z(x[L]));break;case"stroke-opacity":V("/CA "+z(x[L]))}V(">>"),V("endobj")},xn=function(x){$n(x.resourcesOid,!0),V("<<"),V("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var L in V("/Font <<"),He)He.hasOwnProperty(L)&&(A===!1||A===!0&&M.hasOwnProperty(L))&&V("/"+L+" "+He[L].objectNumber+" 0 R");V(">>")})(),(function(){if(Object.keys(vt).length>0){for(var L in V("/Shading <<"),vt)vt.hasOwnProperty(L)&&vt[L]instanceof Bl&&vt[L].objectNumber>=0&&V("/"+L+" "+vt[L].objectNumber+" 0 R");xt.publish("putShadingPatternDict"),V(">>")}})(),(function(L){if(Object.keys(vt).length>0){for(var ae in V("/Pattern <<"),vt)vt.hasOwnProperty(ae)&&vt[ae]instanceof b.TilingPattern&&vt[ae].objectNumber>=0&&vt[ae].objectNumber<L&&V("/"+ae+" "+vt[ae].objectNumber+" 0 R");xt.publish("putTilingPatternDict"),V(">>")}})(x.objectOid),(function(){if(Object.keys(Jt).length>0){var L;for(L in V("/ExtGState <<"),Jt)Jt.hasOwnProperty(L)&&Jt[L].objectNumber>=0&&V("/"+L+" "+Jt[L].objectNumber+" 0 R");xt.publish("putGStateDict"),V(">>")}})(),(function(){for(var L in V("/XObject <<"),ln)ln.hasOwnProperty(L)&&ln[L].objectNumber>=0&&V("/"+L+" "+ln[L].objectNumber+" 0 R");xt.publish("putXobjectDict"),V(">>")})(),V(">>"),V("endobj")},ls=function(x){ct[x.fontName]=ct[x.fontName]||{},ct[x.fontName][x.fontStyle]=x.id},Xa=function(x,L,ae,me,Le){var Ke={id:"F"+(Object.keys(He).length+1).toString(10),postScriptName:x,fontName:L,fontStyle:ae,encoding:me,isStandardFont:Le||!1,metadata:{}};return xt.publish("addFont",{font:Ke,instance:this}),He[Ke.id]=Ke,ls(Ke),Ke.id},_r=b.__private__.pdfEscape=b.pdfEscape=function(x,L){return(function(ae,me){var Le,Ke,nt,Nt,Ot,Ht,an,fn,cr;if(nt=(me=me||{}).sourceEncoding||"Unicode",Ot=me.outputEncoding,(me.autoencode||Ot)&&He[qe].metadata&&He[qe].metadata[nt]&&He[qe].metadata[nt].encoding&&(Nt=He[qe].metadata[nt].encoding,!Ot&&He[qe].encoding&&(Ot=He[qe].encoding),!Ot&&Nt.codePages&&(Ot=Nt.codePages[0]),typeof Ot=="string"&&(Ot=Nt[Ot]),Ot)){for(an=!1,Ht=[],Le=0,Ke=ae.length;Le<Ke;Le++)(fn=Ot[ae.charCodeAt(Le)])?Ht.push(String.fromCharCode(fn)):Ht.push(ae[Le]),Ht[Le].charCodeAt(0)>>8&&(an=!0);ae=Ht.join("")}for(Le=ae.length;an===void 0&&Le!==0;)ae.charCodeAt(Le-1)>>8&&(an=!0),Le--;if(!an)return ae;for(Ht=me.noBOM?[]:[254,255],Le=0,Ke=ae.length;Le<Ke;Le++){if((cr=(fn=ae.charCodeAt(Le))>>8)>>8)throw new Error("Character at position "+Le+" of string '"+ae+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ht.push(cr),Ht.push(fn-(cr<<8))}return String.fromCharCode.apply(void 0,Ht)})(x,L).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ka=b.__private__.beginPage=function(x){De[++Xt]=[],oe[Xt]={objId:0,contentsObjId:0,userUnit:Number(p),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},Bs(Xt),pt(De[J])},Za=function(x,L){var ae,me,Le;switch(r=L||r,typeof x=="string"&&(ae=P(x.toLowerCase()),Array.isArray(ae)&&(me=ae[0],Le=ae[1])),Array.isArray(x)&&(me=x[0]*se,Le=x[1]*se),isNaN(me)&&(me=c[0],Le=c[1]),(me>14400||Le>14400)&&(fr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),me=Math.min(14400,me),Le=Math.min(14400,Le)),c=[me,Le],r.substr(0,1)){case"l":Le>me&&(c=[Le,me]);break;case"p":me>Le&&(c=[Le,me])}ka(c),Zt(Hn),V(Pa),qs!==0&&V(qs+" J"),Sr!==0&&V(Sr+" j"),xt.publish("addPage",{pageNumber:Xt})},cs=function(x){x>0&&x<=Xt&&(De.splice(x,1),oe.splice(x,1),Xt--,J>Xt&&(J=Xt),this.setPage(J))},Bs=function(x){x>0&&x<=Xt&&(J=x)},na=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return De.length-1},Aa=function(x,L,ae){var me,Le=void 0;return ae=ae||{},x=x!==void 0?x:He[qe].fontName,L=L!==void 0?L:He[qe].fontStyle,me=x.toLowerCase(),ct[me]!==void 0&&ct[me][L]!==void 0?Le=ct[me][L]:ct[x]!==void 0&&ct[x][L]!==void 0?Le=ct[x][L]:ae.disableWarning===!1&&fr.warn("Unable to look up font label for font '"+x+"', '"+L+"'. Refer to getFontList() for available fonts."),Le||ae.noFallback||(Le=ct.times[L])==null&&(Le=ct.times.normal),Le},Xn=b.__private__.putInfo=function(){var x=zn(),L=function(me){return me};for(var ae in j!==null&&(L=Hr.encryptor(x,0)),V("<<"),V("/Producer ("+_r(L("jsPDF "+Gt.version))+")"),Ae)Ae.hasOwnProperty(ae)&&Ae[ae]&&V("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+_r(L(Ae[ae]))+")");V("/CreationDate ("+_r(L(we))+")"),V(">>"),V("endobj")},pi=b.__private__.putCatalog=function(x){var L=(x=x||{}).rootDictionaryObjId||Rs;switch(zn(),V("<<"),V("/Type /Catalog"),V("/Pages "+L+" 0 R"),bt||(bt="fullwidth"),bt){case"fullwidth":V("/OpenAction [3 0 R /FitH null]");break;case"fullheight":V("/OpenAction [3 0 R /FitV null]");break;case"fullpage":V("/OpenAction [3 0 R /Fit]");break;case"original":V("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+bt;ae.substr(ae.length-1)==="%"&&(bt=parseInt(bt)/100),typeof bt=="number"&&V("/OpenAction [3 0 R /XYZ null null "+z(bt)+"]")}switch(Qt||(Qt="continuous"),Qt){case"continuous":V("/PageLayout /OneColumn");break;case"single":V("/PageLayout /SinglePage");break;case"two":case"twoleft":V("/PageLayout /TwoColumnLeft");break;case"tworight":V("/PageLayout /TwoColumnRight")}Dt&&V("/PageMode /"+Dt),xt.publish("putCatalog"),V(">>"),V("endobj")},To=b.__private__.putTrailer=function(){V("trailer"),V("<<"),V("/Size "+(ce+1)),V("/Root "+ce+" 0 R"),V("/Info "+(ce-1)+" 0 R"),j!==null&&V("/Encrypt "+Hr.oid+" 0 R"),V("/ID [ <"+_e+"> <"+_e+"> ]"),V(">>")},Kt=b.__private__.putHeader=function(){V("%PDF-"+U),V("%")},ei=b.__private__.putXRef=function(){var x="0000000000";V("xref"),V("0 "+(ce+1)),V("0000000000 65535 f ");for(var L=1;L<=ce;L++)typeof be[L]=="function"?V((x+be[L]()).slice(-10)+" 00000 n "):be[L]!==void 0?V((x+be[L]).slice(-10)+" 00000 n "):V("0000000000 00000 n ")},ti=b.__private__.buildDocument=function(){var x;ce=0,Fe=0,Me=[],be=[],We=[],Rs=hr(),Qa=hr(),pt(Me),xt.publish("buildDocument"),Kt(),Kn(),(function(){xt.publish("putAdditionalObjects");for(var ae=0;ae<We.length;ae++){var me=We[ae];$n(me.objId,!0),V(me.content),V("endobj")}xt.publish("postPutAdditionalObjects")})(),x=[],(function(){for(var ae in He)He.hasOwnProperty(ae)&&(A===!1||A===!0&&M.hasOwnProperty(ae))&&Qn(He[ae])})(),(function(){var ae;for(ae in Jt)Jt.hasOwnProperty(ae)&&ut(Jt[ae])})(),(function(){for(var ae in ln)ln.hasOwnProperty(ae)&&Or(ln[ae])})(),(function(ae){var me;for(me in vt)vt.hasOwnProperty(me)&&(vt[me]instanceof Bl?Os(vt[me]):vt[me]instanceof gc&&Fi(vt[me],ae))})(x),xt.publish("putResources"),x.forEach(xn),xn({resourcesOid:Qa,objectOid:Number.MAX_SAFE_INTEGER}),xt.publish("postPutResources"),j!==null&&(Hr.oid=zn(),V("<<"),V("/Filter /Standard"),V("/V "+Hr.v),V("/R "+Hr.r),V("/U <"+Hr.toHexString(Hr.U)+">"),V("/O <"+Hr.toHexString(Hr.O)+">"),V("/P "+Hr.P),V(">>"),V("endobj")),Xn(),pi();var L=Fe;return ei(),To(),V("startxref"),V(""+L),V("%%EOF"),pt(De[J]),Me.join(`
`)},mi=b.__private__.getBlob=function(x){return new Blob([Et(x)],{type:"application/pdf"})},Wi=b.output=b.__private__.output=(Ka=function(x,L){switch(typeof(L=L||{})=="string"?L={filename:L}:L.filename=L.filename||"generated.pdf",x){case void 0:return ti();case"save":b.save(L.filename);break;case"arraybuffer":return Et(ti());case"blob":return mi(ti());case"bloburi":case"bloburl":if(un.URL!==void 0&&typeof un.URL.createObjectURL=="function")return un.URL&&un.URL.createObjectURL(mi(ti()))||void 0;fr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",me=ti();try{ae=nm(me)}catch{ae=nm(unescape(encodeURIComponent(me)))}return"data:application/pdf;filename="+L.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(un)==="[object Window]"){var Le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';L.pdfObjectUrl&&(Le=L.pdfObjectUrl,Ke="");var nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Le+'"'+Ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(L)+");<\/script></body></html>",Nt=un.open();return Nt!==null&&Nt.document.write(nt),Nt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(un)==="[object Window]"){var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(L.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+L.filename+'" width="500px" height="400px" /></body></html>',Ht=un.open();if(Ht!==null){Ht.document.write(Ot);var an=this;Ht.document.documentElement.querySelector("#pdfViewer").onload=function(){Ht.document.title=L.filename,Ht.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(an.output("bloburl"))}}return Ht}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(un)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var fn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",L)+'"></iframe></body></html>',cr=un.open();if(cr!==null&&(cr.document.write(fn),cr.document.title=L.filename),cr||typeof safari>"u")return cr;break;case"datauri":case"dataurl":return un.document.location.href=this.output("datauristring",L);default:return null}},Ka.foo=function(){try{return Ka.apply(this,arguments)}catch(ae){var x=ae.stack||"";~x.indexOf(" at ")&&(x=x.split(" at ")[1]);var L="Error in function "+x.split(`
`)[0].split("<")[0]+": "+ae.message;if(!un.console)throw new Error(L);un.console.error(L,ae),un.alert&&alert(L)}},Ka.foo.bar=Ka,Ka.foo),ni=function(x){return Array.isArray(pa)===!0&&pa.indexOf(x)>-1};switch(o){case"pt":se=1;break;case"mm":se=72/25.4;break;case"cm":se=72/2.54;break;case"in":se=72;break;case"px":se=ni("px_scaling")==1?.75:96/72;break;case"pc":case"em":se=12;break;case"ex":se=6;break;default:if(typeof o!="number")throw new Error("Invalid unit: "+o);se=o}var Hr=null;te(),pe();var ri=b.__private__.getPageInfo=b.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:oe[x].objId,pageNumber:x,pageContext:oe[x]}},bs=b.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var L in oe)if(oe[L].objId===x)break;return ri(L)},Ro=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:oe[J].objId,pageNumber:J,pageContext:oe[J]}};b.addPage=function(){return Za.apply(this,arguments),this},b.setPage=function(){return Bs.apply(this,arguments),pt.call(this,De[J]),this},b.insertPage=function(x){return this.addPage(),this.movePage(J,x),this},b.movePage=function(x,L){var ae,me;if(x>L){ae=De[x],me=oe[x];for(var Le=x;Le>L;Le--)De[Le]=De[Le-1],oe[Le]=oe[Le-1];De[L]=ae,oe[L]=me,this.setPage(L)}else if(x<L){ae=De[x],me=oe[x];for(var Ke=x;Ke<L;Ke++)De[Ke]=De[Ke+1],oe[Ke]=oe[Ke+1];De[L]=ae,oe[L]=me,this.setPage(L)}return this},b.deletePage=function(){return cs.apply(this,arguments),this},b.__private__.text=b.text=function(x,L,ae,me,Le){var Ke,nt,Nt,Ot,Ht,an,fn,cr,dr,Yn=(me=me||{}).scope||this;if(typeof x=="number"&&typeof L=="number"&&(typeof ae=="string"||Array.isArray(ae))){var Nr=ae;ae=L,L=x,x=Nr}if(arguments[3]instanceof St==0?(Nt=arguments[4],Ot=arguments[5],ar(fn=arguments[3])==="object"&&fn!==null||(typeof Nt=="string"&&(Ot=Nt,Nt=null),typeof fn=="string"&&(Ot=fn,fn=null),typeof fn=="number"&&(Nt=fn,fn=null),me={flags:fn,angle:Nt,align:Ot})):(ee("The transform parameter of text() with a Matrix value"),dr=Le),isNaN(L)||isNaN(ae)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return Yn;var kr,Yr="",Gi=typeof me.lineHeightFactor=="number"?me.lineHeightFactor:Ca,Zn=Yn.internal.scaleFactor;function Ri(Mn){return Mn=Mn.split("	").join(Array(me.TabLen||9).join(" ")),_r(Mn,fn)}function Ar(Mn){for(var wn,xr=Mn.concat(),Er=[],Ai=xr.length;Ai--;)typeof(wn=xr.shift())=="string"?Er.push(wn):Array.isArray(Mn)&&(wn.length===1||wn[1]===void 0&&wn[2]===void 0)?Er.push(wn[0]):Er.push([wn[0],wn[1],wn[2]]);return Er}function wi(Mn,wn){var xr;if(typeof Mn=="string")xr=wn(Mn)[0];else if(Array.isArray(Mn)){for(var Er,Ai,yr=Mn.concat(),xo=[],Ps=yr.length;Ps--;)typeof(Er=yr.shift())=="string"?xo.push(wn(Er)[0]):Array.isArray(Er)&&typeof Er[0]=="string"&&(Ai=wn(Er[0],Er[1],Er[2]),xo.push([Ai[0],Ai[1],Ai[2]]));xr=xo}return xr}var Ji=!1,Ns=!0;if(typeof x=="string")Ji=!0;else if(Array.isArray(x)){var Ki=x.concat();nt=[];for(var ii,pr=Ki.length;pr--;)(typeof(ii=Ki.shift())!="string"||Array.isArray(ii)&&typeof ii[0]!="string")&&(Ns=!1);Ji=Ns}if(Ji===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var Oi=Xe/Yn.internal.scaleFactor,ks=Oi*(Gi-1);switch(me.baseline){case"bottom":ae-=ks;break;case"top":ae+=Oi-ks;break;case"hanging":ae+=Oi-2*ks;break;case"middle":ae+=Oi/2-ks}if((an=me.maxWidth||0)>0&&(typeof x=="string"?x=Yn.splitTextToSize(x,an):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(Mn,wn){return Mn.concat(Yn.splitTextToSize(wn,an))},[]))),Ke={text:x,x:L,y:ae,options:me,mutex:{pdfEscape:_r,activeFontKey:qe,fonts:He,activeFontSize:Xe}},xt.publish("preProcessText",Ke),x=Ke.text,Nt=(me=Ke.options).angle,dr instanceof St==0&&Nt&&typeof Nt=="number"){Nt*=Math.PI/180,me.rotationDirection===0&&(Nt=-Nt),H===X&&(Nt=-Nt);var si=Math.cos(Nt),oi=Math.sin(Nt);dr=new St(si,oi,-oi,si,0,0)}else Nt&&Nt instanceof St&&(dr=Nt);H!==X||dr||(dr=ir),(Ht=me.charSpace||La)!==void 0&&(Yr+=ge(le(Ht))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(cr=me.horizontalScale)!==void 0&&(Yr+=ge(100*cr)+` Tz
`),me.lang;var mr=-1,Qi=me.renderingMode!==void 0?me.renderingMode:me.stroke,Ia=Yn.internal.getCurrentPageInfo().pageContext;switch(Qi){case 0:case!1:case"fill":mr=0;break;case 1:case!0:case"stroke":mr=1;break;case 2:case"fillThenStroke":mr=2;break;case 3:case"invisible":mr=3;break;case 4:case"fillAndAddForClipping":mr=4;break;case 5:case"strokeAndAddPathForClipping":mr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":mr=6;break;case 7:case"addToPathForClipping":mr=7}var Xi=Ia.usedRenderingMode!==void 0?Ia.usedRenderingMode:-1;mr!==-1?Yr+=mr+` Tr
`:Xi!==-1&&(Yr+=`0 Tr
`),mr!==-1&&(Ia.usedRenderingMode=mr),Ot=me.align||"left";var ya,jt=Xe*Gi,_n=Yn.internal.pageSize.getWidth(),As=He[qe];Ht=me.charSpace||La,an=me.maxWidth||0,fn=Object.assign({autoencode:!0,noBOM:!0},me.flags);var ji=[],ia=function(Mn){return Yn.getStringUnitWidth(Mn,{font:As,charSpace:Ht,fontSize:Xe,doKerning:!1})*Xe/Zn};if(Object.prototype.toString.call(x)==="[object Array]"){var li;nt=Ar(x),Ot!=="left"&&(ya=nt.map(ia));var va,Si=0;if(Ot==="right"){L-=ya[0],x=[],pr=nt.length;for(var Br=0;Br<pr;Br++)Br===0?(va=Ir(L),li=Vi(ae)):(va=le(Si-ya[Br]),li=-jt),x.push([nt[Br],va,li]),Si=ya[Br]}else if(Ot==="center"){L-=ya[0]/2,x=[],pr=nt.length;for(var Zi=0;Zi<pr;Zi++)Zi===0?(va=Ir(L),li=Vi(ae)):(va=le((Si-ya[Zi])/2),li=-jt),x.push([nt[Zi],va,li]),Si=ya[Zi]}else if(Ot==="left"){x=[],pr=nt.length;for(var Bi=0;Bi<pr;Bi++)x.push(nt[Bi])}else if(Ot==="justify"&&As.encoding==="Identity-H"){x=[],pr=nt.length,an=an!==0?an:_n;for(var Ni=0,Gn=0;Gn<pr;Gn++)if(li=Gn===0?Vi(ae):-jt,va=Gn===0?Ir(L):Ni,Gn<pr-1){var Hs=le((an-ya[Gn])/(nt[Gn].split(" ").length-1)),es=nt[Gn].split(" ");x.push([es[0]+" ",va,li]),Ni=0;for(var Ua=1;Ua<es.length;Ua++){var Vs=(ia(es[Ua-1]+" "+es[Ua])-ia(es[Ua]))*Zn+Hs;Ua==es.length-1?x.push([es[Ua],Vs,0]):x.push([es[Ua]+" ",Vs,0]),Ni-=Vs}}else x.push([nt[Gn],va,li]);x.push(["",Ni,0])}else{if(Ot!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],pr=nt.length,an=an!==0?an:_n,Gn=0;Gn<pr;Gn++){li=Gn===0?Vi(ae):-jt,va=Gn===0?Ir(L):0;var mo=nt[Gn].split(" ").length-1,Ys=mo>0?(an-ya[Gn])/mo:0;Gn<pr-1?ji.push(ge(le(Ys))):ji.push(0),x.push([nt[Gn],va,li])}}}(typeof me.R2L=="boolean"?me.R2L:Pt)===!0&&(x=wi(x,function(Mn,wn,xr){return[Mn.split("").reverse().join(""),wn,xr]})),Ke={text:x,x:L,y:ae,options:me,mutex:{pdfEscape:_r,activeFontKey:qe,fonts:He,activeFontSize:Xe}},xt.publish("postProcessText",Ke),x=Ke.text,kr=Ke.mutex.isHex||!1;var go=He[qe].encoding;go!=="WinAnsiEncoding"&&go!=="StandardEncoding"||(x=wi(x,function(Mn,wn,xr){return[Ri(Mn),wn,xr]})),nt=Ar(x),x=[];for(var ki,Cs,Gr,Gs=Array.isArray(nt[0])?1:0,Jr="",Js=function(Mn,wn,xr){var Er="";return xr instanceof St?(xr=typeof me.angle=="number"?rn(xr,new St(1,0,0,1,Mn,wn)):rn(new St(1,0,0,1,Mn,wn),xr),H===X&&(xr=rn(new St(1,0,0,-1,0,0),xr)),Er=xr.join(" ")+` Tm
`):Er=ge(Mn)+" "+ge(wn)+` Td
`,Er},gr=0;gr<nt.length;gr++){switch(Jr="",Gs){case 1:Gr=(kr?"<":"(")+nt[gr][0]+(kr?">":")"),ki=parseFloat(nt[gr][1]),Cs=parseFloat(nt[gr][2]);break;case 0:Gr=(kr?"<":"(")+nt[gr]+(kr?">":")"),ki=Ir(L),Cs=Vi(ae)}ji!==void 0&&ji[gr]!==void 0&&(Jr=ji[gr]+` Tw
`),gr===0?x.push(Jr+Js(ki,Cs,dr)+Gr):Gs===0?x.push(Jr+Gr):Gs===1&&x.push(Jr+Js(ki,Cs,dr)+Gr)}x=Gs===0?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var qa=`BT
/`;return qa+=qe+" "+Xe+` Tf
`,qa+=ge(Xe*Gi)+` TL
`,qa+=xi+`
`,qa+=Yr,qa+=x,V(qa+="ET"),M[qe]=!0,Yn};var On=b.__private__.clip=b.clip=function(x){return V(x==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return On("evenodd")},b.__private__.discardPath=b.discardPath=function(){return V("n"),this};var Ba=b.__private__.isValidStyle=function(x){var L=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(L=!0),L};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(x){return Ba(x)&&(v=x),this};var ra=b.__private__.getStyle=b.getStyle=function(x){var L=v;switch(x){case"D":case"S":L="S";break;case"F":L="f";break;case"FD":case"DF":L="B";break;case"f":case"f*":case"B":case"B*":L=x}return L},Cn=b.close=function(){return V("h"),this};b.stroke=function(){return V("S"),this},b.fill=function(x){return gi("f",x),this},b.fillEvenOdd=function(x){return gi("f*",x),this},b.fillStroke=function(x){return gi("B",x),this},b.fillStrokeEvenOdd=function(x){return gi("B*",x),this};var gi=function(x,L){ar(L)==="object"?js(L,x):V(x)},ws=function(x){x===null||H===X&&x===void 0||(x=ra(x),V(x))};function Oo(x,L,ae,me,Le){var Ke=new gc(L||this.boundingBox,ae||this.xStep,me||this.yStep,this.gState,Le||this.matrix);Ke.stream=this.stream;var nt=x+"$$"+this.cloneIndex+++"$$";return ta(nt,Ke),Ke}var js=function(x,L){var ae=An[x.key],me=vt[ae];if(me instanceof Bl)V("q"),V(aa(L)),me.gState&&b.setGState(me.gState),V(x.matrix.toString()+" cm"),V("/"+ae+" sh"),V("Q");else if(me instanceof gc){var Le=new St(1,0,0,-1,0,bi());x.matrix&&(Le=Le.multiply(x.matrix||ir),ae=Oo.call(me,x.key,x.boundingBox,x.xStep,x.yStep,Le).id),V("q"),V("/Pattern cs"),V("/"+ae+" scn"),me.gState&&b.setGState(me.gState),V(L),V("Q")}},aa=function(x){switch(x){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Hi=b.moveTo=function(x,L){return V(ge(le(x))+" "+ge(ie(L))+" m"),this},bn=b.lineTo=function(x,L){return V(ge(le(x))+" "+ge(ie(L))+" l"),this},or=b.curveTo=function(x,L,ae,me,Le,Ke){return V([ge(le(x)),ge(ie(L)),ge(le(ae)),ge(ie(me)),ge(le(Le)),ge(ie(Ke)),"c"].join(" ")),this};b.__private__.line=b.line=function(x,L,ae,me,Le){if(isNaN(x)||isNaN(L)||isNaN(ae)||isNaN(me)||!Ba(Le))throw new Error("Invalid arguments passed to jsPDF.line");return H===W?this.lines([[ae-x,me-L]],x,L,[1,1],Le||"S"):this.lines([[ae-x,me-L]],x,L,[1,1]).stroke()},b.__private__.lines=b.lines=function(x,L,ae,me,Le,Ke){var nt,Nt,Ot,Ht,an,fn,cr,dr,Yn,Nr,kr,Yr;if(typeof x=="number"&&(Yr=ae,ae=L,L=x,x=Yr),me=me||[1,1],Ke=Ke||!1,isNaN(L)||isNaN(ae)||!Array.isArray(x)||!Array.isArray(me)||!Ba(Le)||typeof Ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Hi(L,ae),nt=me[0],Nt=me[1],Ht=x.length,Nr=L,kr=ae,Ot=0;Ot<Ht;Ot++)(an=x[Ot]).length===2?(Nr=an[0]*nt+Nr,kr=an[1]*Nt+kr,bn(Nr,kr)):(fn=an[0]*nt+Nr,cr=an[1]*Nt+kr,dr=an[2]*nt+Nr,Yn=an[3]*Nt+kr,Nr=an[4]*nt+Nr,kr=an[5]*Nt+kr,or(fn,cr,dr,Yn,Nr,kr));return Ke&&Cn(),ws(Le),this},b.path=function(x){for(var L=0;L<x.length;L++){var ae=x[L],me=ae.c;switch(ae.op){case"m":Hi(me[0],me[1]);break;case"l":bn(me[0],me[1]);break;case"c":or.apply(this,me);break;case"h":Cn()}}return this},b.__private__.rect=b.rect=function(x,L,ae,me,Le){if(isNaN(x)||isNaN(L)||isNaN(ae)||isNaN(me)||!Ba(Le))throw new Error("Invalid arguments passed to jsPDF.rect");return H===W&&(me=-me),V([ge(le(x)),ge(ie(L)),ge(le(ae)),ge(le(me)),"re"].join(" ")),ws(Le),this},b.__private__.triangle=b.triangle=function(x,L,ae,me,Le,Ke,nt){if(isNaN(x)||isNaN(L)||isNaN(ae)||isNaN(me)||isNaN(Le)||isNaN(Ke)||!Ba(nt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-x,me-L],[Le-ae,Ke-me],[x-Le,L-Ke]],x,L,[1,1],nt,!0),this},b.__private__.roundedRect=b.roundedRect=function(x,L,ae,me,Le,Ke,nt){if(isNaN(x)||isNaN(L)||isNaN(ae)||isNaN(me)||isNaN(Le)||isNaN(Ke)||!Ba(nt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nt=4/3*(Math.SQRT2-1);return Le=Math.min(Le,.5*ae),Ke=Math.min(Ke,.5*me),this.lines([[ae-2*Le,0],[Le*Nt,0,Le,Ke-Ke*Nt,Le,Ke],[0,me-2*Ke],[0,Ke*Nt,-Le*Nt,Ke,-Le,Ke],[2*Le-ae,0],[-Le*Nt,0,-Le,-Ke*Nt,-Le,-Ke],[0,2*Ke-me],[0,-Ke*Nt,Le*Nt,-Ke,Le,-Ke]],x+Le,L,[1,1],nt,!0),this},b.__private__.ellipse=b.ellipse=function(x,L,ae,me,Le){if(isNaN(x)||isNaN(L)||isNaN(ae)||isNaN(me)||!Ba(Le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ke=4/3*(Math.SQRT2-1)*ae,nt=4/3*(Math.SQRT2-1)*me;return Hi(x+ae,L),or(x+ae,L-nt,x+Ke,L-me,x,L-me),or(x-Ke,L-me,x-ae,L-nt,x-ae,L),or(x-ae,L+nt,x-Ke,L+me,x,L+me),or(x+Ke,L+me,x+ae,L+nt,x+ae,L),ws(Le),this},b.__private__.circle=b.circle=function(x,L,ae,me){if(isNaN(x)||isNaN(L)||isNaN(ae)||!Ba(me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,L,ae,ae,me)},b.setFont=function(x,L,ae){return ae&&(L=Ee(L,ae)),qe=Aa(x,L,{disableWarning:!1}),this};var za=b.__private__.getFont=b.getFont=function(){return He[Aa.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var x,L,ae={};for(x in ct)if(ct.hasOwnProperty(x))for(L in ae[x]=[],ct[x])ct[x].hasOwnProperty(L)&&ae[x].push(L);return ae},b.addFont=function(x,L,ae,me,Le){var Ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ke.indexOf(arguments[3])!==-1?Le=arguments[3]:arguments[3]&&Ke.indexOf(arguments[3])==-1&&(ae=Ee(ae,me)),Xa.call(this,x,L,ae,Le=Le||"Identity-H")};var Ca,Hn=i.lineWidth||.200025,ma=b.__private__.getLineWidth=b.getLineWidth=function(){return Hn},Zt=b.__private__.setLineWidth=b.setLineWidth=function(x){return Hn=x,V(ge(le(x))+" w"),this};b.__private__.setLineDash=Gt.API.setLineDash=Gt.API.setLineDashPattern=function(x,L){if(x=x||[],L=L||0,isNaN(L)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(ae){return ge(le(ae))}).join(" "),L=ge(le(L)),V("["+x+"] "+L+" d"),this};var ai=b.__private__.getLineHeight=b.getLineHeight=function(){return Xe*Ca};b.__private__.getLineHeight=b.getLineHeight=function(){return Xe*Ca};var Sn=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(Ca=x),this},zs=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Ca};Sn(i.lineHeight);var Ir=b.__private__.getHorizontalCoordinate=function(x){return le(x)},Vi=b.__private__.getVerticalCoordinate=function(x){return H===X?x:oe[J].mediaBox.topRightY-oe[J].mediaBox.bottomLeftY-le(x)},Us=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(x){return ge(Ir(x))},Ss=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(x){return ge(Vi(x))},Pa=i.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return Lt(Pa)},b.__private__.setStrokeColor=b.setDrawColor=function(x,L,ae,me){return Pa=Dn({ch1:x,ch2:L,ch3:ae,ch4:me,pdfColorType:"draw",precision:2}),V(Pa),this};var Bo=i.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return Lt(Bo)},b.__private__.setFillColor=b.setFillColor=function(x,L,ae,me){return Bo=Dn({ch1:x,ch2:L,ch3:ae,ch4:me,pdfColorType:"fill",precision:2}),V(Bo),this};var xi=i.textColor||"0 g",lr=b.__private__.getTextColor=b.getTextColor=function(){return Lt(xi)};b.__private__.setTextColor=b.setTextColor=function(x,L,ae,me){return xi=Dn({ch1:x,ch2:L,ch3:ae,ch4:me,pdfColorType:"text",precision:3}),this};var La=i.charSpace,ds=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(La||0)};b.__private__.setCharSpace=b.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return La=x,this};var qs=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(x){var L=b.CapJoinStyles[x];if(L===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return qs=L,V(L+" J"),this};var Sr=0;b.__private__.setLineJoin=b.setLineJoin=function(x){var L=b.CapJoinStyles[x];if(L===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sr=L,V(L+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return V(ge(le(x))+" M"),this},b.GState=Yd,b.setGState=function(x){(x=typeof x=="string"?Jt[Ut[x]]:$s(null,x)).equals(gn)||(V("/"+x.id+" gs"),gn=x)};var $s=function(x,L){if(!x||!Ut[x]){var ae=!1;for(var me in Jt)if(Jt.hasOwnProperty(me)&&Jt[me].equals(L)){ae=!0;break}if(ae)L=Jt[me];else{var Le="GS"+(Object.keys(Jt).length+1).toString(10);Jt[Le]=L,L.id=Le}return x&&(Ut[x]=L.id),xt.publish("addGState",L),L}};b.addGState=function(x,L){return $s(x,L),this},b.saveGraphicsState=function(){return V("q"),Vt.push({key:qe,size:Xe,color:xi}),this},b.restoreGraphicsState=function(){V("Q");var x=Vt.pop();return qe=x.key,Xe=x.size,xi=x.color,gn=null,this},b.setCurrentTransformationMatrix=function(x){return V(x.toString()+" cm"),this},b.comment=function(x){return V("#"+x),this};var yi=function(x,L){var ae=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(Ke){isNaN(Ke)||(ae=parseFloat(Ke))}});var me=L||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return me},set:function(Ke){isNaN(Ke)||(me=parseFloat(Ke))}});var Le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Le},set:function(Ke){Le=Ke.toString()}}),this},Yi=function(x,L,ae,me){yi.call(this,x,L),this.type="rect";var Le=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Le},set:function(nt){isNaN(nt)||(Le=parseFloat(nt))}});var Ke=me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ke},set:function(nt){isNaN(nt)||(Ke=parseFloat(nt))}}),this},Ws=function(){this.page=Xt,this.currentPage=J,this.pages=De.slice(0),this.pagesContext=oe.slice(0),this.x=Se,this.y=rt,this.matrix=ht,this.width=vi(J),this.height=_a(J),this.outputDestination=ot,this.id="",this.objectNumber=-1};Ws.prototype.restore=function(){Xt=this.page,J=this.currentPage,oe=this.pagesContext,De=this.pages,Se=this.x,rt=this.y,ht=this.matrix,Ln(J,this.width),En(J,this.height),ot=this.outputDestination};var ga=function(x,L,ae,me,Le){nn.push(new Ws),Xt=J=0,De=[],Se=x,rt=L,ht=Le,ka([ae,me])};for(var Vr in b.beginFormObject=function(x,L,ae,me,Le){return ga(x,L,ae,me,Le),this},b.endFormObject=function(x){return(function(L){if(jr[L])nn.pop().restore();else{var ae=new Ws,me="Xo"+(Object.keys(ln).length+1).toString(10);ae.id=me,jr[L]=me,ln[me]=ae,xt.publish("addFormObject",ae),nn.pop().restore()}})(x),this},b.doFormObject=function(x,L){var ae=ln[jr[x]];return V("q"),V(L.toString()+" cm"),V("/"+ae.id+" Do"),V("Q"),this},b.getFormObject=function(x){var L=ln[jr[x]];return{x:L.x,y:L.y,width:L.width,height:L.height,matrix:L.matrix}},b.save=function(x,L){return x=x||"generated.pdf",(L=L||{}).returnPromise=L.returnPromise||!1,L.returnPromise===!1?(Ol(mi(ti()),x),typeof Ol.unload=="function"&&un.setTimeout&&setTimeout(Ol.unload,911),this):new Promise(function(ae,me){try{var Le=Ol(mi(ti()),x);typeof Ol.unload=="function"&&un.setTimeout&&setTimeout(Ol.unload,911),ae(Le)}catch(Ke){me(Ke.message)}})},Gt.API)Gt.API.hasOwnProperty(Vr)&&(Vr==="events"&&Gt.API.events.length?(function(x,L){var ae,me,Le;for(Le=L.length-1;Le!==-1;Le--)ae=L[Le][0],me=L[Le][1],x.subscribe.apply(x,[ae].concat(typeof me=="function"?[me]:me))})(xt,Gt.API.events):b[Vr]=Gt.API[Vr]);function vi(x){return oe[x].mediaBox.topRightX-oe[x].mediaBox.bottomLeftX}function Ln(x,L){oe[x].mediaBox.topRightX=L+oe[x].mediaBox.bottomLeftX}function _a(x){return oe[x].mediaBox.topRightY-oe[x].mediaBox.bottomLeftY}function En(x,L){oe[x].mediaBox.topRightY=L+oe[x].mediaBox.bottomLeftY}var Ti=b.getPageWidth=function(x){return vi(x=x||J)/se},Vn=b.setPageWidth=function(x,L){Ln(x,L*se)},bi=b.getPageHeight=function(x){return _a(x=x||J)/se},xa=b.setPageHeight=function(x,L){En(x,L*se)};return b.internal={pdfEscape:_r,getStyle:ra,getFont:za,getFontSize:mt,getCharSpace:ds,getTextColor:lr,getLineHeight:ai,getLineHeightFactor:zs,getLineWidth:ma,write:et,getHorizontalCoordinate:Ir,getVerticalCoordinate:Vi,getCoordinateString:Us,getVerticalCoordinateString:Ss,collections:{},newObject:zn,newAdditionalObject:vs,newObjectDeferred:hr,newObjectDeferredBegin:$n,getFilters:Ra,putStream:Oa,events:xt,scaleFactor:se,pageSize:{getWidth:function(){return Ti(J)},setWidth:function(x){Vn(J,x)},getHeight:function(){return bi(J)},setHeight:function(x){xa(J,x)}},encryptionOptions:j,encryption:Hr,getEncryptor:function(x){return j!==null?Hr.encryptor(x,0):function(L){return L}},output:Wi,getNumberOfPages:na,get pages(){return De},out:V,f2:z,f3:$,getPageInfo:ri,getPageInfoByObjId:bs,getCurrentPageInfo:Ro,getPDFVersion:E,Point:yi,Rectangle:Yi,Matrix:St,hasHotfix:ni},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Ti(J)},set:function(x){Vn(J,x)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return bi(J)},set:function(x){xa(J,x)},enumerable:!0,configurable:!0}),(function(x){for(var L=0,ae=Ct.length;L<ae;L++){var me=Xa.call(this,x[L][0],x[L][1],x[L][2],Ct[L][3],!0);A===!1&&(M[me]=!0);var Le=x[L][0].split("-");ls({id:me,fontName:Le[0],fontStyle:Le[1]||""})}xt.publish("addFonts",{fonts:He,dictionary:ct})}).call(b,Ct),qe="F1",Za(c,r),xt.publish("initialized"),b}pc.prototype.lsbFirstWord=function(i){return String.fromCharCode(255&i,i>>8&255,i>>16&255,i>>24&255)},pc.prototype.toHexString=function(i){return i.split("").map(function(a){return("0"+(255&a.charCodeAt(0)).toString(16)).slice(-2)}).join("")},pc.prototype.hexToBytes=function(i){for(var a=[],r=0;r<i.length;r+=2)a.push(String.fromCharCode(parseInt(i.substr(r,2),16)));return a.join("")},pc.prototype.processOwnerPassword=function(i,a){return jf(wf(a).substr(0,5),i)},pc.prototype.encryptor=function(i,a){var r=wf(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&a,a>>8&255)).substr(0,10);return function(o){return jf(r,o)}},Yd.prototype.equals=function(i){var a,r="id,objectNumber,equals";if(!i||ar(i)!==ar(this))return!1;var o=0;for(a in this)if(!(r.indexOf(a)>=0)){if(this.hasOwnProperty(a)&&!i.hasOwnProperty(a)||this[a]!==i[a])return!1;o++}for(a in i)i.hasOwnProperty(a)&&r.indexOf(a)<0&&o--;return o===0},Gt.API={events:[]},Gt.version="3.0.4";var ea=Gt.API,Tf=1,Hl=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},fc=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mn=function(i){return i.toFixed(2)},pl=function(i){return i.toFixed(5)};ea.__acroform__={};var os=function(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i},sm=function(i){return i*Tf},Mo=function(i){var a=new w0,r=Rt.internal.getHeight(i)||0,o=Rt.internal.getWidth(i)||0;return a.BBox=[0,0,Number(mn(o)),Number(mn(r))],a},Wx=ea.__acroform__.setBit=function(i,a){if(i=i||0,a=a||0,isNaN(i)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|1<<a},Hx=ea.__acroform__.clearBit=function(i,a){if(i=i||0,a=a||0,isNaN(i)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&~(1<<a)},Vx=ea.__acroform__.getBit=function(i,a){if(isNaN(i)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return i&1<<a?1:0},da=ea.__acroform__.getBitForPdf=function(i,a){if(isNaN(i)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Vx(i,a-1)},ua=ea.__acroform__.setBitForPdf=function(i,a){if(isNaN(i)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Wx(i,a-1)},fa=ea.__acroform__.clearBitForPdf=function(i,a){if(isNaN(i)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Hx(i,a-1)},Yx=ea.__acroform__.calculateCoordinates=function(i,a){var r=a.internal.getHorizontalCoordinate,o=a.internal.getVerticalCoordinate,c=i[0],l=i[1],m=i[2],p=i[3],g={};return g.lowerLeft_X=r(c)||0,g.lowerLeft_Y=o(l+p)||0,g.upperRight_X=r(c+m)||0,g.upperRight_Y=o(l)||0,[Number(mn(g.lowerLeft_X)),Number(mn(g.lowerLeft_Y)),Number(mn(g.upperRight_X)),Number(mn(g.upperRight_Y))]},Gx=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var a=[],r=i._V||i.DV,o=Sf(i,r),c=i.scope.internal.getFont(i.fontName,i.fontStyle).id;a.push("/Tx BMC"),a.push("q"),a.push("BT"),a.push(i.scope.__private__.encodeColorString(i.color)),a.push("/"+c+" "+mn(o.fontSize)+" Tf"),a.push("1 0 0 1 0 0 Tm"),a.push(o.text),a.push("ET"),a.push("Q"),a.push("EMC");var l=Mo(i);return l.scope=i.scope,l.stream=a.join(`
`),l}},Sf=function(i,a){var r=i.fontSize===0?i.maxFontSize:i.fontSize,o={text:"",fontSize:""},c=(a=(a=a.substr(0,1)=="("?a.substr(1):a).substr(a.length-1)==")"?a.substr(0,a.length-1):a).split(" ");c=i.multiline?c.map(function(z){return z.split(`
`)}):c.map(function(z){return[z]});var l=r,m=Rt.internal.getHeight(i)||0;m=m<0?-m:m;var p=Rt.internal.getWidth(i)||0;p=p<0?-p:p;var g=function(z,$,le){if(z+1<c.length){var ie=$+" "+c[z+1][0];return Md(ie,i,le).width<=p-4}return!1};l++;e:for(;l>0;){a="",l--;var v,j,A=Md("3",i,l).height,M=i.multiline?m-l:(m-A)/2,b=M+=2,U=0,E=0,I=0;if(l<=0){a=`(...) Tj
`,a+="% Width of Text: "+Md(a,i,l=12).width+", FieldWidth:"+p+`
`;break}for(var P="",W=0,X=0;X<c.length;X++)if(c.hasOwnProperty(X)){var H=!1;if(c[X].length!==1&&I!==c[X].length-1){if((A+2)*(W+2)+2>m)continue e;P+=c[X][I],H=!0,E=X,X--}else{P=(P+=c[X][I]+" ").substr(P.length-1)==" "?P.substr(0,P.length-1):P;var fe=parseInt(X),he=g(fe,P,l),Ee=X>=c.length-1;if(he&&!Ee){P+=" ",I=0;continue}if(he||Ee){if(Ee)E=fe;else if(i.multiline&&(A+2)*(W+2)+2>m)continue e}else{if(!i.multiline||(A+2)*(W+2)+2>m)continue e;E=fe}}for(var ge="",ee=U;ee<=E;ee++){var xe=c[ee];if(i.multiline){if(ee===E){ge+=xe[I]+" ",I=(I+1)%xe.length;continue}if(ee===U){ge+=xe[xe.length-1]+" ";continue}}ge+=xe[0]+" "}switch(ge=ge.substr(ge.length-1)==" "?ge.substr(0,ge.length-1):ge,j=Md(ge,i,l).width,i.textAlign){case"right":v=p-j-2;break;case"center":v=(p-j)/2;break;default:v=2}a+=mn(v)+" "+mn(b)+` Td
`,a+="("+Hl(ge)+`) Tj
`,a+=-mn(v)+` 0 Td
`,b=-(l+2),j=0,U=H?E:E+1,W++,P=""}break}return o.text=a,o.fontSize=l,o},Md=function(i,a,r){var o=a.scope.internal.getFont(a.fontName,a.fontStyle),c=a.scope.getStringUnitWidth(i,{font:o,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:a.scope.getStringUnitWidth("3",{font:o,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:c}},Jx={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Kx=function(i,a){var r={type:"reference",object:i};a.internal.getPageInfo(i.page).pageContext.annotations.find(function(o){return o.type===r.type&&o.object===r.object})===void 0&&a.internal.getPageInfo(i.page).pageContext.annotations.push(r)},Qx=function(i,a){if(a.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(ho.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(Jx)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Tf=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new j0,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var o=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var c in o)if(o.hasOwnProperty(c)){var l=o[c];l.objId=void 0,l.hasAnnotation&&Kx(l,r)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(r){(function(o,c){var l=!o;for(var m in o||(c.internal.newObjectDeferredBegin(c.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),c.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),o=o||c.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(o.hasOwnProperty(m)){var p=o[m],g=[],v=p.Rect;if(p.Rect&&(p.Rect=Yx(p.Rect,c)),c.internal.newObjectDeferredBegin(p.objId,!0),p.DA=Rt.createDefaultAppearanceStream(p),ar(p)==="object"&&typeof p.getKeyValueListForStream=="function"&&(g=p.getKeyValueListForStream()),p.Rect=v,p.hasAppearanceStream&&!p.appearanceStreamContent){var j=Gx(p);g.push({key:"AP",value:"<</N "+j+">>"}),c.internal.acroformPlugin.xForms.push(j)}if(p.appearanceStreamContent){var A="";for(var M in p.appearanceStreamContent)if(p.appearanceStreamContent.hasOwnProperty(M)){var b=p.appearanceStreamContent[M];if(A+="/"+M+" ",A+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var m in b)if(b.hasOwnProperty(m)){var U=b[m];typeof U=="function"&&(U=U.call(c,p)),A+="/"+m+" "+U+" ",c.internal.acroformPlugin.xForms.indexOf(U)>=0||c.internal.acroformPlugin.xForms.push(U)}}else typeof(U=b)=="function"&&(U=U.call(c,p)),A+="/"+m+" "+U,c.internal.acroformPlugin.xForms.indexOf(U)>=0||c.internal.acroformPlugin.xForms.push(U);A+=">>"}g.push({key:"AP",value:`<<
`+A+">>"})}c.internal.putStream({additionalKeyValues:g,objectId:p.objId}),c.internal.out("endobj")}l&&(function(E,I){for(var P in E)if(E.hasOwnProperty(P)){var W=P,X=E[P];I.internal.newObjectDeferredBegin(X.objId,!0),ar(X)==="object"&&typeof X.putStream=="function"&&X.putStream(),delete E[W]}})(c.internal.acroformPlugin.xForms,c)})(r,i)}),i.internal.acroformPlugin.isInitialized=!0}},b0=ea.__acroform__.arrayToPdfArray=function(i,a,r){var o=function(m){return m};if(Array.isArray(i)){for(var c="[",l=0;l<i.length;l++)switch(l!==0&&(c+=" "),ar(i[l])){case"boolean":case"number":case"object":c+=i[l].toString();break;case"string":i[l].substr(0,1)!=="/"?(a!==void 0&&r&&(o=r.internal.getEncryptor(a)),c+="("+Hl(o(i[l].toString()))+")"):c+=i[l].toString()}return c+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},af=function(i,a,r){var o=function(c){return c};return a!==void 0&&r&&(o=r.internal.getEncryptor(a)),(i=i||"").toString(),"("+Hl(o(i))+")"},Do=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Do.prototype.toString=function(){return this.objId+" 0 R"},Do.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},Do.prototype.getKeyValueListForStream=function(){var i=[],a=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var r in a)if(Object.getOwnPropertyDescriptor(this,a[r]).configurable===!1){var o=a[r],c=this[o];c&&(Array.isArray(c)?i.push({key:o,value:b0(c,this.objId,this.scope)}):c instanceof Do?(c.scope=this.scope,i.push({key:o,value:c.objId+" 0 R"})):typeof c!="function"&&i.push({key:o,value:c}))}return i};var w0=function(){Do.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,a=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return a},set:function(r){a=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){i=r.trim()},get:function(){return i||null}})};os(w0,Do);var j0=function(){Do.call(this);var i,a=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return a.length>0?a:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return a}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var r=function(o){return o};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Hl(r(i))+")"}},set:function(r){i=r}})};os(j0,Do);var ho=function i(){Do.call(this);var a=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return a},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute F supplied.');a=P}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!da(a,3)},set:function(P){P?this.F=ua(a,3):this.F=fa(a,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute Ff supplied.');r=P}});var o=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(o.length!==0)return o},set:function(P){o=P!==void 0?P:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[0])?0:o[0]},set:function(P){o[0]=P}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[1])?0:o[1]},set:function(P){o[1]=P}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[2])?0:o[2]},set:function(P){o[2]=P}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[3])?0:o[3]},set:function(P){o[3]=P}});var c="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return c},set:function(P){switch(P){case"/Btn":case"/Tx":case"/Ch":case"/Sig":c=P;break;default:throw new Error('Invalid value "'+P+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof Gd)return;l="FieldObject"+i.FieldNum++}var P=function(W){return W};return this.scope&&(P=this.scope.internal.getEncryptor(this.objId)),"("+Hl(P(l))+")"},set:function(P){l=P.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(P){l=P}});var m="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return m},set:function(P){m=P}});var p="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return p},set:function(P){p=P}});var g=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return g},set:function(P){g=P}});var v=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return v===void 0?50/Tf:v},set:function(P){v=P}});var j="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return j},set:function(P){j=P}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof Gd||this instanceof zl))return af(A,this.objId,this.scope)},set:function(P){P=P.toString(),A=P}});var M=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(M)return this instanceof Ja==0?af(M,this.objId,this.scope):M},set:function(P){P=P.toString(),M=this instanceof Ja==0?P.substr(0,1)==="("?fc(P.substr(1,P.length-2)):fc(P):P}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ja==1?fc(M.substr(1,M.length-1)):M},set:function(P){P=P.toString(),M=this instanceof Ja==1?"/"+P:P}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(P){this.V=P}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Ja==0?af(b,this.objId,this.scope):b},set:function(P){P=P.toString(),b=this instanceof Ja==0?P.substr(0,1)==="("?fc(P.substr(1,P.length-2)):fc(P):P}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ja==1?fc(b.substr(1,b.length-1)):b},set:function(P){P=P.toString(),b=this instanceof Ja==1?"/"+P:P}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var U,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(P){P=!!P,E=P}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(U)return U},set:function(P){U=P}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,1)},set:function(P){P?this.Ff=ua(this.Ff,1):this.Ff=fa(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,2)},set:function(P){P?this.Ff=ua(this.Ff,2):this.Ff=fa(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,3)},set:function(P){P?this.Ff=ua(this.Ff,3):this.Ff=fa(this.Ff,3)}});var I=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(I!==null)return I},set:function(P){if([0,1,2].indexOf(P)===-1)throw new Error('Invalid value "'+P+'" for attribute Q supplied.');I=P}}),Object.defineProperty(this,"textAlign",{get:function(){var P;switch(I){case 0:default:P="left";break;case 1:P="center";break;case 2:P="right"}return P},configurable:!0,enumerable:!0,set:function(P){switch(P){case"right":case 2:I=2;break;case"center":case 1:I=1;break;default:I=0}}})};os(ho,Do);var xc=function(){ho.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(r){i=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(r){i=r}});var a=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return b0(a,this.objId,this.scope)},set:function(r){var o,c;c=[],typeof(o=r)=="string"&&(c=(function(l,m,p){p||(p=1);for(var g,v=[];g=m.exec(l);)v.push(g[p]);return v})(o,/\((.*?)\)/g)),a=c}}),this.getOptions=function(){return a},this.setOptions=function(r){a=r,this.sort&&a.sort()},this.addOption=function(r){r=(r=r||"").toString(),a.push(r),this.sort&&a.sort()},this.removeOption=function(r,o){for(o=o||!1,r=(r=r||"").toString();a.indexOf(r)!==-1&&(a.splice(a.indexOf(r),1),o!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,18)},set:function(r){r?this.Ff=ua(this.Ff,18):this.Ff=fa(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ua(this.Ff,19):this.Ff=fa(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,20)},set:function(r){r?(this.Ff=ua(this.Ff,20),a.sort()):this.Ff=fa(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,22)},set:function(r){r?this.Ff=ua(this.Ff,22):this.Ff=fa(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,23)},set:function(r){r?this.Ff=ua(this.Ff,23):this.Ff=fa(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,27)},set:function(r){r?this.Ff=ua(this.Ff,27):this.Ff=fa(this.Ff,27)}}),this.hasAppearanceStream=!1};os(xc,ho);var yc=function(){xc.call(this),this.fontName="helvetica",this.combo=!1};os(yc,xc);var vc=function(){yc.call(this),this.combo=!0};os(vc,yc);var Bd=function(){vc.call(this),this.edit=!0};os(Bd,vc);var Ja=function(){ho.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,15)},set:function(r){r?this.Ff=ua(this.Ff,15):this.Ff=fa(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,16)},set:function(r){r?this.Ff=ua(this.Ff,16):this.Ff=fa(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,17)},set:function(r){r?this.Ff=ua(this.Ff,17):this.Ff=fa(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,26)},set:function(r){r?this.Ff=ua(this.Ff,26):this.Ff=fa(this.Ff,26)}});var i,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(l){return l};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(a).length!==0){var o,c=[];for(o in c.push("<<"),a)c.push("/"+o+" ("+Hl(r(a[o]))+")");return c.push(">>"),c.join(`
`)}},set:function(r){ar(r)==="object"&&(a=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(r){typeof r=="string"&&(a.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(r){i=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(r){i="/"+r}})};os(Ja,ho);var zd=function(){Ja.call(this),this.pushButton=!0};os(zd,Ja);var bc=function(){Ja.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(a){i=a!==void 0?a:[]}})};os(bc,Ja);var Gd=function(){var i,a;ho.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(c){i=c}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return a},set:function(c){a=c}});var r,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var c=function(p){return p};this.scope&&(c=this.scope.internal.getEncryptor(this.objId));var l,m=[];for(l in m.push("<<"),o)m.push("/"+l+" ("+Hl(c(o[l]))+")");return m.push(">>"),m.join(`
`)},set:function(c){ar(c)==="object"&&(o=c)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(c){typeof c=="string"&&(o.CA=c)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(c){r=c}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(c){r="/"+c}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Rt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};os(Gd,ho),bc.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var a in this.Kids)if(this.Kids.hasOwnProperty(a)){var r=this.Kids[a];r.appearanceStreamContent=i.createAppearanceStream(r.optionName),r.caption=i.getCA()}},bc.prototype.createOption=function(i){var a=new Gd;return a.Parent=this,a.optionName=i,this.Kids.push(a),Xx.call(this.scope,a),a};var Ud=function(){Ja.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Rt.CheckBox.createAppearanceStream()};os(Ud,Ja);var zl=function(){ho.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,13)},set:function(a){a?this.Ff=ua(this.Ff,13):this.Ff=fa(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,21)},set:function(a){a?this.Ff=ua(this.Ff,21):this.Ff=fa(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,23)},set:function(a){a?this.Ff=ua(this.Ff,23):this.Ff=fa(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,24)},set:function(a){a?this.Ff=ua(this.Ff,24):this.Ff=fa(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,25)},set:function(a){a?this.Ff=ua(this.Ff,25):this.Ff=fa(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,26)},set:function(a){a?this.Ff=ua(this.Ff,26):this.Ff=fa(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(a){i=a}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(a){Number.isInteger(a)&&(i=a)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};os(zl,ho);var qd=function(){zl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!da(this.Ff,14)},set:function(i){i?this.Ff=ua(this.Ff,14):this.Ff=fa(this.Ff,14)}}),this.password=!0};os(qd,zl);var Rt={CheckBox:{createAppearanceStream:function(){return{N:{On:Rt.CheckBox.YesNormal},D:{On:Rt.CheckBox.YesPushDown,Off:Rt.CheckBox.OffPushDown}}},YesPushDown:function(i){var a=Mo(i);a.scope=i.scope;var r=[],o=i.scope.internal.getFont(i.fontName,i.fontStyle).id,c=i.scope.__private__.encodeColorString(i.color),l=Sf(i,i.caption);return r.push("0.749023 g"),r.push("0 0 "+mn(Rt.internal.getWidth(i))+" "+mn(Rt.internal.getHeight(i))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+o+" "+mn(l.fontSize)+" Tf "+c),r.push("BT"),r.push(l.text),r.push("ET"),r.push("Q"),r.push("EMC"),a.stream=r.join(`
`),a},YesNormal:function(i){var a=Mo(i);a.scope=i.scope;var r=i.scope.internal.getFont(i.fontName,i.fontStyle).id,o=i.scope.__private__.encodeColorString(i.color),c=[],l=Rt.internal.getHeight(i),m=Rt.internal.getWidth(i),p=Sf(i,i.caption);return c.push("1 g"),c.push("0 0 "+mn(m)+" "+mn(l)+" re"),c.push("f"),c.push("q"),c.push("0 0 1 rg"),c.push("0 0 "+mn(m-1)+" "+mn(l-1)+" re"),c.push("W"),c.push("n"),c.push("0 g"),c.push("BT"),c.push("/"+r+" "+mn(p.fontSize)+" Tf "+o),c.push(p.text),c.push("ET"),c.push("Q"),a.stream=c.join(`
`),a},OffPushDown:function(i){var a=Mo(i);a.scope=i.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mn(Rt.internal.getWidth(i))+" "+mn(Rt.internal.getHeight(i))+" re"),r.push("f"),a.stream=r.join(`
`),a}},RadioButton:{Circle:{createAppearanceStream:function(i){var a={D:{Off:Rt.RadioButton.Circle.OffPushDown},N:{}};return a.N[i]=Rt.RadioButton.Circle.YesNormal,a.D[i]=Rt.RadioButton.Circle.YesPushDown,a},getCA:function(){return"l"},YesNormal:function(i){var a=Mo(i);a.scope=i.scope;var r=[],o=Rt.internal.getWidth(i)<=Rt.internal.getHeight(i)?Rt.internal.getWidth(i)/4:Rt.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var c=Rt.internal.Bezier_C,l=Number((o*c).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+pl(Rt.internal.getWidth(i)/2)+" "+pl(Rt.internal.getHeight(i)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),r.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),r.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),r.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a},YesPushDown:function(i){var a=Mo(i);a.scope=i.scope;var r=[],o=Rt.internal.getWidth(i)<=Rt.internal.getHeight(i)?Rt.internal.getWidth(i)/4:Rt.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var c=Number((2*o).toFixed(5)),l=Number((c*Rt.internal.Bezier_C).toFixed(5)),m=Number((o*Rt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+pl(Rt.internal.getWidth(i)/2)+" "+pl(Rt.internal.getHeight(i)/2)+" cm"),r.push(c+" 0 m"),r.push(c+" "+l+" "+l+" "+c+" 0 "+c+" c"),r.push("-"+l+" "+c+" -"+c+" "+l+" -"+c+" 0 c"),r.push("-"+c+" -"+l+" -"+l+" -"+c+" 0 -"+c+" c"),r.push(l+" -"+c+" "+c+" -"+l+" "+c+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+pl(Rt.internal.getWidth(i)/2)+" "+pl(Rt.internal.getHeight(i)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+m+" "+m+" "+o+" 0 "+o+" c"),r.push("-"+m+" "+o+" -"+o+" "+m+" -"+o+" 0 c"),r.push("-"+o+" -"+m+" -"+m+" -"+o+" 0 -"+o+" c"),r.push(m+" -"+o+" "+o+" -"+m+" "+o+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a},OffPushDown:function(i){var a=Mo(i);a.scope=i.scope;var r=[],o=Rt.internal.getWidth(i)<=Rt.internal.getHeight(i)?Rt.internal.getWidth(i)/4:Rt.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var c=Number((2*o).toFixed(5)),l=Number((c*Rt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+pl(Rt.internal.getWidth(i)/2)+" "+pl(Rt.internal.getHeight(i)/2)+" cm"),r.push(c+" 0 m"),r.push(c+" "+l+" "+l+" "+c+" 0 "+c+" c"),r.push("-"+l+" "+c+" -"+c+" "+l+" -"+c+" 0 c"),r.push("-"+c+" -"+l+" -"+l+" -"+c+" 0 -"+c+" c"),r.push(l+" -"+c+" "+c+" -"+l+" "+c+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a}},Cross:{createAppearanceStream:function(i){var a={D:{Off:Rt.RadioButton.Cross.OffPushDown},N:{}};return a.N[i]=Rt.RadioButton.Cross.YesNormal,a.D[i]=Rt.RadioButton.Cross.YesPushDown,a},getCA:function(){return"8"},YesNormal:function(i){var a=Mo(i);a.scope=i.scope;var r=[],o=Rt.internal.calculateCross(i);return r.push("q"),r.push("1 1 "+mn(Rt.internal.getWidth(i)-2)+" "+mn(Rt.internal.getHeight(i)-2)+" re"),r.push("W"),r.push("n"),r.push(mn(o.x1.x)+" "+mn(o.x1.y)+" m"),r.push(mn(o.x2.x)+" "+mn(o.x2.y)+" l"),r.push(mn(o.x4.x)+" "+mn(o.x4.y)+" m"),r.push(mn(o.x3.x)+" "+mn(o.x3.y)+" l"),r.push("s"),r.push("Q"),a.stream=r.join(`
`),a},YesPushDown:function(i){var a=Mo(i);a.scope=i.scope;var r=Rt.internal.calculateCross(i),o=[];return o.push("0.749023 g"),o.push("0 0 "+mn(Rt.internal.getWidth(i))+" "+mn(Rt.internal.getHeight(i))+" re"),o.push("f"),o.push("q"),o.push("1 1 "+mn(Rt.internal.getWidth(i)-2)+" "+mn(Rt.internal.getHeight(i)-2)+" re"),o.push("W"),o.push("n"),o.push(mn(r.x1.x)+" "+mn(r.x1.y)+" m"),o.push(mn(r.x2.x)+" "+mn(r.x2.y)+" l"),o.push(mn(r.x4.x)+" "+mn(r.x4.y)+" m"),o.push(mn(r.x3.x)+" "+mn(r.x3.y)+" l"),o.push("s"),o.push("Q"),a.stream=o.join(`
`),a},OffPushDown:function(i){var a=Mo(i);a.scope=i.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mn(Rt.internal.getWidth(i))+" "+mn(Rt.internal.getHeight(i))+" re"),r.push("f"),a.stream=r.join(`
`),a}}},createDefaultAppearanceStream:function(i){var a=i.scope.internal.getFont(i.fontName,i.fontStyle).id,r=i.scope.__private__.encodeColorString(i.color);return"/"+a+" "+i.fontSize+" Tf "+r}};Rt.internal={Bezier_C:.551915024494,calculateCross:function(i){var a=Rt.internal.getWidth(i),r=Rt.internal.getHeight(i),o=Math.min(a,r);return{x1:{x:(a-o)/2,y:(r-o)/2+o},x2:{x:(a-o)/2+o,y:(r-o)/2},x3:{x:(a-o)/2,y:(r-o)/2},x4:{x:(a-o)/2+o,y:(r-o)/2+o}}}},Rt.internal.getWidth=function(i){var a=0;return ar(i)==="object"&&(a=sm(i.Rect[2])),a},Rt.internal.getHeight=function(i){var a=0;return ar(i)==="object"&&(a=sm(i.Rect[3])),a};var Xx=ea.addField=function(i){if(Qx(this,i),!(i instanceof ho))throw new Error("Invalid argument passed to jsPDF.addField.");var a;return(a=i).scope.internal.acroformPlugin.printedOut&&(a.scope.internal.acroformPlugin.printedOut=!1,a.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),a.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(a),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};ea.AcroFormChoiceField=xc,ea.AcroFormListBox=yc,ea.AcroFormComboBox=vc,ea.AcroFormEditBox=Bd,ea.AcroFormButton=Ja,ea.AcroFormPushButton=zd,ea.AcroFormRadioButton=bc,ea.AcroFormCheckBox=Ud,ea.AcroFormTextField=zl,ea.AcroFormPasswordField=qd,ea.AcroFormAppearance=Rt,ea.AcroForm={ChoiceField:xc,ListBox:yc,ComboBox:vc,EditBox:Bd,Button:Ja,PushButton:zd,RadioButton:bc,CheckBox:Ud,TextField:zl,PasswordField:qd,Appearance:Rt},Gt.AcroForm={ChoiceField:xc,ListBox:yc,ComboBox:vc,EditBox:Bd,Button:Ja,PushButton:zd,RadioButton:bc,CheckBox:Ud,TextField:zl,PasswordField:qd,Appearance:Rt};Gt.AcroForm;function S0(i){return i.reduce(function(a,r,o){return a[r]=o,a},{})}(function(i){var a="addImage_";i.__addimage__={};var r="UNKNOWN",o={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},c=i.__addimage__.getImageFileTypeByImageData=function(z,$){var le,ie,we,_e,Ie,pe=r;if(($=$||r)==="RGBA"||z.data!==void 0&&z.data instanceof Uint8ClampedArray&&"height"in z&&"width"in z)return"RGBA";if(he(z))for(Ie in o)for(we=o[Ie],le=0;le<we.length;le+=1){for(_e=!0,ie=0;ie<we[le].length;ie+=1)if(we[le][ie]!==void 0&&we[le][ie]!==z[ie]){_e=!1;break}if(_e===!0){pe=Ie;break}}else for(Ie in o)for(we=o[Ie],le=0;le<we.length;le+=1){for(_e=!0,ie=0;ie<we[le].length;ie+=1)if(we[le][ie]!==void 0&&we[le][ie]!==z.charCodeAt(ie)){_e=!1;break}if(_e===!0){pe=Ie;break}}return pe===r&&$!==r&&(pe=$),pe},l=function z($){for(var le=this.internal.write,ie=this.internal.putStream,we=(0,this.internal.getFilters)();we.indexOf("FlateEncode")!==-1;)we.splice(we.indexOf("FlateEncode"),1);$.objectId=this.internal.newObject();var _e=[];if(_e.push({key:"Type",value:"/XObject"}),_e.push({key:"Subtype",value:"/Image"}),_e.push({key:"Width",value:$.width}),_e.push({key:"Height",value:$.height}),$.colorSpace===P.INDEXED?_e.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+($.palette.length/3-1)+" "+("sMask"in $&&$.sMask!==void 0?$.objectId+2:$.objectId+1)+" 0 R]"}):(_e.push({key:"ColorSpace",value:"/"+$.colorSpace}),$.colorSpace===P.DEVICE_CMYK&&_e.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),_e.push({key:"BitsPerComponent",value:$.bitsPerComponent}),"decodeParameters"in $&&$.decodeParameters!==void 0&&_e.push({key:"DecodeParms",value:"<<"+$.decodeParameters+">>"}),"transparency"in $&&Array.isArray($.transparency)&&$.transparency.length>0){for(var Ie="",pe=0,Pe=$.transparency.length;pe<Pe;pe++)Ie+=$.transparency[pe]+" "+$.transparency[pe]+" ";_e.push({key:"Mask",value:"["+Ie+"]"})}$.sMask!==void 0&&_e.push({key:"SMask",value:$.objectId+1+" 0 R"});var ze=$.filter!==void 0?["/"+$.filter]:void 0;if(ie({data:$.data,additionalKeyValues:_e,alreadyAppliedFilters:ze,objectId:$.objectId}),le("endobj"),"sMask"in $&&$.sMask!==void 0){var te,C=(te=$.sMaskBitsPerComponent)!==null&&te!==void 0?te:$.bitsPerComponent,J={width:$.width,height:$.height,colorSpace:"DeviceGray",bitsPerComponent:C,data:$.sMask};"filter"in $&&(J.decodeParameters="/Predictor ".concat($.predictor," /Colors 1 /BitsPerComponent ").concat(C," /Columns ").concat($.width),J.filter=$.filter),z.call(this,J)}if($.colorSpace===P.INDEXED){var Z=this.internal.newObject();ie({data:ge(new Uint8Array($.palette)),objectId:Z}),le("endobj")}},m=function(){var z=this.internal.collections[a+"images"];for(var $ in z)l.call(this,z[$])},p=function(){var z,$=this.internal.collections[a+"images"],le=this.internal.write;for(var ie in $)le("/I"+(z=$[ie]).index,z.objectId,"0","R")},g=function(){this.internal.collections[a+"images"]||(this.internal.collections[a+"images"]={},this.internal.events.subscribe("putResources",m),this.internal.events.subscribe("putXobjectDict",p))},v=function(){var z=this.internal.collections[a+"images"];return g.call(this),z},j=function(){return Object.keys(this.internal.collections[a+"images"]).length},A=function(z){return typeof i["process"+z.toUpperCase()]=="function"},M=function(z){return ar(z)==="object"&&z.nodeType===1},b=function(z,$){if(z.nodeName==="IMG"&&z.hasAttribute("src")){var le=""+z.getAttribute("src");if(le.indexOf("data:image/")===0)return Od(unescape(le).split("base64,").pop());var ie=i.loadFile(le,!0);if(ie!==void 0)return ie}if(z.nodeName==="CANVAS"){if(z.width===0||z.height===0)throw new Error("Given canvas must have data. Canvas width: "+z.width+", height: "+z.height);var we;switch($){case"PNG":we="image/png";break;case"WEBP":we="image/webp";break;default:we="image/jpeg"}return Od(z.toDataURL(we,1).split("base64,").pop())}},U=function(z){var $=this.internal.collections[a+"images"];if($){for(var le in $)if(z===$[le].alias)return $[le]}},E=function(z,$,le){return z||$||(z=-96,$=-96),z<0&&(z=-1*le.width*72/z/this.internal.scaleFactor),$<0&&($=-1*le.height*72/$/this.internal.scaleFactor),z===0&&(z=$*le.width/le.height),$===0&&($=z*le.height/le.width),[z,$]},I=function(z,$,le,ie,we,_e){var Ie=E.call(this,le,ie,we),pe=this.internal.getCoordinateString,Pe=this.internal.getVerticalCoordinateString,ze=v.call(this);if(le=Ie[0],ie=Ie[1],ze[we.index]=we,_e){_e*=Math.PI/180;var te=Math.cos(_e),C=Math.sin(_e),J=function(de){return de.toFixed(4)},Z=[J(te),J(C),J(-1*C),J(te),0,0,"cm"]}this.internal.write("q"),_e?(this.internal.write([1,"0","0",1,pe(z),Pe($+ie),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([pe(le),"0","0",pe(ie),"0","0","cm"].join(" "))):this.internal.write([pe(le),"0","0",pe(ie),pe(z),Pe($+ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+we.index+" Do"),this.internal.write("Q")},P=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var W=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},X=i.__addimage__.sHashCode=function(z){var $,le,ie=0;if(typeof z=="string")for(le=z.length,$=0;$<le;$++)ie=(ie<<5)-ie+z.charCodeAt($),ie|=0;else if(he(z))for(le=z.byteLength/2,$=0;$<le;$++)ie=(ie<<5)-ie+z[$],ie|=0;return ie},H=i.__addimage__.validateStringAsBase64=function(z){(z=z||"").toString().trim();var $=!0;return z.length===0&&($=!1),z.length%4!=0&&($=!1),/^[A-Za-z0-9+/]+$/.test(z.substr(0,z.length-2))===!1&&($=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(z.substr(-2))===!1&&($=!1),$},fe=i.__addimage__.extractImageFromDataUrl=function(z){if(z==null||!(z=z.trim()).startsWith("data:"))return null;var $=z.indexOf(",");return $<0?null:z.substring(0,$).trim().endsWith("base64")?z.substring($+1):null};i.__addimage__.isArrayBuffer=function(z){return z instanceof ArrayBuffer};var he=i.__addimage__.isArrayBufferView=function(z){return z instanceof Int8Array||z instanceof Uint8Array||z instanceof Uint8ClampedArray||z instanceof Int16Array||z instanceof Uint16Array||z instanceof Int32Array||z instanceof Uint32Array||z instanceof Float32Array||z instanceof Float64Array},Ee=i.__addimage__.binaryStringToUint8Array=function(z){for(var $=z.length,le=new Uint8Array($),ie=0;ie<$;ie++)le[ie]=z.charCodeAt(ie);return le},ge=i.__addimage__.arrayBufferToBinaryString=function(z){for(var $="",le=he(z)?z:new Uint8Array(z),ie=0;ie<le.length;ie+=8192)$+=String.fromCharCode.apply(null,le.subarray(ie,ie+8192));return $};i.addImage=function(){var z,$,le,ie,we,_e,Ie,pe,Pe;if(typeof arguments[1]=="number"?($=r,le=arguments[1],ie=arguments[2],we=arguments[3],_e=arguments[4],Ie=arguments[5],pe=arguments[6],Pe=arguments[7]):($=arguments[1],le=arguments[2],ie=arguments[3],we=arguments[4],_e=arguments[5],Ie=arguments[6],pe=arguments[7],Pe=arguments[8]),ar(z=arguments[0])==="object"&&!M(z)&&"imageData"in z){var ze=z;z=ze.imageData,$=ze.format||$||r,le=ze.x||le||0,ie=ze.y||ie||0,we=ze.w||ze.width||we,_e=ze.h||ze.height||_e,Ie=ze.alias||Ie,pe=ze.compression||pe,Pe=ze.rotation||ze.angle||Pe}var te=this.internal.getFilters();if(pe===void 0&&te.indexOf("FlateEncode")!==-1&&(pe="SLOW"),isNaN(le)||isNaN(ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");g.call(this);var C=ee.call(this,z,$,Ie,pe);return I.call(this,le,ie,we,_e,C,Pe),this};var ee=function(z,$,le,ie){var we,_e,Ie;if(typeof z=="string"&&c(z)===r){z=unescape(z);var pe=xe(z,!1);(pe!==""||(pe=i.loadFile(z,!0))!==void 0)&&(z=pe)}if(M(z)&&(z=b(z,$)),$=c(z,$),!A($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(((Ie=le)==null||Ie.length===0)&&(le=(function(Pe){return typeof Pe=="string"||he(Pe)?X(Pe):he(Pe.data)?X(Pe.data):null})(z)),(we=U.call(this,le))||(z instanceof Uint8Array||$==="RGBA"||(_e=z,z=Ee(z)),we=this["process"+$.toUpperCase()](z,j.call(this),le,(function(Pe){return Pe&&typeof Pe=="string"&&(Pe=Pe.toUpperCase()),Pe in i.image_compression?Pe:W.NONE})(ie),_e)),!we)throw new Error("An unknown error occurred whilst processing the image.");return we},xe=i.__addimage__.convertBase64ToBinaryString=function(z,$){$=typeof $!="boolean"||$;var le,ie="";if(typeof z=="string"){var we;le=(we=fe(z))!==null&&we!==void 0?we:z;try{ie=Od(le)}catch(_e){if($)throw H(le)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+_e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ie};i.getImageProperties=function(z){var $,le,ie="";if(M(z)&&(z=b(z)),typeof z=="string"&&c(z)===r&&((ie=xe(z,!1))===""&&(ie=i.loadFile(z)||""),z=ie),le=c(z),!A(le))throw new Error("addImage does not support files of type '"+le+"', please ensure that a plugin for '"+le+"' support is added.");if(z instanceof Uint8Array||(z=Ee(z)),!($=this["process"+le.toUpperCase()](z)))throw new Error("An unknown error occurred whilst processing the image");return $.fileType=le,$}})(Gt.API),(function(i){var a=function(r){if(r!==void 0&&r!="")return!0};Gt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(r){for(var o,c,l,m=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString,g=this.internal.getPageInfoByObjId(r.objId),v=r.pageContext.annotations,j=!1,A=0;A<v.length&&!j;A++)switch((o=v[A]).type){case"link":(a(o.options.url)||a(o.options.pageNumber))&&(j=!0);break;case"reference":case"text":case"freetext":j=!0}if(j!=0){this.internal.write("/Annots [");for(var M=0;M<v.length;M++){o=v[M];var b=this.internal.pdfEscape,U=this.internal.getEncryptor(r.objId);switch(o.type){case"reference":this.internal.write(" "+o.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),I=this.internal.newAdditionalObject(),P=this.internal.getEncryptor(E.objId),W=o.title||"Note";l="<</Type /Annot /Subtype /Text "+(c="/Rect ["+m(o.bounds.x)+" "+p(o.bounds.y+o.bounds.h)+" "+m(o.bounds.x+o.bounds.w)+" "+p(o.bounds.y)+"] ")+"/Contents ("+b(P(o.contents))+")",l+=" /Popup "+I.objId+" 0 R",l+=" /P "+g.objId+" 0 R",l+=" /T ("+b(P(W))+") >>",E.content=l;var X=E.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(c="/Rect ["+m(o.bounds.x+30)+" "+p(o.bounds.y+o.bounds.h)+" "+m(o.bounds.x+o.bounds.w+30)+" "+p(o.bounds.y)+"] ")+" /Parent "+X,o.open&&(l+=" /Open true"),l+=" >>",I.content=l,this.internal.write(E.objId,"0 R",I.objId,"0 R");break;case"freetext":c="/Rect ["+m(o.bounds.x)+" "+p(o.bounds.y)+" "+m(o.bounds.x+o.bounds.w)+" "+p(o.bounds.y+o.bounds.h)+"] ";var H=o.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+c+"/Contents ("+b(U(o.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+H+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(o.options.name){var fe=this.annotations._nameMap[o.options.name];o.options.pageNumber=fe.page,o.options.top=fe.y}else o.options.top||(o.options.top=0);if(c="/Rect ["+o.finalBounds.x+" "+o.finalBounds.y+" "+o.finalBounds.w+" "+o.finalBounds.h+"] ",l="",o.options.url)l="<</Type /Annot /Subtype /Link "+c+"/Border [0 0 0] /A <</S /URI /URI ("+b(U(o.options.url))+") >>";else if(o.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+c+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(o.options.pageNumber).objId+" 0 R",o.options.magFactor=o.options.magFactor||"XYZ",o.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+o.options.top+"]";break;case"FitV":o.options.left=o.options.left||0,l+=" /FitV "+o.options.left+"]";break;default:var he=p(o.options.top);o.options.left=o.options.left||0,o.options.zoom===void 0&&(o.options.zoom=0),l+=" /XYZ "+o.options.left+" "+he+" "+o.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),i.createAnnotation=function(r){var o=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":o.pageContext.annotations.push(r)}},i.link=function(r,o,c,l,m){var p=this.internal.getCurrentPageInfo(),g=this.internal.getCoordinateString,v=this.internal.getVerticalCoordinateString;p.pageContext.annotations.push({finalBounds:{x:g(r),y:v(o),w:g(r+c),h:v(o+l)},options:m,type:"link"})},i.textWithLink=function(r,o,c,l){var m,p,g=this.getTextWidth(r),v=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){p=l.maxWidth;var j=this.splitTextToSize(r,p).length;m=Math.ceil(v*j)}else p=g,m=v;return this.text(r,o,c,l),c+=.2*v,l.align==="center"&&(o-=g/2),l.align==="right"&&(o-=g),this.link(o,c-v,p,m,l),g},i.getTextWidth=function(r){var o=this.internal.getFontSize();return this.getStringUnitWidth(r)*o/this.internal.scaleFactor}})(Gt.API),(function(i){var a={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},o={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},c=[1570,1571,1573,1575];i.__arabicParser__={};var l=i.__arabicParser__.isInArabicSubstitutionA=function(E){return a[E.charCodeAt(0)]!==void 0},m=i.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},p=i.__arabicParser__.isArabicEndLetter=function(E){return m(E)&&l(E)&&a[E.charCodeAt(0)].length<=2},g=i.__arabicParser__.isArabicAlfLetter=function(E){return m(E)&&c.indexOf(E.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return m(E)&&l(E)&&a[E.charCodeAt(0)].length>=1};var v=i.__arabicParser__.arabicLetterHasFinalForm=function(E){return m(E)&&l(E)&&a[E.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(E){return m(E)&&l(E)&&a[E.charCodeAt(0)].length>=3};var j=i.__arabicParser__.arabicLetterHasMedialForm=function(E){return m(E)&&l(E)&&a[E.charCodeAt(0)].length==4},A=i.__arabicParser__.resolveLigatures=function(E){var I=0,P=r,W="",X=0;for(I=0;I<E.length;I+=1)P[E.charCodeAt(I)]!==void 0?(X++,typeof(P=P[E.charCodeAt(I)])=="number"&&(W+=String.fromCharCode(P),P=r,X=0),I===E.length-1&&(P=r,W+=E.charAt(I-(X-1)),I-=X-1,X=0)):(P=r,W+=E.charAt(I-X),I-=X,X=0);return W};i.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&o[E.charCodeAt(0)]!==void 0};var M=i.__arabicParser__.getCorrectForm=function(E,I,P){return m(E)?l(E)===!1?-1:!v(E)||!m(I)&&!m(P)||!m(P)&&p(I)||p(E)&&!m(I)||p(E)&&g(I)||p(E)&&p(I)?0:j(E)&&m(I)&&!p(I)&&m(P)&&v(P)?3:p(E)||!m(P)?1:2:-1},b=function(E){var I=0,P=0,W=0,X="",H="",fe="",he=(E=E||"").split("\\s+"),Ee=[];for(I=0;I<he.length;I+=1){for(Ee.push(""),P=0;P<he[I].length;P+=1)X=he[I][P],H=he[I][P-1],fe=he[I][P+1],m(X)?(W=M(X,H,fe),Ee[I]+=W!==-1?String.fromCharCode(a[X.charCodeAt(0)][W]):X):Ee[I]+=X;Ee[I]=A(Ee[I])}return Ee.join(" ")},U=i.__arabicParser__.processArabic=i.processArabic=function(){var E,I=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,P=[];if(Array.isArray(I)){var W=0;for(P=[],W=0;W<I.length;W+=1)Array.isArray(I[W])?P.push([b(I[W][0]),I[W][1],I[W][2]]):P.push([b(I[W])]);E=P}else E=b(I);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};i.events.push(["preProcessText",U])})(Gt.API),Gt.API.autoPrint=function(i){var a;return(i=i||{}).variant=i.variant||"non-conform",i.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){a=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+a+" 0 R")})),this},(function(i){var a=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(p){r=p}});var o=150;Object.defineProperty(this,"width",{get:function(){return o},set:function(p){o=isNaN(p)||Number.isInteger(p)===!1||p<0?150:p,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=o+1)}});var c=300;Object.defineProperty(this,"height",{get:function(){return c},set:function(p){c=isNaN(p)||Number.isInteger(p)===!1||p<0?300:p,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=c+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(p){l=p}});var m={};Object.defineProperty(this,"style",{get:function(){return m},set:function(p){m=p}}),Object.defineProperty(this,"parentNode",{})};a.prototype.getContext=function(r,o){var c;if((r=r||"2d")!=="2d")return null;for(c in o)this.pdf.context2d.hasOwnProperty(c)&&(this.pdf.context2d[c]=o[c]);return this.pdf.context2d._canvas=this,this.pdf.context2d},a.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new a,this.canvas.pdf=this}])})(Gt.API),(function(i){var a={left:0,top:0,bottom:0,right:0},r=!1,o=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},a),this.internal.__cell__.margins.width=this.getPageWidth(),c.call(this))},c=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var g=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return g},set:function(E){g=E}});var v=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var j=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return j},set:function(E){j=E}});var A=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return A},set:function(E){A=E}});var M=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return M},set:function(E){M=E}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(E){b=E}});var U=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return U},set:function(E){U=E}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(g){return o.call(this),this.internal.__cell__.headerFunction=typeof g=="function"?g:void 0,this},i.getTextDimensions=function(g,v){o.call(this);var j=(v=v||{}).fontSize||this.getFontSize(),A=v.font||this.getFont(),M=v.scaleFactor||this.internal.scaleFactor,b=0,U=0,E=0,I=this;if(!Array.isArray(g)&&typeof g!="string"){if(typeof g!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");g=String(g)}var P=v.maxWidth;P>0?typeof g=="string"?g=this.splitTextToSize(g,P):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(X,H){return X.concat(I.splitTextToSize(H,P))},[])):g=Array.isArray(g)?g:[g];for(var W=0;W<g.length;W++)b<(E=this.getStringUnitWidth(g[W],{font:A})*j)&&(b=E);return b!==0&&(U=g.length),{w:b/=M,h:Math.max((U*j*this.getLineHeightFactor()-j*(this.getLineHeightFactor()-1))/M,0)}},i.cellAddPage=function(){o.call(this),this.addPage();var g=this.internal.__cell__.margins||a;return this.internal.__cell__.lastCell=new l(g.left,g.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var m=i.cell=function(){var g;g=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),o.call(this);var v=this.internal.__cell__.lastCell,j=this.internal.__cell__.padding,A=this.internal.__cell__.margins||a,M=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return v.lineNumber!==void 0&&(v.lineNumber===g.lineNumber?(g.x=(v.x||0)+(v.width||0),g.y=v.y||0):v.y+v.height+g.height+A.bottom>this.getPageHeight()?(this.cellAddPage(),g.y=A.top,b&&M&&(this.printHeaderRow(g.lineNumber,!0),g.y+=M[0].height)):g.y=v.y+v.height||g.y),g.text[0]!==void 0&&(this.rect(g.x,g.y,g.width,g.height,r===!0?"FD":void 0),g.align==="right"?this.text(g.text,g.x+g.width-j,g.y+j,{align:"right",baseline:"top"}):g.align==="center"?this.text(g.text,g.x+g.width/2,g.y+j,{align:"center",baseline:"top",maxWidth:g.width-j-j}):this.text(g.text,g.x+j,g.y+j,{align:"left",baseline:"top",maxWidth:g.width-j-j})),this.internal.__cell__.lastCell=g,this};i.table=function(g,v,j,A,M){if(o.call(this),!j)throw new Error("No data for PDF table.");var b,U,E,I,P=[],W=[],X=[],H={},fe={},he=[],Ee=[],ge=(M=M||{}).autoSize||!1,ee=M.printHeaders!==!1,xe=M.css&&M.css["font-size"]!==void 0?16*M.css["font-size"]:M.fontSize||12,z=M.margins||Object.assign({width:this.getPageWidth()},a),$=typeof M.padding=="number"?M.padding:3,le=M.headerBackgroundColor||"#c8c8c8",ie=M.headerTextColor||"#000";if(c.call(this),this.internal.__cell__.printHeaders=ee,this.internal.__cell__.margins=z,this.internal.__cell__.table_font_size=xe,this.internal.__cell__.padding=$,this.internal.__cell__.headerBackgroundColor=le,this.internal.__cell__.headerTextColor=ie,this.setFontSize(xe),A==null)W=P=Object.keys(j[0]),X=P.map(function(){return"left"});else if(Array.isArray(A)&&ar(A[0])==="object")for(P=A.map(function(ze){return ze.name}),W=A.map(function(ze){return ze.prompt||ze.name||""}),X=A.map(function(ze){return ze.align||"left"}),b=0;b<A.length;b+=1)fe[A[b].name]=.7499990551181103*A[b].width;else Array.isArray(A)&&typeof A[0]=="string"&&(W=P=A,X=P.map(function(){return"left"}));if(ge||Array.isArray(A)&&typeof A[0]=="string")for(b=0;b<P.length;b+=1){for(H[I=P[b]]=j.map(function(ze){return ze[I]}),this.setFont(void 0,"bold"),he.push(this.getTextDimensions(W[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),U=H[I],this.setFont(void 0,"normal"),E=0;E<U.length;E+=1)he.push(this.getTextDimensions(U[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);fe[I]=Math.max.apply(null,he)+$+$,he=[]}if(ee){var we={};for(b=0;b<P.length;b+=1)we[P[b]]={},we[P[b]].text=W[b],we[P[b]].align=X[b];var _e=p.call(this,we,fe);Ee=P.map(function(ze){return new l(g,v,fe[ze],_e,we[ze].text,void 0,we[ze].align)}),this.setTableHeaderRow(Ee),this.printHeaderRow(1,!1)}var Ie=A.reduce(function(ze,te){return ze[te.name]=te.align,ze},{});for(b=0;b<j.length;b+=1){"rowStart"in M&&M.rowStart instanceof Function&&M.rowStart({row:b,data:j[b]},this);var pe=p.call(this,j[b],fe);for(E=0;E<P.length;E+=1){var Pe=j[b][P[E]];"cellStart"in M&&M.cellStart instanceof Function&&M.cellStart({row:b,col:E,data:Pe},this),m.call(this,new l(g,v,fe[P[E]],pe,Pe,b+2,Ie[P[E]]))}}return this.internal.__cell__.table_x=g,this.internal.__cell__.table_y=v,this};var p=function(g,v){var j=this.internal.__cell__.padding,A=this.internal.__cell__.table_font_size,M=this.internal.scaleFactor;return Object.keys(g).map(function(b){var U=g[b];return this.splitTextToSize(U.hasOwnProperty("text")?U.text:U,v[b]-j-j)},this).map(function(b){return this.getLineHeightFactor()*b.length*A/M+j+j},this).reduce(function(b,U){return Math.max(b,U)},0)};i.setTableHeaderRow=function(g){o.call(this),this.internal.__cell__.tableHeaderRow=g},i.printHeaderRow=function(g,v){if(o.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var j;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var A=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(A[0],A[1],A[2],A[3],void 0,-1)}this.setFont(void 0,"bold");for(var M=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){j=this.internal.__cell__.tableHeaderRow[b].clone(),v&&(j.y=this.internal.__cell__.margins.top||0,M.push(j)),j.lineNumber=g;var U=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),m.call(this,j),this.setTextColor(U)}M.length>0&&this.setTableHeaderRow(M),this.setFont(void 0,"normal"),r=!1}})(Gt.API);var N0={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},k0=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Nf=S0(k0),A0=[100,200,300,400,500,600,700,800,900],Zx=S0(A0);function sf(i){var a=i.family.replace(/"|'/g,"").toLowerCase(),r=(function(l){return N0[l=l||"normal"]?l:"normal"})(i.style),o=(function(l){return l?typeof l=="number"?l>=100&&l<=900&&l%100==0?l:400:/^\d00$/.test(l)?parseInt(l):l==="bold"?700:400:400})(i.weight),c=(function(l){return typeof Nf[l=l||"normal"]=="number"?l:"normal"})(i.stretch);return{family:a,style:r,weight:o,stretch:c,src:i.src||[],ref:i.ref||{name:a,style:[c,r,o].join(" ")}}}function om(i,a,r,o){var c;for(c=r;c>=0&&c<a.length;c+=o)if(i[a[c]])return i[a[c]];for(c=r;c>=0&&c<a.length;c-=o)if(i[a[c]])return i[a[c]]}var ey={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},lm={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function cm(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function dm(i){return i.trimLeft()}function ty(i,a){for(var r=0;r<i.length;){if(i.charAt(r)===a)return[i.substring(0,r),i.substring(r+1)];r+=1}return null}function ny(i){var a=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return a===null?null:[a[0],i.substring(a[0].length)]}var Dd,um,fm,hc,Fd,hm,pm,mm,of=["times"];function gm(i,a,r,o,c){var l=4,m=ym;switch(c){case Gt.API.image_compression.FAST:l=1,m=xm;break;case Gt.API.image_compression.MEDIUM:l=6,m=vm;break;case Gt.API.image_compression.SLOW:l=9,m=bm}i=(function(g,v,j,A){for(var M,b=g.length/v,U=new Uint8Array(g.length+b),E=[ry,xm,ym,vm,bm],I=0;I<b;I+=1){var P=I*v,W=g.subarray(P,P+v);if(A)U.set(A(W,j,M),P+I);else{for(var X=E.length,H=[],fe=0;fe<X;fe+=1)H[fe]=E[fe](W,j,M);var he=iy(H.concat());U.set(H[he],P+I)}M=W}return U})(i,a,Math.ceil(r*o/8),m);var p=xf(i,{level:l});return Gt.API.__addimage__.arrayBufferToBinaryString(p)}function ry(i){var a=Array.apply([],i);return a.unshift(0),a}function xm(i,a){var r=i.length,o=[];o[0]=1;for(var c=0;c<r;c+=1){var l=i[c-a]||0;o[c+1]=i[c]-l+256&255}return o}function ym(i,a,r){var o=i.length,c=[];c[0]=2;for(var l=0;l<o;l+=1){var m=r&&r[l]||0;c[l+1]=i[l]-m+256&255}return c}function vm(i,a,r){var o=i.length,c=[];c[0]=3;for(var l=0;l<o;l+=1){var m=i[l-a]||0,p=r&&r[l]||0;c[l+1]=i[l]+256-(m+p>>>1)&255}return c}function bm(i,a,r){var o=i.length,c=[];c[0]=4;for(var l=0;l<o;l+=1){var m=ay(i[l-a]||0,r&&r[l]||0,r&&r[l-a]||0);c[l+1]=i[l]-m+256&255}return c}function ay(i,a,r){if(i===a&&a===r)return i;var o=Math.abs(a-r),c=Math.abs(i-r),l=Math.abs(i+a-r-r);return o<=c&&o<=l?i:c<=l?a:r}function iy(i){var a=i.map(function(r){return r.reduce(function(o,c){return o+Math.abs(c)},0)});return a.indexOf(Math.min.apply(null,a))}function lf(i,a,r){var o=a*r,c=Math.floor(o/8),l=16-(o-8*c+r),m=(1<<r)-1;return C0(i,c)>>l&m}function wm(i,a,r,o){var c=r*o,l=Math.floor(c/8),m=16-(c-8*l+o),p=(1<<o)-1,g=(a&p)<<m;(function(v,j,A){if(j+1<v.byteLength)v.setUint16(j,A,!1);else{var M=A>>8&255;v.setUint8(j,M)}})(i,l,C0(i,l)&~(p<<m)&65535|g)}function C0(i,a){return a+1<i.byteLength?i.getUint16(a,!1):i.getUint8(a)<<8}function sy(i){var a=0;if(i[a++]!==71||i[a++]!==73||i[a++]!==70||i[a++]!==56||(i[a++]+1&253)!=56||i[a++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=i[a++]|i[a++]<<8,o=i[a++]|i[a++]<<8,c=i[a++],l=c>>7,m=1<<1+(7&c);i[a++],i[a++];var p=null,g=null;l&&(p=a,g=m,a+=3*m);var v=!0,j=[],A=0,M=null,b=0,U=null;for(this.width=r,this.height=o;v&&a<i.length;)switch(i[a++]){case 33:switch(i[a++]){case 255:if(i[a]!==11||i[a+1]==78&&i[a+2]==69&&i[a+3]==84&&i[a+4]==83&&i[a+5]==67&&i[a+6]==65&&i[a+7]==80&&i[a+8]==69&&i[a+9]==50&&i[a+10]==46&&i[a+11]==48&&i[a+12]==3&&i[a+13]==1&&i[a+16]==0)a+=14,U=i[a++]|i[a++]<<8,a++;else for(a+=12;;){if(!((z=i[a++])>=0))throw Error("Invalid block size");if(z===0)break;a+=z}break;case 249:if(i[a++]!==4||i[a+4]!==0)throw new Error("Invalid graphics extension block.");var E=i[a++];A=i[a++]|i[a++]<<8,M=i[a++],1&E||(M=null),b=E>>2&7,a++;break;case 254:for(;;){if(!((z=i[a++])>=0))throw Error("Invalid block size");if(z===0)break;a+=z}break;default:throw new Error("Unknown graphic control label: 0x"+i[a-1].toString(16))}break;case 44:var I=i[a++]|i[a++]<<8,P=i[a++]|i[a++]<<8,W=i[a++]|i[a++]<<8,X=i[a++]|i[a++]<<8,H=i[a++],fe=H>>6&1,he=1<<1+(7&H),Ee=p,ge=g,ee=!1;H>>7&&(ee=!0,Ee=a,ge=he,a+=3*he);var xe=a;for(a++;;){var z;if(!((z=i[a++])>=0))throw Error("Invalid block size");if(z===0)break;a+=z}j.push({x:I,y:P,width:W,height:X,has_local_palette:ee,palette_offset:Ee,palette_size:ge,data_offset:xe,data_length:a-xe,transparent_index:M,interlaced:!!fe,delay:A,disposal:b});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+i[a-1].toString(16))}this.numFrames=function(){return j.length},this.loopCount=function(){return U},this.frameInfo=function($){if($<0||$>=j.length)throw new Error("Frame index out of range.");return j[$]},this.decodeAndBlitFrameBGRA=function($,le){var ie=this.frameInfo($),we=ie.width*ie.height,_e=new Uint8Array(we);jm(i,ie.data_offset,_e,we);var Ie=ie.palette_offset,pe=ie.transparent_index;pe===null&&(pe=256);var Pe=ie.width,ze=r-Pe,te=Pe,C=4*(ie.y*r+ie.x),J=4*((ie.y+ie.height)*r+ie.x),Z=C,de=4*ze;ie.interlaced===!0&&(de+=4*r*7);for(var ce=8,be=0,Me=_e.length;be<Me;++be){var Fe=_e[be];if(te===0&&(te=Pe,(Z+=de)>=J&&(de=4*ze+4*r*(ce-1),Z=C+(Pe+ze)*(ce<<1),ce>>=1)),Fe===pe)Z+=4;else{var We=i[Ie+3*Fe],De=i[Ie+3*Fe+1],it=i[Ie+3*Fe+2];le[Z++]=it,le[Z++]=De,le[Z++]=We,le[Z++]=255}--te}},this.decodeAndBlitFrameRGBA=function($,le){var ie=this.frameInfo($),we=ie.width*ie.height,_e=new Uint8Array(we);jm(i,ie.data_offset,_e,we);var Ie=ie.palette_offset,pe=ie.transparent_index;pe===null&&(pe=256);var Pe=ie.width,ze=r-Pe,te=Pe,C=4*(ie.y*r+ie.x),J=4*((ie.y+ie.height)*r+ie.x),Z=C,de=4*ze;ie.interlaced===!0&&(de+=4*r*7);for(var ce=8,be=0,Me=_e.length;be<Me;++be){var Fe=_e[be];if(te===0&&(te=Pe,(Z+=de)>=J&&(de=4*ze+4*r*(ce-1),Z=C+(Pe+ze)*(ce<<1),ce>>=1)),Fe===pe)Z+=4;else{var We=i[Ie+3*Fe],De=i[Ie+3*Fe+1],it=i[Ie+3*Fe+2];le[Z++]=We,le[Z++]=De,le[Z++]=it,le[Z++]=255}--te}}}function jm(i,a,r,o){for(var c=i[a++],l=1<<c,m=l+1,p=m+1,g=c+1,v=(1<<g)-1,j=0,A=0,M=0,b=i[a++],U=new Int32Array(4096),E=null;;){for(;j<16&&b!==0;)A|=i[a++]<<j,j+=8,b===1?b=i[a++]:--b;if(j<g)break;var I=A&v;if(A>>=g,j-=g,I!==l){if(I===m)break;for(var P=I<p?I:E,W=0,X=P;X>l;)X=U[X]>>8,++W;var H=X;if(M+W+(P!==I?1:0)>o)return void fr.log("Warning, gif stream longer than expected.");r[M++]=H;var fe=M+=W;for(P!==I&&(r[M++]=H),X=P;W--;)X=U[X],r[--fe]=255&X,X>>=8;E!==null&&p<4096&&(U[p++]=E<<8|H,p>=v+1&&g<12&&(++g,v=v<<1|1)),E=I}else p=m+1,v=(1<<(g=c+1))-1,E=null}return M!==o&&fr.log("Warning, gif stream shorter than expected."),r}function cf(i){var a,r,o,c,l,m=Math.floor,p=new Array(64),g=new Array(64),v=new Array(64),j=new Array(64),A=new Array(65535),M=new Array(65535),b=new Array(64),U=new Array(64),E=[],I=0,P=7,W=new Array(64),X=new Array(64),H=new Array(64),fe=new Array(256),he=new Array(2048),Ee=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ge=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ee=[0,1,2,3,4,5,6,7,8,9,10,11],xe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],$=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],le=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],we=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function _e(C,J){for(var Z=0,de=0,ce=new Array,be=1;be<=16;be++){for(var Me=1;Me<=C[be];Me++)ce[J[de]]=[],ce[J[de]][0]=Z,ce[J[de]][1]=be,de++,Z++;Z*=2}return ce}function Ie(C){for(var J=C[0],Z=C[1]-1;Z>=0;)J&1<<Z&&(I|=1<<P),Z--,--P<0&&(I==255?(pe(255),pe(0)):pe(I),P=7,I=0)}function pe(C){E.push(C)}function Pe(C){pe(C>>8&255),pe(255&C)}function ze(C,J,Z,de,ce){for(var be,Me=ce[0],Fe=ce[240],We=(function(Xe,bt){var mt,Pt,Dt,wt,Qt,zt,$t,Ae,qe,se,Se=0;for(qe=0;qe<8;++qe){mt=Xe[Se],Pt=Xe[Se+1],Dt=Xe[Se+2],wt=Xe[Se+3],Qt=Xe[Se+4],zt=Xe[Se+5],$t=Xe[Se+6];var rt=mt+(Ae=Xe[Se+7]),ht=mt-Ae,He=Pt+$t,ct=Pt-$t,Vt=Dt+zt,vt=Dt-zt,An=wt+Qt,Jt=wt-Qt,Ut=rt+An,gn=rt-An,Xt=He+Vt,oe=He-Vt;Xe[Se]=Ut+Xt,Xe[Se+4]=Ut-Xt;var xt=.707106781*(oe+gn);Xe[Se+2]=gn+xt,Xe[Se+6]=gn-xt;var pa=.382683433*((Ut=Jt+vt)-(oe=ct+ht)),ln=.5411961*Ut+pa,jr=1.306562965*oe+pa,nn=.707106781*(Xt=vt+ct),St=ht+nn,rn=ht-nn;Xe[Se+5]=rn+ln,Xe[Se+3]=rn-ln,Xe[Se+1]=St+jr,Xe[Se+7]=St-jr,Se+=8}for(Se=0,qe=0;qe<8;++qe){mt=Xe[Se],Pt=Xe[Se+8],Dt=Xe[Se+16],wt=Xe[Se+24],Qt=Xe[Se+32],zt=Xe[Se+40],$t=Xe[Se+48];var ir=mt+(Ae=Xe[Se+56]),ta=mt-Ae,Ka=Pt+$t,zn=Pt-$t,hr=Dt+zt,$n=Dt-zt,vs=wt+Qt,Rs=wt-Qt,Qa=ir+vs,Lt=ir-vs,Dn=Ka+hr,Ra=Ka-hr;Xe[Se]=Qa+Dn,Xe[Se+32]=Qa-Dn;var Oa=.707106781*(Ra+Lt);Xe[Se+16]=Lt+Oa,Xe[Se+48]=Lt-Oa;var Wn=.382683433*((Qa=Rs+$n)-(Ra=zn+ta)),Kn=.5411961*Qa+Wn,Qn=1.306562965*Ra+Wn,Or=.707106781*(Dn=$n+zn),Os=ta+Or,Fi=ta-Or;Xe[Se+40]=Fi+Kn,Xe[Se+24]=Fi-Kn,Xe[Se+8]=Os+Qn,Xe[Se+56]=Os-Qn,Se++}for(qe=0;qe<64;++qe)se=Xe[qe]*bt[qe],b[qe]=se>0?se+.5|0:se-.5|0;return b})(C,J),De=0;De<64;++De)U[Ee[De]]=We[De];var it=U[0]-Z;Z=U[0],it==0?Ie(de[0]):(Ie(de[M[be=32767+it]]),Ie(A[be]));for(var ot=63;ot>0&&U[ot]==0;)ot--;if(ot==0)return Ie(Me),Z;for(var pt,V=1;V<=ot;){for(var et=V;U[V]==0&&V<=ot;)++V;var Et=V-et;if(Et>=16){pt=Et>>4;for(var Ct=1;Ct<=pt;++Ct)Ie(Fe);Et&=15}be=32767+U[V],Ie(ce[(Et<<4)+M[be]]),Ie(A[be]),V++}return ot!=63&&Ie(Me),Z}function te(C){C=Math.min(Math.max(C,1),100),l!=C&&((function(J){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],de=0;de<64;de++){var ce=m((Z[de]*J+50)/100);ce=Math.min(Math.max(ce,1),255),p[Ee[de]]=ce}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Me=0;Me<64;Me++){var Fe=m((be[Me]*J+50)/100);Fe=Math.min(Math.max(Fe,1),255),g[Ee[Me]]=Fe}for(var We=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,it=0;it<8;it++)for(var ot=0;ot<8;ot++)v[De]=1/(p[Ee[De]]*We[it]*We[ot]*8),j[De]=1/(g[Ee[De]]*We[it]*We[ot]*8),De++})(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),l=C)}this.encode=function(C,J){J&&te(J),E=new Array,I=0,P=7,Pe(65496),Pe(65504),Pe(16),pe(74),pe(70),pe(73),pe(70),pe(0),pe(1),pe(1),pe(0),Pe(1),Pe(1),pe(0),pe(0),(function(){Pe(65499),Pe(132),pe(0);for(var Pt=0;Pt<64;Pt++)pe(p[Pt]);pe(1);for(var Dt=0;Dt<64;Dt++)pe(g[Dt])})(),(function(Pt,Dt){Pe(65472),Pe(17),pe(8),Pe(Dt),Pe(Pt),pe(3),pe(1),pe(17),pe(0),pe(2),pe(17),pe(1),pe(3),pe(17),pe(1)})(C.width,C.height),(function(){Pe(65476),Pe(418),pe(0);for(var Pt=0;Pt<16;Pt++)pe(ge[Pt+1]);for(var Dt=0;Dt<=11;Dt++)pe(ee[Dt]);pe(16);for(var wt=0;wt<16;wt++)pe(xe[wt+1]);for(var Qt=0;Qt<=161;Qt++)pe(z[Qt]);pe(1);for(var zt=0;zt<16;zt++)pe($[zt+1]);for(var $t=0;$t<=11;$t++)pe(le[$t]);pe(17);for(var Ae=0;Ae<16;Ae++)pe(ie[Ae+1]);for(var qe=0;qe<=161;qe++)pe(we[qe])})(),Pe(65498),Pe(12),pe(3),pe(1),pe(0),pe(2),pe(17),pe(3),pe(17),pe(0),pe(63),pe(0);var Z=0,de=0,ce=0;I=0,P=7,this.encode.displayName="_encode_";for(var be,Me,Fe,We,De,it,ot,pt,V,et=C.data,Et=C.width,Ct=C.height,Xe=4*Et,bt=0;bt<Ct;){for(be=0;be<Xe;){for(De=Xe*bt+be,ot=-1,pt=0,V=0;V<64;V++)it=De+(pt=V>>3)*Xe+(ot=4*(7&V)),bt+pt>=Ct&&(it-=Xe*(bt+1+pt-Ct)),be+ot>=Xe&&(it-=be+ot-Xe+4),Me=et[it++],Fe=et[it++],We=et[it++],W[V]=(he[Me]+he[Fe+256|0]+he[We+512|0]>>16)-128,X[V]=(he[Me+768|0]+he[Fe+1024|0]+he[We+1280|0]>>16)-128,H[V]=(he[Me+1280|0]+he[Fe+1536|0]+he[We+1792|0]>>16)-128;Z=ze(W,v,Z,a,o),de=ze(X,j,de,r,c),ce=ze(H,j,ce,r,c),be+=32}bt+=8}if(P>=0){var mt=[];mt[1]=P+1,mt[0]=(1<<P+1)-1,Ie(mt)}return Pe(65497),new Uint8Array(E)},i=i||50,(function(){for(var C=String.fromCharCode,J=0;J<256;J++)fe[J]=C(J)})(),a=_e(ge,ee),r=_e($,le),o=_e(xe,z),c=_e(ie,we),(function(){for(var C=1,J=2,Z=1;Z<=15;Z++){for(var de=C;de<J;de++)M[32767+de]=Z,A[32767+de]=[],A[32767+de][1]=Z,A[32767+de][0]=de;for(var ce=-(J-1);ce<=-C;ce++)M[32767+ce]=Z,A[32767+ce]=[],A[32767+ce][1]=Z,A[32767+ce][0]=J-1+ce;C<<=1,J<<=1}})(),(function(){for(var C=0;C<256;C++)he[C]=19595*C,he[C+256|0]=38470*C,he[C+512|0]=7471*C+32768,he[C+768|0]=-11059*C,he[C+1024|0]=-21709*C,he[C+1280|0]=32768*C+8421375,he[C+1536|0]=-27439*C,he[C+1792|0]=-5329*C})(),te(i)}function co(i,a){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!a,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Sm(i){function a(ee){if(!ee)throw Error("assert :P")}function r(ee,xe,z){for(var $=0;4>$;$++)if(ee[xe+$]!=z.charCodeAt($))return!0;return!1}function o(ee,xe,z,$,le){for(var ie=0;ie<le;ie++)ee[xe+ie]=z[$+ie]}function c(ee,xe,z,$){for(var le=0;le<$;le++)ee[xe+le]=z}function l(ee){return new Int32Array(ee)}function m(ee,xe){for(var z=[],$=0;$<ee;$++)z.push(new xe);return z}function p(ee,xe){var z=[];return(function $(le,ie,we){for(var _e=we[ie],Ie=0;Ie<_e&&(le.push(we.length>ie+1?[]:new xe),!(we.length<ie+1));Ie++)$(le[Ie],ie+1,we)})(z,0,ee),z}var g=function(){var ee=this;function xe(d,h){for(var w=1<<h-1>>>0;d&w;)w>>>=1;return w?(d&w-1)+w:d}function z(d,h,w,N,_){a(!(N%w));do d[h+(N-=w)]=_;while(0<N)}function $(d,h,w,N,_){if(a(2328>=_),512>=_)var R=l(512);else if((R=l(_))==null)return 0;return(function(O,q,G,ne,ye,Re){var re,je,Te=q,Je=1<<G,Be=l(16),Ye=l(16);for(a(ye!=0),a(ne!=null),a(O!=null),a(0<G),je=0;je<ye;++je){if(15<ne[je])return 0;++Be[ne[je]]}if(Be[0]==ye)return 0;for(Ye[1]=0,re=1;15>re;++re){if(Be[re]>1<<re)return 0;Ye[re+1]=Ye[re]+Be[re]}for(je=0;je<ye;++je)re=ne[je],0<ne[je]&&(Re[Ye[re]++]=je);if(Ye[15]==1)return(ne=new le).g=0,ne.value=Re[0],z(O,Te,1,Je,ne),Je;var Ge,Ze=-1,tt=Je-1,qt=0,_t=1,hn=1,Ft=1<<G;for(je=0,re=1,ye=2;re<=G;++re,ye<<=1){if(_t+=hn<<=1,0>(hn-=Be[re]))return 0;for(;0<Be[re];--Be[re])(ne=new le).g=re,ne.value=Re[je++],z(O,Te+qt,ye,Ft,ne),qt=xe(qt,re)}for(re=G+1,ye=2;15>=re;++re,ye<<=1){if(_t+=hn<<=1,0>(hn-=Be[re]))return 0;for(;0<Be[re];--Be[re]){if(ne=new le,(qt&tt)!=Ze){for(Te+=Ft,Ge=1<<(Ze=re)-G;15>Ze&&!(0>=(Ge-=Be[Ze]));)++Ze,Ge<<=1;Je+=Ft=1<<(Ge=Ze-G),O[q+(Ze=qt&tt)].g=Ge+G,O[q+Ze].value=Te-q-Ze}ne.g=re-G,ne.value=Re[je++],z(O,Te+(qt>>G),ye,Ft,ne),qt=xe(qt,re)}}return _t!=2*Ye[15]-1?0:Je})(d,h,w,N,_,R)}function le(){this.value=this.g=0}function ie(){this.value=this.g=0}function we(){this.G=m(5,le),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=m(ia,ie)}function _e(d,h,w,N){a(d!=null),a(h!=null),a(2147483648>N),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=h,d.pa=w,d.Jd=h,d.Yc=w+N,d.Zc=4<=N?w+N-4+1:w,Me(d)}function Ie(d,h){for(var w=0;0<h--;)w|=We(d,128)<<h;return w}function pe(d,h){var w=Ie(d,h);return Fe(d)?-w:w}function Pe(d,h,w,N){var _,R=0;for(a(d!=null),a(h!=null),a(4294967288>N),d.Sb=N,d.Ra=0,d.u=0,d.h=0,4<N&&(N=4),_=0;_<N;++_)R+=h[w+_]<<8*_;d.Ra=R,d.bb=N,d.oa=h,d.pa=w}function ze(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<Si-8>>>0,++d.bb,d.u-=8;de(d)&&(d.h=1,d.u=0)}function te(d,h){if(a(0<=h),!d.h&&h<=va){var w=Z(d)&li[h];return d.u+=h,ze(d),w}return d.h=1,d.u=0}function C(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Z(d){return d.Ra>>>(d.u&Si-1)>>>0}function de(d){return a(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>Si}function ce(d,h){d.u=h,d.h=de(d)}function be(d){d.u>=Br&&(a(d.u>=Br),ze(d))}function Me(d){a(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(a(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function Fe(d){return Ie(d,1)}function We(d,h){var w=d.Ca;0>d.b&&Me(d);var N=d.b,_=w*h>>>8,R=(d.I>>>N>_)+0;for(R?(w-=_,d.I-=_+1<<N>>>0):w=_+1,N=w,_=0;256<=N;)_+=8,N>>=8;return N=7^_+Zi[N],d.b-=N,d.Ca=(w<<N)-1,R}function De(d,h,w){d[h+0]=w>>24&255,d[h+1]=w>>16&255,d[h+2]=w>>8&255,d[h+3]=255&w}function it(d,h){return d[h+0]|d[h+1]<<8}function ot(d,h){return it(d,h)|d[h+2]<<16}function pt(d,h){return it(d,h)|it(d,h+2)<<16}function V(d,h){var w=1<<h;return a(d!=null),a(0<h),d.X=l(w),d.X==null?0:(d.Mb=32-h,d.Xa=h,1)}function et(d,h){a(d!=null),a(h!=null),a(d.Xa==h.Xa),o(h.X,0,d.X,0,1<<h.Xa)}function Et(){this.X=[],this.Xa=this.Mb=0}function Ct(d,h,w,N){a(w!=null),a(N!=null);var _=w[0],R=N[0];return _==0&&(_=(d*R+h/2)/h),R==0&&(R=(h*_+d/2)/d),0>=_||0>=R?0:(w[0]=_,N[0]=R,1)}function Xe(d,h){return d+(1<<h)-1>>>h}function bt(d,h){return((4278255360&d)+(4278255360&h)>>>0&4278255360)+((16711935&d)+(16711935&h)>>>0&16711935)>>>0}function mt(d,h){ee[h]=function(w,N,_,R,O,q,G){var ne;for(ne=0;ne<O;++ne){var ye=ee[d](q[G+ne-1],_,R+ne);q[G+ne]=bt(w[N+ne],ye)}}}function Pt(){this.ud=this.hd=this.jd=0}function Dt(d,h){return((4278124286&(d^h))>>>1)+(d&h)>>>0}function wt(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Qt(d,h){return wt(d+(d-h+.5>>1))}function zt(d,h,w){return Math.abs(h-w)-Math.abs(d-w)}function $t(d,h,w,N,_,R,O){for(N=R[O-1],w=0;w<_;++w)R[O+w]=N=bt(d[h+w],N)}function Ae(d,h,w,N,_){var R;for(R=0;R<w;++R){var O=d[h+R],q=O>>8&255,G=16711935&(G=(G=16711935&O)+((q<<16)+q));N[_+R]=(4278255360&O)+G>>>0}}function qe(d,h){h.jd=255&d,h.hd=d>>8&255,h.ud=d>>16&255}function se(d,h,w,N,_,R){var O;for(O=0;O<N;++O){var q=h[w+O],G=q>>>8,ne=q,ye=255&(ye=(ye=q>>>16)+((d.jd<<24>>24)*(G<<24>>24)>>>5));ne=255&(ne=(ne+=(d.hd<<24>>24)*(G<<24>>24)>>>5)+((d.ud<<24>>24)*(ye<<24>>24)>>>5)),_[R+O]=(4278255360&q)+(ye<<16)+ne}}function Se(d,h,w,N,_){ee[h]=function(R,O,q,G,ne,ye,Re,re,je){for(G=Re;G<re;++G)for(Re=0;Re<je;++Re)ne[ye++]=_(q[N(R[O++])])},ee[d]=function(R,O,q,G,ne,ye,Re){var re=8>>R.b,je=R.Ea,Te=R.K[0],Je=R.w;if(8>re)for(R=(1<<R.b)-1,Je=(1<<re)-1;O<q;++O){var Be,Ye=0;for(Be=0;Be<je;++Be)Be&R||(Ye=N(G[ne++])),ye[Re++]=_(Te[Ye&Je]),Ye>>=re}else ee["VP8LMapColor"+w](G,ne,Te,Je,ye,Re,O,q,je)}}function rt(d,h,w,N,_){for(w=h+w;h<w;){var R=d[h++];N[_++]=R>>16&255,N[_++]=R>>8&255,N[_++]=255&R}}function ht(d,h,w,N,_){for(w=h+w;h<w;){var R=d[h++];N[_++]=R>>16&255,N[_++]=R>>8&255,N[_++]=255&R,N[_++]=R>>24&255}}function He(d,h,w,N,_){for(w=h+w;h<w;){var R=(O=d[h++])>>16&240|O>>12&15,O=240&O|O>>28&15;N[_++]=R,N[_++]=O}}function ct(d,h,w,N,_){for(w=h+w;h<w;){var R=(O=d[h++])>>16&248|O>>13&7,O=O>>5&224|O>>3&31;N[_++]=R,N[_++]=O}}function Vt(d,h,w,N,_){for(w=h+w;h<w;){var R=d[h++];N[_++]=255&R,N[_++]=R>>8&255,N[_++]=R>>16&255}}function vt(d,h,w,N,_,R){if(R==0)for(w=h+w;h<w;)De(N,((R=d[h++])[0]>>24|R[1]>>8&65280|R[2]<<8&16711680|R[3]<<24)>>>0),_+=32;else o(N,_,d,h,w)}function An(d,h){ee[h][0]=ee[d+"0"],ee[h][1]=ee[d+"1"],ee[h][2]=ee[d+"2"],ee[h][3]=ee[d+"3"],ee[h][4]=ee[d+"4"],ee[h][5]=ee[d+"5"],ee[h][6]=ee[d+"6"],ee[h][7]=ee[d+"7"],ee[h][8]=ee[d+"8"],ee[h][9]=ee[d+"9"],ee[h][10]=ee[d+"10"],ee[h][11]=ee[d+"11"],ee[h][12]=ee[d+"12"],ee[h][13]=ee[d+"13"],ee[h][14]=ee[d+"0"],ee[h][15]=ee[d+"0"]}function Jt(d){return d==No||d==Mr||d==Ma||d==qo}function Ut(){this.eb=[],this.size=this.A=this.fb=0}function gn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Xt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ut,this.f.kb=new gn,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function xt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function pa(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function ln(d,h){var w=d.T,N=h.ba.f.RGBA,_=N.eb,R=N.fb+d.ka*N.A,O=K[h.ba.S],q=d.y,G=d.O,ne=d.f,ye=d.N,Re=d.ea,re=d.W,je=h.cc,Te=h.dc,Je=h.Mc,Be=h.Nc,Ye=d.ka,Ge=d.ka+d.T,Ze=d.U,tt=Ze+1>>1;for(Ye==0?O(q,G,null,null,ne,ye,Re,re,ne,ye,Re,re,_,R,null,null,Ze):(O(h.ec,h.fc,q,G,je,Te,Je,Be,ne,ye,Re,re,_,R-N.A,_,R,Ze),++w);Ye+2<Ge;Ye+=2)je=ne,Te=ye,Je=Re,Be=re,ye+=d.Rc,re+=d.Rc,R+=2*N.A,O(q,(G+=2*d.fa)-d.fa,q,G,je,Te,Je,Be,ne,ye,Re,re,_,R-N.A,_,R,Ze);return G+=d.fa,d.j+Ge<d.o?(o(h.ec,h.fc,q,G,Ze),o(h.cc,h.dc,ne,ye,tt),o(h.Mc,h.Nc,Re,re,tt),w--):1&Ge||O(q,G,null,null,ne,ye,Re,re,ne,ye,Re,re,_,R+N.A,null,null,Ze),w}function jr(d,h,w){var N=d.F,_=[d.J];if(N!=null){var R=d.U,O=h.ba.S,q=O==So||O==Ma;h=h.ba.f.RGBA;var G=[0],ne=d.ka;G[0]=d.T,d.Kb&&(ne==0?--G[0]:(--ne,_[0]-=d.width),d.j+d.ka+d.T==d.o&&(G[0]=d.o-d.j-ne));var ye=h.eb;ne=h.fb+ne*h.A,d=bo(N,_[0],d.width,R,G,ye,ne+(q?0:3),h.A),a(w==G),d&&Jt(O)&&Qs(ye,ne,q,R,G,h.A)}return 0}function nn(d){var h=d.ma,w=h.ba.S,N=11>w,_=w==us||w==jo||w==So||w==Un||w==12||Jt(w);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!_n(h.Oa,d,_?11:12))return 0;if(_&&Jt(w)&&Ar(),d.da)alert("todo:use_scaling");else{if(N){if(h.Ib=pa,d.Kb){if(w=d.U+1>>1,h.memory=l(d.U+2*w),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+d.U,h.Mc=h.cc,h.Nc=h.dc+w,h.Ib=ln,Ar()}}else alert("todo:EmitYUV");_&&(h.Jb=jr,N&&Zn())}if(N&&!sa){for(d=0;256>d;++d)$a[d]=89858*(d-128)+sn>>vn,er[d]=-22014*(d-128)+sn,qn[d]=-45773*(d-128),kt[d]=113618*(d-128)+sn>>vn;for(d=cn;d<yn;++d)h=76283*(d-16)+sn>>vn,_s[d-cn]=Xn(h,255),Jl[d-cn]=Xn(h+8>>4,15);sa=1}return 1}function St(d){var h=d.ma,w=d.U,N=d.T;return a(!(1&d.ka)),0>=w||0>=N?0:(w=h.Ib(d,h),h.Jb!=null&&h.Jb(d,h,w),h.Dc+=w,1)}function rn(d){d.ma.memory=null}function ir(d,h,w,N){return te(d,8)!=47?0:(h[0]=te(d,14)+1,w[0]=te(d,14)+1,N[0]=te(d,1),te(d,3)!=0?0:!d.h)}function ta(d,h){if(4>d)return d+1;var w=d-2>>1;return(2+(1&d)<<w)+te(h,w)+1}function Ka(d,h){return 120<h?h-120:1<=(w=((w=Ac[h-1])>>4)*d+(8-(15&w)))?w:1;var w}function zn(d,h,w){var N=Z(w),_=d[h+=255&N].g-8;return 0<_&&(ce(w,w.u+8),N=Z(w),h+=d[h].value,h+=N&(1<<_)-1),ce(w,w.u+d[h].g),d[h].value}function hr(d,h,w){return w.g+=d.g,w.value+=d.value<<h>>>0,a(8>=w.g),d.g}function $n(d,h,w){var N=d.xc;return a((h=N==0?0:d.vc[d.md*(w>>N)+(h>>N)])<d.Wb),d.Ya[h]}function vs(d,h,w,N){var _=d.ab,R=d.c*h,O=d.C;h=O+h;var q=w,G=N;for(N=d.Ta,w=d.Ua;0<_--;){var ne=d.gc[_],ye=O,Re=h,re=q,je=G,Te=(G=N,q=w,ne.Ea);switch(a(ye<Re),a(Re<=ne.nc),ne.hc){case 2:Gn(re,je,(Re-ye)*Te,G,q);break;case 0:var Je=ye,Be=Re,Ye=G,Ge=q,Ze=(Ft=ne).Ea;Je==0&&(Bi(re,je,null,null,1,Ye,Ge),$t(re,je+1,0,0,Ze-1,Ye,Ge+1),je+=Ze,Ge+=Ze,++Je);for(var tt=1<<Ft.b,qt=tt-1,_t=Xe(Ze,Ft.b),hn=Ft.K,Ft=Ft.w+(Je>>Ft.b)*_t;Je<Be;){var Nn=hn,Dr=Ft,pn=1;for(Ni(re,je,Ye,Ge-Ze,1,Ye,Ge);pn<Ze;){var It=(pn&~qt)+tt;It>Ze&&(It=Ze),(0,mo[Nn[Dr++]>>8&15])(re,je+ +pn,Ye,Ge+pn-Ze,It-pn,Ye,Ge+pn),pn=It}je+=Ze,Ge+=Ze,++Je&qt||(Ft+=_t)}Re!=ne.nc&&o(G,q-Te,G,q+(Re-ye-1)*Te,Te);break;case 1:for(Te=re,Be=je,Ze=(re=ne.Ea)-(Ge=re&~(Ye=(je=1<<ne.b)-1)),Je=Xe(re,ne.b),tt=ne.K,ne=ne.w+(ye>>ne.b)*Je;ye<Re;){for(qt=tt,_t=ne,hn=new Pt,Ft=Be+Ge,Nn=Be+re;Be<Ft;)qe(qt[_t++],hn),Ys(hn,Te,Be,je,G,q),Be+=je,q+=je;Be<Nn&&(qe(qt[_t++],hn),Ys(hn,Te,Be,Ze,G,q),Be+=Ze,q+=Ze),++ye&Ye||(ne+=Je)}break;case 3:if(re==G&&je==q&&0<ne.b){for(Be=G,re=Te=q+(Re-ye)*Te-(Ge=(Re-ye)*Xe(ne.Ea,ne.b)),je=G,Ye=q,Je=[],Ge=(Ze=Ge)-1;0<=Ge;--Ge)Je[Ge]=je[Ye+Ge];for(Ge=Ze-1;0<=Ge;--Ge)Be[re+Ge]=Je[Ge];Hs(ne,ye,Re,G,Te,G,q)}else Hs(ne,ye,Re,re,je,G,q)}q=N,G=w}G!=w&&o(N,w,q,G,R)}function Rs(d,h){var w=d.V,N=d.Ba+d.c*d.C,_=h-d.C;if(a(h<=d.l.o),a(16>=_),0<_){var R=d.l,O=d.Ta,q=d.Ua,G=R.width;if(vs(d,_,w,N),_=q=[q],a((w=d.C)<(N=h)),a(R.v<R.va),N>R.o&&(N=R.o),w<R.j){var ne=R.j-w;w=R.j,_[0]+=ne*G}if(w>=N?w=0:(_[0]+=4*R.v,R.ka=w-R.j,R.U=R.va-R.v,R.T=N-w,w=1),w){if(q=q[0],11>(w=d.ca).S){var ye=w.f.RGBA,Re=(N=w.S,_=R.U,R=R.T,ne=ye.eb,ye.A),re=R;for(ye=ye.fb+d.Ma*ye.A;0<re--;){var je=O,Te=q,Je=_,Be=ne,Ye=ye;switch(N){case Qo:go(je,Te,Je,Be,Ye);break;case us:ki(je,Te,Je,Be,Ye);break;case No:ki(je,Te,Je,Be,Ye),Qs(Be,Ye,0,Je,1,0);break;case Cl:Gs(je,Te,Je,Be,Ye);break;case jo:vt(je,Te,Je,Be,Ye,1);break;case Mr:vt(je,Te,Je,Be,Ye,1),Qs(Be,Ye,0,Je,1,0);break;case So:vt(je,Te,Je,Be,Ye,0);break;case Ma:vt(je,Te,Je,Be,Ye,0),Qs(Be,Ye,1,Je,1,0);break;case Un:Cs(je,Te,Je,Be,Ye);break;case qo:Cs(je,Te,Je,Be,Ye),vo(Be,Ye,Je,1,0);break;case Xo:Gr(je,Te,Je,Be,Ye);break;default:a(0)}q+=G,ye+=Re}d.Ma+=R}else alert("todo:EmitRescaledRowsYUVA");a(d.Ma<=w.height)}}d.C=h,a(d.C<=d.i)}function Qa(d){var h;if(0<d.ua)return 0;for(h=0;h<d.Wb;++h){var w=d.Ya[h].G,N=d.Ya[h].H;if(0<w[1][N[1]+0].g||0<w[2][N[2]+0].g||0<w[3][N[3]+0].g)return 0}return 1}function Lt(d,h,w,N,_,R){if(d.Z!=0){var O=d.qd,q=d.rd;for(a(T[d.Z]!=null);h<w;++h)T[d.Z](O,q,N,_,N,_,R),O=N,q=_,_+=R;d.qd=O,d.rd=q}}function Dn(d,h){var w=d.l.ma,N=w.Z==0||w.Z==1?d.l.j:d.C;if(N=d.C<N?N:d.C,a(h<=d.l.o),h>N){var _=d.l.width,R=w.ca,O=w.tb+_*N,q=d.V,G=d.Ba+d.c*N,ne=d.gc;a(d.ab==1),a(ne[0].hc==3),Ua(ne[0],N,h,q,G,R,O),Lt(w,N,h,R,O,_)}d.C=d.Ma=h}function Ra(d,h,w,N,_,R,O){var q=d.$/N,G=d.$%N,ne=d.m,ye=d.s,Re=w+d.$,re=Re;_=w+N*_;var je=w+N*R,Te=280+ye.ua,Je=d.Pb?q:16777216,Be=0<ye.ua?ye.Wa:null,Ye=ye.wc,Ge=Re<je?$n(ye,G,q):null;a(d.C<R),a(je<=_);var Ze=!1;e:for(;;){for(;Ze||Re<je;){var tt=0;if(q>=Je){var qt=Re-w;a((Je=d).Pb),Je.wd=Je.m,Je.xd=qt,0<Je.s.ua&&et(Je.s.Wa,Je.s.vb),Je=q+Zo}if(G&Ye||(Ge=$n(ye,G,q)),a(Ge!=null),Ge.Qb&&(h[Re]=Ge.qb,Ze=!0),!Ze)if(be(ne),Ge.jc){tt=ne,qt=h;var _t=Re,hn=Ge.pd[Z(tt)&ia-1];a(Ge.jc),256>hn.g?(ce(tt,tt.u+hn.g),qt[_t]=hn.value,tt=0):(ce(tt,tt.u+hn.g-256),a(256<=hn.value),tt=hn.value),tt==0&&(Ze=!0)}else tt=zn(Ge.G[0],Ge.H[0],ne);if(ne.h)break;if(Ze||256>tt){if(!Ze)if(Ge.nd)h[Re]=(Ge.qb|tt<<8)>>>0;else{if(be(ne),Ze=zn(Ge.G[1],Ge.H[1],ne),be(ne),qt=zn(Ge.G[2],Ge.H[2],ne),_t=zn(Ge.G[3],Ge.H[3],ne),ne.h)break;h[Re]=(_t<<24|Ze<<16|tt<<8|qt)>>>0}if(Ze=!1,++Re,++G>=N&&(G=0,++q,O!=null&&q<=R&&!(q%16)&&O(d,q),Be!=null))for(;re<Re;)tt=h[re++],Be.X[(506832829*tt&4294967295)>>>Be.Mb]=tt}else if(280>tt){if(tt=ta(tt-256,ne),qt=zn(Ge.G[4],Ge.H[4],ne),be(ne),qt=Ka(N,qt=ta(qt,ne)),ne.h)break;if(Re-w<qt||_-Re<tt)break e;for(_t=0;_t<tt;++_t)h[Re+_t]=h[Re+_t-qt];for(Re+=tt,G+=tt;G>=N;)G-=N,++q,O!=null&&q<=R&&!(q%16)&&O(d,q);if(a(Re<=_),G&Ye&&(Ge=$n(ye,G,q)),Be!=null)for(;re<Re;)tt=h[re++],Be.X[(506832829*tt&4294967295)>>>Be.Mb]=tt}else{if(!(tt<Te))break e;for(Ze=tt-280,a(Be!=null);re<Re;)tt=h[re++],Be.X[(506832829*tt&4294967295)>>>Be.Mb]=tt;tt=Re,a(!(Ze>>>(qt=Be).Xa)),h[tt]=qt.X[Ze],Ze=!0}Ze||a(ne.h==de(ne))}if(d.Pb&&ne.h&&Re<_)a(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&et(d.s.vb,d.s.Wa);else{if(ne.h)break e;O?.(d,q>R?R:q),d.a=0,d.$=Re-w}return 1}return d.a=3,0}function Oa(d){a(d!=null),d.vc=null,d.yc=null,d.Ya=null;var h=d.Wa;h!=null&&(h.X=null),d.vb=null,a(d!=null)}function Wn(){var d=new Ht;return d==null?null:(d.a=0,d.xb=F,An("Predictor","VP8LPredictors"),An("Predictor","VP8LPredictors_C"),An("PredictorAdd","VP8LPredictorsAdd"),An("PredictorAdd","VP8LPredictorsAdd_C"),Gn=Ae,Ys=se,go=rt,ki=ht,Cs=He,Gr=ct,Gs=Vt,ee.VP8LMapColor32b=es,ee.VP8LMapColor8b=Vs,d)}function Kn(d,h,w,N,_){var R=1,O=[d],q=[h],G=N.m,ne=N.s,ye=null,Re=0;e:for(;;){if(w)for(;R&&te(G,1);){var re=O,je=q,Te=N,Je=1,Be=Te.m,Ye=Te.gc[Te.ab],Ge=te(Be,2);if(Te.Oc&1<<Ge)R=0;else{switch(Te.Oc|=1<<Ge,Ye.hc=Ge,Ye.Ea=re[0],Ye.nc=je[0],Ye.K=[null],++Te.ab,a(4>=Te.ab),Ge){case 0:case 1:Ye.b=te(Be,3)+2,Je=Kn(Xe(Ye.Ea,Ye.b),Xe(Ye.nc,Ye.b),0,Te,Ye.K),Ye.K=Ye.K[0];break;case 3:var Ze,tt=te(Be,8)+1,qt=16<tt?0:4<tt?1:2<tt?2:3;if(re[0]=Xe(Ye.Ea,qt),Ye.b=qt,Ze=Je=Kn(tt,1,0,Te,Ye.K)){var _t,hn=tt,Ft=Ye,Nn=1<<(8>>Ft.b),Dr=l(Nn);if(Dr==null)Ze=0;else{var pn=Ft.K[0],It=Ft.w;for(Dr[0]=Ft.K[0][0],_t=1;_t<1*hn;++_t)Dr[_t]=bt(pn[It+_t],Dr[_t-1]);for(;_t<4*Nn;++_t)Dr[_t]=0;Ft.K[0]=null,Ft.K[0]=Dr,Ze=1}}Je=Ze;break;case 2:break;default:a(0)}R=Je}}if(O=O[0],q=q[0],R&&te(G,1)&&!(R=1<=(Re=te(G,4))&&11>=Re)){N.a=3;break e}var gt;if(gt=R)t:{var zr,on,jn,sr=N,wa=O,Kr=q,Cr=Re,oa=w,ja=sr.m,vr=sr.s,Pn=[null],Fn=1,br=0,Tn=Yl[Cr];n:for(;;){if(oa&&te(ja,1)){var Fr=te(ja,3)+2,Tr=Xe(wa,Fr),tr=Xe(Kr,Fr),Wa=Tr*tr;if(!Kn(Tr,tr,0,sr,Pn))break n;for(Pn=Pn[0],vr.xc=Fr,zr=0;zr<Wa;++zr){var Jn=Pn[zr]>>8&65535;Pn[zr]=Jn,Jn>=Fn&&(Fn=Jn+1)}}if(ja.h)break n;for(on=0;5>on;++on){var nr=Xs[on];!on&&0<Cr&&(nr+=1<<Cr),br<nr&&(br=nr)}var Qr=m(Fn*Tn,le),Fa=Fn,Pi=m(Fa,we);if(Pi==null)var Ur=null;else a(65536>=Fa),Ur=Pi;var qr=l(br);if(Ur==null||qr==null||Qr==null){sr.a=1;break n}var Ha=Qr;for(zr=jn=0;zr<Fn;++zr){var rr=Ur[zr],Va=rr.G,ns=rr.H,fs=0,Sa=1,$r=0;for(on=0;5>on;++on){nr=Xs[on],Va[on]=Ha,ns[on]=jn,!on&&0<Cr&&(nr+=1<<Cr);a:{var Po,no=nr,nl=sr,Is=qr,Zc=Ha,Pc=jn,ur=0,hs=nl.m,Lc=te(hs,1);if(c(Is,0,0,no),Lc){var _c=te(hs,1)+1,Kl=te(hs,1),Ql=te(hs,Kl==0?1:8);Is[Ql]=1,_c==2&&(Is[Ql=te(hs,8)]=1);var Es=1}else{var wr=l(19),Xr=te(hs,4)+4;if(19<Xr){nl.a=3;var Wr=0;break a}for(Po=0;Po<Xr;++Po)wr[kc[Po]]=te(hs,3);var rl=void 0,ro=void 0,al=nl,eu=wr,la=no,Xl=Is,_l=0,Ms=al.m,ps=8,zi=m(128,le);r:for(;$(zi,0,7,eu,19);){if(te(Ms,1)){var Il=2+2*te(Ms,3);if((rl=2+te(Ms,Il))>la)break r}else rl=la;for(ro=0;ro<la&&rl--;){be(Ms);var Zl=zi[0+(127&Z(Ms))];ce(Ms,Ms.u+Zl.g);var Lo=Zl.value;if(16>Lo)Xl[ro++]=Lo,Lo!=0&&(ps=Lo);else{var ed=Lo==16,Ic=Lo-16,td=ci[Ic],Ec=te(Ms,Ue[Ic])+td;if(ro+Ec>la)break r;for(var nd=ed?ps:0;0<Ec--;)Xl[ro++]=nd}}_l=1;break r}_l||(al.a=3),Es=_l}(Es=Es&&!hs.h)&&(ur=$(Zc,Pc,8,Is,no)),Es&&ur!=0?Wr=ur:(nl.a=3,Wr=0)}if(Wr==0)break n;if(Sa&&Vl[on]==1&&(Sa=Ha[jn].g==0),fs+=Ha[jn].g,jn+=Wr,3>=on){var il,ec=qr[0];for(il=1;il<nr;++il)qr[il]>ec&&(ec=qr[il]);$r+=ec}}if(rr.nd=Sa,rr.Qb=0,Sa&&(rr.qb=(Va[3][ns[3]+0].value<<24|Va[1][ns[1]+0].value<<16|Va[2][ns[2]+0].value)>>>0,fs==0&&256>Va[0][ns[0]+0].value&&(rr.Qb=1,rr.qb+=Va[0][ns[0]+0].value<<8)),rr.jc=!rr.Qb&&6>$r,rr.jc){var El,Ui=rr;for(El=0;El<ia;++El){var ao=El,ms=Ui.pd[ao],Wo=Ui.G[0][Ui.H[0]+ao];256<=Wo.value?(ms.g=Wo.g+256,ms.value=Wo.value):(ms.g=0,ms.value=0,ao>>=hr(Wo,8,ms),ao>>=hr(Ui.G[1][Ui.H[1]+ao],16,ms),ao>>=hr(Ui.G[2][Ui.H[2]+ao],0,ms),hr(Ui.G[3][Ui.H[3]+ao],24,ms))}}}vr.vc=Pn,vr.Wb=Fn,vr.Ya=Ur,vr.yc=Qr,gt=1;break t}gt=0}if(!(R=gt)){N.a=3;break e}if(0<Re){if(ne.ua=1<<Re,!V(ne.Wa,Re)){N.a=1,R=0;break e}}else ne.ua=0;var tc=N,nc=O,rd=q,rc=tc.s,ac=rc.xc;if(tc.c=nc,tc.i=rd,rc.md=Xe(nc,ac),rc.wc=ac==0?-1:(1<<ac)-1,w){N.xb=B;break e}if((ye=l(O*q))==null){N.a=1,R=0;break e}R=(R=Ra(N,ye,0,O,q,q,null))&&!G.h;break e}return R?(_!=null?_[0]=ye:(a(ye==null),a(w)),N.$=0,w||Oa(ne)):Oa(ne),R}function Qn(d,h){var w=d.c*d.i,N=w+h+16*h;return a(d.c<=h),d.V=l(N),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+w+h,1)}function Or(d,h){var w=d.C,N=h-w,_=d.V,R=d.Ba+d.c*w;for(a(h<=d.l.o);0<N;){var O=16<N?16:N,q=d.l.ma,G=d.l.width,ne=G*O,ye=q.ca,Re=q.tb+G*w,re=d.Ta,je=d.Ua;vs(d,O,_,R),wl(re,je,ye,Re,ne),Lt(q,w,w+O,ye,Re,G),N-=O,_+=O*d.c,w+=O}a(w==h),d.C=d.Ma=h}function Os(){this.ub=this.yd=this.td=this.Rb=0}function Fi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ut(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function xn(){this.Yb=(function(){var d=[];return(function h(w,N,_){for(var R=_[N],O=0;O<R&&(w.push(_.length>N+1?[]:0),!(_.length<N+1));O++)h(w[O],N+1,_)})(d,0,[3,11]),d})()}function ls(){this.jb=l(3),this.Wc=p([4,8],xn),this.Xc=p([4,17],xn)}function Xa(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function _r(){this.ld=this.La=this.dd=this.tc=0}function ka(){this.Na=this.la=0}function Za(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function cs(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Bs(){this.uc=this.M=this.Nb=0,this.wa=Array(new _r),this.Y=0,this.ya=Array(new cs),this.aa=0,this.l=new pi}function na(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Aa(){this.cb=this.a=0,this.sc="",this.m=new C,this.Od=new Os,this.Kc=new Fi,this.ed=new Xa,this.Qa=new ut,this.Ic=this.$c=this.Aa=0,this.D=new Bs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=m(8,C),this.ia=0,this.pb=m(4,Za),this.Pa=new ls,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new na),this.Hd=0,this.rb=Array(new ka),this.sb=0,this.wa=Array(new _r),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new cs),this.L=this.aa=0,this.gd=p([4,2],_r),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xn(d,h){return 0>d?0:d>h?h:d}function pi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function To(){var d=new Aa;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Ls||(Ls=mi)),d}function Kt(d,h,w){return d.a==0&&(d.a=h,d.sc=w,d.cb=0),0}function ei(d,h,w){return 3<=w&&d[h+0]==157&&d[h+1]==1&&d[h+2]==42}function ti(d,h){if(d==null)return 0;if(d.a=0,d.sc="OK",h==null)return Kt(d,2,"null VP8Io passed to VP8GetHeaders()");var w=h.data,N=h.w,_=h.ha;if(4>_)return Kt(d,7,"Truncated header.");var R=w[N+0]|w[N+1]<<8|w[N+2]<<16,O=d.Od;if(O.Rb=!(1&R),O.td=R>>1&7,O.yd=R>>4&1,O.ub=R>>5,3<O.td)return Kt(d,3,"Incorrect keyframe parameters.");if(!O.yd)return Kt(d,4,"Frame not displayable.");N+=3,_-=3;var q=d.Kc;if(O.Rb){if(7>_)return Kt(d,7,"cannot parse picture header");if(!ei(w,N,_))return Kt(d,3,"Bad code word");q.c=16383&(w[N+4]<<8|w[N+3]),q.Td=w[N+4]>>6,q.i=16383&(w[N+6]<<8|w[N+5]),q.Ud=w[N+6]>>6,N+=7,_-=7,d.za=q.c+15>>4,d.Ub=q.i+15>>4,h.width=q.c,h.height=q.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,c((R=d.Pa).jb,0,255,R.jb.length),a((R=d.Qa)!=null),R.Cb=0,R.Bb=0,R.Fb=1,c(R.Zb,0,0,R.Zb.length),c(R.Lb,0,0,R.Lb)}if(O.ub>_)return Kt(d,7,"bad partition length");_e(R=d.m,w,N,O.ub),N+=O.ub,_-=O.ub,O.Rb&&(q.Ld=Fe(R),q.Kd=Fe(R)),q=d.Qa;var G,ne=d.Pa;if(a(R!=null),a(q!=null),q.Cb=Fe(R),q.Cb){if(q.Bb=Fe(R),Fe(R)){for(q.Fb=Fe(R),G=0;4>G;++G)q.Zb[G]=Fe(R)?pe(R,7):0;for(G=0;4>G;++G)q.Lb[G]=Fe(R)?pe(R,6):0}if(q.Bb)for(G=0;3>G;++G)ne.jb[G]=Fe(R)?Ie(R,8):255}else q.Bb=0;if(R.Ka)return Kt(d,3,"cannot parse segment header");if((q=d.ed).zd=Fe(R),q.Tb=Ie(R,6),q.wb=Ie(R,3),q.Pc=Fe(R),q.Pc&&Fe(R)){for(ne=0;4>ne;++ne)Fe(R)&&(q.vd[ne]=pe(R,6));for(ne=0;4>ne;++ne)Fe(R)&&(q.od[ne]=pe(R,6))}if(d.L=q.Tb==0?0:q.zd?1:2,R.Ka)return Kt(d,3,"cannot parse filter header");var ye=_;if(_=G=N,N=G+ye,q=ye,d.Xb=(1<<Ie(d.m,2))-1,ye<3*(ne=d.Xb))w=7;else{for(G+=3*ne,q-=3*ne,ye=0;ye<ne;++ye){var Re=w[_+0]|w[_+1]<<8|w[_+2]<<16;Re>q&&(Re=q),_e(d.Jc[+ye],w,G,Re),G+=Re,q-=Re,_+=3}_e(d.Jc[+ne],w,G,q),w=G<N?0:5}if(w!=0)return Kt(d,w,"cannot parse partitions");for(w=Ie(G=d.m,7),_=Fe(G)?pe(G,4):0,N=Fe(G)?pe(G,4):0,q=Fe(G)?pe(G,4):0,ne=Fe(G)?pe(G,4):0,G=Fe(G)?pe(G,4):0,ye=d.Qa,Re=0;4>Re;++Re){if(ye.Cb){var re=ye.Zb[Re];ye.Fb||(re+=w)}else{if(0<Re){d.pb[Re]=d.pb[0];continue}re=w}var je=d.pb[Re];je.Sc[0]=Zs[Xn(re+_,127)],je.Sc[1]=ko[Xn(re+0,127)],je.Eb[0]=2*Zs[Xn(re+N,127)],je.Eb[1]=101581*ko[Xn(re+q,127)]>>16,8>je.Eb[1]&&(je.Eb[1]=8),je.Qc[0]=Zs[Xn(re+ne,117)],je.Qc[1]=ko[Xn(re+G,127)],je.lc=re+G}if(!O.Rb)return Kt(d,4,"Not a key frame.");for(Fe(R),O=d.Pa,w=0;4>w;++w){for(_=0;8>_;++_)for(N=0;3>N;++N)for(q=0;11>q;++q)ne=We(R,Co[w][_][N][q])?Ie(R,8):Pl[w][_][N][q],O.Wc[w][_].Yb[N][q]=ne;for(_=0;17>_;++_)O.Xc[w][_]=O.Wc[w][eo[_]]}return d.kc=Fe(R),d.kc&&(d.Bd=Ie(R,8)),d.cb=1}function mi(d,h,w,N,_,R,O){var q=h[_].Yb[w];for(w=0;16>_;++_){if(!We(d,q[w+0]))return _;for(;!We(d,q[w+1]);)if(q=h[++_].Yb[0],w=0,_==16)return 16;var G=h[_+1].Yb;if(We(d,q[w+2])){var ne=d,ye=0;if(We(ne,(re=q)[(Re=w)+3]))if(We(ne,re[Re+6])){for(q=0,Re=2*(ye=We(ne,re[Re+8]))+(re=We(ne,re[Re+9+ye])),ye=0,re=Ao[Re];re[q];++q)ye+=ye+We(ne,re[q]);ye+=3+(8<<Re)}else We(ne,re[Re+7])?(ye=7+2*We(ne,165),ye+=We(ne,145)):ye=5+We(ne,159);else ye=We(ne,re[Re+4])?3+We(ne,re[Re+5]):2;q=G[2]}else ye=1,q=G[1];G=O+el[_],0>(ne=d).b&&Me(ne);var Re,re=ne.b,je=(Re=ne.Ca>>1)-(ne.I>>re)>>31;--ne.b,ne.Ca+=je,ne.Ca|=1,ne.I-=(Re+1&je)<<re,R[G]=((ye^je)-je)*N[(0<_)+0]}return 16}function Wi(d){var h=d.rb[d.sb-1];h.la=0,h.Na=0,c(d.zc,0,0,d.zc.length),d.ja=0}function ni(d,h,w,N,_){_=d[h+w+32*N]+(_>>3),d[h+w+32*N]=-256&_?0>_?0:255:_}function Hr(d,h,w,N,_,R){ni(d,h,0,w,N+_),ni(d,h,1,w,N+R),ni(d,h,2,w,N-R),ni(d,h,3,w,N-_)}function ri(d){return(20091*d>>16)+d}function bs(d,h,w,N){var _,R=0,O=l(16);for(_=0;4>_;++_){var q=d[h+0]+d[h+8],G=d[h+0]-d[h+8],ne=(35468*d[h+4]>>16)-ri(d[h+12]),ye=ri(d[h+4])+(35468*d[h+12]>>16);O[R+0]=q+ye,O[R+1]=G+ne,O[R+2]=G-ne,O[R+3]=q-ye,R+=4,h++}for(_=R=0;4>_;++_)q=(d=O[R+0]+4)+O[R+8],G=d-O[R+8],ne=(35468*O[R+4]>>16)-ri(O[R+12]),ni(w,N,0,0,q+(ye=ri(O[R+4])+(35468*O[R+12]>>16))),ni(w,N,1,0,G+ne),ni(w,N,2,0,G-ne),ni(w,N,3,0,q-ye),R++,N+=32}function Ro(d,h,w,N){var _=d[h+0]+4,R=35468*d[h+4]>>16,O=ri(d[h+4]),q=35468*d[h+1]>>16;Hr(w,N,0,_+O,d=ri(d[h+1]),q),Hr(w,N,1,_+R,d,q),Hr(w,N,2,_-R,d,q),Hr(w,N,3,_-O,d,q)}function On(d,h,w,N,_){bs(d,h,w,N),_&&bs(d,h+16,w,N+4)}function Ba(d,h,w,N){Js(d,h+0,w,N,1),Js(d,h+32,w,N+128,1)}function ra(d,h,w,N){var _;for(d=d[h+0]+4,_=0;4>_;++_)for(h=0;4>h;++h)ni(w,N,h,_,d)}function Cn(d,h,w,N){d[h+0]&&Mn(d,h+0,w,N),d[h+16]&&Mn(d,h+16,w,N+4),d[h+32]&&Mn(d,h+32,w,N+128),d[h+48]&&Mn(d,h+48,w,N+128+4)}function gi(d,h,w,N){var _,R=l(16);for(_=0;4>_;++_){var O=d[h+0+_]+d[h+12+_],q=d[h+4+_]+d[h+8+_],G=d[h+4+_]-d[h+8+_],ne=d[h+0+_]-d[h+12+_];R[0+_]=O+q,R[8+_]=O-q,R[4+_]=ne+G,R[12+_]=ne-G}for(_=0;4>_;++_)O=(d=R[0+4*_]+3)+R[3+4*_],q=R[1+4*_]+R[2+4*_],G=R[1+4*_]-R[2+4*_],ne=d-R[3+4*_],w[N+0]=O+q>>3,w[N+16]=ne+G>>3,w[N+32]=O-q>>3,w[N+48]=ne-G>>3,N+=64}function ws(d,h,w){var N,_=h-32,R=Ea,O=255-d[_-1];for(N=0;N<w;++N){var q,G=R,ne=O+d[h-1];for(q=0;q<w;++q)d[h+q]=G[ne+d[_+q]];h+=32}}function Oo(d,h){ws(d,h,4)}function js(d,h){ws(d,h,8)}function aa(d,h){ws(d,h,16)}function Hi(d,h){var w;for(w=0;16>w;++w)o(d,h+32*w,d,h-32,16)}function bn(d,h){var w;for(w=16;0<w;--w)c(d,h,d[h-1],16),h+=32}function or(d,h,w){var N;for(N=0;16>N;++N)c(h,w+32*N,d,16)}function za(d,h){var w,N=16;for(w=0;16>w;++w)N+=d[h-1+32*w]+d[h+w-32];or(N>>5,d,h)}function Ca(d,h){var w,N=8;for(w=0;16>w;++w)N+=d[h-1+32*w];or(N>>4,d,h)}function Hn(d,h){var w,N=8;for(w=0;16>w;++w)N+=d[h+w-32];or(N>>4,d,h)}function ma(d,h){or(128,d,h)}function Zt(d,h,w){return d+2*h+w+2>>2}function ai(d,h){var w,N=h-32;for(N=new Uint8Array([Zt(d[N-1],d[N+0],d[N+1]),Zt(d[N+0],d[N+1],d[N+2]),Zt(d[N+1],d[N+2],d[N+3]),Zt(d[N+2],d[N+3],d[N+4])]),w=0;4>w;++w)o(d,h+32*w,N,0,N.length)}function Sn(d,h){var w=d[h-1],N=d[h-1+32],_=d[h-1+64],R=d[h-1+96];De(d,h+0,16843009*Zt(d[h-1-32],w,N)),De(d,h+32,16843009*Zt(w,N,_)),De(d,h+64,16843009*Zt(N,_,R)),De(d,h+96,16843009*Zt(_,R,R))}function zs(d,h){var w,N=4;for(w=0;4>w;++w)N+=d[h+w-32]+d[h-1+32*w];for(N>>=3,w=0;4>w;++w)c(d,h+32*w,N,4)}function Ir(d,h){var w=d[h-1+0],N=d[h-1+32],_=d[h-1+64],R=d[h-1-32],O=d[h+0-32],q=d[h+1-32],G=d[h+2-32],ne=d[h+3-32];d[h+0+96]=Zt(N,_,d[h-1+96]),d[h+1+96]=d[h+0+64]=Zt(w,N,_),d[h+2+96]=d[h+1+64]=d[h+0+32]=Zt(R,w,N),d[h+3+96]=d[h+2+64]=d[h+1+32]=d[h+0+0]=Zt(O,R,w),d[h+3+64]=d[h+2+32]=d[h+1+0]=Zt(q,O,R),d[h+3+32]=d[h+2+0]=Zt(G,q,O),d[h+3+0]=Zt(ne,G,q)}function Vi(d,h){var w=d[h+1-32],N=d[h+2-32],_=d[h+3-32],R=d[h+4-32],O=d[h+5-32],q=d[h+6-32],G=d[h+7-32];d[h+0+0]=Zt(d[h+0-32],w,N),d[h+1+0]=d[h+0+32]=Zt(w,N,_),d[h+2+0]=d[h+1+32]=d[h+0+64]=Zt(N,_,R),d[h+3+0]=d[h+2+32]=d[h+1+64]=d[h+0+96]=Zt(_,R,O),d[h+3+32]=d[h+2+64]=d[h+1+96]=Zt(R,O,q),d[h+3+64]=d[h+2+96]=Zt(O,q,G),d[h+3+96]=Zt(q,G,G)}function Us(d,h){var w=d[h-1+0],N=d[h-1+32],_=d[h-1+64],R=d[h-1-32],O=d[h+0-32],q=d[h+1-32],G=d[h+2-32],ne=d[h+3-32];d[h+0+0]=d[h+1+64]=R+O+1>>1,d[h+1+0]=d[h+2+64]=O+q+1>>1,d[h+2+0]=d[h+3+64]=q+G+1>>1,d[h+3+0]=G+ne+1>>1,d[h+0+96]=Zt(_,N,w),d[h+0+64]=Zt(N,w,R),d[h+0+32]=d[h+1+96]=Zt(w,R,O),d[h+1+32]=d[h+2+96]=Zt(R,O,q),d[h+2+32]=d[h+3+96]=Zt(O,q,G),d[h+3+32]=Zt(q,G,ne)}function Ss(d,h){var w=d[h+0-32],N=d[h+1-32],_=d[h+2-32],R=d[h+3-32],O=d[h+4-32],q=d[h+5-32],G=d[h+6-32],ne=d[h+7-32];d[h+0+0]=w+N+1>>1,d[h+1+0]=d[h+0+64]=N+_+1>>1,d[h+2+0]=d[h+1+64]=_+R+1>>1,d[h+3+0]=d[h+2+64]=R+O+1>>1,d[h+0+32]=Zt(w,N,_),d[h+1+32]=d[h+0+96]=Zt(N,_,R),d[h+2+32]=d[h+1+96]=Zt(_,R,O),d[h+3+32]=d[h+2+96]=Zt(R,O,q),d[h+3+64]=Zt(O,q,G),d[h+3+96]=Zt(q,G,ne)}function Pa(d,h){var w=d[h-1+0],N=d[h-1+32],_=d[h-1+64],R=d[h-1+96];d[h+0+0]=w+N+1>>1,d[h+2+0]=d[h+0+32]=N+_+1>>1,d[h+2+32]=d[h+0+64]=_+R+1>>1,d[h+1+0]=Zt(w,N,_),d[h+3+0]=d[h+1+32]=Zt(N,_,R),d[h+3+32]=d[h+1+64]=Zt(_,R,R),d[h+3+64]=d[h+2+64]=d[h+0+96]=d[h+1+96]=d[h+2+96]=d[h+3+96]=R}function Bo(d,h){var w=d[h-1+0],N=d[h-1+32],_=d[h-1+64],R=d[h-1+96],O=d[h-1-32],q=d[h+0-32],G=d[h+1-32],ne=d[h+2-32];d[h+0+0]=d[h+2+32]=w+O+1>>1,d[h+0+32]=d[h+2+64]=N+w+1>>1,d[h+0+64]=d[h+2+96]=_+N+1>>1,d[h+0+96]=R+_+1>>1,d[h+3+0]=Zt(q,G,ne),d[h+2+0]=Zt(O,q,G),d[h+1+0]=d[h+3+32]=Zt(w,O,q),d[h+1+32]=d[h+3+64]=Zt(N,w,O),d[h+1+64]=d[h+3+96]=Zt(_,N,w),d[h+1+96]=Zt(R,_,N)}function xi(d,h){var w;for(w=0;8>w;++w)o(d,h+32*w,d,h-32,8)}function lr(d,h){var w;for(w=0;8>w;++w)c(d,h,d[h-1],8),h+=32}function La(d,h,w){var N;for(N=0;8>N;++N)c(h,w+32*N,d,8)}function ds(d,h){var w,N=8;for(w=0;8>w;++w)N+=d[h+w-32]+d[h-1+32*w];La(N>>4,d,h)}function qs(d,h){var w,N=4;for(w=0;8>w;++w)N+=d[h+w-32];La(N>>3,d,h)}function Sr(d,h){var w,N=4;for(w=0;8>w;++w)N+=d[h-1+32*w];La(N>>3,d,h)}function $s(d,h){La(128,d,h)}function yi(d,h,w){var N=d[h-w],_=d[h+0],R=3*(_-N)+ts[1020+d[h-2*w]-d[h+w]],O=wo[112+(R+4>>3)];d[h-w]=Ea[255+N+wo[112+(R+3>>3)]],d[h+0]=Ea[255+_-O]}function Yi(d,h,w,N){var _=d[h+0],R=d[h+w];return Ci[255+d[h-2*w]-d[h-w]]>N||Ci[255+R-_]>N}function Ws(d,h,w,N){return 4*Ci[255+d[h-w]-d[h+0]]+Ci[255+d[h-2*w]-d[h+w]]<=N}function ga(d,h,w,N,_){var R=d[h-3*w],O=d[h-2*w],q=d[h-w],G=d[h+0],ne=d[h+w],ye=d[h+2*w],Re=d[h+3*w];return 4*Ci[255+q-G]+Ci[255+O-ne]>N?0:Ci[255+d[h-4*w]-R]<=_&&Ci[255+R-O]<=_&&Ci[255+O-q]<=_&&Ci[255+Re-ye]<=_&&Ci[255+ye-ne]<=_&&Ci[255+ne-G]<=_}function Vr(d,h,w,N){var _=2*N+1;for(N=0;16>N;++N)Ws(d,h+N,w,_)&&yi(d,h+N,w)}function vi(d,h,w,N){var _=2*N+1;for(N=0;16>N;++N)Ws(d,h+N*w,1,_)&&yi(d,h+N*w,1)}function Ln(d,h,w,N){var _;for(_=3;0<_;--_)Vr(d,h+=4*w,w,N)}function _a(d,h,w,N){var _;for(_=3;0<_;--_)vi(d,h+=4,w,N)}function En(d,h,w,N,_,R,O,q){for(R=2*R+1;0<_--;){if(ga(d,h,w,R,O))if(Yi(d,h,w,q))yi(d,h,w);else{var G=d,ne=h,ye=w,Re=G[ne-2*ye],re=G[ne-ye],je=G[ne+0],Te=G[ne+ye],Je=G[ne+2*ye],Be=27*(Ge=ts[1020+3*(je-re)+ts[1020+Re-Te]])+63>>7,Ye=18*Ge+63>>7,Ge=9*Ge+63>>7;G[ne-3*ye]=Ea[255+G[ne-3*ye]+Ge],G[ne-2*ye]=Ea[255+Re+Ye],G[ne-ye]=Ea[255+re+Be],G[ne+0]=Ea[255+je-Be],G[ne+ye]=Ea[255+Te-Ye],G[ne+2*ye]=Ea[255+Je-Ge]}h+=N}}function Ti(d,h,w,N,_,R,O,q){for(R=2*R+1;0<_--;){if(ga(d,h,w,R,O))if(Yi(d,h,w,q))yi(d,h,w);else{var G=d,ne=h,ye=w,Re=G[ne-ye],re=G[ne+0],je=G[ne+ye],Te=wo[112+(4+(Je=3*(re-Re))>>3)],Je=wo[112+(Je+3>>3)],Be=Te+1>>1;G[ne-2*ye]=Ea[255+G[ne-2*ye]+Be],G[ne-ye]=Ea[255+Re+Je],G[ne+0]=Ea[255+re-Te],G[ne+ye]=Ea[255+je-Be]}h+=N}}function Vn(d,h,w,N,_,R){En(d,h,w,1,16,N,_,R)}function bi(d,h,w,N,_,R){En(d,h,1,w,16,N,_,R)}function xa(d,h,w,N,_,R){var O;for(O=3;0<O;--O)Ti(d,h+=4*w,w,1,16,N,_,R)}function x(d,h,w,N,_,R){var O;for(O=3;0<O;--O)Ti(d,h+=4,1,w,16,N,_,R)}function L(d,h,w,N,_,R,O,q){En(d,h,_,1,8,R,O,q),En(w,N,_,1,8,R,O,q)}function ae(d,h,w,N,_,R,O,q){En(d,h,1,_,8,R,O,q),En(w,N,1,_,8,R,O,q)}function me(d,h,w,N,_,R,O,q){Ti(d,h+4*_,_,1,8,R,O,q),Ti(w,N+4*_,_,1,8,R,O,q)}function Le(d,h,w,N,_,R,O,q){Ti(d,h+4,1,_,8,R,O,q),Ti(w,N+4,1,_,8,R,O,q)}function Ke(){this.ba=new Xt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new xt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Nt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ot(){this.ua=0,this.Wa=new Et,this.vb=new Et,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new we,this.yc=new le}function Ht(){this.xb=this.a=0,this.l=new pi,this.ca=new Xt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ot,this.ab=0,this.gc=m(4,Nt),this.Oc=0}function an(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new pi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function fn(d,h,w,N,_,R,O){for(d=d==null?0:d[h+0],h=0;h<O;++h)_[R+h]=d+w[N+h]&255,d=_[R+h]}function cr(d,h,w,N,_,R,O){var q;if(d==null)fn(null,null,w,N,_,R,O);else for(q=0;q<O;++q)_[R+q]=d[h+q]+w[N+q]&255}function dr(d,h,w,N,_,R,O){if(d==null)fn(null,null,w,N,_,R,O);else{var q,G=d[h+0],ne=G,ye=G;for(q=0;q<O;++q)ne=ye+(G=d[h+q])-ne,ye=w[N+q]+(-256&ne?0>ne?0:255:ne)&255,ne=G,_[R+q]=ye}}function Yn(d,h,w,N){var _=h.width,R=h.o;if(a(d!=null&&h!=null),0>w||0>=N||w+N>R)return null;if(!d.Cc){if(d.ga==null){var O;if(d.ga=new an,(O=d.ga==null)||(O=h.width*h.o,a(d.Gb.length==0),d.Gb=l(O),d.Uc=0,d.Gb==null?O=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,O=1),O=!O),!O){O=d.ga;var q=d.Fa,G=d.P,ne=d.qc,ye=d.mb,Re=d.nb,re=G+1,je=ne-1,Te=O.l;if(a(q!=null&&ye!=null&&h!=null),T[0]=null,T[1]=fn,T[2]=cr,T[3]=dr,O.ca=ye,O.tb=Re,O.c=h.width,O.i=h.height,a(0<O.c&&0<O.i),1>=ne)h=0;else if(O.$a=3&q[G+0],O.Z=q[G+0]>>2&3,O.Lc=q[G+0]>>4&3,G=q[G+0]>>6&3,0>O.$a||1<O.$a||4<=O.Z||1<O.Lc||G)h=0;else if(Te.put=St,Te.ac=nn,Te.bc=rn,Te.ma=O,Te.width=h.width,Te.height=h.height,Te.Da=h.Da,Te.v=h.v,Te.va=h.va,Te.j=h.j,Te.o=h.o,O.$a)e:{a(O.$a==1),h=Wn();t:for(;;){if(h==null){h=0;break e}if(a(O!=null),O.mc=h,h.c=O.c,h.i=O.i,h.l=O.l,h.l.ma=O,h.l.width=O.c,h.l.height=O.i,h.a=0,Pe(h.m,q,re,je),!Kn(O.c,O.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&Qa(h.s)?(O.ic=1,q=h.c*h.i,h.Ta=null,h.Ua=0,h.V=l(q),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(O.ic=0,h=Qn(h,O.c)),!h))break t;h=1;break e}O.mc=null,h=0}else h=je>=O.c*O.i;O=!h}if(O)return null;d.ga.Lc!=1?d.Ga=0:N=R-w}a(d.ga!=null),a(w+N<=R);e:{if(h=(q=d.ga).c,R=q.l.o,q.$a==0){if(re=d.rc,je=d.Vc,Te=d.Fa,G=d.P+1+w*h,ne=d.mb,ye=d.nb+w*h,a(G<=d.P+d.qc),q.Z!=0)for(a(T[q.Z]!=null),O=0;O<N;++O)T[q.Z](re,je,Te,G,ne,ye,h),re=ne,je=ye,ye+=h,G+=h;else for(O=0;O<N;++O)o(ne,ye,Te,G,h),re=ne,je=ye,ye+=h,G+=h;d.rc=re,d.Vc=je}else{if(a(q.mc!=null),h=w+N,a((O=q.mc)!=null),a(h<=O.i),O.C>=h)h=1;else if(q.ic||Zn(),q.ic){q=O.V,re=O.Ba,je=O.c;var Je=O.i,Be=(Te=1,G=O.$/je,ne=O.$%je,ye=O.m,Re=O.s,O.$),Ye=je*Je,Ge=je*h,Ze=Re.wc,tt=Be<Ge?$n(Re,ne,G):null;a(Be<=Ye),a(h<=Je),a(Qa(Re));t:for(;;){for(;!ye.h&&Be<Ge;){if(ne&Ze||(tt=$n(Re,ne,G)),a(tt!=null),be(ye),256>(Je=zn(tt.G[0],tt.H[0],ye)))q[re+Be]=Je,++Be,++ne>=je&&(ne=0,++G<=h&&!(G%16)&&Dn(O,G));else{if(!(280>Je)){Te=0;break t}Je=ta(Je-256,ye);var qt,_t=zn(tt.G[4],tt.H[4],ye);if(be(ye),!(Be>=(_t=Ka(je,_t=ta(_t,ye)))&&Ye-Be>=Je)){Te=0;break t}for(qt=0;qt<Je;++qt)q[re+Be+qt]=q[re+Be+qt-_t];for(Be+=Je,ne+=Je;ne>=je;)ne-=je,++G<=h&&!(G%16)&&Dn(O,G);Be<Ge&&ne&Ze&&(tt=$n(Re,ne,G))}a(ye.h==de(ye))}Dn(O,G>h?h:G);break t}!Te||ye.h&&Be<Ye?(Te=0,O.a=ye.h?5:3):O.$=Be,h=Te}else h=Ra(O,O.V,O.Ba,O.c,O.i,h,Or);if(!h){N=0;break e}}w+N>=R&&(d.Cc=1),N=1}if(!N)return null;if(d.Cc&&((N=d.ga)!=null&&(N.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+w*_}function Nr(d,h,w,N,_,R){for(;0<_--;){var O,q=d,G=h+(w?1:0),ne=d,ye=h+(w?0:3);for(O=0;O<N;++O){var Re=ne[ye+4*O];Re!=255&&(Re*=32897,q[G+4*O+0]=q[G+4*O+0]*Re>>23,q[G+4*O+1]=q[G+4*O+1]*Re>>23,q[G+4*O+2]=q[G+4*O+2]*Re>>23)}h+=R}}function kr(d,h,w,N,_){for(;0<N--;){var R;for(R=0;R<w;++R){var O=d[h+2*R+0],q=15&(ne=d[h+2*R+1]),G=4369*q,ne=(240&ne|ne>>4)*G>>16;d[h+2*R+0]=(240&O|O>>4)*G>>16&240|(15&O|O<<4)*G>>16>>4&15,d[h+2*R+1]=240&ne|q}h+=_}}function Yr(d,h,w,N,_,R,O,q){var G,ne,ye=255;for(ne=0;ne<_;++ne){for(G=0;G<N;++G){var Re=d[h+G];R[O+4*G]=Re,ye&=Re}h+=w,O+=q}return ye!=255}function Gi(d,h,w,N,_){var R;for(R=0;R<_;++R)w[N+R]=d[h+R]>>8}function Zn(){Qs=Nr,vo=kr,bo=Yr,wl=Gi}function Ri(d,h,w){ee[d]=function(N,_,R,O,q,G,ne,ye,Re,re,je,Te,Je,Be,Ye,Ge,Ze){var tt,qt=Ze-1>>1,_t=q[G+0]|ne[ye+0]<<16,hn=Re[re+0]|je[Te+0]<<16;a(N!=null);var Ft=3*_t+hn+131074>>2;for(h(N[_+0],255&Ft,Ft>>16,Je,Be),R!=null&&(Ft=3*hn+_t+131074>>2,h(R[O+0],255&Ft,Ft>>16,Ye,Ge)),tt=1;tt<=qt;++tt){var Nn=q[G+tt]|ne[ye+tt]<<16,Dr=Re[re+tt]|je[Te+tt]<<16,pn=_t+Nn+hn+Dr+524296,It=pn+2*(Nn+hn)>>3;Ft=It+_t>>1,_t=(pn=pn+2*(_t+Dr)>>3)+Nn>>1,h(N[_+2*tt-1],255&Ft,Ft>>16,Je,Be+(2*tt-1)*w),h(N[_+2*tt-0],255&_t,_t>>16,Je,Be+(2*tt-0)*w),R!=null&&(Ft=pn+hn>>1,_t=It+Dr>>1,h(R[O+2*tt-1],255&Ft,Ft>>16,Ye,Ge+(2*tt-1)*w),h(R[O+2*tt+0],255&_t,_t>>16,Ye,Ge+(2*tt+0)*w)),_t=Nn,hn=Dr}1&Ze||(Ft=3*_t+hn+131074>>2,h(N[_+Ze-1],255&Ft,Ft>>16,Je,Be+(Ze-1)*w),R!=null&&(Ft=3*hn+_t+131074>>2,h(R[O+Ze-1],255&Ft,Ft>>16,Ye,Ge+(Ze-1)*w)))}}function Ar(){K[Qo]=Y,K[us]=Ne,K[Cl]=Ce,K[jo]=Qe,K[So]=at,K[Un]=Yt,K[Xo]=yt,K[No]=Ne,K[Mr]=Qe,K[Ma]=at,K[qo]=Yt}function wi(d){return d&-16384?0>d?0:255:d>>ba}function Ji(d,h){return wi((19077*d>>8)+(26149*h>>8)-14234)}function Ns(d,h,w){return wi((19077*d>>8)-(6419*h>>8)-(13320*w>>8)+8708)}function Ki(d,h){return wi((19077*d>>8)+(33050*h>>8)-17685)}function ii(d,h,w,N,_){N[_+0]=Ji(d,w),N[_+1]=Ns(d,h,w),N[_+2]=Ki(d,h)}function pr(d,h,w,N,_){N[_+0]=Ki(d,h),N[_+1]=Ns(d,h,w),N[_+2]=Ji(d,w)}function Oi(d,h,w,N,_){var R=Ns(d,h,w);h=R<<3&224|Ki(d,h)>>3,N[_+0]=248&Ji(d,w)|R>>5,N[_+1]=h}function ks(d,h,w,N,_){var R=240&Ki(d,h)|15;N[_+0]=240&Ji(d,w)|Ns(d,h,w)>>4,N[_+1]=R}function si(d,h,w,N,_){N[_+0]=255,ii(d,h,w,N,_+1)}function oi(d,h,w,N,_){pr(d,h,w,N,_),N[_+3]=255}function mr(d,h,w,N,_){ii(d,h,w,N,_),N[_+3]=255}function Qi(d,h,w){ee[d]=function(N,_,R,O,q,G,ne,ye,Re){for(var re=ye+(-2&Re)*w;ye!=re;)h(N[_+0],R[O+0],q[G+0],ne,ye),h(N[_+1],R[O+0],q[G+0],ne,ye+w),_+=2,++O,++G,ye+=2*w;1&Re&&h(N[_+0],R[O+0],q[G+0],ne,ye)}}function Ia(d,h,w){return w==0?d==0?h==0?6:5:h==0?4:0:w}function Xi(d,h,w,N,_){switch(d>>>30){case 3:Js(h,w,N,_,0);break;case 2:gr(h,w,N,_);break;case 1:Mn(h,w,N,_)}}function ya(d,h){var w,N,_=h.M,R=h.Nb,O=d.oc,q=d.pc+40,G=d.oc,ne=d.pc+584,ye=d.oc,Re=d.pc+600;for(w=0;16>w;++w)O[q+32*w-1]=129;for(w=0;8>w;++w)G[ne+32*w-1]=129,ye[Re+32*w-1]=129;for(0<_?O[q-1-32]=G[ne-1-32]=ye[Re-1-32]=129:(c(O,q-32-1,127,21),c(G,ne-32-1,127,9),c(ye,Re-32-1,127,9)),N=0;N<d.za;++N){var re=h.ya[h.aa+N];if(0<N){for(w=-1;16>w;++w)o(O,q+32*w-4,O,q+32*w+12,4);for(w=-1;8>w;++w)o(G,ne+32*w-4,G,ne+32*w+4,4),o(ye,Re+32*w-4,ye,Re+32*w+4,4)}var je=d.Gd,Te=d.Hd+N,Je=re.ad,Be=re.Hc;if(0<_&&(o(O,q-32,je[Te].y,0,16),o(G,ne-32,je[Te].f,0,8),o(ye,Re-32,je[Te].ea,0,8)),re.Za){var Ye=O,Ge=q-32+16;for(0<_&&(N>=d.za-1?c(Ye,Ge,je[Te].y[15],4):o(Ye,Ge,je[Te+1].y,0,4)),w=0;4>w;w++)Ye[Ge+128+w]=Ye[Ge+256+w]=Ye[Ge+384+w]=Ye[Ge+0+w];for(w=0;16>w;++w,Be<<=2)Ye=O,Ge=q+Cc[w],u[re.Ob[w]](Ye,Ge),Xi(Be,Je,16*+w,Ye,Ge)}else if(Ye=Ia(N,_,re.Ob[0]),Da[Ye](O,q),Be!=0)for(w=0;16>w;++w,Be<<=2)Xi(Be,Je,16*+w,O,q+Cc[w]);for(w=re.Gc,Ye=Ia(N,_,re.Dd),k[Ye](G,ne),k[Ye](ye,Re),Be=Je,Ye=G,Ge=ne,255&(re=0|w)&&(170&re?qa(Be,256,Ye,Ge):wn(Be,256,Ye,Ge)),re=ye,Be=Re,255&(w>>=8)&&(170&w?qa(Je,320,re,Be):wn(Je,320,re,Be)),_<d.Ub-1&&(o(je[Te].y,0,O,q+480,16),o(je[Te].f,0,G,ne+224,8),o(je[Te].ea,0,ye,Re+224,8)),w=8*R*d.B,je=d.sa,Te=d.ta+16*N+16*R*d.R,Je=d.qa,re=d.ra+8*N+w,Be=d.Ha,Ye=d.Ia+8*N+w,w=0;16>w;++w)o(je,Te+w*d.R,O,q+32*w,16);for(w=0;8>w;++w)o(Je,re+w*d.B,G,ne+32*w,8),o(Be,Ye+w*d.B,ye,Re+32*w,8)}}function jt(d,h,w,N,_,R,O,q,G){var ne=[0],ye=[0],Re=0,re=G!=null?G.kd:0,je=G??new nt;if(d==null||12>w)return 7;je.data=d,je.w=h,je.ha=w,h=[h],w=[w],je.gb=[je.gb];e:{var Te=h,Je=w,Be=je.gb;if(a(d!=null),a(Je!=null),a(Be!=null),Be[0]=0,12<=Je[0]&&!r(d,Te[0],"RIFF")){if(r(d,Te[0]+8,"WEBP")){Be=3;break e}var Ye=pt(d,Te[0]+4);if(12>Ye||4294967286<Ye){Be=3;break e}if(re&&Ye>Je[0]-8){Be=7;break e}Be[0]=Ye,Te[0]+=12,Je[0]-=12}Be=0}if(Be!=0)return Be;for(Ye=0<je.gb[0],w=w[0];;){e:{var Ge=d;Je=h,Be=w;var Ze=ne,tt=ye,qt=Te=[0];if((Ft=Re=[Re])[0]=0,8>Be[0])Be=7;else{if(!r(Ge,Je[0],"VP8X")){if(pt(Ge,Je[0]+4)!=10){Be=3;break e}if(18>Be[0]){Be=7;break e}var _t=pt(Ge,Je[0]+8),hn=1+ot(Ge,Je[0]+12);if(2147483648<=hn*(Ge=1+ot(Ge,Je[0]+15))){Be=3;break e}qt!=null&&(qt[0]=_t),Ze!=null&&(Ze[0]=hn),tt!=null&&(tt[0]=Ge),Je[0]+=18,Be[0]-=18,Ft[0]=1}Be=0}}if(Re=Re[0],Te=Te[0],Be!=0)return Be;if(Je=!!(2&Te),!Ye&&Re)return 3;if(R!=null&&(R[0]=!!(16&Te)),O!=null&&(O[0]=Je),q!=null&&(q[0]=0),O=ne[0],Te=ye[0],Re&&Je&&G==null){Be=0;break}if(4>w){Be=7;break}if(Ye&&Re||!Ye&&!Re&&!r(d,h[0],"ALPH")){w=[w],je.na=[je.na],je.P=[je.P],je.Sa=[je.Sa];e:{_t=d,Be=h,Ye=w;var Ft=je.gb;Ze=je.na,tt=je.P,qt=je.Sa,hn=22,a(_t!=null),a(Ye!=null),Ge=Be[0];var Nn=Ye[0];for(a(Ze!=null),a(qt!=null),Ze[0]=null,tt[0]=null,qt[0]=0;;){if(Be[0]=Ge,Ye[0]=Nn,8>Nn){Be=7;break e}var Dr=pt(_t,Ge+4);if(4294967286<Dr){Be=3;break e}var pn=8+Dr+1&-2;if(hn+=pn,0<Ft&&hn>Ft){Be=3;break e}if(!r(_t,Ge,"VP8 ")||!r(_t,Ge,"VP8L")){Be=0;break e}if(Nn[0]<pn){Be=7;break e}r(_t,Ge,"ALPH")||(Ze[0]=_t,tt[0]=Ge+8,qt[0]=Dr),Ge+=pn,Nn-=pn}}if(w=w[0],je.na=je.na[0],je.P=je.P[0],je.Sa=je.Sa[0],Be!=0)break}w=[w],je.Ja=[je.Ja],je.xa=[je.xa];e:if(Ft=d,Be=h,Ye=w,Ze=je.gb[0],tt=je.Ja,qt=je.xa,_t=Be[0],Ge=!r(Ft,_t,"VP8 "),hn=!r(Ft,_t,"VP8L"),a(Ft!=null),a(Ye!=null),a(tt!=null),a(qt!=null),8>Ye[0])Be=7;else{if(Ge||hn){if(Ft=pt(Ft,_t+4),12<=Ze&&Ft>Ze-12){Be=3;break e}if(re&&Ft>Ye[0]-8){Be=7;break e}tt[0]=Ft,Be[0]+=8,Ye[0]-=8,qt[0]=hn}else qt[0]=5<=Ye[0]&&Ft[_t+0]==47&&!(Ft[_t+4]>>5),tt[0]=Ye[0];Be=0}if(w=w[0],je.Ja=je.Ja[0],je.xa=je.xa[0],h=h[0],Be!=0)break;if(4294967286<je.Ja)return 3;if(q==null||Je||(q[0]=je.xa?2:1),O=[O],Te=[Te],je.xa){if(5>w){Be=7;break}q=O,re=Te,Je=R,d==null||5>w?d=0:5<=w&&d[h+0]==47&&!(d[h+4]>>5)?(Ye=[0],Ft=[0],Ze=[0],Pe(tt=new J,d,h,w),ir(tt,Ye,Ft,Ze)?(q!=null&&(q[0]=Ye[0]),re!=null&&(re[0]=Ft[0]),Je!=null&&(Je[0]=Ze[0]),d=1):d=0):d=0}else{if(10>w){Be=7;break}q=Te,d==null||10>w||!ei(d,h+3,w-3)?d=0:(re=d[h+0]|d[h+1]<<8|d[h+2]<<16,Je=16383&(d[h+7]<<8|d[h+6]),d=16383&(d[h+9]<<8|d[h+8]),1&re||3<(re>>1&7)||!(re>>4&1)||re>>5>=je.Ja||!Je||!d?d=0:(O&&(O[0]=Je),q&&(q[0]=d),d=1))}if(!d||(O=O[0],Te=Te[0],Re&&(ne[0]!=O||ye[0]!=Te)))return 3;G!=null&&(G[0]=je,G.offset=h-G.w,a(4294967286>h-G.w),a(G.offset==G.ha-w));break}return Be==0||Be==7&&Re&&G==null?(R!=null&&(R[0]|=je.na!=null&&0<je.na.length),N!=null&&(N[0]=O),_!=null&&(_[0]=Te),0):Be}function _n(d,h,w){var N=h.width,_=h.height,R=0,O=0,q=N,G=_;if(h.Da=d!=null&&0<d.Da,h.Da&&(q=d.cd,G=d.bd,R=d.v,O=d.j,11>w||(R&=-2,O&=-2),0>R||0>O||0>=q||0>=G||R+q>N||O+G>_))return 0;if(h.v=R,h.j=O,h.va=R+q,h.o=O+G,h.U=q,h.T=G,h.da=d!=null&&0<d.da,h.da){if(!Ct(q,G,w=[d.ib],R=[d.hb]))return 0;h.ib=w[0],h.hb=R[0]}return h.ob=d!=null&&d.ob,h.Kb=d==null||!d.Sd,h.da&&(h.ob=h.ib<3*N/4&&h.hb<3*_/4,h.Kb=0),1}function As(d){if(d==null)return 2;if(11>d.S){var h=d.f.RGBA;h.fb+=(d.height-1)*h.A,h.A=-h.A}else h=d.f.kb,d=d.height,h.O+=(d-1)*h.fa,h.fa=-h.fa,h.N+=(d-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(d-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(d-1)*h.lb,h.lb=-h.lb);return 0}function ji(d,h,w,N){if(N==null||0>=d||0>=h)return 2;if(w!=null){if(w.Da){var _=w.cd,R=w.bd,O=-2&w.v,q=-2&w.j;if(0>O||0>q||0>=_||0>=R||O+_>d||q+R>h)return 2;d=_,h=R}if(w.da){if(!Ct(d,h,_=[w.ib],R=[w.hb]))return 2;d=_[0],h=R[0]}}N.width=d,N.height=h;e:{var G=N.width,ne=N.height;if(d=N.S,0>=G||0>=ne||!(d>=Qo&&13>d))d=2;else{if(0>=N.Rd&&N.sd==null){O=R=_=h=0;var ye=(q=G*Ll[d])*ne;if(11>d||(R=(ne+1)/2*(h=(G+1)/2),d==12&&(O=(_=G)*ne)),(ne=l(ye+2*R+O))==null){d=1;break e}N.sd=ne,11>d?((G=N.f.RGBA).eb=ne,G.fb=0,G.A=q,G.size=ye):((G=N.f.kb).y=ne,G.O=0,G.fa=q,G.Fd=ye,G.f=ne,G.N=0+ye,G.Ab=h,G.Cd=R,G.ea=ne,G.W=0+ye+R,G.Db=h,G.Ed=R,d==12&&(G.F=ne,G.J=0+ye+2*R),G.Tc=O,G.lb=_)}if(h=1,_=N.S,R=N.width,O=N.height,_>=Qo&&13>_)if(11>_)d=N.f.RGBA,h&=(q=Math.abs(d.A))*(O-1)+R<=d.size,h&=q>=R*Ll[_],h&=d.eb!=null;else{d=N.f.kb,q=(R+1)/2,ye=(O+1)/2,G=Math.abs(d.fa),ne=Math.abs(d.Ab);var Re=Math.abs(d.Db),re=Math.abs(d.lb),je=re*(O-1)+R;h&=G*(O-1)+R<=d.Fd,h&=ne*(ye-1)+q<=d.Cd,h=(h&=Re*(ye-1)+q<=d.Ed)&G>=R&ne>=q&Re>=q,h&=d.y!=null,h&=d.f!=null,h&=d.ea!=null,_==12&&(h&=re>=R,h&=je<=d.Tc,h&=d.F!=null)}else h=0;d=h?0:2}}return d!=0||w!=null&&w.fd&&(d=As(N)),d}var ia=64,li=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],va=24,Si=32,Br=8,Zi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];mt("Predictor0","PredictorAdd0"),ee.Predictor0=function(){return 4278190080},ee.Predictor1=function(d){return d},ee.Predictor2=function(d,h,w){return h[w+0]},ee.Predictor3=function(d,h,w){return h[w+1]},ee.Predictor4=function(d,h,w){return h[w-1]},ee.Predictor5=function(d,h,w){return Dt(Dt(d,h[w+1]),h[w+0])},ee.Predictor6=function(d,h,w){return Dt(d,h[w-1])},ee.Predictor7=function(d,h,w){return Dt(d,h[w+0])},ee.Predictor8=function(d,h,w){return Dt(h[w-1],h[w+0])},ee.Predictor9=function(d,h,w){return Dt(h[w+0],h[w+1])},ee.Predictor10=function(d,h,w){return Dt(Dt(d,h[w-1]),Dt(h[w+0],h[w+1]))},ee.Predictor11=function(d,h,w){var N=h[w+0];return 0>=zt(N>>24&255,d>>24&255,(h=h[w-1])>>24&255)+zt(N>>16&255,d>>16&255,h>>16&255)+zt(N>>8&255,d>>8&255,h>>8&255)+zt(255&N,255&d,255&h)?N:d},ee.Predictor12=function(d,h,w){var N=h[w+0];return(wt((d>>24&255)+(N>>24&255)-((h=h[w-1])>>24&255))<<24|wt((d>>16&255)+(N>>16&255)-(h>>16&255))<<16|wt((d>>8&255)+(N>>8&255)-(h>>8&255))<<8|wt((255&d)+(255&N)-(255&h)))>>>0},ee.Predictor13=function(d,h,w){var N=h[w-1];return(Qt((d=Dt(d,h[w+0]))>>24&255,N>>24&255)<<24|Qt(d>>16&255,N>>16&255)<<16|Qt(d>>8&255,N>>8&255)<<8|Qt(255&d,255&N))>>>0};var Bi=ee.PredictorAdd0;ee.PredictorAdd1=$t,mt("Predictor2","PredictorAdd2"),mt("Predictor3","PredictorAdd3"),mt("Predictor4","PredictorAdd4"),mt("Predictor5","PredictorAdd5"),mt("Predictor6","PredictorAdd6"),mt("Predictor7","PredictorAdd7"),mt("Predictor8","PredictorAdd8"),mt("Predictor9","PredictorAdd9"),mt("Predictor10","PredictorAdd10"),mt("Predictor11","PredictorAdd11"),mt("Predictor12","PredictorAdd12"),mt("Predictor13","PredictorAdd13");var Ni=ee.PredictorAdd2;Se("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Se("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var Gn,Hs=ee.ColorIndexInverseTransform,es=ee.MapARGB,Ua=ee.VP8LColorIndexInverseTransformAlpha,Vs=ee.MapAlpha,mo=ee.VP8LPredictorsAdd=[];mo.length=16,(ee.VP8LPredictors=[]).length=16,(ee.VP8LPredictorsAdd_C=[]).length=16,(ee.VP8LPredictors_C=[]).length=16;var Ys,go,ki,Cs,Gr,Gs,Jr,Js,gr,qa,Mn,wn,xr,Er,Ai,yr,xo,Ps,In,yo,zo,Ko,Uo,Ks,Qs,vo,bo,wl,jl=l(511),Sl=l(2041),Nl=l(225),kl=l(767),Al=0,ts=Sl,wo=Nl,Ea=kl,Ci=jl,Qo=0,us=1,Cl=2,jo=3,So=4,Un=5,Xo=6,No=7,Mr=8,Ma=9,qo=10,Ue=[2,3,7],ci=[3,3,11],Xs=[280,256,256,256,40],Vl=[0,1,1,1,0],kc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ac=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Yl=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zo=8,Zs=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ko=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ls=null,Ao=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],el=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Gl=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Pl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],tl=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Co=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],eo=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Da=[],u=[],k=[],B=1,F=2,T=[],K=[];Ri("UpsampleRgbLinePair",ii,3),Ri("UpsampleBgrLinePair",pr,3),Ri("UpsampleRgbaLinePair",mr,4),Ri("UpsampleBgraLinePair",oi,4),Ri("UpsampleArgbLinePair",si,4),Ri("UpsampleRgba4444LinePair",ks,2),Ri("UpsampleRgb565LinePair",Oi,2);var Y=ee.UpsampleRgbLinePair,Ce=ee.UpsampleBgrLinePair,Ne=ee.UpsampleRgbaLinePair,Qe=ee.UpsampleBgraLinePair,at=ee.UpsampleArgbLinePair,Yt=ee.UpsampleRgba4444LinePair,yt=ee.UpsampleRgb565LinePair,vn=16,sn=1<<vn-1,cn=-227,yn=482,ba=6,sa=0,$a=l(256),kt=l(256),qn=l(256),er=l(256),_s=l(yn-cn),Jl=l(yn-cn);Qi("YuvToRgbRow",ii,3),Qi("YuvToBgrRow",pr,3),Qi("YuvToRgbaRow",mr,4),Qi("YuvToBgraRow",oi,4),Qi("YuvToArgbRow",si,4),Qi("YuvToRgba4444Row",ks,2),Qi("YuvToRgb565Row",Oi,2);var Cc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],$o=[0,2,8],Xc=[8,7,6,4,4,2,2,2,1,1,1,1],to=1;this.WebPDecodeRGBA=function(d,h,w,N,_){var R=us,O=new Ke,q=new Xt;O.ba=q,q.S=R,q.width=[q.width],q.height=[q.height];var G=q.width,ne=q.height,ye=new oe;if(ye==null||d==null)var Re=2;else a(ye!=null),Re=jt(d,h,w,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(Re!=0?G=0:(G!=null&&(G[0]=ye.width[0]),ne!=null&&(ne[0]=ye.height[0]),G=1),G){q.width=q.width[0],q.height=q.height[0],N!=null&&(N[0]=q.width),_!=null&&(_[0]=q.height);e:{if(N=new pi,(_=new nt).data=d,_.w=h,_.ha=w,_.kd=1,h=[0],a(_!=null),((d=jt(_.data,_.w,_.ha,null,null,null,h,null,_))==0||d==7)&&h[0]&&(d=4),(h=d)==0){if(a(O!=null),N.data=_.data,N.w=_.w+_.offset,N.ha=_.ha-_.offset,N.put=St,N.ac=nn,N.bc=rn,N.ma=O,_.xa){if((d=Wn())==null){O=1;break e}if((function(re,je){var Te=[0],Je=[0],Be=[0];t:for(;;){if(re==null)return 0;if(je==null)return re.a=2,0;if(re.l=je,re.a=0,Pe(re.m,je.data,je.w,je.ha),!ir(re.m,Te,Je,Be)){re.a=3;break t}if(re.xb=F,je.width=Te[0],je.height=Je[0],!Kn(Te[0],Je[0],1,re,null))break t;return 1}return a(re.a!=0),0})(d,N)){if(N=(h=ji(N.width,N.height,O.Oa,O.ba))==0){t:{N=d;n:for(;;){if(N==null){N=0;break t}if(a(N.s.yc!=null),a(N.s.Ya!=null),a(0<N.s.Wb),a((w=N.l)!=null),a((_=w.ma)!=null),N.xb!=0){if(N.ca=_.ba,N.tb=_.tb,a(N.ca!=null),!_n(_.Oa,w,jo)){N.a=2;break n}if(!Qn(N,w.width)||w.da)break n;if((w.da||Jt(N.ca.S))&&Zn(),11>N.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),N.ca.f.kb.F!=null&&Zn()),N.Pb&&0<N.s.ua&&N.s.vb.X==null&&!V(N.s.vb,N.s.Wa.Xa)){N.a=1;break n}N.xb=0}if(!Ra(N,N.V,N.Ba,N.c,N.i,w.o,Rs))break n;_.Dc=N.Ma,N=1;break t}a(N.a!=0),N=0}N=!N}N&&(h=d.a)}else h=d.a}else{if((d=new To)==null){O=1;break e}if(d.Fa=_.na,d.P=_.P,d.qc=_.Sa,ti(d,N)){if((h=ji(N.width,N.height,O.Oa,O.ba))==0){if(d.Aa=0,w=O.Oa,a((_=d)!=null),w!=null){if(0<(G=0>(G=w.Md)?0:100<G?255:255*G/100)){for(ne=ye=0;4>ne;++ne)12>(Re=_.pb[ne]).lc&&(Re.ia=G*Xc[0>Re.lc?0:Re.lc]>>3),ye|=Re.ia;ye&&(alert("todo:VP8InitRandom"),_.ia=1)}_.Ga=w.Id,100<_.Ga?_.Ga=100:0>_.Ga&&(_.Ga=0)}(function(re,je){if(re==null)return 0;if(je==null)return Kt(re,2,"NULL VP8Io parameter in VP8Decode().");if(!re.cb&&!ti(re,je))return 0;if(a(re.cb),je.ac==null||je.ac(je)){je.ob&&(re.L=0);var Te=$o[re.L];if(re.L==2?(re.yb=0,re.zb=0):(re.yb=je.v-Te>>4,re.zb=je.j-Te>>4,0>re.yb&&(re.yb=0),0>re.zb&&(re.zb=0)),re.Va=je.o+15+Te>>4,re.Hb=je.va+15+Te>>4,re.Hb>re.za&&(re.Hb=re.za),re.Va>re.Ub&&(re.Va=re.Ub),0<re.L){var Je=re.ed;for(Te=0;4>Te;++Te){var Be;if(re.Qa.Cb){var Ye=re.Qa.Lb[Te];re.Qa.Fb||(Ye+=Je.Tb)}else Ye=Je.Tb;for(Be=0;1>=Be;++Be){var Ge=re.gd[Te][Be],Ze=Ye;if(Je.Pc&&(Ze+=Je.vd[0],Be&&(Ze+=Je.od[0])),0<(Ze=0>Ze?0:63<Ze?63:Ze)){var tt=Ze;0<Je.wb&&(tt=4<Je.wb?tt>>2:tt>>1)>9-Je.wb&&(tt=9-Je.wb),1>tt&&(tt=1),Ge.dd=tt,Ge.tc=2*Ze+tt,Ge.ld=40<=Ze?2:15<=Ze?1:0}else Ge.tc=0;Ge.La=Be}}}Te=0}else Kt(re,6,"Frame setup failed"),Te=re.a;if(Te=Te==0){if(Te){re.$c=0,0<re.Aa||(re.Ic=to);t:{Te=re.Ic,Je=4*(tt=re.za);var qt=32*tt,_t=tt+1,hn=0<re.L?tt*(0<re.Aa?2:1):0,Ft=(re.Aa==2?2:1)*tt;if((Ge=Je+832+(Be=3*(16*Te+$o[re.L])/2*qt)+(Ye=re.Fa!=null&&0<re.Fa.length?re.Kc.c*re.Kc.i:0))!=Ge)Te=0;else{if(Ge>re.Vb){if(re.Vb=0,re.Ec=l(Ge),re.Fc=0,re.Ec==null){Te=Kt(re,1,"no memory during frame initialization.");break t}re.Vb=Ge}Ge=re.Ec,Ze=re.Fc,re.Ac=Ge,re.Bc=Ze,Ze+=Je,re.Gd=m(qt,na),re.Hd=0,re.rb=m(_t+1,ka),re.sb=1,re.wa=hn?m(hn,_r):null,re.Y=0,re.D.Nb=0,re.D.wa=re.wa,re.D.Y=re.Y,0<re.Aa&&(re.D.Y+=tt),a(!0),re.oc=Ge,re.pc=Ze,Ze+=832,re.ya=m(Ft,cs),re.aa=0,re.D.ya=re.ya,re.D.aa=re.aa,re.Aa==2&&(re.D.aa+=tt),re.R=16*tt,re.B=8*tt,tt=(qt=$o[re.L])*re.R,qt=qt/2*re.B,re.sa=Ge,re.ta=Ze+tt,re.qa=re.sa,re.ra=re.ta+16*Te*re.R+qt,re.Ha=re.qa,re.Ia=re.ra+8*Te*re.B+qt,re.$c=0,Ze+=Be,re.mb=Ye?Ge:null,re.nb=Ye?Ze:null,a(Ze+Ye<=re.Fc+re.Vb),Wi(re),c(re.Ac,re.Bc,0,Je),Te=1}}if(Te){if(je.ka=0,je.y=re.sa,je.O=re.ta,je.f=re.qa,je.N=re.ra,je.ea=re.Ha,je.Vd=re.Ia,je.fa=re.R,je.Rc=re.B,je.F=null,je.J=0,!Al){for(Te=-255;255>=Te;++Te)jl[255+Te]=0>Te?-Te:Te;for(Te=-1020;1020>=Te;++Te)Sl[1020+Te]=-128>Te?-128:127<Te?127:Te;for(Te=-112;112>=Te;++Te)Nl[112+Te]=-16>Te?-16:15<Te?15:Te;for(Te=-255;510>=Te;++Te)kl[255+Te]=0>Te?0:255<Te?255:Te;Al=1}Jr=gi,Js=On,qa=Ba,Mn=ra,wn=Cn,gr=Ro,xr=Vn,Er=bi,Ai=L,yr=ae,xo=xa,Ps=x,In=me,yo=Le,zo=Vr,Ko=vi,Uo=Ln,Ks=_a,u[0]=zs,u[1]=Oo,u[2]=ai,u[3]=Sn,u[4]=Ir,u[5]=Us,u[6]=Vi,u[7]=Ss,u[8]=Bo,u[9]=Pa,Da[0]=za,Da[1]=aa,Da[2]=Hi,Da[3]=bn,Da[4]=Ca,Da[5]=Hn,Da[6]=ma,k[0]=ds,k[1]=js,k[2]=xi,k[3]=lr,k[4]=Sr,k[5]=qs,k[6]=$s,Te=1}else Te=0}Te&&(Te=(function(Nn,Dr){for(Nn.M=0;Nn.M<Nn.Va;++Nn.M){var pn,It=Nn.Jc[Nn.M&Nn.Xb],gt=Nn.m,zr=Nn;for(pn=0;pn<zr.za;++pn){var on=gt,jn=zr,sr=jn.Ac,wa=jn.Bc+4*pn,Kr=jn.zc,Cr=jn.ya[jn.aa+pn];if(jn.Qa.Bb?Cr.$b=We(on,jn.Pa.jb[0])?2+We(on,jn.Pa.jb[2]):We(on,jn.Pa.jb[1]):Cr.$b=0,jn.kc&&(Cr.Ad=We(on,jn.Bd)),Cr.Za=!We(on,145)+0,Cr.Za){var oa=Cr.Ob,ja=0;for(jn=0;4>jn;++jn){var vr,Pn=Kr[0+jn];for(vr=0;4>vr;++vr){Pn=tl[sr[wa+vr]][Pn];for(var Fn=Gl[We(on,Pn[0])];0<Fn;)Fn=Gl[2*Fn+We(on,Pn[Fn])];Pn=-Fn,sr[wa+vr]=Pn}o(oa,ja,sr,wa,4),ja+=4,Kr[0+jn]=Pn}}else Pn=We(on,156)?We(on,128)?1:3:We(on,163)?2:0,Cr.Ob[0]=Pn,c(sr,wa,Pn,4),c(Kr,0,Pn,4);Cr.Dd=We(on,142)?We(on,114)?We(on,183)?1:3:2:0}if(zr.m.Ka)return Kt(Nn,7,"Premature end-of-partition0 encountered.");for(;Nn.ja<Nn.za;++Nn.ja){if(zr=It,on=(gt=Nn).rb[gt.sb-1],sr=gt.rb[gt.sb+gt.ja],pn=gt.ya[gt.aa+gt.ja],wa=gt.kc?pn.Ad:0)on.la=sr.la=0,pn.Za||(on.Na=sr.Na=0),pn.Hc=0,pn.Gc=0,pn.ia=0;else{var br,Tn;if(on=sr,sr=zr,wa=gt.Pa.Xc,Kr=gt.ya[gt.aa+gt.ja],Cr=gt.pb[Kr.$b],jn=Kr.ad,oa=0,ja=gt.rb[gt.sb-1],Pn=vr=0,c(jn,oa,0,384),Kr.Za)var Fr=0,Tr=wa[3];else{Fn=l(16);var tr=on.Na+ja.Na;if(tr=Ls(sr,wa[1],tr,Cr.Eb,0,Fn,0),on.Na=ja.Na=(0<tr)+0,1<tr)Jr(Fn,0,jn,oa);else{var Wa=Fn[0]+3>>3;for(Fn=0;256>Fn;Fn+=16)jn[oa+Fn]=Wa}Fr=1,Tr=wa[0]}var Jn=15&on.la,nr=15&ja.la;for(Fn=0;4>Fn;++Fn){var Qr=1&nr;for(Wa=Tn=0;4>Wa;++Wa)Jn=Jn>>1|(Qr=(tr=Ls(sr,Tr,tr=Qr+(1&Jn),Cr.Sc,Fr,jn,oa))>Fr)<<7,Tn=Tn<<2|(3<tr?3:1<tr?2:jn[oa+0]!=0),oa+=16;Jn>>=4,nr=nr>>1|Qr<<7,vr=(vr<<8|Tn)>>>0}for(Tr=Jn,Fr=nr>>4,br=0;4>br;br+=2){for(Tn=0,Jn=on.la>>4+br,nr=ja.la>>4+br,Fn=0;2>Fn;++Fn){for(Qr=1&nr,Wa=0;2>Wa;++Wa)tr=Qr+(1&Jn),Jn=Jn>>1|(Qr=0<(tr=Ls(sr,wa[2],tr,Cr.Qc,0,jn,oa)))<<3,Tn=Tn<<2|(3<tr?3:1<tr?2:jn[oa+0]!=0),oa+=16;Jn>>=2,nr=nr>>1|Qr<<5}Pn|=Tn<<4*br,Tr|=Jn<<4<<br,Fr|=(240&nr)<<br}on.la=Tr,ja.la=Fr,Kr.Hc=vr,Kr.Gc=Pn,Kr.ia=43690&Pn?0:Cr.ia,wa=!(vr|Pn)}if(0<gt.L&&(gt.wa[gt.Y+gt.ja]=gt.gd[pn.$b][pn.Za],gt.wa[gt.Y+gt.ja].La|=!wa),zr.Ka)return Kt(Nn,7,"Premature end-of-file encountered.")}if(Wi(Nn),gt=Dr,zr=1,pn=(It=Nn).D,on=0<It.L&&It.M>=It.zb&&It.M<=It.Va,It.Aa==0)t:{if(pn.M=It.M,pn.uc=on,ya(It,pn),zr=1,pn=(Tn=It.D).Nb,on=(Pn=$o[It.L])*It.R,sr=Pn/2*It.B,Fn=16*pn*It.R,Wa=8*pn*It.B,wa=It.sa,Kr=It.ta-on+Fn,Cr=It.qa,jn=It.ra-sr+Wa,oa=It.Ha,ja=It.Ia-sr+Wa,nr=(Jn=Tn.M)==0,vr=Jn>=It.Va-1,It.Aa==2&&ya(It,Tn),Tn.uc)for(Qr=(tr=It).D.M,a(tr.D.uc),Tn=tr.yb;Tn<tr.Hb;++Tn){Fr=Tn,Tr=Qr;var Fa=(Pi=($r=tr).D).Nb;br=$r.R;var Pi=Pi.wa[Pi.Y+Fr],Ur=$r.sa,qr=$r.ta+16*Fa*br+16*Fr,Ha=Pi.dd,rr=Pi.tc;if(rr!=0)if(a(3<=rr),$r.L==1)0<Fr&&Ko(Ur,qr,br,rr+4),Pi.La&&Ks(Ur,qr,br,rr),0<Tr&&zo(Ur,qr,br,rr+4),Pi.La&&Uo(Ur,qr,br,rr);else{var Va=$r.B,ns=$r.qa,fs=$r.ra+8*Fa*Va+8*Fr,Sa=$r.Ha,$r=$r.Ia+8*Fa*Va+8*Fr;Fa=Pi.ld,0<Fr&&(Er(Ur,qr,br,rr+4,Ha,Fa),yr(ns,fs,Sa,$r,Va,rr+4,Ha,Fa)),Pi.La&&(Ps(Ur,qr,br,rr,Ha,Fa),yo(ns,fs,Sa,$r,Va,rr,Ha,Fa)),0<Tr&&(xr(Ur,qr,br,rr+4,Ha,Fa),Ai(ns,fs,Sa,$r,Va,rr+4,Ha,Fa)),Pi.La&&(xo(Ur,qr,br,rr,Ha,Fa),In(ns,fs,Sa,$r,Va,rr,Ha,Fa))}}if(It.ia&&alert("todo:DitherRow"),gt.put!=null){if(Tn=16*Jn,Jn=16*(Jn+1),nr?(gt.y=It.sa,gt.O=It.ta+Fn,gt.f=It.qa,gt.N=It.ra+Wa,gt.ea=It.Ha,gt.W=It.Ia+Wa):(Tn-=Pn,gt.y=wa,gt.O=Kr,gt.f=Cr,gt.N=jn,gt.ea=oa,gt.W=ja),vr||(Jn-=Pn),Jn>gt.o&&(Jn=gt.o),gt.F=null,gt.J=null,It.Fa!=null&&0<It.Fa.length&&Tn<Jn&&(gt.J=Yn(It,gt,Tn,Jn-Tn),gt.F=It.mb,gt.F==null&&gt.F.length==0)){zr=Kt(It,3,"Could not decode alpha data.");break t}Tn<gt.j&&(Pn=gt.j-Tn,Tn=gt.j,a(!(1&Pn)),gt.O+=It.R*Pn,gt.N+=It.B*(Pn>>1),gt.W+=It.B*(Pn>>1),gt.F!=null&&(gt.J+=gt.width*Pn)),Tn<Jn&&(gt.O+=gt.v,gt.N+=gt.v>>1,gt.W+=gt.v>>1,gt.F!=null&&(gt.J+=gt.v),gt.ka=Tn-gt.j,gt.U=gt.va-gt.v,gt.T=Jn-Tn,zr=gt.put(gt))}pn+1!=It.Ic||vr||(o(It.sa,It.ta-on,wa,Kr+16*It.R,on),o(It.qa,It.ra-sr,Cr,jn+8*It.B,sr),o(It.Ha,It.Ia-sr,oa,ja+8*It.B,sr))}if(!zr)return Kt(Nn,6,"Output aborted.")}return 1})(re,je)),je.bc!=null&&je.bc(je),Te&=1}return Te?(re.cb=0,Te):0})(d,N)||(h=d.a)}}else h=d.a}h==0&&O.Oa!=null&&O.Oa.fd&&(h=As(O.ba))}O=h}R=O!=0?null:11>R?q.f.RGBA.eb:q.f.kb.y}else R=null;return R};var Ll=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function v(ee,xe){for(var z="",$=0;$<4;$++)z+=String.fromCharCode(ee[xe++]);return z}function j(ee,xe){return ee[xe+0]|ee[xe+1]<<8}function A(ee,xe){return(ee[xe+0]|ee[xe+1]<<8|ee[xe+2]<<16)>>>0}function M(ee,xe){return(ee[xe+0]|ee[xe+1]<<8|ee[xe+2]<<16|ee[xe+3]<<24)>>>0}new g;var b=[0],U=[0],E=[],I=new g,P=i,W=(function(ee,xe){var z={},$=0,le=!1,ie=0,we=0;if(z.frames=[],!(function(C,J){for(var Z=0;Z<4;Z++)if(C[J+Z]!="RIFF".charCodeAt(Z))return!0;return!1})(ee,xe)){for(M(ee,xe+=4),xe+=8;xe<ee.length;){var _e=v(ee,xe),Ie=M(ee,xe+=4);xe+=4;var pe=Ie+(1&Ie);switch(_e){case"VP8 ":case"VP8L":z.frames[$]===void 0&&(z.frames[$]={}),(te=z.frames[$]).src_off=le?we:xe-8,te.src_size=ie+Ie+8,$++,le&&(le=!1,ie=0,we=0);break;case"VP8X":(te=z.header={}).feature_flags=ee[xe];var Pe=xe+4;te.canvas_width=1+A(ee,Pe),Pe+=3,te.canvas_height=1+A(ee,Pe),Pe+=3;break;case"ALPH":le=!0,ie=pe+8,we=xe-8;break;case"ANIM":(te=z.header).bgcolor=M(ee,xe),Pe=xe+4,te.loop_count=j(ee,Pe),Pe+=2;break;case"ANMF":var ze,te;(te=z.frames[$]={}).offset_x=2*A(ee,xe),xe+=3,te.offset_y=2*A(ee,xe),xe+=3,te.width=1+A(ee,xe),xe+=3,te.height=1+A(ee,xe),xe+=3,te.duration=A(ee,xe),xe+=3,ze=ee[xe++],te.dispose=1&ze,te.blend=ze>>1&1}_e!="ANMF"&&(xe+=pe)}return z}})(P,0);W.response=P,W.rgbaoutput=!0,W.dataurl=!1;var X=W.header?W.header:null,H=W.frames?W.frames:null;if(X){X.loop_counter=X.loop_count,b=[X.canvas_height],U=[X.canvas_width];for(var fe=0;fe<H.length&&H[fe].blend!=0;fe++);}var he=H[0],Ee=I.WebPDecodeRGBA(P,he.src_off,he.src_size,U,b);he.rgba=Ee,he.imgwidth=U[0],he.imgheight=b[0];for(var ge=0;ge<U[0]*b[0]*4;ge++)E[ge]=Ee[ge];return this.width=U,this.height=b,this.data=E,this}(function(i){var a,r,o,c,l,m,p,g,v,j=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new g,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new m,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new m,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new A(this),a=this.internal.f2,r=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,m=this.internal.Point,p=this.internal.Rectangle,g=this.internal.Matrix,v=new j}]);var A=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=C;Object.defineProperty(this,"pdf",{get:function(){return J}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(V){Z=!!V}});var de=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return de},set:function(V){de=!!V}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(V){isNaN(V)||(ce=V)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(V){isNaN(V)||(be=V)}}),Object.defineProperty(this,"margin",{get:function(){return v.margin},set:function(V){var et;typeof V=="number"?et=[V,V,V,V]:((et=new Array(4))[0]=V[0],et[1]=V.length>=2?V[1]:et[0],et[2]=V.length>=3?V[2]:et[0],et[3]=V.length>=4?V[3]:et[1]),v.margin=et}});var Me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Me},set:function(V){Me=V}});var Fe=0;Object.defineProperty(this,"lastBreak",{get:function(){return Fe},set:function(V){Fe=V}});var We=[];Object.defineProperty(this,"pageBreaks",{get:function(){return We},set:function(V){We=V}}),Object.defineProperty(this,"ctx",{get:function(){return v},set:function(V){V instanceof j&&(v=V)}}),Object.defineProperty(this,"path",{get:function(){return v.path},set:function(V){v.path=V}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(V){De=V}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(V){var et;et=M(V),this.ctx.fillStyle=et.style,this.ctx.isFillTransparent=et.a===0,this.ctx.fillOpacity=et.a,this.pdf.setFillColor(et.r,et.g,et.b,{a:et.a}),this.pdf.setTextColor(et.r,et.g,et.b,{a:et.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(V){var et=M(V);this.ctx.strokeStyle=et.style,this.ctx.isStrokeTransparent=et.a===0,this.ctx.strokeOpacity=et.a,et.a===0?this.pdf.setDrawColor(255,255,255):(et.a,this.pdf.setDrawColor(et.r,et.g,et.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(V){["butt","round","square"].indexOf(V)!==-1&&(this.ctx.lineCap=V,this.pdf.setLineCap(V))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(V){isNaN(V)||(this.ctx.lineWidth=V,this.pdf.setLineWidth(V))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(V){["bevel","round","miter"].indexOf(V)!==-1&&(this.ctx.lineJoin=V,this.pdf.setLineJoin(V))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(V){isNaN(V)||(this.ctx.miterLimit=V,this.pdf.setMiterLimit(V))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(V){this.ctx.textBaseline=V}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(V){["right","end","center","left","start"].indexOf(V)!==-1&&(this.ctx.textAlign=V)}});var it=null,ot=null,pt=null;Object.defineProperty(this,"fontFaces",{get:function(){return pt},set:function(V){it=null,ot=null,pt=V}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(V){var et;if(this.ctx.font=V,(et=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(V))!==null){var Et=et[1];et[2];var Ct=et[3],Xe=et[4];et[5];var bt=et[6],mt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(mt==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:mt==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var Pt=(function(Se){var rt,ht,He=[],ct=Se.trim();if(ct==="")return of;if(ct in lm)return[lm[ct]];for(;ct!=="";){switch(ht=null,rt=(ct=dm(ct)).charAt(0)){case'"':case"'":ht=ty(ct.substring(1),rt);break;default:ht=ny(ct)}if(ht===null||(He.push(ht[0]),(ct=dm(ht[1]))!==""&&ct.charAt(0)!==","))return of;ct=ct.replace(/^,/,"")}return He})(bt);if(this.fontFaces){var Dt=(function(Se,rt){var ht=Se.getFontList(),He=JSON.stringify(ht);if(it===null||ot!==He){var ct=(function(Vt){var vt=[];return Object.keys(Vt).forEach(function(An){Vt[An].forEach(function(Jt){var Ut=null;switch(Jt){case"bold":Ut={family:An,weight:"bold"};break;case"italic":Ut={family:An,style:"italic"};break;case"bolditalic":Ut={family:An,weight:"bold",style:"italic"};break;case"":case"normal":Ut={family:An}}Ut!==null&&(Ut.ref={name:An,style:Jt},vt.push(Ut))})}),vt})(ht);it=(function(Vt){for(var vt={},An=0;An<Vt.length;++An){var Jt=sf(Vt[An]),Ut=Jt.family,gn=Jt.stretch,Xt=Jt.style,oe=Jt.weight;vt[Ut]=vt[Ut]||{},vt[Ut][gn]=vt[Ut][gn]||{},vt[Ut][gn][Xt]=vt[Ut][gn][Xt]||{},vt[Ut][gn][Xt][oe]=Jt}return vt})(ct.concat(rt)),ot=He}return it})(this.pdf,this.fontFaces),wt=Pt.map(function(Se){return{family:Se,stretch:"normal",weight:Ct,style:Et}}),Qt=(function(Se,rt,ht){for(var He=(ht=ht||{}).defaultFontFamily||"times",ct=Object.assign({},ey,ht.genericFontFamilies||{}),Vt=null,vt=null,An=0;An<rt.length;++An)if(ct[(Vt=sf(rt[An])).family]&&(Vt.family=ct[Vt.family]),Se.hasOwnProperty(Vt.family)){vt=Se[Vt.family];break}if(!(vt=vt||Se[He]))throw new Error("Could not find a font-family for the rule '"+cm(Vt)+"' and default family '"+He+"'.");if(vt=(function(Jt,Ut){if(Ut[Jt])return Ut[Jt];var gn=Nf[Jt],Xt=gn<=Nf.normal?-1:1,oe=om(Ut,k0,gn,Xt);if(!oe)throw new Error("Could not find a matching font-stretch value for "+Jt);return oe})(Vt.stretch,vt),vt=(function(Jt,Ut){if(Ut[Jt])return Ut[Jt];for(var gn=N0[Jt],Xt=0;Xt<gn.length;++Xt)if(Ut[gn[Xt]])return Ut[gn[Xt]];throw new Error("Could not find a matching font-style for "+Jt)})(Vt.style,vt),!(vt=(function(Jt,Ut){if(Ut[Jt])return Ut[Jt];if(Jt===400&&Ut[500])return Ut[500];if(Jt===500&&Ut[400])return Ut[400];var gn=Zx[Jt],Xt=om(Ut,A0,gn,Jt<400?-1:1);if(!Xt)throw new Error("Could not find a matching font-weight for value "+Jt);return Xt})(Vt.weight,vt)))throw new Error("Failed to resolve a font for the rule '"+cm(Vt)+"'.");return vt})(Dt,wt);this.pdf.setFont(Qt.ref.name,Qt.ref.style)}else{var zt="";(Ct==="bold"||parseInt(Ct,10)>=700||Et==="bold")&&(zt="bold"),Et==="italic"&&(zt+="italic"),zt.length===0&&(zt="normal");for(var $t="",Ae={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qe=0;qe<Pt.length;qe++){if(this.pdf.internal.getFont(Pt[qe],zt,{noFallback:!0,disableWarning:!0})!==void 0){$t=Pt[qe];break}if(zt==="bolditalic"&&this.pdf.internal.getFont(Pt[qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)$t=Pt[qe],zt="bold";else if(this.pdf.internal.getFont(Pt[qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){$t=Pt[qe],zt="normal";break}}if($t===""){for(var se=0;se<Pt.length;se++)if(Ae[Pt[se]]){$t=Ae[Pt[se]];break}}$t=$t===""?"Times":$t,this.pdf.setFont($t,zt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(V){this.ctx.globalCompositeOperation=V}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(V){this.ctx.globalAlpha=V}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(V){this.ctx.lineDashOffset=V,te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(V){this.ctx.lineDash=V,te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(V){this.ctx.ignoreClearRect=!!V}})};A.prototype.setLineDash=function(C){this.lineDash=C},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){H.call(this,"fill",!1)},A.prototype.stroke=function(){H.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(C,J){if(isNaN(C)||isNaN(J))throw fr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new m(C,J));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new m(C,J)},A.prototype.closePath=function(){var C=new m(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&ar(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){C=new m(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new m(C.x,C.y)},A.prototype.lineTo=function(C,J){if(isNaN(C)||isNaN(J))throw fr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new m(C,J));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new m(Z.x,Z.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),H.call(this,null,!0)},A.prototype.quadraticCurveTo=function(C,J,Z,de){if(isNaN(Z)||isNaN(de)||isNaN(C)||isNaN(J))throw fr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new m(Z,de)),be=this.ctx.transform.applyToPoint(new m(C,J));this.path.push({type:"qct",x1:be.x,y1:be.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new m(ce.x,ce.y)},A.prototype.bezierCurveTo=function(C,J,Z,de,ce,be){if(isNaN(ce)||isNaN(be)||isNaN(C)||isNaN(J)||isNaN(Z)||isNaN(de))throw fr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Me=this.ctx.transform.applyToPoint(new m(ce,be)),Fe=this.ctx.transform.applyToPoint(new m(C,J)),We=this.ctx.transform.applyToPoint(new m(Z,de));this.path.push({type:"bct",x1:Fe.x,y1:Fe.y,x2:We.x,y2:We.y,x:Me.x,y:Me.y}),this.ctx.lastPoint=new m(Me.x,Me.y)},A.prototype.arc=function(C,J,Z,de,ce,be){if(isNaN(C)||isNaN(J)||isNaN(Z)||isNaN(de)||isNaN(ce))throw fr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var Me=this.ctx.transform.applyToPoint(new m(C,J));C=Me.x,J=Me.y;var Fe=this.ctx.transform.applyToPoint(new m(0,Z)),We=this.ctx.transform.applyToPoint(new m(0,0));Z=Math.sqrt(Math.pow(Fe.x-We.x,2)+Math.pow(Fe.y-We.y,2))}Math.abs(ce-de)>=2*Math.PI&&(de=0,ce=2*Math.PI),this.path.push({type:"arc",x:C,y:J,radius:Z,startAngle:de,endAngle:ce,counterclockwise:be})},A.prototype.arcTo=function(C,J,Z,de,ce){throw new Error("arcTo not implemented.")},A.prototype.rect=function(C,J,Z,de){if(isNaN(C)||isNaN(J)||isNaN(Z)||isNaN(de))throw fr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,J),this.lineTo(C+Z,J),this.lineTo(C+Z,J+de),this.lineTo(C,J+de),this.lineTo(C,J),this.lineTo(C+Z,J),this.lineTo(C,J)},A.prototype.fillRect=function(C,J,Z,de){if(isNaN(C)||isNaN(J)||isNaN(Z)||isNaN(de))throw fr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,J,Z,de),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},A.prototype.strokeRect=function(C,J,Z,de){if(isNaN(C)||isNaN(J)||isNaN(Z)||isNaN(de))throw fr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");U.call(this)||(this.beginPath(),this.rect(C,J,Z,de),this.stroke())},A.prototype.clearRect=function(C,J,Z,de){if(isNaN(C)||isNaN(J)||isNaN(Z)||isNaN(de))throw fr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,J,Z,de))},A.prototype.save=function(C){C=typeof C!="boolean"||C;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var de=new j(this.ctx);this.ctxStack.push(this.ctx),this.ctx=de}},A.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(J),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var M=function(C){var J,Z,de,ce;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))J=0,Z=0,de=0,ce=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(be!==null)J=parseInt(be[1]),Z=parseInt(be[2]),de=parseInt(be[3]),ce=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)J=parseInt(be[1]),Z=parseInt(be[2]),de=parseInt(be[3]),ce=parseFloat(be[4]);else{if(ce=1,typeof C=="string"&&C.charAt(0)!=="#"){var Me=new x0(C);C=Me.ok?Me.toHex():"#000000"}C.length===4?(J=C.substring(1,2),J+=J,Z=C.substring(2,3),Z+=Z,de=C.substring(3,4),de+=de):(J=C.substring(1,3),Z=C.substring(3,5),de=C.substring(5,7)),J=parseInt(J,16),Z=parseInt(Z,16),de=parseInt(de,16)}}return{r:J,g:Z,b:de,a:ce,style:C}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},U=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};A.prototype.fillText=function(C,J,Z,de){if(isNaN(J)||isNaN(Z)||typeof C!="string")throw fr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(de=isNaN(de)?void 0:de,!b.call(this)){var ce=pe(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;$.call(this,{text:C,x:J,y:Z,scale:be,angle:ce,align:this.textAlign,maxWidth:de})}},A.prototype.strokeText=function(C,J,Z,de){if(isNaN(J)||isNaN(Z)||typeof C!="string")throw fr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!U.call(this)){de=isNaN(de)?void 0:de;var ce=pe(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;$.call(this,{text:C,x:J,y:Z,scale:be,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:de})}},A.prototype.measureText=function(C){if(typeof C!="string")throw fr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,Z=this.pdf.internal.scaleFactor,de=J.internal.getFontSize(),ce=J.getStringUnitWidth(C)*de/J.internal.scaleFactor;return new function(be){var Me=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Me}}),this}({width:ce*=Math.round(96*Z/72*1e4)/1e4})},A.prototype.scale=function(C,J){if(isNaN(C)||isNaN(J))throw fr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new g(C,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},A.prototype.rotate=function(C){if(isNaN(C))throw fr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new g(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},A.prototype.translate=function(C,J){if(isNaN(C)||isNaN(J))throw fr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new g(1,0,0,1,C,J);this.ctx.transform=this.ctx.transform.multiply(Z)},A.prototype.transform=function(C,J,Z,de,ce,be){if(isNaN(C)||isNaN(J)||isNaN(Z)||isNaN(de)||isNaN(ce)||isNaN(be))throw fr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Me=new g(C,J,Z,de,ce,be);this.ctx.transform=this.ctx.transform.multiply(Me)},A.prototype.setTransform=function(C,J,Z,de,ce,be){C=isNaN(C)?1:C,J=isNaN(J)?0:J,Z=isNaN(Z)?0:Z,de=isNaN(de)?1:de,ce=isNaN(ce)?0:ce,be=isNaN(be)?0:be,this.ctx.transform=new g(C,J,Z,de,ce,be)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(C,J,Z,de,ce,be,Me,Fe,We){var De=this.pdf.getImageProperties(C),it=1,ot=1,pt=1,V=1;de!==void 0&&Fe!==void 0&&(pt=Fe/de,V=We/ce,it=De.width/de*Fe/de,ot=De.height/ce*We/ce),be===void 0&&(be=J,Me=Z,J=0,Z=0),de!==void 0&&Fe===void 0&&(Fe=de,We=ce),de===void 0&&Fe===void 0&&(Fe=De.width,We=De.height);var et=this.ctx.transform.decompose(),Et=pe(et.rotate.shx),Ct=new g,Xe=(Ct=(Ct=(Ct=Ct.multiply(et.translate)).multiply(et.skew)).multiply(et.scale)).applyToRectangle(new p(be-J*pt,Me-Z*V,de*it,ce*ot));if(this.autoPaging){for(var bt,mt=I.call(this,Xe),Pt=[],Dt=0;Dt<mt.length;Dt+=1)Pt.indexOf(mt[Dt])===-1&&Pt.push(mt[Dt]);X(Pt);for(var wt=Pt[0],Qt=Pt[Pt.length-1],zt=wt;zt<Qt+1;zt++){this.pdf.setPage(zt);var $t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ae=zt===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],se=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Se=zt===1?0:qe+(zt-2)*se;if(this.ctx.clip_path.length!==0){var rt=this.path;bt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=W(bt,this.posX+this.margin[3],-Se+Ae+this.ctx.prevPageLastElemOffset),fe.call(this,"fill",!0),this.path=rt}var ht=JSON.parse(JSON.stringify(Xe));ht=W([ht],this.posX+this.margin[3],-Se+Ae+this.ctx.prevPageLastElemOffset)[0];var He=(zt>wt||zt<Qt)&&E.call(this);He&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$t,se,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",ht.x,ht.y,ht.w,ht.h,null,null,Et),He&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(C,"JPEG",Xe.x,Xe.y,Xe.w,Xe.h,null,null,Et)};var I=function(C,J,Z){var de=[];J=J||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":de.push(Math.floor((C.y+ce)/Z)+1);break;case"arc":de.push(Math.floor((C.y+ce-C.radius)/Z)+1),de.push(Math.floor((C.y+ce+C.radius)/Z)+1);break;case"qct":var be=Pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);de.push(Math.floor((be.y+ce)/Z)+1),de.push(Math.floor((be.y+be.h+ce)/Z)+1);break;case"bct":var Me=ze(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);de.push(Math.floor((Me.y+ce)/Z)+1),de.push(Math.floor((Me.y+Me.h+ce)/Z)+1);break;case"rect":de.push(Math.floor((C.y+ce)/Z)+1),de.push(Math.floor((C.y+C.h+ce)/Z)+1)}for(var Fe=0;Fe<de.length;Fe+=1)for(;this.pdf.internal.getNumberOfPages()<de[Fe];)P.call(this);return de},P=function(){var C=this.fillStyle,J=this.strokeStyle,Z=this.font,de=this.lineCap,ce=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=J,this.font=Z,this.lineCap=de,this.lineWidth=ce,this.lineJoin=be},W=function(C,J,Z){for(var de=0;de<C.length;de++)switch(C[de].type){case"bct":C[de].x2+=J,C[de].y2+=Z;case"qct":C[de].x1+=J,C[de].y1+=Z;default:C[de].x+=J,C[de].y+=Z}return C},X=function(C){return C.sort(function(J,Z){return J-Z})},H=function(C,J){var Z=this.fillStyle,de=this.strokeStyle,ce=this.lineCap,be=this.lineWidth,Me=Math.abs(be*this.ctx.transform.scaleX),Fe=this.lineJoin;if(this.autoPaging){for(var We,De,it=JSON.parse(JSON.stringify(this.path)),ot=JSON.parse(JSON.stringify(this.path)),pt=[],V=0;V<ot.length;V++)if(ot[V].x!==void 0)for(var et=I.call(this,ot[V]),Et=0;Et<et.length;Et+=1)pt.indexOf(et[Et])===-1&&pt.push(et[Et]);for(var Ct=0;Ct<pt.length;Ct++)for(;this.pdf.internal.getNumberOfPages()<pt[Ct];)P.call(this);X(pt);for(var Xe=pt[0],bt=pt[pt.length-1],mt=Xe;mt<bt+1;mt++){this.pdf.setPage(mt),this.fillStyle=Z,this.strokeStyle=de,this.lineCap=ce,this.lineWidth=Me,this.lineJoin=Fe;var Pt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Dt=mt===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],zt=mt===1?0:wt+(mt-2)*Qt;if(this.ctx.clip_path.length!==0){var $t=this.path;We=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=W(We,this.posX+this.margin[3],-zt+Dt+this.ctx.prevPageLastElemOffset),fe.call(this,C,!0),this.path=$t}if(De=JSON.parse(JSON.stringify(it)),this.path=W(De,this.posX+this.margin[3],-zt+Dt+this.ctx.prevPageLastElemOffset),J===!1||mt===0){var Ae=(mt>Xe||mt<bt)&&E.call(this);Ae&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pt,Qt,null).clip().discardPath()),fe.call(this,C,J),Ae&&this.pdf.restoreGraphicsState()}this.lineWidth=be}this.path=it}else this.lineWidth=Me,fe.call(this,C,J),this.lineWidth=be},fe=function(C,J){if((C!=="stroke"||J||!U.call(this))&&(C==="stroke"||J||!b.call(this))){for(var Z,de,ce=[],be=this.path,Me=0;Me<be.length;Me++){var Fe=be[Me];switch(Fe.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:Fe,deltas:[],abs:[]});break;case"lt":var We=ce.length;if(be[Me-1]&&!isNaN(be[Me-1].x)&&(Z=[Fe.x-be[Me-1].x,Fe.y-be[Me-1].y],We>0)){for(;We>=0;We--)if(ce[We-1].close!==!0&&ce[We-1].begin!==!0){ce[We-1].deltas.push(Z),ce[We-1].abs.push(Fe);break}}break;case"bct":Z=[Fe.x1-be[Me-1].x,Fe.y1-be[Me-1].y,Fe.x2-be[Me-1].x,Fe.y2-be[Me-1].y,Fe.x-be[Me-1].x,Fe.y-be[Me-1].y],ce[ce.length-1].deltas.push(Z);break;case"qct":var De=be[Me-1].x+2/3*(Fe.x1-be[Me-1].x),it=be[Me-1].y+2/3*(Fe.y1-be[Me-1].y),ot=Fe.x+2/3*(Fe.x1-Fe.x),pt=Fe.y+2/3*(Fe.y1-Fe.y),V=Fe.x,et=Fe.y;Z=[De-be[Me-1].x,it-be[Me-1].y,ot-be[Me-1].x,pt-be[Me-1].y,V-be[Me-1].x,et-be[Me-1].y],ce[ce.length-1].deltas.push(Z);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(Fe)}}de=J?null:C==="stroke"?"stroke":"fill";for(var Et=!1,Ct=0;Ct<ce.length;Ct++)if(ce[Ct].arc)for(var Xe=ce[Ct].abs,bt=0;bt<Xe.length;bt++){var mt=Xe[bt];mt.type==="arc"?ge.call(this,mt.x,mt.y,mt.radius,mt.startAngle,mt.endAngle,mt.counterclockwise,void 0,J,!Et):le.call(this,mt.x,mt.y),Et=!0}else if(ce[Ct].close===!0)this.pdf.internal.out("h"),Et=!1;else if(ce[Ct].begin!==!0){var Pt=ce[Ct].start.x,Dt=ce[Ct].start.y;ie.call(this,ce[Ct].deltas,Pt,Dt),Et=!0}de&&ee.call(this,de),J&&xe.call(this)}},he=function(C){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-Z;case"top":return C+J-Z;case"hanging":return C+J-2*Z;case"middle":return C+J/2-Z;default:return C}},Ee=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(J,Z){this.colorStops.push([J,Z])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ge=function(C,J,Z,de,ce,be,Me,Fe,We){for(var De=_e.call(this,Z,de,ce,be),it=0;it<De.length;it++){var ot=De[it];it===0&&(We?z.call(this,ot.x1+C,ot.y1+J):le.call(this,ot.x1+C,ot.y1+J)),we.call(this,C,J,ot.x2,ot.y2,ot.x3,ot.y3,ot.x4,ot.y4)}Fe?xe.call(this):ee.call(this,Me)},ee=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},xe=function(){this.pdf.clip(),this.pdf.discardPath()},z=function(C,J){this.pdf.internal.out(r(C)+" "+o(J)+" m")},$=function(C){var J;switch(C.align){case"right":case"end":J="right";break;case"center":J="center";break;default:J="left"}var Z,de,ce,be=this.pdf.getTextDimensions(C.text),Me=he.call(this,C.y),Fe=Ee.call(this,Me)-be.h,We=this.ctx.transform.applyToPoint(new m(C.x,Me));if(this.autoPaging){var De=this.ctx.transform.decompose(),it=new g;it=(it=(it=it.multiply(De.translate)).multiply(De.skew)).multiply(De.scale);for(var ot=this.ctx.transform.applyToRectangle(new p(C.x,Me,be.w,be.h)),pt=it.applyToRectangle(new p(C.x,Fe,be.w,be.h)),V=I.call(this,pt),et=[],Et=0;Et<V.length;Et+=1)et.indexOf(V[Et])===-1&&et.push(V[Et]);X(et);for(var Ct=et[0],Xe=et[et.length-1],bt=Ct;bt<Xe+1;bt++){this.pdf.setPage(bt);var mt=bt===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[2],wt=Dt-this.margin[0],Qt=this.pdf.internal.pageSize.width-this.margin[1],zt=Qt-this.margin[3],$t=bt===1?0:Pt+(bt-2)*wt;if(this.ctx.clip_path.length!==0){var Ae=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=W(Z,this.posX+this.margin[3],-1*$t+mt),fe.call(this,"fill",!0),this.path=Ae}var qe=W([JSON.parse(JSON.stringify(pt))],this.posX+this.margin[3],-$t+mt+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*C.scale),ce=this.lineWidth,this.lineWidth=ce*C.scale);var se=this.autoPaging!=="text";if(se||qe.y+qe.h<=Dt){if(se||qe.y>=mt&&qe.x<=Qt){var Se=se?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||Qt-qe.x)[0],rt=W([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-$t+mt+this.ctx.prevPageLastElemOffset)[0],ht=se&&(bt>Ct||bt<Xe)&&E.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zt,wt,null).clip().discardPath()),this.pdf.text(Se,rt.x,rt.y,{angle:C.angle,align:J,renderingMode:C.renderingMode}),ht&&this.pdf.restoreGraphicsState()}}else qe.y<Dt&&(this.ctx.prevPageLastElemOffset+=Dt-qe.y);C.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=ce)}}else C.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*C.scale),ce=this.lineWidth,this.lineWidth=ce*C.scale),this.pdf.text(C.text,We.x+this.posX,We.y+this.posY,{angle:C.angle,align:J,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=ce)},le=function(C,J,Z,de){Z=Z||0,de=de||0,this.pdf.internal.out(r(C+Z)+" "+o(J+de)+" l")},ie=function(C,J,Z){return this.pdf.lines(C,J,Z,null,null)},we=function(C,J,Z,de,ce,be,Me,Fe){this.pdf.internal.out([a(c(Z+C)),a(l(de+J)),a(c(ce+C)),a(l(be+J)),a(c(Me+C)),a(l(Fe+J)),"c"].join(" "))},_e=function(C,J,Z,de){for(var ce=2*Math.PI,be=Math.PI/2;J>Z;)J-=ce;var Me=Math.abs(Z-J);Me<ce&&de&&(Me=ce-Me);for(var Fe=[],We=de?-1:1,De=J;Me>1e-5;){var it=De+We*Math.min(Me,be);Fe.push(Ie.call(this,C,De,it)),Me-=Math.abs(it-De),De=it}return Fe},Ie=function(C,J,Z){var de=(Z-J)/2,ce=C*Math.cos(de),be=C*Math.sin(de),Me=ce,Fe=-be,We=Me*Me+Fe*Fe,De=We+Me*ce+Fe*be,it=4/3*(Math.sqrt(2*We*De)-De)/(Me*be-Fe*ce),ot=Me-it*Fe,pt=Fe+it*Me,V=ot,et=-pt,Et=de+J,Ct=Math.cos(Et),Xe=Math.sin(Et);return{x1:C*Math.cos(J),y1:C*Math.sin(J),x2:ot*Ct-pt*Xe,y2:ot*Xe+pt*Ct,x3:V*Ct-et*Xe,y3:V*Xe+et*Ct,x4:C*Math.cos(Z),y4:C*Math.sin(Z)}},pe=function(C){return 180*C/Math.PI},Pe=function(C,J,Z,de,ce,be){var Me=C+.5*(Z-C),Fe=J+.5*(de-J),We=ce+.5*(Z-ce),De=be+.5*(de-be),it=Math.min(C,ce,Me,We),ot=Math.max(C,ce,Me,We),pt=Math.min(J,be,Fe,De),V=Math.max(J,be,Fe,De);return new p(it,pt,ot-it,V-pt)},ze=function(C,J,Z,de,ce,be,Me,Fe){var We,De,it,ot,pt,V,et,Et,Ct,Xe,bt,mt,Pt,Dt,wt=Z-C,Qt=de-J,zt=ce-Z,$t=be-de,Ae=Me-ce,qe=Fe-be;for(De=0;De<41;De++)Ct=(et=(it=C+(We=De/40)*wt)+We*((pt=Z+We*zt)-it))+We*(pt+We*(ce+We*Ae-pt)-et),Xe=(Et=(ot=J+We*Qt)+We*((V=de+We*$t)-ot))+We*(V+We*(be+We*qe-V)-Et),De==0?(bt=Ct,mt=Xe,Pt=Ct,Dt=Xe):(bt=Math.min(bt,Ct),mt=Math.min(mt,Xe),Pt=Math.max(Pt,Ct),Dt=Math.max(Dt,Xe));return new p(Math.round(bt),Math.round(mt),Math.round(Pt-bt),Math.round(Dt-mt))},te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,J,Z=(C=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:J}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(Gt.API),(function(i){var a=function(m){var p,g,v,j,A,M,b,U,E,I;for(g=[],v=0,j=(m+=p="\0\0\0\0".slice(m.length%4||4)).length;j>v;v+=4)(A=(m.charCodeAt(v)<<24)+(m.charCodeAt(v+1)<<16)+(m.charCodeAt(v+2)<<8)+m.charCodeAt(v+3))!==0?(M=(A=((A=((A=((A=(A-(I=A%85))/85)-(E=A%85))/85)-(U=A%85))/85)-(b=A%85))/85)%85,g.push(M+33,b+33,U+33,E+33,I+33)):g.push(122);return(function(P,W){for(var X=W;X>0;X--)P.pop()})(g,p.length),String.fromCharCode.apply(String,g)+"~>"},r=function(m){var p,g,v,j,A,M=String,b="length",U=255,E="charCodeAt",I="slice",P="replace";for(m[I](-2),m=m[I](0,-2)[P](/\s/g,"")[P]("z","!!!!!"),v=[],j=0,A=(m+=p="uuuuu"[I](m[b]%5||5))[b];A>j;j+=5)g=52200625*(m[E](j)-33)+614125*(m[E](j+1)-33)+7225*(m[E](j+2)-33)+85*(m[E](j+3)-33)+(m[E](j+4)-33),v.push(U&g>>24,U&g>>16,U&g>>8,U&g);return(function(W,X){for(var H=X;H>0;H--)W.pop()})(v,p[b]),M.fromCharCode.apply(M,v)},o=function(m){return m.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">"},c=function(m){var p=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((m=m.replace(/\s/g,"")).indexOf(">")!==-1&&(m=m.substr(0,m.indexOf(">"))),m.length%2&&(m+="0"),p.test(m)===!1)return"";for(var g="",v=0;v<m.length;v+=2)g+=String.fromCharCode("0x"+(m[v]+m[v+1]));return g},l=function(m){for(var p=new Uint8Array(m.length),g=m.length;g--;)p[g]=m.charCodeAt(g);return(p=xf(p)).reduce(function(v,j){return v+String.fromCharCode(j)},"")};i.processDataByFilters=function(m,p){var g=0,v=m||"",j=[];for(typeof(p=p||[])=="string"&&(p=[p]),g=0;g<p.length;g+=1)switch(p[g]){case"ASCII85Decode":case"/ASCII85Decode":v=r(v),j.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":v=a(v),j.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":v=c(v),j.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":v=o(v),j.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":v=l(v),j.push("/FlateDecode");break;default:throw new Error('The filter: "'+p[g]+'" is not implemented')}return{data:v,reverseChain:j.reverse().join(" ")}}})(Gt.API),(function(i){i.loadFile=function(a,r,o){return(function(c,l,m){l=l!==!1,m=typeof m=="function"?m:function(){};var p=void 0;try{p=(function(g,v,j){var A=new XMLHttpRequest,M=0,b=function(U){var E=U.length,I=[],P=String.fromCharCode;for(M=0;M<E;M+=1)I.push(P(255&U.charCodeAt(M)));return I.join("")};if(A.open("GET",g,!v),A.overrideMimeType("text/plain; charset=x-user-defined"),v===!1&&(A.onload=function(){A.status===200?j(b(this.responseText)):j(void 0)}),A.send(null),v&&A.status===200)return b(A.responseText)})(c,l,m)}catch{}return p})(a,r,o)},i.loadImageFile=i.loadFile})(Gt.API),(function(i){function a(){return(un.html2canvas?Promise.resolve(un.html2canvas):Uu(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load html2canvas: "+p))}).then(function(p){return p.default?p.default:p})}function r(){return(un.DOMPurify?Promise.resolve(un.DOMPurify):Uu(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load dompurify: "+p))}).then(function(p){return p.default?p.default:p})}var o=function(p){var g=ar(p);return g==="undefined"?"undefined":g==="string"||p instanceof String?"string":g==="number"||p instanceof Number?"number":g==="function"||p instanceof Function?"function":p&&p.constructor===Array?"array":p&&p.nodeType===1?"element":g==="object"?"object":"unknown"},c=function(p,g){var v=document.createElement(p);for(var j in g.className&&(v.className=g.className),g.innerHTML&&g.dompurify&&(v.innerHTML=g.dompurify.sanitize(g.innerHTML)),g.style)v.style[j]=g.style[j];return v},l=function p(g,v){for(var j=g.nodeType===3?document.createTextNode(g.nodeValue):g.cloneNode(!1),A=g.firstChild;A;A=A.nextSibling)v!==!0&&A.nodeType===1&&A.nodeName==="SCRIPT"||j.appendChild(p(A,v));return g.nodeType===1&&(g.nodeName==="CANVAS"?(j.width=g.width,j.height=g.height,j.getContext("2d").drawImage(g,0,0)):g.nodeName!=="TEXTAREA"&&g.nodeName!=="SELECT"||(j.value=g.value),j.addEventListener("load",function(){j.scrollTop=g.scrollTop,j.scrollLeft=g.scrollLeft},!0)),j},m=function p(g){var v=Object.assign(p.convert(Promise.resolve()),JSON.parse(JSON.stringify(p.template))),j=p.convert(Promise.resolve(),v);return(j=j.setProgress(1,p,1,[p])).set(g)};(m.prototype=Object.create(Promise.prototype)).constructor=m,m.convert=function(p,g){return p.__proto__=g||m.prototype,p},m.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},m.prototype.from=function(p,g){return this.then(function(){switch(g=g||(function(v){switch(o(v)){case"string":return"string";case"element":return v.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(p),g){case"string":return this.then(r).then(function(v){return this.set({src:c("div",{innerHTML:p,dompurify:v})})});case"element":return this.set({src:p});case"canvas":return this.set({canvas:p});case"img":return this.set({img:p});default:return this.error("Unknown source type.")}})},m.prototype.to=function(p){switch(p){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},m.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var p={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},g=l(this.prop.src,this.opt.html2canvas.javascriptEnabled);g.tagName==="BODY"&&(p.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=c("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=c("div",{className:"html2pdf__container",style:p}),this.prop.container.appendChild(g),this.prop.container.firstChild.appendChild(c("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},m.prototype.toCanvas=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(a).then(function(g){var v=Object.assign({},this.opt.html2canvas);return delete v.onrendered,g(this.prop.container,v)}).then(function(g){(this.opt.html2canvas.onrendered||function(){})(g),this.prop.canvas=g,document.body.removeChild(this.prop.overlay)})},m.prototype.toContext2d=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(a).then(function(g){var v=this.opt.jsPDF,j=this.opt.fontFaces,A=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,M=Object.assign({async:!0,allowTaint:!0,scale:A,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete M.onrendered,v.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,v.context2d.posX=this.opt.x,v.context2d.posY=this.opt.y,v.context2d.margin=this.opt.margin,v.context2d.fontFaces=j,j)for(var b=0;b<j.length;++b){var U=j[b],E=U.src.find(function(I){return I.format==="truetype"});E&&v.addFont(E.url,U.ref.name,U.ref.style)}return M.windowHeight=M.windowHeight||0,M.windowHeight=M.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):M.windowHeight,v.context2d.save(!0),g(this.prop.container,M)}).then(function(g){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(g),this.prop.canvas=g,document.body.removeChild(this.prop.overlay)})},m.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var p=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=p})},m.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},m.prototype.output=function(p,g,v){return(v=v||"pdf").toLowerCase()==="img"||v.toLowerCase()==="image"?this.outputImg(p,g):this.outputPdf(p,g)},m.prototype.outputPdf=function(p,g){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(p,g)})},m.prototype.outputImg=function(p){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(p){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+p+'" is not supported.'}})},m.prototype.save=function(p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(p?{filename:p}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},m.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},m.prototype.set=function(p){if(o(p)!=="object")return this;var g=Object.keys(p||{}).map(function(v){if(v in m.template.prop)return function(){this.prop[v]=p[v]};switch(v){case"margin":return this.setMargin.bind(this,p.margin);case"jsPDF":return function(){return this.opt.jsPDF=p.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,p.pageSize);default:return function(){this.opt[v]=p[v]}}},this);return this.then(function(){return this.thenList(g)})},m.prototype.get=function(p,g){return this.then(function(){var v=p in m.template.prop?this.prop[p]:this.opt[p];return g?g(v):v})},m.prototype.setMargin=function(p){return this.then(function(){switch(o(p)){case"number":p=[p,p,p,p];case"array":if(p.length===2&&(p=[p[0],p[1],p[0],p[1]]),p.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=p}).then(this.setPageSize)},m.prototype.setPageSize=function(p){function g(v,j){return Math.floor(v*j/72*96)}return this.then(function(){(p=p||Gt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(p.inner={width:p.width-this.opt.margin[1]-this.opt.margin[3],height:p.height-this.opt.margin[0]-this.opt.margin[2]},p.inner.px={width:g(p.inner.width,p.k),height:g(p.inner.height,p.k)},p.inner.ratio=p.inner.height/p.inner.width),this.prop.pageSize=p})},m.prototype.setProgress=function(p,g,v,j){return p!=null&&(this.progress.val=p),g!=null&&(this.progress.state=g),v!=null&&(this.progress.n=v),j!=null&&(this.progress.stack=j),this.progress.ratio=this.progress.val/this.progress.state,this},m.prototype.updateProgress=function(p,g,v,j){return this.setProgress(p?this.progress.val+p:null,g||null,v?this.progress.n+v:null,j?this.progress.stack.concat(j):null)},m.prototype.then=function(p,g){var v=this;return this.thenCore(p,g,function(j,A){return v.updateProgress(null,null,1,[j]),Promise.prototype.then.call(this,function(M){return v.updateProgress(null,j),M}).then(j,A).then(function(M){return v.updateProgress(1),M})})},m.prototype.thenCore=function(p,g,v){v=v||Promise.prototype.then;var j=this;p&&(p=p.bind(j)),g&&(g=g.bind(j));var A=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?j:m.convert(Object.assign({},j),Promise.prototype),M=v.call(A,p,g);return m.convert(M,j.__proto__)},m.prototype.thenExternal=function(p,g){return Promise.prototype.then.call(this,p,g)},m.prototype.thenList=function(p){var g=this;return p.forEach(function(v){g=g.thenCore(v)}),g},m.prototype.catch=function(p){p&&(p=p.bind(this));var g=Promise.prototype.catch.call(this,p);return m.convert(g,this)},m.prototype.catchExternal=function(p){return Promise.prototype.catch.call(this,p)},m.prototype.error=function(p){return this.then(function(){throw new Error(p)})},m.prototype.using=m.prototype.set,m.prototype.saveAs=m.prototype.save,m.prototype.export=m.prototype.output,m.prototype.run=m.prototype.then,Gt.getPageSize=function(p,g,v){if(ar(p)==="object"){var j=p;p=j.orientation,g=j.unit||g,v=j.format||v}g=g||"mm",v=v||"a4",p=(""+(p||"P")).toLowerCase();var A,M=(""+v).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(g){case"pt":A=1;break;case"mm":A=72/25.4;break;case"cm":A=72/2.54;break;case"in":A=72;break;case"px":A=.75;break;case"pc":case"em":A=12;break;case"ex":A=6;break;default:throw"Invalid unit: "+g}var U,E=0,I=0;if(b.hasOwnProperty(M))E=b[M][1]/A,I=b[M][0]/A;else try{E=v[1],I=v[0]}catch{throw new Error("Invalid format: "+v)}if(p==="p"||p==="portrait")p="p",I>E&&(U=I,I=E,E=U);else{if(p!=="l"&&p!=="landscape")throw"Invalid orientation: "+p;p="l",E>I&&(U=I,I=E,E=U)}return{width:I,height:E,unit:g,k:A,orientation:p}},i.html=function(p,g){(g=g||{}).callback=g.callback||function(){},g.html2canvas=g.html2canvas||{},g.html2canvas.canvas=g.html2canvas.canvas||this.canvas,g.jsPDF=g.jsPDF||this,g.fontFaces=g.fontFaces?g.fontFaces.map(sf):null;var v=new m(g);return g.worker?v:v.from(p).doCallback()}})(Gt.API),Gt.API.addJS=function(i){return fm=i,this.internal.events.subscribe("postPutResources",function(){Dd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Dd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),um=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+fm+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Dd!==void 0&&um!==void 0&&this.internal.out("/Names <</JavaScript "+Dd+" 0 R>>")}),this},(function(i){var a;i.events.push(["postPutResources",function(){var r=this,o=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var c=r.outline.render().split(/\r\n/),l=0;l<c.length;l++){var m=c[l],p=o.exec(m);if(p!=null){var g=p[1];r.internal.newObjectDeferredBegin(g,!1)}r.internal.write(m)}if(this.outline.createNamedDestinations){var v=this.internal.pages.length,j=[];for(l=0;l<v;l++){var A=r.internal.newObject();j.push(A);var M=r.internal.getPageInfo(l+1);r.internal.write("<< /D["+M.objId+" 0 R /XYZ null null null]>> endobj")}var b=r.internal.newObject();for(r.internal.write("<< /Names [ "),l=0;l<j.length;l++)r.internal.write("(page_"+(l+1)+")"+j[l]+" 0 R");r.internal.write(" ] >>","endobj"),a=r.internal.newObject(),r.internal.write("<< /Dests "+b+" 0 R"),r.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+a+" 0 R"))}]),i.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(o,c,l){var m={title:c,options:l,children:[]};return o==null&&(o=this.root),o.children.push(m),m},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(o){o.id=r.internal.newObjectDeferred();for(var c=0;c<o.children.length;c++)this.genIds_r(o.children[c])},r.outline.renderRoot=function(o){this.objStart(o),this.line("/Type /Outlines"),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1]))),this.line("/Count "+this.count_r({count:0},o)),this.objEnd()},r.outline.renderItems=function(o){for(var c=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<o.children.length;l++){var m=o.children[l];this.objStart(m),this.line("/Title "+this.makeString(m.title)),this.line("/Parent "+this.makeRef(o)),l>0&&this.line("/Prev "+this.makeRef(o.children[l-1])),l<o.children.length-1&&this.line("/Next "+this.makeRef(o.children[l+1])),m.children.length>0&&(this.line("/First "+this.makeRef(m.children[0])),this.line("/Last "+this.makeRef(m.children[m.children.length-1])));var p=this.count=this.count_r({count:0},m);if(p>0&&this.line("/Count "+p),m.options&&m.options.pageNumber){var g=r.internal.getPageInfo(m.options.pageNumber);this.line("/Dest ["+g.objId+" 0 R /XYZ 0 "+c(0)+" 0]")}this.objEnd()}for(var v=0;v<o.children.length;v++)this.renderItems(o.children[v])},r.outline.line=function(o){this.ctx.val+=o+`\r
`},r.outline.makeRef=function(o){return o.id+" 0 R"},r.outline.makeString=function(o){return"("+r.internal.pdfEscape(o)+")"},r.outline.objStart=function(o){this.ctx.val+=`\r
`+o.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(o,c){for(var l=0;l<c.children.length;l++)o.count++,this.count_r(o,c.children[l]);return o.count}}])})(Gt.API),(function(i){var a=[192,193,194,195,196,197,198,199];i.processJPEG=function(r,o,c,l,m,p){var g,v=this.decode.DCT_DECODE,j=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=m||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,g=(function(A){for(var M,b=256*A.charCodeAt(4)+A.charCodeAt(5),U=A.length,E={width:0,height:0,numcomponents:1},I=4;I<U;I+=2){if(I+=b,a.indexOf(A.charCodeAt(I+1))!==-1){M=256*A.charCodeAt(I+5)+A.charCodeAt(I+6),E={width:256*A.charCodeAt(I+7)+A.charCodeAt(I+8),height:M,numcomponents:A.charCodeAt(I+9)};break}b=256*A.charCodeAt(I+2)+A.charCodeAt(I+3)}return E})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),g.numcomponents){case 1:p=this.color_spaces.DEVICE_GRAY;break;case 4:p=this.color_spaces.DEVICE_CMYK;break;case 3:p=this.color_spaces.DEVICE_RGB}j={data:r,width:g.width,height:g.height,colorSpace:p,bitsPerComponent:8,filter:v,index:o,alias:c}}return j}})(Gt.API),Gt.API.processPNG=function(i,a,r,o){if(this.__addimage__.isArrayBuffer(i)&&(i=new Uint8Array(i)),this.__addimage__.isArrayBufferView(i)){var c,l=Bx(i,{checkCrc:!0}),m=l.width,p=l.height,g=l.channels,v=l.palette,j=l.depth;c=v&&g===1?(function(ge){for(var ee=ge.width,xe=ge.height,z=ge.data,$=ge.palette,le=ge.depth,ie=!1,we=[],_e=[],Ie=void 0,pe=!1,Pe=0,ze=0;ze<$.length;ze++){var te=gp($[ze],4),C=te[0],J=te[1],Z=te[2],de=te[3];we.push(C,J,Z),de!=null&&(de===0?(Pe++,_e.length<1&&_e.push(ze)):de<255&&(pe=!0))}if(pe||Pe>1){ie=!0,_e=void 0;var ce=ee*xe;Ie=new Uint8Array(ce);for(var be=new DataView(z.buffer),Me=0;Me<ce;Me++){var Fe=lf(be,Me,le),We=gp($[Fe],4)[3];Ie[Me]=We}}else Pe===0&&(_e=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ie?8:void 0,colorBytes:z,alphaBytes:Ie,needSMask:ie,palette:we,mask:_e}})(l):g===2||g===4?(function(ge){for(var ee=ge.data,xe=ge.width,z=ge.height,$=ge.channels,le=ge.depth,ie=$===2?"DeviceGray":"DeviceRGB",we=$-1,_e=xe*z,Ie=we,pe=_e*Ie,Pe=1*_e,ze=Math.ceil(pe*le/8),te=Math.ceil(Pe*le/8),C=new Uint8Array(ze),J=new Uint8Array(te),Z=new DataView(ee.buffer),de=new DataView(C.buffer),ce=new DataView(J.buffer),be=!1,Me=0;Me<_e;Me++){for(var Fe=Me*$,We=0;We<Ie;We++)wm(de,lf(Z,Fe+We,le),Me*Ie+We,le);var De=lf(Z,Fe+Ie,le);De<(1<<le)-1&&(be=!0),wm(ce,De,1*Me,le)}return{colorSpace:ie,colorsPerPixel:we,sMaskBitsPerComponent:be?le:void 0,colorBytes:C,alphaBytes:J,needSMask:be}})(l):(function(ge){var ee=ge.data,xe=ge.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:xe,colorsPerPixel:xe==="DeviceGray"?1:3,colorBytes:ee instanceof Uint16Array?(function(z){for(var $=z.length,le=new Uint8Array(2*$),ie=new DataView(le.buffer,le.byteOffset,le.byteLength),we=0;we<$;we++)ie.setUint16(2*we,z[we],!1);return le})(ee):ee,needSMask:!1}})(l);var A,M,b,U=c,E=U.colorSpace,I=U.colorsPerPixel,P=U.sMaskBitsPerComponent,W=U.colorBytes,X=U.alphaBytes,H=U.needSMask,fe=U.palette,he=U.mask,Ee=null;return o!==Gt.API.image_compression.NONE&&typeof xf=="function"?(Ee=(function(ge){var ee;switch(ge){case Gt.API.image_compression.FAST:ee=11;break;case Gt.API.image_compression.MEDIUM:ee=13;break;case Gt.API.image_compression.SLOW:ee=14;break;default:ee=12}return ee})(o),A=this.decode.FLATE_DECODE,M="/Predictor ".concat(Ee," /Colors ").concat(I," /BitsPerComponent ").concat(j," /Columns ").concat(m),i=gm(W,Math.ceil(m*I*j/8),I,j,o),H&&(b=gm(X,Math.ceil(m*P/8),1,P,o))):(A=void 0,M=void 0,i=W,H&&(b=X)),(this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i))&&(i=this.__addimage__.arrayBufferToBinaryString(i)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:r,data:i,index:a,filter:A,decodeParameters:M,transparency:he,palette:fe,sMask:b,predictor:Ee,width:m,height:p,bitsPerComponent:j,sMaskBitsPerComponent:P,colorSpace:E}}},(function(i){i.processGIF89A=function(a,r,o,c){var l=new sy(a),m=l.width,p=l.height,g=[];l.decodeAndBlitFrameRGBA(0,g);var v={data:g,width:m,height:p},j=new cf(100).encode(v,100);return i.processJPEG.call(this,j,r,o,c)},i.processGIF87A=i.processGIF89A})(Gt.API),co.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var a=0;a<i;a++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[a]={red:c,green:o,blue:r,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},co.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,a=this.width*this.height*4;this.data=new Uint8Array(a),this[i]()}catch(r){fr.log("bit decode error:"+r)}},co.prototype.bit1=function(){var i,a=Math.ceil(this.width/8),r=a%4;for(i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,c=0;c<a;c++)for(var l=this.datav.getUint8(this.pos++,!0),m=o*this.width*4+8*c*4,p=0;p<8&&8*c+p<this.width;p++){var g=this.palette[l>>7-p&1];this.data[m+4*p]=g.blue,this.data[m+4*p+1]=g.green,this.data[m+4*p+2]=g.red,this.data[m+4*p+3]=255}r!==0&&(this.pos+=4-r)}},co.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),a=i%4,r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,c=0;c<i;c++){var l=this.datav.getUint8(this.pos++,!0),m=o*this.width*4+2*c*4,p=l>>4,g=15&l,v=this.palette[p];if(this.data[m]=v.blue,this.data[m+1]=v.green,this.data[m+2]=v.red,this.data[m+3]=255,2*c+1>=this.width)break;v=this.palette[g],this.data[m+4]=v.blue,this.data[m+4+1]=v.green,this.data[m+4+2]=v.red,this.data[m+4+3]=255}a!==0&&(this.pos+=4-a)}},co.prototype.bit8=function(){for(var i=this.width%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,o=0;o<this.width;o++){var c=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+4*o;if(c<this.palette.length){var m=this.palette[c];this.data[l]=m.red,this.data[l+1]=m.green,this.data[l+2]=m.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}i!==0&&(this.pos+=4-i)}},co.prototype.bit15=function(){for(var i=this.width%3,a=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,c=0;c<this.width;c++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var m=(l&a)/a*255|0,p=(l>>5&a)/a*255|0,g=(l>>10&a)/a*255|0,v=l>>15?255:0,j=o*this.width*4+4*c;this.data[j]=g,this.data[j+1]=p,this.data[j+2]=m,this.data[j+3]=v}this.pos+=i}},co.prototype.bit16=function(){for(var i=this.width%3,a=parseInt("11111",2),r=parseInt("111111",2),o=this.height-1;o>=0;o--){for(var c=this.bottom_up?o:this.height-1-o,l=0;l<this.width;l++){var m=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(m&a)/a*255|0,g=(m>>5&r)/r*255|0,v=(m>>11)/a*255|0,j=c*this.width*4+4*l;this.data[j]=v,this.data[j+1]=g,this.data[j+2]=p,this.data[j+3]=255}this.pos+=i}},co.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),m=a*this.width*4+4*r;this.data[m]=l,this.data[m+1]=c,this.data[m+2]=o,this.data[m+3]=255}this.pos+=this.width%4}},co.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var a=this.bottom_up?i:this.height-1-i,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0),p=a*this.width*4+4*r;this.data[p]=l,this.data[p+1]=c,this.data[p+2]=o,this.data[p+3]=m}},co.prototype.getData=function(){return this.data},(function(i){i.processBMP=function(a,r,o,c){var l=new co(a,!1),m=l.width,p=l.height,g={data:l.getData(),width:m,height:p},v=new cf(100).encode(g,100);return i.processJPEG.call(this,v,r,o,c)}})(Gt.API),Sm.prototype.getData=function(){return this.data},(function(i){i.processWEBP=function(a,r,o,c){var l=new Sm(a),m=l.width,p=l.height,g={data:l.getData(),width:m,height:p},v=new cf(100).encode(g,100);return i.processJPEG.call(this,v,r,o,c)}})(Gt.API),Gt.API.processRGBA=function(i,a,r){for(var o=i.data,c=o.length,l=new Uint8Array(c/4*3),m=new Uint8Array(c/4),p=0,g=0,v=0;v<c;v+=4){var j=o[v],A=o[v+1],M=o[v+2],b=o[v+3];l[p++]=j,l[p++]=A,l[p++]=M,m[g++]=b}var U=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(m),data:U,index:a,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},Gt.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},hc=Gt.API,Fd=hc.getCharWidthsArray=function(i,a){var r,o,c=(a=a||{}).font||this.internal.getFont(),l=a.fontSize||this.internal.getFontSize(),m=a.charSpace||this.internal.getCharSpace(),p=a.widths?a.widths:c.metadata.Unicode.widths,g=p.fof?p.fof:1,v=a.kerning?a.kerning:c.metadata.Unicode.kerning,j=v.fof?v.fof:1,A=a.doKerning!==!1,M=0,b=i.length,U=0,E=p[0]||g,I=[];for(r=0;r<b;r++)o=i.charCodeAt(r),typeof c.metadata.widthOfString=="function"?I.push((c.metadata.widthOfGlyph(c.metadata.characterToGlyph(o))+m*(1e3/l)||0)/1e3):(M=A&&ar(v[o])==="object"&&!isNaN(parseInt(v[o][U],10))?v[o][U]/j:0,I.push((p[o]||E)/g+M)),U=o;return I},hm=hc.getStringUnitWidth=function(i,a){var r=(a=a||{}).fontSize||this.internal.getFontSize(),o=a.font||this.internal.getFont(),c=a.charSpace||this.internal.getCharSpace();return hc.processArabic&&(i=hc.processArabic(i)),typeof o.metadata.widthOfString=="function"?o.metadata.widthOfString(i,r,c)/r:Fd.apply(this,arguments).reduce(function(l,m){return l+m},0)},pm=function(i,a,r,o){for(var c=[],l=0,m=i.length,p=0;l!==m&&p+a[l]<r;)p+=a[l],l++;c.push(i.slice(0,l));var g=l;for(p=0;l!==m;)p+a[l]>o&&(c.push(i.slice(g,l)),p=0,g=l),p+=a[l],l++;return g!==l&&c.push(i.slice(g,l)),c},mm=function(i,a,r){r||(r={});var o,c,l,m,p,g,v,j=[],A=[j],M=r.textIndent||0,b=0,U=0,E=i.split(" "),I=Fd.apply(this,[" ",r])[0];if(g=r.lineIndent===-1?E[0].length+2:r.lineIndent||0){var P=Array(g).join(" "),W=[];E.map(function(H){(H=H.split(/\s*\n/)).length>1?W=W.concat(H.map(function(fe,he){return(he&&fe.length?`
`:"")+fe})):W.push(H[0])}),E=W,g=hm.apply(this,[P,r])}for(l=0,m=E.length;l<m;l++){var X=0;if(o=E[l],g&&o[0]==`
`&&(o=o.substr(1),X=1),M+b+(U=(c=Fd.apply(this,[o,r])).reduce(function(H,fe){return H+fe},0))>a||X){if(U>a){for(p=pm.apply(this,[o,c,a-(M+b),a]),j.push(p.shift()),j=[p.pop()];p.length;)A.push([p.shift()]);U=c.slice(o.length-(j[0]?j[0].length:0)).reduce(function(H,fe){return H+fe},0)}else j=[o];A.push(j),M=U+g,b=I}else j.push(o),M+=b+U,b=I}return v=g?function(H,fe){return(fe?P:"")+H.join(" ")}:function(H){return H.join(" ")},A.map(v)},hc.splitTextToSize=function(i,a,r){var o,c=(r=r||{}).fontSize||this.internal.getFontSize(),l=(function(j){if(j.widths&&j.kerning)return{widths:j.widths,kerning:j.kerning};var A=this.internal.getFont(j.fontName,j.fontStyle),M="Unicode";return A.metadata[M]?{widths:A.metadata[M].widths||{0:1},kerning:A.metadata[M].kerning||{}}:{font:A.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);o=Array.isArray(i)?i:String(i).split(/\r?\n/);var m=1*this.internal.scaleFactor*a/c;l.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/c:0,l.lineIndent=r.lineIndent;var p,g,v=[];for(p=0,g=o.length;p<g;p++)v=v.concat(mm.apply(this,[o[p],m,l]));return v},(function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var a="0123456789abcdef",r="klmnopqrstuvwxyz",o={},c={},l=0;l<16;l++)o[r[l]]=a[l],c[a[l]]=r[l];var m=function(M){return"0x"+parseInt(M,10).toString(16)},p=i.__fontmetrics__.compress=function(M){var b,U,E,I,P=["{"];for(var W in M){if(b=M[W],isNaN(parseInt(W,10))?U="'"+W+"'":(W=parseInt(W,10),U=(U=m(W).slice(2)).slice(0,-1)+c[U.slice(-1)]),typeof b=="number")b<0?(E=m(b).slice(3),I="-"):(E=m(b).slice(2),I=""),E=I+E.slice(0,-1)+c[E.slice(-1)];else{if(ar(b)!=="object")throw new Error("Don't know what to do with value type "+ar(b)+".");E=p(b)}P.push(U+E)}return P.push("}"),P.join("")},g=i.__fontmetrics__.uncompress=function(M){if(typeof M!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,U,E,I,P={},W=1,X=P,H=[],fe="",he="",Ee=M.length-1,ge=1;ge<Ee;ge+=1)(I=M[ge])=="'"?b?(E=b.join(""),b=void 0):b=[]:b?b.push(I):I=="{"?(H.push([X,E]),X={},E=void 0):I=="}"?((U=H.pop())[0][U[1]]=X,E=void 0,X=U[0]):I=="-"?W=-1:E===void 0?o.hasOwnProperty(I)?(fe+=o[I],E=parseInt(fe,16)*W,W=1,fe=""):fe+=I:o.hasOwnProperty(I)?(he+=o[I],X[E]=parseInt(he,16)*W,W=1,E=void 0,he=""):he+=I;return P},v={codePages:["WinAnsiEncoding"],WinAnsiEncoding:g("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},j={Unicode:{Courier:v,"Courier-Bold":v,"Courier-BoldOblique":v,"Courier-Oblique":v,Helvetica:v,"Helvetica-Bold":v,"Helvetica-BoldOblique":v,"Helvetica-Oblique":v,"Times-Roman":v,"Times-Bold":v,"Times-BoldItalic":v,"Times-Italic":v}},A={Unicode:{"Courier-Oblique":g("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":g("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":g("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:g("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":g("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":g("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:g("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:g("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":g("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:g("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":g("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":g("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":g("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":g("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(M){var b=M.font,U=A.Unicode[b.postScriptName];U&&(b.metadata.Unicode={},b.metadata.Unicode.widths=U.widths,b.metadata.Unicode.kerning=U.kerning);var E=j.Unicode[b.postScriptName];E&&(b.metadata.Unicode.encoding=E,b.encoding=E.codePages[0])}])})(Gt.API),(function(i){var a=function(r){for(var o=r.length,c=new Uint8Array(o),l=0;l<o;l++)c[l]=r.charCodeAt(l);return c};i.API.events.push(["addFont",function(r){var o=void 0,c=r.font,l=r.instance;if(!c.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+c.postScriptName+"').");if(typeof(o=l.existsFileInVFS(c.postScriptName)===!1?l.loadFile(c.postScriptName):l.getFileFromVFS(c.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+c.postScriptName+"').");(function(m,p){p=/^\x00\x01\x00\x00/.test(p)?a(p):a(Od(p)),m.metadata=i.API.TTFFont.open(p),m.metadata.Unicode=m.metadata.Unicode||{encoding:{},kerning:{},widths:[]},m.metadata.glyIdsUsed=[0]})(c,o)}}])})(Gt),Gt.API.addSvgAsImage=function(i,a,r,o,c,l,m,p){if(isNaN(a)||isNaN(r))throw fr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(c))throw fr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=o,g.height=c;var v=g.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,g.width,g.height);var j={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return(un.canvg?Promise.resolve(un.canvg):Uu(()=>import("./index.es-CtoQSHHv.js"),[])).catch(function(M){return Promise.reject(new Error("Could not load canvg: "+M))}).then(function(M){return M.default?M.default:M}).then(function(M){return M.fromString(v,i,j)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(M){return M.render(j)}).then(function(){A.addImage(g.toDataURL("image/jpeg",1),a,r,o,c,m,p)})},Gt.API.putTotalPages=function(i){var a,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(a=new RegExp(i,"g"),r=this.internal.getNumberOfPages()):(a=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var o=1;o<=this.internal.getNumberOfPages();o++)for(var c=0;c<this.internal.pages[o].length;c++)this.internal.pages[o][c]=this.internal.pages[o][c].replace(a,r);return this},Gt.API.viewerPreferences=function(i,a){var r;i=i||{},a=a||!1;var o,c,l,m={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},p=Object.keys(m),g=[],v=0,j=0,A=0;function M(U,E){var I,P=!1;for(I=0;I<U.length;I+=1)U[I]===E&&(P=!0);return P}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(m)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,i==="reset"||a===!0){var b=p.length;for(A=0;A<b;A+=1)r[p[A]].value=r[p[A]].defaultValue,r[p[A]].explicitSet=!1}if(ar(i)==="object"){for(c in i)if(l=i[c],M(p,c)&&l!==void 0){if(r[c].type==="boolean"&&typeof l=="boolean")r[c].value=l;else if(r[c].type==="name"&&M(r[c].valueSet,l))r[c].value=l;else if(r[c].type==="integer"&&Number.isInteger(l))r[c].value=l;else if(r[c].type==="array"){for(v=0;v<l.length;v+=1)if(o=!0,l[v].length===1&&typeof l[v][0]=="number")g.push(String(l[v]-1));else if(l[v].length>1){for(j=0;j<l[v].length;j+=1)typeof l[v][j]!="number"&&(o=!1);o===!0&&g.push([l[v][0]-1,l[v][1]-1].join(" "))}r[c].value="["+g.join(" ")+"]"}else r[c].value=r[c].defaultValue;r[c].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var U,E=[];for(U in r)r[U].explicitSet===!0&&(r[U].type==="name"?E.push("/"+U+" /"+r[U].value):E.push("/"+U+" "+r[U].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(i){var a=function(){var o='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',c=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(o)),m=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),p=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),g=unescape(encodeURIComponent("</x:xmpmeta>")),v=l.length+m.length+p.length+c.length+g.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+v+" >>"),this.internal.write("stream"),this.internal.write(c+l+m+p+g),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(o,c){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:o,namespaceuri:c||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",a)),this}})(Gt.API),(function(i){var a=i.API,r=a.pdfEscape16=function(l,m){for(var p,g=m.metadata.Unicode.widths,v=["","0","00","000","0000"],j=[""],A=0,M=l.length;A<M;++A){if(p=m.metadata.characterToGlyph(l.charCodeAt(A)),m.metadata.glyIdsUsed.push(p),m.metadata.toUnicode[p]=l.charCodeAt(A),g.indexOf(p)==-1&&(g.push(p),g.push([parseInt(m.metadata.widthOfGlyph(p),10)])),p=="0")return j.join("");p=p.toString(16),j.push(v[4-p.length],p)}return j.join("")},o=function(l){var m,p,g,v,j,A,M;for(j=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,g=[],A=0,M=(p=Object.keys(l).sort(function(b,U){return b-U})).length;A<M;A++)m=p[A],g.length>=100&&(j+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar`,g=[]),l[m]!==void 0&&l[m]!==null&&typeof l[m].toString=="function"&&(v=("0000"+l[m].toString(16)).slice(-4),m=("0000"+(+m).toString(16)).slice(-4),g.push("<"+m+"><"+v+">"));return g.length&&(j+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar
`),j+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};a.events.push(["putFont",function(l){(function(m){var p=m.font,g=m.out,v=m.newObject,j=m.putStream;if(p.metadata instanceof i.API.TTFFont&&p.encoding==="Identity-H"){for(var A=p.metadata.Unicode.widths,M=p.metadata.subset.encode(p.metadata.glyIdsUsed,1),b="",U=0;U<M.length;U++)b+=String.fromCharCode(M[U]);var E=v();j({data:b,addLength1:!0,objectId:E}),g("endobj");var I=v();j({data:o(p.metadata.toUnicode),addLength1:!0,objectId:I}),g("endobj");var P=v();g("<<"),g("/Type /FontDescriptor"),g("/FontName /"+mc(p.fontName)),g("/FontFile2 "+E+" 0 R"),g("/FontBBox "+i.API.PDFObject.convert(p.metadata.bbox)),g("/Flags "+p.metadata.flags),g("/StemV "+p.metadata.stemV),g("/ItalicAngle "+p.metadata.italicAngle),g("/Ascent "+p.metadata.ascender),g("/Descent "+p.metadata.decender),g("/CapHeight "+p.metadata.capHeight),g(">>"),g("endobj");var W=v();g("<<"),g("/Type /Font"),g("/BaseFont /"+mc(p.fontName)),g("/FontDescriptor "+P+" 0 R"),g("/W "+i.API.PDFObject.convert(A)),g("/CIDToGIDMap /Identity"),g("/DW 1000"),g("/Subtype /CIDFontType2"),g("/CIDSystemInfo"),g("<<"),g("/Supplement 0"),g("/Registry (Adobe)"),g("/Ordering ("+p.encoding+")"),g(">>"),g(">>"),g("endobj"),p.objectNumber=v(),g("<<"),g("/Type /Font"),g("/Subtype /Type0"),g("/ToUnicode "+I+" 0 R"),g("/BaseFont /"+mc(p.fontName)),g("/Encoding /"+p.encoding),g("/DescendantFonts ["+W+" 0 R]"),g(">>"),g("endobj"),p.isAlreadyPutted=!0}})(l)}]),a.events.push(["putFont",function(l){(function(m){var p=m.font,g=m.out,v=m.newObject,j=m.putStream;if(p.metadata instanceof i.API.TTFFont&&p.encoding==="WinAnsiEncoding"){for(var A=p.metadata.rawData,M="",b=0;b<A.length;b++)M+=String.fromCharCode(A[b]);var U=v();j({data:M,addLength1:!0,objectId:U}),g("endobj");var E=v();j({data:o(p.metadata.toUnicode),addLength1:!0,objectId:E}),g("endobj");var I=v();g("<<"),g("/Descent "+p.metadata.decender),g("/CapHeight "+p.metadata.capHeight),g("/StemV "+p.metadata.stemV),g("/Type /FontDescriptor"),g("/FontFile2 "+U+" 0 R"),g("/Flags 96"),g("/FontBBox "+i.API.PDFObject.convert(p.metadata.bbox)),g("/FontName /"+mc(p.fontName)),g("/ItalicAngle "+p.metadata.italicAngle),g("/Ascent "+p.metadata.ascender),g(">>"),g("endobj"),p.objectNumber=v();for(var P=0;P<p.metadata.hmtx.widths.length;P++)p.metadata.hmtx.widths[P]=parseInt(p.metadata.hmtx.widths[P]*(1e3/p.metadata.head.unitsPerEm));g("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+mc(p.fontName)+"/FontDescriptor "+I+" 0 R/Encoding/"+p.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(p.metadata.hmtx.widths)+">>"),g("endobj"),p.isAlreadyPutted=!0}})(l)}]);var c=function(l){var m,p=l.text||"",g=l.x,v=l.y,j=l.options||{},A=l.mutex||{},M=A.pdfEscape,b=A.activeFontKey,U=A.fonts,E=b,I="",P=0,W="",X=U[E].encoding;if(U[E].encoding!=="Identity-H")return{text:p,x:g,y:v,options:j,mutex:A};for(W=p,E=b,Array.isArray(p)&&(W=p[0]),P=0;P<W.length;P+=1)U[E].metadata.hasOwnProperty("cmap")&&(m=U[E].metadata.cmap.unicode.codeMap[W[P].charCodeAt(0)]),m||W[P].charCodeAt(0)<256&&U[E].metadata.hasOwnProperty("Unicode")?I+=W[P]:I+="";var H="";return parseInt(E.slice(1))<14||X==="WinAnsiEncoding"?H=M(I,E).split("").map(function(fe){return fe.charCodeAt(0).toString(16)}).join(""):X==="Identity-H"&&(H=r(I,U[E])),A.isHex=!0,{text:H,x:g,y:v,options:j,mutex:A}};a.events.push(["postProcessText",function(l){var m=l.text||"",p=[],g={text:m,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(m)){var v=0;for(v=0;v<m.length;v+=1)Array.isArray(m[v])&&m[v].length===3?p.push([c(Object.assign({},g,{text:m[v][0]})).text,m[v][1],m[v][2]]):p.push(c(Object.assign({},g,{text:m[v]})).text);l.text=p}else l.text=c(Object.assign({},g,{text:m})).text}])})(Gt),(function(i){var a=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(r){return a.call(this),this.internal.vFS[r]!==void 0},i.addFileToVFS=function(r,o){return a.call(this),this.internal.vFS[r]=o,this},i.getFileFromVFS=function(r){return a.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Gt.API),(function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(o){var c,l,m,p,g,v,j,A=a,M=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],U={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},I=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],P=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),W=!1,X=0;this.__bidiEngine__={};var H=function(z){var $=z.charCodeAt(),le=$>>8,ie=E[le];return ie!==void 0?A[256*ie+(255&$)]:le===252||le===253?"AL":P.test(le)?"L":le===8?"R":"N"},fe=function(z){for(var $,le=0;le<z.length;le++){if(($=H(z.charAt(le)))==="L")return!1;if($==="R")return!0}return!1},he=function(z,$,le,ie){var we,_e,Ie,pe,Pe=$[ie];switch(Pe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":W=!1;break;case"N":case"AN":break;case"EN":W&&(Pe="AN");break;case"AL":W=!0,Pe="R";break;case"WS":case"BN":Pe="N";break;case"CS":ie<1||ie+1>=$.length||(we=le[ie-1])!=="EN"&&we!=="AN"||(_e=$[ie+1])!=="EN"&&_e!=="AN"?Pe="N":W&&(_e="AN"),Pe=_e===we?_e:"N";break;case"ES":Pe=(we=ie>0?le[ie-1]:"B")==="EN"&&ie+1<$.length&&$[ie+1]==="EN"?"EN":"N";break;case"ET":if(ie>0&&le[ie-1]==="EN"){Pe="EN";break}if(W){Pe="N";break}for(Ie=ie+1,pe=$.length;Ie<pe&&$[Ie]==="ET";)Ie++;Pe=Ie<pe&&$[Ie]==="EN"?"EN":"N";break;case"NSM":if(m&&!p){for(pe=$.length,Ie=ie+1;Ie<pe&&$[Ie]==="NSM";)Ie++;if(Ie<pe){var ze=z[ie],te=ze>=1425&&ze<=2303||ze===64286;if(we=$[Ie],te&&(we==="R"||we==="AL")){Pe="R";break}}}Pe=ie<1||(we=$[ie-1])==="B"?"N":le[ie-1];break;case"B":W=!1,c=!0,Pe=X;break;case"S":l=!0,Pe="N"}return Pe},Ee=function(z,$,le){var ie=z.split("");return le&&ge(ie,le,{hiLevel:X}),ie.reverse(),$&&$.reverse(),ie.join("")},ge=function(z,$,le){var ie,we,_e,Ie,pe,Pe=-1,ze=z.length,te=0,C=[],J=X?b:M,Z=[];for(W=!1,c=!1,l=!1,we=0;we<ze;we++)Z[we]=H(z[we]);for(_e=0;_e<ze;_e++){if(pe=te,C[_e]=he(z,Z,C,_e),ie=240&(te=J[pe][U[C[_e]]]),te&=15,$[_e]=Ie=J[te][5],ie>0)if(ie===16){for(we=Pe;we<_e;we++)$[we]=1;Pe=-1}else Pe=-1;if(J[te][6])Pe===-1&&(Pe=_e);else if(Pe>-1){for(we=Pe;we<_e;we++)$[we]=Ie;Pe=-1}Z[_e]==="B"&&($[_e]=0),le.hiLevel|=Ie}l&&(function(de,ce,be){for(var Me=0;Me<be;Me++)if(de[Me]==="S"){ce[Me]=X;for(var Fe=Me-1;Fe>=0&&de[Fe]==="WS";Fe--)ce[Fe]=X}})(Z,$,ze)},ee=function(z,$,le,ie,we){if(!(we.hiLevel<z)){if(z===1&&X===1&&!c)return $.reverse(),void(le&&le.reverse());for(var _e,Ie,pe,Pe,ze=$.length,te=0;te<ze;){if(ie[te]>=z){for(pe=te+1;pe<ze&&ie[pe]>=z;)pe++;for(Pe=te,Ie=pe-1;Pe<Ie;Pe++,Ie--)_e=$[Pe],$[Pe]=$[Ie],$[Ie]=_e,le&&(_e=le[Pe],le[Pe]=le[Ie],le[Ie]=_e);te=pe}te++}}},xe=function(z,$,le){var ie=z.split(""),we={hiLevel:X};return le||(le=[]),ge(ie,le,we),(function(_e,Ie,pe){if(pe.hiLevel!==0&&j)for(var Pe,ze=0;ze<_e.length;ze++)Ie[ze]===1&&(Pe=I.indexOf(_e[ze]))>=0&&(_e[ze]=I[Pe+1])})(ie,le,we),ee(2,ie,$,le,we),ee(1,ie,$,le,we),ie.join("")};return this.__bidiEngine__.doBidiReorder=function(z,$,le){if((function(we,_e){if(_e)for(var Ie=0;Ie<we.length;Ie++)_e[Ie]=Ie;p===void 0&&(p=fe(we)),v===void 0&&(v=fe(we))})(z,$),m||!g||v)if(m&&g&&p^v)X=p?1:0,z=Ee(z,$,le);else if(!m&&g&&v)X=p?1:0,z=xe(z,$,le),z=Ee(z,$);else if(!m||p||g||v){if(m&&!g&&p^v)z=Ee(z,$),p?(X=0,z=xe(z,$,le)):(X=1,z=xe(z,$,le),z=Ee(z,$));else if(m&&p&&!g&&v)X=1,z=xe(z,$,le),z=Ee(z,$);else if(!m&&!g&&p^v){var ie=j;p?(X=1,z=xe(z,$,le),X=0,j=!1,z=xe(z,$,le),j=ie):(X=0,z=xe(z,$,le),z=Ee(z,$),X=1,j=!1,z=xe(z,$,le),j=ie,z=Ee(z,$))}}else X=0,z=xe(z,$,le);else X=p?1:0,z=xe(z,$,le);return z},this.__bidiEngine__.setOptions=function(z){z&&(m=z.isInputVisual,g=z.isOutputVisual,p=z.isInputRtl,v=z.isOutputRtl,j=z.isSymmetricSwapping)},this.__bidiEngine__.setOptions(o),this.__bidiEngine__};var a=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(o){var c=o.text;o.x,o.y;var l=o.options||{};o.mutex,l.lang;var m=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,r.setOptions(l),Object.prototype.toString.call(c)==="[object Array]"){var p=0;for(m=[],p=0;p<c.length;p+=1)Object.prototype.toString.call(c[p])==="[object Array]"?m.push([r.doBidiReorder(c[p][0]),c[p][1],c[p][2]]):m.push([r.doBidiReorder(c[p])]);o.text=m}else o.text=r.doBidiReorder(c);r.setOptions({isInputVisual:!0})}])})(Gt),Gt.API.TTFFont=(function(){function i(a){var r;if(this.rawData=a,r=this.contents=new yl(a),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new wy(this),this.registerTTF()}return i.open=function(a){return new i(a)},i.prototype.parse=function(){return this.directory=new oy(this.contents),this.head=new cy(this),this.name=new py(this),this.cmap=new P0(this),this.toUnicode={},this.hhea=new dy(this),this.maxp=new my(this),this.hmtx=new gy(this),this.post=new fy(this),this.os2=new uy(this),this.loca=new by(this),this.glyf=new xy(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var a,r,o,c,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var m,p,g,v;for(v=[],m=0,p=(g=this.bbox).length;m<p;m++)a=g[m],v.push(Math.round(a*this.scaleFactor));return v}).call(this),this.stemV=0,this.post.exists?(o=255&(c=this.post.italic_angle),32768&(r=c>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+o)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(a){var r;return((r=this.cmap.unicode)!=null?r.codeMap[a]:void 0)||0},i.prototype.widthOfGlyph=function(a){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(a).advance*r},i.prototype.widthOfString=function(a,r,o){var c,l,m,p;for(m=0,l=0,p=(a=""+a).length;0<=p?l<p:l>p;l=0<=p?++l:--l)c=a.charCodeAt(l),m+=this.widthOfGlyph(this.characterToGlyph(c))+o*(1e3/r)||0;return m*(r/1e3)},i.prototype.lineHeight=function(a,r){var o;return r==null&&(r=!1),o=r?this.lineGap:0,(this.ascender+o-this.decender)/1e3*a},i})();var po,yl=(function(){function i(a){this.data=a??[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(a){return this.data[this.pos++]=a},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(a){return this.writeByte(a>>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},i.prototype.readInt32=function(){var a;return(a=this.readUInt32())>=2147483648?a-4294967296:a},i.prototype.writeInt32=function(a){return a<0&&(a+=4294967296),this.writeUInt32(a)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(a){return this.writeByte(a>>8&255),this.writeByte(255&a)},i.prototype.readInt16=function(){var a;return(a=this.readUInt16())>=32768?a-65536:a},i.prototype.writeInt16=function(a){return a<0&&(a+=65536),this.writeUInt16(a)},i.prototype.readString=function(a){var r,o;for(o=[],r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)o[r]=String.fromCharCode(this.readByte());return o.join("")},i.prototype.writeString=function(a){var r,o,c;for(c=[],r=0,o=a.length;0<=o?r<o:r>o;r=0<=o?++r:--r)c.push(this.writeByte(a.charCodeAt(r)));return c},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(a){return this.writeInt16(a)},i.prototype.readLongLong=function(){var a,r,o,c,l,m,p,g;return a=this.readByte(),r=this.readByte(),o=this.readByte(),c=this.readByte(),l=this.readByte(),m=this.readByte(),p=this.readByte(),g=this.readByte(),128&a?-1*(72057594037927940*(255^a)+281474976710656*(255^r)+1099511627776*(255^o)+4294967296*(255^c)+16777216*(255^l)+65536*(255^m)+256*(255^p)+(255^g)+1):72057594037927940*a+281474976710656*r+1099511627776*o+4294967296*c+16777216*l+65536*m+256*p+g},i.prototype.writeLongLong=function(a){var r,o;return r=Math.floor(a/4294967296),o=4294967295&a,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(a){return this.writeInt32(a)},i.prototype.read=function(a){var r,o;for(r=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)r.push(this.readByte());return r},i.prototype.write=function(a){var r,o,c,l;for(l=[],o=0,c=a.length;o<c;o++)r=a[o],l.push(this.writeByte(r));return l},i})(),oy=(function(){var i;function a(r){var o,c,l;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},c=0,l=this.tableCount;0<=l?c<l:c>l;c=0<=l?++c:--c)o={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[o.tag]=o}return a.prototype.encode=function(r){var o,c,l,m,p,g,v,j,A,M,b,U,E;for(E in b=Object.keys(r).length,g=Math.log(2),A=16*Math.floor(Math.log(b)/g),m=Math.floor(A/g),j=16*b-A,(c=new yl).writeInt(this.scalarType),c.writeShort(b),c.writeShort(A),c.writeShort(m),c.writeShort(j),l=16*b,v=c.pos+l,p=null,U=[],r)for(M=r[E],c.writeString(E),c.writeInt(i(M)),c.writeInt(v),c.writeInt(M.length),U=U.concat(M),E==="head"&&(p=v),v+=M.length;v%4;)U.push(0),v++;return c.write(U),o=2981146554-i(c.data),c.pos=p+8,c.writeUInt32(o),c.data},i=function(r){var o,c,l,m;for(r=L0.call(r);r.length%4;)r.push(0);for(l=new yl(r),c=0,o=0,m=r.length;o<m;o=o+=4)c+=l.readUInt32();return 4294967295&c},a})(),ly={}.hasOwnProperty,Fo=function(i,a){for(var r in a)ly.call(a,r)&&(i[r]=a[r]);function o(){this.constructor=i}return o.prototype=a.prototype,i.prototype=new o,i.__super__=a.prototype,i};po=(function(){function i(a){var r;this.file=a,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i})();var cy=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Fo(i,po),i.prototype.tag="head",i.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.revision=a.readInt(),this.checkSumAdjustment=a.readInt(),this.magicNumber=a.readInt(),this.flags=a.readShort(),this.unitsPerEm=a.readShort(),this.created=a.readLongLong(),this.modified=a.readLongLong(),this.xMin=a.readShort(),this.yMin=a.readShort(),this.xMax=a.readShort(),this.yMax=a.readShort(),this.macStyle=a.readShort(),this.lowestRecPPEM=a.readShort(),this.fontDirectionHint=a.readShort(),this.indexToLocFormat=a.readShort(),this.glyphDataFormat=a.readShort()},i.prototype.encode=function(a){var r;return(r=new yl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(a),r.writeShort(this.glyphDataFormat),r.data},i})(),Nm=(function(){function i(a,r){var o,c,l,m,p,g,v,j,A,M,b,U,E,I,P,W,X;switch(this.platformID=a.readUInt16(),this.encodingID=a.readShort(),this.offset=r+a.readInt(),A=a.pos,a.pos=this.offset,this.format=a.readUInt16(),this.length=a.readUInt16(),this.language=a.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(g=0;g<256;++g)this.codeMap[g]=a.readByte();break;case 4:for(b=a.readUInt16(),M=b/2,a.pos+=6,l=(function(){var H,fe;for(fe=[],g=H=0;0<=M?H<M:H>M;g=0<=M?++H:--H)fe.push(a.readUInt16());return fe})(),a.pos+=2,E=(function(){var H,fe;for(fe=[],g=H=0;0<=M?H<M:H>M;g=0<=M?++H:--H)fe.push(a.readUInt16());return fe})(),v=(function(){var H,fe;for(fe=[],g=H=0;0<=M?H<M:H>M;g=0<=M?++H:--H)fe.push(a.readUInt16());return fe})(),j=(function(){var H,fe;for(fe=[],g=H=0;0<=M?H<M:H>M;g=0<=M?++H:--H)fe.push(a.readUInt16());return fe})(),c=(this.length-a.pos+this.offset)/2,p=(function(){var H,fe;for(fe=[],g=H=0;0<=c?H<c:H>c;g=0<=c?++H:--H)fe.push(a.readUInt16());return fe})(),g=P=0,X=l.length;P<X;g=++P)for(I=l[g],o=W=U=E[g];U<=I?W<=I:W>=I;o=U<=I?++W:--W)j[g]===0?m=o+v[g]:(m=p[j[g]/2+(o-U)-(M-g)]||0)!==0&&(m+=v[g]),this.codeMap[o]=65535&m}a.pos=A}return i.encode=function(a,r){var o,c,l,m,p,g,v,j,A,M,b,U,E,I,P,W,X,H,fe,he,Ee,ge,ee,xe,z,$,le,ie,we,_e,Ie,pe,Pe,ze,te,C,J,Z,de,ce,be,Me,Fe,We,De,it;switch(ie=new yl,m=Object.keys(a).sort(function(ot,pt){return ot-pt}),r){case"macroman":for(E=0,I=(function(){var ot=[];for(U=0;U<256;++U)ot.push(0);return ot})(),W={0:0},l={},we=0,Pe=m.length;we<Pe;we++)W[Fe=a[c=m[we]]]==null&&(W[Fe]=++E),l[c]={old:a[c],new:W[a[c]]},I[c]=W[a[c]];return ie.writeUInt16(1),ie.writeUInt16(0),ie.writeUInt32(12),ie.writeUInt16(0),ie.writeUInt16(262),ie.writeUInt16(0),ie.write(I),{charMap:l,subtable:ie.data,maxGlyphID:E+1};case"unicode":for($=[],A=[],X=0,W={},o={},P=v=null,_e=0,ze=m.length;_e<ze;_e++)W[fe=a[c=m[_e]]]==null&&(W[fe]=++X),o[c]={old:fe,new:W[fe]},p=W[fe]-c,P!=null&&p===v||(P&&A.push(P),$.push(c),v=p),P=c;for(P&&A.push(P),A.push(65535),$.push(65535),xe=2*(ee=$.length),ge=2*Math.pow(Math.log(ee)/Math.LN2,2),M=Math.log(ge/2)/Math.LN2,Ee=2*ee-ge,g=[],he=[],b=[],U=Ie=0,te=$.length;Ie<te;U=++Ie){if(z=$[U],j=A[U],z===65535){g.push(0),he.push(0);break}if(z-(le=o[z].new)>=32768)for(g.push(0),he.push(2*(b.length+ee-U)),c=pe=z;z<=j?pe<=j:pe>=j;c=z<=j?++pe:--pe)b.push(o[c].new);else g.push(le-z),he.push(0)}for(ie.writeUInt16(3),ie.writeUInt16(1),ie.writeUInt32(12),ie.writeUInt16(4),ie.writeUInt16(16+8*ee+2*b.length),ie.writeUInt16(0),ie.writeUInt16(xe),ie.writeUInt16(ge),ie.writeUInt16(M),ie.writeUInt16(Ee),be=0,C=A.length;be<C;be++)c=A[be],ie.writeUInt16(c);for(ie.writeUInt16(0),Me=0,J=$.length;Me<J;Me++)c=$[Me],ie.writeUInt16(c);for(We=0,Z=g.length;We<Z;We++)p=g[We],ie.writeUInt16(p);for(De=0,de=he.length;De<de;De++)H=he[De],ie.writeUInt16(H);for(it=0,ce=b.length;it<ce;it++)E=b[it],ie.writeUInt16(E);return{charMap:o,subtable:ie.data,maxGlyphID:X+1}}},i})(),P0=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Fo(i,po),i.prototype.tag="cmap",i.prototype.parse=function(a){var r,o,c;for(a.pos=this.offset,this.version=a.readUInt16(),c=a.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=c?o<c:o>c;o=0<=c?++o:--o)r=new Nm(a,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},i.encode=function(a,r){var o,c;return r==null&&(r="macroman"),o=Nm.encode(a,r),(c=new yl).writeUInt16(0),c.writeUInt16(1),o.table=c.data.concat(o.subtable),o},i})(),dy=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Fo(i,po),i.prototype.tag="hhea",i.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.ascender=a.readShort(),this.decender=a.readShort(),this.lineGap=a.readShort(),this.advanceWidthMax=a.readShort(),this.minLeftSideBearing=a.readShort(),this.minRightSideBearing=a.readShort(),this.xMaxExtent=a.readShort(),this.caretSlopeRise=a.readShort(),this.caretSlopeRun=a.readShort(),this.caretOffset=a.readShort(),a.pos+=8,this.metricDataFormat=a.readShort(),this.numberOfMetrics=a.readUInt16()},i})(),uy=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Fo(i,po),i.prototype.tag="OS/2",i.prototype.parse=function(a){if(a.pos=this.offset,this.version=a.readUInt16(),this.averageCharWidth=a.readShort(),this.weightClass=a.readUInt16(),this.widthClass=a.readUInt16(),this.type=a.readShort(),this.ySubscriptXSize=a.readShort(),this.ySubscriptYSize=a.readShort(),this.ySubscriptXOffset=a.readShort(),this.ySubscriptYOffset=a.readShort(),this.ySuperscriptXSize=a.readShort(),this.ySuperscriptYSize=a.readShort(),this.ySuperscriptXOffset=a.readShort(),this.ySuperscriptYOffset=a.readShort(),this.yStrikeoutSize=a.readShort(),this.yStrikeoutPosition=a.readShort(),this.familyClass=a.readShort(),this.panose=(function(){var r,o;for(o=[],r=0;r<10;++r)o.push(a.readByte());return o})(),this.charRange=(function(){var r,o;for(o=[],r=0;r<4;++r)o.push(a.readInt());return o})(),this.vendorID=a.readString(4),this.selection=a.readShort(),this.firstCharIndex=a.readShort(),this.lastCharIndex=a.readShort(),this.version>0&&(this.ascent=a.readShort(),this.descent=a.readShort(),this.lineGap=a.readShort(),this.winAscent=a.readShort(),this.winDescent=a.readShort(),this.codePageRange=(function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(a.readInt());return o})(),this.version>1))return this.xHeight=a.readShort(),this.capHeight=a.readShort(),this.defaultChar=a.readShort(),this.breakChar=a.readShort(),this.maxContext=a.readShort()},i})(),fy=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Fo(i,po),i.prototype.tag="post",i.prototype.parse=function(a){var r,o,c;switch(a.pos=this.offset,this.format=a.readInt(),this.italicAngle=a.readInt(),this.underlinePosition=a.readShort(),this.underlineThickness=a.readShort(),this.isFixedPitch=a.readInt(),this.minMemType42=a.readInt(),this.maxMemType42=a.readInt(),this.minMemType1=a.readInt(),this.maxMemType1=a.readInt(),this.format){case 65536:case 196608:break;case 131072:var l;for(o=a.readUInt16(),this.glyphNameIndex=[],l=0;0<=o?l<o:l>o;l=0<=o?++l:--l)this.glyphNameIndex.push(a.readUInt16());for(this.names=[],c=[];a.pos<this.offset+this.length;)r=a.readByte(),c.push(this.names.push(a.readString(r)));return c;case 151552:return o=a.readUInt16(),this.offsets=a.read(o);case 262144:return this.map=(function(){var m,p,g;for(g=[],l=m=0,p=this.file.maxp.numGlyphs;0<=p?m<p:m>p;l=0<=p?++m:--m)g.push(a.readUInt32());return g}).call(this)}},i})(),hy=function(i,a){this.raw=i,this.length=i.length,this.platformID=a.platformID,this.encodingID=a.encodingID,this.languageID=a.languageID},py=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Fo(i,po),i.prototype.tag="name",i.prototype.parse=function(a){var r,o,c,l,m,p,g,v,j,A,M;for(a.pos=this.offset,a.readShort(),r=a.readShort(),p=a.readShort(),o=[],l=0;0<=r?l<r:l>r;l=0<=r?++l:--l)o.push({platformID:a.readShort(),encodingID:a.readShort(),languageID:a.readShort(),nameID:a.readShort(),length:a.readShort(),offset:this.offset+p+a.readShort()});for(g={},l=j=0,A=o.length;j<A;l=++j)c=o[l],a.pos=c.offset,v=a.readString(c.length),m=new hy(v,c),g[M=c.nameID]==null&&(g[M]=[]),g[c.nameID].push(m);this.strings=g,this.copyright=g[0],this.fontFamily=g[1],this.fontSubfamily=g[2],this.uniqueSubfamily=g[3],this.fontName=g[4],this.version=g[5];try{this.postscriptName=g[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=g[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=g[7],this.manufacturer=g[8],this.designer=g[9],this.description=g[10],this.vendorUrl=g[11],this.designerUrl=g[12],this.license=g[13],this.licenseUrl=g[14],this.preferredFamily=g[15],this.preferredSubfamily=g[17],this.compatibleFull=g[18],this.sampleText=g[19]},i})(),my=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Fo(i,po),i.prototype.tag="maxp",i.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.numGlyphs=a.readUInt16(),this.maxPoints=a.readUInt16(),this.maxContours=a.readUInt16(),this.maxCompositePoints=a.readUInt16(),this.maxComponentContours=a.readUInt16(),this.maxZones=a.readUInt16(),this.maxTwilightPoints=a.readUInt16(),this.maxStorage=a.readUInt16(),this.maxFunctionDefs=a.readUInt16(),this.maxInstructionDefs=a.readUInt16(),this.maxStackElements=a.readUInt16(),this.maxSizeOfInstructions=a.readUInt16(),this.maxComponentElements=a.readUInt16(),this.maxComponentDepth=a.readUInt16()},i})(),gy=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Fo(i,po),i.prototype.tag="hmtx",i.prototype.parse=function(a){var r,o,c,l,m,p,g;for(a.pos=this.offset,this.metrics=[],r=0,p=this.file.hhea.numberOfMetrics;0<=p?r<p:r>p;r=0<=p?++r:--r)this.metrics.push({advance:a.readUInt16(),lsb:a.readInt16()});for(c=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var v,j;for(j=[],r=v=0;0<=c?v<c:v>c;r=0<=c?++v:--v)j.push(a.readInt16());return j})(),this.widths=(function(){var v,j,A,M;for(M=[],v=0,j=(A=this.metrics).length;v<j;v++)l=A[v],M.push(l.advance);return M}).call(this),o=this.widths[this.widths.length-1],g=[],r=m=0;0<=c?m<c:m>c;r=0<=c?++m:--m)g.push(this.widths.push(o));return g},i.prototype.forGlyph=function(a){return a in this.metrics?this.metrics[a]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[a-this.metrics.length]}},i})(),L0=[].slice,xy=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Fo(i,po),i.prototype.tag="glyf",i.prototype.parse=function(){return this.cache={}},i.prototype.glyphFor=function(a){var r,o,c,l,m,p,g,v,j,A;return a in this.cache?this.cache[a]:(l=this.file.loca,r=this.file.contents,o=l.indexOf(a),(c=l.lengthOf(a))===0?this.cache[a]=null:(r.pos=this.offset+o,m=(p=new yl(r.read(c))).readShort(),v=p.readShort(),A=p.readShort(),g=p.readShort(),j=p.readShort(),this.cache[a]=m===-1?new vy(p,v,A,g,j):new yy(p,m,v,A,g,j),this.cache[a]))},i.prototype.encode=function(a,r,o){var c,l,m,p,g;for(m=[],l=[],p=0,g=r.length;p<g;p++)c=a[r[p]],l.push(m.length),c&&(m=m.concat(c.encode(o)));return l.push(m.length),{table:m,offsets:l}},i})(),yy=(function(){function i(a,r,o,c,l,m){this.raw=a,this.numberOfContours=r,this.xMin=o,this.yMin=c,this.xMax=l,this.yMax=m,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i})(),vy=(function(){function i(a,r,o,c,l){var m,p;for(this.raw=a,this.xMin=r,this.yMin=o,this.xMax=c,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],m=this.raw;p=m.readShort(),this.glyphOffsets.push(m.pos),this.glyphIDs.push(m.readUInt16()),32&p;)m.pos+=1&p?4:2,128&p?m.pos+=8:64&p?m.pos+=4:8&p&&(m.pos+=2)}return i.prototype.encode=function(){var a,r,o;for(r=new yl(L0.call(this.raw.data)),a=0,o=this.glyphIDs.length;a<o;++a)r.pos=this.glyphOffsets[a];return r.data},i})(),by=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Fo(i,po),i.prototype.tag="loca",i.prototype.parse=function(a){var r,o;return a.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var c,l;for(l=[],o=0,c=this.length;o<c;o+=2)l.push(2*a.readUInt16());return l}).call(this):(function(){var c,l;for(l=[],o=0,c=this.length;o<c;o+=4)l.push(a.readUInt32());return l}).call(this)},i.prototype.indexOf=function(a){return this.offsets[a]},i.prototype.lengthOf=function(a){return this.offsets[a+1]-this.offsets[a]},i.prototype.encode=function(a,r){for(var o=new Uint32Array(this.offsets.length),c=0,l=0,m=0;m<o.length;++m)if(o[m]=c,l<r.length&&r[l]==m){++l,o[m]=c;var p=this.offsets[m],g=this.offsets[m+1]-p;g>0&&(c+=g)}for(var v=new Array(4*o.length),j=0;j<o.length;++j)v[4*j+3]=255&o[j],v[4*j+2]=(65280&o[j])>>8,v[4*j+1]=(16711680&o[j])>>16,v[4*j]=(4278190080&o[j])>>24;return v},i})(),wy=(function(){function i(a){this.font=a,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var a,r,o,c,l;for(r in c=this.font.cmap.tables[0].codeMap,a={},l=this.subset)o=l[r],a[r]=c[o];return a},i.prototype.glyphsFor=function(a){var r,o,c,l,m,p,g;for(c={},m=0,p=a.length;m<p;m++)c[l=a[m]]=this.font.glyf.glyphFor(l);for(l in r=[],c)(o=c[l])!=null&&o.compound&&r.push.apply(r,o.glyphIDs);if(r.length>0)for(l in g=this.glyphsFor(r))o=g[l],c[l]=o;return c},i.prototype.encode=function(a,r){var o,c,l,m,p,g,v,j,A,M,b,U,E,I,P;for(c in o=P0.encode(this.generateCmap(),"unicode"),m=this.glyphsFor(a),b={0:0},P=o.charMap)b[(g=P[c]).old]=g.new;for(U in M=o.maxGlyphID,m)U in b||(b[U]=M++);return j=(function(W){var X,H;for(X in H={},W)H[W[X]]=X;return H})(b),A=Object.keys(j).sort(function(W,X){return W-X}),E=(function(){var W,X,H;for(H=[],W=0,X=A.length;W<X;W++)p=A[W],H.push(j[p]);return H})(),l=this.font.glyf.encode(m,E,b),v=this.font.loca.encode(l.offsets,E),I={cmap:this.font.cmap.raw(),glyf:l.table,loca:v,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(I["OS/2"]=this.font.os2.raw()),this.font.directory.encode(I)},i})();Gt.API.PDFObject=(function(){var i;function a(){}return i=function(r,o){return(Array(o+1).join("0")+r).slice(-o)},a.convert=function(r){var o,c,l,m;if(Array.isArray(r))return"["+(function(){var p,g,v;for(v=[],p=0,g=r.length;p<g;p++)o=r[p],v.push(a.convert(o));return v})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+i(r.getUTCFullYear(),4)+i(r.getUTCMonth(),2)+i(r.getUTCDate(),2)+i(r.getUTCHours(),2)+i(r.getUTCMinutes(),2)+i(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(c in l=["<<"],r)m=r[c],l.push("/"+c+" "+a.convert(m));return l.push(">>"),l.join(`
`)}return""+r},a})();function jy(){try{const i=localStorage.getItem("userLocale");if(i)return i;const a=navigator.language||navigator.userLanguage;if(a)return a}catch(i){console.error("Error getting user locale:",i)}return"en-US"}function Pr(i,a={}){try{const r=jy(),o={minimumFractionDigits:0,maximumFractionDigits:2,...a};return new Intl.NumberFormat(r,o).format(i)}catch(r){return console.error("Error formatting number:",r),String(i||0)}}function Sy(){return[{value:"en-US",label:"English (United States)"},{value:"en-IN",label:"English (India)"},{value:"en-GB",label:"English (United Kingdom)"},{value:"en-AU",label:"English (Australia)"},{value:"en-CA",label:"English (Canada)"},{value:"fr-FR",label:"French (France)"},{value:"de-DE",label:"German (Germany)"},{value:"es-ES",label:"Spanish (Spain)"},{value:"es-MX",label:"Spanish (Mexico)"},{value:"it-IT",label:"Italian (Italy)"},{value:"pt-BR",label:"Portuguese (Brazil)"},{value:"pt-PT",label:"Portuguese (Portugal)"},{value:"nl-NL",label:"Dutch (Netherlands)"},{value:"ru-RU",label:"Russian (Russia)"},{value:"ja-JP",label:"Japanese (Japan)"},{value:"ko-KR",label:"Korean (Korea)"},{value:"zh-CN",label:"Chinese (Simplified)"},{value:"zh-TW",label:"Chinese (Traditional)"},{value:"ar-SA",label:"Arabic (Saudi Arabia)"},{value:"hi-IN",label:"Hindi (India)"}]}function Ny(){const{members:i,admins:a,invoices:r,payments:o,recentPayments:c,paymentHistory:l,communicationLog:m,paymentMethods:p,metrics:g,reminderRules:v,automationEnabled:j,setAutomationEnabled:A,reminderTemplates:M,organizationInfo:b,fetchAdmins:U,fetchInvoices:E,fetchPayments:I,fetchMembers:P,selectedMember:W,setSelectedMember:X,addMember:H,updateMember:fe,deleteMember:he,addInvoice:Ee,updateInvoice:ge,deleteInvoice:ee,addCommunication:xe,updatePaymentMethod:z,updateReminderRule:$,updateReminderTemplate:le,updateOrganizationInfo:ie,userLocale:we,updateUserLocale:_e,addAdminUser:Ie,updateAdminUser:pe,deleteAdminUser:Pe,resetAllData:ze,addPayment:te,reminderLogs:C,fetchReminderLogs:J,donations:Z,fetchDonations:de,addDonation:ce,deleteDonation:be,loading:Me}=Qd(),Fe=sessionStorage.getItem("adminRole")||"Viewer";let We=Fe;Fe==="Owner"?We="Admin":Fe==="Finance Admin"&&(We="Finance");const De=We==="Admin",it=We==="Owner",ot=We==="Viewer",pt=We==="Admin"||We==="Finance",V=De||it,et={Admin:"Admin Portal",Finance:"Finance Portal",Staff:"Staff Portal",Viewer:"Viewer Portal"},Et={Admin:"Full administration access",Finance:"Finance operations and reporting",Staff:"Member management and reporting",Viewer:"Read-only access to view data"},Ct=et[We]||"Admin Portal",Xe=Et[We]||"Administration",bt=[{id:"members",label:"Members",icon:"fa-users",items:[{id:"members",label:"Members List",roles:["Admin","Finance","Staff","Viewer"]},{id:"member-detail",label:"Member Details",roles:["Admin","Finance","Staff","Viewer"]},{id:"invoice-builder",label:"Subscriptions",roles:["Admin","Finance"]}]},{id:"finance",label:"Finance",icon:"fa-dollar-sign",items:[{id:"invoices",label:"Invoices",roles:["Admin","Finance"]},{id:"payments",label:"Payments",roles:["Admin","Finance"]},{id:"donations",label:"Donations",roles:["Admin","Finance"]}]},{id:"communication",label:"Communication",icon:"fa-comments",items:[{id:"automation",label:"Reminders",roles:["Admin","Finance"]},{id:"communications",label:"Reminder Logs",roles:["Admin","Finance","Staff","Viewer"]}]},{id:"reports",label:"Reports",icon:"fa-chart-bar",items:[{id:"reports",label:"Financial Reports",roles:["Admin","Finance","Staff","Viewer"]},{id:"export-reports",label:"Export Reports",roles:["Admin","Finance"]}]},{id:"settings",label:"Settings",icon:"fa-cog",items:[{id:"settings",label:"Users",roles:["Admin"]},{id:"roles",label:"Roles",roles:["Admin"]},{id:"org-settings",label:"Organization Settings",roles:["Admin","Finance"]}]}],mt=[{id:"dashboard",label:"Dashboard"},...bt.flatMap(u=>u.items)],[Pt,Dt]=Tm(),[wt,Qt]=Q.useState(()=>{const u=Pt.get("section");return u&&mt.find(B=>B.id===u)?u:mt[0].id}),[zt,$t]=Q.useState("Invoices"),[Ae,qe]=Q.useState(()=>{const u={};return bt.forEach(k=>{u[k.id]=!1}),u}),[se,Se]=Q.useState(!1),[rt,ht]=Q.useState(!1),[He,ct]=Q.useState(null),[Vt,vt]=Q.useState(null),[An,Jt]=Q.useState("success"),[Ut,gn]=Q.useState(null),[Xt,oe]=Q.useState(!1),[xt,pa]=Q.useState({isOpen:!1,message:"",onConfirm:null,onCancel:null,confirmButtonText:"Confirm"}),[ln,jr]=Q.useState({name:"",email:"",phone:"",status:"Active",balance:"250",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"}),[nn,St]=Q.useState({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),[rn,ir]=Q.useState(null),[ta,Ka]=Q.useState(!1),zn=(u,k,B={})=>{let F="";switch(u){case"name":k.trim()?k.trim().length<2&&(F="Name must be at least 2 characters."):F="Name is required.";break;case"email":k.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k.trim())||(F="Please enter a valid email address."):F="Email is required.";break;case"phone":(!k||k.trim()==="")&&(F="WhatsApp number is required.");break;case"nextDue":{k?isNaN(new Date(k).getTime())&&(F="Please select a valid start date."):F="Start date is required.";break}case"lastPayment":{k&&isNaN(new Date(k).getTime())&&(F="Please select a valid end date.");break}}return F},hr=()=>{const u=He?["name","email","phone"]:["name","email","phone","nextDue","lastPayment"];St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1});for(const k of u){const B=zn(k,ln[k]);if(B)return St(F=>({...F,[k]:!0})),ir(k),Ue(B,"error"),setTimeout(()=>{const F=document.querySelector("form.form-grid");if(!F)return;const T=u.indexOf(k);let K=null;T===0?K=F.querySelector('input[type="text"][required]'):T===1?K=F.querySelector('input[type="email"]'):T===2?K=F.querySelector('input[type="tel"]'):T===3?K=F.querySelectorAll('input[type="date"]')[0]:T===4&&(K=F.querySelectorAll('input[type="date"]')[1]),K&&(K.focus(),K.scrollIntoView({behavior:"smooth",block:"center"}))},100),!1}return St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),ir(null),!0},$n=(u,k)=>{let B=k;if(u==="phone")B=k;else if(u==="balance")B=k.replace(/\D/g,"");else if(u==="subscriptionType"){k==="Yearly + Janaza Fund"?(B=k,jr(F=>({...F,subscriptionType:k,balance:"500"}))):(B=k,jr(F=>({...F,subscriptionType:k,balance:"250"})));return}jr(F=>({...F,[u]:B})),zn(u,B,u==="password"?{}:{})};ln.name.trim()&&ln.email.trim();const[vs,Rs]=Q.useState({name:"",email:"",password:""}),Qa=()=>new Date().toLocaleDateString("en-US",{month:"short",year:"numeric"}),[Lt,Dn]=Q.useState({memberId:"",period:Qa(),amount:"250",invoiceType:"Lifetime",due:"",notes:""}),Ra=()=>{const k=`INV-${new Date().getFullYear()}-`,F=(r||[]).map(K=>K.id).filter(Boolean).filter(K=>K.startsWith(k)).reduce((K,Y)=>{const Ne=Y.split("-")[2]||"",Qe=parseInt(Ne,10);return isNaN(Qe)?K:Math.max(K,Qe)},0),T=String(F+1).padStart(3,"0");return`${k}${T}`},Oa=Q.useMemo(()=>Ra(),[r]),[Wn,Kn]=Q.useState({donorName:!1,amount:!1,method:!1,date:!1,reference:!1,screenshot:!1}),[Qn,Or]=Q.useState(null),[Os,Fi]=Q.useState(!1),[ut,xn]=Q.useState({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),[ls,Xa]=Q.useState(null),[_r,ka]=Q.useState(null),[Za,cs]=Q.useState(b),[Bs,na]=Q.useState(!1),[Aa,Xn]=Q.useState({name:"",email:"",password:"",role:"Viewer",status:"Active"}),[pi,To]=Q.useState({subject:"Payment Reminder - Outstanding Balance",htmlTemplate:`<div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
  <h2 style="color: #1a1a1a; border-bottom: 2px solid #5a31ea; padding-bottom: 10px;">
    Payment Reminder - Outstanding Balance
  </h2>
  <p>Dear {{member_name}},</p>
  <p>This is a friendly reminder about your outstanding subscription payments.</p>
  <div style="background: #f9fafb; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <p><strong>Member ID:</strong> {{member_id}}</p>
    <p><strong>Email:</strong> {{member_email}}</p>
    <p><strong>Total Outstanding:</strong> <span style="color: #ef4444; font-size: 18px; font-weight: bold;">\${{total_due}}</span></p>
  </div>
                            <h3 style="color: #1a1a1a;">Outstanding Invoices ({{invoice_count}}):</h3>
  <ul style="list-style: none; padding: 0;">
    {{invoice_list}}
  </ul>
  <div style="background: #f8f9ff; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <p><strong> Payment Methods Available:</strong></p>
    <ul>
      {{payment_methods}}
    </ul>
  </div>
  <p style="text-align: center; margin: 30px 0;">
    <a href="{{portal_link}}" style="background: #5a31ea; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; display: inline-block;">
      Access Member Portal
    </a>
  </p>
  <p>Please settle your outstanding balance at your earliest convenience.</p>
  <p>Best regards,<br><strong>Finance Team</strong><br>Subscription Manager HK</p>
</div>`}),[Kt,ei]=Q.useState({emailService:"gmail",emailUser:"",emailPassword:"kuil uhbe zlqq oymd",scheduleTime:"09:00",scheduleEnabled:!0,reminderInterval:7}),[ti,mi]=Q.useState("AM"),[Wi,ni]=Q.useState(!1),[Hr,ri]=Q.useState("not_connected"),[bs,Ro]=Q.useState(!1),[On,Ba]=Q.useState({from:"2025-01-01",to:"2025-12-31"}),[ra,Cn]=Q.useState({}),[gi,ws]=Q.useState("This Year"),[Oo,js]=Q.useState(!1),[aa,Hi]=Q.useState(null),[bn,or]=Q.useState({paymentMethod:"",imageFile:null,imagePreview:null,imageUrl:"",reference:""}),[za,Ca]=Q.useState(!1),[Hn,ma]=Q.useState({image:!1,reference:!1}),[Zt,ai]=Q.useState(!1),[Sn,zs]=Q.useState(null),[Ir,Vi]=Q.useState(null),[Us,Ss]=Q.useState({x:0,y:0}),Pa=Q.useRef(null),[Bo,xi]=Q.useState({}),[lr,La]=Q.useState(!1),[ds,qs]=Q.useState({}),[Sr,$s]=Q.useState(!1),[yi,Yi]=Q.useState(!1),[Ws,ga]=Q.useState(!1),[Vr,vi]=Q.useState(null),[Ln,_a]=Q.useState([]),[En,Ti]=Q.useState("All"),[Vn,bi]=Q.useState("All"),[xa,x]=Q.useState("all"),[L,ae]=Q.useState("all"),[me,Le]=Q.useState(""),[Ke,nt]=Q.useState(1),[Nt,Ot]=Q.useState(10),[Ht,an]=Q.useState(""),[fn,cr]=Q.useState("All"),[dr,Yn]=Q.useState("none"),[Nr,kr]=Q.useState(()=>{try{return JSON.parse(localStorage.getItem("memberNotes")||"{}")}catch{return{}}}),[Yr,Gi]=Q.useState(""),[Zn,Ri]=Q.useState(""),[Ar,wi]=Q.useState(""),[Ji,Ns]=Q.useState(!1),[Ki,ii]=Q.useState(!1),[pr,Oi]=Q.useState(!1),[ks,si]=Q.useState(!1),[oi,mr]=Q.useState(null),[Qi,Ia]=Q.useState({memberId:!1,amount:!1,method:!1,screenshot:!1}),[Xi,ya]=Q.useState(null),[jt,_n]=Q.useState({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""}),[As,ji]=Q.useState(1),[ia,li]=Q.useState(10),[va,Si]=Q.useState(1),[Br,Zi]=Q.useState(10),[Bi,Ni]=Q.useState(1),[Gn,Hs]=Q.useState(10),[es,Ua]=Q.useState(1),[Vs,mo]=Q.useState(10),[Ys,go]=Q.useState(1),[ki,Cs]=Q.useState(10),[Gr,Gs]=Q.useState("All"),[Jr,Js]=Q.useState("All"),gr=fo();Om(15),Q.useEffect(()=>{Pt.get("section")!==wt&&Dt({section:wt},{replace:!1})},[wt,Pt,Dt]),Q.useEffect(()=>{const u=()=>{const B=new URLSearchParams(window.location.search).get("section");B&&mt.find(T=>T.id===B)&&B!==wt?Qt(B):!B&&wt!==mt[0].id&&Qt(mt[0].id)};return window.addEventListener("popstate",u),()=>{window.removeEventListener("popstate",u)}},[wt]),Q.useEffect(()=>{wt==="communications"&&J()},[wt,J]);const qa=()=>{const u=new Date,k=[],B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let T=11;T>=0;T--){const K=new Date(u.getFullYear(),u.getMonth()-T,1),Y=`${B[K.getMonth()]} ${K.getFullYear()}`,Ce=B[K.getMonth()],Ne=l.filter(at=>{if(!(at.status==="Completed"||at.status==="Paid")||!at.date)return!1;const yt=new Date(at.date);return yt.getMonth()===K.getMonth()&&yt.getFullYear()===K.getFullYear()}),Qe=Ne.reduce((at,Yt)=>{const yt=parseFloat(Yt.amount?.replace(/[^0-9.]/g,"")||0);return at+yt},0);k.push({month:Ce,monthKey:Y,value:Qe,count:Ne.length})}const F=Math.max(...k.map(T=>T.value),1);return k.map(T=>({...T,percentage:F>0?T.value/F*100:0}))},Mn=()=>{const u=new Date,k=u.getFullYear(),B=u.getMonth(),F=new Set(i.map(kt=>kt.id).filter(Boolean)),T=new Set(i.map(kt=>kt.email?.toLowerCase()).filter(Boolean)),K=new Set(i.map(kt=>kt.name?.toLowerCase()).filter(Boolean)),Y=l||[],Ce=Y.reduce((kt,qn)=>{if(qn.status==="Completed"||qn.status==="Paid"){const er=parseFloat(qn.amount?.replace(/[^0-9.]/g,"")||0);return kt+er}return kt},0),Qe=Y.filter(kt=>{if(!(kt.status==="Completed"||kt.status==="Paid")||!kt.date)return!1;const er=new Date(kt.date);return er.getMonth()===B&&er.getFullYear()===k}).reduce((kt,qn)=>{if(qn.status==="Completed"||qn.status==="Paid"){const er=parseFloat(qn.amount?.replace(/[^0-9.]/g,"")||0);return kt+er}return kt},0),Yt=Y.filter(kt=>!(kt.status==="Completed"||kt.status==="Paid")||!kt.date?!1:new Date(kt.date).getFullYear()===k).reduce((kt,qn)=>{if(qn.status==="Completed"||qn.status==="Paid"){const er=parseFloat(qn.amount?.replace(/[^0-9.]/g,"")||0);return kt+er}return kt},0),yt=i.reduce((kt,qn)=>{if(!qn.balance)return kt;const er=qn.balance.toString(),_s=parseFloat(er.replace(/[^0-9.]/g,"")||0);return kt+(_s>0?_s:0)},0),vn=r.filter(kt=>(kt.memberId&&F.has(kt.memberId)||kt.memberEmail&&T.has(kt.memberEmail?.toLowerCase())||kt.memberName&&K.has(kt.memberName?.toLowerCase()))&&kt.status==="Overdue"),sn=new Set,cn=new Set,yn=new Set;vn.forEach(kt=>{kt.memberId&&sn.add(kt.memberId),kt.memberEmail&&cn.add(kt.memberEmail.toLowerCase()),kt.memberName&&yn.add(kt.memberName.toLowerCase())});const ba=new Set;i.forEach(kt=>{let qn=!1;if(kt.id&&sn.has(kt.id)||kt.email&&cn.has(kt.email?.toLowerCase())||kt.name&&yn.has(kt.name?.toLowerCase()))qn=!0;else if(kt.status==="Overdue")qn=!0;else if(kt.status!=="Inactive"&&kt.status!=="Pending"&&kt.balance){const _s=kt.balance.toString(),Jl=parseFloat(_s.replace(/[^0-9.]/g,"")||0);(_s.toLowerCase().includes("overdue")||Jl>0)&&(qn=!0)}qn&&(kt.id?ba.add(kt.id):kt.email?ba.add(`email:${kt.email.toLowerCase()}`):kt.name&&ba.add(`name:${kt.name.toLowerCase()}`))});const sa=ba.size,$a=i.length*800;return{totalCollected:Ce,collectedMonth:Qe,collectedYear:Yt,outstanding:yt,overdueMembers:sa,expectedAnnual:$a}},wn=u=>u.paidToAdmin||u.paidToAdminName||u.method==="Cash to Admin"?"Cash":["Screenshot","Bank Transfer","FPS","PayMe","Alipay","Credit Card","Online Payment"].includes(u.method)?"Online Payment":u.method||"N/A",xr=()=>l.filter(u=>u.status==="Paid"||u.status==="Completed"||u.status==="Pending Verification"||u.status==="Pending").sort((u,k)=>{const B=new Date(u.date||u.createdAt||0);return new Date(k.date||k.createdAt||0)-B}).slice(0,5).map(u=>({Member:u.member||"Unknown",Period:u.period||"N/A",Amount:u.amount||"$0",Method:wn(u),Status:u.status||"Pending",Date:u.date||(u.createdAt?new Date(u.createdAt).toLocaleDateString():"N/A")})),Er=qa(),Ai=xr(),yr=Q.useMemo(()=>Mn(),[r,l,i]),xo=Q.useMemo(()=>new Date().toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),[i,r,l,o]);Q.useEffect(()=>{W&&Gi(Nr[W.id]||"")},[W,Nr]),Q.useEffect(()=>{const u=bt.find(k=>k.items.some(B=>B.id===wt));u&&qe(k=>{if(k[u.id])return k;const B={};return bt.forEach(F=>{B[F.id]=F.id===u.id}),B})},[wt]);const In=(()=>{const u=new Date(On.from),k=new Date(On.to);k.setHours(23,59,59,999);const B=l.filter(yt=>{if(!yt.date)return!1;const vn=new Date(yt.date),sn=yt.status==="Completed"||yt.status==="Paid";return vn>=u&&vn<=k&&sn}),F=(Array.isArray(Z)?Z:[]).filter(yt=>{if(!yt||!yt.date&&!yt.createdAt)return!1;try{const vn=yt.createdAt?new Date(yt.createdAt):new Date(yt.date);return vn>=u&&vn<=k}catch{return!1}}),T=B.reduce((yt,vn)=>{const sn=parseFloat(vn.amount?.replace(/[^0-9.]/g,"")||0);return yt+sn},0),K=F.reduce((yt,vn)=>{const sn=parseFloat(vn.amount?.replace(/[^0-9.]/g,"")||0);return yt+sn},0),Y=T+K,Ce=i.filter(yt=>yt.status==="Active");let Ne=0;if(Ce.forEach(yt=>{const vn=yt.subscriptionType||"Lifetime",sn=yt.createdAt?new Date(yt.createdAt):new Date("2025-01-01");if(vn==="Yearly + Janaza Fund"){const cn=Math.max(u.getTime(),sn.getTime()),yn=k.getTime(),ba=Math.max(0,(yn-cn)/(365.25*24*60*60*1e3));Ne+=Math.ceil(ba)*500}else{const cn=Math.max(u.getTime(),sn.getTime()),yn=k.getTime(),ba=Math.max(0,(yn-cn)/(365.25*24*60*60*1e3));Ne+=Math.ceil(ba)*250}}),Ne===0&&Ce.length>0){const yt=Math.max(0,(k-u)/315576e5);Ne=Ce.length*250*Math.ceil(yt)}const Qe=Ce.length>0?Math.round(Y/Ce.length):0,at={};B.forEach(yt=>{const vn=wn(yt);at[vn]=(at[vn]||0)+1});const Yt=Object.entries(at).map(([yt,vn])=>({label:yt,value:vn}));return Yt.length===0&&Yt.push({label:"No payments",value:0}),{collected:Y,paymentsTotal:T,donationsTotal:K,paymentsCount:B.length,donationsCount:F.length,expected:Ne||1,averagePerMember:Qe,methodMix:Yt,transactionCount:B.length+F.length,paymentsInRange:B,donationsInRange:F}})(),yo=()=>{try{const u=new Date(On.from),k=new Date(On.to);k.setHours(23,59,59,999);const B=l.filter(Ce=>{if(!Ce.date)return!1;const Ne=new Date(Ce.date);return Ne>=u&&Ne<=k});let F=`Financial Report
`;F+=`Period,${On.from} to ${On.to}

`,F+=`Summary
`,F+=`Collected,$${In.collected.toFixed(2)}
`,F+=`Expected,$${In.expected.toFixed(2)}
`,F+=`Outstanding,$${yr.outstanding.toFixed(2)}
`,F+=`Average per Member,$${In.averagePerMember.toFixed(2)}
`,F+=`Total Transactions,${In.transactionCount}

`,F+=`Payment Method Breakdown
`,In.methodMix.forEach(Ce=>{F+=`${Ce.label},${Ce.value}
`}),F+=`
Detailed Transactions (Completed Payments Only)
`,F+=`Date,Member,Period,Amount,Method,Status,Reference
`,B.filter(Ce=>Ce.status==="Completed"||Ce.status==="Paid").forEach(Ce=>{const Ne=Ce.date||"N/A",Qe=Ce.member||"Unknown",at=Ce.period||"N/A",Yt=Ce.amount||"$0",yt=wn(Ce),vn=Ce.status||"N/A",sn=Ce.reference||"N/A";F+=`"${Ne}","${Qe}","${at}","${Yt}","${yt}","${vn}","${sn}"
`});const T=new Blob([F],{type:"text/csv;charset=utf-8;"}),K=document.createElement("a"),Y=URL.createObjectURL(T);K.setAttribute("href",Y),K.setAttribute("download",`financial-report-${On.from}-to-${On.to}.csv`),K.style.visibility="hidden",document.body.appendChild(K),K.click(),document.body.removeChild(K),Ue("CSV report downloaded successfully!")}catch(u){console.error("Error exporting CSV:",u),Ue("Failed to export CSV","error")}},zo=()=>{if(!pt){Ue("You are not authorized to export reports","error");return}yo()},Ko=()=>{if(!pt){Ue("You are not authorized to export reports","error");return}Uo()},Uo=()=>{try{const u=new Gt,k=u.internal.pageSize.getWidth(),B=u.internal.pageSize.getHeight();let F=20;const T=20,K=7;u.setFontSize(18),u.setFont(void 0,"bold"),u.text("Financial Report",T,F),F+=10,u.setFontSize(12),u.setFont(void 0,"normal"),u.text(`Period: ${On.from} to ${On.to}`,T,F),F+=15,u.setFontSize(14),u.setFont(void 0,"bold"),u.text("Summary",T,F),F+=8,u.setFontSize(10),u.setFont(void 0,"normal"),u.text(`Collected: $${In.collected.toFixed(2)}`,T,F),F+=K,u.text(`Expected: $${In.expected.toFixed(2)}`,T,F),F+=K,u.text(`Outstanding: $${yr.outstanding.toFixed(2)}`,T,F),F+=K,u.text(`Average per Member: $${In.averagePerMember.toFixed(2)}`,T,F),F+=K,u.text(`Total Transactions: ${In.transactionCount}`,T,F),F+=10,u.setFontSize(14),u.setFont(void 0,"bold"),u.text("Payment Method Breakdown",T,F),F+=8,u.setFontSize(10),u.setFont(void 0,"normal"),In.methodMix.forEach(at=>{u.text(`${at.label}: ${at.value}`,T,F),F+=K});const Y=new Date(On.from),Ce=new Date(On.to);Ce.setHours(23,59,59,999);const Ne=l.filter(at=>{if(!at.date)return!1;const Yt=new Date(at.date);return Yt>=Y&&Yt<=Ce});if(Ne.length>0){F+=10,F>B-40&&(u.addPage(),F=20),u.setFontSize(14),u.setFont(void 0,"bold"),u.text("Recent Transactions",T,F),F+=8,u.setFontSize(9),u.setFont(void 0,"normal"),u.setFont(void 0,"bold"),u.text("Date",T,F),u.text("Member",T+40,F),u.text("Amount",T+90,F),u.text("Method",T+130,F),F+=K,u.setFont(void 0,"normal");const at=Ne.filter(yt=>yt.status==="Completed"||yt.status==="Paid"),Yt=Math.min(at.length,Math.floor((B-F-20)/K));at.slice(0,Yt).forEach(yt=>{F>B-20&&(u.addPage(),F=20),u.text(yt.date||"N/A",T,F),u.text((yt.member||"Unknown").substring(0,15),T+40,F),u.text(yt.amount||"$0",T+90,F),u.text(wn(yt).substring(0,15),T+130,F),F+=K}),at.length>Yt&&u.text(`... and ${at.length-Yt} more transactions`,T,F)}const Qe=u.internal.pages.length-1;for(let at=1;at<=Qe;at++)u.setPage(at),u.setFontSize(8),u.text(`Generated on ${new Date().toLocaleDateString()} - Page ${at} of ${Qe}`,T,B-10);u.save(`financial-report-${On.from}-to-${On.to}.pdf`),Ue("PDF report downloaded successfully!")}catch(u){console.error("Error exporting PDF:",u),Ue("Failed to export PDF","error")}};l.filter(u=>{if(!u.date)return!1;const k=new Date(u.date),B=new Date(On.from),F=new Date(On.to);return F.setHours(23,59,59,999),k>=B&&k<=F}).sort((u,k)=>{const B=new Date(u.date||0);return new Date(k.date||0)-B});const Ks=async()=>{try{const k=await fetch("http://localhost:4000/api/email-settings");if(k.ok){const B=await k.json();if(B){const F=B.scheduleTime||"09:00",[T,K]=F.split(":").map(Number),Y=T>=12?"PM":"AM",Ne=`${T%12||12}:${K.toString().padStart(2,"0")}`;ei({emailService:B.emailService||"gmail",emailUser:B.emailUser||"",emailPassword:B.emailPassword||"kuil uhbe zlqq oymd",scheduleTime:F,scheduleEnabled:B.scheduleEnabled!==void 0?B.scheduleEnabled:!0,reminderInterval:B.reminderInterval||7}),mi(Y),ri(B.emailUser?"connected":"not_connected"),B.automationEnabled!==void 0&&A(B.automationEnabled)}}}catch(u){console.error("Error fetching email settings:",u)}},Qs=async()=>{try{const k=await fetch("http://localhost:4000/api/email-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Kt)});if(k.ok)Ue("Email settings saved successfully!"),ri(Kt.emailUser?"connected":"not_connected");else{const B=await k.json();Ue(B.error||"Failed to save email settings","error")}}catch(u){console.error("Error saving email settings:",u),Ue("Failed to save email settings","error")}},[vo,bo]=Q.useState(!1),wl=async()=>{bo(!0);try{const u="http://localhost:4000",k=[];try{const B=await fetch(`${u}/api/email-settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Kt)});if(B.ok)ri(Kt.emailUser?"connected":"not_connected");else{const F=await B.json();k.push(F.error||"Failed to save email settings")}}catch{k.push("Failed to save email settings")}try{for(const B of v)await $(B.id,B)}catch{k.push("Failed to save reminder rules")}try{for(const B of p)await z(B.id,B)}catch{k.push("Failed to save payment methods")}try{await ie(Za)}catch{k.push("Failed to save organization info")}k.length>0?Ue(`Some settings failed to save: ${k.join(", ")}`,"error"):Ue("All settings saved successfully!","success")}catch(u){console.error("Error saving all settings:",u),Ue("Failed to save all settings","error")}finally{bo(!1)}},jl=async()=>{try{const k=await fetch("http://localhost:4000/api/email-settings/template");if(k.ok){const B=await k.json();B&&(B.subject||B.htmlTemplate)&&To({subject:B.subject||"Payment Reminder - Outstanding Balance",htmlTemplate:B.htmlTemplate||`<div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
  <h2 style="color: #1a1a1a; border-bottom: none; padding-bottom: 10px;">
    Payment Reminder - Outstanding Balance
  </h2>
  <p>Dear {{member_name}},</p>
  <p>This is a friendly reminder about your outstanding subscription payments.</p>
  <div style="background: #f9fafb; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <p><strong>Member ID:</strong> {{member_id}}</p>
    <p><strong>Email:</strong> {{member_email}}</p>
    <p><strong>Total Outstanding:</strong> <span style="color: #ef4444; font-size: 18px; font-weight: bold;">\${{total_due}}</span></p>
  </div>
                            <h3 style="color: #1a1a1a;">Outstanding Invoices ({{invoice_count}}):</h3>
  <ul style="list-style: none; padding: 0;">
    {{invoice_list}}
  </ul>
  <div style="background: #f8f9ff; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <p><strong> Payment Methods Available:</strong></p>
    <ul>
      {{payment_methods}}
    </ul>
  </div>
  <p style="text-align: center; margin: 30px 0;">
    <a href="{{portal_link}}" style="background: #5a31ea; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; display: inline-block;">
      Access Member Portal
    </a>
  </p>
  <p>Please settle your outstanding balance at your earliest convenience.</p>
  <p>Best regards,<br><strong>Finance Team</strong><br>Subscription Manager HK</p>
</div>`})}}catch(u){console.error("Error fetching email template:",u)}},Sl=()=>{Yi(!0)},Nl=()=>pi.htmlTemplate?pi.htmlTemplate.replace(/\{\{member_name\}\}/g,"John Doe").replace(/\{\{member_id\}\}/g,"MEMBER001").replace(/\{\{member_email\}\}/g,"john.doe@example.com").replace(/\{\{total_due\}\}/g,"$250.00").replace(/\{\{invoice_count\}\}/g,"3").replace(/\{\{invoice_list\}\}/g,`
        <li style="margin-bottom: 10px;">
          <strong>January 2025</strong>: $100.00 
          <span style="color: #666;">(Due: 15 Jan 2025)</span> - 
          <strong style="color: #ef4444">Overdue</strong>
        </li>
        <li style="margin-bottom: 10px;">
          <strong>February 2025</strong>: $100.00 
          <span style="color: #666;">(Due: 15 Feb 2025)</span> - 
          <strong style="color: #ef4444">Unpaid</strong>
        </li>
        <li style="margin-bottom: 10px;">
          <strong>March 2025</strong>: $50.00 
          <span style="color: #666;">(Due: 15 Mar 2025)</span> - 
          <strong style="color: #ef4444">Unpaid</strong>
        </li>
      `).replace(/\{\{payment_methods\}\}/g,`
        <li>FPS: ID 1234567</li>
        <li>PayMe: Scan QR code in portal</li>
        <li>Bank Transfer: HSBC 123-456789-001</li>
      `).replace(/\{\{portal_link\}\}/g,`${window.location.origin}/member`):"",kl=async()=>{try{const k=await fetch("http://localhost:4000/api/email-settings/template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pi)});if(k.ok)Ue("Email template saved successfully!");else{const B=await k.json();Ue(B.error||"Failed to save email template","error")}}catch(u){console.error("Error saving email template:",u),Ue("Failed to save email template","error")}},Al=async()=>{if(!Kt.emailUser||!Kt.emailPassword){Ue("Please configure email credentials first","error");return}ni(!0);try{const k=await fetch("http://localhost:4000/api/email-settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailService:Kt.emailService,emailUser:Kt.emailUser,emailPassword:Kt.emailPassword,testEmail:Kt.emailUser})});if(k.ok)Ue("Test email sent successfully! Check your inbox.");else{const B=await k.json();Ue(B.error||"Failed to send test email","error")}}catch(u){console.error("Error testing email:",u),Ue("Failed to send test email","error")}finally{ni(!1)}},ts=async u=>{if(!Kt.emailUser||!Kt.emailPassword){Ue("Please configure email credentials first","error");return}xi(k=>({...k,[u]:!0}));try{const B=await fetch("http://localhost:4000/api/reminders/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memberId:u,sendToAll:!1})}),F=await B.json();if(B.ok){const T=i.find(Y=>Y.id===u),K={channel:"Email",type:"Manual Reminder",memberId:u,memberEmail:T?.email||"",memberName:T?.name||"",message:`Reminder email sent to ${T?.name||"member"}`,status:"Delivered"};xe(K),Ue(`Reminder email sent to ${T?.name||"member"}!`)}else Ue(F.error||"Failed to send reminder email","error")}catch(k){console.error("Error sending reminder:",k),Ue("Failed to send reminder email","error")}finally{xi(k=>({...k,[u]:!1}))}},wo=u=>r.filter(T=>T.memberId===u||T.memberEmail&&i.find(K=>K.id===u)?.email?.toLowerCase()===T.memberEmail.toLowerCase()||T.memberName&&i.find(K=>K.id===u)?.name?.toLowerCase()===T.memberName.toLowerCase()).filter(T=>{const K=Co(T);return K==="Unpaid"||K==="Overdue"}).reduce((T,K)=>{const Y=parseFloat(K.amount?.replace(/[^0-9.]/g,"")||0);return T+Y},0),Ea=async u=>{try{const k="http://localhost:4000",B=sessionStorage.getItem("adminId")||sessionStorage.getItem("adminName")||"Admin",F=await fetch(`${k}/api/payments/${u}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:B,adminName:sessionStorage.getItem("adminName")||"Admin"})});if(!F.ok){const K=await F.json().catch(()=>({}));throw new Error(K.error||"Failed to approve payment")}await I(),await E();const T=l.find(K=>K.id===u)||o.find(K=>K.id===u);if(T&&T.memberId){const K=wo(T.memberId),Y=K>0?`$${K.toFixed(2)} Outstanding`:"$0";try{await fe(T.memberId,{balance:Y})}catch(Ce){console.error("Error updating member balance:",Ce)}}Ue("Payment approved successfully!")}catch(k){console.error("Error approving payment:",k),Ue(k.message||"Failed to approve payment","error")}},Ci=async u=>{try{const k=window.prompt("Enter rejection reason (optional):")||"",B="http://localhost:4000",F=sessionStorage.getItem("adminId")||sessionStorage.getItem("adminName")||"Admin",T=await fetch(`${B}/api/payments/${u}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:F,adminName:sessionStorage.getItem("adminName")||"Admin",reason:k})});if(!T.ok){const K=await T.json().catch(()=>({}));throw new Error(K.error||"Failed to reject payment")}await I(),await E(),Ue("Payment rejected successfully!")}catch(k){console.error("Error rejecting payment:",k),Ue(k.message||"Failed to reject payment","error")}},Qo=()=>{const u=["memberId","amount","method","screenshot"];if(Xi){let k=!0,B="";if(Xi==="memberId"&&!jt.memberId?(k=!1,B="Member is required"):Xi==="amount"&&(!jt.amount||parseFloat(jt.amount)<=0)?(k=!1,B="Amount must be a positive number"):Xi==="method"&&!jt.method?(k=!1,B="Payment method is required"):Xi==="screenshot"&&jt.method==="Cash"&&!jt.screenshot&&(k=!1,B="Screenshot upload is required for Cash payments"),k)Ia(F=>({...F,[Xi]:!1})),ya(null);else return Ia(F=>({...F,[Xi]:!0})),Ue(B,"error"),!1}for(const k of u){let B=!0,F="";if(k==="memberId"&&!jt.memberId?(B=!1,F="Member is required"):k==="amount"&&(!jt.amount||parseFloat(jt.amount)<=0)?(B=!1,F="Amount must be a positive number"):k==="method"&&!jt.method?(B=!1,F="Payment method is required"):k==="screenshot"&&jt.method==="Cash"&&!jt.screenshot&&(B=!1,F="Screenshot upload is required for Cash payments"),!B)return Ia({memberId:!1,amount:!1,method:!1,screenshot:!1}),Ia(T=>({...T,[k]:!0})),ya(k),Ue(F,"error"),!1}return Ia({memberId:!1,amount:!1,method:!1,screenshot:!1}),ya(null),!0},us=async u=>{if(u.preventDefault(),!!Qo())try{await te(jt),Ue("Payment added successfully!"),si(!1),_n({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""}),await I()}catch(k){console.error("Error adding payment:",k),Ue(k.message||"Failed to add payment","error")}},Cl=u=>{mr(u),_n({memberId:u.memberId||"",member:u.member||"",invoiceId:u.invoiceId||"",amount:u.amount||"",method:u.method||"",reference:u.reference||"",date:u.date||u.createdAt?new Date(u.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:u.status||"Pending",screenshot:u.screenshot||"",notes:u.notes||""}),si(!0)},jo=async u=>{u.preventDefault();try{if(!jt.memberId||!jt.amount){Ue("Please fill all required fields","error");return}if(jt.method==="Cash"&&!jt.screenshot){Ue("Screenshot upload is required for Cash payments","error");return}const k="http://localhost:4000",B=oi._id||oi.id,F=await fetch(`${k}/api/payments/${B}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(jt)});if(!F.ok){const T=await F.json().catch(()=>({}));throw new Error(T.error||"Failed to update payment")}Ue("Payment updated successfully!"),si(!1),mr(null),_n({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""}),await I(),await E()}catch(k){console.error("Error updating payment:",k),Ue(k.message||"Failed to update payment","error")}},So=async u=>{ci("Are you sure you want to delete this payment? This action cannot be undone.",async()=>{try{const B=await fetch(`http://localhost:4000/api/payments/${u}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!B.ok){const F=await B.json().catch(()=>({}));throw new Error(F.error||"Failed to delete payment")}Ue("Payment deleted successfully!"),await I(),await E()}catch(k){console.error("Error deleting payment:",k),Ue(k.message||"Failed to delete payment","error")}})},Un=async()=>{if(!V){Ue("Only Admin and Owner can send bulk reminders","error");return}if(!Kt.emailUser||!Kt.emailPassword){Ue("Please configure email credentials first","error");return}La(!0);try{const k=await fetch("http://localhost:4000/api/reminders/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sendToAll:!0})}),B=await k.json();k.ok?Ue(B.message||"Reminder emails sent successfully!"):Ue(B.error||"Failed to send reminder emails","error")}catch(u){console.error("Error sending reminders:",u),Ue("Failed to send reminder emails","error")}finally{La(!1)}},Xo=async()=>{if(!V){Ue("Only Admin and Owner can send bulk reminders","error");return}const u=i.filter(k=>{if(!k.balance||!k.phone)return!1;const B=k.balance.toString();return parseFloat(B.replace(/[^0-9.]/g,"")||0)>0});if(u.length===0){Ue("No outstanding members with phone numbers found","error");return}$s(!0);try{for(let k=0;k<u.length;k++){const B=u[k],F=r.filter(Qe=>Qe.memberId===B.id&&(Qe.status==="Unpaid"||Qe.status==="Overdue")),T=F.reduce((Qe,at)=>Qe+parseFloat(at.amount.replace("$","")),0),K=F.map((Qe,at)=>`${at+1}. *${Qe.period}*: ${Qe.amount} (Due: ${Qe.due}) - _${Qe.status}_`).join(`
`),Y=`    

Dear *${B.name}*,

This is a friendly reminder about your outstanding subscription payments.

*Member ID:* ${B.id}
*Email:* ${B.email}
*Total Outstanding:* $${T}

* Outstanding Invoices (${F.length}):*
${K}

* Payment Methods Available:*
 FPS: ID 1234567
 PayMe: Scan QR code in portal
 Bank Transfer: HSBC 123-456789-001

* Member Portal:*
${window.location.origin}/member

Please settle your outstanding balance at your earliest convenience.

  

_Best regards,_
*Finance Team*
Subscription Manager HK`,Ne=`https://wa.me/${B.phone.replace(/[^0-9+]/g,"")}?text=${encodeURIComponent(Y)}`;setTimeout(()=>{window.open(Ne,"_blank");const Qe={channel:"WhatsApp",type:"Bulk Outstanding Reminder",memberId:B.id,memberEmail:B.email,memberName:B.name,message:`WhatsApp reminder sent to ${B.name} (${B.phone}) - $${T} due (${F.length} invoice${F.length>1?"s":""})`,status:"Delivered"};xe(Qe)},k*1e3)}Ue(` Opening WhatsApp for ${u.length} members. Please review and send each message.`)}catch(k){console.error("Error sending WhatsApp reminders:",k),Ue("Failed to open WhatsApp","error")}finally{$s(!1)}};Q.useEffect(()=>{wt==="donations"&&de()},[wt]),Q.useEffect(()=>{ji(1)},[Ht]),Q.useEffect(()=>{Si(1)},[En]),Q.useEffect(()=>{wt==="members"?ji(1):wt==="payment-approvals"?Si(1):wt==="donations"?Ni(1):wt==="reports"&&nt(1)},[wt]),Q.useEffect(()=>{nt(1)},[me,xa,L]),Q.useEffect(()=>{const u=i.filter(B=>!Ht||B.name?.toLowerCase().includes(Ht.toLowerCase())),k=Math.ceil(u.length/ia);As>k&&k>0&&ji(1)},[i,Ht,ia,As]),Q.useEffect(()=>{const u=(o||[]).filter(B=>En==="All"?!0:B.status===En),k=Math.ceil(u.length/Br);va>k&&k>0&&Si(1)},[o,En,Br,va]),Q.useEffect(()=>{const k=(Array.isArray(Z)?Z:[]).filter(F=>F!==null),B=Math.ceil(k.length/Gn);Bi>B&&B>0&&Ni(1)},[Z,Gn,Bi]),Q.useEffect(()=>(pr?document.body.classList.add("menu-open"):document.body.classList.remove("menu-open"),()=>{document.body.classList.remove("menu-open")}),[pr]),Q.useEffect(()=>{Ks().catch(u=>{console.error("Failed to fetch email settings:",u)}),jl().catch(u=>{console.error("Failed to fetch email template:",u)})},[]);const No=u=>{if(u==="dashboard")return[{id:"dashboard",label:"Dashboard"}];for(const B of bt){const F=B.items.find(T=>T.id===u);if(F)return[{id:"dashboard",label:"Dashboard"},{id:B.id,label:B.label},{id:u,label:F.label}]}const k=mt.find(B=>B.id===u);return k?[{id:"dashboard",label:"Dashboard"},{id:u,label:k.label}]:[{id:"dashboard",label:"Dashboard"}]},Mr=u=>{const k=No(u),B=bt.find(F=>F.items.some(T=>T.id===u));return t.jsxs("div",{className:"admin-breadcrumb-tabs-container",children:[k.length>1&&t.jsx("div",{className:"admin-breadcrumb-container admin-breadcrumb-container--small",children:k.map((F,T)=>t.jsxs("span",{children:[T>0&&t.jsx("span",{className:"admin-breadcrumb-separator",children:" > "}),T===k.length-1?t.jsx("span",{className:"admin-breadcrumb-current",children:F.label}):t.jsx("span",{onClick:()=>Ma(F.id),className:"admin-breadcrumb-link--inline",children:F.label})]},F.id))}),B&&B.items.length>1&&t.jsx("div",{className:"admin-breadcrumb-tabs",children:B.items.map(F=>t.jsx("button",{className:`admin-breadcrumb-tab ${u===F.id?"admin-breadcrumb-tab--active":""}`,onClick:()=>Ma(F.id),children:F.label},F.id))})]})},Ma=u=>{console.log("Navigating to section:",u),Qt(u),Se(!1),ht(!1),Fi(!1),Oi(!1);const k=bt.find(B=>B.items.some(F=>F.id===u));k&&!Ae[k.id]&&qe(B=>{const F={};return bt.forEach(T=>{F[T.id]=T.id===k.id}),F})},qo=()=>{Ue("You have been logged out","success"),setTimeout(()=>{gr("/login",{replace:!0})},500)},Ue=(u,k="success")=>{vt(u),Jt(k),setTimeout(()=>vt(null),3e3)},ci=(u,k,B=null,F="Confirm")=>{pa({isOpen:!0,message:u,confirmButtonText:F,onConfirm:()=>{pa({isOpen:!1,message:"",onConfirm:null,onCancel:null,confirmButtonText:"Confirm"}),k&&k()},onCancel:()=>{pa({isOpen:!1,message:"",onConfirm:null,onCancel:null,confirmButtonText:"Confirm"}),B&&B()}})},Xs=async u=>{if(u.preventDefault(),!!hr())try{Ka(!0),await H(ln),jr({name:"",email:"",phone:"",status:"Active",balance:"250",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"}),St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),ir(null),Se(!1),Ue("Member added successfully!","success")}catch(k){console.error("Failed to add member:",k),Ue("Failed to add member. Please try again.","error")}finally{Ka(!1)}},Vl=u=>{St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),ir(null),ct(u),jr({name:u.name||"",email:u.email||"",phone:u.phone||"",status:u.status||"Active"}),Se(!0)},kc=async u=>{if(u.preventDefault(),!!hr())try{if(!He){Ue("No member selected for editing.","error");return}const k={},B=He;if(ln.name!==(B.name||"")&&(k.name=ln.name),ln.email!==(B.email||"")&&(k.email=ln.email),ln.phone!==(B.phone||"")&&(k.phone=ln.phone),ln.status!==(B.status||"Active")&&(k.status=ln.status),ln.password&&ln.password.trim()!==""&&(k.password=ln.password),Object.keys(k).length===0){Ue("No changes to update.","error");return}await fe(He.id,k),ct(null),jr({name:"",email:"",phone:"",password:"",status:"Active",balance:"$0",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"}),St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),ir(null),Se(!1),Ue("Member updated successfully!")}catch{Ue("Failed to update member. Please try again.","error")}},Ac=async u=>{ci("Are you sure you want to delete this member?",async()=>{try{await he(u),Ue("Member deleted successfully!")}catch{Ue("Failed to delete member. Please try again.","error")}})},Yl=u=>{if(u.preventDefault(),!Lt.memberId||!Lt.period||!Lt.due){Ue("Please fill all required fields","error");return}const k=parseFloat(Lt.amount);if(!k||k<=0||isNaN(k)){Ue("Amount must be a positive number","error");return}const B=i.find(T=>T.id===Lt.memberId),F={id:Ra(),memberId:Lt.memberId,memberName:B?.name||"",period:Lt.period,amount:`$${k.toFixed(2)}`,status:"Unpaid",due:Lt.due,method:"-",reference:"-",notes:Lt.notes||""};Ee(F),gn({...F,member:B}),oe(!0),Dn({memberId:"",period:Qa(),amount:"250",invoiceType:"Lifetime",due:"",notes:""}),ht(!1),Ue("Invoice created successfully!")},Zo=async(u,k="Cash",B=null,F=null)=>{try{const T=r.find(sn=>sn.id===u);if(!T){Ue("Invoice not found","error");return}if(T.status==="Paid"){Ue("Invoice is already marked as paid","error");return}const K=sessionStorage.getItem("adminEmail"),Y=a.find(sn=>sn.email===K),Ce=sessionStorage.getItem("adminId")||Y?.id||"Admin",Ne=sessionStorage.getItem("adminName")||Y?.name||"Admin";let Qe="Cash to Admin",at;k==="Online"?(Qe="Online Payment",at=F||`ONL_${Date.now()}`):at=`CASH_${Date.now()}`;const yt=await fetch("http://localhost:4000/api/payments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invoiceId:u,amount:T.amount,method:Qe,reference:at,member:T.memberName||"Member",memberId:T.memberId,memberEmail:T.memberEmail,period:T.period,status:"Completed",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),paidToAdmin:Ce,paidToAdminName:Ne,approvedBy:Ne,approvedAt:new Date().toISOString(),screenshot:B||T.screenshot||null})});if(!yt.ok){const sn=await yt.json().catch(()=>({}));throw new Error(sn.error||"Failed to create payment record")}const vn=await yt.json();if(await ge(u,{status:"Paid",method:Qe,reference:at,paidToAdmin:Ce,paidToAdminName:Ne}),await Promise.all([E(),I(),P()]),T.memberId){const sn=i.find(cn=>cn.id===T.memberId);Ue(sn?`Invoice marked as paid (${Qe})! Balance updated.`:`Invoice marked as paid (${Qe})!`,"success")}else Ue(`Invoice marked as paid (${Qe})!`,"success")}catch(T){console.error("Error marking invoice as paid:",T),Ue(T.message||"Failed to mark invoice as paid","error")}},Zs=u=>{const k=r.find(B=>B.id===u);if(!k){Ue("Invoice not found","error");return}if(k.status==="Paid"||k.status==="Completed"){Ue("Paid invoices cannot be deleted","error");return}ci("Are you sure you want to delete this invoice? This cannot be undone.",()=>{ee(u),Ue("Invoice deleted successfully!")})},ko=u=>{if(!u){Ue("No member selected","error");return}if(!u.phone){Ue("This member has no phone number","error");return}qs(Ne=>({...Ne,[u.id]:!0}));const k=r.filter(Ne=>Ne.memberId===u.id&&(Ne.status==="Unpaid"||Ne.status==="Overdue"));if(k.length===0){Ue("This member has no outstanding payments","error"),qs(Ne=>({...Ne,[u.id]:!1}));return}const B=k.reduce((Ne,Qe)=>Ne+parseFloat(Qe.amount.replace("$","")),0),F=k.map((Ne,Qe)=>`${Qe+1}. *${Ne.period}*: ${Ne.amount} (Due: ${Ne.due}) - _${Ne.status}_`).join(`
`),T=`    

Dear *${u.name}*,

This is a friendly reminder about your outstanding subscription payments.

*Member ID:* ${u.id}
*Email:* ${u.email}
*Total Outstanding:* $${B}

* Outstanding Invoices (${k.length}):*
${F}

* Payment Methods Available:*
 FPS: ID 1234567
 PayMe: Scan QR code in portal
 Bank Transfer: HSBC 123-456789-001

* Member Portal:*
${window.location.origin}/member

Please settle your outstanding balance at your earliest convenience.

  

_Best regards,_
*Finance Team*
Subscription Manager HK`,Y=`https://wa.me/${u.phone.replace(/[^0-9+]/g,"")}?text=${encodeURIComponent(T)}`;window.open(Y,"_blank");const Ce={channel:"WhatsApp",type:"Manual Outstanding Reminder",memberId:u.id,memberEmail:u.email,memberName:u.name,message:`WhatsApp reminder sent to ${u.name} (${u.phone}) - $${B} due (${k.length} invoice${k.length>1?"s":""})`,status:"Delivered"};xe(Ce),Ue(` WhatsApp opened for ${u.name}! Review and send the message.`),setTimeout(()=>{qs(Ne=>({...Ne,[u.id]:!1}))},2e3)},Ls=(u,k=!1,B=null)=>{k||(vi({type:B?"manual":"single",memberData:u||null,memberId:B||null}),_a([]),ga(!0))},Ao=u=>{Vr?.type==="bulk"?_a(k=>k.includes(u)?k.filter(B=>B!==u):[...k,u]):Gl(u)},el=async()=>{if(Ln.length===0){Ue("Please select at least one channel","error");return}const u=Ln.length===2?"Are you sure you want to send reminders via Email AND WhatsApp to ALL outstanding members?":Ln.includes("Email")?"Are you sure you want to send reminder emails to ALL outstanding members?":"Are you sure you want to open WhatsApp for all outstanding members? This will open multiple WhatsApp windows.";ci(u,async()=>{try{Ln.includes("Email")&&await Un(),Ln.includes("WhatsApp")&&(Ln.includes("Email")&&await new Promise(k=>setTimeout(k,1e3)),await Xo()),_a([])}catch(k){console.error("Error sending bulk reminders:",k)}})},Gl=async u=>{if(ga(!1),Vr?.memberData)u==="Email"?await Pl(Vr.memberData):u==="WhatsApp"&&ko(Vr.memberData);else if(Vr?.memberId){if(u==="Email")await ts(Vr.memberId);else if(u==="WhatsApp"){const k=i.find(B=>B.id===Vr.memberId);k&&ko(k)}}vi(null),_a([])},Pl=async u=>{if(!u){Ue("No member selected","error");return}const k=r.filter(K=>K.memberId===u.id&&(K.status==="Unpaid"||K.status==="Overdue"));if(k.length===0){Ue("This member has no outstanding payments","error");return}const B=k.reduce((K,Y)=>K+parseFloat(Y.amount.replace("$","").replace(",","")||0),0),F=k.map(K=>` ${K.period}: ${K.amount} (Due: ${K.due}) - ${K.status}`).join(`
`),T=k.map(K=>`<li style="margin-bottom: 10px;">
            <strong>${K.period}</strong>: ${K.amount} 
            <span style="color: #666;">(Due: ${K.due})</span> - 
            <strong style="color: ${K.status==="Overdue","#ef4444"}">${K.status}</strong>
          </li>`).join("");try{Ue("Sending reminder email...");const Y=await fetch("http://localhost:4000/api/invoices/send-reminder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toEmail:u.email,toName:u.name,memberId:u.id,totalDue:`$${B.toFixed(2)}`,invoiceCount:k.length,invoiceListText:F,invoiceListHTML:T,paymentMethods:"FPS, PayMe, or Bank Transfer",portalLink:`${window.location.origin}/member`})}),Ce=await Y.json();if(!Y.ok)throw new Error(Ce.error||"Failed to send email");console.log(" Email sent successfully:",Ce);const Ne={channel:"Email",type:"Manual Outstanding Reminder",memberId:u.id,memberEmail:u.email,memberName:u.name,message:`Payment reminder: ${u.name} (${u.email}) - $${B.toFixed(2)} due (${k.length} invoice${k.length>1?"s":""})`,status:"Delivered"};xe(Ne),Ue(` Reminder email sent to ${u.name} for $${B.toFixed(2)} outstanding!`)}catch(K){console.error(" Email send error:",K);const Y={channel:"Email",type:"Manual Outstanding Reminder",memberId:u.id,memberEmail:u.email,memberName:u.name,message:`Reminder attempt to ${u.name} - $${B.toFixed(2)} due`,status:"Failed"};xe(Y),Ue(K.message||"Failed to send email. Please check email configuration.","error")}},tl=u=>{X(u),Qt("member-detail")},Co=u=>(l||[]).find(B=>B.invoiceId===u.id&&(B.status==="Completed"||B.status==="Paid"))?"Paid":u.status,eo=u=>r.filter(k=>k.memberId===u),Da=async u=>{try{const B=await fetch(`http://localhost:4000/api/members/${u}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"}});if(!B.ok){const F=await B.json().catch(()=>({}));throw new Error(F.error||"Failed to approve member")}await P(),Ue("Member approved successfully! Approval email sent.")}catch(k){console.error("Error approving member:",k),Ue(k.message||"Failed to approve member","error")}};return t.jsxs(t.Fragment,{children:[t.jsx(Jc,{showCTA:!1,showLogout:!0,onLogout:qo,showMobileMenu:!0,isMobileMenuOpen:pr,onMobileMenuToggle:()=>Oi(!pr),isSticky:!0}),xt.isOpen&&t.jsx("div",{className:"confirmation-dialog-overlay",onClick:u=>{u.stopPropagation()},children:t.jsxs("div",{className:"confirmation-dialog",onClick:u=>u.stopPropagation(),children:[t.jsx("div",{className:"confirmation-dialog-content",children:t.jsx("p",{className:"confirmation-dialog-message",children:xt.message})}),t.jsx("div",{className:"confirmation-dialog-divider"}),t.jsxs("div",{className:"confirmation-dialog-actions",children:[t.jsx("button",{className:"secondary-btn",onClick:xt.onCancel||(()=>pa({isOpen:!1,message:"",onConfirm:null,onCancel:null})),children:"Cancel"}),t.jsx("button",{className:"danger-btn admin-confirmation-button-success",onClick:xt.onConfirm,children:xt.confirmButtonText||"Confirm"})]})]})}),yi&&t.jsx("div",{className:"admin-modal-overlay",style:{zIndex:10001},onClick:()=>Yi(!1),children:t.jsxs("div",{className:"admin-modal-container",onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{className:"admin-modal-header",children:[t.jsxs("h3",{className:"admin-modal-title",children:[t.jsx("i",{className:"fas fa-eye admin-icon"}),"Email Template Preview"]}),t.jsx("button",{type:"button",className:"admin-modal-close-button",onClick:()=>Yi(!1),children:""})]}),t.jsx("div",{className:"admin-modal-content",dangerouslySetInnerHTML:{__html:Nl()}}),t.jsx("div",{className:"admin-modal-actions",children:t.jsx("button",{className:"secondary-btn",onClick:()=>Yi(!1),children:"Close"})})]})}),Ws&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,padding:"20px"},onClick:()=>{ga(!1),vi(null)},children:t.jsxs("div",{className:"admin-modal-card admin-modal-card--small",onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-paper-plane",style:{marginRight:"8px",color:"#5a31ea"}}),"Select Channel"]}),t.jsx("button",{type:"button",onClick:()=>{ga(!1),vi(null)},style:{background:"transparent",border:"none",fontSize:"1.5rem",color:"#666",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:u=>{u.target.style.background="#f3f4f6",u.target.style.color="#1a1a1a"},onMouseLeave:u=>{u.target.style.background="transparent",u.target.style.color="#666"},children:""})]}),t.jsx("p",{style:{marginBottom:"24px",color:"#666"},children:Vr?.type==="bulk"?Ln.length>0?`Selected: ${Ln.join(" and ")}. Click "Send" to send reminders to all outstanding members.`:"Select one or both channels to send reminders to all outstanding members:":`Select the channel to send reminder to ${Vr?.memberData?.name||"member"}:`}),t.jsx("div",{className:"admin-channel-buttons-container",children:Vr?.type==="bulk"?t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:`admin-channel-button ${Ln.includes("Email")?"admin-channel-button--selected":""}`,onClick:()=>Ao("Email"),children:[t.jsxs("div",{className:"admin-channel-button-content",children:[t.jsx("i",{className:"fas fa-envelope admin-channel-button-icon-white"}),t.jsx("span",{className:"admin-channel-button-text-white",children:"Email"})]}),Ln.includes("Email")&&t.jsx("i",{className:"fas fa-check-circle admin-channel-button-check-white"})]}),t.jsxs("button",{className:`admin-channel-button ${Ln.includes("WhatsApp")?"admin-channel-button--selected":""}`,onClick:()=>Ao("WhatsApp"),children:[t.jsxs("div",{className:"admin-channel-button-content",children:[t.jsx("i",{className:"fab fa-whatsapp admin-channel-button-icon-white"}),t.jsx("span",{className:"admin-channel-button-text-white",children:"WhatsApp"})]}),Ln.includes("WhatsApp")&&t.jsx("i",{className:"fas fa-check-circle admin-channel-button-check-white"})]}),Ln.length>0&&t.jsx("button",{className:`admin-channel-send-button ${lr||Sr?"admin-channel-send-button-loading":""}`,onClick:el,disabled:lr||Sr,children:lr||Sr?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"login-btn-spinner",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),t.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Sending..."]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-paper-plane admin-channel-action-icon-large"}),"Send"]})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:"admin-channel-action-button",onClick:()=>Ao("Email"),children:[t.jsx("i",{className:"fas fa-envelope admin-channel-action-icon-large"}),"Email"]}),t.jsxs("button",{className:"admin-channel-action-button",onClick:()=>Ao("WhatsApp"),children:[t.jsx("i",{className:"fab fa-whatsapp admin-channel-action-icon-large"}),"WhatsApp"]})]})}),t.jsx("div",{className:"admin-modal-footer",children:t.jsx("button",{className:"secondary-btn",onClick:()=>{ga(!1),vi(null),_a([])},children:"Cancel"})})]})}),t.jsx($l,{message:Vt,type:An,onClose:()=>vt(null),duration:3e3}),t.jsxs("main",{className:"admin-main admin-main--sticky-header",children:[pr&&t.jsx("div",{className:"mobile-menu-overlay",onClick:()=>Oi(!1)}),t.jsxs("div",{className:"admin-layout",children:[t.jsxs("aside",{className:`admin-menu ${pr?"mobile-open":""}`,onClick:u=>u.stopPropagation(),children:[t.jsx("p",{className:"eyebrow light",children:Ct}),t.jsx("h3",{children:Xe}),t.jsxs("nav",{className:"admin-nav-grouped",children:[t.jsx("div",{className:"nav-group",children:t.jsxs("button",{className:`admin-tab ${wt==="dashboard"?"active":""}`,onClick:()=>{Ma("dashboard"),Oi(!1)},children:[t.jsx("i",{className:"fas fa-chart-line admin-nav-icon"}),"Dashboard"]})}),bt.map(u=>t.jsxs("div",{className:"nav-group",children:[t.jsxs("button",{className:"nav-group-header",onClick:()=>{qe(k=>{if(k[u.id])return{...k,[u.id]:!1};{const F={};return bt.forEach(T=>{F[T.id]=T.id===u.id}),F}})},type:"button",children:[t.jsx("i",{className:`fas ${u.icon} admin-nav-icon`}),t.jsx("span",{className:"nav-group-label",children:u.label}),t.jsx("i",{className:`fas fa-chevron-down nav-group-chevron admin-nav-chevron ${Ae[u.id]?"expanded":""}`})]}),t.jsx("div",{className:`nav-group-items ${Ae[u.id]?"expanded":""}`,children:u.items.map(k=>t.jsx("button",{className:`admin-tab admin-tab-nested ${wt===k.id?"active":""}`,onClick:()=>{Ma(k.id),Oi(!1)},children:k.label},k.id))})]},u.id))]})]}),t.jsxs("div",{className:"admin-body",children:[wt==="dashboard"&&t.jsxs("article",{className:"screen-card",id:"dashboard",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Mr("dashboard"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-chart-line admin-section-icon"}),"Dashboard"]}),t.jsx("p",{children:"Key KPIs, monthly collections, recent payments."})]})}),t.jsxs("div",{className:"admin-dashboard-main-card",children:[t.jsxs("div",{className:"kpi-grid",children:[t.jsxs("button",{type:"button",className:"admin-dashboard-kpi-card admin-dashboard-kpi-button",onClick:()=>Ma("members"),children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-users admin-dashboard-kpi-icon"}),"Total Members"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value",children:Pr(i.length)}),t.jsx("small",{className:"admin-dashboard-kpi-description",children:"Active members"})]}),t.jsxs("button",{type:"button",className:"admin-dashboard-kpi-card admin-dashboard-kpi-button",onClick:()=>Ma("payments"),children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-dollar-sign admin-dashboard-kpi-icon--green"}),"Total Collected"]}),t.jsxs("h4",{className:"admin-dashboard-kpi-value",children:["$",Pr(yr.collectedMonth,{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsxs("small",{className:"admin-dashboard-kpi-description",children:["$",Pr(yr.collectedYear,{minimumFractionDigits:2,maximumFractionDigits:2})," ","YTD"]})]}),t.jsxs("button",{type:"button",className:"admin-dashboard-kpi-card admin-dashboard-kpi-button",onClick:()=>Ma("members"),children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-exclamation-triangle admin-dashboard-kpi-icon--red"}),"Total Outstanding"]}),t.jsxs("h4",{className:`admin-dashboard-kpi-value ${yr.outstanding>0?"admin-dashboard-kpi-value--red":"admin-dashboard-kpi-value--default"}`,children:["$",Pr(yr.outstanding,{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsxs("small",{className:"admin-dashboard-kpi-description",children:["Expected $",Pr(yr.expectedAnnual,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),t.jsxs("button",{type:"button",className:"admin-dashboard-kpi-card admin-dashboard-kpi-button",onClick:()=>Ma("members"),children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:`fas fa-exclamation-circle ${yr.overdueMembers>0?"admin-dashboard-kpi-icon--red":"admin-dashboard-kpi-icon--gray"}`}),"Overdue Members"]}),t.jsx("h4",{className:`admin-dashboard-kpi-value ${yr.overdueMembers>0?"admin-dashboard-kpi-value--red":"admin-dashboard-kpi-value--default"}`,children:Pr(yr.overdueMembers)}),t.jsx("small",{className:"admin-dashboard-kpi-description",children:"Requires attention"})]})]}),t.jsxs("div",{className:"admin-dashboard-last-updated",children:["Last updated: ",xo]}),t.jsxs("div",{className:"admin-dashboard-chart-card",children:[t.jsx("div",{className:"card-header",children:t.jsxs("div",{children:[t.jsxs("h4",{children:[t.jsx("i",{className:"fas fa-chart-bar admin-dashboard-chart-header-icon"}),"Monthly Collections  Last 12 Months"]}),t.jsx("p",{children:"Expected contribution is $800 per member per year"})]})}),t.jsxs("div",{ref:Pa,className:"chart admin-dashboard-chart-container",onMouseMove:u=>{if(Ir&&Pa.current){const k=Pa.current.getBoundingClientRect();Ss({x:u.clientX-k.left,y:u.clientY-k.top})}},children:[Er.map(u=>t.jsx("div",{className:"admin-dashboard-chart-bar",style:{height:`${u.percentage}%`},"data-month":u.month,onMouseEnter:k=>{if(Vi(u),Pa.current){const B=Pa.current.getBoundingClientRect();Ss({x:k.clientX-B.left,y:k.clientY-B.top})}},onMouseMove:k=>{if(Ir?.monthKey===u.monthKey&&Pa.current){const B=Pa.current.getBoundingClientRect();Ss({x:k.clientX-B.left,y:k.clientY-B.top})}},onMouseLeave:()=>Vi(null)},u.monthKey)),Ir&&Pa.current&&(()=>{const B=Pa.current.getBoundingClientRect(),F=window.innerWidth,T=window.innerHeight;let K=Us.x+10,Y=Us.y-50;return B.left+K+220>F-10&&(K=Us.x-220-10),B.left+K<10&&(K=10),B.top+Y<10&&(Y=10-B.top),B.top+Y+40>T-10&&(Y=Us.y-40-10,B.top+Y<10&&(Y=10-B.top)),t.jsxs("div",{className:"admin-dashboard-chart-tooltip",style:{left:`${K}px`,top:`${Y}px`},children:[Ir.month," ",new Date().getFullYear(),": $",Ir.value.toFixed(2),Ir.count>0&&` (${Ir.count} payment${Ir.count>1?"s":""})`]})})()]})]}),t.jsxs("div",{className:"admin-dashboard-payments-card",children:[t.jsxs("div",{className:"card-header",children:[t.jsxs("h4",{children:[t.jsx("i",{className:"fas fa-clock admin-icon"}),"Recent Payments"]}),t.jsx("button",{className:"text-btn",onClick:()=>Ma("members"),children:"View all"})]}),t.jsx(fi,{columns:["Member","Period","Amount","Method","Status","Date"],rows:Ai.length>0?Ai:[{Member:"No payments yet",Period:"-",Amount:"-",Method:"-",Status:"-",Date:"-"}]})]})]})]}),wt==="members"&&t.jsxs("article",{className:"screen-card",id:"members",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:[t.jsxs("div",{children:[Mr("members"),t.jsx("h3",{children:"Members List"}),t.jsx("p",{children:"Manage all members and their subscriptions."})]}),(i||[]).filter(u=>u.status==="Pending").length>0&&t.jsxs("div",{style:{padding:"10px 16px",background:"#fee2e2",borderRadius:"4px",fontSize:"0.875rem",fontWeight:"600",color:"#ef4444",border:"1px solid #ef4444"},children:[" Pending Approval: ",(i||[]).filter(u=>u.status==="Pending").length]}),t.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:t.jsx("button",{className:"primary-btn",onClick:()=>{Se(!0),ct(null),jr({name:"",email:"",phone:"",status:"Active",balance:"250",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"})},children:"+ Add Member"})})]})}),se&&t.jsx("div",{className:"admin-members-form-overlay",onClick:u=>{u.target===u.currentTarget&&(St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),ir(null),Se(!1),ct(null))},children:t.jsx("div",{className:"card admin-members-form-container",onClick:u=>u.stopPropagation(),children:t.jsxs("div",{className:"admin-members-form-header",children:[t.jsxs("div",{className:"admin-members-form-header-top",children:[t.jsxs("h4",{className:"admin-members-form-title",children:[t.jsx("i",{className:"fas fa-user-plus","aria-hidden":"true"}),He?"Edit Member":"Add New Member"]}),t.jsx("button",{type:"button",className:"admin-members-form-close",onClick:()=>{St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),ir(null),Se(!1),ct(null)},"aria-label":"Close add member form",children:""})]}),t.jsxs("form",{className:"form-grid",onSubmit:He?kc:Xs,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user admin-members-form-icon","aria-hidden":"true"}),"Name ",t.jsx("span",{className:"admin-members-form-required",children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:ln.name,onChange:u=>{$n("name",u.target.value),(nn.name||rn==="name")&&(St(k=>({...k,name:!1})),rn==="name"&&ir(null))},className:nn.name&&rn==="name"?"admin-members-form-input-error":"","aria-invalid":nn.name,onFocus:u=>{nn.name&&rn==="name"&&(u.target.style.borderColor="#ef4444",u.target.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)")},onBlur:u=>{nn.name&&rn==="name"&&(u.target.style.borderColor="#ef4444")}})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-envelope","aria-hidden":"true",style:{marginRight:6}}),"Email ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"email",required:!0,value:ln.email,onChange:u=>{$n("email",u.target.value),(nn.email||rn==="email")&&(St(k=>({...k,email:!1})),rn==="email"&&ir(null))},style:{borderColor:nn.email&&rn==="email"?"#ef4444":void 0,borderWidth:nn.email&&rn==="email"?"2px":void 0,borderStyle:nn.email&&rn==="email"?"solid":void 0,outline:nn.email&&rn==="email"?"none":void 0,boxShadow:nn.email&&rn==="email"?"0 0 0 2px rgba(239, 68, 68, 0.2)":void 0},"aria-invalid":nn.email,onFocus:u=>{nn.email&&rn==="email"&&(u.target.style.borderColor="#ef4444",u.target.style.outline="none",u.target.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)")},onBlur:u=>{nn.email&&rn==="email"&&(u.target.style.borderColor="#ef4444",u.target.style.outline="none")}})]}),t.jsx("div",{children:t.jsx(Kd,{label:t.jsxs("span",{className:"admin-phone-input-label",children:[t.jsx("i",{className:"fas fa-phone admin-phone-input-label-icon","aria-hidden":"true"}),"WhatsApp Number ",t.jsx("span",{className:"admin-phone-input-required",children:"*"})]}),value:ln.phone,onChange:u=>{$n("phone",u.target.value),(nn.phone||rn==="phone")&&(St(k=>({...k,phone:!1})),rn==="phone"&&ir(null))},onError:u=>{Ue(u,"error"),St(k=>({...k,phone:!0})),ir("phone")},required:!0,className:nn.phone&&rn==="phone"?"admin-phone-input-error":"",placeholder:"Enter phone number"})}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-toggle-on","aria-hidden":"true",style:{marginRight:6}}),"Status"]}),t.jsxs("select",{value:ln.status,onChange:u=>$n("status",u.target.value),children:[t.jsx("option",{children:"Active"}),t.jsx("option",{children:"Inactive"}),t.jsx("option",{children:"Pending"})]})]}),!He&&t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-id-card","aria-hidden":"true",style:{marginRight:6}}),"Subscription Type"]}),t.jsxs("select",{value:ln.subscriptionType||"Lifetime",onChange:u=>$n("subscriptionType",u.target.value),children:[t.jsx("option",{value:"Lifetime",children:"Lifetime - $250/year"}),t.jsx("option",{value:"Yearly + Janaza Fund",children:"Yearly + Janaza Fund - $500/year"})]})]}),!He&&t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-wallet","aria-hidden":"true",style:{marginRight:6}}),"Balance"]}),t.jsx("input",{type:"number",inputMode:"numeric",value:ln.balance,readOnly:!0,style:{background:"#f9fafb",cursor:"not-allowed",color:"#666"}})]}),!He&&t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-day","aria-hidden":"true",style:{marginRight:6}}),"Start Date ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"date",value:ln.nextDue,onChange:u=>{const k=u.target.value;$n("nextDue",k),(nn.nextDue||rn==="nextDue")&&(St(B=>({...B,nextDue:!1})),rn==="nextDue"&&ir(null))},onBlur:u=>{const k=u.target.value;if(k){const B=new Date(k);if(isNaN(B.getTime())){Ue("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[F,T,K]=k.split("-").map(Number);if(T<1||T>12){Ue("Invalid month. Please enter a month between 01 and 12","error");return}if(K<1||K>31){Ue("Invalid day. Please enter a valid day for the selected month","error");return}const Y=new Date(F,T,0).getDate();if(K>Y){Ue(`Invalid date. ${T}/${F} only has ${Y} days`,"error");return}}},style:{borderRadius:"4px",width:"100%",borderColor:nn.nextDue&&rn==="nextDue"?"#ef4444":void 0,borderWidth:nn.nextDue&&rn==="nextDue"?"2px":void 0,borderStyle:nn.nextDue&&rn==="nextDue"?"solid":void 0,outline:nn.nextDue&&rn==="nextDue"?"none":void 0,boxShadow:nn.nextDue&&rn==="nextDue"?"0 0 0 2px rgba(239, 68, 68, 0.2)":void 0},"aria-invalid":nn.nextDue,onFocus:u=>{nn.nextDue&&rn==="nextDue"&&(u.target.style.borderColor="#ef4444",u.target.style.outline="none",u.target.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)")}})]}),!He&&t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-day","aria-hidden":"true",style:{marginRight:6}}),"End Date (optional)"]}),t.jsx("input",{type:"date",value:ln.lastPayment,onChange:u=>{const k=u.target.value;$n("lastPayment",k),(nn.lastPayment||rn==="lastPayment")&&(St(B=>({...B,lastPayment:!1})),rn==="lastPayment"&&ir(null))},onBlur:u=>{const k=u.target.value;if(k){const B=new Date(k);if(isNaN(B.getTime())){Ue("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[F,T,K]=k.split("-").map(Number);if(T<1||T>12){Ue("Invalid month. Please enter a month between 01 and 12","error");return}if(K<1||K>31){Ue("Invalid day. Please enter a valid day for the selected month","error");return}const Y=new Date(F,T,0).getDate();if(K>Y){Ue(`Invalid date. ${T}/${F} only has ${Y} days`,"error");return}}},style:{borderRadius:"4px",width:"100%",borderColor:nn.lastPayment&&rn==="lastPayment"?"#ef4444":void 0,borderWidth:nn.lastPayment&&rn==="lastPayment"?"2px":void 0,borderStyle:nn.lastPayment&&rn==="lastPayment"?"solid":void 0,outline:nn.lastPayment&&rn==="lastPayment"?"none":void 0,boxShadow:nn.lastPayment&&rn==="lastPayment"?"0 0 0 2px rgba(239, 68, 68, 0.2)":void 0},"aria-invalid":nn.lastPayment&&rn==="lastPayment",onFocus:u=>{nn.lastPayment&&rn==="lastPayment"&&(u.target.style.borderColor="#ef4444",u.target.style.outline="none",u.target.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)")}})]}),t.jsxs("div",{className:"form-actions",children:[t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{St({name:!1,email:!1,phone:!1,nextDue:!1,lastPayment:!1}),ir(null),Se(!1),ct(null)},children:"Cancel"}),t.jsx("button",{type:"submit",className:"primary-btn",disabled:ta,style:{position:"sticky",bottom:0,backgroundColor:"#5a31ea",zIndex:1},children:ta?"Saving...":He?"Update Member":"Add Member"})]})]})]})})}),i.filter(u=>u.status==="Pending").length>0&&t.jsxs("div",{style:{background:"#fee2e2",border:"2px solid #ef4444",borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:t.jsxs("h4",{style:{margin:0,color:"#ef4444",display:"flex",alignItems:"center",gap:"8px"},children:[" Pending Approval (",i.filter(u=>u.status==="Pending").length,")"]})}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:i.filter(u=>u.status==="Pending").map(u=>t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",background:"#fff",borderRadius:"4px",border:"1px solid #ef4444",flexWrap:"wrap",gap:"12px"},children:[t.jsxs("div",{style:{flex:"1 1 300px"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"4px",fontSize:"1rem"},children:u.name}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"4px"},children:u.email}),t.jsxs("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"4px"},children:[" ",u.phone||"No phone"]}),t.jsxs("div",{style:{fontSize:"0.8125rem",color:"#ef4444",marginTop:"8px"},children:[" Subscription: ",u.subscriptionType||"Lifetime"]})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",flexShrink:0},children:[t.jsx("button",{className:"primary-btn",onClick:()=>Da(u.id),style:{padding:"10px 20px",borderRadius:"4px",fontWeight:"600",fontSize:"0.875rem"},children:" Approve"}),t.jsx("button",{className:"ghost-btn",onClick:()=>tl(u),style:{padding:"10px 20px",borderRadius:"4px",fontWeight:"600",fontSize:"0.875rem"},children:"View Details"})]})]},u.id))})]}),t.jsx("div",{className:"admin-members-search-card",children:t.jsxs("div",{className:"admin-members-search-container",children:[t.jsxs("label",{className:"admin-members-search-label",children:[t.jsx("span",{className:"admin-members-search-label-text",children:" Search Members:"}),t.jsx("input",{type:"text",placeholder:"Search by member name...",value:Ht,onChange:u=>an(u.target.value),style:{flex:"1",padding:"10px 16px",border:"1px solid #e0e0e0",borderRadius:"4px",fontSize:"0.875rem",outline:"none",transition:"border-color 0.2s"},onFocus:u=>u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)",onBlur:u=>u.target.style.borderColor="#e0e0e0"})]}),Ht&&t.jsx("button",{type:"button",onClick:()=>an(""),style:{padding:"10px 16px",background:"#f9fafb",border:"1px solid #e0e0e0",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",color:"#666"},children:"Clear"}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:`${i.filter(k=>!Ht||k.name?.toLowerCase().includes(Ht.toLowerCase())).length} of ${i.length} members`})]})}),t.jsx("div",{className:"admin-members-table-card",children:t.jsx("div",{className:"table-wrapper",children:(()=>{const k=[...i.filter(Ne=>!Ht||Ne.name?.toLowerCase().includes(Ht.toLowerCase())).filter(Ne=>{if(fn==="All")return!0;const Qe=Ne.balance?.toString()||"",at=parseFloat(Qe.replace(/[^0-9.]/g,"")||0)||0;return(Ne.status==="Inactive"?"Inactive":Ne.status==="Pending"?"Pending":Qe.toLowerCase().includes("overdue")||at>0?"Overdue":"Active")===fn})].sort((Ne,Qe)=>{if(dr==="none")return 0;const at=vn=>{if(!vn)return 0;const sn=vn.toString(),cn=parseFloat(sn.replace(/[^0-9.]/g,"")||0);return isNaN(cn)?0:cn},Yt=at(Ne.balance),yt=at(Qe.balance);return dr==="asc"?Yt-yt:dr==="desc"?yt-Yt:0}),B=Math.ceil(k.length/ia)||1,F=Math.min(As,B),T=(F-1)*ia,K=T+ia,Y=k.slice(T,K),Ce=We==="Owner";return t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a"},children:"Filter by Status:"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Active",label:"Active"},{value:"Overdue",label:"Overdue"},{value:"Inactive",label:"Inactive"},{value:"Pending",label:"Pending"}].map(Ne=>t.jsx("button",{type:"button",onClick:()=>cr(Ne.value),style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:fn===Ne.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:fn===Ne.value?"#ffffff":"#6b7280",boxShadow:fn===Ne.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:Qe=>{fn!==Ne.value&&(Qe.target.style.background="#e5e7eb",Qe.target.style.color="#374151")},onMouseLeave:Qe=>{fn!==Ne.value&&(Qe.target.style.background="transparent",Qe.target.style.color="#6b7280")},children:Ne.label},Ne.value))})]}),t.jsxs("label",{style:{fontSize:"0.875rem",color:"#666"},children:["Sort by Outstanding:",t.jsxs("select",{value:dr,onChange:Ne=>Yn(Ne.target.value),style:{padding:"8px 12px",borderRadius:"4px",border:"1px solid #e5e7eb",background:"#ffffff",fontSize:"0.875rem"},children:[t.jsx("option",{value:"none",children:"None"}),t.jsx("option",{value:"asc",children:"Lowest first"}),t.jsx("option",{value:"desc",children:"Highest first"})]})]})]}),k.length===0?t.jsx("div",{className:"admin-empty-state",children:t.jsx("p",{className:"admin-empty-state-message",children:fn!=="All"?`No ${fn.toLowerCase()} members found.`:"No members found."})}):t.jsxs(t.Fragment,{children:[t.jsx(fi,{columns:["Member Name","Status","Outstanding","Actions"],rows:Y.map(Ne=>{const Qe=Ne.balance?.toString()||"",at=parseFloat(Qe.replace(/[^0-9.]/g,"")||0)||0,Yt=Ne.status==="Inactive"?"Inactive":Ne.status==="Pending"?"Pending":Qe.toLowerCase().includes("overdue")||at>0?"Overdue":"Active",yt=Yt==="Active"?"badge badge-active":Yt==="Overdue"?"badge badge-overdue":Yt==="Inactive"?"badge badge-inactive":"badge badge-pending";return{"Member Name":Ne.name,Status:{render:()=>t.jsx("span",{className:yt,children:Yt})},Outstanding:{render:()=>t.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:t.jsxs("span",{style:{color:at>0?"#ef4444":"#111827",fontWeight:at>0?600:500},children:["$",Pr(at,{minimumFractionDigits:2,maximumFractionDigits:2})]})})},Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",justifyContent:"flex-end"},children:[t.jsx("button",{className:"ghost-btn icon-btn icon-btn--view",onClick:()=>tl(Ne),title:"View member","aria-label":"View member",children:t.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),t.jsx("button",{className:"secondary-btn icon-btn icon-btn--edit",onClick:()=>Vl(Ne),title:"Edit member","aria-label":"Edit member",children:t.jsx("i",{className:"fas fa-pen","aria-hidden":"true"})}),Ce&&t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",style:{color:"#ef4444"},onClick:()=>{ci(`Delete member ${Ne.name}? This cannot be undone.`,()=>Ac(Ne.id))},"aria-label":"Delete member",children:t.jsx(_1,{text:"Delete member",position:"top",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})})]})}}})}),B>0&&k.length>0&&t.jsx(dc,{currentPage:F,totalPages:B,onPageChange:ji,pageSize:ia,onPageSizeChange:li,totalItems:k.length})]})]})})()})})]}),wt==="member-detail"&&W&&t.jsxs("article",{className:"screen-card",id:"member-detail",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Mr("member-detail"),t.jsx("h3",{children:"Member Detail"}),t.jsx("p",{children:"360 view with invoices, payment history, communications."})]})}),t.jsxs("div",{className:"admin-members-detail-card",children:[t.jsxs("div",{className:"admin-members-detail-header",children:[t.jsxs("div",{className:"admin-members-detail-header-info",children:[t.jsx("div",{className:"admin-members-detail-avatar",children:W.name.split(" ").map(u=>u[0]).join("")}),t.jsxs("div",{children:[t.jsx("h4",{className:"admin-members-detail-name",children:W.name}),t.jsxs("p",{className:"admin-members-detail-meta",children:["Member ID ",W.id,"  ",W.email,"  WhatsApp ",W.phone]})]})]}),t.jsx("div",{className:"admin-members-detail-header-actions",children:!ot&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"secondary-btn",onClick:()=>{Dn({...Lt,memberId:W.id}),Qt("invoice-builder")},children:"Create Invoice"}),t.jsx("button",{className:"primary-btn admin-members-detail-reminder-btn",onClick:()=>Ls(W,!1),title:"Send reminder",children:" Send Reminder"})]})})]}),t.jsxs("div",{className:"kpi-grid",children:[t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-exclamation-triangle admin-dashboard-kpi-icon--red"}),"Outstanding Balance"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--red",children:`$${eo(W.id).filter(F=>{const T=Co(F);return T==="Unpaid"||T==="Overdue"}).reduce((F,T)=>{const K=parseFloat(T.amount?.replace(/[^0-9.]/g,"")||0);return F+K},0).toFixed(2)}`})]}),t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-calendar-day admin-dashboard-kpi-icon"}),"Next Due Date"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value",children:W.nextDue})]}),t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-dollar-sign admin-dashboard-kpi-icon--green"}),"Last Payment"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value",children:W.lastPayment})]}),t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-info-circle admin-dashboard-kpi-icon"}),"Status"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value",children:W.status})]})]}),(()=>{const k=eo(W.id).filter(F=>Co(F)==="Overdue"),B=k.reduce((F,T)=>{const K=parseFloat(T.amount?.replace(/[^0-9.]/g,"")||0);return F+K},0);return k.length===0&&B<=0?null:t.jsxs("div",{style:{marginTop:"20px",padding:"16px 20px",borderRadius:"8px",background:"linear-gradient(135deg, rgba(248, 113, 113, 0.1) 0%, rgba(239, 68, 68, 0.12) 100%)",border:"1px solid rgba(239, 68, 68, 0.4)",color:"#ef4444",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("i",{className:"fas fa-exclamation-triangle","aria-hidden":"true",style:{fontSize:"1.125rem"}}),t.jsxs("span",{children:["This member has"," ",t.jsxs("strong",{children:[k.length," overdue invoice",k.length>1?"s":""]})," ","totaling"," ",t.jsxs("strong",{children:["$",Pr(B,{minimumFractionDigits:2,maximumFractionDigits:2})]}),". Please follow up as soon as possible."]})]})})(),t.jsxs("div",{className:"tabs",children:[t.jsx("button",{className:`tab ${zt==="Invoices"?"active":""}`,onClick:()=>$t("Invoices"),children:"Invoices"}),t.jsx("button",{className:`tab ${zt==="Payment History"?"active":""}`,onClick:()=>$t("Payment History"),children:"Payment History"}),t.jsx("button",{className:`tab ${zt==="Communication"?"active":""}`,onClick:()=>$t("Communication"),children:"Communication"}),t.jsx("button",{className:`tab ${zt==="Activity"?"active":""}`,onClick:()=>$t("Activity"),children:"Activity"}),t.jsx("button",{className:`tab ${zt==="Notes"?"active":""}`,onClick:()=>$t("Notes"),children:"Notes"})]}),zt==="Invoices"&&t.jsxs("div",{className:"tab-panel",children:[t.jsxs("div",{className:"table-header",children:[t.jsxs("div",{children:[t.jsx("h4",{children:"Invoices"}),(()=>{const k=eo(W.id).filter(F=>{const T=Co(F);return T==="Unpaid"||T==="Overdue"}),B=k.reduce((F,T)=>{const K=parseFloat(T.amount?.replace(/[^0-9.]/g,"")||0);return F+K},0);return t.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"0.875rem",color:"#666",fontWeight:"500"},children:["Total Outstanding: ",t.jsxs("strong",{style:{color:"#1a1a1a"},children:["$",B.toFixed(2)]}),k.length>0&&t.jsxs("span",{style:{marginLeft:"8px",color:"#666"},children:["(",k.length," unpaid invoice",k.length>1?"s":"",")"]})]})})()]}),t.jsx("div",{children:t.jsx("button",{className:"secondary-btn",onClick:()=>{Dn({...Lt,memberId:W.id}),Qt("invoice-builder")},children:"Create Invoice"})})]}),t.jsx(fi,{columns:["Invoice #","Period","Amount","Status","Due Date","Actions"],rows:eo(W.id).map(u=>{const k=Co(u),B=k==="Unpaid"||k==="Overdue",F=k==="Paid"||k==="Completed";return{"Invoice #":u.id,Period:u.period,Amount:u.amount,Status:{render:()=>t.jsx("span",{className:hi[u.status],children:u.status})},"Due Date":u.due,Screenshot:u.screenshot?{render:()=>t.jsx("button",{onClick:()=>{const T=window.open();T&&T.document.write(`
                                      <html>
                                        <head><title>Payment Screenshot - ${u.id}</title></head>
                                        <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                                          <img src="${u.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                                        </body>
                                      </html>
                                    `)},style:{padding:"4px 10px",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:"#ffffff",border:"none",borderRadius:"4px",fontSize:"0.85rem",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.3)"},onMouseEnter:T=>{T.target.style.background="linear-gradient(135deg, #4a28d0 0%, #6b3fff 100%)",T.target.style.boxShadow="0 4px 8px rgba(90, 49, 234, 0.4)"},onMouseLeave:T=>{T.target.style.background="linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",T.target.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.3)"},children:t.jsx("i",{className:"fas fa-image","aria-hidden":"true"})})}:"-",Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[B&&!ot&&t.jsx("button",{className:"primary-btn",style:{padding:"4px 10px",fontSize:"0.85rem",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",border:"none",color:"#ffffff",fontWeight:"600",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.3)"},onMouseEnter:T=>{T.target.style.background="linear-gradient(135deg, #059669 0%, #047857 100%)",T.target.style.boxShadow="0 4px 8px rgba(16, 185, 129, 0.4)"},onMouseLeave:T=>{T.target.style.background="linear-gradient(135deg, #10b981 0%, #059669 100%)",T.target.style.boxShadow="0 2px 4px rgba(16, 185, 129, 0.3)"},onClick:()=>{Hi(u),or({paymentMethod:"",imageFile:null,imagePreview:null,imageUrl:u.screenshot||"",reference:""}),ma({image:!1,reference:!1}),js(!0)},children:"Pay"}),!F&&!ot&&t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",onClick:()=>{ci(`Delete invoice ${u.id}? This cannot be undone.`,()=>Zs(u.id))},title:"Delete Invoice","aria-label":"Delete Invoice",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}})})]}),zt==="Payment History"&&t.jsx("div",{className:"tab-panel tab-panel--payment-history",children:(()=>{const u=l.filter(k=>k.memberId===W.id||k.memberEmail===W.email||k.member===W.name).sort((k,B)=>{const F=new Date(k.date||0);return new Date(B.date||0)-F});return u.length===0?t.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:t.jsx("p",{style:{margin:0,fontSize:"1rem"},children:"No payment history available for this member."})}):t.jsx("div",{className:"payment-history-list",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"},children:u.map((k,B)=>t.jsxs("div",{className:"payment-history-card",onClick:()=>{zs(k),ai(!0)},style:{background:"#fff",border:"none",borderRadius:"12px",padding:"20px",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.08)",cursor:"pointer"},onMouseEnter:F=>{F.currentTarget.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.15)",F.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:F=>{F.currentTarget.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.08)",F.currentTarget.style.transform="translateY(0)"},children:[t.jsxs("div",{className:"payment-history-card__main",style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[t.jsx("div",{children:t.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#000"},children:k.member||k.memberName||k.memberId||"N/A"})}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[k.amount&&t.jsx("strong",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#5a31ea"},children:k.amount}),k.status&&t.jsx("span",{className:`badge ${k.status==="Paid"||k.status==="Completed"?"badge-paid":k.status==="Pending Verification"||k.status==="Pending"?"badge-pending":"badge-unpaid"}`,style:{fontSize:"0.75rem",padding:"4px 10px"},children:k.status}),t.jsx("i",{className:"fas fa-chevron-right",style:{fontSize:"0.875rem",color:"#999"}})]})]}),t.jsxs("div",{style:{marginTop:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1},children:[k.date&&t.jsx("span",{style:{fontSize:"0.8125rem",color:"#666"},children:k.date}),t.jsx("span",{style:{fontSize:"0.8125rem",color:"#666"},children:wn(k)})]}),k.screenshot&&t.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"4px",overflow:"hidden",border:"2px solid #e0e0e0",flexShrink:0,marginLeft:"12px"},children:t.jsx("img",{src:k.screenshot,alt:"Payment attachment",style:{width:"100%",height:"100%",objectFit:"cover"}})})]})]},B))})})()}),zt==="Communication"&&t.jsxs("div",{className:"tab-panel",children:[t.jsx("h4",{children:"Communication History"}),(()=>{const u=m.filter(T=>T.memberId===W.id||T.memberEmail&&W.email&&T.memberEmail.toLowerCase()===W.email.toLowerCase()||T.memberName&&W.name&&T.memberName.toLowerCase()===W.name.toLowerCase()).sort((T,K)=>{const Y=new Date(T.date||T.timestamp||0);return new Date(K.date||K.timestamp||0)-Y});if(u.length===0)return t.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:t.jsx("p",{style:{margin:0,fontSize:"1rem"},children:"No communication history available for this member."})});const k=u.length,B=u.filter(T=>T.channel==="Email").length,F=u.filter(T=>T.channel==="WhatsApp").length;return t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",padding:"12px 16px",borderRadius:"4px",background:"#f9fafb",border:"1px solid #e5e7eb"},children:[t.jsx("span",{style:{fontWeight:600,fontSize:"0.95rem"},children:"Reminders sent to this member:"}),t.jsxs("span",{className:"badge badge-paid",children:["Total: ",k]}),t.jsxs("span",{className:"badge badge-unpaid",children:["Email: ",B]}),t.jsxs("span",{className:"badge badge-pending",children:["WhatsApp: ",F]})]}),t.jsx("ul",{className:"timeline",children:u.map((T,K)=>t.jsxs("li",{children:[t.jsxs("p",{children:[t.jsx("strong",{children:T.channel||"N/A"}),T.type?`  ${T.type}`:"","  ",T.message||"N/A","  ",T.date?new Date(T.date).toLocaleString():T.timestamp?new Date(T.timestamp).toLocaleString():"N/A"]}),T.status&&t.jsx("span",{className:hi[T.status]||"badge",children:T.status})]},K))})]})})()]}),zt==="Activity"&&t.jsxs("div",{className:"tab-panel",children:[t.jsx("h4",{children:"Activity Timeline"}),(()=>{const u=eo(W.id).map(T=>{const K=Co(T),Y=T.createdAt||T.date||T.due||null;return{type:"Invoice",date:Y?new Date(Y):null,label:`Invoice ${T.id||""}  ${T.period||""}  ${T.amount||""}  ${K||"N/A"}`}}),k=(l||[]).filter(T=>T.memberId===W.id||T.memberEmail&&W.email&&T.memberEmail.toLowerCase()===W.email.toLowerCase()||T.member&&W.name&&T.member.toLowerCase()===W.name.toLowerCase()).map(T=>({type:"Payment",date:T.date?new Date(T.date):null,label:`${T.method||"Payment"}  ${T.amount||""}  ${T.status||""}`})),B=(m||[]).filter(T=>{const K=T.memberEmail&&W.email&&T.memberEmail.toLowerCase()===W.email.toLowerCase(),Y=T.memberName&&W.name&&T.memberName.toLowerCase()===W.name.toLowerCase();return K||Y}).map(T=>({type:T.type||T.channel||"Communication",date:T.date?new Date(T.date):T.timestamp?new Date(T.timestamp):null,label:T.message||"Communication sent"})),F=[...u,...k,...B].filter(T=>T.date).sort((T,K)=>K.date-T.date);return F.length===0?t.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:t.jsx("p",{style:{margin:0,fontSize:"1rem"},children:"No activity recorded for this member yet."})}):t.jsx("div",{className:"payment-history-list",children:F.map((T,K)=>t.jsxs("div",{className:"payment-history-card",children:[t.jsx("div",{className:"payment-card-header",children:t.jsxs("div",{className:"payment-card-main",children:[t.jsx("span",{className:"payment-amount",children:T.type}),t.jsx("span",{className:"payment-meta",children:T.date?.toLocaleString()})]})}),t.jsx("div",{className:"payment-card-body",children:t.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#4b5563"},children:T.label})})]},K))})})()]}),zt==="Notes"&&t.jsxs("div",{className:"tab-panel",children:[t.jsx("h4",{children:"Internal Notes"}),t.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"12px"},children:["These notes are ",t.jsx("strong",{children:"internal only"})," and are not visible to members."]}),t.jsx("textarea",{value:Yr,onChange:u=>Gi(u.target.value),rows:5,className:"settings-form__input",placeholder:"Add any internal notes about this member (e.g., context, special arrangements, follow-up actions)...",disabled:ot}),!ot&&t.jsx("div",{style:{marginTop:"12px",textAlign:"right"},children:t.jsx("button",{className:"primary-btn",onClick:()=>{const u={...Nr,[W.id]:Yr};kr(u),localStorage.setItem("memberNotes",JSON.stringify(u)),Ue("Internal note saved")},children:"Save Note"})}),ot&&t.jsx("p",{style:{marginTop:"8px",fontSize:"0.8rem",color:"#6b7280"},children:"You have read-only access. Contact an Owner or Admin to update notes."})]})]})]}),wt==="invoice-builder"&&t.jsxs("article",{className:"screen-card",id:"invoice-builder",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Mr("invoice-builder"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-file-invoice",style:{marginRight:"10px"}}),"Invoice Builder"]}),t.jsx("p",{children:"Create invoices for Lifetime or Yearly + Janaza Fund subscriptions."})]})}),Xt&&Ut&&t.jsxs("div",{style:{marginBottom:"24px",padding:"24px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderRadius:"12px",border:"2px solid #5a31ea",boxShadow:"0 4px 12px rgba(90, 49, 234, 0.15)"},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"#fff"},children:""}),t.jsxs("div",{children:[t.jsx("h4",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:"#1a1a1a"},children:"Invoice Has Been Created"}),t.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"0.875rem",color:"#666"},children:["Invoice for ",Ut.memberName," - ",Ut.period," (",Ut.amount,")"]})]})]})}),t.jsxs("div",{className:"success-card-actions",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginTop:"16px"},children:[t.jsxs("button",{className:"primary-btn",onClick:()=>{Ut.member&&(tl(Ut.member),Qt("member-detail"),oe(!1))},style:{padding:"12px 20px",fontSize:"0.9375rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px"}}),"Member Detail"]}),t.jsxs("button",{className:"secondary-btn",onClick:async()=>{Ut.member&&await Pl(Ut.member)},style:{padding:"12px 20px",fontSize:"0.9375rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-envelope",style:{marginRight:"8px"}}),"Send Reminder"]}),t.jsx("button",{className:"ghost-btn",onClick:()=>{oe(!1),gn(null)},style:{padding:"12px 20px",fontSize:"0.9375rem",fontWeight:"600"},children:"Close"})]})]}),t.jsxs("form",{className:"card form-grid",onSubmit:Yl,noValidate:!0,style:{padding:"40px",background:"linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)",boxShadow:"0 4px 16px rgba(90, 49, 234, 0.1)"},children:[t.jsxs("label",{style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Invoice Number"]}),t.jsx("input",{type:"text",value:Oa,readOnly:!0,className:"mono-input",style:{color:"#6b7280",background:"#f3f4f6",cursor:"not-allowed"}})]}),t.jsxs("label",{style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Member ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("div",{style:{position:"relative"},"data-member-dropdown":!0,children:[t.jsxs("div",{onClick:()=>Ns(!Ji),style:{padding:"14px 16px",border:"none",borderRadius:"10px",background:"#f8f9ff",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",color:Lt.memberId?"#1a1a1a":"#9ca3af",minHeight:"48px",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.08)",transition:"all 0.2s ease"},onMouseEnter:u=>{u.currentTarget.style.boxShadow="0 4px 8px rgba(90, 49, 234, 0.12)"},onMouseLeave:u=>{u.currentTarget.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.08)"},children:[t.jsx("span",{children:Lt.memberId?(()=>{const u=i.find(k=>k.id===Lt.memberId);return u?`${u.name} (${u.id})`:"Select Member"})():"Select Member"}),t.jsx("span",{style:{fontSize:"0.75rem",color:"#5a31ea",transition:"transform 0.2s ease",transform:Ji?"rotate(180deg)":"rotate(0deg)",display:"inline-block"},children:""})]}),Ji&&t.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#fff",border:"none",borderRadius:"10px",marginTop:"8px",maxHeight:"300px",overflow:"hidden",zIndex:1e3,boxShadow:"0 8px 24px rgba(90, 49, 234, 0.15)"},children:[t.jsxs("div",{style:{padding:"12px",borderBottom:"none",background:"linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.05)"},children:[t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:"text",placeholder:" Search member by name or ID...",value:Zn,onChange:u=>Ri(u.target.value),onClick:u=>u.stopPropagation(),onKeyDown:u=>u.stopPropagation(),autoFocus:!0,style:{width:"100%",padding:"12px 36px 12px 16px",border:"none",borderRadius:"4px",fontSize:"0.875rem",outline:"none",background:"#ffffff",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.08)",color:"#1a1a1a"},onFocus:u=>{u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)"},onBlur:u=>{u.target.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.08)"}}),Zn&&t.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),Ri("")},style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#666",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center"},title:"Clear search",children:""})]}),Zn&&t.jsxs("div",{style:{marginTop:"8px",fontSize:"0.75rem",color:"#666"},children:[i.filter(u=>!Zn||u.name?.toLowerCase().includes(Zn.toLowerCase())||u.id?.toLowerCase().includes(Zn.toLowerCase())).length," member",i.filter(u=>!Zn||u.name?.toLowerCase().includes(Zn.toLowerCase())||u.id?.toLowerCase().includes(Zn.toLowerCase())).length!==1?"s":""," found"]})]}),t.jsxs("div",{style:{maxHeight:"250px",overflowY:"auto"},children:[i.filter(u=>!Zn||u.name?.toLowerCase().includes(Zn.toLowerCase())||u.id?.toLowerCase().includes(Zn.toLowerCase())).map(u=>t.jsxs("div",{onClick:()=>{Dn({...Lt,memberId:u.id}),Ns(!1),Ri("")},style:{padding:"14px 16px",cursor:"pointer",borderBottom:"none",background:Lt.memberId===u.id?"linear-gradient(135deg, #f0f4ff 0%, #e8f0ff 100%)":"#fff",transition:"all 0.2s",boxShadow:Lt.memberId===u.id?"0 2px 4px rgba(90, 49, 234, 0.1)":"none"},onMouseEnter:k=>{Lt.memberId!==u.id&&(k.currentTarget.style.background="#f8f9ff")},onMouseLeave:k=>{Lt.memberId!==u.id&&(k.currentTarget.style.background="#fff")},children:[t.jsx("div",{style:{fontWeight:"500",color:"#1a1a1a"},children:u.name}),t.jsxs("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"2px"},children:[u.id," ",u.email?` ${u.email}`:""]})]},u.id)),i.filter(u=>!Zn||u.name?.toLowerCase().includes(Zn.toLowerCase())||u.id?.toLowerCase().includes(Zn.toLowerCase())).length===0&&t.jsx("div",{style:{padding:"16px",textAlign:"center",color:"#999",fontSize:"0.875rem"},children:"No members found"})]})]})]}),!Lt.memberId&&t.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"4px",display:"none"},children:"Please select a member"})]}),t.jsxs("label",{style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-id-card",style:{marginRight:"8px",color:"#5a31ea"}}),"Invoice Type ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{required:!0,value:Lt.invoiceType,onChange:u=>{const k=u.target.value;Dn({...Lt,invoiceType:k,amount:k==="Yearly + Janaza Fund"?"500":"250"})},style:{color:"#1a1a1a",background:"#ffffff",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.08)",transition:"all 0.2s"},className:"mono-input",onFocus:u=>{u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)"},onBlur:u=>{u.target.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.08)"},children:[t.jsx("option",{value:"",children:"Select Invoice Type"}),t.jsx("option",{value:"Lifetime",children:"Lifetime - $250"}),t.jsx("option",{value:"Yearly + Janaza Fund",children:"Yearly + Janaza Fund - $500"})]})]}),t.jsxs("label",{style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-calendar",style:{marginRight:"8px",color:"#5a31ea"}}),"Period ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"month",required:!0,value:Lt.period?(()=>{try{if(Lt.period.match(/^[A-Za-z]{3} \d{4}$/)){const u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],k=Lt.period.split(" "),B=k[0],F=parseInt(k[1],10),T=u.findIndex(K=>K.toLowerCase()===B.toLowerCase());if(T!==-1&&!isNaN(F)&&F>0){const K=String(T+1).padStart(2,"0");return`${F}-${K}`}}if(Lt.period.match(/^\d{4}-\d{2}$/))return Lt.period}catch(u){console.error("Error parsing period:",u)}return""})():"",onChange:u=>{const k=u.target.value;if(k&&k.match(/^\d{4}-\d{2}$/))try{const B=new Date(k+"-01");if(isNaN(B.getTime()))Dn({...Lt,period:""});else{const F=B.toLocaleDateString("en-US",{month:"short",year:"numeric"});Dn({...Lt,period:F})}}catch(B){console.error("Error formatting period:",B),Dn({...Lt,period:""})}else k||Dn({...Lt,period:""})},onFocus:u=>{u.currentTarget.select()},className:"mono-input",style:{color:"#1a1a1a"}})]}),t.jsxs("label",{style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ($) ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"number",inputMode:"numeric",required:!0,value:Lt.amount,onChange:u=>{const k=u.target.value.replace(/\\D/g,"");Dn({...Lt,amount:k})},className:"mono-input",style:{color:"#1a1a1a"}})]}),t.jsxs("label",{style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-calendar-check",style:{marginRight:"8px",color:"#5a31ea"}}),"Due Date ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"date",required:!0,value:Lt.due,onChange:u=>{const k=u.target.value;Dn({...Lt,due:k})},onBlur:u=>{const k=u.target.value;if(k){const B=new Date(k);if(isNaN(B.getTime())){Ue("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[F,T,K]=k.split("-").map(Number);if(T<1||T>12){Ue("Invalid month. Please enter a month between 01 and 12","error");return}if(K<1||K>31){Ue("Invalid day. Please enter a valid day for the selected month","error");return}const Y=new Date(F,T,0).getDate();if(K>Y){Ue(`Invalid date. ${T}/${F} only has ${Y} days`,"error");return}}},className:"mono-input",style:{color:"#1a1a1a",borderRadius:"4px",width:"100%"}})]}),t.jsxs("label",{className:"notes",style:{marginBottom:"24px"},children:[t.jsxs("span",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1a1a1a",marginBottom:"12px",display:"block"},children:[t.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"8px",color:"#5a31ea"}}),"Notes"]}),t.jsx("textarea",{placeholder:"Add context for this invoice",value:Lt.notes,onChange:u=>Dn({...Lt,notes:u.target.value}),className:"mono-input",style:{color:"#1a1a1a",minHeight:"100px"}})]}),t.jsxs("div",{style:{marginBottom:"16px",padding:"16px 18px",borderRadius:"10px",background:"#f9fafb",border:"1px solid #e5e7eb",fontSize:"0.875rem",color:"#4b5563"},children:[t.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"0.95rem",color:"#111827"},children:"Invoice Preview"}),t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Invoice #:"})," ",Oa]}),t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Member:"})," ",Lt.memberId?(()=>{const u=i.find(k=>k.id===Lt.memberId);return u?`${u.name} (${u.id})`:"Not selected"})():"Not selected"]}),t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Period:"})," ",Lt.period||"N/A"]}),t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Amount:"})," ",Lt.amount?`$${Number(Lt.amount||0).toFixed(2)}`:"$0.00"]}),t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Due Date:"})," ",Lt.due?new Date(Lt.due).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"]}),t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Status:"})," Unpaid"]}),Lt.notes&&t.jsxs("p",{style:{margin:"4px 0"},children:[t.jsx("strong",{children:"Notes:"})," ",Lt.notes]})]}),t.jsxs("div",{className:"form-actions",style:{marginTop:"8px",gap:"12px"},children:[t.jsxs("button",{type:"submit",className:"primary-btn",style:{padding:"14px 28px",fontSize:"1rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-file-invoice",style:{marginRight:"8px"}}),"Create Invoice"]}),t.jsx("button",{type:"button",className:"secondary-btn",onClick:async()=>{const u=i.find(Ne=>Ne.id===Lt.memberId);if(!u){Ue("Please select a member","error");return}if(!Lt.memberId||!Lt.period||!Lt.due){Ue("Please fill all required fields","error");return}const k=parseFloat(Lt.amount);if(!k||k<=0||isNaN(k)){Ue("Amount must be a positive number","error");return}const B={id:Ra(),memberId:Lt.memberId,memberName:u?.name||"",period:Lt.period,amount:`$${k.toFixed(2)}`,status:"Unpaid",due:Lt.due,method:"-",reference:"-",notes:Lt.notes||""};Ee(B),gn({...B,member:u}),oe(!0);const T=[...r.filter(Ne=>Ne.memberId===u.id&&(Ne.status==="Unpaid"||Ne.status==="Overdue")),B],K=T.reduce((Ne,Qe)=>Ne+parseFloat(Qe.amount.replace("$","")),0),Y=T.map(Ne=>` ${Ne.period}: ${Ne.amount} (Due: ${Ne.due}) - ${Ne.status}`).join(`
`),Ce=T.map(Ne=>`<li style="margin-bottom: 10px;">
                                <strong>${Ne.period}</strong>: ${Ne.amount} 
                                <span style="color: #666;">(Due: ${Ne.due})</span> - 
                                <strong>${Ne.status}</strong>
                              </li>`).join("");try{Ue("Sending reminder email...");const Qe=await fetch("http://localhost:4000/api/invoices/send-reminder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toEmail:u.email,toName:u.name,memberId:u.id,totalDue:`$${K.toFixed(2)}`,invoiceCount:T.length,invoiceListText:Y,invoiceListHTML:Ce,paymentMethods:"FPS, PayMe, or Bank Transfer",portalLink:`${window.location.origin}/member`})}),at=await Qe.json();if(!Qe.ok)throw new Error(at.error||"Failed to send email");console.log(" Email sent successfully:",at);const Yt={channel:"Email",message:`Payment reminder: ${u.name} (${u.email}) - $${K.toFixed(2)} due (${T.length} invoice${T.length>1?"s":""})`,status:"Delivered"};xe(Yt),Dn({memberId:"",period:Qa(),amount:"250",invoiceType:"Lifetime",due:"",notes:""}),ht(!1),Ue(` Invoice created and reminder sent to ${u.name} for $${K.toFixed(2)}!`),gn({...B,member:u}),oe(!0)}catch(Ne){console.error(" Email send error:",Ne);const Qe={channel:"Email",message:`Reminder attempt to ${u.name} - $${K.toFixed(2)} due`,status:"Failed"};xe(Qe),Ue(Ne.message||"Invoice created but failed to send email. Please check email configuration.","error"),gn({...B,member:u}),oe(!0)}},children:"Create & Send Reminder"})]})]})]}),wt==="automation"&&t.jsxs("article",{className:"screen-card",id:"automation",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Mr("automation"),t.jsx("h3",{children:"Reminders & Automation"}),t.jsx("p",{children:"Configure automated payment reminders and email templates."})]})}),t.jsx("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"clamp(24px, 4vw, 32px)",border:"none",marginTop:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:"clamp(16px, 3vw, 24px)",flexWrap:"wrap"},children:[t.jsxs("div",{style:{flex:"1 1 300px",minWidth:"250px"},children:[t.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"clamp(1.25rem, 3vw, 1.5rem)",fontWeight:"700",color:"#000"},children:"Automation Control"}),t.jsx("p",{style:{margin:0,fontSize:"clamp(0.875rem, 2vw, 0.9375rem)",color:"#666",lineHeight:"1.6"},children:"Enable or disable automated payment reminders system-wide"})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"clamp(12px, 2vw, 16px)",flexShrink:0},children:[t.jsx("span",{style:{fontSize:"clamp(0.75rem, 1.5vw, 0.875rem)",fontWeight:"600",color:j?"#000":"#999",textTransform:"uppercase",letterSpacing:"0.5px",minWidth:"28px",textAlign:"right"},children:j?"ON":"OFF"}),t.jsx("button",{type:"button",role:"switch","aria-checked":j,onClick:async()=>{const u=!j;A(u);try{await fetch("http://localhost:4000/api/email-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Kt,automationEnabled:u})}),Ue(u?"Automation enabled!":"Automation disabled!")}catch(k){console.error("Error saving automation status:",k),Ue("Failed to save automation status","error"),A(!u)}},style:{position:"relative",width:"clamp(60px, 8vw, 72px)",height:"clamp(34px, 5vw, 40px)",borderRadius:"999px",border:"none",background:j?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#f3f4f6",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",outline:"none",padding:0,display:"flex",alignItems:"center",boxShadow:j?"0 4px 12px rgba(0,0,0,0.15)":"inset 0 2px 4px rgba(0,0,0,0.1)",WebkitTapHighlightColor:"transparent"},onMouseEnter:u=>{u.currentTarget.style.transform="scale(1.05)"},onMouseLeave:u=>{u.currentTarget.style.transform="scale(1)"},children:t.jsx("span",{style:{position:"absolute",width:"clamp(26px, 4vw, 30px)",height:"clamp(26px, 4vw, 30px)",borderRadius:"50%",background:j?"#ffffff":"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",left:j?"auto":"4px",right:j?"4px":"auto",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",border:"1px solid rgba(0,0,0,0.1)"}})})]})]})}),t.jsxs("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"clamp(24px, 4vw, 32px)",border:"none",marginTop:"24px",boxShadow:"0 4px 12px rgba(90, 49, 234, 0.12)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{children:[t.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"clamp(1.25rem, 3vw, 1.5rem)",fontWeight:"700",color:"#000"},children:"Outstanding Members"}),t.jsx("p",{style:{margin:0,fontSize:"clamp(0.875rem, 2vw, 0.9375rem)",color:"#666",lineHeight:"1.6"},children:"Send manual reminder emails or WhatsApp messages to members with outstanding invoices"})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("button",{type:"button",onClick:()=>{Ln.includes("Email")?_a(u=>u.filter(k=>k!=="Email")):_a(u=>[...u,"Email"])},disabled:lr||Sr||!V,title:"Email",style:{padding:"12px",borderRadius:"8px",fontWeight:"600",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:lr||Sr||!V?"not-allowed":"pointer",transition:"all 0.2s ease",background:Ln.includes("Email")?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#ffffff",color:Ln.includes("Email")?"#ffffff":"#6b7280",border:Ln.includes("Email")?"2px solid #5a31ea":"2px solid #e5e7eb",boxShadow:Ln.includes("Email")?"0 2px 8px rgba(90, 49, 234, 0.3)":"none",opacity:lr||Sr||!V?.5:1,width:"48px",height:"48px"},onMouseEnter:u=>{!lr&&!Sr&&V&&!Ln.includes("Email")&&(u.target.style.background="#f3f4f6",u.target.style.color="#374151")},onMouseLeave:u=>{!lr&&!Sr&&V&&!Ln.includes("Email")&&(u.target.style.background="#ffffff",u.target.style.color="#6b7280")},children:t.jsx("i",{className:"fas fa-envelope"})}),t.jsx("button",{type:"button",onClick:()=>{Ln.includes("WhatsApp")?_a(u=>u.filter(k=>k!=="WhatsApp")):_a(u=>[...u,"WhatsApp"])},disabled:lr||Sr||!V,title:"WhatsApp",style:{padding:"12px",borderRadius:"8px",fontWeight:"600",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:lr||Sr||!V?"not-allowed":"pointer",transition:"all 0.2s ease",background:Ln.includes("WhatsApp")?"linear-gradient(135deg, #25D366 0%, #128C7E 100%)":"#ffffff",color:Ln.includes("WhatsApp")?"#ffffff":"#25D366",border:(Ln.includes("WhatsApp"),"2px solid #25D366"),boxShadow:Ln.includes("WhatsApp")?"0 2px 8px rgba(37, 211, 102, 0.3)":"none",opacity:lr||Sr||!V?.5:1,width:"48px",height:"48px"},onMouseEnter:u=>{!lr&&!Sr&&V&&!Ln.includes("WhatsApp")&&(u.target.style.background="#dcfce7",u.target.style.color="#16a34a")},onMouseLeave:u=>{!lr&&!Sr&&V&&!Ln.includes("WhatsApp")&&(u.target.style.background="#ffffff",u.target.style.color="#25D366")},children:t.jsx("i",{className:"fab fa-whatsapp"})}),Ln.length>0&&t.jsx("button",{className:"primary-btn",onClick:el,disabled:lr||Sr||!V,style:{padding:"12px 20px",borderRadius:"4px",fontWeight:"600",fontSize:"0.875rem",opacity:lr||Sr||!V?.5:1,cursor:lr||Sr||!V?"not-allowed":"pointer"},children:lr||Sr?"Sending...":"Send All"})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[i.filter(u=>r.filter(B=>B.memberId===u.id&&(B.status==="Unpaid"||B.status==="Overdue")).length>0).map(u=>{const k=r.filter(Y=>Y.memberId===u.id&&(Y.status==="Unpaid"||Y.status==="Overdue")),B=k.reduce((Y,Ce)=>{const Ne=parseFloat(Ce.amount?.replace(/[^0-9.]/g,"")||0);return Y+Ne},0),F=k.filter(Y=>Y.status==="Overdue").length,T=k.filter(Y=>Y.status==="Unpaid").length,K=Bo[u.id];return t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",background:"#f9f9f9",borderRadius:"4px",border:"1px solid #e0e0e0",gap:"16px",flexWrap:"wrap"},children:[t.jsxs("div",{style:{flex:"1 1 300px",minWidth:"200px"},children:[t.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#000",marginBottom:"4px"},children:u.name}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"4px"},children:u.email}),t.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"0.8125rem",color:"#666"},children:[t.jsxs("span",{children:[t.jsxs("strong",{style:{color:"#000"},children:["$",B.toFixed(2)]})," outstanding"]}),F>0&&t.jsxs("span",{style:{color:"#ef4444",fontWeight:"600"},children:[F," overdue"]}),T>0&&t.jsxs("span",{style:{color:"#ef4444",fontWeight:"600"},children:[T," unpaid"]})]})]}),t.jsx("div",{style:{display:"flex",gap:"8px",flexShrink:0},children:t.jsx("button",{className:"secondary-btn",onClick:()=>Ls(u,!1),disabled:K||ds[u.id],style:{padding:"12px 20px",borderRadius:"4px",fontWeight:"600",fontSize:"0.875rem",opacity:K||ds[u.id]?.5:1,cursor:K||ds[u.id]?"not-allowed":"pointer"},children:K||ds[u.id]?"Sending...":" Send Reminder"})})]},u.id)}),i.filter(u=>r.filter(B=>B.memberId===u.id&&(B.status==="Unpaid"||B.status==="Overdue")).length>0).length===0&&t.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#666",fontSize:"0.9375rem"},children:"No members with outstanding invoices"})]})]}),t.jsxs("div",{style:{marginTop:"32px"},children:[t.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"1.25rem",fontWeight:"700",color:"#000"},children:"Email Template"}),t.jsxs("div",{style:{background:"#fff",border:"none",borderRadius:"12px",padding:"32px",boxShadow:"0 4px 12px rgba(90, 49, 234, 0.12)"},children:[t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Email Subject"}),t.jsx("input",{type:"text",value:pi.subject,onChange:u=>To({...pi,subject:u.target.value}),placeholder:"Payment Reminder - Outstanding Balance",style:{width:"100%",padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}}),t.jsxs("small",{style:{display:"block",marginTop:"6px",fontSize:"0.75rem",color:"#666"},children:["You can use placeholders: ","{{member_name}}",", ","{{total_due}}",", ","{{invoice_count}}"]})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"HTML Email Template"}),t.jsx("textarea",{value:pi.htmlTemplate,onChange:u=>To({...pi,htmlTemplate:u.target.value}),rows:20,style:{width:"100%",padding:"14px",border:"1.5px solid #e0e0e0",borderRadius:"10px",fontSize:"0.875rem",fontFamily:"monospace",resize:"vertical",transition:"all 0.2s ease"},onFocus:u=>{u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)",u.target.style.boxShadow="0 0 0 3px rgba(0,0,0,0.05)"},onBlur:u=>{u.target.style.borderColor="#e0e0e0",u.target.style.boxShadow="none"},placeholder:"Enter HTML email template..."}),t.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"#f8f9fa",borderRadius:"4px",fontSize:"0.75rem",color:"#666"},children:[t.jsx("strong",{children:"Available Placeholders:"}),t.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[t.jsxs("li",{children:[t.jsx("code",{children:"{{member_name}}"})," - Member's full name"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{member_id}}"})," - Member ID"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{member_email}}"})," - Member email"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{total_due}}"})," - Total outstanding amount"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{invoice_count}}"})," - Number of unpaid invoices"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{invoice_list}}"})," - HTML list of invoices"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{payment_methods}}"})," - Payment methods list"]}),t.jsxs("li",{children:[t.jsx("code",{children:"{{portal_link}}"})," - Member portal URL"]})]})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",paddingTop:"16px",borderTop:"1px solid #e0e0e0"},children:[t.jsx("button",{className:"secondary-btn",onClick:Sl,style:{padding:"12px 24px",borderRadius:"4px",fontWeight:"600"},children:" Preview Template"}),t.jsx("button",{className:"primary-btn",onClick:kl,style:{padding:"12px 24px",borderRadius:"4px",fontWeight:"600"},children:" Save Email Template"})]})]})]}),t.jsxs("div",{id:"email-config-section",style:{marginTop:"32px"},children:[t.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"1.25rem",fontWeight:"700",color:"#000"},children:"Email Automation Configuration"}),t.jsxs("div",{style:{background:"#fff",border:"none",borderRadius:"12px",padding:"32px",boxShadow:"0 4px 12px rgba(90, 49, 234, 0.12)"},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px",marginBottom:"24px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Email Service"}),t.jsxs("select",{value:Kt.emailService,onChange:u=>ei({...Kt,emailService:u.target.value}),style:{width:"100%",padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"},children:[t.jsx("option",{value:"gmail",children:"Gmail"}),t.jsx("option",{value:"outlook",children:"Outlook"}),t.jsx("option",{value:"yahoo",children:"Yahoo"}),t.jsx("option",{value:"custom",children:"Custom SMTP"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:["Email Address ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"email",value:Kt.emailUser,onChange:u=>ei({...Kt,emailUser:u.target.value}),placeholder:"your-email@gmail.com",style:{width:"100%",padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:["App Password ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:bs?"text":"password",value:Kt.emailPassword,onChange:u=>ei({...Kt,emailPassword:u.target.value}),placeholder:"Enter app password",style:{width:"100%",padding:"12px",paddingRight:"45px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}}),t.jsx("button",{type:"button",onClick:()=>Ro(!bs),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666"},"aria-label":bs?"Hide password":"Show password",children:bs?t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),t.jsx("small",{style:{display:"block",marginTop:"6px",fontSize:"0.75rem",color:"#666"},children:"For Gmail: Use App Password (not regular password)"})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Schedule Time"}),t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t.jsx("input",{type:"time",value:Kt.scheduleTime,onChange:u=>{const k=u.target.value;ei({...Kt,scheduleTime:k});const[B]=k.split(":").map(Number);mi(B>=12?"PM":"AM")},style:{flex:1,padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}}),t.jsxs("select",{value:ti,onChange:u=>{const k=u.target.value;mi(k);const[B,F]=Kt.scheduleTime.split(":").map(Number);let T=B;k==="AM"&&B===12?T=0:k==="PM"&&B!==12?T=B+12:k==="AM"&&B>=12?T=B-12:k==="PM"&&B<12&&(T=B+12);const K=`${T.toString().padStart(2,"0")}:${F.toString().padStart(2,"0")}`;ei({...Kt,scheduleTime:K})},style:{padding:"12px 16px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit",background:"white",cursor:"pointer",fontWeight:"500"},children:[t.jsx("option",{value:"AM",children:"AM"}),t.jsx("option",{value:"PM",children:"PM"})]})]}),t.jsxs("small",{style:{display:"block",marginTop:"6px",fontSize:"0.75rem",color:"#666"},children:["Daily reminder time (24-hour format stored: ",Kt.scheduleTime,")"]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Reminder Interval (days)"}),t.jsx("input",{type:"number",min:"1",max:"30",value:Kt.reminderInterval,onChange:u=>ei({...Kt,reminderInterval:parseInt(u.target.value)||7}),style:{width:"100%",padding:"12px",border:"1.5px solid #e0e0e0",borderRadius:"4px",fontSize:"0.9375rem",fontFamily:"inherit"}}),t.jsx("small",{style:{display:"block",marginTop:"6px",fontSize:"0.75rem",color:"#666"},children:"Days between reminder emails (min: 1, max: 30)"})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",paddingTop:"16px",borderTop:"1px solid #e0e0e0"},children:[t.jsx("button",{className:"secondary-btn",onClick:Al,disabled:Wi||!Kt.emailUser||!Kt.emailPassword,style:{padding:"12px 24px",borderRadius:"4px",fontWeight:"600",opacity:Wi||!Kt.emailUser||!Kt.emailPassword?.5:1,cursor:Wi||!Kt.emailUser||!Kt.emailPassword?"not-allowed":"pointer"},children:Wi?"Sending...":" Test Email"}),t.jsx("button",{className:"primary-btn",onClick:Qs,style:{padding:"12px 24px",borderRadius:"4px",fontWeight:"600"},children:" Save Email Settings"})]})]})]}),t.jsx("div",{style:{marginTop:"32px",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{className:"primary-btn",onClick:wl,disabled:vo,style:{padding:"12px 24px",fontSize:"0.9375rem",fontWeight:"600",borderRadius:"4px",color:"#ffffff",opacity:vo?.6:1,cursor:vo?"not-allowed":"pointer"},children:vo?t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#ffffff"},children:[t.jsxs("svg",{style:{animation:"spin 1s linear infinite",width:"16px",height:"16px"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),t.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Saving..."]}):t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#ffffff"},children:[t.jsx("i",{className:"fas fa-save"}),"Save All Settings"]})})})]}),wt==="communications"&&t.jsxs("article",{className:"screen-card",id:"communications",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Mr("communications"),t.jsx("h3",{children:"Reminders Log"}),t.jsx("p",{children:"See all reminder emails and WhatsApp messages sent to members."})]})}),(()=>{const u=(C||[]).map(Qe=>{const at=Qe.status?String(Qe.status).trim():"",Yt=at.toLowerCase();let yt="Delivered";return Yt==="failed"?yt="Failed":Yt==="pending"?yt="Pending":at&&(yt=at),{status:yt}}),k=(m||[]).filter(Qe=>Qe.channel==="WhatsApp").map(Qe=>({status:(Qe.status?String(Qe.status).trim():"")||"Delivered"})),B=[...u,...k],F=B.length,T=u.length,K=k.length,Y=B.filter(Qe=>Qe.status==="Delivered").length,Ce=B.filter(Qe=>Qe.status==="Failed").length,Ne=B.filter(Qe=>Qe.status==="Pending").length;return t.jsxs("div",{className:"kpi-grid",style:{marginBottom:"24px"},children:[t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-bell admin-dashboard-kpi-icon"}),"Total Reminders"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value",children:Pr(F)})]}),t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-envelope admin-dashboard-kpi-icon"}),"Email Reminders"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value",children:Pr(T)})]}),t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fab fa-whatsapp admin-dashboard-kpi-icon--green"}),"WhatsApp Reminders"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value",children:Pr(K)})]}),t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-check-circle admin-dashboard-kpi-icon--green"}),"Delivered"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--green",children:Pr(Y)})]}),Ce>0&&t.jsxs("div",{className:"admin-dashboard-kpi-card admin-dashboard-kpi-card--error",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label admin-dashboard-kpi-label--error",children:[t.jsx("i",{className:"fas fa-times-circle admin-dashboard-kpi-icon--red"}),"Failed"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--red",children:Pr(Ce)})]}),Ne>0&&t.jsxs("div",{className:"admin-dashboard-kpi-card admin-dashboard-kpi-card--error",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label admin-dashboard-kpi-label--error",children:[t.jsx("i",{className:"fas fa-clock admin-dashboard-kpi-icon--red"}),"Pending"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--red",children:Pr(Ne)})]})]})})(),t.jsxs("div",{className:"admin-communications-filter-card",children:[t.jsxs("div",{className:"admin-communications-filters-container",children:[t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a"},children:"Filter by Status:"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Delivered",label:"Delivered"},{value:"Failed",label:"Failed"},{value:"Pending",label:"Pending"}].map(u=>t.jsx("button",{type:"button",onClick:()=>{Gs(u.value),Ua(1)},style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:Gr===u.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:Gr===u.value?"#ffffff":"#6b7280",boxShadow:Gr===u.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{Gr!==u.value&&(k.target.style.background="#e5e7eb",k.target.style.color="#374151")},onMouseLeave:k=>{Gr!==u.value&&(k.target.style.background="transparent",k.target.style.color="#6b7280")},children:u.label},u.value))})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a"},children:"Filter by Channel:"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Email",label:"Email"},{value:"WhatsApp",label:"WhatsApp"}].map(u=>t.jsx("button",{type:"button",onClick:()=>{Js(u.value),Ua(1)},style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:Jr===u.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:Jr===u.value?"#ffffff":"#6b7280",boxShadow:Jr===u.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{Jr!==u.value&&(k.target.style.background="#e5e7eb",k.target.style.color="#374151")},onMouseLeave:k=>{Jr!==u.value&&(k.target.style.background="transparent",k.target.style.color="#6b7280")},children:u.label},u.value))})]})]}),(()=>{const u=(C||[]).map(T=>({memberName:(i.find(Y=>Y.id===T.memberId)||i.find(Y=>Y.email&&T.memberEmail&&Y.email.toLowerCase()===T.memberEmail.toLowerCase()))?.name||T.memberEmail||"N/A",memberId:T.memberId,channel:"Email",type:T.reminderType==="overdue"?"Overdue (auto/manual)":"Upcoming (auto/manual)",message:`Email reminder - ${T.amount}  ${T.invoiceCount} invoice(s)`,date:T.sentAt?new Date(T.sentAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",status:(()=>{const Y=T.status?String(T.status).trim():"",Ce=Y.toLowerCase();return Ce==="failed"?"Failed":Ce==="pending"?"Pending":Y||"Delivered"})(),rawDate:T.sentAt||null,raw:T})),k=(m||[]).filter(T=>T.channel==="WhatsApp").map(T=>{const Y=(T.status?String(T.status).trim():"")||"Delivered";return{memberName:T.memberName||T.member||"N/A",memberId:T.memberId,channel:"WhatsApp",type:T.type||"Manual Outstanding Reminder",message:T.message,date:T.date,status:Y,rawDate:T.timestamp||null,raw:T}});let B=[...u,...k];B=B.filter(T=>{const K=T.status?String(T.status).trim():"Delivered";let Y=!1;if(Gr==="All")Y=!0;else{const Qe=Gr.toLowerCase(),at=K.toLowerCase();Y=Qe===at}const Ce=T.channel?String(T.channel).trim():"";return Y&&(Jr==="All"||Ce===Jr)}),B.sort((T,K)=>{const Y=T.rawDate?new Date(T.rawDate).getTime():0;return(K.rawDate?new Date(K.rawDate).getTime():0)-Y});const F=B.length;if(F===0){const T=(C||[]).map(Ne=>{const Qe=Ne.status?String(Ne.status).trim():"",at=Qe.toLowerCase();let Yt="Delivered";return at==="failed"?Yt="Failed":at==="pending"?Yt="Pending":Qe&&(Yt=Qe),{status:Yt,channel:"Email"}}),K=(m||[]).filter(Ne=>Ne.channel==="WhatsApp").map(Ne=>({status:Ne.status||"Delivered",channel:"WhatsApp"})),Y=T.length+K.length;let Ce="No reminders have been sent yet.";return Y>0&&(Gr!=="All"&&Jr!=="All"?Ce=`No ${Gr.toLowerCase()} ${Jr.toLowerCase()} reminders found.`:Gr!=="All"?Ce=`No ${Gr.toLowerCase()} reminders found.`:Jr!=="All"&&(Ce=`No ${Jr.toLowerCase()} reminders found.`)),t.jsx("div",{style:{padding:"32px 20px",textAlign:"center",color:"#666"},children:t.jsx("p",{style:{margin:0},children:Ce})})}return t.jsx(t.Fragment,{children:(()=>{const T=Math.max(Vs,10),K=Math.max(1,Math.ceil(F/T)),Y=Math.min(es,K),Ce=(Y-1)*T,Ne=Ce+T,Qe=B.slice(Ce,Ne);return t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{className:"table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Member"}),t.jsx("th",{children:"Channel"}),t.jsx("th",{children:"Type"}),t.jsx("th",{children:"Message"}),t.jsx("th",{children:"Date"}),t.jsx("th",{children:"Status"}),t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:Qe.map((at,Yt)=>t.jsxs("tr",{children:[t.jsxs("td",{children:[at.memberName||at.member||"N/A",at.memberId?` (${at.memberId})`:""]}),t.jsx("td",{children:at.channel||"N/A"}),t.jsx("td",{children:at.type||"-"}),t.jsx("td",{style:{maxWidth:"320px",whiteSpace:"normal"},children:at.message||"N/A"}),t.jsx("td",{children:at.date||"N/A"}),t.jsx("td",{children:t.jsx("span",{className:hi[at.status]||"badge",children:at.status||"N/A"})}),t.jsx("td",{children:t.jsxs("div",{style:{display:"flex",gap:"6px"},children:[t.jsx("button",{type:"button",className:"icon-btn icon-btn--view",title:"View full message","aria-label":"View full message",onClick:()=>{const yt=[`Member: ${at.memberName||"N/A"}`,`Channel: ${at.channel||"N/A"}`,`Type: ${at.type||"-"}`,`Date: ${at.date||"N/A"}`,"","Message:",at.message||"N/A"].join(`
`);window.alert(yt)},children:t.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),at.channel==="Email"&&at.status==="Failed"&&!ot&&t.jsx("button",{type:"button",className:"icon-btn icon-btn--edit",title:"Retry sending","aria-label":"Retry sending reminder",onClick:async()=>{try{const yt=at.raw,vn=yt?._id||yt?.id,cn=await fetch("http://localhost:4000/api/reminders/retry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reminderId:vn})}),yn=await cn.json();cn.ok?(Ue(yn.message||"Reminder retry queued"),typeof J=="function"&&J()):Ue(yn.error||"Failed to retry reminder","error")}catch(yt){console.error("Retry reminder failed",yt),Ue("Failed to retry reminder","error")}},children:t.jsx("i",{className:"fas fa-redo","aria-hidden":"true"})})]})})]},`${at.memberId||at.memberName||"row"}-${Ce+Yt}`))})]})}),t.jsxs("div",{style:{marginTop:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[t.jsxs("div",{style:{fontSize:"0.875rem",color:"#555"},children:["Showing"," ",t.jsxs("strong",{children:[Ce+1,"-",Math.min(Ne,F)]})," ","of ",t.jsx("strong",{children:F})," reminders"]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("button",{type:"button",className:"secondary-btn",disabled:Y<=1,onClick:()=>Ua(Math.max(1,Y-1)),children:"Previous"}),t.jsxs("span",{style:{fontSize:"0.875rem"},children:["Page ",t.jsx("strong",{children:Y})," of ",t.jsx("strong",{children:K})]}),t.jsx("button",{type:"button",className:"secondary-btn",disabled:Y>=K,onClick:()=>Ua(Math.min(K,Y+1)),children:"Next"})]})]})]})})()})})()]})]}),wt==="payment-methods"&&t.jsxs("article",{className:"screen-card",id:"payment-methods",children:[t.jsxs("header",{className:"screen-card__header",children:[t.jsxs("div",{children:[t.jsx("h3",{children:"Payment Methods"}),t.jsx("p",{children:"Configure payment methods and QR codes for member payments."})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",padding:"8px 16px",background:"#f8f9fa",borderRadius:"8px",fontSize:"0.875rem"},children:[t.jsx("span",{style:{color:"#666"},children:"Active Methods:"}),t.jsx("strong",{style:{color:"#000"},children:p.filter(u=>(u.name==="Alipay"||u.name==="PayMe"||u.name==="FPS"||u.name==="Direct Bank Transfer")&&u.visible).length})]})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"24px",marginTop:"32px"},children:p.filter(u=>u.name==="PayMe"||u.name==="FPS"||u.name==="Direct Bank Transfer").map(u=>{const k=u.name==="PayMe",B=async(F,T)=>{const K=F.target.files[0];if(K){if(!K.type.startsWith("image/")){Ue("Please upload an image file","error");return}Cn(Y=>({...Y,[T]:!0}));try{const Y="http://localhost:4000",Ce=new FormData;Ce.append("screenshot",K),Ce.append("uploadType","qr-code");const Ne=await fetch(`${Y}/api/upload/screenshot`,{method:"POST",body:Ce});if(!Ne.ok){let Yt="Failed to upload QR code";try{const yt=await Ne.json();Yt=yt.error||Yt,console.error("Upload error response:",yt)}catch(yt){console.error("Failed to parse error response:",yt),Yt=`Upload failed with status ${Ne.status}`}throw new Error(Yt)}const Qe=await Ne.json();if(!Qe.url)throw new Error("No URL returned from upload. Please try again.");const at=Qe.url;await z(T,{qrImageUrl:at}),Ue(`${T} QR code uploaded successfully!`)}catch(Y){console.error("Error uploading QR code:",Y),Ue(Y.message||"Failed to upload QR code. Please try again.","error")}finally{Cn(Y=>({...Y,[T]:!1}))}}};return t.jsxs("div",{style:{background:"#fff",border:"none",borderRadius:"20px",padding:"28px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",boxShadow:u.visible?"0 10px 30px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.05)":"0 2px 8px rgba(0,0,0,0.04)",display:"flex",flexDirection:"column",gap:"20px",overflow:"hidden"},onMouseEnter:F=>{u.visible&&(F.currentTarget.style.boxShadow="0 12px 36px rgba(0,0,0,0.12), 0 0 0 1px rgba(0,0,0,0.08)",F.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:F=>{u.visible&&(F.currentTarget.style.boxShadow="0 10px 30px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.05)",F.currentTarget.style.transform="translateY(0)")},children:[t.jsx("div",{onClick:async()=>{try{await z(u.name,{visible:!u.visible})}catch(F){console.error("Error updating payment method:",F)}},style:{position:"absolute",top:"20px",right:"20px",padding:"6px 14px",borderRadius:"20px",fontSize:"0.7rem",fontWeight:"700",background:u.visible?"linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%)":"#f5f5f5",color:u.visible?"#1b5e20":"#757575",textTransform:"uppercase",letterSpacing:"0.8px",cursor:"pointer",transition:"all 0.2s ease",userSelect:"none",border:u.visible?"1px solid #a5d6a7":"1px solid #e0e0e0",boxShadow:u.visible?"0 2px 4px rgba(0,0,0,0.1)":"none"},onMouseEnter:F=>{F.target.style.transform="scale(1.08)",F.target.style.boxShadow=u.visible?"0 4px 8px rgba(0,0,0,0.15)":"0 2px 4px rgba(0,0,0,0.1)"},onMouseLeave:F=>{F.target.style.transform="scale(1)",F.target.style.boxShadow=u.visible?"0 2px 4px rgba(0,0,0,0.1)":"none"},children:u.visible?" Active":" Inactive"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"18px",marginBottom:"4px",paddingBottom:"20px",borderBottom:"1px solid #e5e7eb"},children:[t.jsxs("div",{style:{width:"64px",height:"64px",borderRadius:"16px",background:u.name==="PayMe"?"linear-gradient(135deg, #00C300 0%, #009900 100%)":u.name==="FPS"?"linear-gradient(135deg, #0066CC 0%, #004499 100%)":"linear-gradient(135deg, #E60012 0%, #CC0011 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"28px",fontWeight:"700",color:"#fff",boxShadow:"0 6px 16px rgba(0,0,0,0.15)",position:"relative"},children:[u.name==="PayMe"?"P":u.name==="FPS"?"F":"B",u.visible&&t.jsx("div",{style:{position:"absolute",top:"-4px",right:"-4px",width:"18px",height:"18px",borderRadius:"50%",background:"#4caf50",border:"2px solid #fff",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{style:{fontSize:"10px",color:"#fff"},children:""})})]}),t.jsxs("div",{style:{flex:1},children:[t.jsx("h4",{style:{margin:0,fontSize:"1.625rem",fontWeight:"700",color:"#000",letterSpacing:"-0.5px",marginBottom:"6px"},children:u.name==="Direct Bank Transfer"?"Bank Transfer":u.name}),t.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#666",fontWeight:"500"},children:u.name==="PayMe"?"PayMe by HSBC":u.name==="FPS"?"Faster Payment System":"Direct Bank Transfer"})]})]}),k?t.jsx("div",{style:{background:"linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%)",borderRadius:"16px",padding:"28px",border:u.qrImageUrl?"1px solid #e0e0e0":"2px dashed #d0d0d0",minHeight:"300px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"20px",position:"relative",transition:"all 0.3s ease"},children:u.qrImageUrl?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{padding:"16px",background:"#fff",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0"},children:t.jsx("img",{src:u.qrImageUrl,alt:`${u.name} QR Code`,style:{maxWidth:"260px",maxHeight:"260px",width:"100%",height:"auto",borderRadius:"4px",display:"block",objectFit:"contain"}})}),t.jsx("button",{onClick:()=>{const F=document.createElement("input");F.type="file",F.accept="image/*",F.onchange=T=>B(T,u.name),F.click()},disabled:ra[u.name],style:{padding:"10px 20px",background:"#fff",border:"none",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.1)",borderRadius:"4px",fontSize:"0.875rem",fontWeight:"600",cursor:ra[u.name]?"not-allowed":"pointer",transition:"all 0.2s ease",color:"#000",opacity:ra[u.name]?.6:1},onMouseEnter:F=>{ra[u.name]||(F.target.style.background="#000",F.target.style.color="#fff",F.target.style.transform="translateY(-2px)",F.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)")},onMouseLeave:F=>{ra[u.name]||(F.target.style.background="#fff",F.target.style.color="#000",F.target.style.transform="translateY(0)",F.target.style.boxShadow="none")},children:ra[u.name]?" Uploading...":" Change QR Code"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"40px",color:"#bbb",marginBottom:"12px",border:"2px dashed #d0d0d0"},children:""}),t.jsx("p",{style:{margin:0,fontSize:"0.9375rem",color:"#666",textAlign:"center",marginBottom:"4px",fontWeight:"500"},children:"No QR code uploaded"}),t.jsx("p",{style:{margin:0,fontSize:"0.8125rem",color:"#999",textAlign:"center",marginBottom:"16px"},children:"Upload a QR code image to enable this payment method"}),t.jsxs("label",{style:{padding:"12px 24px",background:"linear-gradient(135deg, #1a1a1a 0%, #374151 100%)",color:"#fff",borderRadius:"10px",fontSize:"0.875rem",fontWeight:"600",cursor:ra[u.name]?"not-allowed":"pointer",display:"inline-block",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",opacity:ra[u.name]?.6:1},onMouseEnter:F=>{ra[u.name]||(F.target.style.transform="translateY(-2px)",F.target.style.boxShadow="0 6px 16px rgba(0,0,0,0.2)")},onMouseLeave:F=>{ra[u.name]||(F.target.style.transform="translateY(0)",F.target.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)")},children:[ra[u.name]?" Uploading...":" Upload QR Code",t.jsx("input",{type:"file",accept:"image/*",onChange:F=>B(F,u.name),style:{display:"none"},disabled:ra[u.name]})]})]})}):t.jsxs("div",{style:{background:"linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%)",borderRadius:"16px",padding:"24px",border:"1px solid #e0e0e0"},children:[t.jsxs("div",{style:{fontSize:"0.8125rem",fontWeight:"700",color:"#666",marginBottom:"18px",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Payment Details"})]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:u.details&&u.details.map((F,T)=>t.jsx("div",{style:{padding:"16px 18px",background:"#fff",borderRadius:"10px",fontSize:"0.9375rem",color:"#333",borderLeft:"4px solid #5a31ea",fontWeight:"500",boxShadow:"0 2px 6px rgba(0,0,0,0.06)",transition:"all 0.2s ease"},onMouseEnter:K=>{K.currentTarget.style.boxShadow="0 4px 10px rgba(0,0,0,0.1)",K.currentTarget.style.transform="translateX(4px)"},onMouseLeave:K=>{K.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.06)",K.currentTarget.style.transform="translateX(0)"},children:F},`${u.name}-detail-${T}`))})]}),t.jsxs("div",{onClick:async()=>{try{await z(u.name,{visible:!u.visible})}catch(F){console.error("Error updating payment method:",F)}},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"18px 20px",background:u.visible?"linear-gradient(135deg, #f8f9ff 0%, #e8f0ff 100%)":"#f9fafb",borderRadius:"12px",border:`2px solid ${u.visible?"#2196F3":"#e0e0e0"}`,cursor:"pointer",transition:"all 0.3s ease",marginTop:"4px"},onMouseEnter:F=>{F.currentTarget.style.background=u.visible?"linear-gradient(135deg, #bbdefb 0%, #90caf9 100%)":"#f3f4f6",F.currentTarget.style.borderColor=u.visible?"#1976D2":"#ccc",F.currentTarget.style.transform="scale(1.01)"},onMouseLeave:F=>{F.currentTarget.style.background=u.visible?"linear-gradient(135deg, #f8f9ff 0%, #e8f0ff 100%)":"#fafafa",F.currentTarget.style.borderColor=u.visible?"#2196F3":"#e0e0e0",F.currentTarget.style.transform="scale(1)"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("span",{style:{fontSize:"0.9375rem",fontWeight:"700",color:u.visible?"#1565C0":"#666",display:"block",marginBottom:"6px"},children:u.visible?" Enabled for members":" Disabled for members"}),t.jsx("span",{style:{fontSize:"0.8125rem",color:u.visible?"#1976D2":"#999",lineHeight:"1.4"},children:u.visible?"This payment method is visible to all members":"This payment method is hidden from members"})]}),t.jsxs("label",{className:"switch",style:{margin:0,marginLeft:"16px"},onClick:F=>F.stopPropagation(),children:[t.jsx("input",{type:"checkbox",checked:u.visible,onChange:async F=>{F.stopPropagation();try{await z(u.name,{visible:F.target.checked})}catch(T){console.error("Error updating payment method:",T)}},tabIndex:-1,onFocus:F=>F.target.blur()}),t.jsx("span",{})]})]})]},u.name)})})]}),wt==="payment-approvals"&&t.jsxs("article",{className:"screen-card",id:"payment-approvals",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("h3",{children:"Payment Approvals"}),t.jsx("p",{children:"Review and approve member payment submissions."})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("button",{className:"primary-btn",onClick:()=>{si(!0),mr(null),_n({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},children:"+ Add Payment"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Pending",label:"Pending"},{value:"Completed",label:"Approved"},{value:"Rejected",label:"Rejected"}].map(u=>t.jsx("button",{type:"button",onClick:()=>Ti(u.value),style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:En===u.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:En===u.value?"#ffffff":"#6b7280",boxShadow:En===u.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{En!==u.value&&(k.target.style.background="#e5e7eb",k.target.style.color="#374151")},onMouseLeave:k=>{En!==u.value&&(k.target.style.background="transparent",k.target.style.color="#6b7280")},children:u.label},u.value))}),t.jsxs("div",{style:{padding:"10px 16px",background:"#fee2e2",borderRadius:"4px",fontSize:"0.875rem",fontWeight:"600",color:"#ef4444",border:"1px solid #ef4444"},children:[" Pending: ",(o||[]).filter(u=>u.status==="Pending").length]})]})]})}),ks&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:u=>{u.target,u.currentTarget},children:t.jsxs("div",{className:"card",style:{maxWidth:"640px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative",background:"#ffffff"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t.jsx("h4",{style:{margin:0},children:oi?"Edit Payment":"Add New Payment"}),t.jsx("button",{className:"ghost-btn",type:"button",onClick:()=>{Ia({memberId:!1,amount:!1,method:!1,screenshot:!1}),ya(null),si(!1),mr(null),_n({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},style:{fontSize:"1.5rem",lineHeight:1,color:"#ef4444",fontWeight:"bold",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",border:"1px solid #ef4444",background:"transparent",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:u=>{u.target.style.background="#fee2e2"},onMouseLeave:u=>{u.target.style.background="transparent"},children:""})]}),t.jsxs("form",{className:"form-grid",onSubmit:oi?jo:us,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Member ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{value:jt.memberId,onChange:u=>{const k=i.find(B=>B.id===u.target.value);_n({...jt,memberId:u.target.value,member:k?k.name:""})},required:!0,children:[t.jsx("option",{value:"",children:"Select Member"}),i.map(u=>t.jsxs("option",{value:u.id,children:[u.name," (",u.id,")"]},u.id))]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Invoice ID"]}),t.jsx("input",{type:"text",value:jt.invoiceId,onChange:u=>_n({...jt,invoiceId:u.target.value}),placeholder:"INV-2025-001"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",value:jt.amount,onChange:u=>_n({...jt,amount:u.target.value}),placeholder:"$50",required:!0})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"8px",color:"#5a31ea"}}),"Payment Method ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{value:jt.method,onChange:u=>_n({...jt,method:u.target.value}),required:!0,children:[t.jsx("option",{value:"",children:"Select Method"}),t.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),t.jsx("option",{value:"FPS",children:"FPS"}),t.jsx("option",{value:"PayMe",children:"PayMe"}),t.jsx("option",{value:"Cash",children:"Cash"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Reference Number"]}),t.jsx("input",{type:"text",value:jt.reference,onChange:u=>_n({...jt,reference:u.target.value}),placeholder:"Transaction reference"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-day",style:{marginRight:"8px",color:"#5a31ea"}}),"Date"]}),t.jsx("input",{type:"text",value:jt.date,onChange:u=>_n({...jt,date:u.target.value}),placeholder:"01 Jan 2025"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-toggle-on",style:{marginRight:"8px",color:"#5a31ea"}}),"Status ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{value:jt.status,onChange:u=>_n({...jt,status:u.target.value}),required:!0,children:[t.jsx("option",{value:"Pending",children:"Pending"}),t.jsx("option",{value:"Completed",children:"Completed"}),t.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#5a31ea"}}),"Screenshot URL"," ",jt.method==="Cash"&&t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",value:jt.screenshot,onChange:u=>_n({...jt,screenshot:u.target.value}),placeholder:"https://...",required:jt.method==="Cash"}),jt.method==="Cash"&&!jt.screenshot&&t.jsx("small",{style:{color:"#ef4444",fontSize:"0.75rem",marginTop:"4px",display:"block"},children:"Screenshot is required for Cash payments"})]}),t.jsxs("label",{style:{gridColumn:"1 / -1"},children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"8px",color:"#5a31ea"}}),"Notes"]}),t.jsx("textarea",{value:jt.notes,onChange:u=>_n({...jt,notes:u.target.value}),rows:3,placeholder:"Additional notes..."})]}),t.jsxs("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:[t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{si(!1),mr(null),_n({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[oi?"Update":"Add"," Payment"]})]})]})]})}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"table-wrapper",children:(()=>{const u=(o||[]).filter(Y=>En==="All"?!0:Y.status===En).sort((Y,Ce)=>{if(Y.status==="Pending"&&Ce.status!=="Pending")return-1;if(Y.status!=="Pending"&&Ce.status==="Pending")return 1;const Ne=Y.createdAt?new Date(Y.createdAt):new Date(Y.date||0);return(Ce.createdAt?new Date(Ce.createdAt):new Date(Ce.date||0))-Ne}),k=Math.ceil(u.length/Br)||1,B=Math.min(va,k),F=(B-1)*Br,T=F+Br,K=u.slice(F,T);return t.jsxs(t.Fragment,{children:[t.jsx(fi,{columns:["Date","Member","Invoice ID","Amount","Method","Screenshot","Status","Actions"],rows:K.map(Y=>{const Ce=Y._id||Y.id,Ne=Ce?.toString?Ce.toString():Ce;return{Date:Y.date||(Y.createdAt?new Date(Y.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),Member:Y.member||"Unknown","Invoice ID":Y.invoiceId||"N/A",Amount:Y.amount||"$0",Method:wn(Y),Screenshot:{render:()=>Y.screenshot?t.jsx("a",{href:Y.screenshot,target:"_blank",rel:"noopener noreferrer",style:{color:"#000",textDecoration:"none"},title:"View screenshot","aria-label":"View screenshot",children:t.jsx("i",{className:"fas fa-image","aria-hidden":"true"})}):"N/A"},Status:{render:()=>t.jsx("span",{className:hi[Y.status]||"badge badge-unpaid",children:Y.status})},Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[Y.status==="Pending"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"icon-btn icon-btn--view",onClick:()=>{Ne&&Ea(Ne)},title:"Approve payment (By Admin)","aria-label":"Approve payment (By Admin)",children:t.jsx("i",{className:"fas fa-check","aria-hidden":"true"})}),t.jsx("button",{className:"icon-btn icon-btn--delete",onClick:()=>{Ne&&Ci(Ne)},title:"Reject payment (By Admin)","aria-label":"Reject payment (By Admin)",children:t.jsx("i",{className:"fas fa-times","aria-hidden":"true"})})]}),Y.status==="Rejected"&&Y.rejectionReason&&t.jsxs("span",{style:{fontSize:"0.75rem",color:"#666",fontStyle:"italic"},children:["Reason: ",Y.rejectionReason]}),Y.status==="Completed"&&(()=>{const Qe=Y.paidToAdmin||Y.paidToAdminName,Yt=["Screenshot","Bank Transfer","FPS","PayMe","Online Payment"].includes(Y.method);return Qe?t.jsx("span",{className:"icon-btn",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",color:"#4caf50",cursor:"default",padding:"4px 8px"},title:"Paid by Admin (Cash)","aria-label":"Paid by Admin (Cash)",children:t.jsx("i",{className:"fas fa-user-shield","aria-hidden":"true"})}):Yt?t.jsx("span",{className:"icon-btn",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",color:"#2196F3",cursor:"default",padding:"4px 8px"},title:"Paid Online","aria-label":"Paid Online",children:t.jsx("i",{className:"fas fa-globe","aria-hidden":"true"})}):t.jsxs("span",{style:{fontSize:"0.75rem",color:"#4caf50"},children:[" Approved by ",Y.approvedBy||"Admin"]})})(),t.jsx("button",{className:"secondary-btn icon-btn icon-btn--edit",onClick:()=>Cl(Y),title:"Edit Payment",children:t.jsx("i",{className:"fas fa-pen","aria-hidden":"true"})}),t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",style:{color:"#ef4444"},onClick:()=>{Ne&&So(Ne)},title:"Delete Payment",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}})}),k>0&&u.length>0&&t.jsx(dc,{currentPage:B,totalPages:k,onPageChange:Si,pageSize:Br,onPageSizeChange:Zi,totalItems:u.length})]})})()})})]}),wt==="invoices"&&t.jsxs("article",{className:"screen-card",id:"invoices",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:[t.jsxs("div",{children:[Mr("invoices"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-file-invoice",style:{marginRight:"10px"}}),"Invoices"]}),t.jsx("p",{children:"View and manage all invoices."})]}),t.jsxs("button",{className:"primary-btn",onClick:()=>{Ma("invoice-builder"),Ue("Redirecting to Invoice Builder...")},children:[t.jsx("i",{className:"fas fa-plus",style:{marginRight:"8px"}}),"Create Invoice"]})]})}),(()=>{const u=r||[],k=u.length,B=u.filter(Ce=>{const Ne=Ce?.status||"Unpaid";return Ne!=="Paid"&&Ne!=="Completed"}),F=u.filter(Ce=>{const Ne=Ce?.status||"Unpaid";return Ne==="Paid"||Ne==="Completed"}),T=u.filter(Ce=>Ce?.status==="Overdue"),K=B.reduce((Ce,Ne)=>{const Qe=parseFloat((Ne?.amount||"0").replace(/[^0-9.]/g,"")||0);return Ce+Qe},0),Y=F.reduce((Ce,Ne)=>{const Qe=parseFloat((Ne?.amount||"0").replace(/[^0-9.]/g,"")||0);return Ce+Qe},0);return t.jsxs("div",{className:"kpi-grid",style:{marginBottom:"24px"},children:[t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-file-invoice admin-dashboard-kpi-icon"}),"Total Invoices"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value",children:Pr(k)})]}),t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-check-circle admin-dashboard-kpi-icon--green"}),"Paid"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--green",children:Pr(F.length)})]}),t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-exclamation-circle admin-dashboard-kpi-icon--red"}),"Unpaid"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--red",children:Pr(B.length)})]}),t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-exclamation-triangle admin-dashboard-kpi-icon--red"}),"Overdue"]}),t.jsx("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--red",children:Pr(T.length)})]}),t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-dollar-sign admin-dashboard-kpi-icon--red"}),"Total Unpaid"]}),t.jsxs("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--red",children:["$",Pr(K,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),t.jsxs("div",{className:"admin-dashboard-kpi-card",children:[t.jsxs("p",{className:"admin-dashboard-kpi-label",children:[t.jsx("i",{className:"fas fa-dollar-sign admin-dashboard-kpi-icon--green"}),"Total Collected"]}),t.jsxs("h4",{className:"admin-dashboard-kpi-value admin-dashboard-kpi-value--green",children:["$",Pr(Y,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})(),t.jsx("div",{className:"card",children:t.jsx("div",{className:"table-wrapper",children:(()=>{let u=r||[];Vn!=="All"&&(u=u.filter(K=>{const Y=K.status||"Unpaid";return Vn==="Paid"?Y==="Paid"||Y==="Completed":Vn==="Unpaid"?Y!=="Paid"&&Y!=="Completed"&&Y!=="Overdue":Y===Vn}));const k=(Ys-1)*ki,B=k+ki,F=u.slice(k,B),T=Math.ceil(u.length/ki);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a"},children:"Filter by Status:"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Paid",label:"Paid"},{value:"Unpaid",label:"Unpaid"},{value:"Overdue",label:"Overdue"},{value:"Pending",label:"Pending"}].map(K=>t.jsx("button",{type:"button",onClick:()=>bi(K.value),style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:Vn===K.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:Vn===K.value?"#ffffff":"#6b7280",boxShadow:Vn===K.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:Y=>{Vn!==K.value&&(Y.target.style.background="#e5e7eb",Y.target.style.color="#374151")},onMouseLeave:Y=>{Vn!==K.value&&(Y.target.style.background="transparent",Y.target.style.color="#6b7280")},children:K.label},K.value))})]}),u.length===0?t.jsx("div",{className:"admin-empty-state",children:t.jsx("p",{className:"admin-empty-state-message",children:Vn!=="All"?`No ${Vn.toLowerCase()} invoices found.`:"No invoices found."})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"table-wrapper",children:t.jsx(fi,{columns:["Invoice ID","Member","Period","Amount","Due Date","Status","Actions"],rows:F.map(K=>{const Y=K.status==="Paid"||K.status==="Completed";return K.status,{"Invoice ID":K.id||K.invoiceId||"N/A",Member:K.memberName||K.member||"Unknown",Period:K.period||"N/A",Amount:K.amount||"$0","Due Date":K.due?new Date(K.due).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",Status:{render:()=>t.jsx("span",{className:K.status==="Paid"?"badge badge-paid":K.status==="Overdue"?"badge badge-overdue":K.status==="Pending"?"badge badge-pending":"badge badge-unpaid",children:K.status||"Unpaid"})},Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-start"},children:[t.jsx("button",{className:"icon-btn icon-btn--view",onClick:()=>{const Ce=i.find(Ne=>Ne.id===K.memberId||Ne.email===K.memberEmail||Ne.name===K.memberName);Ce&&(tl(Ce),Qt("member-detail"),$t("Invoices"))},title:"View Invoice Details","aria-label":"View Invoice Details",children:t.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),!Y&&t.jsx("button",{className:"icon-btn icon-btn--delete",onClick:()=>{(K.id||K._id)&&Zs(K.id||K._id)},title:"Delete Invoice","aria-label":"Delete Invoice",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}})})}),T>0&&r.length>0&&t.jsx(dc,{currentPage:Ys,totalPages:T,onPageChange:go,pageSize:ki,onPageSizeChange:Cs,totalItems:u.length})]})]})})()})})]}),wt==="payments"&&t.jsxs("article",{className:"screen-card",id:"payments",children:[t.jsx("header",{className:"screen-card__header",children:t.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:t.jsxs("div",{children:[Mr("payments"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"10px"}}),"Payments"]}),t.jsx("p",{children:"View and manage all payment transactions."})]})})}),ks&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:u=>{u.target===u.currentTarget&&(si(!1),mr(null),_n({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""}))},children:t.jsxs("div",{className:"card",style:{maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"8px",color:"#5a31ea"}}),oi?"Edit Payment":"Add New Payment"]}),t.jsx("button",{type:"button",onClick:()=>{si(!1),mr(null),_n({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},style:{background:"transparent",border:"none",fontSize:"1.5rem",color:"#666",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:u=>{u.target.style.background="#f3f4f6",u.target.style.color="#1a1a1a"},onMouseLeave:u=>{u.target.style.background="transparent",u.target.style.color="#666"},children:""})]}),t.jsxs("form",{className:"form-grid",onSubmit:oi?jo:us,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Member ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{ref:u=>{u&&oi&&setTimeout(()=>u.focus(),100)},value:jt.memberId,onChange:u=>{const k=i.find(B=>B.id===u.target.value);_n({...jt,memberId:u.target.value,member:k?k.name:""})},required:!0,children:[t.jsx("option",{value:"",children:"Select Member"}),i.map(u=>t.jsxs("option",{value:u.id,children:[u.name," (",u.id,")"]},u.id))]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Invoice ID"]}),t.jsx("input",{type:"text",value:jt.invoiceId,onChange:u=>_n({...jt,invoiceId:u.target.value}),placeholder:"INV-2025-001"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",value:jt.amount,onChange:u=>_n({...jt,amount:u.target.value}),placeholder:"$50",required:!0})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"8px",color:"#5a31ea"}}),"Payment Method ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{value:jt.method,onChange:u=>_n({...jt,method:u.target.value}),required:!0,children:[t.jsx("option",{value:"",children:"Select Method"}),t.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),t.jsx("option",{value:"FPS",children:"FPS"}),t.jsx("option",{value:"PayMe",children:"PayMe"}),t.jsx("option",{value:"Alipay",children:"Alipay"}),t.jsx("option",{value:"Credit Card",children:"Credit Card"}),t.jsx("option",{value:"Cash",children:"Cash"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-hashtag",style:{marginRight:"8px",color:"#5a31ea"}}),"Reference Number"]}),t.jsx("input",{type:"text",value:jt.reference,onChange:u=>_n({...jt,reference:u.target.value}),placeholder:"Transaction reference"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-day",style:{marginRight:"8px",color:"#5a31ea"}}),"Date"]}),t.jsx("input",{type:"text",value:jt.date,onChange:u=>_n({...jt,date:u.target.value}),placeholder:"01 Jan 2025"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-toggle-on",style:{marginRight:"8px",color:"#5a31ea"}}),"Status ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsxs("select",{value:jt.status,onChange:u=>_n({...jt,status:u.target.value}),required:!0,children:[t.jsx("option",{value:"Pending",children:"Pending"}),t.jsx("option",{value:"Completed",children:"Completed"}),t.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#5a31ea"}}),"Screenshot URL ",jt.method==="Cash"&&t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",value:jt.screenshot,onChange:u=>_n({...jt,screenshot:u.target.value}),placeholder:"https://...",required:jt.method==="Cash"}),jt.method==="Cash"&&!jt.screenshot&&t.jsx("small",{style:{color:"#ef4444",fontSize:"0.75rem",marginTop:"4px",display:"block"},children:"Screenshot is required for Cash payments"})]}),t.jsxs("label",{style:{gridColumn:"1 / -1"},children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-sticky-note",style:{marginRight:"8px",color:"#5a31ea"}}),"Notes"]}),t.jsx("textarea",{value:jt.notes,onChange:u=>_n({...jt,notes:u.target.value}),rows:3,placeholder:"Additional notes..."})]}),t.jsxs("div",{className:"form-actions",style:{gridColumn:"1 / -1"},children:[t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{si(!1),mr(null),_n({memberId:"",member:"",invoiceId:"",amount:"",method:"",reference:"",date:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),status:"Pending",screenshot:"",notes:""})},children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[oi?"Update":"Add"," Payment"]})]})]})]})}),t.jsx("div",{className:"card",children:t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a"},children:"Filter by Status:"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"4px",flexWrap:"wrap"},children:[{value:"All",label:"All"},{value:"Pending",label:"Pending"},{value:"Completed",label:"Completed"},{value:"Paid",label:"Paid"},{value:"Rejected",label:"Rejected"}].map(u=>t.jsx("button",{type:"button",onClick:()=>Ti(u.value),style:{padding:"8px 16px",borderRadius:"4px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:En===u.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:En===u.value?"#ffffff":"#6b7280",boxShadow:En===u.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{En!==u.value&&(k.target.style.background="#e5e7eb",k.target.style.color="#374151")},onMouseLeave:k=>{En!==u.value&&(k.target.style.background="transparent",k.target.style.color="#6b7280")},children:u.label},u.value))})]}),(()=>{const u=(o||[]).filter(Y=>En==="All"?!0:Y.status===En).sort((Y,Ce)=>{if(Y.status==="Pending"&&Ce.status!=="Pending")return-1;if(Y.status!=="Pending"&&Ce.status==="Pending")return 1;const Ne=Y.createdAt?new Date(Y.createdAt):new Date(Y.date||0);return(Ce.createdAt?new Date(Ce.createdAt):new Date(Ce.date||0))-Ne}),k=Math.ceil(u.length/Br)||1,B=Math.min(va,k),F=(B-1)*Br,T=F+Br,K=u.slice(F,T);return u.length===0?t.jsx("div",{className:"admin-empty-state",children:t.jsx("p",{className:"admin-empty-state-message",children:En!=="All"?`No ${En.toLowerCase()} payments found.`:"No payments found."})}):t.jsxs(t.Fragment,{children:[t.jsx(fi,{columns:["Date","Member","Invoice ID","Amount","Method","Screenshot","Status","Actions"],rows:K.map(Y=>{const Ce=Y._id||Y.id,Ne=Ce?.toString?Ce.toString():Ce;return{Date:Y.date||(Y.createdAt?new Date(Y.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),Member:Y.member||"Unknown","Invoice ID":Y.invoiceId||"N/A",Amount:Y.amount||"$0",Method:wn(Y),Screenshot:{render:()=>Y.screenshot?t.jsxs("a",{href:Y.screenshot,target:"_blank",rel:"noopener noreferrer",style:{color:"#5a31ea",textDecoration:"none"},children:[t.jsx("i",{className:"fas fa-image",style:{marginRight:"4px"}}),"View"]}):"N/A"},Status:{render:()=>t.jsx("span",{className:Y.status==="Paid"||Y.status==="Completed"?"badge badge-paid":Y.status==="Pending"?"badge badge-pending":Y.status==="Rejected"?"badge badge-overdue":"badge badge-active",children:Y.status})},Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsx("button",{className:"ghost-btn icon-btn icon-btn--edit",onClick:()=>Cl(Y),title:"Edit Payment",children:t.jsx("i",{className:"fas fa-pen","aria-hidden":"true"})}),t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",style:{color:"#ef4444"},onClick:()=>{Ne&&So(Ne)},title:"Delete Payment",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}})}),k>0&&u.length>0&&t.jsx(dc,{currentPage:B,totalPages:k,onPageChange:Si,pageSize:Br,onPageSizeChange:Zi,totalItems:u.length})]})})()]})})]}),wt==="donations"&&t.jsxs("article",{className:"screen-card",id:"donations",style:{minHeight:"400px"},children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:[t.jsxs("div",{children:[Mr("donations"),t.jsx("h3",{children:"Donations"}),t.jsx("p",{children:"Manage donation records from members and non-members."})]}),t.jsx("button",{className:"primary-btn",onClick:()=>Fi(!0),children:"+ Add Donation"})]})}),Os&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:u=>{u.target===u.currentTarget&&(Fi(!1),xn({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),Xa(null),ka(null),wi(""),ii(!1))},children:t.jsxs("div",{className:"card",style:{maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-heart",style:{marginRight:"8px",color:"#5a31ea"}}),"Add Donation"]}),t.jsx("button",{type:"button",onClick:()=>{Kn({donorName:!1,amount:!1,method:!1,date:!1,reference:!1,screenshot:!1}),Or(null),Fi(!1),xn({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),Xa(null),ka(null),wi(""),ii(!1)},style:{background:"transparent",border:"1px solid #ef4444",fontSize:"1.5rem",color:"#ef4444",fontWeight:"bold",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",cursor:"pointer",padding:"0",transition:"all 0.2s ease"},onMouseEnter:u=>{u.target.style.background="#f3f4f6",u.target.style.color="#1a1a1a"},onMouseLeave:u=>{u.target.style.background="transparent",u.target.style.color="#666"},children:""})]}),t.jsxs("form",{noValidate:!0,onSubmit:async u=>{if(u.preventDefault(),!!(()=>{const B=["donorName","amount","method","date","reference","screenshot"];if(Qn){let F=!0,T="";if(Qn==="donorName"&&!ut.donorName)F=!1,T="Donor name is required";else if(Qn==="amount")if(!ut.amount)F=!1,T="Amount is required";else{const K=parseFloat(ut.amount);(!K||K<=0||isNaN(K))&&(F=!1,T="Amount must be a positive number")}else Qn==="method"&&!ut.method?(F=!1,T="Payment method is required"):Qn==="date"&&!ut.date?(F=!1,T="Date is required"):Qn==="reference"?["Bank Transfer","FPS","PayMe"].includes(ut.method)&&!ut.reference.trim()&&(F=!1,T="Reference number is required for online payment methods"):Qn==="screenshot"&&(ut.method==="Cash"&&!ut.screenshot&&!ls||["Bank Transfer","FPS","PayMe"].includes(ut.method)&&!ut.screenshot&&!ls)&&(F=!1,T="Proof image is required");if(F)Kn(K=>({...K,[Qn]:!1})),Or(null);else return Kn(K=>({...K,[Qn]:!0})),Ue(T,"error"),!1}for(const F of B){let T=!0,K="";if(F==="donorName"&&!ut.donorName)T=!1,K="Donor name is required";else if(F==="amount")if(!ut.amount)T=!1,K="Amount is required";else{const Y=parseFloat(ut.amount);(!Y||Y<=0||isNaN(Y))&&(T=!1,K="Amount must be a positive number")}else F==="method"&&!ut.method?(T=!1,K="Payment method is required"):F==="date"&&!ut.date?(T=!1,K="Date is required"):F==="reference"?["Bank Transfer","FPS","PayMe"].includes(ut.method)&&!ut.reference.trim()&&(T=!1,K="Reference number is required for online payment methods"):F==="screenshot"&&(ut.method==="Cash"&&!ut.screenshot&&!ls||["Bank Transfer","FPS","PayMe"].includes(ut.method)&&!ut.screenshot&&!ls)&&(T=!1,K="Proof image is required");if(!T)return Kn({donorName:!1,amount:!1,method:!1,date:!1,reference:!1,screenshot:!1}),Kn(Y=>({...Y,[F]:!0})),Or(F),Ue(K,"error"),setTimeout(()=>{if(F==="donorName"){const Y=document.querySelectorAll('input[type="text"]'),Ce=Array.from(Y).find(Ne=>Ne.placeholder?.includes("donor name")||Ne.placeholder?.includes("Donor name"));Ce?.focus(),Ce?.scrollIntoView({behavior:"smooth",block:"center"})}else if(F==="amount"){const Y=document.querySelector('input[type="number"][inputmode="numeric"]');Y?.focus(),Y?.scrollIntoView({behavior:"smooth",block:"center"})}else if(F==="method"){const Y=document.querySelectorAll("select"),Ce=Array.from(Y).find(Ne=>Ne.options[0]?.text==="Select method");Ce?.focus(),Ce?.scrollIntoView({behavior:"smooth",block:"center"})}else if(F==="date"){const Y=document.querySelector('input[type="date"]');Y?.focus(),Y?.scrollIntoView({behavior:"smooth",block:"center"})}else if(F==="reference"){const Y=document.querySelectorAll('input[type="text"]'),Ce=Array.from(Y).find(Ne=>Ne.placeholder?.includes("Transaction reference")||Ne.placeholder?.includes("reference"));Ce?.focus(),Ce?.scrollIntoView({behavior:"smooth",block:"center"})}else if(F==="screenshot"){const Y=document.querySelectorAll('[style*="border"]');Array.from(Y).find(Ne=>Ne.style.border.includes("dashed"))?.scrollIntoView({behavior:"smooth",block:"center"})}},100),!1}return Kn({donorName:!1,amount:!1,method:!1,date:!1,reference:!1,screenshot:!1}),Or(null),!0})())try{let B=ut.screenshot;if(ls){const F="http://localhost:4000",T=new FormData;T.append("screenshot",ls),T.append("uploadType","donation-proof");const K=await fetch(`${F}/api/upload/screenshot`,{method:"POST",body:T});if(!K.ok){let Ce="Failed to upload image";try{Ce=(await K.json()).error||Ce}catch{Ce=`Upload failed with status ${K.status}`}throw new Error(Ce)}const Y=await K.json();if(!Y.url)throw new Error("No URL returned from upload. Please try again.");B=Y.url}await ce({...ut,amount:amountNum.toFixed(2),screenshot:B}),Ue("Donation added successfully!"),Fi(!1),xn({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),Xa(null),ka(null),wi(""),ii(!1),await de()}catch(B){Ue(B.message||"Failed to add donation","error")}},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user",style:{marginRight:"8px",color:"#5a31ea"}}),"Donor Name ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",value:ut.donorName,onChange:u=>{xn({...ut,donorName:u.target.value}),Wn.donorName&&(Kn(k=>({...k,donorName:!1})),Qn==="donorName"&&Or(null))},required:!0,placeholder:ut.isMember?"Will be filled automatically when member is selected":"Enter donor name",disabled:!!(ut.isMember&&ut.memberId),style:{background:ut.isMember&&ut.memberId?"#f9fafb":"#fff",cursor:ut.isMember&&ut.memberId?"not-allowed":"text",border:Wn.donorName?"2px solid #ef4444":void 0}}),ut.isMember&&ut.memberId&&t.jsx("span",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px",display:"block"},children:"Donor name is automatically set from selected member"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Amount ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"number",inputMode:"numeric",value:ut.amount,onChange:u=>{const k=u.target.value.replace(/[^0-9.]/g,"");xn({...ut,amount:k}),Wn.amount&&(Kn(B=>({...B,amount:!1})),Qn==="amount"&&Or(null))},placeholder:"100",required:!0,style:{border:Wn.amount?"2px solid #ef4444":void 0}})]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"12px"},children:"Donor Type"}),t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[t.jsxs("button",{type:"button",onClick:()=>xn({...ut,isMember:!0,memberId:"",donorName:ut.donorName}),style:{flex:"1",minWidth:"150px",padding:"14px 20px",borderRadius:"4px",border:"none",background:ut.isMember?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#f8f9ff",color:ut.isMember?"#ffffff":"#1a1a1a",boxShadow:ut.isMember?"0 4px 12px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)",fontWeight:"600",fontSize:"0.9375rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:u=>{ut.isMember||(u.currentTarget.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.15)",u.currentTarget.style.background="#f8f8f8")},onMouseLeave:u=>{ut.isMember||(u.currentTarget.style.borderColor="#e0e0e0",u.currentTarget.style.background="#fff")},children:[t.jsx("span",{style:{color:ut.isMember?"#ffffff":"inherit"},children:""}),t.jsx("span",{style:{color:ut.isMember?"#ffffff":"inherit"},children:"Member"})]}),t.jsxs("button",{type:"button",onClick:()=>xn({...ut,isMember:!1,memberId:"",donorName:ut.donorName}),style:{flex:"1",minWidth:"150px",padding:"14px 20px",borderRadius:"4px",border:"none",background:ut.isMember?"#f8f9ff":"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:ut.isMember?"#1a1a1a":"#ffffff",boxShadow:ut.isMember?"0 2px 4px rgba(90, 49, 234, 0.08)":"0 4px 12px rgba(90, 49, 234, 0.3)",fontWeight:"600",fontSize:"0.9375rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:u=>{ut.isMember&&(u.currentTarget.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.15)",u.currentTarget.style.background="#f8f8f8")},onMouseLeave:u=>{ut.isMember&&(u.currentTarget.style.borderColor="#e0e0e0",u.currentTarget.style.background="#fff")},children:[t.jsx("span",{style:{color:ut.isMember?"inherit":"#ffffff"},children:""}),t.jsx("span",{style:{color:ut.isMember?"inherit":"#ffffff"},children:"Non-Member"})]})]})]}),ut.isMember&&t.jsx("div",{style:{marginBottom:"16px"},children:t.jsxs("label",{children:["Select Member ",t.jsx("span",{style:{color:"#ef4444"},children:"*"}),t.jsxs("div",{style:{position:"relative"},"data-donation-member-dropdown":!0,children:[t.jsxs("div",{onClick:()=>ii(!Ki),style:{padding:"10px 16px",border:"1px solid #e0e0e0",borderRadius:"4px",background:"#fff",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",color:ut.memberId?"#000":"#999",minHeight:"42px"},children:[t.jsx("span",{children:ut.memberId?(()=>{const u=i.find(k=>k.id===ut.memberId);return u?`${u.name} (${u.id})`:"Select Member"})():"Select Member"}),t.jsx("span",{style:{fontSize:"0.75rem",color:"#5a31ea",transition:"transform 0.2s ease",transform:Ki?"rotate(180deg)":"rotate(0deg)",display:"inline-block"},children:""})]}),Ki&&t.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#fff",border:"1px solid #e0e0e0",borderRadius:"4px",marginTop:"4px",maxHeight:"300px",overflow:"hidden",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[t.jsxs("div",{style:{padding:"12px",borderBottom:"1px solid #e0e0e0",background:"#f9fafb"},children:[t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:"text",placeholder:" Search member by name or ID...",value:Ar,onChange:u=>wi(u.target.value),onClick:u=>u.stopPropagation(),onKeyDown:u=>u.stopPropagation(),autoFocus:!0,style:{width:"100%",padding:"10px 36px 10px 12px",border:"1px solid #e0e0e0",borderRadius:"4px",fontSize:"0.875rem",outline:"none",background:"#fff",transition:"border-color 0.2s"},onFocus:u=>{u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1), 0 4px 12px rgba(90, 49, 234, 0.12)",u.target.style.boxShadow="0 0 0 2px rgba(0,0,0,0.05)"},onBlur:u=>{u.target.style.borderColor="#e0e0e0",u.target.style.boxShadow="none"}}),Ar&&t.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),wi("")},style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#666",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center"},title:"Clear search",children:""})]}),Ar&&t.jsxs("div",{style:{marginTop:"8px",fontSize:"0.75rem",color:"#666"},children:[i.filter(u=>!Ar||u.name?.toLowerCase().includes(Ar.toLowerCase())||u.id?.toLowerCase().includes(Ar.toLowerCase())).length," member",i.filter(u=>!Ar||u.name?.toLowerCase().includes(Ar.toLowerCase())||u.id?.toLowerCase().includes(Ar.toLowerCase())).length!==1?"s":""," found"]})]}),t.jsxs("div",{style:{maxHeight:"250px",overflowY:"auto"},children:[i.filter(u=>!Ar||u.name?.toLowerCase().includes(Ar.toLowerCase())||u.id?.toLowerCase().includes(Ar.toLowerCase())).map(u=>t.jsxs("div",{onClick:()=>{xn({...ut,memberId:u.id,donorName:u.name||""}),ii(!1),wi("")},style:{padding:"12px 16px",cursor:"pointer",borderBottom:"1px solid #e5e7eb",background:ut.memberId===u.id?"#f9fafb":"#fff",transition:"background 0.2s"},onMouseEnter:k=>{ut.memberId!==u.id&&(k.target.style.background="#f9f9f9")},onMouseLeave:k=>{ut.memberId!==u.id&&(k.target.style.background="#fff")},children:[t.jsx("div",{style:{fontWeight:"500",color:"#000"},children:u.name}),t.jsxs("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"2px"},children:[u.id," ",u.email?` ${u.email}`:""]})]},u.id)),i.filter(u=>!Ar||u.name?.toLowerCase().includes(Ar.toLowerCase())||u.id?.toLowerCase().includes(Ar.toLowerCase())).length===0&&t.jsx("div",{style:{padding:"16px",textAlign:"center",color:"#999",fontSize:"0.875rem"},children:"No members found"})]})]})]}),!ut.memberId&&t.jsx("span",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"4px",display:"none"},children:"Please select a member"})]})}),t.jsxs("label",{children:["Payment Method ",t.jsx("span",{style:{color:"#ef4444"},children:"*"}),t.jsxs("select",{value:ut.method,onChange:u=>{xn({...ut,method:u.target.value}),Wn.method&&(Kn(k=>({...k,method:!1})),Qn==="method"&&Or(null))},required:!0,style:{border:Wn.method?"2px solid #ef4444":void 0},children:[t.jsx("option",{value:"",children:"Select method"}),t.jsx("option",{value:"Cash",children:"Cash"}),t.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),t.jsx("option",{value:"FPS",children:"FPS"}),t.jsx("option",{value:"PayMe",children:"PayMe"})]})]}),["Bank Transfer","FPS","PayMe"].includes(ut.method)&&t.jsxs("label",{children:["Reference Number ",t.jsx("span",{style:{color:"#ef4444"},children:"*"}),t.jsx("input",{type:"text",value:ut.reference,onChange:u=>{xn({...ut,reference:u.target.value}),Wn.reference&&(Kn(k=>({...k,reference:!1})),Qn==="reference"&&Or(null))},placeholder:"Transaction reference number",required:!0,style:{border:Wn.reference?"2px solid #ef4444":void 0}})]}),ut.method==="Cash"&&t.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Proof Image ",t.jsx("span",{style:{color:"#ef4444"},children:"*"}),t.jsx("div",{style:{border:Wn.screenshot?"2px dashed #ef4444":"2px dashed #d0d0d0",borderRadius:"4px",padding:"24px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",background:_r||ut.screenshot?"#f9fafb":"#fafafa"},onMouseEnter:u=>{Wn.screenshot||(u.currentTarget.style.borderColor="#5a31ea"),u.currentTarget.style.background="#f8f9ff"},onMouseLeave:u=>{u.currentTarget.style.borderColor=Wn.screenshot?"#ef4444":"#d0d0d0",u.currentTarget.style.background=_r||ut.screenshot?"#f9fafb":"#fafafa"},onClick:()=>{const u=document.createElement("input");u.type="file",u.accept="image/*",u.onchange=async k=>{const B=k.target.files[0];if(!B)return;if(!B.type.startsWith("image/")){Ue("Please upload an image file","error");return}const F=new FileReader;F.onloadend=()=>{Xa(B),ka(F.result),Wn.screenshot&&(Kn(T=>({...T,screenshot:!1})),Qn==="screenshot"&&Or(null))},F.readAsDataURL(B)},u.click()},children:_r||ut.screenshot?t.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[t.jsx("img",{src:_r||ut.screenshot,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"4px",marginBottom:"8px"}}),t.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),Xa(null),ka(null),xn({...ut,screenshot:""}),Wn.screenshot&&(Kn(k=>({...k,screenshot:!1})),Qn==="screenshot"&&Or(null))},style:{position:"absolute",top:"8px",right:"8px",background:"#ef4444",color:"#fff",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem"},children:""}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"8px"},children:"Click to change image"})]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-cloud-upload-alt",style:{fontSize:"2rem",color:"#5a31ea",marginBottom:"8px"}}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"8px"},children:"Click to upload image"}),t.jsx("div",{style:{fontSize:"0.75rem",color:"#999",marginTop:"4px"},children:"PNG, JPG, GIF up to 10MB"})]})})]}),["Bank Transfer","FPS","PayMe"].includes(ut.method)&&t.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Proof Image ",t.jsx("span",{style:{color:"#ef4444"},children:"*"}),t.jsx("div",{style:{border:Wn.screenshot?"2px dashed #ef4444":"2px dashed #d0d0d0",borderRadius:"4px",padding:"24px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",background:_r||ut.screenshot?"#f9fafb":"#fafafa"},onMouseEnter:u=>{Wn.screenshot||(u.currentTarget.style.borderColor="#5a31ea"),u.currentTarget.style.background="#f8f9ff"},onMouseLeave:u=>{u.currentTarget.style.borderColor=Wn.screenshot?"#ef4444":"#d0d0d0",u.currentTarget.style.background=_r||ut.screenshot?"#f9fafb":"#fafafa"},onClick:()=>{const u=document.createElement("input");u.type="file",u.accept="image/*",u.onchange=async k=>{const B=k.target.files[0];if(!B)return;if(!B.type.startsWith("image/")){Ue("Please upload an image file","error");return}const F=new FileReader;F.onloadend=()=>{Xa(B),ka(F.result),Wn.screenshot&&(Kn(T=>({...T,screenshot:!1})),Qn==="screenshot"&&Or(null))},F.readAsDataURL(B)},u.click()},children:_r||ut.screenshot?t.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[t.jsx("img",{src:_r||ut.screenshot,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"4px",marginBottom:"8px"}}),t.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),Xa(null),ka(null),xn({...ut,screenshot:""}),Wn.screenshot&&(Kn(k=>({...k,screenshot:!1})),Qn==="screenshot"&&Or(null))},style:{position:"absolute",top:"8px",right:"8px",background:"#ef4444",color:"#fff",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem"},children:""}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"8px"},children:"Click to change image"})]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-cloud-upload-alt",style:{fontSize:"2rem",color:"#5a31ea",marginBottom:"8px"}}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666",marginTop:"8px"},children:"Click to upload image"}),t.jsx("div",{style:{fontSize:"0.75rem",color:"#999",marginTop:"4px"},children:"PNG, JPG, GIF up to 10MB"})]})})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-day",style:{marginRight:"8px",color:"#5a31ea"}}),"Date ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"date",value:ut.date,onChange:u=>{const k=u.target.value;xn({...ut,date:k}),Wn.date&&(Kn(B=>({...B,date:!1})),Qn==="date"&&Or(null))},onBlur:u=>{const k=u.target.value;if(k){const B=new Date(k);if(isNaN(B.getTime())){Ue("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[F,T,K]=k.split("-").map(Number);if(T<1||T>12){Ue("Invalid month. Please enter a month between 01 and 12","error");return}if(K<1||K>31){Ue("Invalid day. Please enter a valid day for the selected month","error");return}const Y=new Date(F,T,0).getDate();if(K>Y){Ue(`Invalid date. ${T}/${F} only has ${Y} days`,"error");return}}},required:!0,style:{borderRadius:"4px",width:"100%",border:Wn.date?"2px solid #ef4444":void 0}})]}),t.jsxs("label",{children:["Notes (Optional)",t.jsx("textarea",{value:ut.notes,onChange:u=>xn({...ut,notes:u.target.value}),rows:3,placeholder:"Additional notes about this donation..."})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[t.jsx("button",{type:"submit",className:"primary-btn",children:"Save Donation"}),t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{Fi(!1),xn({donorName:"",isMember:!1,memberId:"",amount:"",method:"",date:"",notes:"",reference:"",screenshot:""}),Xa(null),ka(null),wi(""),ii(!1)},children:"Cancel"})]})]})]})}),t.jsx("div",{className:"card",children:!Z||Array.isArray(Z)&&Z.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("p",{style:{margin:0,fontSize:"1.125rem",fontWeight:"500"},children:"No donations yet"}),t.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.9375rem",color:"#999"},children:'Click "Add Donation" to record your first donation'})]}):t.jsx("div",{className:"table-wrapper",children:(()=>{const k=(Array.isArray(Z)?Z:[]).filter(Ce=>Ce!==null),B=Math.ceil(k.length/Gn)||1,F=Math.min(Bi,B),T=(F-1)*Gn,K=T+Gn,Y=k.slice(T,K);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[t.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["Total donations:"," ",t.jsxs("strong",{children:["$",Pr(k.reduce((Ce,Ne)=>{const Qe=parseFloat(Ne?.amount||0);return Ce+(isNaN(Qe)?0:Qe)},0),{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{try{const Ce=k.map(sn=>({Date:sn.date||(sn.createdAt?new Date(sn.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),DonorName:sn.donorName||"",Type:sn.isMember?"Member":"Non-Member",Amount:sn.amount||"0",Method:sn.method||"",Notes:(sn.notes||"").replace(/\r?\n/g," ")})),Ne=["Date","DonorName","Type","Amount","Method","Notes"],Qe=[Ne.join(","),...Ce.map(sn=>Ne.map(cn=>{const yn=sn[cn]??"";return`"${String(yn).replace(/"/g,'""')}"`}).join(","))],at=new Blob([Qe.join(`
`)],{type:"text/csv;charset=utf-8;"}),Yt=URL.createObjectURL(at),yt=document.createElement("a");yt.href=Yt;const vn=new Date().toISOString().slice(0,10);yt.download=`donations-report-${vn}.csv`,document.body.appendChild(yt),yt.click(),document.body.removeChild(yt),URL.revokeObjectURL(Yt),Ue("Donations report exported as CSV")}catch(Ce){console.error("Export donations CSV failed",Ce),Ue("Failed to export donations report","error")}},children:" Export Donations CSV"})]}),t.jsx(fi,{columns:["Date","Donor Name","Type","Amount","Method","Notes","Actions"],rows:Y.map(Ce=>Ce?{Date:Ce.date||(Ce.createdAt?new Date(Ce.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),"Donor Name":Ce.donorName||"Unknown",Type:Ce.isMember?t.jsx("span",{className:"badge badge-active",children:"Member"}):t.jsx("span",{className:"badge badge-inactive",children:"Non-Member"}),Amount:Ce.amount?`$${Pr(Number(Ce.amount),{minimumFractionDigits:2,maximumFractionDigits:2})}`:"$0.00",Method:Ce.method||"-",Notes:Ce.notes||"-",Actions:{render:()=>t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",onClick:async()=>{ci("Are you sure you want to delete this donation?",async()=>{try{const Qe=Ce._id||Ce.id;await be(Qe),Ue("Donation deleted successfully!"),await de()}catch(Qe){Ue(Qe.message||"Failed to delete donation","error")}})},title:"Delete Donation","aria-label":"Delete Donation",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})}}:null).filter(Ce=>Ce!==null)}),B>0&&k.length>0&&t.jsx(dc,{currentPage:F,totalPages:B,onPageChange:Ni,pageSize:Gn,onPageSizeChange:Hs,totalItems:k.length})]})})()})})]}),wt==="reports"&&t.jsxs("article",{className:"screen-card",id:"reports",children:[t.jsxs("header",{className:"screen-card__header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{children:[Mr("reports"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-chart-line",style:{marginRight:"10px"}}),"Financial Reports"]}),t.jsx("p",{children:"Comprehensive financial overview and payment analytics."})]}),pt&&t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("button",{type:"button",onClick:zo,title:"Export CSV",style:{padding:"12px",borderRadius:"8px",fontWeight:"600",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",background:"linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",color:"#5a31ea",border:"2px solid #e5e7eb",boxShadow:"none",width:"48px",height:"48px"},onMouseEnter:u=>{u.target.style.background="linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",u.target.style.color="#ffffff",u.target.style.border="2px solid #5a31ea",u.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.3)"},onMouseLeave:u=>{u.target.style.background="linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",u.target.style.color="#5a31ea",u.target.style.border="2px solid #e5e7eb",u.target.style.boxShadow="none"},children:t.jsx("i",{className:"fas fa-file-csv"})}),t.jsx("button",{type:"button",onClick:Ko,title:"Export PDF",style:{padding:"12px",borderRadius:"8px",fontWeight:"600",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",background:"linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",color:"#5a31ea",border:"2px solid #e5e7eb",boxShadow:"none",width:"48px",height:"48px"},onMouseEnter:u=>{u.target.style.background="linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",u.target.style.color="#ffffff",u.target.style.border="2px solid #5a31ea",u.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.3)"},onMouseLeave:u=>{u.target.style.background="linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",u.target.style.color="#5a31ea",u.target.style.border="2px solid #e5e7eb",u.target.style.boxShadow="none"},children:t.jsx("i",{className:"fas fa-file-pdf"})})]})]}),t.jsx("div",{className:"card",style:{marginBottom:"24px",padding:"20px",background:"linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)"},children:t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"16px",alignItems:"flex-end"},children:[t.jsxs("div",{style:{flex:"1",minWidth:"200px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:[t.jsx("i",{className:"fas fa-calendar-alt",style:{marginRight:"6px",color:"#5a31ea"}}),"Date From"]}),t.jsx("input",{type:"date",value:On.from,onChange:u=>{const k=u.target.value;Ba({...On,from:k})},style:{width:"100%",padding:"12px 16px",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"0.9375rem",background:"#ffffff",transition:"all 0.2s ease"},onFocus:u=>{u.target.style.borderColor="#5a31ea",u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1)"},onBlur:u=>{u.target.style.borderColor="#e5e7eb",u.target.style.boxShadow="none"}})]}),t.jsxs("div",{style:{flex:"1",minWidth:"200px"},children:[t.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:[t.jsx("i",{className:"fas fa-calendar-check",style:{marginRight:"6px",color:"#5a31ea"}}),"Date To"]}),t.jsx("input",{type:"date",value:On.to,onChange:u=>{const k=u.target.value;Ba({...On,to:k})},style:{width:"100%",padding:"12px 16px",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"0.9375rem",background:"#ffffff",transition:"all 0.2s ease"},onFocus:u=>{u.target.style.borderColor="#5a31ea",u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1)"},onBlur:u=>{u.target.style.borderColor="#e5e7eb",u.target.style.boxShadow="none"}})]}),t.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["This Year","This Quarter","This Month"].map(u=>t.jsx("button",{onClick:()=>{ws(u);const k=new Date;if(u==="This Year")Ba({from:`${k.getFullYear()}-01-01`,to:`${k.getFullYear()}-12-31`});else if(u==="This Quarter"){const F=Math.floor(k.getMonth()/3)*3;Ba({from:`${k.getFullYear()}-${String(F+1).padStart(2,"0")}-01`,to:`${k.getFullYear()}-${String(F+3).padStart(2,"0")}-31`})}else Ba({from:`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-01`,to:`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-31`})},style:{padding:"12px 20px",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",background:gi===u?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#ffffff",color:gi===u?"#ffffff":"#6b7280",border:gi===u?"none":"2px solid #e5e7eb",boxShadow:gi===u?"0 4px 12px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{gi!==u&&(k.target.style.background="#f3f4f6",k.target.style.borderColor="#d1d5db")},onMouseLeave:k=>{gi!==u&&(k.target.style.background="#ffffff",k.target.style.borderColor="#e5e7eb")},children:u},u))})]})}),t.jsxs("div",{className:"kpi-grid",style:{marginBottom:"24px"},children:[t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-dollar-sign",style:{marginRight:"8px",color:"#5a31ea"}}),"Total Collected"]}),t.jsxs("h4",{children:["$",In.collected.toLocaleString()]}),t.jsxs("small",{children:[Math.round(In.collected/In.expected*100),"% of $",In.expected.toLocaleString()," expected"]})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-exclamation-triangle",style:{marginRight:"8px",color:"#ef4444"}}),"Outstanding"]}),t.jsxs("h4",{children:["$",Pr(yr.outstanding)]}),t.jsx("small",{children:"Pending collection"})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-users",style:{marginRight:"8px",color:"#5a31ea"}}),"Avg per Member"]}),t.jsxs("h4",{children:["$",In.averagePerMember]}),t.jsx("small",{children:"Goal: $800"})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-exchange-alt",style:{marginRight:"8px",color:"#5a31ea"}}),"Transactions"]}),t.jsx("h4",{children:In.transactionCount}),t.jsx("small",{children:"In selected period"})]})]}),t.jsxs("div",{className:"admin-reports-charts-grid",children:[t.jsxs("div",{className:"admin-reports-chart-card--collected",children:[t.jsxs("div",{className:"admin-settings-section-header",children:[t.jsx("h4",{className:"admin-settings-section-title",children:"Collected vs Outstanding"}),t.jsx("p",{className:"admin-settings-section-description",children:"Financial overview for selected period"})]}),t.jsxs("div",{style:{position:"relative",height:"280px",display:"flex",alignItems:"flex-end",gap:"32px",justifyContent:"center",padding:"0 24px"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",flex:1,maxWidth:"200px"},children:[t.jsxs("div",{style:{width:"100%",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"8px 8px 0 0",minHeight:"60px",height:`${Math.max(60,Math.round(In.collected/(In.collected+yr.outstanding)*200)||0)}px`,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"700",fontSize:"1.125rem",transition:"all 0.2s ease",cursor:"pointer",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.2)"},onMouseEnter:u=>{u.target.style.transform="translateY(-4px)",u.target.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},onMouseLeave:u=>{u.target.style.transform="translateY(0)",u.target.style.boxShadow="0 2px 8px rgba(16, 185, 129, 0.2)"},children:["$",Pr(In.collected)]}),t.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[t.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1a1a1a",display:"block",marginBottom:"4px"},children:"Collected"}),t.jsxs("span",{style:{fontSize:"0.75rem",color:"#666"},children:[Math.round(In.collected/(In.collected+yr.outstanding)*100),"%"]})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",flex:1,maxWidth:"200px"},children:[t.jsxs("div",{style:{width:"100%",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",borderRadius:"8px 8px 0 0",minHeight:"60px",height:`${Math.max(60,Math.round(yr.outstanding/(In.collected+yr.outstanding)*200)||0)}px`,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"700",fontSize:"1.125rem",transition:"all 0.2s ease",cursor:"pointer",boxShadow:"0 2px 8px rgba(239, 68, 68, 0.2)"},onMouseEnter:u=>{u.target.style.transform="translateY(-4px)",u.target.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)"},onMouseLeave:u=>{u.target.style.transform="translateY(0)",u.target.style.boxShadow="0 2px 8px rgba(239, 68, 68, 0.2)"},children:["$",yr.outstanding.toLocaleString()]}),t.jsxs("div",{style:{textAlign:"center",width:"100%"},children:[t.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1a1a1a",display:"block",marginBottom:"4px"},children:"Outstanding"}),t.jsxs("span",{style:{fontSize:"0.75rem",color:"#666"},children:[Math.round(yr.outstanding/(In.collected+yr.outstanding)*100),"%"]})]})]})]})]}),t.jsxs("div",{className:"admin-settings-users-card",children:[t.jsxs("div",{className:"admin-settings-section-header",children:[t.jsx("h4",{className:"admin-settings-section-title",children:"Payments Over Time"}),t.jsx("p",{className:"admin-settings-section-description",children:"Payment trends for selected period"})]}),t.jsx("div",{style:{position:"relative",height:"240px",padding:"0 16px"},children:(()=>{const u={},k=new Date(On.from),B=new Date(On.to),F=Math.ceil((B-k)/(1e3*60*60*24));In.paymentsInRange.forEach(Y=>{const Ce=Y.date?new Date(Y.date):Y.createdAt?new Date(Y.createdAt):new Date;let Ne;if(F<=7)Ne=Ce.toLocaleDateString("en-US",{month:"short",day:"numeric"});else if(F<=30){const at=new Date(Ce);at.setDate(Ce.getDate()-Ce.getDay()),Ne=at.toLocaleDateString("en-US",{month:"short",day:"numeric"})}else Ne=Ce.toLocaleDateString("en-US",{month:"short",year:"numeric"});u[Ne]||(u[Ne]=0);const Qe=parseFloat(Y.amount?.replace(/[^0-9.]/g,"")||0);u[Ne]+=Qe});const T=Object.keys(u).sort((Y,Ce)=>new Date(Y)-new Date(Ce)).slice(-10),K=Math.max(...T.map(Y=>u[Y]),1);return t.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"8px",height:"100%",justifyContent:"space-between"},children:T.length>0?T.map((Y,Ce)=>{const Ne=u[Y],Qe=Math.max(30,Ne/K*180);return t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",flex:1,minWidth:"50px"},children:[t.jsx("div",{style:{width:"100%",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",borderRadius:"6px 6px 0 0",height:`${Qe}px`,minHeight:"30px",display:"flex",alignItems:"flex-end",justifyContent:"center",paddingBottom:"6px",color:"#fff",fontSize:"0.75rem",fontWeight:"600",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.15)",cursor:"pointer",transition:"all 0.2s ease"},title:`${Y}: $${Ne.toFixed(2)}`,onMouseEnter:at=>{at.currentTarget.style.transform="translateY(-4px)",at.currentTarget.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.25)"},onMouseLeave:at=>{at.currentTarget.style.transform="translateY(0)",at.currentTarget.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.15)"},children:Qe>40&&`$${Math.round(Ne)}`}),t.jsx("span",{style:{fontSize:"0.75rem",color:"#666",textAlign:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",fontWeight:"500"},children:Y.length>10?Y.substring(0,8)+"...":Y})]},`${Y}-${Ce}`)}):t.jsx("div",{style:{width:"100%",textAlign:"center",color:"#999",padding:"60px 0",fontSize:"0.875rem"},children:"No payment data in selected period"})})})()})]})]}),t.jsxs("div",{className:"card",style:{marginBottom:"24px",padding:"24px",background:"linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)",border:"1px solid #e5e7eb"},children:[t.jsxs("h4",{style:{marginBottom:"20px",fontSize:"1.25rem",fontWeight:"700",color:"#1a1a1a"},children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"10px",color:"#5a31ea"}}),"Payment Method Breakdown"]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:In.methodMix.map(u=>{const B={FPS:"#10b981",PayMe:"#25D366","Bank Transfer":"#3b82f6",Cash:"#f59e0b",Other:"#6b7280"}[u.label]||"#6b7280";return t.jsxs("div",{style:{padding:"16px",borderRadius:"12px",background:"#ffffff",border:`2px solid ${B}`,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease"},onMouseEnter:F=>{F.currentTarget.style.transform="translateY(-2px)",F.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.12)"},onMouseLeave:F=>{F.currentTarget.style.transform="translateY(0)",F.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.08)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[t.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:B,flexShrink:0}}),t.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1a1a1a",flex:1},children:u.label})]}),t.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:B,marginLeft:"24px"},children:u.value})]},u.label)})})]}),t.jsxs("div",{className:"card",style:{padding:"24px",background:"linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)",border:"1px solid #e5e7eb"},children:[t.jsxs("div",{style:{marginBottom:"24px",display:"flex",gap:"16px",flexWrap:"wrap",alignItems:"center"},children:[t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsxs("label",{style:{fontWeight:"600",color:"#1a1a1a",fontSize:"0.9375rem"},children:[t.jsx("i",{className:"fas fa-filter",style:{marginRight:"6px",color:"#5a31ea"}}),"Filter by Type:"]}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"8px",flexWrap:"wrap"},children:[{value:"all",label:"All"},{value:"payments",label:"Payments"},{value:"donations",label:"Donations"}].map(u=>t.jsx("button",{type:"button",onClick:()=>x(u.value),style:{padding:"8px 16px",borderRadius:"6px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:xa===u.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:xa===u.value?"#ffffff":"#6b7280",boxShadow:xa===u.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{xa!==u.value&&(k.target.style.background="#e5e7eb",k.target.style.color="#374151")},onMouseLeave:k=>{xa!==u.value&&(k.target.style.background="transparent",k.target.style.color="#6b7280")},children:u.label},u.value))})]}),xa==="donations"&&t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[t.jsx("label",{style:{fontWeight:"600",color:"#1a1a1a",fontSize:"0.9375rem"},children:"Filter by Donor Type:"}),t.jsx("div",{style:{display:"flex",gap:"4px",background:"#f3f4f6",padding:"4px",borderRadius:"8px",flexWrap:"wrap"},children:[{value:"all",label:"All"},{value:"member",label:"Members"},{value:"non-member",label:"Non-Members"}].map(u=>t.jsx("button",{type:"button",onClick:()=>ae(u.value),style:{padding:"8px 16px",borderRadius:"6px",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",background:L===u.value?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"transparent",color:L===u.value?"#ffffff":"#6b7280",boxShadow:L===u.value?"0 2px 8px rgba(90, 49, 234, 0.3)":"none"},onMouseEnter:k=>{L!==u.value&&(k.target.style.background="#e5e7eb",k.target.style.color="#374151")},onMouseLeave:k=>{L!==u.value&&(k.target.style.background="transparent",k.target.style.color="#6b7280")},children:u.label},u.value))})]})]}),t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[t.jsxs("h4",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:"#1a1a1a"},children:[t.jsx("i",{className:"fas fa-list",style:{marginRight:"10px",color:"#5a31ea"}}),"Transactions"]}),t.jsx("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:t.jsx("input",{type:"text",placeholder:"Search transactions...",value:me,onChange:u=>{Le(u.target.value),nt(1)},style:{padding:"10px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",fontSize:"0.9375rem",minWidth:"250px",background:"#ffffff"}})})]}),t.jsxs("div",{style:{overflow:"hidden",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[t.jsx("div",{className:"table-wrapper",style:{overflowX:"auto",width:"100%",maxWidth:"100%"},children:t.jsx(fi,{columns:["Date","Type","Member / Donor","Invoice ID","Amount","Method","Screenshot","Status","Actions"],rows:(()=>{let k=[...(In.paymentsInRange||[]).map(Y=>({...Y,type:"Payment",source:Y.member||"Unknown",amount:Y.amount,method:Y.method,screenshot:Y.screenshot,status:Y.status||"Completed",invoiceId:Y.invoiceId,period:Y.period,date:Y.date||(Y.createdAt?new Date(Y.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),createdAt:Y.createdAt||new Date(Y.date||0)})),...(In.donationsInRange||[]).map(Y=>({...Y,type:"Donation",source:Y.donorName,amount:Y.amount,method:Y.method||"N/A",screenshot:Y.screenshot||null,status:"Completed",invoiceId:null,period:null,date:Y.date||(Y.createdAt?new Date(Y.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),createdAt:Y.createdAt||new Date(Y.date||0),isMember:Y.isMember}))].sort((Y,Ce)=>{const Ne=Y.createdAt?new Date(Y.createdAt):new Date(Y.date||0);return(Ce.createdAt?new Date(Ce.createdAt):new Date(Ce.date||0))-Ne}).filter(Y=>!(xa==="payments"&&Y.type!=="Payment"||xa==="donations"&&Y.type!=="Donation"||Y.type==="Donation"&&(L==="member"&&!Y.isMember||L==="non-member"&&Y.isMember)));if(me.trim()){const Y=me.toLowerCase();k=k.filter(Ce=>Ce.source&&Ce.source.toLowerCase().includes(Y)||Ce.invoiceId&&Ce.invoiceId.toString().toLowerCase().includes(Y)||Ce.amount&&Ce.amount.toString().toLowerCase().includes(Y)||Ce.method&&Ce.method.toLowerCase().includes(Y)||Ce.status&&Ce.status.toLowerCase().includes(Y)||Ce.date&&Ce.date.toLowerCase().includes(Y))}k.length;const B=(Ke-1)*Nt,F=B+Nt;return k.slice(B,F).map(Y=>(Y._id||Y.id,{Date:Y.date||"N/A",Type:{render:()=>Y.type==="Payment"?t.jsx("span",{className:"badge badge-paid",children:"Payment"}):t.jsx("span",{className:"badge badge-active",children:"Donation"})},"Member / Donor":Y.source||"Unknown","Invoice ID":Y.invoiceId||(Y.type==="Donation","N/A"),Amount:Y.amount||"$0",Method:Y.type==="Payment"?wn(Y):Y.method||"N/A",Screenshot:{render:()=>Y.screenshot?t.jsx("a",{href:Y.screenshot,target:"_blank",rel:"noopener noreferrer",style:{color:"#5a31ea",textDecoration:"none"},title:"View screenshot","aria-label":"View screenshot",children:t.jsx("i",{className:"fas fa-image","aria-hidden":"true"})}):"N/A"},Status:{render:()=>t.jsx("span",{className:hi[Y.status]||"badge badge-paid",children:Y.status})},Actions:{render:()=>t.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Y.type==="Payment"&&Y.invoiceId&&t.jsx("button",{className:"ghost-btn icon-btn icon-btn--view",onClick:()=>{const Ce=r.find(Qe=>Qe.id===Y.invoiceId||Qe._id===Y.invoiceId);if(!Ce){Ue("Invoice not found for this transaction","error");return}const Ne=i.find(Qe=>Qe.id===Ce.memberId)||i.find(Qe=>Qe.name&&Ce.memberName&&Qe.name.toLowerCase()===Ce.memberName.toLowerCase());if(!Ne){Ue("Member not found for this invoice","error");return}X(Ne),Qt("member-detail"),$t("Invoices")},title:"View Invoice",children:t.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})})})}}))})()})}),(()=>{let k=[...(In.paymentsInRange||[]).map(K=>({...K,type:"Payment",source:K.member||"Unknown",amount:K.amount,method:K.method,screenshot:K.screenshot,status:K.status||"Completed",invoiceId:K.invoiceId,period:K.period,date:K.date||(K.createdAt?new Date(K.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),createdAt:K.createdAt||new Date(K.date||0)})),...(In.donationsInRange||[]).map(K=>({...K,type:"Donation",source:K.donorName,amount:K.amount,method:K.method||"N/A",screenshot:K.screenshot||null,status:"Completed",invoiceId:null,period:null,date:K.date||(K.createdAt?new Date(K.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),createdAt:K.createdAt||new Date(K.date||0),isMember:K.isMember}))].sort((K,Y)=>{const Ce=K.createdAt?new Date(K.createdAt):new Date(K.date||0);return(Y.createdAt?new Date(Y.createdAt):new Date(Y.date||0))-Ce}).filter(K=>!(xa==="payments"&&K.type!=="Payment"||xa==="donations"&&K.type!=="Donation"||K.type==="Donation"&&(L==="member"&&!K.isMember||L==="non-member"&&K.isMember)));if(me.trim()){const K=me.toLowerCase();k=k.filter(Y=>Y.source&&Y.source.toLowerCase().includes(K)||Y.invoiceId&&Y.invoiceId.toString().toLowerCase().includes(K)||Y.amount&&Y.amount.toString().toLowerCase().includes(K)||Y.method&&Y.method.toLowerCase().includes(K)||Y.status&&Y.status.toLowerCase().includes(K)||Y.date&&Y.date.toLowerCase().includes(K))}const B=k.length,F=Math.ceil(B/Nt),T=Math.min(Ke,F||1);return t.jsx(dc,{currentPage:T,totalPages:F||1,onPageChange:nt,pageSize:Nt,onPageSizeChange:K=>{Ot(K),nt(1)},totalItems:B})})()]})]})]})]}),wt==="export-reports"&&t.jsxs("article",{className:"screen-card",id:"export-reports",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Mr("export-reports"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-file-export",style:{marginRight:"10px"}}),"Export Reports"]}),t.jsx("p",{children:"Export financial data in various formats."})]})}),t.jsx("div",{className:"card",children:t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("h4",{style:{marginBottom:"12px"},children:"Export Options"}),t.jsx("p",{style:{color:"#666",marginBottom:"20px"},children:"Export your financial data in CSV or PDF format. Select a date range to export specific periods."})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"24px"},children:[t.jsxs("div",{className:"card",style:{padding:"20px",background:"linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"180px"},children:[t.jsxs("div",{children:[t.jsx("h4",{style:{marginBottom:"8px",fontSize:"1rem"},children:" CSV Export"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"16px"},children:"Export all transactions as a CSV file for Excel or spreadsheet applications."})]}),t.jsxs("button",{className:"secondary-btn",onClick:zo,style:{width:"100%",marginTop:"auto"},disabled:!pt,title:pt?"Export CSV":"Export allowed only for finance roles",children:[t.jsx("i",{className:"fas fa-file-csv",style:{marginRight:"8px"}}),"Export CSV"]})]}),t.jsxs("div",{className:"card",style:{padding:"20px",background:"linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"180px"},children:[t.jsxs("div",{children:[t.jsx("h4",{style:{marginBottom:"8px",fontSize:"1rem"},children:" PDF Export"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"16px"},children:"Generate a formatted PDF report with charts and summaries."})]}),t.jsxs("button",{className:"secondary-btn",onClick:Ko,style:{width:"100%",marginTop:"auto"},disabled:!pt,title:pt?"Export PDF":"Export allowed only for finance roles",children:[t.jsx("i",{className:"fas fa-file-pdf",style:{marginRight:"8px"}}),"Export PDF"]})]})]}),t.jsxs("div",{style:{marginTop:"24px",padding:"16px",background:"#f8f9ff",borderRadius:"8px"},children:[t.jsxs("p",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"8px"},children:[t.jsx("strong",{children:"Note:"})," For detailed reports with date filters and analytics, visit the Financial Reports section."]}),t.jsxs("button",{className:"ghost-btn",onClick:()=>{Ma("reports"),Ue("Redirecting to Financial Reports...")},children:[t.jsx("i",{className:"fas fa-chart-bar",style:{marginRight:"8px"}}),"Go to Financial Reports"]})]})]})})]}),wt==="roles"&&De&&t.jsxs("article",{className:"screen-card",id:"roles",children:[t.jsx("header",{className:"screen-card__header",children:t.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap",gap:"12px"},children:t.jsxs("div",{children:[Mr("roles"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-user-shield",style:{marginRight:"10px"}}),"Roles"]}),t.jsx("p",{children:"Manage admin roles and permissions."})]})})}),t.jsx("div",{className:"card",children:t.jsxs("div",{style:{padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h4",{style:{marginBottom:"12px"},children:"Available Roles"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginBottom:"24px"},children:[t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"2px solid #5a31ea"},children:[t.jsx("h5",{style:{margin:"0 0 8px 0",color:"#5a31ea"},children:"Admin"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#666",margin:0},children:"Full access to all features and settings"})]}),t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px"},children:[t.jsx("h5",{style:{margin:"0 0 8px 0"},children:"Finance"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#666",margin:0},children:"Can manage finances, invoices, and payments"})]}),t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px"},children:[t.jsx("h5",{style:{margin:"0 0 8px 0"},children:"Staff"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#666",margin:0},children:"Can manage members and view reports, no financial exports"})]}),t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px"},children:[t.jsx("h5",{style:{margin:"0 0 8px 0"},children:"Viewer"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#666",margin:0},children:"Read-only access to view data"})]})]})]}),t.jsx("div",{className:"table-wrapper",children:t.jsx(fi,{columns:["Name","Email","Role","Status","Actions"],rows:a.map(u=>({Name:u.name||"N/A",Email:u.email||"N/A",Role:{render:()=>t.jsx("span",{className:"badge badge-active",children:u.role||"Viewer"})},Status:{render:()=>t.jsx("span",{className:u.status==="Active"?"badge badge-active":u.status==="Pending"?"badge badge-pending":"badge badge-overdue",children:u.status||"Active"})},Actions:{render:()=>t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsx("button",{className:"ghost-btn icon-btn icon-btn--edit",onClick:async()=>{try{const k=["Admin","Finance","Staff","Viewer"],B=u.role||"Viewer",F=k.indexOf(B),T=F===-1?0:(F+1)%k.length,K=k[T];await pe(u.id,{role:K}),Ue(`${u.name}'s role updated to ${K}`)}catch(k){Ue(k.message||"Failed to update role","error")}},title:"Change Role",children:t.jsx("i",{className:"fas fa-sync-alt","aria-hidden":"true"})}),(u.role||"Viewer")!=="Admin"&&t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",style:{color:"#ef4444"},onClick:async()=>{ci(`Remove ${u.name} from admin users?`,async()=>{try{await Pe(u.id),Ue(`${u.name} removed`),await U()}catch(k){Ue(k.message||"Failed to delete admin","error")}})},title:"Delete Admin",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}))})})]})})]}),wt==="org-settings"&&t.jsxs("article",{className:"screen-card",id:"org-settings",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Mr("org-settings"),t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-building",style:{marginRight:"10px"}}),"Organization Settings"]}),t.jsx("p",{children:"Manage organization information and preferences."})]})}),t.jsx("div",{className:"settings-container",children:t.jsxs("div",{className:"settings-card",children:[t.jsxs("div",{className:"settings-card__header",children:[t.jsx("h4",{className:"settings-card__title",children:"Organization Info"}),t.jsx("p",{className:"settings-card__subtitle",children:"Update your organization's contact information"})]}),t.jsxs("form",{noValidate:!0,onSubmit:u=>{u.preventDefault(),ie(Za),Ue("Organization info updated!")},className:"settings-form",children:[t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Organization Name",t.jsx("input",{type:"text",className:"settings-form__input",value:Za.name,onChange:u=>cs({...Za,name:u.target.value}),placeholder:"Subscription Manager HK"})]})}),t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Email",t.jsx("input",{type:"email",className:"settings-form__input",value:Za.email,onChange:u=>cs({...Za,email:u.target.value}),placeholder:"support@subscriptionhk.org"})]})}),t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Phone",t.jsx("input",{type:"text",className:"settings-form__input",value:Za.phone,onChange:u=>cs({...Za,phone:u.target.value}),placeholder:"+852 2800 1122"})]})}),t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Address",t.jsx("textarea",{className:"settings-form__input",value:Za.address,onChange:u=>cs({...Za,address:u.target.value}),placeholder:"123 Central Street, Hong Kong",rows:3})]})}),t.jsxs("div",{className:"settings-form__group",children:[t.jsxs("label",{className:"settings-form__label",children:[t.jsx("i",{className:"fas fa-globe",style:{marginRight:"8px",color:"#5a31ea"}}),"Number Format Locale ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("select",{className:"settings-form__input",value:we,onChange:u=>{_e(u.target.value),Ue("Number format locale updated! Numbers will refresh automatically.","success")},style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"4px",fontSize:"0.875rem",color:"#1a1a1a",backgroundColor:"#ffffff",cursor:"pointer"},children:Sy().map(u=>t.jsx("option",{value:u.value,children:u.label},u.value))}),t.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"#666"},children:["Choose your preferred number format. Example: ",Pr(123456789e-2,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),t.jsx("div",{className:"settings-form__actions",children:t.jsx("button",{type:"submit",className:"primary-btn",children:"Save Changes"})})]})]})})]}),wt==="settings"&&De&&t.jsxs("article",{className:"screen-card",id:"settings",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[Mr("settings"),t.jsx("h3",{children:"Admin Settings"}),t.jsx("p",{children:"Organization profile and admin accounts."})]})}),t.jsx("div",{className:"settings-container",children:t.jsxs("div",{className:"settings-card",children:[t.jsx("div",{className:"settings-card__header",children:t.jsxs("div",{className:"settings-card__header-content",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"settings-card__title",children:"User Management"}),t.jsx("p",{className:"settings-card__subtitle",children:"Manage admin users and their permissions"})]}),t.jsx("button",{className:"settings-card__add-btn secondary-btn",onClick:()=>{if(!De){Ue("Only Admin can add new admin users","error");return}na(!0),Xn({name:"",email:"",password:"",role:"Viewer",status:"Active"})},disabled:!De,title:De?"Add a new admin user":"Only Admin can add admins",children:"+ Add Admin"})]})}),t.jsx("div",{className:"settings-table-wrapper",children:t.jsx(fi,{columns:["User","Role","Status","Actions"],rows:a.map(u=>({User:u.name,Role:u.role||"Viewer",Status:{render:()=>t.jsx("span",{className:(u.status||"Active")==="Active"?"badge badge-active":"badge badge-inactive",children:u.status||"Active"})},Actions:{render:()=>t.jsxs("div",{className:"settings-table__actions",children:[(u.status||"Active")==="Active"?t.jsx("button",{className:"ghost-btn settings-table__action-btn",onClick:async()=>{try{await pe(u.id,{status:"Inactive"}),Ue(`${u.name} deactivated`)}catch(k){Ue(k.message||"Failed to update admin","error")}},children:"Deactivate"}):t.jsx("button",{className:"secondary-btn settings-table__action-btn",onClick:async()=>{try{await pe(u.id,{status:"Active"}),Ue(`${u.name} activated`)}catch(k){Ue(k.message||"Failed to update admin","error")}},children:"Activate"}),(u.role||"Viewer")!=="Admin"&&t.jsx("button",{className:"ghost-btn icon-btn icon-btn--delete",onClick:async()=>{ci(`Remove ${u.name} from admin users?`,async()=>{try{await Pe(u.id),Ue(`${u.name} removed`),await U()}catch(k){Ue(k.message||"Failed to delete admin","error")}})},title:"Remove Admin","aria-label":"Remove Admin",children:t.jsx("i",{className:"fas fa-trash","aria-hidden":"true"})})]})}}))})})]})}),Bs&&t.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:u=>{u.target===u.currentTarget&&na(!1)},children:t.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",background:"#f9fafb",position:"relative",padding:"24px 24px 20px"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"8px",margin:0},children:[t.jsx("i",{className:"fas fa-user-plus","aria-hidden":"true"}),"Add New Admin"]}),t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>na(!1),style:{fontSize:"1.5rem",lineHeight:1,color:"#ef4444",fontWeight:"bold",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",border:"1px solid #ef4444",background:"transparent",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:u=>{u.target.style.background="#fee2e2"},onMouseLeave:u=>{u.target.style.background="transparent"},"aria-label":"Close add admin form",children:""})]}),t.jsxs("form",{noValidate:!0,onSubmit:async u=>{if(u.preventDefault(),!Aa.name){Ue("Please enter admin name","error");return}if(!Aa.email){Ue("Please enter admin email","error");return}if(!Aa.password){Ue("Please enter admin password","error");return}try{await Ie(Aa),na(!1),Xn({name:"",email:"",password:"",role:"Viewer",status:"Active"}),Ue("Admin user added!")}catch(k){Ue(k.message||"Failed to add admin user","error")}},className:"settings-form",children:[t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Name",t.jsx("input",{type:"text",className:"settings-form__input",required:!0,value:Aa.name,onChange:u=>Xn({...Aa,name:u.target.value}),placeholder:"Enter admin name"})]})}),t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Email",t.jsx("input",{type:"email",className:"settings-form__input",required:!0,value:Aa.email,onChange:u=>Xn({...Aa,email:u.target.value}),placeholder:"Enter admin email"})]})}),t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Password",t.jsx("input",{type:"password",className:"settings-form__input",required:!0,value:Aa.password,onChange:u=>Xn({...Aa,password:u.target.value}),placeholder:"Set a password"})]})}),t.jsx("div",{className:"settings-form__group",children:t.jsxs("label",{className:"settings-form__label",children:["Role",t.jsxs("select",{className:"settings-form__select",value:Aa.role,onChange:u=>Xn({...Aa,role:u.target.value}),children:[t.jsx("option",{children:"Admin"}),t.jsx("option",{children:"Finance"}),t.jsx("option",{children:"Staff"}),t.jsx("option",{children:"Viewer"})]})]})}),t.jsxs("div",{className:"settings-form__actions",children:[t.jsx("button",{type:"button",className:"ghost-btn settings-form__cancel",onClick:()=>na(!1),children:"Cancel"}),t.jsx("button",{type:"submit",className:"primary-btn settings-form__submit-btn",children:"Add Admin"})]})]})]})})]})]})]})]}),Oo&&aa&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:u=>{u.target===u.currentTarget&&(js(!1),Hi(null),or({paymentMethod:"Admin",imageFile:null,imagePreview:null,imageUrl:""}))},children:t.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-money-bill-wave",style:{marginRight:"8px",color:"#5a31ea"}}),"Pay Invoice #",aa.id]}),t.jsx("button",{type:"button",onClick:()=>{js(!1),Hi(null),or({paymentMethod:"Admin",imageFile:null,imagePreview:null,imageUrl:""})},style:{background:"transparent",border:"none",fontSize:"1.5rem",color:"#666",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:u=>{u.target.style.background="#f3f4f6",u.target.style.color="#1a1a1a"},onMouseLeave:u=>{u.target.style.background="transparent",u.target.style.color="#666"},children:""})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Amount:"}),t.jsx("strong",{style:{color:"#1a1a1a",fontSize:"1.125rem"},children:aa.amount})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Period:"}),t.jsx("span",{style:{color:"#1a1a1a"},children:aa.period})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Due Date:"}),t.jsx("span",{style:{color:"#1a1a1a"},children:aa.due})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"12px"},children:"Payment Method"}),t.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[t.jsxs("button",{type:"button",onClick:()=>or({...bn,paymentMethod:"Admin"}),style:{flex:"1",minWidth:"150px",padding:"12px 20px",borderRadius:"8px",border:"none",background:bn.paymentMethod==="Admin"?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#f8f9ff",color:bn.paymentMethod==="Admin"?"#ffffff":"#1a1a1a",boxShadow:bn.paymentMethod==="Admin"?"0 4px 12px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)",fontWeight:"600",fontSize:"0.9375rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[t.jsx("i",{className:"fas fa-user-shield"}),"Paid to Admin"]}),t.jsxs("button",{type:"button",onClick:()=>or({...bn,paymentMethod:"Online"}),style:{flex:"1",minWidth:"150px",padding:"12px 20px",borderRadius:"8px",border:"none",background:bn.paymentMethod==="Online"?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#f8f9ff",color:bn.paymentMethod==="Online"?"#ffffff":"#1a1a1a",boxShadow:bn.paymentMethod==="Online"?"0 4px 12px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)",fontWeight:"600",fontSize:"0.9375rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[t.jsx("i",{className:"fas fa-globe"}),"Paid Online"]})]})]}),bn.paymentMethod==="Online"&&t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"8px"},children:["Reference Number ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{type:"text",value:bn.reference,onChange:u=>{or({...bn,reference:u.target.value}),Hn.reference&&ma({...Hn,reference:!1})},placeholder:"Enter payment reference number",style:{width:"100%",padding:"10px 12px",border:Hn.reference?"2px solid #ef4444":"1px solid #e0e0e0",borderRadius:"8px",fontSize:"0.875rem",outline:"none",transition:"border-color 0.2s",boxShadow:Hn.reference?"0 0 0 3px rgba(239, 68, 68, 0.1)":"none"},onFocus:u=>{Hn.reference||(u.target.style.borderColor="#5a31ea",u.target.style.boxShadow="0 0 0 3px rgba(90, 49, 234, 0.1)")},onBlur:u=>{Hn.reference||(u.target.style.borderColor="#e0e0e0",u.target.style.boxShadow="none")}})]}),(bn.paymentMethod==="Admin"||bn.paymentMethod==="Online")&&t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"600",color:"#333",marginBottom:"12px"},children:["Attachment Image ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("div",{style:{border:Hn.image?"2px dashed #ef4444":"2px dashed #d0d0d0",borderRadius:"8px",padding:"20px",textAlign:"center",background:Hn.image?"#fef2f2":"#fafafa",cursor:"pointer",transition:"all 0.2s ease",boxShadow:Hn.image?"0 0 0 3px rgba(239, 68, 68, 0.1)":"none"},onMouseEnter:u=>{Hn.image||(u.currentTarget.style.borderColor="#5a31ea",u.currentTarget.style.background="#f8f9ff")},onMouseLeave:u=>{Hn.image?(u.currentTarget.style.borderColor="#ef4444",u.currentTarget.style.background="#fef2f2"):(u.currentTarget.style.borderColor="#d0d0d0",u.currentTarget.style.background="#fafafa")},onClick:()=>{Hn.image&&ma({...Hn,image:!1});const u=document.createElement("input");u.type="file",u.accept="image/*",u.onchange=async k=>{const B=k.target.files[0];if(!B)return;if(!B.type.startsWith("image/")){Ue("Please upload an image file","error");return}const F=new FileReader;F.onloadend=()=>{or(T=>({...T,imageFile:B,imagePreview:F.result})),ma(T=>({...T,image:!1}))},F.readAsDataURL(B)},u.click()},children:bn.imagePreview||aa.screenshot&&!bn.imageFile?t.jsxs("div",{style:{position:"relative"},children:[t.jsx("img",{src:bn.imagePreview||aa.screenshot,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"4px",marginBottom:"8px"}}),t.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),or({...bn,imageFile:null,imagePreview:null,imageUrl:""}),ma(k=>({...k,image:!1}))},style:{position:"absolute",top:"8px",right:"8px",background:"#ef4444",color:"#fff",border:"none",borderRadius:"50%",width:"28px",height:"28px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem"},children:""})]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"fas fa-cloud-upload-alt",style:{fontSize:"2rem",color:"#5a31ea",marginBottom:"8px"}}),t.jsx("p",{style:{margin:"0",color:"#666",fontSize:"0.875rem"},children:"Click to upload image"}),t.jsx("p",{style:{margin:"4px 0 0 0",color:"#999",fontSize:"0.75rem"},children:"PNG, JPG, GIF up to 5MB"})]})})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"8px"},children:[t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{js(!1),Hi(null),or({paymentMethod:"",imageFile:null,imagePreview:null,imageUrl:"",reference:""}),ma({image:!1,reference:!1})},disabled:za,children:"Cancel"}),bn.paymentMethod&&t.jsx("button",{type:"button",className:"primary-btn",disabled:za,onClick:async()=>{const u=bn.paymentMethod==="Online"?bn.reference.trim():!0;if(bn.paymentMethod==="Online"&&!u){ma({...Hn,reference:!0}),Ue("Reference number not entered. Please enter a reference number for online payments.","warning");return}if(!(bn.imageFile||bn.imageUrl||aa?.screenshot)){ma({...Hn,image:!0}),Ue("Image has not been uploaded. Please upload an image attachment.","warning");return}ma({image:!1,reference:!1}),ci(`Are you sure you want to mark Invoice #${aa.id} as paid?`,async()=>{Ca(!0);try{const B="http://localhost:4000";let F=bn.imageUrl||aa.screenshot;if(bn.imageFile){const Y=new FormData;Y.append("screenshot",bn.imageFile),Y.append("uploadType","invoice-payment-attachment");const Ce=await fetch(`${B}/api/upload/screenshot`,{method:"POST",body:Y});if(!Ce.ok){let Qe="Failed to upload image";try{const at=await Ce.json();Qe=at.error||Qe,console.error("Upload error response:",at)}catch(at){console.error("Failed to parse error response:",at),Qe=`Upload failed with status ${Ce.status}`}throw new Error(Qe)}const Ne=await Ce.json();if(!Ne.url)throw new Error("No URL returned from upload. Please try again.");F=Ne.url}if(!F)throw new Error("Image upload is required for all payments");if(bn.paymentMethod==="Online"&&!bn.reference.trim())throw new Error("Reference number is required for online payments");F&&F!==aa.screenshot&&await ge(aa.id,{screenshot:F});const T=bn.paymentMethod==="Admin"?"Cash":"Online",K=bn.paymentMethod==="Online"?bn.reference.trim():null;await Zo(aa.id,T,F,K),js(!1),Hi(null),or({paymentMethod:"",imageFile:null,imagePreview:null,imageUrl:"",reference:""}),ma({image:!1,reference:!1}),Ue(`Invoice #${aa.id} marked as paid!`,"success")}catch(B){console.error("Error processing payment:",B),Ue(B.message||"Failed to process payment","error")}finally{Ca(!1)}},null,"Confirm")},style:{opacity:za?.6:1,cursor:za?"not-allowed":"pointer"},children:za?"Processing...":"Mark as Paid"})]})]})]})}),Zt&&Sn&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:u=>{u.target===u.currentTarget&&(ai(!1),zs(null))},children:t.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative"},onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},children:[t.jsx("i",{className:"fas fa-receipt",style:{marginRight:"8px",color:"#5a31ea"}}),"Payment Details"]}),t.jsx("button",{type:"button",onClick:()=>{ai(!1),zs(null)},style:{background:"transparent",border:"none",fontSize:"1.5rem",color:"#666",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:u=>{u.target.style.background="#f3f4f6",u.target.style.color="#1a1a1a"},onMouseLeave:u=>{u.target.style.background="transparent",u.target.style.color="#666"},children:""})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[Sn.date&&t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsx("span",{style:{display:"block",color:"#666",fontSize:"0.875rem",marginBottom:"4px"},children:"Date"}),t.jsx("strong",{style:{color:"#1a1a1a",fontSize:"1rem"},children:Sn.date})]}),Sn.amount&&t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsx("span",{style:{display:"block",color:"#666",fontSize:"0.875rem",marginBottom:"4px"},children:"Amount"}),t.jsx("strong",{style:{color:"#5a31ea",fontSize:"1.25rem",fontWeight:"700"},children:Sn.amount})]}),Sn.status&&t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsx("span",{style:{display:"block",color:"#666",fontSize:"0.875rem",marginBottom:"4px"},children:"Status"}),t.jsx("span",{className:`badge ${Sn.status==="Paid"||Sn.status==="Completed"?"badge-paid":Sn.status==="Pending Verification"||Sn.status==="Pending"?"badge-pending":"badge-unpaid"}`,style:{fontSize:"0.875rem",padding:"6px 12px",display:"inline-block",marginTop:"4px"},children:Sn.status})]}),t.jsxs("div",{style:{padding:"16px",background:"#f8f9ff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsx("span",{style:{display:"block",color:"#666",fontSize:"0.875rem",marginBottom:"4px"},children:"Payment Method"}),t.jsx("strong",{style:{color:"#1a1a1a",fontSize:"1rem"},children:wn(Sn)})]})]}),t.jsxs("div",{style:{padding:"20px",background:"#fafafa",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[t.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"1rem",fontWeight:"600",color:"#333"},children:"Additional Information"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[Sn.reference&&Sn.reference!=="N/A"&&Sn.reference!=="-"&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Reference:"}),t.jsx("strong",{style:{fontSize:"0.875rem",fontFamily:"monospace",color:"#1a1a1a"},children:Sn.reference})]}),Sn.paidToAdminName&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Paid to:"}),t.jsx("strong",{style:{fontSize:"0.875rem",color:"#1a1a1a"},children:Sn.paidToAdminName})]}),Sn.period&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Period:"}),t.jsx("strong",{style:{fontSize:"0.875rem",color:"#1a1a1a"},children:Sn.period})]}),Sn.member&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Member:"}),t.jsx("strong",{style:{fontSize:"0.875rem",color:"#1a1a1a"},children:Sn.member})]}),Sn.memberEmail&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Email:"}),t.jsx("strong",{style:{fontSize:"0.875rem",color:"#1a1a1a"},children:Sn.memberEmail})]}),Sn.invoiceId&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"Invoice ID:"}),t.jsx("strong",{style:{fontSize:"0.875rem",fontFamily:"monospace",color:"#1a1a1a"},children:Sn.invoiceId})]}),Sn.notes&&t.jsxs("div",{style:{marginTop:"8px",paddingTop:"12px",borderTop:"1px solid #e0e0e0"},children:[t.jsx("span",{style:{display:"block",fontSize:"0.875rem",color:"#666",marginBottom:"4px"},children:"Notes:"}),t.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1a1a1a"},children:Sn.notes})]})]})]}),Sn.screenshot&&t.jsxs("div",{children:[t.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"1rem",fontWeight:"600",color:"#333"},children:[t.jsx("i",{className:"fas fa-image",style:{marginRight:"8px",color:"#5a31ea"}}),"Payment Screenshot"]}),t.jsx("div",{style:{border:"1px solid #e0e0e0",borderRadius:"8px",overflow:"hidden",background:"#fafafa"},children:t.jsx("img",{src:Sn.screenshot,alt:"Payment Screenshot",style:{width:"100%",height:"auto",display:"block",cursor:"pointer"},onClick:()=>{const u=window.open();u&&u.document.write(`
                            <html>
                              <head><title>Payment Screenshot</title></head>
                              <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                                <img src="${Sn.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                              </body>
                            </html>
                          `)}})}),t.jsxs("button",{type:"button",onClick:()=>{const u=window.open();u&&u.document.write(`
                          <html>
                            <head><title>Payment Screenshot</title></head>
                            <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                              <img src="${Sn.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                            </body>
                          </html>
                        `)},className:"primary-btn",style:{width:"100%",marginTop:"12px",padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[t.jsx("i",{className:"fas fa-expand"}),"Open Screenshot in New Window"]})]}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"8px"},children:t.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>{ai(!1),zs(null)},children:"Close"})})]})]})}),t.jsx(Kc,{})]})}function ky(){const{members:i,admins:a,invoices:r,payments:o,paymentHistory:c,addPayment:l,updateInvoice:m,updateMember:p,fetchInvoices:g,fetchPayments:v,fetchMembers:j,loading:A}=Qd(),M=[{id:"dashboard",label:"Dashboard"},{id:"pay",label:"Pay Now"},{id:"invoices",label:"Invoices"},{id:"history",label:"Payment History"},{id:"profile",label:"Profile"}],[b,U]=Q.useState(M[0].id),[E,I]=Q.useState("Online Payment"),[P,W]=Q.useState([]),[X,H]=Q.useState(""),[fe,he]=Q.useState(null),[Ee,ge]=Q.useState(!1),[ee,xe]=Q.useState(null),[z,$]=Q.useState(!1),[le,ie]=Q.useState(null),[we,_e]=Q.useState("success"),[Ie,pe]=Q.useState(!1),[Pe,ze]=Q.useState(!1),[te,C]=Q.useState(!1),[J,Z]=Q.useState(!1),[de,ce]=Q.useState(1),[be,Me]=Q.useState(10),Fe=sessionStorage.getItem("memberEmail"),We=sessionStorage.getItem("memberId"),De=We?i.find(Ae=>Ae.id===We):Fe?i.find(Ae=>Ae.email&&Ae.email.toLowerCase()===Fe.toLowerCase()):null,[it,ot]=Q.useState(()=>De?{name:De.name||"",email:De.email||"",phone:De.phone||"",password:"",emailReminders:!0,whatsappReminders:!0}:{name:"",email:"",phone:"",password:"",emailReminders:!0,whatsappReminders:!0});Q.useEffect(()=>{De&&ot({name:De.name||"",email:De.email||"",phone:De.phone||"",password:"",emailReminders:!0,whatsappReminders:!0})},[De,i]),Q.useEffect(()=>{(Fe||We)&&!De&&!A&&i.length===0&&j()},[Fe,We,De,A,i.length]),Q.useEffect(()=>{b==="history"&&ce(1)},[be,b]),Q.useEffect(()=>{(b==="invoices"||b==="history")&&(g(),v())},[b]),Q.useEffect(()=>{const Ae=qe=>{te&&!qe.target.closest(".admin-menu")&&!qe.target.closest(".mobile-menu-toggle")&&C(!1)};return te?(document.addEventListener("click",Ae),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("click",Ae),document.body.style.overflow=""}},[te]);const pt=fo();Om(15);const V=Ae=>{U(Ae),$(!1)},et=()=>{Et("You have been logged out","success"),setTimeout(()=>{pt("/login",{replace:!0})},500)},Et=(Ae,qe="success")=>{ie(Ae),_e(qe),setTimeout(()=>ie(null),3e3)},Ct=Ae=>{const qe=(o||c||[]).find(se=>se.invoiceId===Ae.id);if(qe){if(qe.status==="Pending")return"Pending Verification";if(qe.status==="Completed")return"Paid";if(qe.status==="Rejected")return"Unpaid"}return Ae.status},Xe=()=>De?r.filter(Ae=>{const qe=Ct(Ae);return(Ae.memberId===De.id||Ae.memberEmail===De.email||Ae.memberName===De.name)&&(qe==="Unpaid"||qe==="Overdue")}):[],bt=()=>Xe().map(qe=>({label:qe.period,due:qe.due,amount:qe.amount,status:qe.status,id:qe.id})),mt=()=>P.reduce((Ae,qe)=>{const se=r.find(Se=>Se.id===qe);return se?Ae+parseFloat(se.amount.replace("$","")):Ae},0),Pt=Ae=>{P.includes(Ae)?W(P.filter(qe=>qe!==Ae)):W([...P,Ae])},Dt=async Ae=>{if(Ae.preventDefault(),P.length===0){Et("Please select at least one invoice","error");return}if(!fe){Et("Please upload a payment screenshot","error");return}ge(!0);try{const qe="http://localhost:4000",se=new FormData;se.append("screenshot",fe);const Se=await fetch(`${qe}/api/upload-screenshot`,{method:"POST",body:se});if(!Se.ok){let He="Failed to upload screenshot";try{const ct=await Se.json();He=ct.error||He,console.error("Upload error response:",ct)}catch(ct){console.error("Failed to parse error response:",ct),He=`Upload failed with status ${Se.status}`}throw new Error(He)}const rt=await Se.json();if(!rt.url)throw new Error("No URL returned from upload. Please try again.");const ht=rt.url;for(const He of P){const ct=r.find(Vt=>Vt.id===He);ct&&(await m(He,{status:"Pending Verification",method:"Screenshot",reference:`PENDING_${Date.now()}`,screenshot:ht}),await l({invoiceId:He,amount:ct.amount,method:"Screenshot",reference:`PENDING_${Date.now()}`,member:De?.name||"Member",memberId:De?.id,memberEmail:De?.email,period:ct.period,status:"Pending",screenshot:ht}))}he(null),W([]),$(!0),Et(`Payment proof submitted successfully! ${P.length} invoice(s) pending admin approval.`)}catch(qe){console.error("Error submitting payment:",qe),Et(qe.message||"Failed to submit payment. Please try again.","error")}finally{ge(!1)}},wt=async Ae=>{if(Ae.preventDefault(),P.length===0){Et("Please select at least one invoice","error");return}if(!X){Et("Please select the admin you paid to","error");return}ge(!0);try{const qe=a.find(Se=>Se.id===X);if(!qe){Et("Admin not found","error");return}let se=null;if(fe){const Se="http://localhost:4000",rt=new FormData;rt.append("screenshot",fe);const ht=await fetch(`${Se}/api/upload-screenshot`,{method:"POST",body:rt});if(!ht.ok){let ct="Failed to upload screenshot";try{const Vt=await ht.json();ct=Vt.error||ct,console.error("Upload error response:",Vt)}catch(Vt){console.error("Failed to parse error response:",Vt),ct=`Upload failed with status ${ht.status}`}throw new Error(ct)}const He=await ht.json();if(!He.url)throw new Error("No URL returned from upload. Please try again.");se=He.url}for(const Se of P){const rt=r.find(ht=>ht.id===Se);rt&&(await m(Se,{status:"Pending Verification",method:"Cash to Admin",reference:`CASH_PENDING_${Date.now()}`,paidToAdmin:qe.id,paidToAdminName:qe.name,screenshot:se}),await l({invoiceId:Se,amount:rt.amount,method:"Cash to Admin",reference:`CASH_PENDING_${Date.now()}`,member:De?.name||"Member",memberId:De?.id,memberEmail:De?.email,period:rt.period,status:"Pending",paidToAdmin:qe.id,paidToAdminName:qe.name,screenshot:se}))}W([]),H(""),he(null),$(!0),Et(`Payment submitted successfully! ${P.length} invoice(s) pending admin approval.`)}catch(qe){console.error("Error submitting payment:",qe),Et(qe.message||"Failed to submit payment. Please try again.","error")}finally{ge(!1)}},Qt=async Ae=>{if(Ae.preventDefault(),!De){Et("Member not found","error");return}try{const qe={name:it.name,email:it.email,phone:it.phone};if(it.password&&it.password.trim()!==""){if(it.password.length<6){Et("Password must be at least 6 characters long","error");return}qe.password=it.password}await p(De.id,qe),Et("Profile updated successfully!"),pe(!1),ot({...it,password:""})}catch(qe){console.error("Error updating profile:",qe),Et("Failed to update profile. Please try again.","error")}},$t=(()=>{const Ae=Xe(),qe=Ae.reduce((ct,Vt)=>{const vt=parseFloat(Vt.amount?.replace(/[^0-9.]/g,"")||0);return ct+vt},0),se=new Date().getFullYear();let ht=(De?c.filter(ct=>(ct.memberId===De.id||ct.memberEmail===De.email||ct.member===De.name)&&(ct.status==="Paid"||ct.status==="Completed")):c.filter(ct=>ct.status==="Paid"||ct.status==="Completed")).filter(ct=>ct.date?new Date(ct.date).getFullYear()===se:!1).reduce((ct,Vt)=>{const vt=parseFloat(Vt.amount?.replace(/[^0-9.]/g,"")||0);return ct+vt},0);ht===0&&(ht=r.filter(vt=>vt.status==="Paid"&&(vt.memberId===De?.id||vt.memberEmail===De?.email||vt.memberName===De?.name)).filter(vt=>vt.due?new Date(vt.due).getFullYear()===se:!0).reduce((vt,An)=>vt+parseFloat(An.amount.replace("$","")),0));const He=Ae.sort((ct,Vt)=>new Date(ct.due)-new Date(Vt.due))[0];return{outstanding:qe,paidThisYear:ht,nextDue:He?.due||"N/A",nextDueAmount:He?.amount||"$0"}})();return A||(Fe||We)&&!De&&i.length===0?t.jsxs("div",{className:"member-loading-container",children:[t.jsx("div",{className:"member-loading-spinner"}),t.jsx("p",{className:"member-loading-text",children:A?"Loading data from server...":"Loading member information..."})]}):(Fe||We)&&!A&&i.length>0&&!De?t.jsxs("div",{className:"member-not-found-container",children:[t.jsx("div",{className:"member-not-found-icon",children:""}),t.jsx("p",{className:"member-not-found-title",children:"Member Not Found"}),t.jsx("p",{className:"member-not-found-text",children:"We couldn't find your member account. Please contact support or try logging in again."}),t.jsx("button",{onClick:()=>{sessionStorage.clear(),pt("/login")},className:"primary-btn member-not-found-button",children:"Return to Login"})]}):t.jsxs(t.Fragment,{children:[t.jsx(Jc,{showCTA:!1,showLogout:!0,onLogout:et,showMobileMenu:!0,isMobileMenuOpen:te,onMobileMenuToggle:()=>C(!te),isSticky:!0}),t.jsx($l,{message:le,type:we,onClose:()=>ie(null),duration:3e3}),t.jsxs("main",{className:"admin-main admin-main--sticky-header",children:[te&&t.jsx("div",{className:"mobile-menu-overlay",onClick:()=>C(!1)}),t.jsxs("div",{className:"admin-layout",children:[t.jsxs("aside",{className:`admin-menu ${te?"mobile-open":""}`,onClick:Ae=>Ae.stopPropagation(),children:[t.jsx("p",{className:"eyebrow light",children:"Member Portal"}),t.jsx("h3",{children:De?.name||"Member"}),t.jsx("nav",{children:M.map(Ae=>t.jsx("button",{className:`admin-tab ${b===Ae.id?"active":""}`,onClick:()=>{V(Ae.id),C(!1)},children:Ae.label},Ae.id))})]}),t.jsxs("div",{className:"admin-body",children:[b==="dashboard"&&t.jsxs("article",{className:"screen-card",id:"dashboard",children:[t.jsx("header",{className:"screen-card__header",children:t.jsxs("div",{children:[t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-chart-line member-dashboard-icon"}),"Dashboard"]}),t.jsxs("p",{children:["Welcome back, ",De?.name?.split(" ")[0]||"Member",". Here's an overview of your membership account."]})]})}),t.jsxs("div",{className:"card dashboard-card",children:[$t.outstanding>0&&!Pe&&t.jsxs("div",{className:"alert-banner alert-warning member-alert-banner",children:[t.jsxs("div",{className:"alert-content",children:[t.jsx("strong",{children:"Payment Due Soon"}),t.jsxs("p",{children:["You have an outstanding balance of $",$t.outstanding.toFixed(2),". Please pay to avoid late fees."]})]}),t.jsx("button",{className:"alert-dismiss member-alert-dismiss",onClick:()=>ze(!0),children:""})]}),t.jsxs("div",{className:"kpi-grid",children:[t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-exclamation-circle",style:{marginRight:"8px",color:"#ef4444"}}),"Outstanding Balance"]}),t.jsxs("h4",{children:["$",$t.outstanding.toFixed(2)]}),t.jsxs("small",{children:[Xe().length," invoice(s) pending"]})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-calendar-alt",style:{marginRight:"8px",color:"#5a31ea"}}),"Next Due Date"]}),t.jsx("h4",{children:$t.nextDue}),t.jsx("small",{children:$t.nextDueAmount})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-check-circle",style:{marginRight:"8px",color:"#10b981"}}),"Paid This Year"]}),t.jsxs("h4",{children:["$",parseFloat($t.paidThisYear).toFixed(2)]}),t.jsx("small",{children:"On track"})]}),t.jsxs("div",{className:"card kpi",children:[t.jsxs("p",{children:[t.jsx("i",{className:"fas fa-user-check",style:{marginRight:"8px",color:"#5a31ea"}}),"Membership Plan"]}),t.jsx("h4",{children:"Active"}),t.jsx("small",{children:"Lifetime: $250/year or Yearly + Janaza Fund: $500/year"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginTop:"24px"},children:[t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header-flex",children:[t.jsxs("h4",{children:[t.jsx("i",{className:"fas fa-clock",style:{marginRight:"8px"}}),"Upcoming Payments"]}),t.jsx("span",{className:"badge-count",children:bt().length})]}),t.jsx("div",{className:"payment-list",children:bt().slice(0,3).map(Ae=>t.jsxs("div",{className:"payment-item",children:[t.jsxs("div",{className:"payment-info",children:[t.jsx("strong",{className:"payment-title",children:Ae.label}),t.jsxs("span",{className:"payment-date",children:["Due ",Ae.due]})]}),t.jsxs("div",{className:"payment-right",children:[t.jsx("span",{className:"payment-amount",children:Ae.amount}),t.jsx("span",{className:hi[Ae.status],children:Ae.status})]})]},Ae.id))}),t.jsx("button",{className:"btn-link",onClick:()=>V("invoices"),children:"View All Invoices "})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header-flex",children:t.jsxs("h4",{children:[t.jsx("i",{className:"fas fa-history",style:{marginRight:"8px"}}),"Recent Activity"]})}),t.jsx("div",{className:"activity-list",children:(()=>{const qe=(De?c.filter(se=>se.memberId===De.id||se.memberEmail===De.email||se.member===De.name):c).slice(0,3);return qe.length===0?t.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#666",fontSize:"0.9rem"},children:"No recent payments"}):qe.map((se,Se)=>t.jsx("div",{className:"activity-item",children:t.jsxs("div",{className:"activity-details",children:[t.jsx("strong",{children:"Payment Made"}),t.jsxs("span",{children:[se.date,"  ",se.amount," via ",se.paidToAdmin||se.paidToAdminName||se.method==="Cash to Admin"?"Cash":["Screenshot","Bank Transfer","FPS","PayMe","Alipay","Credit Card","Online Payment"].includes(se.method)?"Online Payment":se.method||"N/A",se.paidToAdminName&&`  Paid to ${se.paidToAdminName}`,se.reference&&`  Ref: ${se.reference}`]})]})},Se))})()}),(De?c.filter(qe=>qe.memberId===De.id||qe.memberEmail===De.email||qe.member===De.name):c).length>0&&t.jsx("button",{className:"btn-link",onClick:()=>V("history"),children:"View Payment History "})]}),t.jsxs("div",{className:"card quick-actions-card",children:[t.jsxs("h4",{children:[t.jsx("i",{className:"fas fa-bolt",style:{marginRight:"8px"}}),"Quick Actions"]}),t.jsxs("div",{className:"quick-actions-grid",children:[t.jsxs("button",{className:"quick-action-btn",onClick:()=>V("pay"),children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"8px"}}),t.jsx("span",{className:"action-label",children:"Pay Now"})]}),t.jsxs("button",{className:"quick-action-btn",onClick:()=>V("invoices"),children:[t.jsx("i",{className:"fas fa-file-invoice",style:{marginRight:"8px"}}),t.jsx("span",{className:"action-label",children:"View Invoices"})]}),t.jsxs("button",{className:"quick-action-btn",onClick:()=>V("history"),children:[t.jsx("i",{className:"fas fa-list-alt",style:{marginRight:"8px"}}),t.jsx("span",{className:"action-label",children:"Payment History"})]}),t.jsxs("button",{className:"quick-action-btn",onClick:()=>V("profile"),children:[t.jsx("i",{className:"fas fa-cog",style:{marginRight:"8px"}}),t.jsx("span",{className:"action-label",children:"Settings"})]})]})]})]})]})]}),b==="pay"&&t.jsxs("article",{className:"screen-card",id:"pay",children:[t.jsxs("header",{className:"screen-card__header",children:[t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-credit-card",style:{marginRight:"10px"}}),"Pay Now"]}),t.jsx("p",{children:"Select invoices and choose your payment method."})]}),z?t.jsxs("div",{className:"card",style:{textAlign:"center",padding:"40px"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("h2",{children:"Payment Submitted"}),t.jsx("p",{style:{color:"#666",marginBottom:"24px"},children:"Your payment has been submitted successfully."}),t.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[t.jsx("button",{className:"primary-btn",onClick:()=>V("dashboard"),children:"Back to Dashboard"}),t.jsx("button",{className:"secondary-btn",onClick:()=>{$(!1),V("invoices")},children:"View Invoices"})]})]}):t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"invoice-selection-section",style:{marginBottom:"32px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"12px"},children:[t.jsx("h4",{style:{margin:0},children:"Select Invoices to Pay"}),Xe().length>0&&t.jsx("button",{type:"button",className:"ghost-btn",style:{fontSize:"0.875rem",padding:"6px 12px"},onClick:()=>{P.length===Xe().length?W([]):W(Xe().map(Ae=>Ae.id))},children:P.length===Xe().length?"Deselect All":"Select All"})]}),Xe().length===0?t.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:t.jsx("p",{style:{margin:0,fontSize:"1rem"},children:"No unpaid invoices available."})}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px",marginBottom:"24px"},children:Xe().map(Ae=>{const qe=P.includes(Ae.id);return t.jsxs("label",{style:{display:"flex",flexDirection:"column",padding:"16px",border:`2px solid ${qe?"#5a31ea":"#e0e0e0"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:qe?"rgba(0, 0, 0, 0.02)":"#fff",position:"relative"},onMouseEnter:se=>{qe||(se.currentTarget.style.borderColor="#ccc")},onMouseLeave:se=>{qe||(se.currentTarget.style.borderColor="#e0e0e0")},children:[t.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"12px"},children:[t.jsx("input",{type:"checkbox",checked:qe,onChange:()=>Pt(Ae.id),style:{marginTop:"2px",width:"18px",height:"18px",cursor:"pointer",flexShrink:0}}),t.jsxs("div",{style:{flex:1,minWidth:0},children:[t.jsx("div",{style:{fontWeight:"600",fontSize:"0.95rem",marginBottom:"4px",color:"#5a31ea"},children:Ae.period}),t.jsxs("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"8px"},children:["Due: ",Ae.due]})]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto",paddingTop:"12px",borderTop:"1px solid #e5e7eb"},children:[t.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#1a1a1a"},children:Ae.amount}),t.jsx("span",{className:hi[Ct(Ae)],style:{fontSize:"0.75rem",padding:"4px 8px"},children:Ct(Ae)})]})]},Ae.id)})}),P.length>0&&t.jsx("div",{style:{padding:"20px",backgroundColor:"#f8f8f8",borderRadius:"8px",border:"1px solid #e0e0e0"},children:t.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:"0.875rem",color:"#666",marginBottom:"4px"},children:[P.length," invoice",P.length>1?"s":""," selected"]}),t.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#5a31ea"},children:["Total: $",mt().toFixed(2)]})]})})})]}),P.length>0&&t.jsxs("div",{className:"payment-methods",children:[t.jsxs("div",{className:"tabs",children:[t.jsx("button",{className:`tab ${E==="Online Payment"?"active":""}`,onClick:()=>I("Online Payment"),children:"Online Payment"}),t.jsx("button",{className:`tab ${E==="Cash Payment"?"active":""}`,onClick:()=>I("Cash Payment"),children:"Cash Payment"})]}),E==="Online Payment"&&t.jsxs("form",{className:"method-panel",onSubmit:Dt,noValidate:!0,children:[t.jsx("p",{style:{marginBottom:"16px",color:"#666"},children:"Upload a screenshot of your payment confirmation for the selected invoice(s). All selected invoices will be marked as paid once the screenshot is uploaded."}),t.jsxs("label",{children:["Upload Payment Screenshot *",t.jsx("input",{type:"file",accept:"image/*",required:!0,onInvalid:Ae=>Ae.preventDefault(),onChange:Ae=>he(Ae.target.files[0])}),fe&&t.jsxs("div",{style:{marginTop:"8px",fontSize:"0.875rem",color:"#666"},children:["Selected: ",fe.name]})]}),t.jsx("button",{type:"submit",className:"primary-btn",style:{marginTop:"16px"},disabled:Ee,children:Ee?"Uploading...":`Pay $${mt().toFixed(2)}`})]}),E==="Cash Payment"&&t.jsxs("form",{className:"method-panel",onSubmit:wt,noValidate:!0,children:[t.jsx("p",{style:{marginBottom:"16px",color:"#666"},children:"Select the admin you paid to. You can optionally upload a payment screenshot as proof. All selected invoices will be pending admin approval."}),t.jsxs("label",{children:["Select Admin You Paid To *",t.jsxs("select",{required:!0,onInvalid:Ae=>Ae.preventDefault(),value:X||"",onChange:Ae=>H(Ae.target.value),style:{color:"#000"},children:[t.jsx("option",{value:"",children:"Choose an admin"}),a.filter(Ae=>Ae.status==="Active").map(Ae=>t.jsxs("option",{value:Ae.id,children:[Ae.name," (",Ae.email,")"]},Ae.id))]})]}),t.jsxs("label",{children:["Upload Payment Screenshot (Optional)",t.jsx("input",{type:"file",accept:"image/*",onChange:Ae=>he(Ae.target.files[0])}),fe&&t.jsxs("div",{style:{marginTop:"8px",fontSize:"0.875rem",color:"#666"},children:["Selected: ",fe.name]})]}),t.jsx("button",{type:"submit",className:"primary-btn",style:{marginTop:"16px"},disabled:Ee,children:Ee?"Uploading...":`Pay $${mt().toFixed(2)}`})]})]}),P.length===0&&t.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666",border:"2px dashed #e0e0e0",borderRadius:"8px"},children:t.jsx("p",{style:{margin:0,fontSize:"1rem"},children:"Please select at least one invoice above to proceed with payment."})})]})]}),b==="invoices"&&t.jsxs("article",{className:"screen-card",id:"invoices",children:[t.jsxs("header",{className:"screen-card__header",children:[t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-file-invoice-dollar",style:{marginRight:"10px"}}),"My Invoices"]}),t.jsx("p",{children:"View all your invoices and payment status."})]}),t.jsx("div",{className:"card",children:(()=>{if(!r||!Array.isArray(r))return t.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"Loading invoices..."});const Ae=De?r.filter(qe=>qe&&(qe.memberId===De.id||qe.memberEmail===De.email||qe.memberName===De.name)):r;return Ae.length===0?t.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:t.jsx("p",{children:"No invoices found."})}):t.jsx(fi,{columns:["Invoice No","Period","Amount","Status","Due Date","Action"],rows:Ae.map(qe=>{if(!qe)return null;const se=Ct(qe);return{"Invoice No":qe.id||"N/A",Period:qe.period||"N/A",Amount:qe.amount||"$0",Status:{render:()=>t.jsx("span",{className:hi[se]||"badge badge-unpaid",children:se})},"Due Date":qe.due||"N/A",Action:{render:()=>se==="Paid"||se==="Pending Verification"?t.jsx("button",{className:"ghost-btn",style:{padding:"6px 12px"},onClick:()=>xe(qe),children:"View"}):t.jsx("button",{className:"primary-btn",style:{padding:"6px 12px"},onClick:()=>{W([qe.id]),V("pay")},children:"Pay Now"})}}}).filter(qe=>qe!==null)})})()})]}),ee&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},onClick:()=>xe(null),children:t.jsxs("div",{style:{background:"#fff",borderRadius:"12px",padding:"32px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 8px 24px rgba(0,0,0,0.2)"},onClick:Ae=>Ae.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[t.jsx("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:"700"},children:"Invoice Details"}),t.jsx("button",{onClick:()=>xe(null),style:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"#666",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:Ae=>{Ae.target.style.background="#f3f4f6",Ae.target.style.color="#000"},onMouseLeave:Ae=>{Ae.target.style.background="transparent",Ae.target.style.color="#666"},children:""})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t.jsxs("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Invoice ID:"}),t.jsx("strong",{children:ee.id})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Period:"}),t.jsx("strong",{children:ee.period})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Amount:"}),t.jsx("strong",{style:{fontSize:"1.25rem",color:"#000"},children:ee.amount})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Due Date:"}),t.jsx("strong",{children:ee.due})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Status:"}),t.jsx("span",{className:hi[Ct(ee)],children:Ct(ee)})]})]}),Ct(ee)==="Pending Verification"&&t.jsxs("div",{style:{padding:"16px",background:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107",marginBottom:"16px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[t.jsx("span",{style:{fontSize:"1.25rem"},children:""}),t.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"600",color:"#856404"},children:"Payment Pending Approval"})]}),t.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#856404"},children:"Your payment has been submitted and is awaiting admin approval. You will be notified once it's reviewed."}),ee.method&&t.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #ffc107"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#856404",fontSize:"0.875rem"},children:"Payment Method:"}),t.jsx("strong",{style:{color:"#856404"},children:ee.method})]})})]}),Ct(ee)==="Paid"&&t.jsxs("div",{style:{padding:"16px",background:"#f0f8ff",borderRadius:"8px",border:"1px solid #1677FF"},children:[t.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"1rem",fontWeight:"600"},children:"Payment Information"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Payment Method:"}),t.jsx("strong",{children:ee.paidToAdmin||ee.paidToAdminName||ee.method==="Cash to Admin"?"Cash":["Screenshot","Bank Transfer","FPS","PayMe","Alipay","Credit Card","Online Payment"].includes(ee.method)?"Online Payment":ee.method||"N/A"})]}),ee.reference&&ee.reference!=="-"&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Reference:"}),t.jsx("strong",{children:ee.reference})]}),ee.paidToAdminName&&t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Paid to:"}),t.jsx("strong",{children:ee.paidToAdminName})]})]})]}),ee.screenshot&&t.jsxs("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px"},children:[t.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"1rem",fontWeight:"600"},children:"Payment Screenshot"}),t.jsx("button",{onClick:()=>{const Ae=window.open();Ae&&Ae.document.write(`
                                <html>
                                  <head><title>Payment Screenshot - ${ee.id}</title></head>
                                  <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                                    <img src="${ee.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                                  </body>
                                </html>
                              `)},style:{width:"100%",padding:"12px",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.3)"},onMouseEnter:Ae=>{Ae.target.style.background="linear-gradient(135deg, #4a28d0 0%, #6b3fff 100%)",Ae.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.4)"},onMouseLeave:Ae=>{Ae.target.style.background="linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",Ae.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.3)"},children:t.jsx("span",{style:{color:"#ffffff"},children:" View Full Screenshot"})}),t.jsx("img",{src:ee.screenshot,alt:"Payment Screenshot Preview",style:{width:"100%",maxHeight:"300px",objectFit:"contain",borderRadius:"8px",marginTop:"12px",border:"1px solid #e0e0e0"}})]})]}),t.jsx("div",{style:{marginTop:"24px",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{onClick:()=>xe(null),style:{padding:"10px 20px",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.3)"},onMouseEnter:Ae=>{Ae.target.style.background="linear-gradient(135deg, #4a28d0 0%, #6b3fff 100%)",Ae.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.4)"},onMouseLeave:Ae=>{Ae.target.style.background="linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",Ae.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.3)"},children:"Close"})})]})}),b==="history"&&t.jsxs("article",{className:"screen-card",id:"history",children:[t.jsxs("header",{className:"screen-card__header",children:[t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-history",style:{marginRight:"10px"}}),"Payment History"]}),t.jsx("p",{children:"Complete record of all your payments."})]}),t.jsx("div",{style:{marginTop:"24px"},children:(()=>{const Ae=De?c.filter(He=>He.memberId===De.id||He.memberEmail===De.email||He.member===De.name):c,qe=Math.ceil(Ae.length/be),se=Math.min(Math.max(1,de),qe||1),Se=se*be,rt=Se-be,ht=Ae.slice(rt,Se);return Ae.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("p",{style:{margin:0,fontSize:"1.125rem",fontWeight:"500"},children:"No payment history yet"}),t.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.9375rem",color:"#999"},children:"Your payment records will appear here"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsxs("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#1a1a1a",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("i",{className:"fas fa-list",style:{color:"#5a31ea"}}),"Show:"]}),t.jsxs("select",{value:be,onChange:He=>{Me(Number(He.target.value)),ce(1)},style:{padding:"8px 12px",border:"none",borderRadius:"8px",background:"#f8f9ff",color:"#1a1a1a",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",boxShadow:"0 2px 4px rgba(90, 49, 234, 0.08)",outline:"none"},children:[t.jsx("option",{value:2,children:"2"}),t.jsx("option",{value:5,children:"5"}),t.jsx("option",{value:10,children:"10"}),t.jsx("option",{value:20,children:"20"}),t.jsx("option",{value:50,children:"50"}),t.jsx("option",{value:100,children:"100"})]}),t.jsx("span",{style:{fontSize:"0.875rem",color:"#666"},children:"per page"})]}),t.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:["Showing ",rt+1," to ",Math.min(Se,Ae.length)," of ",Ae.length," payments"]})]}),t.jsx("div",{className:"payment-history-list",style:{marginBottom:"24px"},children:ht.map((He,ct)=>{const Vt=He.paidToAdmin||He.paidToAdminName||He.method==="Cash to Admin"?"Cash":["Screenshot","Bank Transfer","FPS","PayMe","Alipay","Credit Card","Online Payment"].includes(He.method)?"Online Payment":He.method||"N/A";return t.jsxs("div",{className:"payment-history-card",children:[t.jsxs("div",{className:"payment-history-card__main",children:[t.jsxs("div",{children:[t.jsx("p",{className:"payment-history-card__amount",children:He.amount||"$0"}),t.jsx("p",{className:"payment-history-card__date",children:He.date||"N/A"})]}),t.jsx("div",{className:"payment-history-card__status",children:t.jsx("span",{className:hi[He.status]||"payment-history-card__status-pill",children:He.status||"Pending"})})]}),t.jsxs("div",{className:"payment-history-card__meta",children:[t.jsxs("div",{children:[t.jsx("span",{className:"label",children:"Method"}),t.jsx("span",{className:"value",children:Vt})]}),He.reference&&He.reference!=="-"&&t.jsxs("div",{children:[t.jsx("span",{className:"label",children:"Reference"}),t.jsx("span",{className:"value code",children:He.reference})]}),He.paidToAdminName&&t.jsxs("div",{children:[t.jsx("span",{className:"label",children:"Paid to"}),t.jsx("span",{className:"value",children:He.paidToAdminName})]}),He.period&&t.jsxs("div",{children:[t.jsx("span",{className:"label",children:"Period"}),t.jsx("span",{className:"value",children:He.period})]})]}),He.status==="Pending"&&t.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107",fontSize:"0.8rem",color:"#856404"},children:" Your payment is pending admin approval. You will be notified once it's reviewed."}),He.status==="Rejected"&&He.rejectionReason&&t.jsxs("div",{style:{marginTop:"8px",padding:"8px",background:"#f8d7da",borderRadius:"8px",border:"1px solid #f5c6cb",fontSize:"0.8rem",color:"#721c24"},children:[" Payment rejected: ",He.rejectionReason]}),He.screenshot&&t.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #e5e7eb"},children:t.jsxs("button",{onClick:()=>{const vt=window.open();vt&&vt.document.write(`
                                            <html>
                                              <head><title>Payment Screenshot</title></head>
                                              <body style="margin:0;padding:20px;background:#f9fafb;display:flex;justify-content:center;align-items:center;min-height:100vh;">
                                                <img src="${He.screenshot}" alt="Payment Screenshot" style="max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);" />
                                              </body>
                                            </html>
                                          `)},style:{width:"100%",padding:"8px 12px",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:"#ffffff",border:"none",borderRadius:"8px",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",boxShadow:"0 2px 8px rgba(90, 49, 234, 0.3)"},children:[t.jsx("span",{style:{color:"#ffffff"},children:""}),t.jsx("span",{style:{color:"#ffffff"},children:"View Screenshot"})]})})]},ct)})}),qe>1&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",marginTop:"32px",flexWrap:"wrap"},children:[t.jsxs("button",{onClick:()=>ce(He=>Math.max(1,He-1)),disabled:se===1,style:{padding:"10px 16px",border:"none",borderRadius:"8px",background:se===1?"#f3f4f6":"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:se===1?"#999":"#ffffff",fontSize:"0.875rem",fontWeight:"600",cursor:se===1?"not-allowed":"pointer",boxShadow:se===1?"none":"0 2px 8px rgba(90, 49, 234, 0.2)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:He=>{se!==1&&(He.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.3)")},onMouseLeave:He=>{se!==1&&(He.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.2)")},children:[t.jsx("i",{className:"fas fa-chevron-left"}),"Previous"]}),t.jsx("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:Array.from({length:qe},(He,ct)=>ct+1).map(He=>He===1||He===qe||He>=se-1&&He<=se+1?t.jsx("button",{onClick:()=>ce(He),style:{padding:"10px 16px",border:"none",borderRadius:"8px",background:se===He?"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)":"#f8f9ff",color:se===He?"#ffffff":"#1a1a1a",fontSize:"0.875rem",fontWeight:se===He?"600":"500",cursor:"pointer",boxShadow:se===He?"0 2px 8px rgba(90, 49, 234, 0.3)":"0 2px 4px rgba(90, 49, 234, 0.08)",transition:"all 0.2s ease",minWidth:"40px"},onMouseEnter:Vt=>{se!==He&&(Vt.target.style.background="#ffffff",Vt.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.15)")},onMouseLeave:Vt=>{se!==He&&(Vt.target.style.background="#f8f9ff",Vt.target.style.boxShadow="0 2px 4px rgba(90, 49, 234, 0.08)")},children:He},He):He===se-2||He===se+2?t.jsx("span",{style:{padding:"10px 8px",color:"#666",fontSize:"0.875rem"},children:"..."},He):null)}),t.jsxs("button",{onClick:()=>ce(He=>Math.min(qe,He+1)),disabled:se===qe,style:{padding:"10px 16px",border:"none",borderRadius:"8px",background:se===qe?"#f3f4f6":"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",color:se===qe?"#999":"#ffffff",fontSize:"0.875rem",fontWeight:"600",cursor:se===qe?"not-allowed":"pointer",boxShadow:se===qe?"none":"0 2px 8px rgba(90, 49, 234, 0.2)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:He=>{se!==qe&&(He.target.style.boxShadow="0 4px 12px rgba(90, 49, 234, 0.3)")},onMouseLeave:He=>{se!==qe&&(He.target.style.boxShadow="0 2px 8px rgba(90, 49, 234, 0.2)")},children:["Next",t.jsx("i",{className:"fas fa-chevron-right"})]})]})]})})()})]}),b==="profile"&&t.jsxs("article",{className:"screen-card",id:"profile",children:[t.jsxs("header",{className:"screen-card__header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[t.jsxs("div",{children:[t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-user-cog",style:{marginRight:"10px"}}),"Profile Settings"]}),t.jsx("p",{children:"Manage your account information and preferences."})]}),!Ie&&t.jsx("button",{type:"button",className:"primary-btn",onClick:()=>pe(!0),style:{padding:"10px 20px",fontSize:"0.9rem"},children:"Edit Profile"})]}),t.jsxs("form",{onSubmit:Qt,noValidate:!0,children:[t.jsx("div",{className:"card",style:{padding:"24px",marginBottom:"24px",background:"linear-gradient(135deg, #f8f8f8 0%, #ffffff 100%)",border:"1px solid #e0e0e0",borderRadius:"12px"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",flexWrap:"wrap"},children:[t.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"linear-gradient(135deg, #5a31ea 0%, #7c4eff 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"2rem",fontWeight:"600",flexShrink:0},children:De?.name?.charAt(0)?.toUpperCase()||"M"}),t.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[t.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"1.5rem",fontWeight:"600"},children:De?.name||"Member"}),t.jsx("p",{style:{margin:"0 0 4px 0",color:"#666",fontSize:"0.9rem"},children:De?.email||"No email"}),t.jsx("p",{style:{margin:0,color:"#666",fontSize:"0.9rem"},children:De?.phone||"No phone"})]}),t.jsx("div",{style:{padding:"8px 16px",background:De?.status==="Active"?"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)":"linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)",color:De?.status==="Active"?"#065f46":"#991b1b",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"500"},children:De?.status||"Active"})]})}),t.jsxs("div",{className:"card",style:{padding:"24px",marginBottom:"24px",border:"1px solid #e0e0e0",borderRadius:"12px"},children:[t.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"1.1rem",fontWeight:"600",paddingBottom:"12px",borderBottom:"2px solid #e5e7eb"},children:"Personal Information"}),Ie?t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:[t.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#333"},children:["Full Name ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{required:!0,onInvalid:Ae=>Ae.preventDefault(),value:it.name,onChange:Ae=>ot({...it,name:Ae.target.value}),style:{padding:"12px 16px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.2s"},onFocus:Ae=>Ae.target.style.borderColor="#5a31ea",onBlur:Ae=>Ae.target.style.borderColor="#ddd"})]}),t.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#333"},children:["Email Address ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),t.jsx("input",{required:!0,type:"email",onInvalid:Ae=>Ae.preventDefault(),value:it.email,onChange:Ae=>ot({...it,email:Ae.target.value}),style:{padding:"12px 16px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.2s"},onFocus:Ae=>Ae.target.style.borderColor="#5a31ea",onBlur:Ae=>Ae.target.style.borderColor="#ddd"})]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.jsx(Kd,{label:t.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#333"},children:["Phone Number (WhatsApp) ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),value:it.phone,onChange:Ae=>ot({...it,phone:Ae.target.value}),onError:Ae=>{Et(Ae,"error")},placeholder:"Enter phone number",required:!0})}),t.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#333",display:"flex",alignItems:"center",gap:"6px"},children:[t.jsx("i",{className:"fas fa-lock",style:{color:"#5a31ea",fontSize:"0.875rem"}}),"New Password (leave blank to keep current)"]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{type:J?"text":"password",value:it.password,onChange:Ae=>ot({...it,password:Ae.target.value}),placeholder:"Enter new password (min. 6 characters)",minLength:6,style:{padding:"12px 45px 12px 16px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"1rem",width:"100%",transition:"border-color 0.2s"},onFocus:Ae=>Ae.target.style.borderColor="#5a31ea",onBlur:Ae=>Ae.target.style.borderColor="#ddd"}),t.jsx("button",{type:"button",onClick:()=>Z(!J),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666"},"aria-label":J?"Hide password":"Show password",children:J?t.jsx("i",{className:"fas fa-eye-slash",style:{fontSize:"0.875rem"}}):t.jsx("i",{className:"fas fa-eye",style:{fontSize:"0.875rem"}})})]}),t.jsx("small",{style:{fontSize:"0.75rem",color:"#666",marginTop:"-4px"},children:"Leave blank if you don't want to change your password"})]})]}):t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"24px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#666",marginBottom:"8px"},children:"Full Name"}),t.jsx("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#000"},children:De?.name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#666",marginBottom:"8px"},children:"Email Address"}),t.jsx("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#000"},children:De?.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#666",marginBottom:"8px"},children:"Phone Number"}),t.jsx("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#000"},children:De?.phone||"N/A"})]})]})]}),t.jsxs("div",{className:"card",style:{padding:"24px",marginBottom:"24px",border:"1px solid #e0e0e0",borderRadius:"12px"},children:[t.jsx("h4",{style:{margin:"0 0 20px 0",fontSize:"1.1rem",fontWeight:"600",paddingBottom:"12px",borderBottom:"2px solid #e5e7eb"},children:"Notification Preferences"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",transition:"all 0.2s",background:"#f8f8f8",opacity:"0.8"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"500",marginBottom:"4px",display:"flex",alignItems:"center",gap:"8px"},children:["Email Reminders",t.jsx("span",{style:{fontSize:"0.75rem",color:"#666",fontWeight:"normal",fontStyle:"italic"},children:"(Required)"})]}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:"Receive payment reminders and updates via email"})]}),t.jsx("div",{style:{position:"relative",width:"50px",height:"28px",borderRadius:"14px",backgroundColor:"#5a31ea",cursor:"not-allowed",transition:"background-color 0.3s ease",flexShrink:0,opacity:"1"},children:t.jsx("div",{style:{position:"absolute",top:"2px",left:"24px",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#fff",transition:"left 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",transition:"all 0.2s",background:"#f8f8f8",opacity:"0.8"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"500",marginBottom:"4px",display:"flex",alignItems:"center",gap:"8px"},children:["WhatsApp Reminders",t.jsx("span",{style:{fontSize:"0.75rem",color:"#666",fontWeight:"normal",fontStyle:"italic"},children:"(Required)"})]}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#666"},children:"Receive payment reminders via WhatsApp"})]}),t.jsx("div",{style:{position:"relative",width:"50px",height:"28px",borderRadius:"14px",backgroundColor:"#5a31ea",cursor:"not-allowed",transition:"background-color 0.3s ease",flexShrink:0,opacity:"1"},children:t.jsx("div",{style:{position:"absolute",top:"2px",left:"24px",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#fff",transition:"left 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})})]})]})]}),Ie&&t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",paddingTop:"24px",borderTop:"1px solid #e5e7eb"},children:[t.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>{pe(!1),De&&ot({name:De.name||"",email:De.email||"",phone:De.phone||"",emailReminders:!0,whatsappReminders:!0})},style:{padding:"12px 24px",minWidth:"120px"},children:"Cancel"}),t.jsx("button",{type:"submit",className:"primary-btn",style:{padding:"12px 24px",minWidth:"120px"},children:"Save Changes"})]})]})]})]})]})]}),t.jsx(Kc,{})]})}function Ay(){const{members:i,fetchMembers:a}=Qd(),[r,o]=Q.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",subscriptionType:"Lifetime"}),[c,l]=Q.useState(!1),[m,p]=Q.useState(!1),[g,v]=Q.useState(!1),[j,A]=Q.useState(null),[M,b]=Q.useState("error"),[U,E]=Q.useState({name:!1,email:!1,phone:!1,password:!1,confirmPassword:!1}),I=fo();Q.useEffect(()=>{a()},[a]);const P=fe=>{if(!fe)return!1;const he=fe.trim().toLowerCase();return i.some(ge=>ge.email&&ge.email.toLowerCase()===he)?(A("This email has already been registered. Please use a different email or try logging in."),b("error"),setTimeout(()=>A(null),3e3),!0):!1},W=fe=>{const he=fe.target.value;o({...r,email:he})},X=fe=>{const he=fe.target.value.trim();he&&P(he)},H=async fe=>{fe.preventDefault();const he={name:!1,email:!1,phone:!1,password:!1,confirmPassword:!1};if(!r.name||!r.name.trim()){he.name=!0,A("Name is required"),b("error"),setTimeout(()=>A(null),3e3),E(he);return}if(!r.email||!r.email.trim()){he.email=!0,A("Email is required"),b("error"),setTimeout(()=>A(null),3e3),E(he);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email.trim())){he.email=!0,A("Please enter a valid email address"),b("error"),setTimeout(()=>A(null),3e3),E(he);return}if(P(r.email)){he.email=!0,A("This email has already been registered. Please use a different email or try logging in."),b("error"),E(he);return}if(!r.phone||!r.phone.trim()){he.phone=!0,A("Phone number is required"),b("error"),setTimeout(()=>A(null),3e3),E(he);return}if(!r.password){he.password=!0,A("Password is required"),b("error"),setTimeout(()=>A(null),3e3),E(he);return}if(r.password.length<6){he.password=!0,A("Password must be at least 6 characters long"),b("error"),setTimeout(()=>A(null),3e3),E(he);return}if(r.password!==r.confirmPassword){he.confirmPassword=!0,A("Passwords do not match"),b("error"),setTimeout(()=>A(null),3e3),E(he);return}E({name:!1,email:!1,phone:!1,password:!1,confirmPassword:!1}),l(!0);try{const ee=await fetch("http://localhost:4000/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.name.trim(),email:r.email.trim().toLowerCase(),phone:r.phone.trim(),password:r.password,status:"Pending",balance:"$0",nextDue:"",lastPayment:"",subscriptionType:r.subscriptionType})}),xe=await ee.json();if(!ee.ok){const z=xe.message||xe.error||"Failed to create account";throw z.toLowerCase().includes("email")||z.toLowerCase().includes("already exists")||z.toLowerCase().includes("duplicate")?new Error("This email has already been registered. Please use a different email or try logging in."):new Error(z)}A("Account created successfully! Your account is pending approval. You will be able to login once an admin approves your account."),b("success"),setTimeout(()=>{I("/login",{replace:!0,state:{message:"Account created successfully! Your account is pending approval. Please wait for admin approval before logging in.",email:r.email}})},3e3)}catch(ge){console.error("Signup error:",ge),A(ge.message||"Failed to create account. Please try again."),b("error")}finally{l(!1)}};return t.jsxs(t.Fragment,{children:[t.jsx(Jc,{showCTA:!1}),t.jsx("main",{className:"login-main",children:t.jsxs("div",{className:"login-shell",children:[t.jsxs("aside",{className:"login-menu",children:[t.jsx("p",{className:"eyebrow light",children:"Welcome"}),t.jsx("h2",{children:"Subscription Manager HK"}),t.jsx("p",{children:"Create your member account to access the subscription portal."}),t.jsxs("ul",{children:[t.jsx("li",{children:"Track your subscription payments"}),t.jsx("li",{children:"View invoices and payment history"}),t.jsx("li",{children:"Manage your profile and preferences"})]})]}),t.jsxs("div",{className:"login-form-card",children:[t.jsxs("div",{className:"login-form-card__header",children:[t.jsxs("h1",{children:[t.jsx("i",{className:"fas fa-user-plus login-title-icon"}),"Create Account"]}),t.jsxs("p",{children:["Already have an account? ",t.jsx(Gc,{to:"/login",className:"signup-link",children:"Sign in"})]})]}),t.jsxs("form",{onSubmit:H,noValidate:!0,children:[t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user login-icon"}),"Full Name ",t.jsx("span",{className:"login-required",children:"*"})]}),t.jsx("input",{type:"text",required:!0,onInvalid:fe=>fe.preventDefault(),value:r.name,onChange:fe=>{o({...r,name:fe.target.value}),U.name&&E(he=>({...he,name:!1}))},placeholder:"Enter your full name",className:`mono-input ${U.name?"signup-input-error":""}`})]}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-envelope login-icon"}),"Email ",t.jsx("span",{className:"login-required",children:"*"})]}),t.jsx("input",{type:"email",required:!0,onInvalid:fe=>fe.preventDefault(),value:r.email,onChange:fe=>{W(fe),U.email&&E(he=>({...he,email:!1}))},onBlur:X,placeholder:"Enter your email address",className:`mono-input ${U.email?"signup-input-error":""}`})]}),t.jsx("div",{className:"mono-label",children:t.jsx(Kd,{label:t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-phone login-icon"}),"Phone Number ",t.jsx("span",{className:"login-required",children:"*"})]}),value:r.phone,onChange:fe=>{o({...r,phone:fe.target.value}),U.phone&&E(he=>({...he,phone:!1}))},onError:fe=>{A(fe),b("error"),E(he=>({...he,phone:!0}))},placeholder:"Enter your phone number",required:!0,className:`mono-input ${U.phone?"signup-input-error":""}`})}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-id-card login-icon"}),"Subscription Type ",t.jsx("span",{className:"login-required",children:"*"})]}),t.jsxs("div",{className:"signup-subscription-grid",children:[t.jsxs("button",{type:"button",onClick:()=>o({...r,subscriptionType:"Lifetime"}),className:`signup-subscription-button ${r.subscriptionType==="Lifetime"?"signup-subscription-button--active":"signup-subscription-button--default"}`,children:[t.jsx("div",{className:"signup-subscription-button-title",children:"Lifetime"}),t.jsx("div",{className:"signup-subscription-button-price",children:"$250/year"})]}),t.jsxs("button",{type:"button",onClick:()=>o({...r,subscriptionType:"Yearly + Janaza Fund"}),className:`signup-subscription-button ${r.subscriptionType==="Yearly + Janaza Fund"?"signup-subscription-button--active":"signup-subscription-button--default"}`,children:[t.jsx("div",{className:"signup-subscription-button-title",children:"Yearly + Janaza Fund"}),t.jsx("div",{className:"signup-subscription-button-price",children:"$500/year"})]})]})]}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock login-icon"}),"Password ",t.jsx("span",{className:"login-required",children:"*"})]}),t.jsxs("div",{className:"login-input-wrapper",children:[t.jsx("input",{type:m?"text":"password",required:!0,onInvalid:fe=>fe.preventDefault(),value:r.password,onChange:fe=>o({...r,password:fe.target.value}),placeholder:"Create a password (min. 6 characters)",className:"mono-input login-input--with-icon",minLength:6}),t.jsx("button",{type:"button",onClick:()=>p(!m),className:"login-password-toggle","aria-label":m?"Hide password":"Show password",children:m?t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock login-icon"}),"Confirm Password ",t.jsx("span",{className:"login-required",children:"*"})]}),t.jsxs("div",{className:"login-input-wrapper",children:[t.jsx("input",{type:g?"text":"password",required:!0,onInvalid:fe=>fe.preventDefault(),value:r.confirmPassword,onChange:fe=>{o({...r,confirmPassword:fe.target.value}),U.confirmPassword&&E(he=>({...he,confirmPassword:!1}))},placeholder:"Confirm your password",className:`mono-input login-input--with-icon ${U.confirmPassword?"signup-input-error":""}`,minLength:6}),t.jsx("button",{type:"button",onClick:()=>v(!g),className:"login-password-toggle","aria-label":g?"Hide password":"Show password",children:g?t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),t.jsx("button",{type:"submit",className:"primary-btn signup-submit-button",disabled:c,children:c?"Creating Account...":"Create Account"})]}),t.jsx(Wd,{isOpen:!!error,message:error,type:"error",onClose:()=>setError(null)}),t.jsx(Wd,{isOpen:!!success,message:success,type:"success",onClose:()=>setSuccess(null)}),t.jsx($l,{message:j,type:M,onClose:()=>A(null),duration:3e3})]})]})}),t.jsx(Kc,{})]})}function Cy(){const{members:i,admins:a,invoices:r,payments:o,paymentHistory:c,donations:l,paymentMethods:m,communicationLog:p,fetchMembers:g,fetchAdmins:v,fetchInvoices:j,fetchPayments:A,fetchDonations:M,fetchPaymentMethods:b,addMember:U,updateMember:E,deleteMember:I,addAdminUser:P,updateAdminUser:W,deleteAdminUser:X,addInvoice:H,updateInvoice:fe,deleteInvoice:he,addDonation:Ee,deleteDonation:ge,updatePaymentMethod:ee,loading:xe}=Qd(),z=fo(),[$,le]=Q.useState("members"),[ie,we]=Q.useState(!1),[_e,Ie]=Q.useState(null),[pe,Pe]=Q.useState(null),[ze,te]=Q.useState("success"),[C,J]=Q.useState({name:"",email:"",phone:"",password:"",status:"Active",balance:"$0",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"}),[Z,de]=Q.useState({name:"",email:"",password:"",role:"Viewer",status:"Active"}),[ce,be]=Q.useState({memberId:"",memberName:"",period:"",amount:"",invoiceType:"Lifetime",due:"",status:"Unpaid",notes:""}),[Me,Fe]=Q.useState(!1),[We,De]=Q.useState(!1),[it,ot]=Q.useState({donorName:"",isMember:!1,memberId:"",amount:"",notes:""}),[pt,V]=Q.useState({name:"",visible:!0,qrImageUrl:"",details:[]});Q.useEffect(()=>{g(),v(),j(),A(),M(),b()},[]);const et=(oe,xt="success")=>{Pe(oe),te(xt)},Et=()=>{et("You have been logged out","success"),setTimeout(()=>{sessionStorage.clear(),z("/login",{replace:!0})},500)},Ct=async oe=>{oe.preventDefault();try{await U(C),et("Member added successfully!"),we(!1),Pt(),g()}catch(xt){et(xt.message||"Failed to add member","error")}},Xe=async oe=>{oe.preventDefault();try{await E(_e.id,C),et("Member updated successfully!"),we(!1),Ie(null),Pt(),g()}catch(xt){et(xt.message||"Failed to update member","error")}},bt=async oe=>{if(window.confirm("Are you sure you want to delete this member?"))try{await I(oe),et("Member deleted successfully!"),g()}catch(xt){et(xt.message||"Failed to delete member","error")}},mt=oe=>{Ie(oe),J({name:oe.name||"",email:oe.email||"",phone:oe.phone||"",password:"",status:oe.status||"Active",balance:oe.balance||"$0",nextDue:oe.nextDue||"",lastPayment:oe.lastPayment||"",subscriptionType:oe.subscriptionType||"Lifetime"}),we(!0)},Pt=()=>{J({name:"",email:"",phone:"",password:"",status:"Active",balance:"$0",nextDue:"",lastPayment:"",subscriptionType:"Lifetime"})},Dt=async oe=>{oe.preventDefault();try{await P(Z),et("Admin added successfully!"),we(!1),$t(),v()}catch(xt){et(xt.message||"Failed to add admin","error")}},wt=async oe=>{oe.preventDefault();try{await W(_e.id,Z),et("Admin updated successfully!"),we(!1),Ie(null),$t(),v()}catch(xt){et(xt.message||"Failed to update admin","error")}},Qt=async oe=>{if(window.confirm("Are you sure you want to delete this admin?"))try{await X(oe),et("Admin deleted successfully!"),v()}catch(xt){et(xt.message||"Failed to delete admin","error")}},zt=oe=>{Ie(oe),de({name:oe.name||"",email:oe.email||"",password:"",role:oe.role||"Viewer",status:oe.status||"Active"}),we(!0)},$t=()=>{de({name:"",email:"",password:"",role:"Viewer",status:"Active"})},Ae=async oe=>{oe.preventDefault();try{const xt={...ce,amount:ce.amount.startsWith("$")?ce.amount:`$${ce.amount}`};await H(xt),et("Invoice added successfully!"),we(!1),rt(),j()}catch(xt){et(xt.message||"Failed to add invoice","error")}},qe=async oe=>{oe.preventDefault();try{const xt={...ce,amount:ce.amount.startsWith("$")?ce.amount:`$${ce.amount}`};await fe(_e.id,xt),et("Invoice updated successfully!"),we(!1),Ie(null),rt(),j()}catch(xt){et(xt.message||"Failed to update invoice","error")}},se=async oe=>{if(window.confirm("Are you sure you want to delete this invoice?"))try{await he(oe),et("Invoice deleted successfully!"),j()}catch(xt){et(xt.message||"Failed to delete invoice","error")}},Se=oe=>{Ie(oe),be({memberId:oe.memberId||"",memberName:oe.memberName||"",period:oe.period||"",amount:oe.amount?.replace("$","")||"",invoiceType:oe.invoiceType||"Lifetime",due:oe.due||"",status:oe.status||"Unpaid",notes:oe.notes||""}),we(!0)},rt=()=>{be({memberId:"",memberName:"",period:"",amount:"",invoiceType:"Lifetime",due:"",status:"Unpaid",notes:""})},ht=async oe=>{oe.preventDefault();try{await Ee(it),et("Donation added successfully!"),we(!1),Vt(),M()}catch(xt){et(xt.message||"Failed to add donation","error")}},He=async oe=>{oe.preventDefault();try{et("Donation update functionality not available","error"),we(!1),Ie(null),Vt()}catch(xt){et(xt.message||"Failed to update donation","error")}},ct=async oe=>{if(window.confirm("Are you sure you want to delete this donation?"))try{await ge(oe),et("Donation deleted successfully!"),M()}catch(xt){et(xt.message||"Failed to delete donation","error")}},Vt=()=>{ot({donorName:"",isMember:!1,memberId:"",amount:"",notes:""})},vt=async oe=>{oe.preventDefault();try{const pa=await fetch("http://localhost:4000/api/payment-methods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pt)});if(!pa.ok){const ln=await pa.json().catch(()=>({}));throw new Error(ln.error||"Failed to add payment method")}et("Payment method added successfully!"),we(!1),Ut(),b()}catch(xt){et(xt.message||"Failed to add payment method","error")}},An=async oe=>{oe.preventDefault();try{await ee(_e.name,pt),et("Payment method updated successfully!"),we(!1),Ie(null),Ut(),b()}catch(xt){et(xt.message||"Failed to update payment method","error")}},Jt=oe=>{Ie(oe),V({name:oe.name||"",visible:oe.visible!==void 0?oe.visible:!0,qrImageUrl:oe.qrImageUrl||"",details:Array.isArray(oe.details)?oe.details:[]}),we(!0)},Ut=()=>{V({name:"",visible:!0,qrImageUrl:"",details:[]})},gn=()=>{Ie(null),$==="members"?Pt():$==="admins"?$t():$==="invoices"?rt():$==="donations"?Vt():$==="payment-methods"&&Ut(),we(!0)},Xt=()=>{we(!1),Ie(null),$==="members"?Pt():$==="admins"?$t():$==="invoices"?rt():$==="donations"?Vt():$==="payment-methods"&&Ut()};return xe?t.jsxs("div",{className:"server-loading",children:[t.jsx("div",{className:"server-loading-spinner"}),t.jsx("p",{className:"server-loading-text",children:"Loading data from server..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(Jc,{showCTA:!1,showLogout:!0,onLogout:Et,isSticky:!0}),t.jsx($l,{message:pe,type:ze,onClose:()=>Pe(null),duration:3e3}),t.jsx("main",{className:"server-main server-main--sticky-header",children:t.jsx("div",{className:"server-layout",children:t.jsxs("article",{className:"server-card",children:[t.jsxs("header",{className:"server-header",children:[t.jsxs("h3",{children:[t.jsx("i",{className:"fas fa-server"}),"Server Management"]}),t.jsx("p",{children:"Manage all data entities: Members, Admins, Invoices, Payments, Donations, and Payment Methods"})]}),t.jsxs("div",{className:"server-nav",children:[t.jsxs("button",{className:`server-nav-btn ${$==="members"?"active":""}`,onClick:()=>{le("members"),we(!1),Ie(null)},children:[t.jsx("i",{className:"fas fa-users"}),"Members (",i.length,")"]}),t.jsxs("button",{className:`server-nav-btn ${$==="admins"?"active":""}`,onClick:()=>{le("admins"),we(!1),Ie(null)},children:[t.jsx("i",{className:"fas fa-user-shield"}),"Admins (",a.length,")"]}),t.jsxs("button",{className:`server-nav-btn ${$==="invoices"?"active":""}`,onClick:()=>{le("invoices"),we(!1),Ie(null)},children:[t.jsx("i",{className:"fas fa-file-invoice"}),"Invoices (",r.length,")"]}),t.jsxs("button",{className:`server-nav-btn ${$==="payments"?"active":""}`,onClick:()=>{le("payments"),we(!1),Ie(null)},children:[t.jsx("i",{className:"fas fa-credit-card"}),"Payments (",c?.length||0,")"]}),t.jsxs("button",{className:`server-nav-btn ${$==="donations"?"active":""}`,onClick:()=>{le("donations"),we(!1),Ie(null)},children:[t.jsx("i",{className:"fas fa-hand-holding-heart"}),"Donations (",l?.length||0,")"]}),t.jsxs("button",{className:`server-nav-btn ${$==="payment-methods"?"active":""}`,onClick:()=>{le("payment-methods"),we(!1),Ie(null)},children:[t.jsx("i",{className:"fas fa-wallet"}),"Payment Methods (",m?.length||0,")"]})]}),t.jsxs("div",{className:"server-content",children:[$==="members"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"server-section-header",children:[t.jsx("h4",{children:"Members Management"}),t.jsxs("button",{className:"server-add-btn",onClick:gn,children:[t.jsx("i",{className:"fas fa-plus"}),"Add Member"]})]}),ie&&t.jsxs("div",{className:"server-form-card",children:[t.jsx("h4",{children:_e?"Edit Member":"Add New Member"}),t.jsxs("form",{className:"server-form-grid",onSubmit:_e?Xe:Ct,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user server-form-icon"}),"Name ",t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:C.name,onChange:oe=>J({...C,name:oe.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-envelope server-form-icon"}),"Email ",t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsx("input",{type:"email",required:!0,value:C.email,onChange:oe=>J({...C,email:oe.target.value}),className:"mono-input"})]}),t.jsx("div",{children:t.jsx(Kd,{label:t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-phone server-form-icon"}),"Phone"]}),value:C.phone,onChange:oe=>J({...C,phone:oe.target.value}),onError:oe=>{et(oe,"error")},placeholder:"Enter phone number",className:"mono-input"})}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock server-form-icon"}),"Password ",_e?"(leave blank to keep current)":t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsxs("div",{className:"server-form-input-wrapper",children:[t.jsx("input",{type:Me?"text":"password",required:!_e,value:C.password,onChange:oe=>J({...C,password:oe.target.value}),className:"mono-input login-input--with-icon"}),t.jsx("button",{type:"button",onClick:()=>Fe(!Me),className:"login-password-toggle",children:t.jsx("i",{className:`fas ${Me?"fa-eye-slash":"fa-eye"}`})})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-toggle-on server-form-icon"}),"Status"]}),t.jsxs("select",{value:C.status,onChange:oe=>J({...C,status:oe.target.value}),className:"mono-input",children:[t.jsx("option",{value:"Active",children:"Active"}),t.jsx("option",{value:"Inactive",children:"Inactive"}),t.jsx("option",{value:"Pending",children:"Pending"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-dollar-sign server-form-icon"}),"Balance"]}),t.jsx("input",{type:"text",value:C.balance,onChange:oe=>J({...C,balance:oe.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar server-form-icon"}),"Next Due"]}),t.jsx("input",{type:"text",value:C.nextDue,onChange:oe=>J({...C,nextDue:oe.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-check server-form-icon"}),"Last Payment"]}),t.jsx("input",{type:"text",value:C.lastPayment,onChange:oe=>J({...C,lastPayment:oe.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-id-card server-form-icon"}),"Subscription Type"]}),t.jsxs("select",{value:C.subscriptionType,onChange:oe=>J({...C,subscriptionType:oe.target.value}),className:"mono-input",children:[t.jsx("option",{value:"Lifetime",children:"Lifetime"}),t.jsx("option",{value:"Yearly + Janaza Fund",children:"Yearly + Janaza Fund"})]})]}),t.jsxs("div",{className:"server-form-actions",children:[t.jsx("button",{type:"button",className:"secondary-btn",onClick:Xt,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[_e?"Update":"Add"," Member"]})]})]})]}),t.jsx("div",{className:"server-table-container",children:t.jsx(fi,{columns:["ID","Name","Email","Phone","Status","Balance","Actions"],rows:i.map(oe=>({ID:oe.id,Name:oe.name,Email:oe.email,Phone:oe.phone||"-",Status:{render:()=>t.jsx("span",{className:oe.status==="Active"?"server-badge server-badge--active":oe.status==="Pending"?"server-badge server-badge--pending":"server-badge server-badge--inactive",children:oe.status})},Balance:oe.balance||"$0",Actions:{render:()=>t.jsxs("div",{className:"server-action-buttons",children:[t.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>mt(oe),children:[t.jsx("i",{className:"fas fa-edit"}),"Edit"]}),t.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>bt(oe.id),title:"Delete Member","aria-label":"Delete Member",children:t.jsx("i",{className:"fas fa-trash"})})]})}}))})})]}),$==="admins"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"server-section-header",children:[t.jsx("h4",{children:"Admins Management"}),t.jsxs("button",{className:"server-add-btn",onClick:gn,children:[t.jsx("i",{className:"fas fa-plus"}),"Add Admin"]})]}),ie&&t.jsxs("div",{className:"server-form-card",children:[t.jsx("h4",{children:_e?"Edit Admin":"Add New Admin"}),t.jsxs("form",{className:"server-form-grid",onSubmit:_e?wt:Dt,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user server-form-icon"}),"Name ",t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:Z.name,onChange:oe=>de({...Z,name:oe.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-envelope server-form-icon"}),"Email ",t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsx("input",{type:"email",required:!0,value:Z.email,onChange:oe=>de({...Z,email:oe.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock server-form-icon"}),"Password ",_e?"(leave blank to keep current)":t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsxs("div",{className:"server-form-input-wrapper",children:[t.jsx("input",{type:We?"text":"password",required:!_e,value:Z.password,onChange:oe=>de({...Z,password:oe.target.value}),className:"mono-input login-input--with-icon"}),t.jsx("button",{type:"button",onClick:()=>De(!We),className:"login-password-toggle",children:t.jsx("i",{className:`fas ${We?"fa-eye-slash":"fa-eye"}`})})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user-tag server-form-icon"}),"Role"]}),t.jsxs("select",{value:Z.role,onChange:oe=>de({...Z,role:oe.target.value}),className:"mono-input",children:[t.jsx("option",{value:"Viewer",children:"Viewer"}),t.jsx("option",{value:"Editor",children:"Editor"}),t.jsx("option",{value:"Admin",children:"Admin"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-toggle-on server-form-icon"}),"Status"]}),t.jsxs("select",{value:Z.status,onChange:oe=>de({...Z,status:oe.target.value}),className:"mono-input",children:[t.jsx("option",{value:"Active",children:"Active"}),t.jsx("option",{value:"Inactive",children:"Inactive"})]})]}),t.jsxs("div",{className:"server-form-actions",children:[t.jsx("button",{type:"button",className:"secondary-btn",onClick:Xt,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[_e?"Update":"Add"," Admin"]})]})]})]}),t.jsx("div",{className:"server-table-container",children:t.jsx(fi,{columns:["ID","Name","Email","Role","Status","Actions"],rows:a.map(oe=>({ID:oe.id,Name:oe.name,Email:oe.email,Role:oe.role||"Viewer",Status:{render:()=>t.jsx("span",{className:oe.status==="Active"?"server-badge server-badge--active":"server-badge server-badge--inactive",children:oe.status})},Actions:{render:()=>t.jsxs("div",{className:"server-action-buttons",children:[t.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>zt(oe),children:[t.jsx("i",{className:"fas fa-edit"}),"Edit"]}),t.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>Qt(oe.id),title:"Delete Admin","aria-label":"Delete Admin",children:t.jsx("i",{className:"fas fa-trash"})})]})}}))})})]}),$==="invoices"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"server-section-header",children:[t.jsx("h4",{children:"Invoices Management"}),t.jsxs("button",{className:"server-add-btn",onClick:gn,children:[t.jsx("i",{className:"fas fa-plus"}),"Add Invoice"]})]}),ie&&t.jsxs("div",{className:"server-form-card",children:[t.jsx("h4",{children:_e?"Edit Invoice":"Add New Invoice"}),t.jsxs("form",{className:"server-form-grid",onSubmit:_e?qe:Ae,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user server-form-icon"}),"Member ID ",t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:ce.memberId,onChange:oe=>be({...ce,memberId:oe.target.value}),className:"mono-input",placeholder:"e.g. HK1001"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user server-form-icon"}),"Member Name ",t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:ce.memberName,onChange:oe=>be({...ce,memberName:oe.target.value}),className:"mono-input"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar server-form-icon"}),"Period ",t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:ce.period,onChange:oe=>be({...ce,period:oe.target.value}),className:"mono-input",placeholder:"e.g. Nov 2025"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-id-card server-form-icon"}),"Invoice Type"]}),t.jsxs("select",{value:ce.invoiceType,onChange:oe=>be({...ce,invoiceType:oe.target.value}),className:"mono-input",children:[t.jsx("option",{value:"Lifetime",children:"Lifetime"}),t.jsx("option",{value:"Yearly + Janaza Fund",children:"Yearly + Janaza Fund"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-dollar-sign server-form-icon"}),"Amount ",t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsx("input",{type:"number",required:!0,value:ce.amount,onChange:oe=>be({...ce,amount:oe.target.value}),className:"mono-input",placeholder:"e.g. 50"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-calendar-check server-form-icon"}),"Due Date ",t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsx("input",{type:"date",required:!0,value:ce.due,onChange:oe=>{const xt=oe.target.value;be({...ce,due:xt})},onBlur:oe=>{const xt=oe.target.value;if(xt){const pa=new Date(xt);if(isNaN(pa.getTime())){et("Invalid date format. Please enter a valid date (YYYY-MM-DD)","error");return}const[ln,jr,nn]=xt.split("-").map(Number);if(jr<1||jr>12){et("Invalid month. Please enter a month between 01 and 12","error");return}if(nn<1||nn>31){et("Invalid day. Please enter a valid day for the selected month","error");return}const St=new Date(ln,jr,0).getDate();if(nn>St){et(`Invalid date. ${jr}/${ln} only has ${St} days`,"error");return}}},className:"mono-input server-form-input-full-width"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-info-circle server-form-icon"}),"Status"]}),t.jsxs("select",{value:ce.status,onChange:oe=>be({...ce,status:oe.target.value}),className:"mono-input",children:[t.jsx("option",{value:"Unpaid",children:"Unpaid"}),t.jsx("option",{value:"Paid",children:"Paid"}),t.jsx("option",{value:"Overdue",children:"Overdue"}),t.jsx("option",{value:"Pending Verification",children:"Pending Verification"})]})]}),t.jsxs("label",{className:"notes server-form-notes-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-sticky-note"}),"Notes"]}),t.jsx("textarea",{value:ce.notes,onChange:oe=>be({...ce,notes:oe.target.value}),className:"mono-input server-form-textarea"})]}),t.jsxs("div",{className:"server-form-actions",children:[t.jsx("button",{type:"button",className:"secondary-btn",onClick:Xt,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[_e?"Update":"Add"," Invoice"]})]})]})]}),t.jsx("div",{className:"server-table-container",children:t.jsx(fi,{columns:["Invoice #","Member","Period","Amount","Status","Due Date","Actions"],rows:r.map(oe=>({"Invoice #":oe.id,Member:oe.memberName||oe.memberId||"-",Period:oe.period,Amount:oe.amount,Status:{render:()=>t.jsx("span",{className:oe.status==="Paid"?"server-badge server-badge--success":oe.status==="Overdue"?"server-badge server-badge--danger":oe.status==="Pending Verification"?"server-badge server-badge--pending":"server-badge server-badge--warning",children:oe.status})},"Due Date":oe.due,Actions:{render:()=>t.jsxs("div",{className:"server-action-buttons",children:[t.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>Se(oe),children:[t.jsx("i",{className:"fas fa-edit"}),"Edit"]}),t.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>se(oe.id),title:"Delete Invoice","aria-label":"Delete Invoice",children:t.jsx("i",{className:"fas fa-trash"})})]})}}))})})]}),$==="payments"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"server-section-header",children:t.jsx("h4",{children:"Payments Management"})}),t.jsx("div",{className:"server-table-container",children:t.jsx(fi,{columns:["Date","Member","Amount","Method","Status","Reference","Period"],rows:(c||[]).map(oe=>({Date:oe.date||"-",Member:oe.member||oe.memberName||oe.memberId||"-",Amount:oe.amount||"$0",Method:oe.method||"-",Status:{render:()=>t.jsx("span",{className:oe.status==="Paid"||oe.status==="Completed"?"server-badge server-badge--success":oe.status==="Pending"||oe.status==="Pending Verification"?"server-badge server-badge--pending":oe.status==="Rejected"?"server-badge server-badge--danger":"server-badge server-badge--warning",children:oe.status})},Reference:oe.reference||"-",Period:oe.period||"-"}))})})]}),$==="donations"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"server-section-header",children:[t.jsx("h4",{children:"Donations Management"}),t.jsxs("button",{className:"server-add-btn",onClick:gn,children:[t.jsx("i",{className:"fas fa-plus"}),"Add Donation"]})]}),ie&&t.jsxs("div",{className:"server-form-card",children:[t.jsx("h4",{children:_e?"Edit Donation":"Add New Donation"}),t.jsxs("form",{className:"server-form-grid",onSubmit:_e?He:ht,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user server-form-icon"}),"Donor Name ",t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:it.donorName,onChange:oe=>ot({...it,donorName:oe.target.value}),className:"mono-input",placeholder:"Enter donor name"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-dollar-sign server-form-icon"}),"Amount ",t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsx("input",{type:"number",required:!0,value:it.amount,onChange:oe=>ot({...it,amount:oe.target.value}),className:"mono-input",placeholder:"Enter amount"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-check-circle server-form-icon"}),"Is Member"]}),t.jsxs("select",{value:it.isMember?"true":"false",onChange:oe=>ot({...it,isMember:oe.target.value==="true"}),className:"mono-input",children:[t.jsx("option",{value:"false",children:"No"}),t.jsx("option",{value:"true",children:"Yes"})]})]}),it.isMember&&t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-user server-form-icon"}),"Member ID"]}),t.jsx("input",{type:"text",value:it.memberId,onChange:oe=>ot({...it,memberId:oe.target.value}),className:"mono-input",placeholder:"Enter member ID"})]}),t.jsxs("label",{className:"notes server-form-notes-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-sticky-note"}),"Notes"]}),t.jsx("textarea",{value:it.notes,onChange:oe=>ot({...it,notes:oe.target.value}),className:"mono-input server-form-textarea"})]}),t.jsxs("div",{className:"server-form-actions",children:[t.jsx("button",{type:"button",className:"secondary-btn",onClick:Xt,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[_e?"Update":"Add"," Donation"]})]})]})]}),t.jsx("div",{className:"server-table-container",children:t.jsx(fi,{columns:["Donor","Amount","Is Member","Member ID","Date","Actions"],rows:(l||[]).map(oe=>({Donor:oe.donorName||"-",Amount:oe.amount?`$${oe.amount}`:"$0","Is Member":oe.isMember?"Yes":"No","Member ID":oe.memberId||"-",Date:oe.date||"-",Actions:{render:()=>t.jsx("div",{className:"server-action-buttons",children:t.jsx("button",{className:"server-action-btn server-action-btn--delete",onClick:()=>ct(oe._id||oe.id),title:"Delete Donation","aria-label":"Delete Donation",children:t.jsx("i",{className:"fas fa-trash"})})})}}))})})]}),$==="payment-methods"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"server-section-header",children:[t.jsx("h4",{children:"Payment Methods Management"}),t.jsxs("button",{className:"server-add-btn",onClick:gn,children:[t.jsx("i",{className:"fas fa-plus"}),"Add Payment Method"]})]}),ie&&t.jsxs("div",{className:"server-form-card",children:[t.jsx("h4",{children:_e?"Edit Payment Method":"Add New Payment Method"}),t.jsxs("form",{className:"server-form-grid",onSubmit:_e?An:vt,noValidate:!0,children:[t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-wallet server-form-icon"}),"Name ",t.jsx("span",{className:"server-form-required",children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:pt.name,onChange:oe=>V({...pt,name:oe.target.value}),className:"mono-input",placeholder:"e.g. FPS, PayMe, Bank Transfer"})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-eye server-form-icon"}),"Visible"]}),t.jsxs("select",{value:pt.visible?"true":"false",onChange:oe=>V({...pt,visible:oe.target.value==="true"}),className:"mono-input",children:[t.jsx("option",{value:"true",children:"Yes"}),t.jsx("option",{value:"false",children:"No"})]})]}),t.jsxs("label",{children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-image server-form-icon"}),"QR Image URL"]}),t.jsx("input",{type:"url",value:pt.qrImageUrl,onChange:oe=>V({...pt,qrImageUrl:oe.target.value}),className:"mono-input",placeholder:"Enter QR code image URL"})]}),t.jsxs("label",{className:"notes server-form-notes-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-list server-form-icon"}),"Details (one per line)"]}),t.jsx("textarea",{value:Array.isArray(pt.details)?pt.details.join(`
`):"",onChange:oe=>V({...pt,details:oe.target.value.split(`
`).filter(xt=>xt.trim())}),className:"mono-input server-form-textarea",placeholder:"Enter details, one per line"})]}),t.jsxs("div",{className:"server-form-actions",children:[t.jsx("button",{type:"button",className:"secondary-btn",onClick:Xt,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"primary-btn",children:[_e?"Update":"Add"," Payment Method"]})]})]})]}),t.jsx("div",{className:"server-table-container",children:t.jsx(fi,{columns:["Name","Visible","QR Image","Details","Actions"],rows:(m||[]).map(oe=>({Name:oe.name||"-",Visible:{render:()=>t.jsx("span",{className:oe.visible?"server-badge server-badge--success":"server-badge server-badge--inactive",children:oe.visible?"Yes":"No"})},"QR Image":oe.qrImageUrl?t.jsx("a",{href:oe.qrImageUrl,target:"_blank",rel:"noopener noreferrer",className:"server-link",children:"View Image"}):"-",Details:Array.isArray(oe.details)?oe.details.join(", "):"-",Actions:{render:()=>t.jsx("div",{className:"server-action-buttons",children:t.jsxs("button",{className:"server-action-btn server-action-btn--edit",onClick:()=>Jt(oe),children:[t.jsx("i",{className:"fas fa-edit"}),"Edit"]})})}}))})})]})]})]})})}),t.jsx(Kc,{})]})}function Py(){const[i,a]=Q.useState(""),[r,o]=Q.useState(!1),[c,l]=Q.useState(!1),[m,p]=Q.useState(""),[g,v]=Q.useState(null),[j,A]=Q.useState("error"),M=fo();Q.useEffect(()=>(document.body.classList.add("login-page-body"),()=>{document.body.classList.remove("login-page-body")}),[]);const b=E=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E),U=async E=>{if(E.preventDefault(),!r){if(p(""),v(null),!i.trim()){p("Email is required"),v("Email is required"),A("error");return}if(!b(i.trim())){p("Please enter a valid email address"),v("Please enter a valid email address"),A("error");return}o(!0),v(null);try{const P=await fetch("http://localhost:4000/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.trim()})});let W;try{W=await P.json()}catch(X){console.error("Failed to parse response:",X),v("Server returned an invalid response. Please try again."),A("error"),o(!1);return}if(!P.ok||!W.success){const X=W.message||"Failed to send reset request. Please try again.";v(X),A("error"),o(!1);return}l(!0),o(!1)}catch(I){console.error("Forgot password error:",I),v("Unable to connect. Please check your connection and try again."),A("error"),o(!1)}}};return t.jsx(t.Fragment,{children:t.jsx("main",{className:"login-main",children:t.jsxs("div",{className:"login-shell",children:[t.jsxs("aside",{className:"login-menu",children:[t.jsx("p",{className:"eyebrow light",children:"Password Recovery"}),t.jsx("h2",{children:"Request Password Reset"}),t.jsx("p",{children:"Enter your email address to request a password reset. Your request will be sent to the administrator for manual approval."}),t.jsxs("ul",{children:[t.jsx("li",{children:"Submit your email address"}),t.jsx("li",{children:"Administrator will review your request"}),t.jsx("li",{children:"You'll receive your new password after verification"})]})]}),t.jsxs("div",{className:"login-form-card",children:[t.jsx("div",{className:"login-form-card__header",children:t.jsxs("h1",{children:[t.jsx("i",{className:"fas fa-key login-title-icon"}),"Forgot Password"]})}),c?t.jsxs("div",{className:"forgot-password-success",children:[t.jsx("div",{className:"forgot-password-success-icon",children:t.jsx("i",{className:"fas fa-check"})}),t.jsx("h3",{className:"forgot-password-success-title",children:"Request Sent"}),t.jsx("p",{className:"forgot-password-success-message",children:"Your request has been sent to the administrator. You will receive your new password after verification."}),t.jsx("div",{className:"login-buttons",children:t.jsx("button",{type:"button",className:"btn-admin login-btn-full-width",onClick:()=>M("/login"),children:"Back to Login"})})]}):t.jsxs("form",{onSubmit:U,noValidate:!0,children:[t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-envelope login-icon"}),"Email ",t.jsx("span",{className:"login-required",children:"*"})]}),t.jsx("input",{type:"email",value:i,onChange:E=>{a(E.target.value),m&&p("")},onInvalid:E=>E.preventDefault(),placeholder:"Enter your email address",className:`mono-input ${m?"input-error":""}`,disabled:r})]}),t.jsx("div",{className:"login-buttons",children:t.jsx("button",{type:"submit",className:`btn-admin login-btn-wrapper login-btn-full-width ${r?"login-btn--loading":""}`,disabled:r,children:r?t.jsxs("span",{className:"login-btn-spinner",children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),t.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Sending..."]}):"Request Password Reset"})}),t.jsx("div",{className:"forgot-password-back-link",children:t.jsxs(Gc,{to:"/login",children:[t.jsx("i",{className:"fas fa-arrow-left forgot-password-back-link-icon"}),"Back to Login"]})})]}),t.jsx($l,{message:g,type:j,onClose:()=>v(null),duration:3e3})]})]})})})}function Ly(){const[i]=Tm(),[a,r]=Q.useState(""),[o,c]=Q.useState(""),[l,m]=Q.useState(!1),[p,g]=Q.useState(!1),[v,j]=Q.useState(null),[A,M]=Q.useState(!1),[b,U]=Q.useState(!1),[E,I]=Q.useState({password:"",confirmPassword:""}),[P,W]=Q.useState(null),[X,H]=Q.useState("error"),fe=fo(),he=i.get("token"),Ee=i.get("role")||"admin";Q.useEffect(()=>{he||j({type:"error",text:"Invalid reset link. Please request a new password reset."})},[he]);const ge=xe=>xe?xe.length<6?"Password must be at least 6 characters long":"":"Password is required",ee=async xe=>{xe.preventDefault();const z=ge(a),$=a!==o?"Passwords do not match":ge(o);if(I({password:z,confirmPassword:$}),z||$){W(z||$),H("error");return}if(!he){j({type:"error",text:"Invalid reset token. Please request a new password reset."});return}M(!0),j(null);try{const ie=await fetch("http://localhost:4000/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:he,newPassword:a,role:Ee})}),we=await ie.json();if(!ie.ok||!we.success){j({type:"error",text:we.message||"Failed to reset password. Please try again."}),M(!1);return}U(!0),j({type:"success",text:we.message||"Password has been reset successfully!"}),M(!1),setTimeout(()=>{fe("/login")},3e3)}catch(le){console.error("Reset password error:",le),j({type:"error",text:"Unable to connect. Please check your connection and try again."}),M(!1)}};return t.jsxs(t.Fragment,{children:[t.jsx(Jc,{showCTA:!1}),t.jsx("main",{className:"login-main",children:t.jsxs("div",{className:"login-shell",children:[t.jsxs("aside",{className:"login-menu",children:[t.jsx("p",{className:"eyebrow light",children:"Password Reset"}),t.jsx("h2",{children:"Create New Password"}),t.jsx("p",{children:"Enter your new password below. Make sure it's strong and secure."}),t.jsxs("ul",{children:[t.jsx("li",{children:"At least 6 characters long"}),t.jsx("li",{children:"Use a combination of letters and numbers"}),t.jsx("li",{children:"Don't reuse your old password"})]})]}),t.jsxs("div",{className:"login-form-card",children:[t.jsx("div",{className:"login-form-card__header",children:t.jsxs("h1",{children:[t.jsx("i",{className:"fas fa-lock login-title-icon"}),"Reset Password"]})}),b?t.jsxs("div",{className:"forgot-password-success",children:[t.jsx("div",{className:"forgot-password-success-icon",children:t.jsx("i",{className:"fas fa-check"})}),t.jsx("h3",{className:"forgot-password-success-title",children:"Password Reset Successful!"}),t.jsx("p",{className:"forgot-password-success-message",children:"Your password has been reset successfully. You can now login with your new password."}),t.jsx("p",{className:"forgot-password-success-message forgot-password-success-message--small",children:"Redirecting to login page in a few seconds..."}),t.jsx("div",{className:"login-buttons",children:t.jsx("button",{type:"button",className:"btn-admin login-btn-full-width",onClick:()=>fe("/login"),children:"Go to Login"})})]}):t.jsxs("form",{onSubmit:ee,noValidate:!0,children:[t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock login-icon"}),"New Password ",t.jsx("span",{className:"login-required",children:"*"})]}),t.jsxs("div",{className:"login-input-wrapper",children:[t.jsx("input",{type:l?"text":"password",value:a,onChange:xe=>{r(xe.target.value),E.password&&I({...E,password:""})},onBlur:()=>{const xe=ge(a);I({...E,password:xe}),xe&&(W(xe),H("error"))},onInvalid:xe=>xe.preventDefault(),placeholder:"Enter new password",className:`mono-input login-input--with-icon ${E.password?"input-error":""}`,disabled:A||!he,required:!0}),t.jsx("button",{type:"button",onClick:()=>m(!l),className:"login-password-toggle","aria-label":l?"Hide password":"Show password",disabled:A,children:l?t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),t.jsxs("label",{className:"mono-label",children:[t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-lock login-icon"}),"Confirm Password ",t.jsx("span",{className:"login-required",children:"*"})]}),t.jsxs("div",{className:"login-input-wrapper",children:[t.jsx("input",{type:p?"text":"password",value:o,onChange:xe=>{c(xe.target.value),E.confirmPassword&&I({...E,confirmPassword:""})},onBlur:()=>{const xe=a!==o?"Passwords do not match":ge(o);I({...E,confirmPassword:xe}),xe&&(W(xe),H("error"))},onInvalid:xe=>xe.preventDefault(),placeholder:"Confirm new password",className:`mono-input login-input--with-icon ${E.confirmPassword?"input-error":""}`,disabled:A||!he,required:!0}),t.jsx("button",{type:"button",onClick:()=>g(!p),className:"login-password-toggle","aria-label":p?"Hide password":"Show password",disabled:A,children:p?t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),t.jsx("div",{className:"login-buttons",children:t.jsx("button",{type:"submit",className:`btn-admin login-btn-wrapper login-btn-full-width ${A||!he?"login-btn--loading":""}`,disabled:A||!he,children:A?t.jsxs("span",{className:"login-btn-spinner",children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),t.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),"Resetting..."]}):"Reset Password"})}),t.jsx("div",{className:"forgot-password-back-link",children:t.jsxs(Gc,{to:"/login",children:[t.jsx("i",{className:"fas fa-arrow-left forgot-password-back-link-icon"}),"Back to Login"]})})]}),t.jsx(Wd,{isOpen:!!v,message:v?.text,type:v?.type||"error",onClose:()=>j(null)}),t.jsx($l,{message:P,type:X,onClose:()=>W(null),duration:3e3})]})]})}),t.jsx(Kc,{})]})}function _y(){return t.jsx(I1,{children:t.jsx(v1,{future:{v7_startTransition:!0},children:t.jsxs(u1,{children:[t.jsx(Eo,{path:"/",element:t.jsx(ep,{to:"/login",replace:!0})}),t.jsx(Eo,{path:"/login",element:t.jsx(L1,{})}),t.jsx(Eo,{path:"/signup",element:t.jsx(Ay,{})}),t.jsx(Eo,{path:"/forgot-password",element:t.jsx(Py,{})}),t.jsx(Eo,{path:"/reset-password",element:t.jsx(Ly,{})}),t.jsx(Eo,{path:"/admin",element:t.jsx(Ny,{})}),t.jsx(Eo,{path:"/member",element:t.jsx(ky,{})}),t.jsx(Eo,{path:"/server",element:t.jsx(Cy,{})}),t.jsx(Eo,{path:"*",element:t.jsx(ep,{to:"/login",replace:!0})})]})})})}const Iy="867870699456-djt0cnrakntduqs6g2gm3pk24vj6qoc9.apps.googleusercontent.com",_0=()=>{document.querySelectorAll("input[title], select[title], textarea[title], input[pattern], select[pattern], textarea[pattern]").forEach(a=>{a.removeAttribute("title"),a.removeAttribute("pattern")})},Ey=()=>{const i=()=>{document.querySelectorAll("input[required], select[required], textarea[required]").forEach(o=>{o.hasAttribute("data-invalid-handler-added")||(o.addEventListener("invalid",c=>{c.preventDefault(),c.stopPropagation()},{capture:!0}),o.setAttribute("data-invalid-handler-added","true"))})};i();const a=new MutationObserver(()=>{_0(),i()});document.body?a.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["title","required","pattern"]}):document.addEventListener("DOMContentLoaded",()=>{a.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["title","required","pattern"]})})};_0();Ey();vg.createRoot(document.getElementById("root")).render(t.jsx(Af.StrictMode,{children:t.jsx(P1,{clientId:Iy,children:t.jsx(_y,{})})}));export{ar as _,My as c,km as g};
